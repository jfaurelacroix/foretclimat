// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.35/esri/copyright.txt for details.
//>>built
/*
 @esri/arcgis-html-sanitizer - v2.2.0 - Tue Feb 04 2020 10:47:20 GMT-0800 (Pacific Standard Time)
 Copyright (c) 2020 - Environmental Systems Research Institute, Inc.
 Apache-2.0

 js-xss
 Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 http://ucdok.com
 MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details

 Lodash/isPlainObject
 Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
**************************************************************************** *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
**************************************************************************** @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
 Calcite Web - Calcite Design Components in CSS, JS and HTML
 @version v1.2.5
 @license Apache-2.0
 @copyright 2018 Esri
 @link https://github.com/Esri/calcite-web
*/
require({cache:{"dojo/hash":function(){define("./_base/kernel require ./_base/config ./aspect ./_base/lang ./topic ./domReady ./sniff".split(" "),function(b,y,q,a,h,e,g,f){function m(z,E){E=z.indexOf(E);return 0<=E?z.substring(E+1):""}function l(){return m(location.href,"#")}function d(){e.publish("/dojo/hashchange",l())}function c(){l()!==n&&(n=l(),d())}function k(z){if(u)if(u.isTransitioning())setTimeout(h.hitch(null,k,z),A);else{var E=u.iframe.location.href,w=E.indexOf("?");u.iframe.location.replace(E.substring(0,
w)+"?"+z)}else E=location.href.replace(/#.*/,""),location.replace(E+"#"+z),!x&&c()}function t(){function z(){n=l();D=C?n:m(F.href,"?");r=!1;v=null}var E=document.createElement("iframe"),w=q.dojoBlankHtmlUrl||y.toUrl("./resources/blank.html");E.id="dojo-hash-iframe";E.src=w+"?"+l();E.style.display="none";document.body.appendChild(E);this.iframe=b.global["dojo-hash-iframe"];var D,r,v,B,C,F=this.iframe.location;this.isTransitioning=function(){return r};this.pollLocation=function(){if(!C)try{var G=m(F.href,
"?");document.title!=B&&(B=this.iframe.document.title=document.title)}catch(J){C=!0}var H=l();if(r&&n===H)if(C||G===v)z(),d();else{setTimeout(h.hitch(this,this.pollLocation),0);return}else if(n!==H||!C&&D!==G){if(n!==H){n=H;r=!0;v=H;E.src=w+"?"+v;C=!1;setTimeout(h.hitch(this,this.pollLocation),0);return}C||(location.href="#"+F.search.substring(1),z(),d())}setTimeout(h.hitch(this,this.pollLocation),A)};z();setTimeout(h.hitch(this,this.pollLocation),A)}b.hash=function(z,E){if(!arguments.length)return l();
"#"==z.charAt(0)&&(z=z.substring(1));E?k(z):location.hash="#"+z;return z};var n,u,x,A=q.hashPollFrequency||100;g(function(){"onhashchange"in b.global&&(!f("ie")||8<=f("ie")&&"BackCompat"!=document.compatMode)?x=a.after(b.global,"onhashchange",d,!0):document.addEventListener?(n=l(),setInterval(c,A)):document.attachEvent&&(u=new t)});return b.hash})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(b,y){b.cookie=function(q,a,h){var e=document.cookie;if(1==arguments.length)var g=
(g=e.match(new RegExp("(?:^|; )"+y.escapeString(q)+"\x3d([^;]*)")))?decodeURIComponent(g[1]):void 0;else{h=h||{};e=h.expires;if("number"==typeof e){var f=new Date;f.setTime(f.getTime()+864E5*e);e=h.expires=f}e&&e.toUTCString&&(h.expires=e.toUTCString());a=encodeURIComponent(a);e=q+"\x3d"+a;for(var m in h)e+="; "+m,f=h[m],!0!==f&&(e+="\x3d"+f);document.cookie=e}return g};b.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled=
"CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return b.cookie})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(b,y,q,a){q=function(){return this}();var h={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},
sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:q.Worker&&!1,io:{errorHandler:function(e,g){y.publish("esri.Error",[e])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,
"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com",
"services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com",
"tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:q.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};a.config=h;b.noGlobals||(q.esriConfig=h);return h})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(b,y,q){b=function(){return this}();var a=b.location,h=a.pathname;q=a.protocol;a={version:"3.35",_appBaseUrl:q+"//"+a.host+h.substring(0,h.lastIndexOf(h.split("/")[h.split("/").length-1]))};y.noGlobals||(b.esri=a);(a.dijit=a.dijit||{})._arcgisUrl=("http:"===q||"https:"===q?q:"http:")+"//www.arcgis.com/sharing/rest";
return a})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(b,y,q,a){b=new b;y.id=a.safeMixin(b,q);return y.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u){y=y([n],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(x){h.mixin(this,x);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(x,A,z){this._nls||(this._nls=u.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var E=this._loginDialog,w=z&&z.error,D=z&&z.token,r=new a(function(){E.onCancel()});if(E.open)return x=Error("BUSY"),x.code="IdentityManager.1",x.log=!!q.isDebug,r.errback(x),r;k.hide(E.errMsg_);w&&403==w.code&&D&&(g.set(E.errMsg_,"innerHTML",this._nls.forbidden),k.show(E.errMsg_));E.dfd_=
r;E.serverInfo_=A;E.resUrl_=x;E.admin_=z&&z.isAdmin;g.set(E.resLink_,{title:x,innerHTML:"("+(this.getResourceName(x)||this._nls.lblItem)+")"});g.set(E.serverLink_,{title:A.server,innerHTML:(-1!==A.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":A.server)+" "});E.txtPwd_.set("value","");E.show();return r},_createLoginDialog:function(){var x=this._nls,A=c.substitute(x,this._dialogContent);A=c.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},A);var z=new l({title:x.title,content:A,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(E){E.charOrCode===f.ENTER&&this.execute_()},execute_:function(){var E=this.txtUser_.get("value"),w=this.txtPwd_.get("value"),D=this.dfd_,r=this;if(this.form_.validate()&&E&&w){this.btnSubmit_.set("label",x.lblSigning);var v=d.id.findCredential(r.resUrl_,E),B=function(C){r.btnSubmit_.set("label",
x.lblOk);r.btnSubmit_.set("disabled",!1);k.hide(r.errMsg_);r.hide();l._DialogLevelManager.hide(r);var F=r.serverInfo_;r.dfd_=r.serverInfo_=r.generateDfd_=r.resUrl_=null;var G=v;if(C){var H=C.token;var J=c.isDefined(C.expires)?Number(C.expires):null;var I=!!C.ssl;G?(G.userId=E,G.token=H,G.expires=J,G.validity=C.validity,G.ssl=I,G.creationTime=(new Date).getTime()):G=new t({userId:E,server:F.server,token:H,expires:J,ssl:I,isAdmin:r.admin_,validity:C.validity})}D.callback(G)};v&&!v._enqueued?B():(r.btnSubmit_.set("disabled",
!0),r.generateDfd_=d.id.generateToken(this.serverInfo_,{username:E,password:w},{isAdmin:this.admin_}).addCallback(B).addErrback(function(C){r.btnSubmit_.set("disabled",!1);r.generateDfd_=null;r.btnSubmit_.set("label",x.lblOk);g.set(r.errMsg_,"innerHTML",C&&C.code?x.invalidUser:x.noAuthService);k.show(r.errMsg_)}))}},cancel_:function(){z.generateDfd_&&z.generateDfd_.cancel();var E=z.dfd_,w=z.resUrl_,D=z.serverInfo_;z.btnSubmit_.set("disabled",!1);z.dfd_=z.serverInfo_=z.generateDfd_=z.resUrl_=null;
k.hide(z.errMsg_);l._DialogLevelManager.hide(z);z.esriIdMgr_.onDialogCancel({resourceUrl:w,serverInfo:D});w=Error("ABORTED");w.code="IdentityManager.2";w.log=!!q.isDebug;E.errback(w)}});A=z.domNode;z.form_=m.byNode(b.query(".esriIdForm",A)[0]);z.txtUser_=m.byNode(b.query(".esriIdUser",A)[0]);z.txtPwd_=m.byNode(b.query(".esriIdPwd",A)[0]);z.btnSubmit_=m.byNode(b.query(".esriIdSubmit",A)[0]);z.btnCancel_=m.byNode(b.query(".esriIdCancel",A)[0]);z.resLink_=b.query(".resLink",A)[0];z.serverLink_=b.query(".serverLink",
A)[0];z.errMsg_=b.query(".esriErrorMsg",A)[0];z.connect(z.txtUser_,"onKeyPress",z.keypressed_);z.connect(z.txtPwd_,"onKeyPress",z.keypressed_);z.connect(z.btnSubmit_,"onClick",z.execute_);z.connect(z.btnCancel_,"onClick",z.onCancel);z.connect(z,"onCancel",z.cancel_);return z}});return d.IdentityManagerDialog=d.IdentityManager=y})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B,C,F,G,H,J,I){function K(){}var R=new h;R.resolve(!0);D=a("dijit._DialogBase"+(u("dojo-bidi")?"_NoBidi":""),[v,C,F,B],{templateString:I,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:D.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(L){this._set("draggable",L)},maxRatio:.9,
closable:!0,_setClosableAttr:function(L){this.closeButtonNode.style.display=L?"":"none";this._set("closable",L)},postMixInProperties:function(){var L=d.getLocalization("dijit","common");k.mixin(this,L);this.inherited(arguments)},postCreate:function(){m.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);q.after(this,"onExecute",k.hitch(this,"hide"),!0);q.after(this,"onCancel",k.hitch(this,"hide"),!0);t(this.closeButtonNode,
x.press,function(L){L.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&P.isTop(this)&&(this._getFocusItems(),w.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();w.focus(this._firstFocusItem)},_endDrag:function(){var L=f.position(this.domNode),aa=A.getBox(this.ownerDocument);L.y=Math.min(Math.max(L.y,0),aa.h-L.h);L.x=Math.min(Math.max(L.x,0),aa.w-L.w);this._relativePosition=L;this._position()},
_setup:function(){var L=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==u("ie")?E:z)(L,{handle:this.titleBar}),q.after(this._moveable,"onMoveStop",k.hitch(this,"_endDrag"),!0)):g.add(L,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":y.map(this["class"].split(/\s/),function(aa){return aa+"_underlay"}).join(" "),_onKeyDown:k.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!g.contains(this.ownerDocumentBody,
"dojoMove")){var L=this.domNode,aa=A.getBox(this.ownerDocument),ba=this._relativePosition,O=f.position(L);m.set(L,{left:Math.floor(aa.l+(ba?Math.min(ba.x,aa.w-O.w):(aa.w-O.w)/2))+"px",top:Math.floor(aa.t+(ba?Math.min(ba.y,aa.h-O.h):(aa.h-O.h)/2))+"px"})}},_onKey:function(L){if(L.keyCode==c.TAB){this._getFocusItems();var aa=L.target;this._firstFocusItem==this._lastFocusItem?(L.stopPropagation(),L.preventDefault()):aa==this._firstFocusItem&&L.shiftKey?(w.focus(this._lastFocusItem),L.stopPropagation(),
L.preventDefault()):aa!=this._lastFocusItem||L.shiftKey||(w.focus(this._firstFocusItem),L.stopPropagation(),L.preventDefault())}else this.closable&&L.keyCode==c.ESCAPE&&(this.onCancel(),L.stopPropagation(),L.preventDefault())},show:function(){if(this.open)return R.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),P.hide(this));var L=A.get(this.ownerDocument);this._modalconnects.push(t(L,
"scroll",k.hitch(this,"resize",null)));this._modalconnects.push(t(this.domNode,"keydown",k.hitch(this,"_onKey")));m.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new h(k.hitch(this,function(){aa.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,K);L=this._fadeInDeferred.promise;var aa=l.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:k.hitch(this,function(){P.show(this,this.underlayAttrs)}),
onEnd:k.hitch(this,function(){this.autofocus&&P.isTop(this)&&(this._getFocusItems(),w.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return L},hide:function(){if(!this._alreadyInitialized||!this.open)return R.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new h(k.hitch(this,function(){aa.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,K);this._fadeOutDeferred.then(k.hitch(this,"onHide"));
var L=this._fadeOutDeferred.promise;var aa=l.fadeOut({node:this.domNode,duration:this.duration,onEnd:k.hitch(this,function(){this.domNode.style.display="none";P.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var ba;ba=this._modalconnects.pop();)ba.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return L},resize:function(L){if("none"!=this.domNode.style.display){this._checkIfSingleChild();
if(!L){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),y.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(V){V&&m.set(V,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var aa=A.getBox(this.ownerDocument);aa.w*=this.maxRatio;aa.h*=this.maxRatio;var ba=f.position(this.domNode);
this._shrunk=!1;ba.w>=aa.w&&(L={w:aa.w},f.setMarginBox(this.domNode,L),ba=f.position(this.domNode),this._shrunk=!0);ba.h>=aa.h&&(L||(L={w:ba.w}),L.h=aa.h,this._shrunk=!0);L&&(L.w||(L.w=ba.w),L.h||(L.h=ba.h))}if(L){f.setMarginBox(this.domNode,L);aa=[];this.titleBar&&aa.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&aa.push({domNode:this.actionBarNode,region:"bottom"});ba={domNode:this.containerNode,region:"center"};aa.push(ba);var O=J.marginBox2contentBox(this.domNode,L);J.layoutChildren(this.domNode,
O,aa);this._singleChild?(aa=J.marginBox2contentBox(this.containerNode,ba),this._singleChild.resize({w:aa.w,h:aa.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();u("touch")||L||this._position()}},_layoutChildren:function(){y.forEach(this.getChildren(),function(L){L.resize&&L.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();
for(var L;L=this._modalconnects.pop();)L.remove();P.hide(this);this.inherited(arguments)}});u("dojo-bidi")&&(D=a("dijit._DialogBase",D,{_setTitleAttr:function(L){this._set("title",L);this.titleNode.innerHTML=L;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(L){this._created&&this.textDir!=L&&(this._set("textDir",L),this.set("title",this.title))}}));var W=a("dijit.Dialog",[H,D],{});W._DialogBase=D;var P=W._DialogLevelManager={_beginZIndex:950,show:function(L,aa){S[S.length-1].focus=w.curNode;
var ba=S[S.length-1].dialog?S[S.length-1].zIndex+2:W._DialogLevelManager._beginZIndex;m.set(L.domNode,"zIndex",ba);G.show(aa,ba-1);S.push({dialog:L,underlayAttrs:aa,zIndex:ba})},hide:function(L){if(S[S.length-1].dialog==L){S.pop();var aa=S[S.length-1];1==S.length?G.hide():G.show(aa.underlayAttrs,aa.zIndex-1);if(L.refocus&&(L=aa.focus,!aa.dialog||L&&e.isDescendant(L,aa.dialog.domNode)||(aa.dialog._getFocusItems(),L=aa.dialog._firstFocusItem),L))try{L.focus()}catch(ba){}}else aa=y.indexOf(y.map(S,function(ba){return ba.dialog}),
L),-1!=aa&&S.splice(aa,1)},isTop:function(L){return S[S.length-1].dialog==L}},S=W._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];w.watch("curNode",function(L,aa,ba){L=S[S.length-1].dialog;if(ba&&L&&!L._fadeOutDeferred&&ba.ownerDocument==L.ownerDocument){do if(ba==L.domNode||g.contains(ba,"dijitPopup"))return;while(ba=ba.parentNode);L.focus()}});u("dijit-legacy-requires")&&n(0,function(){b(["dijit/TooltipDialog"])});return W})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare",
"./Moveable"],function(b,y){var q=y.prototype.onMove;return b("dojo.dnd.TimedMoveable",y,{timeout:40,constructor:function(a,h){h||(h={});h.timeout&&"number"==typeof h.timeout&&0<=h.timeout&&(this.timeout=h.timeout)},onMoveStop:function(a){a._timer&&(clearTimeout(a._timer),q.call(this,a,a._leftTop));y.prototype.onMoveStop.apply(this,arguments)},onMove:function(a,h){a._leftTop=h;if(!a._timer){var e=this;a._timer=setTimeout(function(){a._timer=null;q.call(e,a,a._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(b,y,q,a,h,e){return y("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(g){var f=[];b.forEach(g||this.getChildren(),function(m){"value"in m?f.push(m):f=f.concat(this._getDescendantFormWidgets(m.getChildren()))},this);return f},reset:function(){b.forEach(this._getDescendantFormWidgets(),function(g){g.reset&&g.reset()})},validate:function(){var g=!1;return b.every(b.map(this._getDescendantFormWidgets(),function(f){f._hasBeenBlurred=!0;var m=f.disabled||!f.validate||
f.validate();m||g||(e.scrollIntoView(f.containerNode||f.domNode),f.focus(),g=!0);return m}),function(f){return f})},setValues:function(g){q.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",g)},_setValueAttr:function(g){var f={};b.forEach(this._getDescendantFormWidgets(),function(c){c.name&&(f[c.name]||(f[c.name]=[])).push(c)});for(var m in f)if(f.hasOwnProperty(m)){var l=f[m],d=a.getObject(m,!1,g);void 0!==d&&(d=[].concat(d),
"boolean"==typeof l[0].checked?b.forEach(l,function(c){c.set("value",-1!=b.indexOf(d,c._get("value")))}):l[0].multiple?l[0].set("value",d):b.forEach(l,function(c,k){c.set("value",d[k])}))}},getValues:function(){q.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var g={};b.forEach(this._getDescendantFormWidgets(),function(f){var m=f.name;if(m&&!f.disabled){var l=f.get("value");"boolean"==typeof f.checked?
/Radio/.test(f.declaredClass)?!1!==l?a.setObject(m,l,g):(l=a.getObject(m,!1,g),void 0===l&&a.setObject(m,null,g)):(f=a.getObject(m,!1,g),f||(f=[],a.setObject(m,f,g)),!1!==l&&f.push(l)):(f=a.getObject(m,!1,g),"undefined"!=typeof f?a.isArray(f)?f.push(l):a.setObject(m,[f,l],g):a.setObject(m,l,g))}});return g},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var g=b.map(this._descendants,function(f){return f.get("state")||""});return 0<=b.indexOf(g,"Error")?
"Error":0<=b.indexOf(g,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(g){this._descendants=this._getDescendantFormWidgets();b.forEach(this._descendants,function(f){f._started||f.startup()});g||this._onChildChange()},_onChildChange:function(g){g&&"state"!=g&&"disabled"!=g||this._set("state",this._getState());g&&"value"!=g&&"disabled"!=g&&"checked"!=g||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var g=this;this.own(h(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(f){f.target!=g.domNode&&g._onChildChange(f.type.replace("attrmodified-",""))}));this.watch("state",function(f,m,l){this.onValidStateChange(""==l)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(b,y){return b("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var q=y._getTabNavigable(this.domNode);this._firstFocusItem=q.lowest||q.first||this.closeButtonNode||this.domNode;this._lastFocusItem=q.last||q.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c){var k=b("dijit.DialogUnderlay",[f,m],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(t){a.set(this.node,"id",t+"_underlay");this._set("dialogId",t)},_setClassAttr:function(t){this.node.className="dijitDialogUnderlay "+t;this._set("class",t)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(e(this.domNode,"keydown",y.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var t=this.node.style,n=this.domNode.style;n.display="none";var u=g.getBox(this.ownerDocument);n.top=u.t+"px";n.left=u.l+"px";t.width=u.w+"px";t.height=u.h+"px";n.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new l(this.domNode);var t=g.get(this.ownerDocument);this._modalConnects=[d.on("resize",y.hitch(this,"layout")),e(t,"scroll",
y.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});k.show=function(t,n){var u=k._singleton;!u||u._destroyed?u=c._underlay=k._singleton=new k(t):t&&u.set(t);h.set(u.domNode,"zIndex",n);u.open||u.show()};k.hide=function(){var t=
k._singleton;t&&!t._destroyed&&t.hide()};return k})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u){return m("dijit.layout.ContentPane",[q,a,h],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:b._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(x,
A,z){var E=new z(x,A);return!E.href&&E._contentSetter&&E._contentSetter.parseDeferred&&!E._contentSetter.parseDeferred.isFulfilled()?E._contentSetter.parseDeferred.then(function(){return E}):E},create:function(x,A){if(!(x&&x.template||!A||"href"in x||"content"in x)){A=d.byId(A);for(var z=A.ownerDocument.createDocumentFragment();A.firstChild;)z.appendChild(A.firstChild);x=y.delegate(x,{content:z})}this.inherited(arguments,[x,A])},postMixInProperties:function(){this.inherited(arguments);var x=n.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=e.substitute(this.loadingMessage,x);this.errorMessage=e.substitute(this.errorMessage,x)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(x){x._started||x._destroyed||!y.isFunction(x.startup)||(x.startup(),x._started=!0)},this)},_startChildren:function(){f.forEach(this.getChildren(),
function(x){x._started||x._destroyed||!y.isFunction(x.startup)||(x.startup(),x._started=!0)});this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(x){x._started||x._destroyed||!y.isFunction(x.startup)||(x.startup(),x._started=!0)},this)},setHref:function(x){b.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",x)},_setHrefAttr:function(x){this.cancel();this.onLoadDeferred=new l(y.hitch(this,"cancel"));this.onLoadDeferred.then(y.hitch(this,
"onLoad"));this._set("href",x);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(x){b.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",x)},_setContentAttr:function(x){this._set("href","");this.cancel();this.onLoadDeferred=new l(y.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(y.hitch(this,"onLoad"));this._setContent(x||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(x){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new l(y.hitch(this,"cancel"));this.onLoadDeferred.then(y.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var x=this,A={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};y.isObject(this.ioArgs)&&y.mixin(A,this.ioArgs);var z=this._xhrDfd=(this.ioMethod||t.get)(A),E;z.then(function(w){E=w;try{return x._isDownloaded=!0,x._setContent(w,!1)}catch(D){x._onError("Content",
D)}},function(w){z.canceled||x._onError("Download",w);delete x._xhrDfd;return w}).then(function(){x.onDownloadEnd();delete x._xhrDfd;return E});delete this._hrefChanged},_onLoadHandler:function(x){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(x)}catch(A){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(x){}},destroyDescendants:function(x){this.isLoaded&&this._onUnloadHandler();var A=this._contentSetter;f.forEach(this.getChildren(),function(z){z.destroyRecursive?
z.destroyRecursive(x):z.destroy&&z.destroy(x);z._destroyed=!0});A&&(f.forEach(A.parseResults,function(z){z._destroyed||(z.destroyRecursive?z.destroyRecursive(x):z.destroy&&z.destroy(x),z._destroyed=!0)}),delete A.parseResults);x||k.empty(this.containerNode);delete this._singleChild},_setContent:function(x,A){x=this.preprocessContent(x);this.destroyDescendants();var z=this._contentSetter;z&&z instanceof g._ContentSetter||(z=this._contentSetter=new g._ContentSetter({node:this.containerNode,_onError:y.hitch(this,
this._onError),onContentError:y.hitch(this,function(D){D=this.onContentError(D);try{this.containerNode.innerHTML=D}catch(r){}})}));var E=y.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!x.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});E=z.set(y.isObject(x)&&x.domNode?x.domNode:x,E);var w=this;return u(E&&E.then?E:z.parseDeferred,function(){delete w._contentSetterParams;
A||(w._started&&(w._startChildren(),w._scheduleLayout()),w._onLoadHandler(x))})},preprocessContent:function(x){return x},_onError:function(x,A,z){this.onLoadDeferred.reject(A);x=this["on"+x+"Error"].call(this,A);z||x&&this._setContent(x,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(b,y,q,a,h,e,g,f,m,l){return y("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var d=this.getParent();this._childOfLayoutWidget=d&&d.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(m.on("resize",e.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var d=[],c=!1;g("\x3e *",this.containerNode).some(function(k){var t=
f.byNode(k);t&&t.resize?d.push(t):!/script|link|style/i.test(k.nodeName)&&k.offsetHeight&&(c=!0)});this._singleChild=1!=d.length||c?null:d[0];q.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(d,c){this._resizeCalled=!0;this._scheduleLayout(d,c)},_scheduleLayout:function(d,c){this._isShown()?this._layout(d,c):(this._needLayout=!0,this._changeSize=d,this._resultSize=c)},_layout:function(d,c){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
d&&a.setMarginBox(this.domNode,d);var k=this.containerNode;k===this.domNode?(c=c||{},e.mixin(c,d||{}),"h"in c&&"w"in c||(c=e.mixin(a.getMarginBox(k),c)),this._contentBox=l.marginBox2contentBox(k,c)):this._contentBox=a.getContentBox(k);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var d=this._contentBox||a.getContentBox(this.containerNode);this._singleChild.resize({w:d.w,h:d.h})}else{d=this.getChildren();for(var c,k=0;c=
d[k++];)c.resize&&c.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var d=this.domNode,c=this.domNode.parentNode;return"none"!=d.style.display&&"hidden"!=d.style.visibility&&!q.contains(d,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(b,y,q,a,h){function e(m){return m.substring(0,1).toUpperCase()+m.substring(1)}function g(m,l){var d=m.resize?m.resize(l):q.setMarginBox(m.domNode,l);d?h.mixin(m,d):(h.mixin(m,q.getMarginBox(m.domNode)),h.mixin(m,l))}var f={marginBox2contentBox:function(m,l){var d=a.getComputedStyle(m),c=q.getMarginExtents(m,d),k=q.getPadBorderExtents(m,d);return{l:a.toPixelValue(m,d.paddingLeft),t:a.toPixelValue(m,d.paddingTop),w:l.w-
(c.w+k.w),h:l.h-(c.h+k.h)}},layoutChildren:function(m,l,d,c,k){l=h.mixin({},l);y.add(m,"dijitLayoutContainer");d=b.filter(d,function(t){return"center"!=t.region&&"client"!=t.layoutAlign}).concat(b.filter(d,function(t){return"center"==t.region||"client"==t.layoutAlign}));b.forEach(d,function(t){var n=t.domNode,u=t.region||t.layoutAlign;if(!u)throw Error("No region setting for "+t.id);var x=n.style;x.left=l.l+"px";x.top=l.t+"px";x.position="absolute";y.add(n,"dijitAlign"+e(u));n={};c&&c==t.id&&(n["top"==
t.region||"bottom"==t.region?"h":"w"]=k);"leading"==u&&(u=t.isLeftToRight()?"left":"right");"trailing"==u&&(u=t.isLeftToRight()?"right":"left");"top"==u||"bottom"==u?(n.w=l.w,g(t,n),l.h-=t.h,"top"==u?l.t+=t.h:x.top=l.t+l.h+"px"):"left"==u||"right"==u?(n.h=l.h,g(t,n),l.w-=t.w,"left"==u?l.l+=t.w:x.left=l.l+l.w+"px"):"client"!=u&&"center"!=u||g(t,l)})}};h.setObject("dijit.layout.utils",f);return f})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(b,y,q,a,h,e,g){var f=0,m={_secureForInnerHtml:function(l){return l.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:e.empty,_setNodeContent:function(l,d){e.empty(l);if(d)if("number"==typeof d&&(d=d.toString()),"string"==typeof d&&(d=e.toDom(d,l.ownerDocument)),!d.nodeType&&y.isArrayLike(d))for(var c=d.length,k=0;k<d.length;k=c==d.length?k+1:0)e.place(d[k],l,"last");else e.place(d,l,"last");return l},_ContentSetter:a("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:b._scopeName,startup:!0,constructor:function(l,d){y.mixin(this,l||{});d=this.node=h.byId(this.node||d);this.id||(this.id=["Setter",d?d.id||d.tagName:"",f++].join("_"))},set:function(l,d){void 0!==l&&(this.content=l);"number"==typeof l&&(l=l.toString());d&&this._mixin(d);this.onBegin();this.setContent();return(l=this.onEnd())&&l.then?l:this.node},setContent:function(){var l=this.node;if(!l)throw Error(this.declaredClass+
": setContent given no node");try{l=m._setNodeContent(l,this.content)}catch(c){var d=this.onContentError(c);try{l.innerHTML=d}catch(k){}}this.node=l},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(q.forEach(this.parseResults,function(l){l.destroy&&l.destroy()}),delete this.parseResults);e.empty(this.node)},onBegin:function(){var l=this.content;if(y.isString(l)&&(this.cleanContent&&
(l=m._secureForInnerHtml(l)),this.extractContent)){var d=l.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);d&&(l=d[1])}this.empty();this.content=l;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(l){return"Error occurred setting content: "+l},onExecError:function(l){return"Error occurred executing scripts: "+l},_mixin:function(l){var d=
{},c;for(c in l)c in d||(this[c]=l[c])},_parse:function(){var l=this.node;try{var d={};q.forEach(["dir","lang","textDir"],function(k){this[k]&&(d[k]=this[k])},this);var c=this;this.parseDeferred=g.parse({rootNode:l,noStart:!this.startup,inherited:d,scope:this.parserScope}).then(function(k){return c.parseResults=k},function(k){c._onError("Content",k,"Error parsing in _ContentSetter#"+c.id)})}catch(k){this._onError("Content",k,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(l,d,c){l=
this["on"+l+"Error"].call(this,d);c||l&&m._setNodeContent(this.node,l,!0)}}),set:function(l,d,c){void 0==d&&(d="");"number"==typeof d&&(d=d.toString());return c?(new m._ContentSetter(y.mixin(c,{content:d,node:l}))).set():m._setNodeContent(l,d,!0)}};y.setObject("dojo.html",m);return m})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u){function x(D){return eval("("+D+")")}function A(D){var r=D._nameCaseMap,v=D.prototype;if(!r||r._extendCnt<E){r=D._nameCaseMap={};for(var B in v)"_"!==B.charAt(0)&&(r[B.toLowerCase()]=B);r._extendCnt=E}return r}function z(D,r){r||(r=b);var v=r._dojoParserCtorMap||(r._dojoParserCtorMap={}),B=D.join();if(!v[B]){for(var C=[],F=0,G=D.length;F<G;F++){var H=D[F];C[C.length]=v[H]=v[H]||q.getObject(H)||~H.indexOf("/")&&r(H)}D=C.shift();v[B]=C.length?D.createSubclass?
D.createSubclass(C):D.extend.apply(D,C):D}return v[B]}new Date("X");var E=0;m.after(q,"extend",function(){E++},!0);var w={_clearCache:function(){E++;_ctorMap={}},_functionFromScript:function(D,r){var v="",B="",C=D.getAttribute(r+"args")||D.getAttribute("args");r=D.getAttribute("with");C=(C||"").split(/\s*,\s*/);r&&r.length&&a.forEach(r.split(/\s*,\s*/),function(F){v+="with("+F+"){";B+="}"});return new Function(C,v+D.innerHTML+B)},instantiate:function(D,r,v){r=r||{};v=v||{};var B=(v.scope||y._scopeName)+
"Type",C="data-"+(v.scope||y._scopeName)+"-",F=C+"type",G=C+"mixins",H=[];a.forEach(D,function(J){var I=B in r?r[B]:J.getAttribute(F)||J.getAttribute(B);if(I){var K=J.getAttribute(G);I=K?[I].concat(K.split(/\s*,\s*/)):[I];H.push({node:J,types:I})}});return this._instantiate(H,r,v)},_instantiate:function(D,r,v,B){function C(F){r._started||v.noStart||a.forEach(F,function(G){"function"!==typeof G.startup||G._started||G.startup()});return F}D=a.map(D,function(F){var G=F.ctor||z(F.types,v.contextRequire);
if(!G)throw Error("Unable to resolve constructor for: '"+F.types.join()+"'");return this.construct(G,F.node,r,v,F.scripts,F.inherited)},this);return B?l(D).then(C):C(D)},construct:function(D,r,v,B,C,F){function G(Y){S&&q.setObject(S,Y);for(W=0;W<O.length;W++)m[O[W].advice||"after"](Y,O[W].method,q.hitch(Y,O[W].func),!0);for(W=0;W<V.length;W++)V[W].call(Y);for(W=0;W<X.length;W++)Y.watch(X[W].prop,X[W].func);for(W=0;W<N.length;W++)n(Y,N[W].event,N[W].func);return Y}var H=D&&D.prototype;B=B||{};var J=
{};B.defaults&&q.mixin(J,B.defaults);F&&q.mixin(J,F);if(k("dom-attributes-explicit"))var I=r.attributes;else k("dom-attributes-specified-flag")?I=a.filter(r.attributes,function(Y){return Y.specified}):(F=(/^input$|^img$/i.test(r.nodeName)?r:r.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),I=a.map(F.split(/\s+/),function(Y){var ia=Y.toLowerCase();return{name:Y,value:"LI"==r.nodeName&&"value"==Y||"enctype"==ia?r.getAttribute(ia):
r.getAttributeNode(ia).value}}));var K=B.scope||y._scopeName;F="data-"+K+"-";var R={};"dojo"!==K&&(R[F+"props"]="data-dojo-props",R[F+"type"]="data-dojo-type",R[F+"mixins"]="data-dojo-mixins",R[K+"type"]="dojotype",R[F+"id"]="data-dojo-id");var W=0,P;K=[];for(var S,L;P=I[W++];){var aa=P.name,ba=aa.toLowerCase();P=P.value;switch(R[ba]||ba){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":L=P;break;case "data-dojo-id":case "jsid":S=P;break;case "data-dojo-attach-point":case "dojoattachpoint":J.dojoAttachPoint=
P;break;case "data-dojo-attach-event":case "dojoattachevent":J.dojoAttachEvent=P;break;case "class":J["class"]=r.className;break;case "style":J.style=r.style&&r.style.cssText;break;default:if(aa in H||(aa=A(D)[ba]||aa),aa in H)switch(typeof H[aa]){case "string":J[aa]=P;break;case "number":J[aa]=P.length?Number(P):NaN;break;case "boolean":J[aa]="false"!=P.toLowerCase();break;case "function":""===P||-1!=P.search(/[^\w\.]+/i)?J[aa]=new Function(P):J[aa]=q.getObject(P,!1)||new Function(P);K.push(aa);
break;default:ba=H[aa],J[aa]=ba&&"length"in ba?P?P.split(/\s*,\s*/):[]:ba instanceof Date?""==P?new Date(""):"now"==P?new Date:d.fromISOString(P):ba instanceof f?y.baseUrl+P:x(P)}else J[aa]=P}}for(I=0;I<K.length;I++)R=K[I].toLowerCase(),r.removeAttribute(R),r[R]=null;if(L)try{L=x.call(B.propsThis,"{"+L+"}"),q.mixin(J,L)}catch(Y){throw Error(Y.toString()+" in data-dojo-props\x3d'"+L+"'");}q.mixin(J,v);C||(C=D&&(D._noScript||H._noScript)?[]:t("\x3e script[type^\x3d'dojo/']",r));var O=[],V=[],X=[],N=
[];if(C)for(W=0;W<C.length;W++)R=C[W],r.removeChild(R),v=R.getAttribute(F+"event")||R.getAttribute("event"),B=R.getAttribute(F+"prop"),L=R.getAttribute(F+"method"),K=R.getAttribute(F+"advice"),I=R.getAttribute("type"),R=this._functionFromScript(R,F),v?"dojo/connect"==I?O.push({method:v,func:R}):"dojo/on"==I?N.push({event:v,func:R}):J[v]=R:"dojo/aspect"==I?O.push({method:L,advice:K,func:R}):"dojo/watch"==I?X.push({prop:B,func:R}):V.push(R);D=(C=D.markupFactory||H.markupFactory)?C(J,r,D):new D(J,r);
return D.then?D.then(G):G(D)},scan:function(D,r){function v(ba){if(!ba.inherited){ba.inherited={};var O=ba.node,V=v(ba.parent);O={dir:O.getAttribute("dir")||V.dir,lang:O.getAttribute("lang")||V.lang,textDir:O.getAttribute(I)||V.textDir};for(var X in O)O[X]&&(ba.inherited[X]=O[X])}return ba.inherited}var B=[],C=[],F={},G=(r.scope||y._scopeName)+"Type",H="data-"+(r.scope||y._scopeName)+"-",J=H+"type",I=H+"textdir";H+="mixins";var K=D.firstChild,R=r.inherited;if(!R){R=function X(O,V){return O.getAttribute&&
O.getAttribute(V)||O.parentNode&&X(O.parentNode,V)};R={dir:R(D,"dir"),lang:R(D,"lang"),textDir:R(D,I)};for(var W in R)R[W]||delete R[W]}W={inherited:R};for(var P,S;;)if(K)if(1!=K.nodeType)K=K.nextSibling;else if(P&&"script"==K.nodeName.toLowerCase())(R=K.getAttribute("type"))&&/^dojo\/\w/i.test(R)&&P.push(K),K=K.nextSibling;else if(S)K=K.nextSibling;else if(R=K.getAttribute(J)||K.getAttribute(G),D=K.firstChild,R||D&&(3!=D.nodeType||D.nextSibling)){S=null;if(R){var L=K.getAttribute(H);P=L?[R].concat(L.split(/\s*,\s*/)):
[R];try{S=z(P,r.contextRequire)}catch(ba){}S||a.forEach(P,function(ba){~ba.indexOf("/")&&!F[ba]&&(F[ba]=!0,C[C.length]=ba)});L=S&&!S.prototype._noScript?[]:null;W={types:P,ctor:S,parent:W,node:K,scripts:L};W.inherited=v(W);B.push(W)}else W={node:K,scripts:P,parent:W};P=L;S=K.stopParser||S&&S.prototype.stopParser&&!r.template;K=D}else K=K.nextSibling;else{if(!W||!W.node)break;K=W.node.nextSibling;S=!1;W=W.parent;P=W.scripts}var aa=new c;C.length?(r.contextRequire||b)(C,function(){aa.resolve(a.filter(B,
function(ba){if(!ba.ctor)try{ba.ctor=z(ba.types,r.contextRequire)}catch(X){}for(var O=ba.parent;O&&!O.types;)O=O.parent;var V=ba.ctor&&ba.ctor.prototype;ba.instantiateChildren=!(V&&V.stopParser&&!r.template);ba.instantiate=!O||O.instantiate&&O.instantiateChildren;return ba.instantiate}))}):aa.resolve(B);return aa.promise},_require:function(D,r){D=x("{"+D.innerHTML+"}");var v=[],B=[],C=new c;r=r&&r.contextRequire||b;for(var F in D)v.push(F),B.push(D[F]);r(B,function(){for(var G=0;G<v.length;G++)q.setObject(v[G],
arguments[G]);C.resolve(arguments)});return C.promise},_scanAmd:function(D,r){var v=new c,B=v.promise;v.resolve(!0);var C=this;t("script[type\x3d'dojo/require']",D).forEach(function(F){B=B.then(function(){return C._require(F,r)});F.parentNode.removeChild(F)});return B},parse:function(D,r){!D||"string"==typeof D||"nodeType"in D||(r=D,D=r.rootNode);var v=D?e.byId(D):g.body();r=r||{};var B=r.template?{template:!0}:{},C=[],F=this;D=this._scanAmd(v,r).then(function(){return F.scan(v,r)}).then(function(G){return F._instantiate(G,
B,r,!0)}).then(function(G){return C=C.concat(G)}).otherwise(function(G){throw G;});q.mixin(C,D);return C}};y.parser=w;h.parseOnLoad&&u(100,w,"parse");return w})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(b,y,q,a){var h=b.some;return function(e){var g,f;y.isArray(e)?f=e:e&&"object"===typeof e&&(g=e);var m=[];if(g){f=[];for(var l in g)Object.hasOwnProperty.call(g,l)&&(m.push(l),f.push(g[l]));var d={}}else f&&(d=[]);if(!f||!f.length)return(new q).resolve(d);
var c=new q;c.promise.always(function(){d=m=null});var k=f.length;h(f,function(t,n){g||m.push(n);a(t,function(u){c.isFulfilled()||(d[m[n]]=u,0===--k&&c.resolve(d))},c.reject);return c.isFulfilled()});return c.promise}})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(b,y,q,a,h,e,g,f,m){function l(A,z,E,w){(z=z&&z[A])?z={formatType:z.formatType,options:z}:w&&-1!==b.indexOf(w.properties||
"",A)?z={formatType:w.formatter||"DateString",options:null}:E&&-1!==b.indexOf(E.properties||"",A)&&(z={formatType:E.formatter||"NumberFormat",options:null});return z}function d(A,z,E){return[a.isString(A)?A.split(""):A,z||q.global,a.isString(E)?new Function("item","index","array",E):E]}function c(A){return void 0!==A&&null!==A}function k(A){return c(A)?A:""}function t(A,z,E,w){var D=E.match(/([^\(]+)(\([^\)]+\))?/i);E=a.trim(D[1]);var r=D[2]?a.trim(D[2]):null;D=z[A];w=w||(r?y.fromJson(r.replace(/^\(/,
"({").replace(/\)$/,"})")):{});r=w.utcOffset;if(-1===b.indexOf(u,E))E=a.getObject(E),a.isFunction(E)&&(D=E(D,A,z,w));else if("number"===typeof D||"string"===typeof D&&D&&!isNaN(Number(D)))switch(D=Number(D),E){case "NumberFormat":return g.format(D,w);case "DateString":A=new Date(D);if(w.local||w.systemLocale)return w.systemLocale?A.toLocaleDateString()+(w.hideTime?"":" "+A.toLocaleTimeString()):A.toDateString()+(w.hideTime?"":" "+A.toTimeString());A=A.toUTCString();w.hideTime&&(A=A.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,
""));return A;case "DateFormat":return A=new Date(D),c(r)&&(A=h.add(A,"minute",A.getTimezoneOffset()-r)),f.format(A,w)}return k(D)}function n(A,z){var E;if(z)for(E in A)A.hasOwnProperty(E)&&(void 0===A[E]?delete A[E]:A[E]instanceof Object&&n(A[E],!0));else for(E in A)A.hasOwnProperty(E)&&void 0===A[E]&&delete A[E];return A}var u=["NumberFormat","DateString","DateFormat"],x=/<\/?[^>]+>/g;e={valueOf:function(A,z){for(var E in A)if(A[E]==z)return E;return null},stripTags:function(A){if(A){var z=typeof A;
if("string"===z)A=A.replace(x,"");else if("object"===z)for(var E in A)(z=A[E])&&"string"===typeof z&&(z=z.replace(x,"")),A[E]=z}return A},substitute:function(A,z,E){if(c(E))if(a.isObject(E)){var w=E.first;var D=E.dateFormat;var r=E.numberFormat;var v=E.format}else w=E;if(z&&"${*}"!==z)return a.replace(z,a.hitch({obj:A},function(C,F){var G=F.split(":");return 1<G.length?(F=G[0],G.shift(),(C=v&&v[G[0]])?G=C.formatType:(G=G.join(":"),C=null),t(F,this.obj,G,C)):(C=l(F,v,r,D))?t(F,this.obj,C.formatType,
C.options):k(this.obj[F])}),/\$\{([^\}]+)\}/g);z=[];for(var B in A)if(E=(E=l(B,v,r,D))?t(B,A,E.formatType,E.options):A[B],z.push(B+" \x3d "+k(E)+"\x3cbr/\x3e"),w)break;return z.join("")},filter:function(A,z,E){z=d(A,E,z);E={};var w;A=z[0];for(w in A)z[2].call(z[w],A[w],w,A)&&(E[w]=A[w]);return E},startsWith:function(A,z,E){E=E||0;return A.indexOf(z,E)===E},endsWith:function(A,z,E){if("number"!==typeof E||!isFinite(E)||Math.floor(E)!==E||E>A.length)E=A.length;E-=z.length;A=A.indexOf(z,E);return-1!==
A&&A===E},isDefined:c,fixJson:n,isObject:function(A){return A&&"object"===typeof A},isString:function(A){return"string"===typeof A},mixin:function(A,z){for(var E in z)z.hasOwnProperty(E)&&(A[E]=z[E]);return A},clone2DArray:function(A){if(A=A?A.slice(0):null){var z,E=A.length;for(z=0;z<E;z++)A[z]=A[z]?A[z].slice(0):null}return A},clone3DArray:function(A){if(A=A?A.slice(0):null){var z,E=A.length;for(z=0;z<E;z++){A[z]=A[z]?A[z].slice(0):null;var w=A[z];if(w){var D,r=w.length;for(D=0;D<r;D++)w[D]=w[D]?
w[D].slice(0):null}}}return A}};a.mixin(m,e);m._isDefined=c;m._getParts=d;m._sanitize=n;return e})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(b,y,q,a,h){var e={show:function(g){if(g=e.getNode(g))g.style.display="block"},getNode:function(g){return g&&g.domNode||g},hide:function(g){if(g=e.getNode(g))g.style.display="none"},toggle:function(g){if(g=e.getNode(g))g.style.display="none"===g.style.display?"block":"none"},documentBox:8>=
h("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(g){if(g=this.getNode(g)){var f=0,m=0,l=0,d=0,c=0,k=0;return[y.connect(g,"ontouchstart",function(t){f=t.touches[0].screenX;m=t.touches[0].screenY;l=g.scrollWidth;d=g.scrollHeight;c=g.clientWidth;k=g.clientHeight}),y.connect(g,"ontouchmove",function(t){t.preventDefault();var n=g.firstChild;n instanceof Text&&(n=g.childNodes[1]);var u=n._currentX||
0,x=n._currentY||0;u+=t.touches[0].screenX-f;0<u?u=0:0>u&&Math.abs(u)+c>l&&(u=-1*(l-c));n._currentX=u;x+=t.touches[0].screenY-m;0<x?x=0:0>x&&Math.abs(x)+k>d&&(x=-1*(d-k));n._currentY=x;a.set(n,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+u+"px, "+x+"px)"});f=t.touches[0].screenX;m=t.touches[0].screenY})]}}};q.mixin(b,e);return e})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(b,y,q,a){b=b(a.Credential,
{});return q.Credential=b})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/on dojo/regexp ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w){var D={},r=function(C){var F=(new e(C.owningSystemUrl)).host;C=(new e(C.server)).host;
var G=/.+\.arcgis\.com$/i;return G.test(F)&&G.test(C)},v=function(C,F){return!!(r(C)&&F&&a.some(F,function(G){return G.test(C.server)}))};g=b(z,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=q.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthHash();l(window,"pageshow",q.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,
signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,
customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",
tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,
_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(C){var F=this.serverInfos;F?(C=a.filter(C,function(G){return!this.findServerInfo(G.server)},this),this.serverInfos=F.concat(C)):this.serverInfos=C;a.forEach(C,function(G){G.owningSystemUrl&&
this._portals.push(G.owningSystemUrl);if(G.hasPortal){this._portals.push(G.server);var H=k.defaults.io.corsEnabledServers,J=this._getOrigin(G.tokenServiceUrl);u.canUseXhr(G.server)||H.push(G.server.replace(/^https?:\/\//i,""));u.canUseXhr(J)||H.push(J.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(C){var F=this.oAuthInfos;F?(C=a.filter(C,function(G){return!this.findOAuthInfo(G.portalUrl)},this),this.oAuthInfos=F.concat(C)):this.oAuthInfos=C},registerToken:function(C){C=t.mixin({},
C);var F=this._sanitizeUrl(C.server),G=this.findServerInfo(F),H=!0,J;G||(G=new n,G.server=this._getServerInstanceRoot(F),G.tokenServiceUrl=this._getTokenSvcUrl(F),G.hasPortal=!0,this.registerServers([G]));(J=this.findCredential(F,C.userId))?(delete C.server,q.mixin(J,C),H=!1):(J=new B({userId:C.userId,server:G.server,token:C.token,expires:C.expires,ssl:C.ssl,scope:this._isServerRsrc(F)?"server":"portal"}),J.resources=[F],this.credentials.push(J));J.onTokenChange(!1);H||J.refreshServerTokens()},toJson:function(){return t.fixJson({serverInfos:a.map(this.serverInfos,
function(C){return C.toJson()}),oAuthInfos:a.map(this.oAuthInfos,function(C){return C.toJson()}),credentials:a.map(this.credentials,function(C){return C.toJson()})})},initialize:function(C){if(C){q.isString(C)&&(C=JSON.parse(C));var F=C.serverInfos,G=C.oAuthInfos;C=C.credentials;if(F){var H=[];a.forEach(F,function(I){I.server&&I.tokenServiceUrl&&H.push(I.declaredClass?I:new n(I))});H.length&&this.registerServers(H)}if(G){var J=[];a.forEach(G,function(I){I.appId&&J.push(I.declaredClass?I:new w(I))});
J.length&&this.registerOAuthInfos(J)}C&&a.forEach(C,function(I){I.userId&&I.server&&I.token&&I.expires&&I.expires>(new Date).getTime()&&(I=I.declaredClass?I:new B(I),I.onTokenChange(),this.credentials.push(I))},this)}},findServerInfo:function(C){var F;C=this._sanitizeUrl(C);a.some(this.serverInfos,function(G){this._hasSameServerInstance(G.server,C)&&(F=G);return!!F},this);return F},findOAuthInfo:function(C){var F;C=this._sanitizeUrl(C);a.some(this.oAuthInfos,function(G){this._hasSameServerInstance(G.portalUrl,
C)&&(F=G);return!!F},this);return F},findCredential:function(C,F){var G;C=this._sanitizeUrl(C);var H=this._isServerRsrc(C)?"server":"portal";F?a.some(this.credentials,function(J){this._hasSameServerInstance(J.server,C)&&F===J.userId&&J.scope===H&&(G=J);return!!G},this):a.some(this.credentials,function(J){this._hasSameServerInstance(J.server,C)&&-1!==this._getIdenticalSvcIdx(C,J)&&J.scope===H&&(G=J);return!!G},this);return G},getCredential:function(C,F){var G=!0;if(t.isDefined(F))if(q.isObject(F)){var H=
!!F.token;var J=F.error;G=!1!==F.prompt}else H=F;C=this._sanitizeUrl(C);var I=new h(x._dfdCanceller),K=this._isAdminResource(C),R=H&&this._doPortalSignIn(C)?this._getEsriAuthCookie():null;if((H=H?this.findCredential(C):null)&&J&&498===J.code)H.destroy(),R&&R.token===F.token&&(f("esri_auth",null,{expires:-1,path:"/",domain:document.domain}),t.endsWith(window.location.hostname,".arcgis.com")&&f("esri_auth",null,{expires:-1,path:"/",domain:"arcgis.com"}));else if(R||H)return C=Error("You are currently signed in as: '"+
(R&&R.email||H&&H.userId)+"'. You do not have access to this resource: "+C),C.code="IdentityManagerBase.1",C.httpCode=J&&J.httpCode,C.messageCode=J?J.messageCode:null,C.subcode=J?J.subcode:null,C.details=J?J.details:null,C.log=!!y.isDebug,I.errback(C),I;if(J=this._findCredential(C,F))return I.callback(J),I;J=this.findServerInfo(C);if(J)!J.hasServer&&this._isServerRsrc(C)&&(J._restInfoDfd=this._getTokenSvcUrl(C,!0),J.hasServer=!0);else{R=this._getTokenSvcUrl(C);if(!R)return C=Error("Unknown resource - could not find token service endpoint."),
C.code="IdentityManagerBase.2",C.log=!!y.isDebug,I.errback(C),I;J=new n;J.server=this._getServerInstanceRoot(C);q.isString(R)?(J.tokenServiceUrl=R,J.hasPortal=!0):(J._restInfoDfd=R,J.hasServer=!0);this.registerServers([J])}G&&J.hasPortal&&void 0===J._selfReq&&!this._findOAuthInfo(C)&&(J._selfReq={owningTenant:F&&F.owningTenant,selfDfd:this._getPortalSelf(J.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),C)});return this._enqueue(C,J,F,I,K)},getResourceName:function(C){return this._isRESTService(C)?
C.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(C)&&C.replace(this._gwUser,"$1")||this._gwItem.test(C)&&C.replace(this._gwItem,"$1")||this._gwGroup.test(C)&&C.replace(this._gwGroup,"$1")||""},generateToken:function(C,F,G){var H=this._rePortalTokenSvc.test(C.tokenServiceUrl),J=new e(window.location.href.toLowerCase()),I=this._getEsriAuthCookie(),K=!F;var R=C.shortLivedTokenValidity;if(F){var W=c.id.tokenValidity||R||c.id.defaultTokenValidity;W>R&&(W=R)}if(G){var P=
G.isAdmin;var S=G.serverUrl;var L=G.token;var aa=G.ssl;C.customParameters=G.customParameters}if(P)R=C.adminTokenServiceUrl;else{R=C.tokenServiceUrl;var ba=new e(R.toLowerCase());if(I)var O=(O=I.auth_tier)&&O.toLowerCase();("web"===O||C.webTierAuth)&&G&&G.serverUrl&&!aa&&"http"===J.scheme&&(u.hasSameOrigin(J.uri,R,!0)||"https"===ba.scheme&&J.host===ba.host&&"7080"===J.port&&"7443"===ba.port)&&(R=R.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));K&&H&&(R=R.replace(/\/rest/i,""))}P=q.mixin({url:R,
content:q.mixin({request:"getToken",username:F&&F.username,password:F&&F.password,serverUrl:S,token:L,expiration:W,referer:P||H?window.location.host:null,client:P?"referer":null,f:"json"},C.customParameters),handleAs:"json",callbackParamName:K?"callback":void 0},G&&G.ioArgs);G={usePost:!K,disableIdentityLookup:!0,useProxy:this._useProxy(C,G)};H||(P.withCredentials=!1);H=A(P,G);H.addCallback(function(V){if(!V||!V.token)return V=Error("Unable to generate token"),V.code="IdentityManagerBase.3",V.log=
!!y.isDebug,V;var X=C.server;D[X]||(D[X]={});F&&(D[X][F.username]=F.password);V.validity=W;return V});H.addErrback(function(V){});return H},isBusy:function(){return!!this._busy},checkSignInStatus:function(C){var F=new h;this.checkAppAccess(C,"").then(function(G){F.resolve(G.credential)}).catch(function(G){F.reject(G)});return F},checkAppAccess:function(C,F,G){var H=this,J=!1;return this.getCredential(C,{prompt:!1}).then(function(I){var K={f:"json"};if("portal"===I.scope)if(F&&(H._doPortalSignIn(C,
!0)||G&&G.force)){var R=I.server+"/sharing/rest/oauth2/validateAppAccess";K.client_id=F}else if(I.token)R=I.server+"/sharing/rest";else return{credential:I};else if(I.token)R=I.server+"/rest/services";else return{credential:I};I.token&&(K.token=I.token);return A({url:R,content:K,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(W){if(!1===W.valid){var P=Error("You are currently signed in as: '"+I.userId+"'.  You do not have access to this app: '"+F+"'.");P.code="IdentityManagerBase.1";
P.log=!!y.isDebug;P.details=W;throw P;}J=!!W.viewOnlyUserTypeApp;return{credential:I}}).catch(function(W){if("IdentityManagerBase.1"===W.code||400===W.code)throw W;if(498===W.code)throw I.destroy(),W=Error("User is not signed in."),W.code="IdentityManagerBase.6",W.log=!!y.isDebug,W;return{credential:I}})}).then(function(I){return{credential:I.credential,viewOnly:J}})},setRedirectionHandler:function(C){this._redirectFunc=C},setProtocolErrorHandler:function(C){this._protocolFunc=C},signIn:function(){},
oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var C=this.credentials.slice();a.forEach(C,function(F){F.destroy()})}this.onCredentialsDestroy()},_getOAuthHash:function(){var C=window.location.hash;if(C){"#"===C.charAt(0)&&(C=C.substring(1));C=m.queryToObject(C);var F=!1;C.access_token&&C.expires_in&&C.state&&C.hasOwnProperty("username")?(C.state=JSON.parse(C.state),this._oAuthHash=C,F=!0):C.error&&C.error_description&&
"access_denied"===C.error&&(F=!0);F&&(window.location.hash=C.state&&C.state.hash||"")}},_pageShowHandler:function(C){C.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(C=Error("ABORTED"),C.code="IdentityManager.2",C.log=!!y.isDebug,this._errbackFunc(C))},_findCredential:function(C,F){var G=-1,H,J,I=F&&F.token;F=F&&F.resource;var K=this._isServerRsrc(C)?"server":"portal",R=a.filter(this.credentials,function(L){return this._hasSameServerInstance(L.server,C)&&L.scope===K},this);C=F||C;if(R.length)if(1===
R.length){F=R[0];var W=(H=(J=this.findServerInfo(F.server))&&J.owningSystemUrl)&&this.findCredential(H,F.userId);G=this._getIdenticalSvcIdx(C,F);if(I)-1!==G&&(F.resources.splice(G,1),this._removeResource(C,W));else return-1===G&&F.resources.push(C),this._addResource(C,W),F}else{var P,S;a.some(R,function(L){S=this._getIdenticalSvcIdx(C,L);return-1!==S?(P=L,W=(H=(J=this.findServerInfo(P.server))&&J.owningSystemUrl)&&this.findCredential(H,P.userId),G=S,!0):!1},this);if(I)P&&(P.resources.splice(G,1),
this._removeResource(C,W));else if(P)return this._addResource(C,W),P}},_findOAuthInfo:function(C){var F=this.findOAuthInfo(C);F||a.some(this.oAuthInfos,function(G){this._isIdProvider(G.portalUrl,C)&&(F=G);return!!F},this);return F},_addResource:function(C,F){F&&-1===this._getIdenticalSvcIdx(C,F)&&F.resources.push(C)},_removeResource:function(C,F){var G=-1;F&&(G=this._getIdenticalSvcIdx(C,F),-1<G&&F.resources.splice(G,1))},_useProxy:function(C,F){return F&&F.isAdmin&&!u.hasSameOrigin(C.adminTokenServiceUrl,
window.location.href)||!this._isPortalDomain(C.tokenServiceUrl)&&10.1==C.currentVersion&&!u.hasSameOrigin(C.tokenServiceUrl,window.location.href)},_getOrigin:function(C){C=new e(C);return C.scheme+"://"+C.host+(t.isDefined(C.port)?":"+C.port:"")},_getServerInstanceRoot:function(C){var F=C.toLowerCase(),G=F.indexOf(this._agsRest);-1===G&&this._isAdminResource(C)&&(G=this._agsAdmin.test(C)?C.replace(this._agsAdmin,"$1").length:C.search(this._adminSvcs));-1===G&&(G=F.indexOf("/sharing"));-1===G&&"/"===
F.substr(-1)&&(G=F.length-1);return-1<G?C.substring(0,G):C},_hasSameServerInstance:function(C,F){"/"===C.substr(-1)&&(C=C.slice(0,-1));C=C.toLowerCase();F=this._getServerInstanceRoot(F).toLowerCase();C=this._normalizeAGOLorgDomain(C);F=this._normalizeAGOLorgDomain(F);C=C.substr(C.indexOf(":"));F=F.substr(F.indexOf(":"));return C===F},_normalizeAGOLorgDomain:function(C){var F=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,G=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,H=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;
F.test(C)?C=C.replace(F,"https://www.arcgis.com"):G.test(C)?C=C.replace(G,"https://devext.arcgis.com"):H.test(C)&&(C=C.replace(H,"https://qaext.arcgis.com"));return C},_sanitizeUrl:function(C){var F=(k.defaults.io.proxyUrl||"").toLowerCase(),G=F?C.toLowerCase().indexOf(F+"?"):-1;-1!==G&&(C=C.substring(G+F.length+1));C=u.normalize(C);return u.urlToObject(C).path},_isRESTService:function(C){return-1<C.indexOf(this._agsRest)},_isAdminResource:function(C){return this._agsAdmin.test(C)||this._adminSvcs.test(C)},
_isServerRsrc:function(C){return this._isRESTService(C)||this._isAdminResource(C)},_isIdenticalService:function(C,F){if(this._isRESTService(C)&&this._isRESTService(F)){C=this._getSuffix(C).toLowerCase();F=this._getSuffix(F).toLowerCase();var G=C===F;G||(G=/(.*)\/(MapServer|FeatureServer).*/ig,G=C.replace(G,"$1")===F.replace(G,"$1"))}else this._isAdminResource(C)&&this._isAdminResource(F)?G=!0:this._isServerRsrc(C)||this._isServerRsrc(F)||!this._isPortalDomain(C)||(G=!0);return G},_isPortalDomain:function(C){var F=
new e(C.toLowerCase()),G=this._portalConfig;C=a.some(this._gwDomains,function(H){return H.regex.test(F.uri)});!C&&G&&(C=this._hasSameServerInstance(this._getServerInstanceRoot(G.restBaseUrl),F.uri));C||(!this._arcgisUrl&&(G=q.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new e(G)).authority),this._arcgisUrl&&(C=this._arcgisUrl.toLowerCase()===F.authority));C||(C=a.some(this._portals,function(H){return this._hasSameServerInstance(H,F.uri)},this));return C=C||this._agsPortal.test(F.path)},
_isIdProvider:function(C,F){var G=-1,H=-1;a.forEach(this._gwDomains,function(R,W){-1===G&&R.regex.test(C)&&(G=W);-1===H&&R.regex.test(F)&&(H=W)});var J=!1;if(-1<G&&-1<H)if(0===G||4===G){if(0===H||4===H)J=!0}else if(1===G){if(1===H||2===H)J=!0}else 2===G?2===H&&(J=!0):3===G&&3===H&&(J=!0);if(!J){var I=this.findServerInfo(F),K=I&&I.owningSystemUrl;K&&r(I)&&this._isPortalDomain(K)&&this._isIdProvider(C,K)&&(J=!0)}return J},_isPublic:function(C){C=this._sanitizeUrl(C);return a.some(this._publicUrls,function(F){return F.test(C)})},
_getIdenticalSvcIdx:function(C,F){var G=-1;a.some(F.resources,function(H,J){return this._isIdenticalService(C,H)?(G=J,!0):!1},this);return G},_getSuffix:function(C){return C.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(C){if(this._isRESTService(C)||this._isAdminResource(C)){var F=this._getServerInstanceRoot(C);var G=F+"/admin/generateToken";C=F+"/rest/info";F=A({url:C,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});F.adminUrl_=G;return F}if(this._isPortalDomain(C)){var H=
"";a.some(this._gwDomains,function(J){J.regex.test(C)&&(H=J.tokenServiceUrl);return!!H});H||a.some(this._portals,function(J){this._hasSameServerInstance(J,C)&&(H=J+this._gwTokenUrl);return!!H},this);H||(G=C.toLowerCase().indexOf("/sharing"),-1!==G&&(H=C.substring(0,G)+this._gwTokenUrl));H||(H=this._getOrigin(C)+this._gwTokenUrl);H&&(G=(new e(C)).port,/^http:\/\//i.test(C)&&"7080"===G&&(H=H.replace(/:7080/i,":7443")),H=H.replace(/http:/i,"https:"));return H}if(-1!==C.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},
_exchangeToken:function(C,F,G){return A({url:C+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:F,token:G}},{disableIdentityLookup:!0,usePost:!0}).then(function(H){return H.token})},_getPortalSelf:function(C,F){var G="";a.some(this._gwDomains,function(H){H.regex.test(C)&&(G=H.customBaseUrl);return!!G});if(G)return F=new h,F.resolve({allSSL:!0,currentVersion:"4.4",customBaseUrl:G,portalMode:"multitenant",supportsOAuth:!0}),F;"https:"===window.location.protocol?C=C.replace(/^http:/i,
"https:").replace(/:7080/i,":7443"):/^http:/i.test(F)&&(C=C.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return A({url:C,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var C=null;if(f.isSupported()){var F=this._getAllCookies("esri_auth"),G,H;for(H=0;H<F.length;H++){var J=JSON.parse(F[H]);if(J.portalApp){C=J;break}G?G.push(J):G=[J]}if(!C&&
G)for(H=0;H<G.length;H++)if(J=G[H],J.urlKey&&window.location.hostname===J.urlKey.toLowerCase()+"."+J.customBaseUrl){C=J;break}}C&&(F=null,C.expires&&("number"===typeof C.expires?F=C.expires:"string"===typeof C.expires&&(F=Date.parse(C.expires)),isNaN(F)&&(F=null),C.expires=F),F&&F<(new Date).getTime()&&(C=null));return C},_getAllCookies:function(C){var F=[],G=document.cookie.match(new RegExp("(?:^|; )"+d.escapeString(C)+"\x3d([^;]*)","g"));if(G)for(C=0;C<G.length;C++){var H=G[C],J=H.indexOf("\x3d");
-1<J&&(H=H.substring(J+1),F.push(decodeURIComponent(H)))}return F},_doPortalSignIn:function(C,F){if(f.isSupported()){var G=this._getEsriAuthCookie(),H=this._portalConfig,J=window.location.href,I=this.findServerInfo(C);if((F||this.useSignInPage)&&(H||this._isPortalDomain(J)||G)&&(I?I.hasPortal||I.owningSystemUrl&&this._isPortalDomain(I.owningSystemUrl):this._isPortalDomain(C))&&(this._isIdProvider(J,C)||H&&(this._hasSameServerInstance(this._getServerInstanceRoot(H.restBaseUrl),C)||this._isIdProvider(H.restBaseUrl,
C))||u.hasSameOrigin(J,C,!0)))return!0}return!1},_canUsePortalSignInWorkflow:function(C){return this._doPortalSignIn(C)&&(window===window.top||this._hasPortalSession())},_checkProtocol:function(C,F,G,H){var J=!0;H=H?F.adminTokenServiceUrl:F.tokenServiceUrl;0!==q.trim(H).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||k.defaults.io.useCors&&(u.canUseXhr(H)||u.canUseXhr(u.getProxyUrl(!0).path))||(J=this._protocolFunc?!!this._protocolFunc({resourceUrl:C,serverInfo:F}):
!1,J||(C=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),C.code="IdentityManagerBase.4",C.log=!!y.isDebug,G(C)));return J},_enqueue:function(C,F,G,H,J,I){H||(H=new h(x._dfdCanceller));H.resUrl_=C;H.sinfo_=F;H.options_=G;H.admin_=J;H.refresh_=I;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(C),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(H)):this._xoReqs.push(H):this._doSignIn(H);
return H},_doSignIn:function(C){this._busy=C;this._rejectOnPersistedPageShow=!1;var F=this,G=function(P){var S=C.options_&&C.options_.resource,L=C.resUrl_,aa=C.refresh_,ba=!1;-1===a.indexOf(F.credentials,P)&&(aa&&-1!==a.indexOf(F.credentials,aa)?(aa.userId=P.userId,aa.token=P.token,aa.expires=P.expires,aa.validity=P.validity,aa.ssl=P.ssl,aa.creationTime=P.creationTime,ba=!0,P=aa):F.credentials.push(P));P.resources||(P.resources=[]);P.resources.push(S||L);P.scope=F._isServerRsrc(L)?"server":"portal";
P.onTokenChange();S=F._soReqs;var O={};F._soReqs=[];a.forEach(S,function(V){if(!this._isIdenticalService(L,V.resUrl_)){var X=this._getSuffix(V.resUrl_);O[X]||(O[X]=!0,P.resources.push(V.resUrl_))}},F);C.callback(P);a.forEach(S,function(V){this._hasSameServerInstance(this._getServerInstanceRoot(L),V.resUrl_)?V.callback(P):this._soReqs.push(V)},F);F._busy=C.resUrl_=C.sinfo_=C.refresh_=null;if(!ba)F.onCredentialCreate({credential:P});F._soReqs.length?F._doSignIn(F._soReqs.shift()):F._xoReqs.length&&
F._doSignIn(F._xoReqs.shift())},H=function(P){C.errback(P);F._busy=C.resUrl_=C.sinfo_=C.refresh_=null;F._soReqs.length?F._doSignIn(F._soReqs.shift()):F._xoReqs.length&&F._doSignIn(F._xoReqs.shift())},J=function(P,S,L,aa){var ba=C.sinfo_,O=!C.options_||!1!==C.options_.prompt,V=ba.hasPortal&&F._findOAuthInfo(C.resUrl_);if(F._canUsePortalSignInWorkflow(C.resUrl_))if(S=F._getEsriAuthCookie(),P=F._portalConfig,S){ba.webTierAuth||"web"!==(S.auth_tier&&S.auth_tier.toLowerCase())||(ba.webTierAuth=!0);var X=
new B({userId:S.email,server:ba.server,token:ba.webTierAuth?null:S.token,expires:S.expires});X.token?C._pendingDfd=F._exchangeToken(X.server,V?V.appId:"arcgisonline",X.token).then(function(Y){X.token=Y;G(X)}).catch(function(){G(X)}):G(X)}else O?(O="",V=window.location.href,O=F.signInPage?F.signInPage:P?P.baseUrl+P.signin:F._isIdProvider(V,C.resUrl_)?F._getOrigin(V)+"/home/signin.html":ba.tokenServiceUrl.replace(F._rePortalTokenSvc,"")+"/home/signin.html",O=O.replace(/http:/i,"https:"),P&&!1===P.useSSL&&
(O=O.replace(/https:/i,"http:")),0===V.toLowerCase().replace("https","http").indexOf(O.toLowerCase().replace("https","http"))?(ba=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+C.resUrl_),ba.code="IdentityManagerBase.5",ba.log=!!y.isDebug,H(ba)):(F._rejectOnPersistedPageShow=!0,F._redirectFunc?F._redirectFunc({signInPage:O,returnUrlParamName:"returnUrl",returnUrl:V,resourceUrl:C.resUrl_,serverInfo:ba}):window.location=O+"?returnUrl\x3d"+
window.escape(V))):(ba=Error("User is not signed in."),ba.code="IdentityManagerBase.6",ba.log=!!y.isDebug,H(ba));else if(P)G(new B({userId:P,server:ba.server,token:L,expires:t.isDefined(aa)?Number(aa):null,ssl:!!S}));else if(V){var N=V._oAuthCred;N||(P=new E(V,window.localStorage),S=new E(V,window.sessionStorage),P.isValid()&&S.isValid()?P.expires>S.expires?(N=P,S.destroy()):(N=S,P.destroy()):N=P.isValid()?P:S,V._oAuthCred=N);N.isValid()?(X=new B({userId:N.userId,server:ba.server,token:N.token,expires:N.expires,
ssl:N.ssl,_oAuthCred:N}),V.appId!==N.appId&&F._doPortalSignIn(C.resUrl_,!0)?C._pendingDfd=F._exchangeToken(X.server,V.appId,X.token).then(function(Y){X.token=Y;N.token=Y;N.save();G(X)}).catch(function(){G(X)}):G(X)):F._oAuthHash&&F._oAuthHash.state.portalUrl===V.portalUrl?(O=F._oAuthHash,X=new B({userId:O.username,server:ba.server,token:O.access_token,expires:(new Date).getTime()+1E3*Number(O.expires_in),ssl:"true"===O.ssl,oAuthState:O.state,_oAuthCred:N}),N.storage=O.persist?window.localStorage:
window.sessionStorage,N.token=X.token,N.expires=X.expires,N.userId=X.userId,N.ssl=X.ssl,N.save(),F._oAuthHash=null,G(X)):O?C._pendingDfd=F.oAuthSignIn(C.resUrl_,ba,V,C.options_).addCallbacks(G,H):(ba=Error("User is not signed in."),ba.code="IdentityManagerBase.6",ba.log=!!y.isDebug,H(ba))}else O?F._checkProtocol(C.resUrl_,ba,H,C.admin_)&&(O=C.options_,C.admin_&&(O=O||{},O.isAdmin=!0),C._pendingDfd=F.signIn(C.resUrl_,ba,O).addCallbacks(G,H)):(ba=Error("User is not signed in."),ba.code="IdentityManagerBase.6",
ba.log=!!y.isDebug,H(ba))},I=function(){var P=C.sinfo_,S=P.owningSystemUrl,L=C.options_,aa;if(L){var ba=L.token;var O=L.error;var V=L.prompt}(aa=F._findCredential(S,{token:ba,resource:C.resUrl_}))||a.some(F.credentials,function(X){this._isIdProvider(S,X.server)&&(aa=X);return!!aa},F);aa?(L=F.findCredential(C.resUrl_,aa.userId))?G(L):v(P,F._legacyFed)?(L=aa.toJson(),L.server=P.server,L.resources=null,G(new B(L))):(C._pendingDfd=F.generateToken(F.findServerInfo(aa.server),null,{serverUrl:C.resUrl_,
token:aa.token,ssl:aa.ssl})).addCallbacks(function(X){G(new B({userId:aa.userId,server:P.server,token:X.token,expires:t.isDefined(X.expires)?Number(X.expires):null,ssl:!!X.ssl,isAdmin:C.admin_,validity:X.validity}))},H):(F._busy=null,ba&&(C.options_.token=null),(C._pendingDfd=F.getCredential(S.replace(/\/?$/,"/sharing"),{resource:C.resUrl_,owningTenant:P.owningTenant,token:ba,error:O,prompt:V})).addCallbacks(function(X){F._enqueue(C.resUrl_,C.sinfo_,C.options_,C,C.admin_)},function(X){H(X)}))};this._errbackFunc=
H;var K=C.sinfo_.owningSystemUrl,R=this._isServerRsrc(C.resUrl_),W=C.sinfo_._restInfoDfd;W?W.addCallbacks(function(P){var S=C.sinfo_;S._restInfoDfd&&(S.adminTokenServiceUrl=S._restInfoDfd.adminUrl_,S._restInfoDfd=null,S.tokenServiceUrl=q.getObject("authInfo.tokenServicesUrl",!1,P)||q.getObject("authInfo.tokenServiceUrl",!1,P)||q.getObject("tokenServiceUrl",!1,P),S.shortLivedTokenValidity=q.getObject("authInfo.shortLivedTokenValidity",!1,P),S.currentVersion=P.currentVersion,S.owningTenant=P.owningTenant,
(P=S.owningSystemUrl=P.owningSystemUrl)&&F._portals.push(P));R&&S.owningSystemUrl?I():J()},function(){C.sinfo_._restInfoDfd=null;var P=Error("Unknown resource - could not find token service endpoint.");P.code="IdentityManagerBase.2";P.log=!!y.isDebug;H(P)}):R&&K?I():C.sinfo_._selfReq?C.sinfo_._selfReq.selfDfd.then(function(P){var S={};if(P){var L=P.user&&P.user.username;S.username=L;S.allSSL=P.allSSL;var aa=P.supportsOAuth;var ba=P.currentVersion;if("multitenant"===P.portalMode)var O=P.customBaseUrl}C.sinfo_.webTierAuth=
!!L;return L&&F.normalizeWebTierAuth?F.generateToken(C.sinfo_,null,{ssl:S.allSSL}).addBoth(function(V){S.portalToken=V&&V.token;S.tokenExpiration=V&&V.expires;return S}):!L&&aa&&4.4<=parseFloat(ba)&&!F._canUsePortalSignInWorkflow(C.resUrl_)?F._generateOAuthInfo({portalUrl:C.sinfo_.server,customBaseUrl:O,owningTenant:C.sinfo_._selfReq.owningTenant}).always(function(){return S}):S}).always(function(P){C.sinfo_._selfReq=null;P?J(P.username,P.allSSL,P.portalToken,P.tokenExpiration):J()}):J()},_generateOAuthInfo:function(C){var F=
this,G=C.portalUrl,H=C.customBaseUrl,J=C.owningTenant;if(C=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var I=window.location.href;var K=I.indexOf("?");-1<K&&(I=I.slice(0,K));K=I.search(/\/(apps|home)\//);I=-1<K?I.slice(0,K):null}C&&I?(this._hasTestedIfAppIsOnPortal=!0,C=A({url:I+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){F.defaultOAuthInfo=new w({appId:"arcgisonline",popup:!0,popupCallbackUrl:I+"/home/oauth-callback.html"})})):(C=
new h,C.resolve(),C=C.promise);return C.then(function(){if(F.defaultOAuthInfo)return G=G.replace(/^http:/i,"https:"),A({url:G+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:J,client_id:F.defaultOAuthInfo.appId,redirect_uri:u.getAbsoluteUrl(F.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(R){if(R.valid){var W=F.defaultOAuthInfo.clone();W.portalUrl=R.urlKey&&H?"https://"+R.urlKey.toLowerCase()+"."+H:G;F.oAuthInfos.push(W)}})})}});
var B=b(z,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(C){q.mixin(this,C);this.resources=this.resources||[];t.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var C=this,F=this.resources&&this.resources[0],G=c.id.findServerInfo(this.server),H=G&&G.owningSystemUrl,J=!!H&&"server"===this.scope,I=J&&v(G,c.id._legacyFed),K=J&&c.id.findServerInfo(H),R,W=(R=G.webTierAuth)&&c.id.normalizeWebTierAuth,P=D[this.server];
P=P&&P[this.userId];var S={username:this.userId,password:P};if(!R||W)if(J&&!K&&a.some(c.id.serverInfos,function(ba){c.id._isIdProvider(H,ba.server)&&(K=ba);return!!K}),R=K&&c.id.findCredential(K.server,this.userId),!J||R)if(I)R.refreshToken();else{if(J)var L={serverUrl:F,token:R&&R.token,ssl:R&&R.ssl};else if(W)S=null,L={ssl:this.ssl};else if(P)this.isAdmin&&(L={isAdmin:!0});else{if(F){F=c.id._sanitizeUrl(F);this._enqueued=1;var aa=c.id._enqueue(F,G,null,null,this.isAdmin,this);aa.addCallback(function(){C._enqueued=
0;C.refreshServerTokens()}).addErrback(function(){C._enqueued=0})}return aa}return c.id.generateToken(J?K:G,J?null:S,L).addCallback(function(ba){C.token=ba.token;C.expires=t.isDefined(ba.expires)?Number(ba.expires):null;C.creationTime=(new Date).getTime();C.validity=ba.validity;C.onTokenChange();C.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&a.forEach(c.id.credentials,function(C){var F=c.id.findServerInfo(C.server),G=F&&F.owningSystemUrl;
C!==this&&C.userId===this.userId&&G&&"server"===C.scope&&(c.id._hasSameServerInstance(this.server,G)||c.id._isIdProvider(G,this.server))&&(v(F,c.id._legacyFed)?(C.token=this.token,C.expires=this.expires,C.creationTime=this.creationTime,C.validity=this.validity,C.onTokenChange()):C.refreshToken())},this)},onTokenChange:function(C){clearTimeout(this._refreshTimer);var F=this.server&&c.id.findServerInfo(this.server),G=(F=F&&F.owningSystemUrl)&&c.id.findServerInfo(F);!1!==C&&(!F||"portal"===this.scope||
G&&G.webTierAuth&&!c.id.normalizeWebTierAuth)&&(t.isDefined(this.expires)||t.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var C=a.indexOf(c.id.credentials,this);-1<C&&c.id.credentials.splice(C,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var C=
t.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),F=this.resources;F&&0<F.length&&(C.resources=F.slice());return C},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var C=6E4*this.tokenRefreshBuffer,F=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>F&&(F=0);this._refreshTimer=setTimeout(q.hitch(this,this.refreshToken),
F>C?F-C:F)}});g.Credential=B;return c.IdentityManagerBase=g})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(b,y,q,a,h){b=b(null,{declaredClass:"esri.ServerInfo",constructor:function(e){y.mixin(this,e)},toJson:function(){return h.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,
owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return a.ServerInfo=b})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(b,y,q,a,h,e,g,f,m,l){var d={},c=f.defaults.io,k=/^[a-z][a-z0-9\+\-\.]*:/i,t=/^\s*http:/i,n=/^\s*https:/i,u=/:\d+$/,x=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;
d.isHTTP=function(z){var E=a.location.protocol;return null==z?"http:"===E||"https:"===E:z?"https:"===E:"http:"===E};d.getProtocolForWebResource=function(z){return d.isHTTP()?a.location.protocol:z?"https:":"http:"};d.urlToObject=function(z){var E={},w=new q(z),D=z.indexOf("?");null===w.query?E={path:z,query:null}:(E.path=z.substring(0,D),E.query=h.queryToObject(w.query));w.fragment&&(E.hash=w.fragment,null===w.query&&(E.path=E.path.substring(0,E.path.length-(w.fragment.length+1))));return E};d.getProxyUrl=
function(z,E){var w=b.isString(z)?0===b.trim(z).toLowerCase().indexOf("https:"):z,D=c.proxyUrl,r=l.io.proxyNotSet;b.isString(z)&&(z=d.getProxyRule(z))&&(D=z.proxyUrl);if(!D)throw Error(r);if(w&&!1!==E&&0!==a.location.href.toLowerCase().indexOf("https:")&&(E=D,0!==E.toLowerCase().indexOf("http")&&(E=d.getAbsoluteUrl(E)),E=E.replace(/^http:/i,"https:"),d.canUseXhr(E))){D=E;var v=1}D=d.urlToObject(D);D._xo=v;return D};d.addProxy=function(z){var E=d.getProxyRule(z),w;E?w=d.urlToObject(E.proxyUrl):c.alwaysUseProxy&&
(w=d.getProxyUrl());w&&(E=d.urlToObject(z),z=w.path+"?"+E.path,(w=h.objectToQuery(b.mixin(w.query||{},E.query)))&&(z+="?"+w));return z};d.addProxyRule=function(z){var E=z.urlPrefix=d.urlToObject(z.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),w=c.proxyRules,D,r=w.length,v=r;for(D=0;D<r;D++){var B=w[D].urlPrefix;if(0===E.indexOf(B)){if(E.length===B)return-1;v=D;break}else 0===B.indexOf(E)&&(v=D+1)}w.splice(v,0,z);return v};d.getProxyRule=function(z){var E=c.proxyRules,
w=E.length,D=d.urlToObject(z).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(z=0;z<w;z++)if(0===D.indexOf(E[z].urlPrefix)){var r=E[z];break}return r};d.hasSameOrigin=function(z,E,w){z=z.toLowerCase();E=E.toLowerCase();var D=a.location.href.toLowerCase();z=0===z.indexOf("http")?new q(z):D=new q(D);E=0===E.indexOf("http")?new q(E):b.isString(D)?new q(D):D;return(w||z.scheme===E.scheme)&&z.host===E.host&&z.port===E.port};d.canUseXhr=function(z,E){var w=m("esri-phonegap")?
!0:!1,D=d.hasSameOrigin,r=c.corsEnabledServers,v,B=-1;!w&&m("esri-cors")&&r&&r.length&&(w=y.some(r,function(C,F){C=!C||"object"!==typeof C||C instanceof RegExp?C:C.host;if(C instanceof RegExp){if(C.test(z))return B=F,!0}else if(C&&(v=0!==C.trim().toLowerCase().indexOf("http"),D(z,v?"http://"+C:C)||v&&D(z,"https://"+C)))return B=F,!0;return!1}));return E?B:w};d.getAbsoluteUrl=function(z){var E=d.getProtocolForWebResource();return b.isString(z)&&!k.test(z)?0===z.indexOf("//")?E+z:0===z.indexOf("/")?
E+"//"+a.location.host+z:e._appBaseUrl+z:z};d.fixUrl=function(z){z=b.trim(z);z=d.getAbsoluteUrl(z);z=d.normalizeSlashes(z);z=z.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");z=d.downgradeToHTTP(z);return z=d.upgradeToHTTPS(z)};d.normalize=function(z){return d.fixUrl(z)};d.normalizeSlashes=function(z){if(/^https?:\/\//i.test(z)){var E=z.indexOf("?");if(-1<E){var w=z.slice(0,E);var D=z.slice(E+1)}else w=z;z=w.replace(/\/{2,}/g,"/");z=z.replace("/","//");D&&(z+="?"+D)}return z};d.downgradeToHTTP=
function(z){return d.isHTTP(!1)&&n.test(z)&&d.hasSameOrigin(a.location.href,z,!0)&&!d.canUseXhr(z)?z.replace(n,"http:"):z};d.upgradeToHTTPS=function(z){var E=c.httpsDomains,w=d.isHTTP(!1),D=d.isHTTP(!0);if(!t.test(z))return z;z=b.trim(z);var r=z.indexOf("/",7);r=-1===r?z:z.slice(0,r);r=r.toLowerCase().slice(7);if(u.test(r))if(g.endsWith(r,":80"))r=r.slice(0,-3),z=z.replace(":80","");else return z;if(w&&r===a.location.host&&(!x.test(z)||!d.canUseXhr(z)))return z;w=!1;if(D&&r===a.location.host)w=!0;
else if(E)for(var v=0;v<E.length;v++){var B=E[v];if(r===B||g.endsWith(r,"."+B)){w=!0;break}}w||!D||c.alwaysUseProxy||d.getProxyRule(z)||(w=!0);w&&(z=z.replace(t,"https:"));return z};f=l.widgets.popup;var A=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:f.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,
appName:"Collector",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",
label:f.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:f.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:f.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:f.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,appName:"Microsoft Power BI",label:f.NLS_openLinkInApp}];d.getURIInfo=function(z){var E;y.some(A,function(w){w.pattern.test(z)&&(E=w);return!!E});return E};d.isKnownURI=
function(z){return!!d.getURIInfo(z)};b.mixin(e,d);e._getProxyUrl=d.getProxyUrl;e._getProxiedUrl=d.addProxy;e._hasSameOrigin=d.hasSameOrigin;e._canDoXOXHR=d.canUseXhr;e._getAbsoluteUrl=d.getAbsoluteUrl;e.fixUrl=d.fixUrl;return d})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(b,y,q){var a=b("ff"),h=b("ie"),e=void 0===h&&7<=b("trident"),g=b("edge"),f=b("webkit"),m=b("opera"),l=b("chrome"),d=b("safari"),c=navigator.userAgent,k;(k=c.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&
b.add("esri-iphone",parseFloat(k[2].replace("_",".")));(k=c.match(/Android\s+(\d+(\.\d+)*)/i))&&b.add("esri-android",parseFloat(k[1]));(k=c.match(/Fennec\/(\d+\.\d+)/i))&&b.add("esri-fennec",parseFloat(k[1]));0<=c.indexOf("BlackBerry")&&0<=c.indexOf("WebKit")&&b.add("esri-blackberry",1);b.add("esri-touch",b("esri-iphone")||b("esri-android")||b("esri-blackberry")||6<=b("esri-fennec")||(a||f)&&(document.createTouch||"ontouchstart"in y||y.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(k=c.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&
b.add("esri-mobile",!!k);b.add("esri-pointer",!a&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!y.PointerEvent));q._getDOMAccessor=function(n){var u="";a?u="Moz":f?u="Webkit":h?u="ms":m&&(u="O");return u+n.charAt(0).toUpperCase()+n.substr(1)};b.add("esri-phonegap",!!y.cordova);b.add("esri-cors",b("esri-phonegap")||y.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);b.add("esri-file-upload",y.FormData&&y.FileList?!0:!1);b.add("esri-script-sandbox",function(){return"MessageChannel"in
y&&"HTMLIFrameElement"in y&&"sandbox"in HTMLIFrameElement.prototype});b.add("esri-secure-context",function(){if("isSecureContext"in y)return y.isSecureContext;if(y.location&&y.location.origin)return 0===y.location.origin.indexOf("https:")});b.add("esri-wasm","WebAssembly"in y);b.add("esri-workers",y.Worker?!0:!1);b.add("esri-featurelayer-webgl",!1);if(c=b("esri-featurelayer-webgl")){var t=b("esri-mobile");k=t?1:2;t=t?1:3;"object"===typeof c?(c.maxDrillLevel=null==c.maxDrillLevel?k:c.maxDrillLevel,
c.maxRecordCountFactor=null==c.maxRecordCountFactor?t:c.maxRecordCountFactor,c.enablePBFQuery=null==c.enablePBFQuery?!0:c.enablePBFQuery):b.add("esri-featurelayer-webgl",{maxDrillLevel:k,maxRecordCountFactor:t,enablePBFQuery:!0},null,!0)}b.add("esri-featurelayer-webgl-labeling",!1);b.add("esri-pbf",!h||10<=h);b.add("esri-featurelayer-pbf",!0);b.add("esri-transforms",e||g||9<=h||3.5<=a||4<=l||3.1<=d||10.5<=m||3.2<=b("esri-iphone")||2.1<=b("esri-android"));b.add("esri-transitions",e||g||10<=h||4<=a||
4<=l||3.1<=d||10.5<=m||3.2<=b("esri-iphone")||2.1<=b("esri-android"));b.add("esri-transforms3d",e||g||10<=a||12<=l||4<=d||3.2<=b("esri-iphone")||3<=b("esri-android"));b.add("esri-url-encodes-apostrophe",function(){if(!y.document)return!1;var n=y.document.createElement("a");n.href="?'";return-1<n.href.indexOf("?%27")});3>b("esri-android")&&(b.add("esri-transforms",!1,!1,!0),b.add("esri-transitions",!1,!1,!0),b.add("esri-transforms3d",!1,!1,!0));b.add("esri-will-change",b("esri-transforms")&&(52<=l||
11.1<=d));q._css=function(n){var u=b("esri-transforms3d");void 0!==n&&null!==n?u=n:u&&(l||d&&!b("esri-iphone"))&&(u=!1);var x=u?"translate3d(":"translate(",A=u?l?",-1px)":",0px)":")",z=u?"scale3d(":"scale(",E=u?",1)":")",w=u?"rotate3d(0,0,1,":"rotate(",D=u?"matrix3d(":"matrix(",r=u?",0,0,":",",v=u?",0,0,0,0,1,0,":",",B=u?",0,1)":")";return{names:{transition:f&&"-webkit-transition"||a&&"MozTransition"||m&&"OTransition"||h&&"msTransition"||"transition",transform:f&&"-webkit-transform"||a&&"MozTransform"||
m&&"OTransform"||h&&"msTransform"||"transform",transformName:f&&"-webkit-transform"||a&&"-moz-transform"||m&&"-o-transform"||h&&"-ms-transform"||"transform",origin:f&&"-webkit-transform-origin"||a&&"MozTransformOrigin"||m&&"OTransformOrigin"||h&&"msTransformOrigin"||"transformOrigin",endEvent:f&&"webkitTransitionEnd"||a&&"transitionend"||m&&"oTransitionEnd"||h&&"MSTransitionEnd"||"transitionend"},translate:function(C,F){return x+C+"px,"+F+"px"+A},scale:function(C){return z+C+","+C+E},rotate:function(C){return w+
C+"deg)"},matrix:function(C){return D+C.xx+","+C.xy+r+C.yx+","+C.yy+v+C.dx.toFixed(10)+(a&&59>=a?"px,":",")+C.dy.toFixed(10)+(a&&59>=a?"px":"")+B},getScaleFromMatrix:function(C){if(!C)return 1;C=C.toLowerCase();var F=-1<C.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(C.substring(F.length,C.indexOf(",")))}}};q.isiPhone=b("esri-iphone");q.isAndroid=b("esri-android");q.isFennec=b("esri-fennec");q.isBlackBerry=b("esri-blackberry");q.isTouchEnabled=b("esri-touch");q.isPointerEnabled=b("esri-pointer");
q._hasCors=b("esri-cors");q._hasFileUpload=b("esri-file-upload");q._hasTransforms=b("esri-transforms");q._hasTransitions=b("esri-transitions");q._has3DTransforms=b("esri-transforms3d");return b})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(b,y,q){y={_dfdCanceller:function(a){a.canceled=!0;var h=a._pendingDfd;if(!a.isFulfilled()&&h&&!h.isFulfilled()){h.cancel();var e=h.results&&h.results[1]}a._pendingDfd=null;return e},_fixDfd:function(a){var h=a.then;
a.then=function(e,g,f){if(e){var m=e;e=function(l){return l&&l._argsArray?m.apply(null,l):m(l)}}return h.call(this,e,g,f)};return a},_resDfd:function(a,h,e){var g=h.length;1===g?e?a.errback(h[0]):a.callback(h[0]):1<g?(h._argsArray=!0,a.callback(h)):a.callback()}};b.mixin(q,y);return y})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A){function z(P){P=new e(P);return(P.host+(P.port?":"+P.port:"")).toLowerCase()}function E(P){return this._xhr?this._xhr.getResponseHeader(P):null}function w(P,S){var L=c.objectToQuery(P.content);L&&(P.url+=(-1===P.url.indexOf("?")?"?":"\x26")+L);if(2E3<P.url.length){if("data:"!==P.url.toLowerCase().slice(0,5))return P=new a,P.reject(h.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),P;if(3E6<P.url.length)return P=
new a,P.reject(h.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),P}var aa=new Image;S.allowImageDataAccess&&(aa.crossOrigin=P.withCredentials?"use-credentials":"anonymous");var ba=!1,O=new a(function(V){ba=!0;aa.onload=aa.onerror=aa.onabort=null;aa.src=""});S=function(V){aa.onload=aa.onerror=aa.onabort=null;ba||O.reject(Error("Unable to load the resource"))};aa.onload=function(){aa.onload=aa.onerror=aa.onabort=null;ba||O.resolve(this)};
aa.onerror=S;aa.onabort=S;aa.alt="";aa.src=P.url;return O}function D(P,S,L,aa){var ba=!1,O=!1,V=!1;if(u.isDefined(S))if(h.isObject(S)){ba=!!S.useProxy;O=!!S.usePost;V=!!S.returnProgress;var X=S.crossOrigin}else ba=!!S;P=h.mixin({},P);delete P._credential;P._ssl&&(P.url=P.url.replace(/^http:/i,"https:"));10>n("ie")&&!R.test(P.url)&&(P.url=encodeURI(P.url));var N=P.content,Y=P.url,ia=L&&P.form,oa=J;X=u.isDefined(X)?X:oa.useCors;P.load=function(Ha){if(Ha){if(Ha.error){var Ua=h.mixin(Error(),Ha.error);
Ua.log=!!q.isDebug}else"error"===Ha.status&&(Ua=h.mixin(Error(),Ha),Ua.log=!!q.isDebug);Ua&&(P.failOk=!Ua.log,u.isDefined(Ua.httpCode)||(Ua.httpCode=Ua.code))}return Ua||Ha};P.error=function(Ha,Ua){Ua&&Ua.xhr&&Ua.xhr.abort();Ha instanceof Error||(Ha=h.mixin(Error(),Ha));Ha.log=!!q.isDebug;P.failOk=!Ha.log;oa.errorHandler(Ha,Ua);return Ha};P._token&&(P.content=P.content||{},P.content.token=P._token);var sa=0;if(N&&Y){var Ba=c.objectToQuery(N);sa=Ba.length+Y.length+1;n("esri-url-encodes-apostrophe")&&
(sa=Ba.replace(/'/g,"%27").length+Y.length+1)}P.timeout=u.isDefined(P.timeout)?P.timeout:oa.timeout;P.handleAs=P.handleAs||"json";try{var Da=X&&x.canUseXhr(P.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(P.url),pa=x.hasSameOrigin(P.url,window.location.href)||Da,ra=O||L||sa>oa.postLength?!0:!1,ya=pa||-1===P.handleAs.indexOf("json")||!P.callbackParamName||L?!1:!0,wa=x.getProxyRule(P.url)||oa.alwaysUseProxy||ba||!("image"===P.handleAs&&!S.allowImageDataAccess||ya&&!ra||pa)?!0:!1;L&&!n("esri-file-upload")&&
!wa&&Da&&(wa=!0);if(wa){var la=x.getProxyUrl(Y,X);var Aa=la.path;la._xo&&(Da=!0);!ra&&Aa.length+1+sa>oa.postLength&&(ra=!0);P.url=Aa+"?"+Y;if(ra)P.content=h.mixin(la.query||{},N);else{var da=c.objectToQuery(h.mixin(la.query||{},N));da&&(P.url+="?"+da);P.content=null}}if(!ya||ra||wa){var fa=P.headers;!Da||fa&&fa.hasOwnProperty("X-Requested-With")||(fa=P.headers=fa||{},fa["X-Requested-With"]=null);if(L){var Q=P.callbackParamName||"callback.html",xa=P.callbackElementName||"textarea",Fa,ca,Sa=ia.elements?
ia.elements.length:0;if(N=P.content)for(Fa in N.token&&-1<Y.toLowerCase().indexOf("/sharing/servers/")&&(Y+=(-1===Y.indexOf("?")?"?":"\x26")+"token\x3d"+N.token,P.url=wa?Aa+"?"+Y:Y,delete N.token),N){var Qa=N[Fa];if(u.isDefined(Qa)){var va=null;for(ca=0;ca<Sa;ca++){var T=ia.elements[ca];if(T.name===Fa){va=T;break}}va?va.value=Qa:aa?ia.append(Fa,Qa):ia.appendChild(d.create("input",{type:"hidden",name:Fa,value:Qa}))}}if(n("esri-file-upload")){y.forEach(ia.elements,function(Ha){Ha.name===Q&&ia.removeChild(Ha)});
var ja=aa?ia:new FormData(ia);if(11<=n("safari")&&"entries"in ja&&"delete"in ja){aa=[];for(var ka=ja.entries(),U=ka.next();!U.done;){var ha=U.value;ha[1]instanceof File&&""===ha[1].name&&aa.push(ha[0]);U=ka.next()}aa.forEach(function(Ha){ja.delete(Ha)})}P.contentType=!1;P.postData=ja;delete P.form}else{ia.enctype="multipart/form-data";9>n("ie")&&(ia.encoding="multipart/form-data");ia.method="post";y.some(ia.elements,function(Ha){return Ha.name===Q})||ia.appendChild(d.create("input",{type:"hidden",
name:Q,value:xa}));if(-1!==Y.toLowerCase().indexOf("addattachment")||-1!==Y.toLowerCase().indexOf("updateattachment"))Y+=(-1===Y.indexOf("?")?"?":"\x26")+Q+"\x3d"+xa,P.url=wa?Aa+"?"+Y:Y;delete P.content}}if(Da&&!P.hasOwnProperty("withCredentials")&&"with-credentials"===J.useCors){Y=wa?Aa:Y;var na=x.canUseXhr(Y,!0),qa=-1<na?J.corsEnabledServers[na]:null;if(qa&&qa.hasOwnProperty("withCredentials"))qa.withCredentials&&(P.withCredentials=!0);else if(k.id){var ua=k.id.findServerInfo(Y);ua&&ua.webTierAuth&&
(P.withCredentials=!0)}}P=H?H(P):P;if("image"===P.handleAs)return w(P,S);if(ra){if(L&&!n("esri-file-upload")){var za=new a(function(){Ea.cancel()});var Ea=l.post(P.url,P).then(function(Ha){za.resolve(Ha)}).otherwise(function(Ha){za.reject(Ha)});za.addCallback(function(Ha){return P.load(Ha)});za.addErrback(function(Ha){return P.error(Ha)});return za}!wa&&n("safari")&&(P.url+=(-1===P.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+K++);if(V){P.uploadProgress=!0;P.data=P.postData;P.query=
P.content;za=new a(function(){Pa.cancel()});var Pa=f.post(P.url,P).then(function(Ha){za.resolve(Ha)},function(Ha){za.reject(Ha)},function(Ha){za.progress({transferType:Ha.transferType,loaded:Ha.loaded,total:Ha.total})});za.addCallback(function(Ha){return P.load(Ha)});za.addErrback(function(Ha){return P.error(Ha)});return za}return g.post(P)}return g.get(P)}P=H?H(P):P;P.jsonp=P.callbackParamName;P.query=P.content;za=new a(function(){Oa.cancel()});var Oa=m.get(P.url,P).then(function(Ha){za.resolve(Ha)}).otherwise(function(Ha){za.reject(Ha)});
za.addCallback(function(Ha){return P.load(Ha)});za.addErrback(function(Ha){return P.error(Ha)});return za}catch(Ha){return za=new a,za.errback(P.error(Ha)),za}}function r(P){var S=J.corsStatus,L=x.canUseXhr(P,!0);-1<L&&J.corsEnabledServers.splice(L,1);var aa=new a;aa.reject({log:!!q.isDebug});S[z(P)]=aa.promise;return L}function v(P){var S=J.corsStatus;try{var L=z(P);if(J.corsDetection&&J.useCors&&n("esri-cors")&&P&&-1!==P.toLowerCase().indexOf("/rest/services")&&!x.hasSameOrigin(P,window.location.href)&&
!x.canUseXhr(P)){if(S[L]&&!S[L].isCanceled())return S[L];var aa=new a(A._dfdCanceller);S[L]=aa.promise;var ba=g.get({url:P.substring(0,P.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*J.corsDetectionTimeout});aa._pendingDfd=ba;ba.then(function(O){O?(x.canUseXhr(P)||J.corsEnabledServers.push(L),aa.resolve()):aa.reject()},function(O){aa.reject(O)});return aa.promise}}catch(O){}return W}function B(P){H=P}function C(P,
S,L,aa){function ba(pa){pa._pendingDfd=D(L,aa,oa,ia);if(!pa._pendingDfd){pa.ioArgs=pa._pendingDfd&&pa._pendingDfd.ioArgs;var ra=Error("Deferred object is missing");ra.log=!!q.isDebug;pa.errback(ra);pa._pendingDfd=null;return pa}pa._pendingDfd.addCallback(function(ya){if(!ya)return ya;var wa=pa._pendingDfd&&pa._pendingDfd.ioArgs&&pa._pendingDfd.ioArgs.xhr;if(!wa)return ya;if(wa=wa.getResponseHeader("Content-Type"))if(wa=wa.toLowerCase(),-1===wa.indexOf("text/plain")&&-1===wa.indexOf("application/json"))return ya;
if(ya instanceof ArrayBuffer&&750>=ya.byteLength)wa=new Blob([ya]);else if(ya instanceof Blob&&750>=ya.size)wa=ya;else return ya;var la=new a,Aa=new FileReader;Aa.readAsText(wa);Aa.onloadend=function(){if(!Aa.error)try{var da=JSON.parse(Aa.result);if(da.error)var fa=da.error}catch(Q){}fa?(fa=h.mixin(Error(),fa),fa.log=!!q.isDebug,null==fa.httpCode&&(fa.httpCode=fa.code),la.reject(fa)):la.resolve(ya)};return la.promise}).addCallback(function(ya){pa.ioArgs=pa._pendingDfd&&pa._pendingDfd.ioArgs;aa.returnFullResponse&&
(ya={data:ya,_xhr:pa.ioArgs&&pa.ioArgs.xhr,getHeader:E});pa.callback(ya);pa._pendingDfd=null}).addErrback(function(ya){if(ya){var wa=ya.code;var la=ya.subcode;var Aa=(Aa=ya.messageCode)&&Aa.toUpperCase()}if(ya&&403==wa&&(4==la||ya.message&&-1<ya.message.toLowerCase().indexOf("ssl")&&-1===ya.message.toLowerCase().indexOf("permission"))){if(!L._ssl){L._ssl=L._sslFromServer=!0;C(pa,!0,L,aa);return}}else if(ya&&415==ya.status){if(r(L.url),!L._err415){L._err415=1;C(pa,!0,L,aa);return}}else if(k.id&&-1!==
y.indexOf(k.id._errorCodes,wa)&&!k.id._isPublic(L.url)&&!V&&(403!=wa||-1===y.indexOf(I,Aa)&&(!u.isDefined(la)||2==la&&L._token))){pa._pendingDfd=k.id.getCredential(L.url,{token:L._token,error:ya});pa._pendingDfd.addCallback(function(da){L._token=da.token;L._credential=da;L._ssl=L._sslFromServer||da.ssl;C(pa,!0,L,aa)}).addErrback(function(da){pa.errback(da);pa._pendingDfd=null});return}pa.ioArgs=pa._pendingDfd&&pa._pendingDfd.ioArgs;pa.isFulfilled()||pa.errback(ya);pa._pendingDfd=null}).then(null,
null,function(ya){pa.progress(ya)})}var O=L.form,V=aa.disableIdentityLookup,X=aa._preLookup,N=!1;if(n("esri-workers")&&!1!==J.useWorkers)if(!0===aa.useWorkers||!0===J.useWorkers)N=!0;else if(aa.workerOptions){var Y=aa.workerOptions;if(Y.callback||Y.worker&&Y.worker.worker instanceof Worker)N=!0}var ia=O&&n("esri-file-upload")&&O instanceof FormData,oa=O&&(O.elements?y.some(O.elements,function(pa){return"file"===pa.type}):ia),sa=-1!==L.url.toLowerCase().indexOf("token\x3d")||L.content&&L.content.token||
oa&&y.some(O.elements,function(pa){return"token"===pa.name})?1:0;if(!S){P.addCallback(function(pa){if((/\/sharing\/rest\/accounts\/self/i.test(L.url)||/\/sharing\/rest\/portals\/self/i.test(L.url))&&!sa&&!L._token&&pa.user&&pa.user.username){J.webTierAuthServers.push(z(L.url));pa=J.corsEnabledServers;var ra=x.canUseXhr(L.url,!0),ya={host:z(L.url),withCredentials:!0};if(-1===ra)pa.push(ya);else{var wa=pa[ra];wa instanceof RegExp?(ya.host=wa,pa.splice(ra,1,ya)):"object"===typeof wa?wa.withCredentials=
!0:pa.splice(ra,1,ya)}}if(pa=L._credential)if(ra=(ra=k.id.findServerInfo(pa.server))&&ra.owningSystemUrl)ra=ra.replace(/\/?$/,"/sharing"),(pa=k.id.findCredential(ra,pa.userId))&&-1===k.id._getIdenticalSvcIdx(ra,pa)&&pa.resources.splice(0,0,ra)});P.addBoth(function(pa){delete L._credential;!pa||n("ie")&&pa.nodeType||(pa._ssl=L._ssl)});var Ba=L.load,Da=L.error;Ba&&P.addCallback(function(pa){var ra=P._pendingDfd;ra=ra&&ra.ioArgs;return Ba.call(ra&&ra.args,pa,ra)});Da&&P.addErrback(function(pa){var ra=
P._pendingDfd;ra=ra&&ra.ioArgs;return Da.call(ra&&ra.args,pa,ra)})}!k.id||sa||L._token||k.id._isPublic(L.url)||V&&!X||!(S=k.id.findCredential(L.url))||(L._token=S.token,L._ssl=S.ssl);N?aa.workerOptions&&aa.workerOptions.worker?(G||(G=g),g=aa.workerOptions.worker,ba(P)):b(["./workers/RequestClient"],function(pa){G||(G=g);if(aa.workerOptions){var ra=aa.workerOptions;g=pa.getClient(ra.callback,ra.cbFunction)}else g=pa.getClient();ba(P)}):(G&&(g=G,G=null),ba(P));return P}function F(P,S){P.url=x.fixUrl(P.url);
S=S||{};var L=new a(A._dfdCanceller),aa=v(P.url);L._pendingDfd=aa;aa.always(function(ba){ba&&"cancel"===ba.dojoType?L.reject(ba):C(L,!1,P,S)});return L}var G=null,H,J=t.defaults.io,I=["COM_0056","COM_0057","SB_0008"],K=0,R=/%[0-9A-F]{2}/i,W=function(){var P=new a;P.resolve();return P.promise}();F._makeRequest=D;F._processRequest=C;F._disableCors=r;F._detectCors=v;F.setRequestPreCallback=B;k.request=F;k._makeRequest=D;k._processRequest=C;k._disableCors=r;k._detectCors=v;k.setRequestPreCallback=B;return F})},
"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(b,y,q,a,h,e){function g(){var x=document.createElement("iframe");x.name="esri_core_jsonp_iframe";x.style.display="none";x.setAttribute("sandbox","allow-scripts");if(!e("ff")&&"srcdoc"in x){var A=b.toUrl("dojo/dojo.js"),z=h.replace("../../../dojo/dojo.js",A);A=A.slice(0,-7);z=z.replace("../../../dojo/",A);x.srcdoc=z}else z=b.toUrl("./iframe.html"),"http:"===
window.location.protocol&&0===z.indexOf("https:")&&(z=z.replace("https:","http:")),x.src=z;document.body.appendChild(x);return x}function f(){var x=new MessageChannel;x.port1.addEventListener("message",m);x.port1.start();return x}function m(x){var A=x.data;if("ready"===A){A=0;for(var z=n;A<z.length;A++)x=z[A],d(x,k);n=null}else if(x=u[A.id])delete u[A.id],A.isError?x.dfd.reject(Error(A.message)):x.dfd.resolve(A.response)}function l(x,A){x.addEventListener("load",function(){x.contentWindow.postMessage("init",
"*",[A.port2])})}function d(x,A){u[x.message.id]=x;A.port1.postMessage(x.message)}Object.defineProperty(y,"__esModule",{value:!0});var c,k,t=0,n=[],u={};y.get=function(x,A){if(!e("esri-script-sandbox"))return a.get(x,A);var z=null;A&&(z={jsonp:A.jsonp,preventCache:A.preventCache,query:A.query,timeout:A.timeout});A=new q(function(){if(n){var w=n.indexOf(E);-1<w&&n.splice(w,1)}else E.message.id in u&&delete u[E.message.id]});var E={dfd:A,message:{id:"id"+(++t+Math.random()),url:x,options:z}};c||(c=
g(),k=f(),l(c,k));n?n.push(E):d(E,k);return A.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(b,y,q,a,h,e,g,f,m,l,d){function c(v,B){v.canDelete&&x._remove(v.id,B.options.frameDoc,!0)}function k(v){r&&r.length&&(h.forEach(r,function(B){x._remove(B.id,B.frameDoc);B.frameDoc=null}),r=[]);return v.options.jsonp?!v.data:!0}function t(v){return!!this.scriptLoaded}
function n(v){return(v=v.options.checkString)&&eval("typeof("+v+') !\x3d\x3d "undefined"')}function u(v,B){if(this.canDelete){var C=this.response.options;r.push({id:this.id,frameDoc:C.ioArgs?C.ioArgs.frameDoc:C.frameDoc});C.ioArgs&&(C.ioArgs.frameDoc=null);C.frameDoc=null}B?this.reject(B):this.resolve(v)}function x(v,B,C){var F=q.parseArgs(v,q.deepCopy({},B));v=F.url;B=F.options;var G=q.deferred(F,c,k,B.jsonp?null:B.checkString?n:t,u);e.mixin(G,{id:A+z++,canDelete:!1});B.jsonp&&((new RegExp("[?\x26]"+
B.jsonp+"\x3d")).test(v)||(v+=(~v.indexOf("?")?"\x26":"?")+B.jsonp+"\x3d"+(B.frameDoc?"parent.":"")+A+"_callbacks."+G.id),G.canDelete=!0,D[G.id]=function(I){F.data=I;G.handleResponse(F)});q.notify&&q.notify.emit("send",F,G.promise.cancel);if(!B.canAttach||B.canAttach(G)){var H=x._attach(G.id,v,B.frameDoc,function(I){if(!(I instanceof Error)){var K=Error("Error loading "+(I.target?I.target.src:"script"));K.source=I;I=K}G.reject(I);x._remove(G.id,B.frameDoc,!0)});if(!B.jsonp&&!B.checkString)var J=g(H,
E,function(I){if("load"===I.type||w.test(H.readyState))J.remove(),G.scriptLoaded=I})}y(G);return C?G:G.promise}l.add("script-readystatechange",function(v,B){return"undefined"!==typeof B.createElement("script").onreadystatechange&&("undefined"===typeof v.opera||"[object Opera]"!==v.opera.toString())});var A=b.id.replace(/[\/\.\-]/g,"_"),z=0,E=l("script-readystatechange")?"readystatechange":"load",w=/complete|loaded/,D=a.global[A+"_callbacks"]={},r=[];x.get=x;x._attach=function(v,B,C,F){C=C||d.doc;
var G=C.createElement("script");if(F)g.once(G,"error",F);G.type="text/javascript";try{G.src=B}catch(H){F&&F(G)}G.id=v;G.async=!0;G.charset="utf-8";return C.getElementsByTagName("head")[0].appendChild(G)};x._remove=function(v,B,C){m.destroy(f.byId(v,B));D[v]&&(C?D[v]=function(){delete D[v]}:delete D[v])};x._callbacksProperty=A+"_callbacks";return x})},"esri/core/sniff":function(){define(["../sniff"],function(b){return b})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c){function k(w){return!this.isFulfilled()}function t(w){return!!this._finished}function n(w,D){if(!D)try{var r=w.options,v=x.doc(x._frame),B=r.handleAs;if("html"!==B){if("xml"===B)if("html"===v.documentElement.tagName.toLowerCase()){f("a",v.documentElement).orphan();var C=v.documentElement.innerText||v.documentElement.textContent;C=C.replace(/>\s+</g,"\x3e\x3c");w.text=e.trim(C)}else w.data=v;else w.text=v.getElementsByTagName("textarea")[0].value;h(w)}else w.data=
v}catch(F){D=F}D?this.reject(D):this._finished?this.resolve(w):this.reject(Error("Invalid dojo/request/iframe request state"))}function u(w){this._callNext()}function x(w,D,r){var v=a.parseArgs(w,a.deepCreate(E,D),!0);w=v.url;D=v.options;if("GET"!==D.method&&"POST"!==D.method)throw Error(D.method+" not supported by dojo/request/iframe");x._frame||(x._frame=x.create(x._iframeName,z+"();"));w=a.deferred(v,null,k,t,n,u);w._callNext=function(){this._calledNext||(this._calledNext=!0,x._currentDfd=null,
x._fireNextRequest())};w._legacy=r;x._dfdQueue.push(w);x._fireNextRequest();q(w);return r?w:w.promise}var A=b.id.replace(/[\/\.\-]/g,"_"),z=A+"_onload";c.global[z]||(c.global[z]=function(){var w=x._currentDfd;if(w){var D=l.byId(w.response.options.form)||w._tmpForm;if(D){for(var r=w._contentToClean,v=0;v<r.length;v++)for(var B=r[v],C=0;C<D.childNodes.length;C++){var F=D.childNodes[C];if(F.name===B){d.destroy(F);break}}w._originalAction&&D.setAttribute("action",w._originalAction);w._originalMethod&&
(D.setAttribute("method",w._originalMethod),D.method=w._originalMethod);w._originalTarget&&(D.setAttribute("target",w._originalTarget),D.target=w._originalTarget)}w._tmpForm&&(d.destroy(w._tmpForm),delete w._tmpForm);w._finished=!0}else x._fireNextRequest()});var E={method:"POST"};x.create=function(w,D,r){if(c.global[w])return c.global[w];if(c.global.frames[w])return c.global.frames[w];r||(m("config-useXDomain")&&m("config-dojoBlankHtmlUrl"),r=m("config-dojoBlankHtmlUrl")||y.toUrl("dojo/resources/blank.html"));
D=d.place('\x3ciframe id\x3d"'+w+'" name\x3d"'+w+'" src\x3d"'+r+'" onload\x3d"'+D+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',c.body());return c.global[w]=D};x.doc=function(w){if(w.contentDocument)return w.contentDocument;var D=w.name;if(D){var r=c.doc.getElementsByTagName("iframe");if(w.document&&r[D].contentWindow&&r[D].contentWindow.document)return r[D].contentWindow.document;if(c.doc.frames[D]&&c.doc.frames[D].document)return c.doc.frames[D].document}return null};
x.setSrc=function(w,D,r){w=c.global.frames[w.name];w.contentWindow&&(w=w.contentWindow);try{r?w.location.replace(D):w.location=D}catch(v){}};x._iframeName=A+"_IoIframe";x._notifyStart=function(){};x._dfdQueue=[];x._currentDfd=null;x._fireNextRequest=function(){try{if(!x._currentDfd&&x._dfdQueue.length){do var w=x._currentDfd=x._dfdQueue.shift();while(w&&(w.canceled||w.isCanceled&&w.isCanceled())&&x._dfdQueue.length);if(!w||w.canceled||w.isCanceled&&w.isCanceled())x._currentDfd=null;else{var D=w.response,
r=D.options,v=w._contentToClean=[],B=l.byId(r.form),C=a.notify,F=r.data||null;if(!w._legacy&&"POST"===r.method&&!B)B=w._tmpForm=d.create("form",{name:A+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},c.body());else if("GET"===r.method&&B&&-1<D.url.indexOf("?")){var G=D.url.slice(D.url.indexOf("?")+1);F=e.mixin(g.queryToObject(G),F)}if(B){if(!w._legacy){var H=B;do H=H.parentNode;while(H&&H!==c.doc.documentElement);H||(B.style.position="absolute",B.style.left="-1000px",B.style.top=
"-1000px",c.body().appendChild(B));B.name||(B.name=A+"_form")}if(F){H=function(S,L){d.create("input",{type:"hidden",name:S,value:L},B);v.push(S)};for(var J in F){var I=F[J];if(e.isArray(I)&&1<I.length)for(G=0;G<I.length;G++)H(J,I[G]);else{var K=f("input[name\x3d'"+J+"']",B);-1==K.indexOf()?H(J,I):K.val(I)}}}var R=B.getAttributeNode("action"),W=B.getAttributeNode("method"),P=B.getAttributeNode("target");D.url&&(w._originalAction=R?R.value:null,R?R.value=D.url:B.setAttribute("action",D.url));w._legacy?
W&&W.value||(W?W.value=r.method:B.setAttribute("method",r.method)):(w._originalMethod=W?W.value:null,W?W.value=r.method:B.setAttribute("method",r.method));w._originalTarget=P?P.value:null;P?P.value=x._iframeName:B.setAttribute("target",x._iframeName);B.target=x._iframeName;C&&C.emit("send",D,w.promise.cancel);x._notifyStart(D);B.submit()}else r="",D.options.data&&(r=D.options.data,"string"!==typeof r&&(r=g.objectToQuery(r))),H=D.url+(-1<D.url.indexOf("?")?"\x26":"?")+r,C&&C.emit("send",D,w.promise.cancel),
x._notifyStart(D),x.setSrc(x._frame,H,!0)}}}catch(S){w.reject(S)}};a.addCommonMethods(x,["GET","POST"]);return x})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(b,y,q,a,h){function e(m){for(;m.childNodes[0]&&1==m.childNodes[0].nodeType;)m=m.childNodes[0];return m}function g(m,l){"string"==typeof m?(m=a.toDom(m,l&&l.ownerDocument),11==m.nodeType&&(m=m.childNodes[0])):1==m.nodeType&&m.parentNode&&(m=m.cloneNode(!1));
return m}var f=b.NodeList;y.extend(f,{_placeMultiple:function(m,l){m="string"==typeof m||m.nodeType?b(m):m;for(var d=[],c=0;c<m.length;c++)for(var k=m[c],t=this.length,n=t-1,u;u=this[n];n--)0<c&&(u=this._cloneNode(u),d.unshift(u)),n==t-1?a.place(u,k,l):k.parentNode.insertBefore(u,k),k=u;d.length&&(d.unshift(0),d.unshift(this.length-1),Array.prototype.splice.apply(this,d));return this},innerHTML:function(m){return arguments.length?this.addContent(m,"only"):this[0].innerHTML},text:function(m){if(arguments.length){for(var l=
0,d;d=this[l];l++)1==d.nodeType&&h.set(d,"textContent",m);return this}var c="";for(l=0;d=this[l];l++)c+=h.get(d,"textContent");return c},val:function(m){if(arguments.length){for(var l=y.isArray(m),d=0,c;c=this[d];d++){var k=c.nodeName.toUpperCase(),t=c.type,n=l?m[d]:m;if("SELECT"==k)for(k=c.options,t=0;t<k.length;t++){var u=k[t];u.selected=c.multiple?-1!=q.indexOf(m,u.value):u.value==n}else"checkbox"==t||"radio"==t?c.checked=c.value==n:c.value=n}return this}if((c=this[0])&&1==c.nodeType){m=c.value||
"";if("SELECT"==c.nodeName.toUpperCase()&&c.multiple){m=[];k=c.options;for(t=0;t<k.length;t++)u=k[t],u.selected&&m.push(u.value);m.length||(m=null)}return m}},append:function(m){return this.addContent(m,"last")},appendTo:function(m){return this._placeMultiple(m,"last")},prepend:function(m){return this.addContent(m,"first")},prependTo:function(m){return this._placeMultiple(m,"first")},after:function(m){return this.addContent(m,"after")},insertAfter:function(m){return this._placeMultiple(m,"after")},
before:function(m){return this.addContent(m,"before")},insertBefore:function(m){return this._placeMultiple(m,"before")},remove:f.prototype.orphan,wrap:function(m){if(this[0]){m=g(m,this[0]);for(var l=0,d;d=this[l];l++){var c=this._cloneNode(m);d.parentNode&&d.parentNode.replaceChild(c,d);e(c).appendChild(d)}}return this},wrapAll:function(m){if(this[0]){m=g(m,this[0]);this[0].parentNode.replaceChild(m,this[0]);m=e(m);for(var l=0,d;d=this[l];l++)m.appendChild(d)}return this},wrapInner:function(m){if(this[0]){m=
g(m,this[0]);for(var l=0;l<this.length;l++){var d=this._cloneNode(m);this._wrap(y._toArray(this[l].childNodes),null,this._NodeListCtor).wrapAll(d)}}return this},replaceWith:function(m){m=this._normalize(m,this[0]);for(var l=0,d;d=this[l];l++)this._place(m,d,"before",0<l),d.parentNode.removeChild(d);return this},replaceAll:function(m){m=b(m);for(var l=this._normalize(this,this[0]),d=0,c;c=m[d];d++)this._place(l,c,"before",0<d),c.parentNode.removeChild(c);return this},clone:function(){for(var m=[],
l=0;l<this.length;l++)m.push(this._cloneNode(this[l]));return this._wrap(m,this,this._NodeListCtor)}});f.prototype.html||(f.prototype.html=f.prototype.innerHTML);return f})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(b,y,q,a,h,e){b=b([a],{declaredClass:"esri.Evented",registerConnectEvents:function(){var g=this.constructor,f=this.constructor._meta.parents,m=[{}],l={},d,c=function(t,n){y.isArray(t)||(t=[t]);for(var u=
0;u<t.length;u++){var x=t[u];x._meta&&x._meta.parents&&c(x._meta.parents,n);x.prototype._eventMap&&n.push(y.mixin({},x.prototype._eventMap))}return n};if(!g._onMap){c(f,m);m.push(this._eventMap);f=y.mixin.apply(this,m);for(k in this)/^on\w/.test(k)&&y.isFunction(this[k])&&(m=this._hyphenLower(k).toLowerCase(),f[m]||(l[m]={method:k}));for(d in f){var k=this._onCamelCase(d);l[d]={method:k,argKeys:f[d]}}g._onMap=l;return g._onMap}},on:function(g,f){if(-1<g.indexOf(",")){for(var m=g.split(/\s*,\s*/),
l=m.length,d=[];l--;)d.push(this.on(m[l],f));d.remove=function(){for(var t=0;t<d.length;t++)d[t].remove()};return d}m=this.constructor._onMap||this.registerConnectEvents();l="string"==typeof g&&g.toLowerCase();var c=this._onCamelCase(l),k=m&&m[l];return(c=k&&k.method||this[c]&&y.isFunction(this[c])&&c)?k&&y.isArray(k.argKeys)?(m=this._onArr2Obj(f,m[l].argKeys),q.after(this,c,m,!0)):q.after(this,c,function(t){t=t||{};t.target||(t.target=this);f.call(this,t)},!0):this.inherited(arguments)},emit:function(g,
f){var m,l,d=g.toLowerCase();var c=this._onCamelCase(g);var k=this.constructor._onMap||this.registerConnectEvents();c=(l=k&&k[d]&&k[d].method||y.isFunction(this[c])&&c)&&this[l];l&&k&&k[d]&&this._onObj2Arr(function(){m=Array.prototype.slice.call(arguments)},k[d].argKeys)(f);f=f||{};f.target||(f.target=this);if(c){var t=m&&m.length?m:[f];t=c.apply(this,t)}this.inherited(arguments,[g,f]);return t},_onObj2Arr:function(g,f){if(f){var m=this;return function(l){var d,c=[],k=f.length;for(d=0;d<k;d++)c[d]=
l[f[d]];g.apply(m,c)}}return g},_onArr2Obj:function(g,f){if(f){var m=this;return function(){var l,d={},c=arguments.length;for(l=0;l<c;l++)d[f[l]]=arguments[l];d.target||(d.target=m);g.call(m,d)}}return g},_hyphenLower:function(g){return g.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(f,m){return(m?"-":"")+f.toLowerCase()})},_onCamelCase:function(g){return"on"+g.substr(0,1).toUpperCase()+g.substr(1).replace(/\-([a-z])/g,function(f,m){return m.toUpperCase()})}});return e.Evented=b})},"esri/OAuthCredential":function(){define(["./kernel",
"dojo/_base/declare","dojo/has","dojo/json"],function(b,y,q,a){y=y(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,expires:null,ssl:null,token:null,userId:null,constructor:function(h,e){this.oAuthInfo=h;this.storage=e;this._init()},isValid:function(){var h=!1;if(this.oAuthInfo&&this.token&&this.userId){var e=(new Date).getTime();this.expires>e&&(this.expires-e)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(h=!0)}return h},save:function(){if(this.storage){var h=this._load(),
e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){var g=h[e.authNamespace];g||(g=h[e.authNamespace]={});g[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",a.stringify(h))}catch(f){}}}},destroy:function(){var h=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){var g=e.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",f=new FormData;
f.append("f","json");f.append("auth_token",this.token);f.append("client_id",e.appId);f.append("token_type_hint","access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(g,f);else{var m=new XMLHttpRequest;m.open("POST",g);m.send(f)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage&&(g=h[e.authNamespace])){delete g[e.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",a.stringify(h))}catch(l){}}e&&(this.oAuthInfo=e._oAuthCred=null)},_init:function(){var h=this._load(),e=this.oAuthInfo;
e&&e.authNamespace&&e.portalUrl&&(h=h[e.authNamespace])&&(h=h[e.portalUrl])&&(this.appId=h.appId,this.expires=h.expires,this.ssl=h.ssl,this.token=h.token,this.userId=h.userId)},_load:function(){var h={};if(this.storage){var e=this.storage.getItem("esriJSAPIOAuth");if(e)try{h=a.parse(e)}catch(g){}}return h}});return b.OAuthCredential=y})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(b,y,q,a,h){var e=q(null,{declaredClass:"esri.arcgis.OAuthInfo",
constructor:function(g){a.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1},g)},_oAuthCred:null,toJson:function(){return y.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,
forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash})},clone:function(){return new e(this.toJson())}});a.setObject("arcgis.OAuthInfo",e,b);return e})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(b,y,q,a,h,e,g,f){return b("dijit.form.Form",
[h,e,g,f],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(m){y.set(this.domNode,"encType",m);a("ie")&&(this.domNode.encoding=
m);this._set("encType",m)},reset:function(m){var l={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:m?m.target:this.domNode,target:m?m.target:this.domNode};!1!==this.onReset(l)&&l.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(m){this.reset(m);m.stopPropagation();m.preventDefault();return!1},_onSubmit:function(m){var l=this.constructor.prototype;if(this.execute!=l.execute||this.onExecute!=l.onExecute)q.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.",
"","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(m)&&(m.stopPropagation(),m.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(n){this._oAuthRedirectFunc=n},oAuthSignIn:function(n,u,x,A){var z=this._oAuthDfd=new f;z.resUrl_=n;z.sinfo_=u;z.oinfo_=x;var E=!A||!1!==A.oAuthPopupConfirmation;if(!x.popup||!E)return this._doOAuthSignIn(n,u,x),z;this._nls||(this._nls=d.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());n=this.oAuthDialog;x=A&&A.error;A=A&&A.token;y.hide(n.errMsg_);x&&403==x.code&&A&&(l.set(n.errMsg_,"innerHTML",this._nls.forbidden),y.show(n.errMsg_));l.set(n.serverLink_,
{title:u.server,innerHTML:-1!==u.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":u.server});n.show();return z},setOAuthResponseHash:function(n){var u=this._oAuthDfd;this._oAuthDfd=null;if(u&&n)if(clearInterval(this._oAuthIntervalId),"#"===n.charAt(0)&&(n=n.substring(1)),n=c.queryToObject(n),n.error)n=Error("access_denied"===n.error?"ABORTED":"OAuth: "+n.error+" - "+n.error_description),n.code="IdentityManagerBase.2",n.log=!!g.isDebug,u.errback(n);else{var x=u.oinfo_._oAuthCred,A=new b({userId:n.username,
server:u.sinfo_.server,token:n.access_token,expires:(new Date).getTime()+1E3*Number(n.expires_in),ssl:"true"===n.ssl,_oAuthCred:x});x.storage=n.persist?window.localStorage:window.sessionStorage;x.token=A.token;x.expires=A.expires;x.userId=A.userId;x.ssl=A.ssl;x.save();u.callback(A)}},_createOAuthDialog:function(){var n=this._nls,u=q.substitute(n,this._oAuthDialogContent);u=q.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},u);var x=new h({title:n.title,
content:u,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var A=x.esriIdMgr_._oAuthDfd;x.hide_();x.esriIdMgr_._doOAuthSignIn(A.resUrl_,A.sinfo_,A.oinfo_)},cancel_:function(){var A=x.esriIdMgr_._oAuthDfd;x.esriIdMgr_._oAuthDfd=null;x.hide_();var z=Error("ABORTED");z.code="IdentityManager.2";z.log=!!g.isDebug;A.errback(z)},hide_:function(){y.hide(x.errMsg_);x.hide();h._DialogLevelManager.hide(x)}});n=x.domNode;x.btnSubmit_=e.byNode(m.query(".esriIdSubmit",
n)[0]);x.btnCancel_=e.byNode(m.query(".esriIdCancel",n)[0]);x.serverLink_=m.query(".serverLink",n)[0];x.errMsg_=m.query(".esriErrorMsg",n)[0];x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x},_doOAuthSignIn:function(n,u,x){var A=this,z={portalUrl:x.portalUrl};!x.popup&&x.preserveUrlHash&&window.location.hash&&(z.hash=window.location.hash);z={client_id:x.appId,response_type:"token",state:t.stringify(z),expiration:x.expiration,
locale:x.locale,redirect_uri:x.popup?a.getAbsoluteUrl(x.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};x.forceLogin&&(z.force_login=!0);var E=x.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",w=E+"?"+c.objectToQuery(z);if(x.popup){if(7===k("ie")){var D=window.open(x.popupCallbackUrl,"esriJSAPIOAuth",x.popupWindowFeatures);D.location=w}else D=window.open(w,"esriJSAPIOAuth",x.popupWindowFeatures);D?(D.focus(),this._oAuthDfd.oAuthWin_=D,this._oAuthIntervalId=setInterval(function(){if(D.closed){clearInterval(A._oAuthIntervalId);
var r=A._oAuthDfd;if(r){var v=Error("ABORTED");v.code="IdentityManager.2";v.log=!!g.isDebug;r.errback(v)}}},500)):(n=Error("ABORTED"),n.code="IdentityManager.2",n.log=!!g.isDebug,this._oAuthDfd.errback(n))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:z,authorizeUrl:E,resourceUrl:n,serverInfo:u,oAuthInfo:x}):window.location=w}}})},"arcgisonline/sharing/geow/Geow":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util,arcgisonline/map/utils/deleteMapStorageNoFeedback,arcgisonline/telemetry,arcgisonline/sharing/geow/Community"],
function(b,y,q){b.provide("arcgisonline.sharing.geow.Geow");b.require("arcgisonline.sharing.util");b.require("arcgisonline.map.utils.deleteMapStorageNoFeedback");b.require("arcgisonline.telemetry");b.require("arcgisonline.sharing.geow.Community");arcgisonline.sharing.geow.Geow={util:arcgisonline.sharing.util,generatetoken:function(a,h,e){var g=esriGeowConfig.restBaseUrl.replace("http:","https:")+"generatetoken",f=document.domain,m=f.split(".");1<m.length&&(f=m[m.length-2]+"."+m[m.length-1]);a.referer=
f;this._tokenExpiration=a.expiration;this.util.postJson(a,g,h,e)},signup:function(a,h,e){var g=esriGeowConfig.restBaseUrl+"community/signup",f=document.domain,m=f.split(".");1<m.length&&(f=m[m.length-2]+"."+m[m.length-1]);a.referer=f;this.util.postJson(a,g,h,e)},signin:function(a,h,e){this.generatetoken(a,b.hitch(arcgisonline.sharing.geow.Geow,"signInHandler",a.username,h,e),e)},setAuthCookie:function(a,h){var e=document.domain,g={path:"/"},f=esriGeowConfig.self||{};a.persistent&&(g.expires=new Date(a.expires));
"https:"===window.location.protocol&&(a.allSSL||f.allSSL)&&(g.secure=!0);a.portalApp&&delete a.portalApp;esriGeowConfig.isDebug||f.isPortal||!f.urlKey?esriGeowConfig.isDebug||f.isPortal?h&&(f.isPortal||b.cookie("esri_auth",b.json.stringify(a),b.mixin(g,{domain:"arcgis.com"}))):(a.customBaseUrl=f.portalHostname||window.location.hostname,b.cookie("esri_auth",b.json.stringify(a),b.mixin(g,{domain:"arcgis.com"}))):(a.urlKey=f.urlKey,a.customBaseUrl=f.customBaseUrl||f.portalHostname||window.location.hostname,
b.cookie("esri_auth",b.json.stringify(a),b.mixin(g,{domain:"arcgis.com"})));b.cookie("esri_auth",b.json.stringify(b.mixin({portalApp:!0},a)),b.mixin(g,{domain:e}));(a=arcgisonline.sharing.util._cookies)&&a.esri_auth&&(a.esri_auth=null,arcgisonline.sharing.util.getCookie("esri_auth"))},signInHandler:function(a,h,e,g,f){var m=new Date,l=new Date(m.setMinutes(m.getMinutes()+(this._tokenExpiration||120)));m=b.hitch(this,function(d,c){d.culture&&(d.culture=d.culture.toLowerCase());c={email:d.username,
privacy:d.privacy,token:g.token,ssl:g.ssl,culture:d.culture,region:d.region,expires:l.getTime()};d.orgId&&d.role&&(c.accountId=d.orgId,c.role=d.role);this.setAuthCookie(c);if(d.preferredView&&null!==d.preferredView)this.util.userPreferences({contentMode:d.preferredView},esriGeowConfig.contentModeCookieName);else{var k=this.util.userPreferences(null,esriGeowConfig.contentModeCookieName);if(k&&k.contentMode){var t=b.create,n=t("form",{method:"POST"},b.body());t("input",{type:"hidden",name:"preferredView",
value:k.contentMode},n);t("input",{type:"hidden",name:"clearEmptyFields",value:"false"},n);arcgisonline.sharing.geow.Community.updateProfile(n,function(u){})}}c=b.mixin(c,d);h&&h(c,f);b.publish("onSignIn",[c])});this.util.getJson(this.util.useSSL(esriGeowConfig.restBaseUrl+"community/users/"+a+"?token\x3d"+g.token),b.hitch(this,m),e)},signInHandler2:function(a){var h=esriGeowConfig.restBaseUrl+"community/users/"+a.username+"?token\x3d"+a.token,e=new Date,g=Number(a.expires_in),f=new Date(e.setSeconds(e.getSeconds()+
Number(g))),m=a&&!!a.ssl;return this.util.getJson(this.util.useSSL(h)).then(b.hitch(this,"_hasSecurityQuestion")).then(b.hitch(this,function(l){var d={email:l.username,privacy:l.privacy,token:a.token,culture:l.culture&&l.culture.toLowerCase()||"",region:l.region,expires:f&&f.getTime()||null,persistent:a.persist?!0:void 0,allSSL:m};l.orgId&&l.role&&(d.accountId=l.orgId,d.role=l.role);l.preferredView&&this.util.userPreferences({contentMode:l.preferredView},esriGeowConfig.contentModeCookieName);this.setAuthCookie(d);
d=b.mixin(d,l);b.publish("onSignIn",[d]);return d}))},_hasSecurityQuestion:function(a){var h=new b.Deferred;a.validateUserProfile=!0;!a||a.idpUsername||"arcgisonly"!==a.userType&&"both"!==a.userType||!a.validateUserProfile?h.resolve(a):h=this.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+a.username+"/forgotPassword",content:{}},{}).then(b.hitch(this,function(e){e&&"enterprise"!==e.provider&&-1===e.securityQuestionIdx&&(a.noSecurityQuestion=!0);return a}));return h},signout:function(a){var h=
this.util.getCookie("esri_auth"),e=esriGeowConfig.self||{};esriGeowConfig.userInfo=null;esriGeowConfig.userPreferences=null;e.isPortal||b.cookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain});arcgisonline.map.utils.deleteMapStorageNoFeedback().then(function(){b.publish("onSignOut",[])});var g;a&&(g=b.mixin({},{client_id:"arcgisonline",redirect_uri:a}));h&&h.token&&esriGeowConfig.self&&esriGeowConfig.self.user&&"enterprise"===esriGeowConfig.self.user.provider&&(g=b.mixin(g||{},{token:h.token}));
a=a||window.location.href;window.location=arcgisonline.sharing.util.getSecureUrl(esriGeowConfig.restBaseUrl+"oauth2/signout")+(g?"?"+b.objectToQuery(g):"")},checkSharedCookie:function(){var a=this.util.getCookie("esri_auth"),h=!1;a&&!a.portalApp&&!a.urlKey&&location.hostname.match(/\.+maps.*\..+\..+/i)&&(h=!0);(esriGeowConfig.self||{}).isPortal||h||!a||a.portalApp||!a.customBaseUrl||-1!==document.domain.toLowerCase().indexOf(a.customBaseUrl.toLowerCase())||-1!==a.customBaseUrl.toLowerCase().indexOf(document.domain.toLowerCase())||
(h=!0);!h&&a&&!a.portalApp&&a.urlKey&&-1===window.location.hostname.toLowerCase().indexOf(a.urlKey.toLowerCase()+".")&&(h=!0);h&&(b.cookie("esri_auth",null,{expires:-1,path:"/",domain:".arcgis.com"}),arcgisonline.sharing.util&&arcgisonline.sharing.util._cookies&&arcgisonline.sharing.util._cookies.esri_auth&&delete arcgisonline.sharing.util._cookies.esri_auth,esriGeowConfig.userInfo=null,esriGeowConfig.userRole=null);return h},getSharedCookie:function(){var a=esri.id,h={};a&&(h=(a=(a._getAllCookies("esri_auth")||
[]).map(function(e){return JSON.parse(e)}).filter(function(e){return!e.portalApp}))&&a.length?a.shift():{});return h},_logCookieChange:function(a,h){a=arcgisonline.telemetry.default.init({config:a});!this._cookieChangeLogged&&a&&a.logEvent&&(this._cookieChangeLogged=!0,a.logEvent({category:"cookie",label:"Organization changed",details:h?"Yes":"No"}))},setCookies:function(a){var h=this.util.getCookie("esri_auth");if(!a.isPortal&&h){if(!esriGeowConfig.isDebug){var e=this.getSharedCookie();this._logCookieChange(a,
h.urlKey!==e.urlKey)}!esriGeowConfig.isDebug&&a.urlKey&&-1===window.location.hostname.toLowerCase().indexOf(a.urlKey.toLowerCase())?(a=window.location.href.replace(window.location.hostname,a.urlKey+"."+a.customBaseUrl),window.location=this.util.getBridgeUrl(a,h)):h.portalApp?h.portalApp&&(esriGeowConfig.isDebug||this.setAuthCookie(h)):(delete h.urlKey,delete h.customBaseUrl,this.setAuthCookie(h))}}}})},"arcgisonline/sharing/util":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/dialog/GeneralDlg,arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg,dojo/request/xhr,arcgisonline/sharing/dijit/dialog/ConfirmDialog,esri/IdentityManager,esri/libs/sanitizer/Sanitizer,dojo/sniff,dojo/has,dojo/json,dojo/cookie"],
function(b,y,q){b.provide("arcgisonline.sharing.util");b.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");b.require("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");b.require("dojo.request.xhr");b.require("arcgisonline.sharing.dijit.dialog.ConfirmDialog");b.require("esri.IdentityManager");b.require("esri.libs.sanitizer.Sanitizer");b.require("dojo.sniff");b.require("dojo.has");b.require("dojo.json");b.require("dojo.cookie");arcgisonline.sharing.util={i18n:b.mixin({},b.i18n.getLocalization("arcgisonline",
"arcgisonline")),sanitizer:new esri.libs.sanitizer.Sanitizer,getSocialNetworkBadges:function(a,h){var e={},g=b.create,f=arcgisonline.sharing.util.socialNetworkTitle(a.title),m=unescape(window.location.href);if(!1===a.isOrganization||!0===a.isOrganization)m=arcgisonline.sharing.util.urlToObject(window.location.href).path+"?id\x3d"+a.id;esriGeowConfig.self&&esriGeowConfig.self.customBaseUrl&&!arcgisonline.sharing.util.isPortal()&&-1<m.indexOf(esriGeowConfig.self.customBaseUrl)&&(m=m.replace(location.host,
esriGeowConfig.self.portalHostname));var l=g("span",{"class":"esriItemLinks"}),d=encodeURI("socialnetwork.html?t\x3d"+f+"\x26n\x3dfb\x26u\x3d"+m),c=esri.i18nBundle.itemLinks.shareFacebook,k=g("a",{target:"_blank",onclick:b.partial(this._checkShare,a,"Facebook"),href:d,alt:c,title:c},l);g("span",{"class":"facebookBadge dijitInline"},k);d=g("a",{target:"_blank",onclick:b.partial(this._checkShare,a,"Facebook"),href:d,alt:c,title:c},l);g("span",{innerHTML:esri.i18nBundle.itemLinks.facebook},d);e.facebook=
l;l=g("span",{"class":"esriItemLinks"});d=encodeURI("socialnetwork.html?t\x3d"+f+"\x26n\x3dtw\x26u\x3d"+m);c=esri.i18nBundle.itemLinks.shareTwitter;k=g("a",{target:"_blank",onclick:b.partial(this._checkShare,a,"Twitter"),href:d,alt:c,title:c},l);g("span",{"class":"twitterBadge dijitInline"},k);d=g("a",{target:"_blank",onclick:b.partial(this._checkShare,a,"Twitter"),href:d,alt:c,title:c},l);g("span",{innerHTML:esri.i18nBundle.itemLinks.twitter},d);e.twitter=l;h(e)},socialNetworkTitle:function(a){100<
a.length&&(a=a.substring(0,97)+"...");return encodeURIComponent(a.replace(/ /g,"+"))},shortenUrl:function(a,h,e){var g=esriGeowConfig.bitlyUrl,f,m=new b.Deferred;this.request({url:g,content:{longUrl:a,format:"json"}}).then(function(l){(f=l&&l.data&&l.data.url||null)?h?h(f):m.resolve(f):e?e(l,args):m.reject(l,args)},function(l){e?e({},{}):m.reject(l)});return m},_checkShare:function(a,h,e){h=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();e=a&&esri.isDefined(a.isInvitationOnly);
a.access&&"public"!==a.access&&h.show({title:esri.i18nBundle.itemLinks[e?"shareGroup":"shareItem"],message:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks[e?"shareGroupMsg":"shareItemMsg"])})},checkSession:function(){var a=this.getCookie("esri_auth"),h=null;a&&(h=a);!h||h.error&&""!=h.error||(esriGeowConfig.userInfo=b.mixin(esriGeowConfig.userInfo||{},h))},isLoggedIn:function(){return null==this.getUser()?!1:!0},isSilverlightInstalled:function(){if(esriGeowConfig.isSilverlightInstalled)return esriGeowConfig.isSilverlightInstalled;
esriGeowConfig.isSilverlightInstalled=!1;if(b.isIE)try{new ActiveXObject("AgControl.AgControl"),esriGeowConfig.isSilverlightInstalled=!0}catch(a){}else navigator.plugins["Silverlight Plug-In"]&&(esriGeowConfig.isSilverlightInstalled=!0);return esriGeowConfig.isSilverlightInstalled},couldHaveArcGISDesktop:function(){return-1!=navigator.userAgent.indexOf("Windows")&&-1==navigator.userAgent.indexOf("Windows Phone")?!0:!1},requireAuthentication:function(){if(!0===this.isLoggedIn())return!0;var a="";-1==
esriGeowConfig.signin.indexOf("http")&&(a=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(a=arcgisonline.sharing.util.getSecureUrl(a)));a+=esriGeowConfig.signin;window.location!==a&&(a+="?returnUrl\x3d"+escape(window.location));window.location=a+"\x26error\x3d403";return!1},htmlHasText:function(a){if(a&&0<a.length){a=b.trim(a);for(var h=!1,e=0;e<a.length;e++){var g=a.charAt(e);if("\x3c"==g)h=!0;else if("\x3e"==g)h=!1;else if(!h&&""!==g)return!0}}return!1},endsWith:function(a,h){return null==a||
null==h?!1:a.toLowerCase().lastIndexOf(h.toLowerCase())==a.length-h.length},toFullDateString:function(a){a=new Date(parseFloat(a));return b.date.locale.format(a,{selector:"date",formatLength:"long"})},toDateTimeString:function(a){a=new Date(parseFloat(a));return b.date.locale.format(a,{formatLength:"medium"})},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()},getItemDetailsLinkInfo:function(a){var h=null,e=null,g=null;esri.isDefined(a.isInvitationOnly)?(h=esriGeowConfig.baseUrl+
"group.html?owner\x3d"+a.owner+"\x26title\x3d"+encodeURIComponent(a.title),e=esri.i18nBundle.itemLinks.details,g=esri.i18nBundle.itemLinks.viewGroupDetails):(h=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,g=esri.i18nBundle.itemLinks.viewDetails);return null!==h&&null!==e?{link:h,label:e,tip:g}:null},_isOperationsViewSupportedBrowser:function(a){var h=navigator.userAgent.toLowerCase(),e=/Chrome\/[.0-9]* (?!Mobile)/i,g=/Chrome\/[.0-9]* Mobile/i;g=b.has("iphone")||
b.has("ipod")||b.has("android")&&g.test(h)||-1<h.indexOf("android")&&-1<h.indexOf("mobile")||-1<h.indexOf("windows phone")||b.has("bb");a&&(g=g||h.match(/ipad/i)||b.has("android")&&e.test(h));return g?!1:void 0!==b.has("chrome")?(a=b.has("chrome"),!isNaN(a)&&19<=a):void 0!==b.has("ff")?4<=b.has("ff"):h.match(/fxios/i)?(a=parseFloat(h.split("fxios/")[1]),!isNaN(a)&&1<=a):void 0!==b.has("ie")?9<=b.has("ie"):void 0!==b.has("edge")?1<=b.has("edge"):void 0!==b.has("trident")?5<=b.has("trident"):void 0!==
b.has("safari")?(a=parseFloat(h.split("version/")[1]),h=parseFloat(h.split("crios/")[1]),isNaN(a)&&isNaN(h)||!isNaN(a)&&5.1>a||!isNaN(h)&&31>h?!1:!0):!1},_isPremiumService:function(a){return a.owner&&-1<a.owner.toLowerCase().indexOf("esri")&&(-1<b.indexOf(a.typeKeywords,"Requires Subscription")||-1<b.indexOf(a.typeKeywords,"Requires Credits"))},getGalleryMainLinkInfo:function(a){var h=a.type?a.type:"",e="",g="",f="",m=null;g=this.getUser();e=!1;e=null;esriGeowConfig.portalHostname&&(e=esriGeowConfig.portalHostname);
e&&(f=e.split("."),1<f.length&&(e=f[f.length-2]+"."+f[f.length-1]));if("Web Map"==h)e=!g&&this._isPremiumService(a),g='JavaScript:arcgisonline.map.mapUtil.openMap("'+a.id+'",'+e+")",f=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),e=esri.i18nBundle.itemLinks.open;else if("CityEngine Web Scene"===h)e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+a.id,g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,
"openPage",e),f=esri.i18nBundle.itemLinks.viewApp,e=esri.i18nBundle.itemLinks.open;else if("Web Scene"===h&&esriGeowConfig.sceneViewerEnabled)e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+a.id,g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPage",e,!0),f=esri.i18nBundle.itemLinks.openSceneViewer,e=esri.i18nBundle.itemLinks.open;else if("Scene Service"===h&&esriGeowConfig.sceneViewerEnabled)e=
window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,e,!0),f=esri.i18nBundle.itemLinks.addToSceneViewer,e=esri.i18nBundle.itemLinks.open;else if("Operation View"===h){e=window.location;h=arcgisonline.sharing.util.isPortal();g=e.protocol+"//"+(h?esriGeowConfig.self.portalHostname:e.host);e=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+a.id;f=-1<b.indexOf(a.typeKeywords,"TabletLayout");b.indexOf(a.typeKeywords,"DesktopLayout");var l=-1<b.indexOf(a.typeKeywords,"V2");this.couldHaveArcGISDesktop()&&!l?m=b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,g+(h?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+a.id):!l&&f&&this._isOperationsViewSupportedBrowser()&&(m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",
a.id,e,!1));g="JavaScript:void(0)";f=esri.i18nBundle.itemLinks.openOperationViewDesktop;e=esri.i18nBundle.itemLinks.open}else"Map Service"==h||"Feature Service"==h||"Image Service"==h||"KML"==h||"Feature Collection"==h||"Stream Service"==h||"Vector Tile Service"===h?(f=a&&a.extraUrlParams?!0:!1,e=!g&&this._isPremiumService(a),g='JavaScript:arcgisonline.map.mapUtil.addToMap("'+a.id+'",'+e+","+f+")",e=esri.i18nBundle.itemLinks.open,f=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},
esri.i18nBundle.itemLinks.addToViewer),esriGeowConfig.sceneViewerEnabled&&"Image Service"===h&&-1<b.indexOf(a.typeKeywords,"Elevation 3D Layer")&&(g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,f=esri.i18nBundle.itemLinks.addToSceneViewer,e=esri.i18nBundle.itemLinks.open)):"WMS"==h||"WFS"===h||"WMTS"===h?(g=a.noWebMercator?'JavaScript:arcgisonline.map.mapUtil.openOnGCSMap("'+a.id+'")':'JavaScript:arcgisonline.map.mapUtil.addToMap("'+
a.id+'")',e=esri.i18nBundle.itemLinks.open,f=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==h?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url+"?f\x3dlyr\x26v\x3d9.3"),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):this.couldHaveArcGISDesktop()&&("Map Package"==h||"Basemap Package"===h||"Mobile Map Package"==h||"Mobile Basemap Package"===
h||"Layer Package"==h||"Pro Map"==h||"Layout"==h||-1<b.indexOf(a.typeKeywords,"lyrx"))?a&&a.name.indexOf(".mmpk")&&a.name.indexOf(".bpk")&&-1===a.name.indexOf(".bpkx")&&-1===a.name.indexOf(".lpkx")&&-1===a.name.indexOf(".mpkx")&&-1===a.name.indexOf(".lyrx")&&-1===a.name.indexOf(".mapx")&&-1===a.name.indexOf(".pagx")?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,
"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=h&&"Geoprocessing Service"!=h&&"Locator Package"!=h&&"Tile Package"!=h&&"Vector Tile Package"!=h&&"Scene Package"!==h?!this.couldHaveArcGISDesktop()||"Map Document"!=h&&"Published Map"!=h&&"Globe Document"!=h&&"Scene Document"!=h&&"Layer"!=h?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=h&&"ArcGIS Pro Add In"!==h?!this.isSilverlightInstalled()||
"Explorer Map"!=h&&"Explorer Layer"!=h&&"Explorer Add In"!=h?"File Geodatabase"===h||"CSV Collection"===h||"KML Collection"===h||"Rule Package"===h||"GeoJson"===h||"Shapefile"===h||"CSV"===h||"Map Template"===h||"Code Sample"===h||"Geoprocessing Sample"===h||"Service Definition"===h||"Workflow Manager Package"===h||"Windows Viewer Add-in"===h||"ArcPad Package"===h||"Operations Dashboard Addin"===h||"CAD Drawing"===h||"Microsoft Word"===h||"Raster function template"===h||"Microsoft PowerPoint"===h||
"Microsoft Powerpoint"===h||"Microsoft Excel"===h||"iWork Pages"===h||"iWork Keynote"===h||"iWork Numbers"===h||"Image"===h||"Visio Document"===h||"PDF"===h||"Desktop Application"===h||"Task File"===h||"Project Package"===h||"ArcGIS Pro Configuration"===h||"Project Template"===h||"Desktop Style"===h||"Native Application Installer"===h||"360 VR Experience"==h?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):
"Web Mapping Application"!=h&&"Application"!=h&&"Native Application"!==h&&"Native Application Template"!==h&&"Hub Initiative"!==h&&"Hub Page"!==h&&"Hub Site Application"!==h||-1!==b.indexOf(a.typeKeywords,"Web AppBuilder for ArcGIS")?"Desktop Application Template"==h?-1<b.indexOf(a.typeKeywords,"desktopApplicationTemplateUrl")&&a.url&&0<a.url.length?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),f=esri.i18nBundle.itemLinks.viewApp,e=esri.i18nBundle.itemLinks.open):
(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):"Mobile Application"==h?a.url&&0<a.url.length?(esriGeowConfig.urlKey&&(-1<a.url.indexOf(esriGeowConfig.urlKey)||e&&-1<a.url.indexOf(e))&&(a.originalUrl=a.originalUrl||b.clone(a.url),a.url=esriGeowConfig.allSSL?a.url.replace("http:","https:"):a.url),g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),e=
esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.getApp):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==h?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.download):"Document Link"===h?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),e=f=esri.i18nBundle.itemLinks.open):
"Form"===h&&g&&g.accountId?(g="arcgis-survey123://?itemId\x3d"+a.id+"\x26username\x3d"+g.username,f=esri.i18nBundle.itemLinks.openInSurvey123,e=esri.i18nBundle.itemLinks.open):"Workforce Project"===h?(g=(h=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",g=window.location.protocol+"//"+g+((h?"/apps/workforce/#":"")+("/projects/"+a.id+"/dispatch/assignments")),f=esri.i18nBundle.itemLinks.openWorkforce,e=esri.i18nBundle.itemLinks.open):
"Insights Workbook"===h||"Insights Page"===h||"Insights Model"===h?(g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",g="Insights Model"===h?g+("?model\x3d"+a.id):"Insights Page"===h?g+("view/"+a.id):g+a.id,f=esri.i18nBundle.itemLinks.openInsights,e=esri.i18nBundle.itemLinks.open):"Dashboard"===h?(m=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/opsdashboard/index.html#/"+
a.id,g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,m),f=esri.i18nBundle.itemLinks.dashboardView,e=esri.i18nBundle.itemLinks.open):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):(h=arcgisonline.sharing.util.isHostedTemplateItem(a.url),a.url&&0<a.url.length?(esriGeowConfig.urlKey&&(-1<a.url.indexOf(esriGeowConfig.urlKey)||e&&-1<a.url.indexOf(e))&&-1===a.url.indexOf(".opendata")&&(a.originalUrl=
a.originalUrl||b.clone(a.url),a.url=esriGeowConfig.allSSL?a.url.replace("http:","https:"):a.url),a.access&&"public"!==a.access&&h&&!arcgisonline.sharing.util.isPortal()&&(m=arcgisonline.sharing.util.parseUrl(a.url),a.url=a.url.replace(m.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&a.url&&0===a.url.indexOf("/")&&(m=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===a.url.indexOf(m)&&(a.url=m+a.url)),g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,
"openPageAndCount",a.id,a.url),f=esri.i18nBundle.itemLinks.viewApp,e=esri.i18nBundle.itemLinks.open):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails)):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openExplorer):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,
f=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a)),e=esri.i18nBundle.itemLinks.open,f="Task File"!==h?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:e,href:g,target:"",tip:f,onclick:m}},getHomePageGalleryLinkInfo:function(a){var h=
a.type?a.type:"",e="",g="",f="",m=null;e=this.getUser();g=!1;g=null;esriGeowConfig.portalHostname&&(g=esriGeowConfig.portalHostname);g&&(f=g.split("."),1<f.length&&(g=f[f.length-2]+"."+f[f.length-1]));if("Web Map"==h){f=esriGeowConfig.baseUrl+"webmap/viewer.html?webmap\x3d"+a.id;var l=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(f);g=(g=!e&&this._isPremiumService(a))?l:f;f=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer);e=esri.i18nBundle.itemLinks.open}else if("CityEngine Web Scene"===
h)g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+a.id,f=esri.i18nBundle.itemLinks.viewApp,e=esri.i18nBundle.itemLinks.open;else if("Web Scene"===h&&esriGeowConfig.sceneViewerEnabled)g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+a.id,f=esri.i18nBundle.itemLinks.openSceneViewer,e=esri.i18nBundle.itemLinks.open;
else if("Scene Service"===h&&esriGeowConfig.sceneViewerEnabled)g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,f=esri.i18nBundle.itemLinks.addToSceneViewer,e=esri.i18nBundle.itemLinks.open;else if("Operation View"===h){g=window.location;h=arcgisonline.sharing.util.isPortal();e=-1<b.indexOf(a.typeKeywords,"V2");g=g.protocol+"//"+(h?esriGeowConfig.self.portalHostname:g.host);f=window.location.protocol+"//"+
window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+a.id;l=this.couldHaveArcGISDesktop();if(e)return null;if(l)g=g+(h?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+a.id;else if(this._isOperationsViewSupportedBrowser())g=f;else return null;f=esri.i18nBundle.itemLinks.openOperationViewDesktop;e=esri.i18nBundle.itemLinks.open}else"Map Service"==h||"Feature Service"==h||"Image Service"==h||"KML"==h||"Stream Service"==
h||"Vector Tile Service"===h?(f=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+a.id,l=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(f),g=(g=!e&&this._isPremiumService(a))?l:f,e=esri.i18nBundle.itemLinks.open,f=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),esriGeowConfig.sceneViewerEnabled&&"Image Service"===h&&-1<b.indexOf(a.typeKeywords,"Elevation 3D Layer")&&(g=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,f=esri.i18nBundle.itemLinks.addToSceneViewer,e=esri.i18nBundle.itemLinks.open)):"WMS"==h||"WFS"===h||"WMTS"===h?(g=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+a.id,e=esri.i18nBundle.itemLinks.open,f=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==h?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,
"openPageAndCount",a.id,a.url+"?f\x3dlyr\x26v\x3d9.3"),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):this.couldHaveArcGISDesktop()&&("Map Package"==h||"Mobile Map Package"==h||"Basemap Package"===h||"Mobile Basemap Package"===h||"Layer Package"==h||"Pro Map"==h||"Layout"==h||-1<b.indexOf(a.typeKeywords,"lyrx"))?a&&-1===a.name.indexOf(".bpkx")&&-1===a.name.indexOf(".mmpk")&&-1===a.name.indexOf(".bpk")&&-1===a.name.indexOf(".lpkx")&&-1===a.name.indexOf(".mpkx")&&-1===a.name.indexOf(".lyrx")&&
-1===a.name.indexOf(".mapx")&&-1===a.name.indexOf(".pagx")?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=h&&"Locator Package"!=h&&"Tile Package"!=h&&"Vector Tile Package"!=h?
!this.couldHaveArcGISDesktop()||"Map Document"!=h&&"Published Map"!=h&&"Globe Document"!=h&&"Scene Document"!=h&&"Layer"!=h?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=h&&"ArcGIS Pro Add In"!==h?!this.isSilverlightInstalled()||"Explorer Map"!=h&&"Explorer Layer"!=h&&"Explorer Add In"!=h?"File Geodatabase"===h||"CSV Collection"===h||"KML Collection"===h||"Rule Package"===h||"GeoJson"===h||"Shapefile"===h||"CSV"===h||"Map Template"===h||"Code Sample"===h||"Geoprocessing Sample"===h||"Service Definition"===
h||"Workflow Manager Package"===h||"Windows Viewer Add-in"===h||"ArcPad Package"===h||"Operations Dashboard Addin"===h||"Microsoft Word"===h||"CAD Drawing"===h||"Raster function template"===h||"Microsoft PowerPoint"===h||"Microsoft Powerpoint"===h||"Microsoft Excel"===h||"iWork Pages"===h||"iWork Keynote"===h||"iWork Numbers"===h||"Image"===h||"Visio Document"===h||"PDF"===h||"Desktop Application"===h||"Task File"===h||"Project Package"===h||"ArcGIS Pro Configuration"===h||"Project Template"===h||
"Desktop Style"===h||"Native Application Installer"===h||"360 VR Experience"==h?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):"Desktop Application Template"==h?-1<b.indexOf(a.typeKeywords,"desktopApplicationTemplateUrl")&&a.url&&0<a.url.length?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),e=f=esri.i18nBundle.itemLinks.open):(g="JavaScript:void(0)",
m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"==h&&-1===b.indexOf(a.typeKeywords,"Web AppBuilder for ArcGIS")||"Hub Initiative"===h||"Hub Page"===h||"Hub Site Application"===h?(h=arcgisonline.sharing.util.isHostedTemplateItem(a.url),a.url&&0<a.url.length?(esriGeowConfig.urlKey&&(-1<a.url.indexOf(esriGeowConfig.urlKey)||g&&-1<a.url.indexOf(g))&&-1===a.url.indexOf(".opendata")&&(a.url=
esriGeowConfig.allSSL?a.url.replace("http:","https:"):a.url),a.access&&"public"!==a.access&&h&&!arcgisonline.sharing.util.isPortal()&&(m=arcgisonline.sharing.util.parseUrl(a.url),a.url=a.url.replace(m.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&a.url&&0===a.url.indexOf("/")&&(m=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===a.url.indexOf(m)&&(a.url=m+a.url)),g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",
a.id,a.url),f=esri.i18nBundle.itemLinks.viewApp,e=esri.i18nBundle.itemLinks.open):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails)):"Mobile Application"==h?a.url&&0<a.url.length?(esriGeowConfig.urlKey&&(-1<a.url.indexOf(esriGeowConfig.urlKey)||g&&-1<a.url.indexOf(g))&&(a.url=esriGeowConfig.allSSL?a.url.replace("http:","https:"):a.url),g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),
e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.getApp):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==h?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.download):"Document Link"===h?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),e=f=esri.i18nBundle.itemLinks.open):
"Form"===h&&(!e||e&&e.accountId)?(g=(esriGeowConfig.surveyUrl||"https://survey123.arcgis.com")+"/share/"+a.id+"?portalUrl\x3d"+(location.protocol+"//"+(esriGeowConfig.self.urlKey?esriGeowConfig.self.urlKey+"."+esriGeowConfig.self.customBaseUrl:esriGeowConfig.self.portalHostname)),f=esri.i18nBundle.itemLinks.openSurvey123,e=esri.i18nBundle.itemLinks.open):"Workforce Project"===h?(e=(h=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",
g=window.location.protocol+"//"+e+((h?"/apps/workforce/#":"")+("/projects/"+a.id+"/dispatch/assignments")),f=esri.i18nBundle.itemLinks.openWorkforce,e=esri.i18nBundle.itemLinks.open):"Insights Workbook"===h||"Insights Page"===h||"Insights Model"===h?(e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",g=e="Insights Model"===h?e+("?model\x3d"+a.id):"Insights Page"===h?e+("view/"+a.id):e+a.id,f=esri.i18nBundle.itemLinks.openInsights,
e=esri.i18nBundle.itemLinks.open):"Dashboard"===h?(g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/opsdashboard/index.html#/"+a.id,f=esri.i18nBundle.itemLinks.dashboardView,e=esri.i18nBundle.itemLinks.open):"StoryMap"===h?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),e=f=esri.i18nBundle.itemLinks.open):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):
(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openExplorer,f=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer)):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,
f=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a)),e=esri.i18nBundle.itemLinks.open,f="Task File"!==h?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:e,href:g,target:"",tip:f,onclick:m}},getItemOpenLinkObjects:function(a,h){var e=this.isSilverlightInstalled(),g=[],f=a.type?a.type:"",m=this.getUser(),l=!1;if("Web Map"==f&&-1==b.indexOf(a.typeKeywords,"ArcGIS Online")&&e&&esriGeowConfig.explorerOnline)g.push({label:esri.substitute({appTitle:""},
esri.i18nBundle.itemLinks.openViewer),onClick:b.partial(arcgisonline.map.mapUtil.openMap,a.id,l)}),this.couldHaveArcGISDesktop()&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a))});else if("Web Map"==f)l=!m&&this._isPremiumService(a),g.push({label:esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),onClick:b.partial(arcgisonline.map.mapUtil.openMap,a.id,l)}),this.couldHaveArcGISDesktop()&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a))}),f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/presentation/index.html?webmap\x3d"+a.id,-1<b.indexOf(a.typeKeywords,"Presentation Map")?(g.push({label:esri.i18nBundle.aboutPanel.viewPresentation,onClick:b.partial(arcgisonline.sharing.util.openPage,f)}),h&&g.push({label:esri.i18nBundle.aboutPanel.editPresentation,onClick:b.partial(arcgisonline.sharing.util.openPage,f+"\x26builder",
!0)})):h&&g.push({label:esri.i18nBundle.aboutPanel.createPresentation,onClick:b.partial(arcgisonline.sharing.util.openPage,f+"\x26builder",!0)});else if("Map Service"==f||"Vector Tile Service"===f)l=!m&&this._isPremiumService(a),g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:b.partial(arcgisonline.map.mapUtil.addToMap,a.id,l)}),g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),
onClick:b.partial(arcgisonline.map.mapUtil.openOnMap,a.id,l)}),esriGeowConfig.sceneViewerEnabled&&g.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,!0)}),"Vector Tile Service"!==f?(this.couldHaveArcGISDesktop()&&!arcgisonline.sharing.util.isHostedServiceItem(a)&&(-1<b.indexOf(a.typeKeywords,
"Hosted Service")&&arcgisonline.sharing.util.portalSupportsHostedServices()?g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))}):!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(a.url)||arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(a.url)?g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))}):a.url&&-1!==
a.url.indexOf(".arcgis.com/")&&-1!==a.url.indexOf("//landscape")?g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))}):g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,a.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&arcgisonline.sharing.util.isHostedServiceItem(a)&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",
a,this.getPItemPath(a))})):(f=a.access&&"public"!==a.access&&m&&m.token?"\x26token\x3d"+m.token:"",m=(a&&a.hasResources?esriGeowConfig.restBaseUrl+"content/items/"+a.id:a.url)+"/resources/styles/root.json?f\x3dpjson",esri.isDefined(a.hasResources)&&(h&&a&&a.hasResources&&g.push({label:esri.i18nBundle.itemLinks.downloadStyle,onClick:b.partial(arcgisonline.sharing.util.openPage,m+"\x26download\x3dtrue"+f,!0)}),(h&&a&&a.hasResources||a.url&&-1<a.url.indexOf("/VectorTileServer"))&&g.push({label:esri.i18nBundle.itemLinks.viewStyle,
onClick:b.partial(arcgisonline.sharing.util.openPage,m+f,!1)})));else if(this.couldHaveArcGISDesktop()&&"Globe Service"==f)g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,a.url+"?f\x3dlyr\x26v\x3d9.3")});else if("Image Service"==f||"Feature Service"==f||"KML"==f||"Feature Collection"==f||"Stream Service"==f){h=a&&a.extraUrlParams?!0:!1;l=!m&&this._isPremiumService(a);if("Image Service"!==f||"Image Service"===f&&-1===b.indexOf(a.typeKeywords,
"Elevation 3D Layer"))g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:b.partial(arcgisonline.map.mapUtil.addToMap,a.id,l,h)}),g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:b.partial(arcgisonline.map.mapUtil.openOnMap,a.id,l,h)});if("KML"==f)this.couldHaveArcGISDesktop()&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,
"_fetchItemData",a,this.getPItemPath(a))}),g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Image Service"===f||"Feature Service"===f)esriGeowConfig.sceneViewerEnabled&&-1===b.indexOf(a.typeKeywords,"Table")&&("Feature Service"===f&&-1===b.indexOf(a.typeKeywords,"HasOnlyMultipatchGeometries")||"Image Service"===f&&-1<b.indexOf(a.typeKeywords,"Elevation 3D Layer"))&&g.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,
onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,!0)}),this.couldHaveArcGISDesktop()&&"Image Service"===f&&(a.url&&-1!==a.url.indexOf(".arcgis.com/")||!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(a.url)||arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(a.url)?g.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))}):g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,a.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&"Feature Service"===f&&this.couldHaveArcGISDesktop()&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))})}else if("Geoprocessing Service"===f&&this.couldHaveArcGISDesktop())g.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))});else if("WMS"==f||"WFS"===f||"WMTS"===f)a.noWebMercator?g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:b.partial(arcgisonline.map.mapUtil.openOnGCSMap,a.id)}):(g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:b.partial(arcgisonline.map.mapUtil.addToMap,a.id)}),g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||
"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:b.partial(arcgisonline.map.mapUtil.openOnMap,a.id)})),esriGeowConfig.sceneViewerEnabled&&g.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,!0)}),this.couldHaveArcGISDesktop()&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))});else if("File Geodatabase"===f||"CSV Collection"===f||"KML Collection"===f||"Rule Package"==f||"CSV"==f||"GeoJson"===f||"Shapefile"==f||"Service Definition"==f||"ArcPad Package"===f||"Operations Dashboard Addin"===f)g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Map Package"==f||"Mobile Map Package"===f||"Basemap Package"===f||"Mobile Basemap Package"===f||
"Layer Package"==f||"Pro Map"==f||"Layout"==f||-1<b.indexOf(a.typeKeywords,"lyrx"))this.couldHaveArcGISDesktop()&&a&&-1===a.name.indexOf(".bpkx")&&-1===a.name.indexOf(".mmpk")&&-1===a.name.indexOf(".bpk")&&-1===a.name.indexOf(".lpkx")&&-1===a.name.indexOf(".mpkx")&&-1===a.name.indexOf(".lyrx")&&-1===a.name.indexOf(".mapx")&&-1===a.name.indexOf(".pagx")&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a))}),g.push({label:esri.i18nBundle.itemLinks.download,
onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Geoprocessing Package"==f||"Locator Package"==f||"Tile Package"==f||"Vector Tile Package"==f||"Project Package"===f||"Project Template"===f)this.couldHaveArcGISDesktop()&&"Task File"!==f&&"Project Package"!==f&&"Project Template"!==f&&g.push({label:"Task File"!==f?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional,onClick:b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a))}),g.push({label:esri.i18nBundle.itemLinks.download,
onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Scene Package"==f)g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if(!this.couldHaveArcGISDesktop()||"Map Document"!=f&&"Published Map"!=f&&"Globe Document"!=f&&"Scene Document"!=f&&"Layer"!=f)if(!this.couldHaveArcGISDesktop()||"Desktop Add In"!=f&&"ArcGIS Pro Add In"!==f)if("Explorer Layer"==f||"Explorer Add In"==f||"Explorer Map"==f)g.push({label:esri.i18nBundle.itemLinks.openExplorer,
onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Map Template"===f||"Code Sample"===f||"Geoprocessing Sample"===f||"Workflow Manager Package"===f||"Windows Viewer Add In"===f||"Microsoft Word"===f||"CAD Drawing"===f||"Raster function template"===f||"Microsoft PowerPoint"===f||"Microsoft Powerpoint"===f||"Microsoft Excel"===f||"iWork Pages"===f||"iWork Keynote"===f||"iWork Numbers"===f||"Image"===f||"Visio Document"===f||"PDF"===f||"Desktop Application"===f||"Task File"===
f||"Desktop Style"===f||"Native Application Installer"===f||"360 VR Experience"==f||"ArcGIS Pro Configuration"===f)g.push({label:"PDF"!==f?esri.i18nBundle.itemLinks.download:esri.i18nBundle.itemLinks.open,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Desktop Application Template"===f)(h=-1<b.indexOf(a.typeKeywords,"desktopApplicationTemplateUrl"))&&a.url&&a.url.length&&(h=!0,g.push({label:esri.i18nBundle.itemLinks.open,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,
a.id,a.url)})),h||g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Web Mapping Application"==f&&-1===b.indexOf(a.typeKeywords,"Web AppBuilder for ArcGIS")||"Mobile Application"==f||"Application"==f||"Native Application"===f||"Native Application Template"===f||"Hub Initiative"===f||"Hub Page"===f||"Hub Site Application"===f)arcgisonline.sharing.util.isHostedTemplateItem(a.url),m=esri.i18nBundle.itemLinks.viewApp,"Mobile Application"==
f&&(m=esri.i18nBundle.itemLinks.getApp),arcgisonline.sharing.util.isPortal()&&a.url&&0===a.url.indexOf("/")&&(f=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===a.url.indexOf(f)&&(a.url=f+a.url)),a.url&&0<a.url.length&&g.push({label:m,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,a.url)}),-1<b.indexOf(a.typeKeywords,"Web AppBuilder")&&h&&(a=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/apps/webappbuilder/index.html?id\x3d"+a.id,a="https:"===window.location.protocol?arcgisonline.sharing.util.getSecureUrl(a):arcgisonline.sharing.util.getHttpUrl(a),g.push({label:esri.i18nBundle.itemLinks.editApp,onClick:b.partial(arcgisonline.sharing.util.openPage,a,!0)}));else if("Windows Mobile Package"==f)g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("CityEngine Web Scene"==f)f=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+a.id,g.push({label:esri.i18nBundle.itemLinks.viewApp,onClick:b.partial(arcgisonline.sharing.util.openPage,f)}),g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Web Scene"===f&&esriGeowConfig.sceneViewerEnabled)f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+
a.id,g.push({label:esri.i18nBundle.itemLinks.openSceneViewer,onClick:b.partial(arcgisonline.sharing.util.openPage,f,!0)});else if("Scene Service"===f&&esriGeowConfig.sceneViewerEnabled)f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,g.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,f,!0)});else if("Operation View"===f){f=window.location;
h=arcgisonline.sharing.util.isPortal();m=f.protocol+"//"+(h?esriGeowConfig.self.portalHostname:f.host);l=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+a.id;e=-1<b.indexOf(a.typeKeywords,"TabletLayout");b.indexOf(a.typeKeywords,"DesktopLayout");var d=-1<b.indexOf(a.typeKeywords,"V2"),c=this.couldHaveArcGISDesktop();f=this._isOperationsViewSupportedBrowser();c&&!d&&g.push({label:esri.i18nBundle.itemLinks.openOperationViewDesktop,
onClick:b.partial(arcgisonline.sharing.util.openPage,m+(h?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+a.id)});!d&&e&&f&&g.push({label:esri.i18nBundle.itemLinks.openOperationViewUrl,onClick:b.partial(arcgisonline.sharing.util.openPage,l,!1)})}else"Document Link"===f?g.push({label:esri.i18nBundle.itemLinks.open,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,a.url)}):"Form"===f&&m&&m.accountId?g.push({label:esri.i18nBundle.itemLinks.openSurvey123,
onClick:b.partial(arcgisonline.sharing.util.openPage,"arcgis-survey123://?itemId\x3d"+a.id+"\x26username\x3d"+m.username,!0)}):"Workforce Project"===f?(f=(h=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",g.push({label:esri.i18nBundle.itemLinks.openWorkforce,onClick:b.partial(arcgisonline.sharing.util.openPage,window.location.protocol+"//"+f+((h?"/apps/workforce/#":"")+("/projects/"+a.id+"/dispatch/assignments")),!0)})):
"Insights Workbook"===f||"Insights Page"===f||"Insights Model"===f?(h=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",h="Insights Model"===f?h+("?model\x3d"+a.id):"Insights Page"===f?h+("view/"+a.id):h+a.id,g.push({label:esri.i18nBundle.itemLinks.openInsights,onClick:b.partial(arcgisonline.sharing.util.openPage,h,!0)})):"Dashboard"===f&&(m=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/apps/opsdashboard/index.html#/",f=this._isOperationsViewSupportedBrowser(!0),a=m+a.id,m=a+"?edit\x3dtrue",g.push({label:esri.i18nBundle.itemLinks.dashboardView,onClick:b.partial(arcgisonline.sharing.util.openPage,a,!1)}),h&&f&&g.push({label:esri.i18nBundle.itemLinks.dashboardEdit,onClick:b.partial(arcgisonline.sharing.util.openPage,m,!1)}));else g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else g.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});return g},getGroupLinks:function(a){var h=b.create,e=h("span",{"class":"esriItemLinks",style:"white-space: nowrap"});h("a",{href:esriGeowConfig.baseUrl+"group.html?id\x3d"+a.id,innerHTML:esri.i18nBundle.itemLinks.details,title:esri.i18nBundle.itemLinks.viewGroupDetails,alt:esri.i18nBundle.itemLinks.viewGroupDetails},e);return e},getItemDataPath:function(a){var h=arcgisonline.sharing.util.getToken(),e=h?"?token\x3d"+h:"",g=esriGeowConfig.restBaseUrl+
"content/items/"+a.id+"/data";return"KML"==a.type&&(e="public"!==a.access&&h?"?token\x3d"+h:"",a.url&&-1===a.url.indexOf(g))?a.url+e:g+e},getItemPkgPath:function(a){var h=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/item.pkinfo"+(h?"?token\x3d"+h:"")},getPItemPath:function(a){var h=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/item.pitem"+(h?"?token\x3d"+h:"")},getItemZipPath:function(a){var h=arcgisonline.sharing.util.getToken();
return esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/data?f\x3dzip"+(h?"\x26token\x3d"+h:"")},getUser:function(){this.checkSession();return""===esriGeowConfig.userInfo?null:esriGeowConfig.userInfo},meetsPasswordStrength:function(a){return 8<=a.length&&a.match("^.*(?\x3d.*\\d)(?\x3d.*[a-zA-Z]).*$")},meetsPasswordPolicyStrength:function(a,h){var e={meetsRequirements:function(){return this.minLength&&this.minLetter&&this.minUpper&&this.minLower&&this.minDigit&&this.minOther},minLength:!0,minLetter:!0,
minUpper:!0,minLower:!0,minDigit:!0,minOther:!0};if(h&&0<h.length){a.minLength&&(e.minLength=h.length>=a.minLength);if(a.minLetter){var g=h.match(/[A-Za-z]/g);e.minLetter=!!(g&&g.length>=a.minLetter)}a.minUpper&&(g=h.match(/[A-Z]/g),e.minUpper=!!(g&&g.length>=a.minUpper));a.minLower&&(g=h.match(/[a-z]/g),e.minLower=!!(g&&g.length>=a.minLower));a.minDigit&&(g=h.match(/[0-9]/g),e.minDigit=!!(g&&g.length>=a.minDigit));a.minOther&&(h=h.match(/[\\!"#\$%&'\(\)\*\+,-\./:;<=>\?@\[\]\^_`\{\|}~]/g),e.minOther=
!!(h&&h.length>=a.minOther))}else a.minLength&&(e.minLength=!1),a.minLetter&&(e.minLetter=!1),a.minUpper&&(e.minUpper=!1),a.minLower&&(e.minLower=!1),a.minDigit&&(e.minDigit=!1),a.minOther&&(e.minOther=!1);return e},userPreferences:function(a,h,e){var g=b.cookie(h||"esri_prefs");if(a)g&&(a=b.mixin(b.json.parse(g),a)),b.cookie(h||"esri_prefs",b.json.stringify(a),{path:"/",expires:1E4}),a.contentMode&&e&&this.getUser()?(g=b.create,e=g("form",{method:"POST"},b.body()),g("input",{type:"hidden",name:"preferredView",
value:a.contentMode},e),g("input",{type:"hidden",name:"clearEmptyFields",value:"false"},e),arcgisonline.sharing.geow.Community.updateProfile(e,function(f){b.publish("esri/userPreferences"+(h||"user_prefs"),[a])})):b.publish("esri/userPreferences"+(h||"user_prefs"),[a]);else return e="contentModePrefs"===h?esriGeowConfig.userInfo&&esriGeowConfig.userInfo.preferredView:null,null!=g?b.json.parse(g):e?{contentMode:e}:{}},getToken:function(){return!1===this.isLoggedIn()?"":esriGeowConfig.userInfo.token},
callPage:function(a){window.location=arcgisonline.sharing.util.replaceSSL(esriGeowConfig.baseUrl+a)},openPageAndCount:function(a,h,e){a=esriGeowConfig.restBaseUrl+"content/items/"+a+"/data";var g=arcgisonline.sharing.util.getToken(),f={f:"json"};null!=g&&""!==g&&(f.token=g);esri.request({url:a,content:f,callbackParamName:"callback"});arcgisonline.sharing.util.openPage(h,"boolean"===typeof e?e:!1)},openPage:function(a,h){h?window.location=a:window.open(a)},fix:function(a){null!=a&&1==a.length&&null!=
a[0]&&0<a[0].length&&(a=a[0]);return a.replace(/&lt;/g,"\x3c")},stripHTML:function(a){return a?-1<a.indexOf("\x3c")&&-1<a.indexOf("\x3e")?a.replace(/<[^>]+>/g,""):a:a},urlToObject:function(a){a=esri.urlToObject(a);a.query=a.query||{};for(var h in a.query)a.query.hasOwnProperty(h)&&(Array.isArray(a.query[h])||(a.query[h]=a.query[h].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return a},linkifyText:function(a){a=a.split(" ");for(var h=0;h<a.length;h++)if(0===a[h].indexOf("http://")||0===a[h].indexOf("https://"))a[h]=
"\x3ca href\x3d'"+a[h]+"' target\x3d'_blank'\x3e"+a[h]+"\x3c/a\x3e";return a.join(" ")},removeHTMLTags:function(a){if(null==a)return"";a=a.replace(/&(lt|gt);/g,function(h,e){return"lt"==e?"\x3c":"\x3e"});return a.replace(/<\/?[^>]+(>|$)/g,"")},escapeHTML:function(a){var h={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;","/":"\x26#x2F;"};return String(a).replace(/[&<>"'\/]/g,function(e){return h[e]})},unescapeHTML:function(a){return String(a).replace("\x26lt;","\x3c").replace("\x26gt;",
"\x3e").replace("\x26quot;",'"').replace("\x26#39;","'").replace("\x26#x2F;","/").replace("\x26amp;","\x26")},getSnippet:function(a,h){if(null==a||0===a.length)h=arcgisonline.sharing.util.removeHTMLTags(h),a=180<h.length?h.substring(0,180)+" ...":h;return a},trimTags:function(a){for(;-1<a.indexOf("  ");)a=a.replace(/  /g," ");for(;-1<a.indexOf(",,");)a=a.replace(/,,/g,",");return a=b.trim(a.replace(/, ,/,",").replace(/^,/,"").replace(/,$/,""))},postProcessUri:function(a){a=0<=a.indexOf("?")?a+"\x26f\x3djson":
a+"?f\x3djson";var h=this.getToken();null!=h&&""!==h&&(a=a+"\x26token\x3d"+h);return this.useSSL(a)},replaceSSL:function(a){return!1===esriGeowConfig.useSSL?a:a.replace("http://","https://")},useSSL:function(a){return"https:"===window.location.protocol||esriGeowConfig.self&&!0===esriGeowConfig.self.allSSL?a.replace("http:","https:"):a},errorHandler:function(a,h,e,g){a&&a.code&&"IdentityManagerBase.5"===a.code&&(a.code=498);if(-1<e.indexOf(esriGeowConfig.restBaseUrl)&&a.code&&498==a.code||403==a.code||
400==a.code&&"Invalid account"==a.message)if(403==a.code&&!0===this.isLoggedIn())e&&-1<e.toLowerCase().indexOf("/generatetoken")?window.location.href=esriGeowConfig.baseUrl+"signin.html":e&&-1<e.indexOf("/invitations/")&&g?g(a,h):0>window.location.href.indexOf(esriGeowConfig.baseUrl+"error.html")&&("Request not made over ssl"==a.message?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dSSLRequired":arcgisonline.sharing.util.checkSubscriptionStatus(a)&&(window.location=esriGeowConfig.baseUrl+
"error.html?c\x3dAccessDeniedResource"));else{if(!(403===a.code&&!arcgisonline.sharing.util.checkSubscriptionStatus(a)||403===a.code&&!1===esriGeowConfig.isMultiTenant&&-1<b.indexOf(["COM_0056","COM_0057","SB_0008"],a.messageCode))){esriGeowConfig.userInfo=null;b.cookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain});b.cookie("esri_auth",null,{expires:-1,path:"/",domain:".arcgis.com"});b.cookie("esri_auth",null,{expires:-1,path:"/",domain:".esri.com"});arcgisonline.sharing.util&&arcgisonline.sharing.util._cookies&&
arcgisonline.sharing.util._cookies.esri_auth&&delete arcgisonline.sharing.util._cookies.esri_auth;h="";-1==esriGeowConfig.signin.indexOf("http")&&(h=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(h=h.replace("http:","https:")));h+=esriGeowConfig.signin;e="";g=h+("?error\x3d"+a.code);var f=b.queryToObject(window.location.search.slice(1)).returnUrl;0>window.location.href.indexOf(g)?-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map&&arcgisonline.map.main&&arcgisonline.map.main.map&&
arcgisonline.map.main.mapInitialized?(arcgisonline.map.storage.saveMapInCookie(null,!1),e="\x26returnUrl\x3d"+encodeURIComponent(esriGeowConfig.baseUrl+esriGeowConfig.webmapViewerPath+"?useExisting\x3d1")):e="\x26returnUrl\x3d"+encodeURIComponent(f?f:window.location):f&&(e="\x26returnUrl\x3d"+encodeURIComponent(f));g+=e;0>window.location.href.indexOf(g)?window.location=g:"User not part of this account"===a.message&&(window.location=h+"?error\x3d400"+e)}}else g&&g(a,h)},checkSubscriptionStatus:function(a){return-1!==
b.indexOf(["SB_0001","SB_0002","SB_0003","SB_0004"],a.messageCode)?(arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().show(esriGeowConfig.self.subscriptionInfo),!1):-1!==b.indexOf(["SB_0005","SB_0006","SB_0007"],a.messageCode)?(arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().showOther(a.messageCode),!1):!0},isValidSubscriptionState:function(){var a=esriGeowConfig.self.subscriptionInfo,h=["cancelled","expired","suspended",
"restricted"];return!a||-1===h.indexOf(a.state)},checkError:function(a){var h;return-1!==b.indexOf("COM_0044 COM_0047 CONT_0046 CONT_0047 COM_1043 COM_1044 COM_1045 COM_1046".split(" "),a.messageCode)?(a=(h=b.mixin({},b.i18n.getLocalization("arcgisonline","arcgisonline").common))&&h.errors&&h.errors[a.messageCode]?{message:h.errors[a.messageCode]}:a,a=b.mixin(b.mixin({},h.errors.genericError),a),esriGeowConfig.hideDefaultCheckErrorMessage||(h=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),
h.show(a)),!1):!0},handler:function(a,h,e,g,f){a.error&&""!==a.error?arcgisonline.sharing.util.errorHandler(a.error,h,e,f):g&&g(a,h)},getJson:function(a,h,e){return arcgisonline.sharing.util._requestWithAppHandlers({url:a},{},h,e)},getJsonWithContent:function(a,h,e,g){return arcgisonline.sharing.util._requestWithAppHandlers({url:a,content:h},{},e,g)},postJson:function(a,h,e,g){return arcgisonline.sharing.util._requestWithAppHandlers({url:h,content:a},{usePost:!0},e,g)},postJsonCheckProxy:function(a,
h,e,g){return"http:"===window.location.protocol&&-1<h.indexOf("https://")?arcgisonline.sharing.util._requestWithAppHandlers({url:h,content:a},{usePost:!0,useProxy:!0},e,g):arcgisonline.sharing.util._requestWithAppHandlers({url:h,content:a},{usePost:!0},e,g)},postForm:function(a,h,e,g){return arcgisonline.sharing.util._requestWithAppHandlers({url:h,form:a},{usePost:!0},e,g)},_requestWithAppHandlers:function(a,h,e,g){var f=arcgisonline.sharing.util.request(a,h);f.then(function(m,l){arcgisonline.sharing.util.handler(m||
{},f.ioArgs,a.url,e,g);return m},function(m,l){arcgisonline.sharing.util.errorHandler(m||{},f.ioArgs,a.url,g);throw m;});return f},request:function(a,h){var e=a.url,g=a.content||{},f=arcgisonline.sharing.util.getToken();h=h||{};var m=arcgisonline.sharing.util.urlToObject(e).query||{};g.f||m.f||(g=b.mixin(g,{f:"json"}));f&&!g.token&&!1!==h.addToken?esri.isDefined(esriGeowConfig.isMultiTenant)&&!1===esriGeowConfig.isMultiTenant&&esriGeowConfig.searchArcGISOnlineEnabled&&"www.arcgis.com"===arcgisonline.sharing.util.getFullDomain(a.url)||
(g.token=f):!1===h.addToken&&delete g.token;a=b.mixin({},{url:!1===h.addSSL?e:arcgisonline.sharing.util.useSSL(e),content:g,form:a.form,callbackParamName:a.form?a.callbackParamName||null:a.callbackParamName||"callback",timeout:h&&h.timeout||0});var l=esri.request(a,h);l.addErrback(function(d){"IdentityManagerBase.1"===d.code&&(d.code=d.httpCode);arcgisonline.sharing.util.checkSoftwareAuthError(d,l);arcgisonline.sharing.util.checkSubscriptionStatus(d)||(l.canceled=!0);arcgisonline.sharing.util.isUnlicensed(d)&&
(l.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html"));arcgisonline.sharing.util.isInsufficientLevel(d)&&(l.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#insufficient_level"));arcgisonline.sharing.util.isExpiredLicense(d)&&(l.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#expired_license"));
arcgisonline.sharing.util.isOldLicense(d)&&(l.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#old_license"));arcgisonline.sharing.util.isInvalidUser(d)&&(l.canceled=!0,arcgisonline.sharing.geow.Geow.signout(esriGeowConfig.baseUrl+"index.html"));arcgisonline.sharing.util.isDisabledEnterpriseUser(d)&&(l.canceled=!0,-1===window.location.href.indexOf("error.html")&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dAccountDisabled"));
arcgisonline.sharing.util.checkError(d)||(l.canceled=!0);throw d;});return l},_fetchItemData:function(a,h){var e=this.getUser(),g=this.getItemDataPath(a);"admin"===a.itemControl||e&&e.email===a.owner?this.openPage(h,!0):this._canAccessUrl(g).then(b.hitch(this,function(){this.openPage(h,!0)}),b.hitch(this,function(f){f&&403===f.status?this._showError({title:this.i18n.viewer.error.noPermissionTitle,message:this.i18n.errorWidget.accessDeniedResource}):this.openPage(h,!0)}))},_canAccessUrl:function(a){var h=
new b.Deferred;b.xhr("HEAD",{url:a,handleAs:"text",headers:{"X-Requested-With":null},withCredentials:this.isPortal()?!0:!1}).then(function(e){h.resolve(!0)},function(e){h.reject(e)});return h},_showError:function(a){var h=new arcgisonline.sharing.dijit.dialog.ConfirmDialog({showCancel:!1,style:{width:"375px",height:"auto"}}),e=a||{};e.code=a.code||0;e=b.mixin({},this.i18n.common.errors.genericError,this.i18n.common.errors[a.code]||a);h.show(e).then(b.hitch(this,function(){h.hide()}))},checkSoftwareAuthError:function(a,
h){var e=["COM_0056","COM_0057"];!1===esriGeowConfig.isMultiTenant&&a.code&&403===a.code&&a.messageCode&&-1!==b.indexOf(e,a.messageCode)&&-1===window.location.href.indexOf("error.html")&&(h.canceled=!0,"COM_0056"===a.messageCode?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalCreateAccount":"COM_0057"===a.messageCode&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalSignIn"))},isExpiredLicense:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&503===a.code&&a.messageCode&&
"GWM_0006"===a.messageCode},isInsufficientLevel:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&503===a.code&&a.messageCode&&"GWM_0012"===a.messageCode},isUnlicensed:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&503===a.code&&a.messageCode&&"GWM_0013"===a.messageCode},isOldLicense:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&503===a.code&&a.messageCode&&"GWM_0014"===a.messageCode},isInvalidUser:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&
404===a.code&&a.messageCode&&"POR_205244"===a.messageCode},isDisabledEnterpriseUser:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&403===a.code&&a.messageCode&&"SB_0008"===a.messageCode},isNode:function(a){return"object"===typeof Node?a instanceof Node:a&&"object"===typeof a&&"number"===typeof a.nodeType&&"string"===typeof a.nodeName},isElement:function(a){return"object"===typeof HTMLElement?a instanceof HTMLElement:a&&"object"===typeof a&&1===a.nodeType&&"string"===typeof a.nodeName},
isHostedService:function(a){if(!a)return!1;var h=(new b._Url(esriGeowConfig.restBaseUrl)).authority,e=!1===esriGeowConfig.isMultiTenant,g=-1!==a.indexOf(".arcgis.com/"),f=-1!==a.indexOf("//services")||-1!==a.indexOf("//tiles")||-1!==a.indexOf("//features")||-1!==a.indexOf("//locationservices");a=esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.supportsHostedServices&&-1!==a.indexOf(h)&&!e;return g&&f||!g&&a},isHostedServiceItem:function(a){return arcgisonline.sharing.util.isHostedService(a.item)||
arcgisonline.sharing.util.isHostedService(a.url)},isHostedTemplateItem:function(a){a=a?a.split("?")[0]:"";var h=a.match(/http.+(arcgis.com\/apps)\/?/ig);a=a.match(/http.+(opendata)\/?/ig);return h&&h.length&&!a?!0:!1},isAgolService:function(a){return a?-1!==a.indexOf("/services.arcgisonline.com/")||-1!==a.indexOf("/server.arcgisonline.com/"):!1},supportsHttps:function(a){if(!a)return!1;var h=!1;b.forEach(esriGeowConfig.httpsDomains,function(g){if(-1<a.indexOf("."+g+"/")||-1<a.indexOf("/"+g+"/"))h=
!0});if(!h){var e=esriGeowConfig.self.portalHostname;-1<e.indexOf("/")&&(e=e.substring(0,e.indexOf("/")));-1<a.indexOf(e)&&(h=!0)}return h},isArcGISServer:function(a){var h=/http.+\/(arcgis\/rest\/services|arcgis\/services)\/?/ig,e=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer)).*/ig;return(a=(a=a&&a.split("?")[0])&&a.replace(h,"").match(e))&&a.length?a[0].split("/")[1]:null},getStaticImagesUrl:function(){var a=esriGeowConfig.staticImagesUrl||
esriGeowConfig.self&&esriGeowConfig.self.staticImagesUrl;return(esriGeowConfig.allSSL||"https:"===location.protocol)&&a?a.replace("http:","https:"):a},getRedSphereUrl:function(){return arcgisonline.sharing.util.getStaticImagesUrl()+"/Symbols/Basic/RedSphere.png"},doNothing:function(){},parseUrl:function(a){var h=document.createElement("a");h.href=a;for(var e=h.protocol.replace(":",""),g=h.hostname||window.location.host,f=h.port,m=h.search,l={},d=h.search.replace(/^\?/,"").split("\x26"),c=d.length,
k=0,t;k<c;k++)d[k]&&(t=d[k].split("\x3d"),l[t[0]]=t[1]);return{source:a,protocol:e,host:g,port:f,query:m,params:l,file:(h.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:h.hash.replace("#",""),path:h.pathname.replace(/^([^\/])/,"/$1"),relative:(h.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:h.pathname.replace(/^\//,"").split("/")}},getAbsoluteUrl:function(a){var h;return a?(h||(h=document.createElement("a")),h.href=a,h.href):a},ellipse:function(a,h){a&&a.length>h&&0<h-4&&(a=a.substring(0,
h-4)+"...");return a},appendTags:function(a,h){var e=a.get("value");h=e?h.split(",").concat(e.split(",")):h.split(",");a.set("value",arcgisonline.sharing.util.getUniqueArray(h).join(","));b.style(a.domNode,"color","#000000")},getUniqueArray:function(a){var h={};return b.filter(a,function(e){return h[e]?!1:h[e]=!0})},relativeToExplicitUrl:function(a){esriGeowConfig.cdnServerUrl=b.baseUrl.substring(0,b.baseUrl.indexOf("/js/"));return esriGeowConfig.cdnServerUrl.lastIndexOf("/")===esriGeowConfig.cdnServerUrl.length-
1?esriGeowConfig.cdnServerUrl+a:esriGeowConfig.cdnServerUrl+"/"+a},getCookie:function(a,h){var e=this._cookies&&this._cookies[a]||null;if(!e||h)(e=(e=b.cookie(a))?b.json.parse(e):-1)&&e.role&&(e.role=e.role?e.role.replace("org_","account_"):e.role),e&&(this._cookies||(this._cookies={}),this._cookies[a]=e);return-1===e||esriGeowConfig.ignoreCookie?null:e},canSharePublic:function(){return!esriGeowConfig.self||!0!==esriGeowConfig.self.canSharePublic&&!1!==esriGeowConfig.self.canSharePublic?!0:esriGeowConfig.self.canSharePublic},
getSecureUrl:function(a){a||(a=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpsPort?(location.port?(a=a.replace(location.port,esriGeowConfig.self.httpsPort),arcgisonline.sharing.util.isPortal()&&(a=a.replace(esriGeowConfig.self.httpPort,esriGeowConfig.self.httpsPort))):a=a.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpsPort),a=a.replace("http:","https:"),arcgisonline.sharing.util.cleanPorts(a)):
a.replace("http:","https:")},htmlEncode:function(a){return a?a.replace(/&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):a},htmlDecode:function(a){return a?a.replace(/&amp;/g,"\x26").replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&quot;/g,'"'):a},getHttpUrl:function(a){a||(a=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpPort?(location.port?
(a=a.replace(location.port,esriGeowConfig.self.httpPort),arcgisonline.sharing.util.isPortal()&&(a=a.replace(esriGeowConfig.self.httpsPort,esriGeowConfig.self.httpPort))):a=a.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpPort),a=a.replace("https:","http:"),arcgisonline.sharing.util.cleanPorts(a)):a.replace("https:","http:")},cleanPorts:function(a){return a.replace(/:80\//,"/").replace(/:443\//,"/")},usePortalSSL:function(){return(!1===esriGeowConfig.isMultiTenant||arcgisonline.sharing.util.isPortal())&&
esriGeowConfig.self&&esriGeowConfig.self.portalHostname&&!esriGeowConfig.self.portalHostname.match(/:7080\//)&&80!==esriGeowConfig.self.httpPort&&443!==esriGeowConfig.self.httpsPort&&"https:"===location.protocol},onAGOLFederatedServer:function(a){for(var h=!1,e=0;e<esriGeowConfig.httpsDomains.length;e++)if(a&&-1<a.indexOf(esriGeowConfig.httpsDomains[e])){h=!0;break}return h},onFederatedServer:function(a){var h=!1,e=!1;a&&0<a.length&&esriGeowConfig.federatedServers&&0<esriGeowConfig.federatedServers.length&&
(h=b.some(esriGeowConfig.federatedServers,b.hitch(this,function(g){var f=-1<a.indexOf(":6080")?a.replace("http:","https:").replace(":6080",":6443"):a,m=g.url?arcgisonline.sharing.util.getUrlWithoutScheme(g.url):g.url,l=g.adminUrl?arcgisonline.sharing.util.getUrlWithoutScheme(g.adminUrl):g.adminUrl;m=-1<m.indexOf(":")?g.url:m;l=-1<l.indexOf(":")?g.adminUrl:l;e=f!==a;return-1<a.indexOf(m)||-1<a.indexOf(l)||e&&(-1<f.indexOf(m)||-1<f.indexOf(l))})));return h},getUrlWithoutScheme:function(a){if(esri.isDefined(a)){if(0===
a.indexOf("http://"))return a.substring(7);if(0===a.indexOf("https://"))return a.substring(8)}return a},isPortal:function(){return esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.isPortal},isArcGISEnterpriseOnKubernetes:function(){return"ArcGISEnterpriseOnKubernetes"===(esriGeowConfig.self||{}).portalDeploymentType},portalSupportsHostedServices:function(){return arcgisonline.sharing.util.isPortal()&&esriGeowConfig.self.supportsHostedServices},getHomeAppContext:function(){if(arcgisonline.sharing.util.isPortal()){var a=
window.location.pathname,h=a.indexOf("/home");if(0<h)return a.substring(0,h)}return""},normalizeOrgRole:function(a){return a?a.replace("org_","account_"):a},checkForIAA:function(){var a=new b.Deferred,h=!!esriGeowConfig.isDebug,e=arcgisonline.sharing.util.getPortalAdminBaseUrl(),g=arcgisonline.sharing.util.getUser();b.xhrGet({url:e+"/",handleAs:"json",content:{f:"json",ts:(new Date).getTime()}}).then(b.hitch(this,function(f){f&&f.status&&"error"===f.status&&f.code&&503===f.code?a.resolve({hasIAA:!0,
error:f}):f&&(!f.error&&!g||f.error&&f.error.code&&(!g&&499!==f.error.code&&498!==f.error.code||g&&499!==f.error.code&&498!==f.error.code))?-1===window.location.href.indexOf("createadmin.html")?window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):a.resolve({hasIAA:!1}):a.resolve({hasIAA:!0})}),b.hitch(this,function(f){!h&&(f.status&&499!==f.status||f&&(!f.error&&!g||f.error&&f.error.code&&(!g&&499!==f.error.code&&498!==f.error.code||
g&&499!==f.error.code&&498!==f.error.code)))?-1===window.location.href.indexOf("createadmin.html")?window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):a.resolve({hasIAA:!1}):a.resolve({hasIAA:!0,error:f})}));return a},getBridgeUrl:function(a,h){a=esriGeowConfig.bridgeUrl+"?url\x3d"+encodeURIComponent(a);return h&&h.expires?a+"\x26exp\x3d"+Math.ceil((new Date(h.expires)-new Date)/1E3):a},getUserDisplayName:function(a){var h=
a&&a.fullName||"";a=a.firstName||h;-1<h.indexOf("_")?a=h.split("_")[0]:-1<h.indexOf(",")?a=h.split(",").slice(1).join(" "):-1<h.indexOf(" ")&&(a=h.split(" ")[0]);return a.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},isProApp:function(a){return a&&"ArcGIS Pro"===a.title&&"esri_apps"===a.owner&&a.tags&&-1<b.indexOf(a.tags,"pro")},findProListing:function(){var a=new b.Deferred,h=!1,e=!1,g;arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/self/purchases"}).then(b.hitch(this,
function(f){f.purchases?(b.forEach(f.purchases,b.hitch(this,function(m){!e&&m.listing&&"ArcGIS Pro"===m.listing.title&&"esri_apps"===m.listing.owner&&"licenseByUser"===m.listing.licenseBy&&(h=b.some(m.listing.tags,b.hitch(this,function(l){return l&&"pro"===l.toLowerCase()})))&&(g=m,e=!0)})),a.resolve(e?g:null)):a.resolve(null)}),b.hitch(this,function(f){a.reject(f)}));return a},findLicenseByUserProducts:function(){var a=new b.Deferred,h=esriGeowConfig.restBaseUrl+"portals/self/purchases",e=!1,g=!1,
f={pro:null,products:null};this.isPortal();var m=b.hitch(this,function(l){if(l.listing&&"licenseByUser"===l.listing.licenseBy)if(e=!0,"ArcGIS Pro"===l.listing.title&&"esri_apps"===l.listing.owner){if(g=b.some(l.listing.tags,b.hitch(this,function(d){return d&&"pro"===d.toLowerCase()})))f.pro=l}else l&&l.provision&&(f.products?f.products.push(l):f.products=[l])});arcgisonline.sharing.util.request({url:h}).then(b.hitch(this,function(l){l.purchases||l.trials?(l.purchases&&b.forEach(l.purchases,m),l.trials&&
b.forEach(l.trials,m),a.resolve(e?f:null)):a.resolve(null)}),b.hitch(this,function(l){a.reject(l)}));return a},isEsriWorldGeocoder:function(a){var h=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(a);a=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(a);return h||a},isEsriWorldGeocoderNoProxy:function(a){return(a=a.url||"")&&!!a.match(/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/ig)},isEsriWorldGeocoderThroughProxy:function(a){var h=a.url||"";return a.isAGOWorldLocator||
h&&!!h.match(/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/ig)},filterBatchGeocoders:function(a,h){return b.filter(a,b.hitch(this,function(e){var g=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(e),f=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(e);if(g||f)esri.isDefined(e.name)?"Esri World Geocoder"===e.name&&(e.name=esri.i18nBundle.common.esriWorldGeocoder):e.name=esri.i18nBundle.common.esriWorldGeocoder;return g&&(arcgisonline.sharing.util.isPortal()||h)?!1:
esri.isDefined(e.batch)?!!e.batch:g||f}))},filterNonWorldGeocoders:function(a){return b.filter(a,b.hitch(this,function(h){var e=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(h),g=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(h);return!e&&!g&&h.url}))},downloadWebMappingApp:function(a){var h="Mobile Application"!==a.type?"WMA2Code":"MobileApp2Code",e=esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/relatedItems";h=a.relatedItems||arcgisonline.sharing.util.request({url:e,content:{relationshipType:h}}).then(b.hitch(this,
function(g){a.relatedItems=g&&g.relatedItems||[];return a.relatedItems}));return b.when(h,b.hitch(this,function(g){var f=g||[],m,l=b.filter(f,function(d){return d&&null!==d.url});g=l&&l.length?l[0]:f&&0<f.length?f[0]:g;g.id&&(m=g.url||arcgisonline.sharing.util.getItemDataPath(g));g.url?window.open(m):window.location=m;y.byId("share-map-stack")&&y.byId("share-map-stack").selectChild(y.byId("share-map-application-help"))}),b.hitch(this,function(g){}))},loadUserTags:function(a){var h=new b.Deferred;
a?arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+a+"/tags",content:{ts:(new Date).getTime()}}).then(b.hitch(this,function(e){var g=[];e&&e.tags&&(g=e.tags);g=g.map(function(f){f.tag=arcgisonline.sharing.util.sanitizer.sanitize(f.tag);return f}.bind(this));h.resolve(g)}),b.hitch(this,function(e){h.resolve([])})):h.resolve([]);return h},loadUserProperties:function(a){return arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+a+"/properties"})},
isValidEmailAddress:function(a){var h=/(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?\.)+[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/ig;
return!/(@.*@)|(\.\.)|(@\.)|(\.@)|(^\.)/.test(a)&&h.test(a)?!0:!1},groupUsedInOrgSettings:function(a){return(a=a?"id:"+a:null)&&esriGeowConfig.self&&(esriGeowConfig.self.basemapGalleryGroupQuery&&-1<esriGeowConfig.self.basemapGalleryGroupQuery.indexOf(a)||esriGeowConfig.self.colorSetsGroupQuery&&-1<esriGeowConfig.self.colorSetsGroupQuery.indexOf(a)||esriGeowConfig.self.featuredGroupsId&&-1<esriGeowConfig.self.featuredGroupsId.indexOf(a)||esriGeowConfig.self.featuredItemsGroupQuery&&-1<esriGeowConfig.self.featuredItemsGroupQuery.indexOf(a)||
esriGeowConfig.self.galleryTemplatesGroupQuery&&-1<esriGeowConfig.self.galleryTemplatesGroupQuery.indexOf(a)||esriGeowConfig.self.homePageFeaturedContent&&-1<esriGeowConfig.self.homePageFeaturedContent.indexOf(a)||esriGeowConfig.self.layerTemplatesGroupQuery&&-1<esriGeowConfig.self.layerTemplatesGroupQuery.indexOf(a)||esriGeowConfig.self.livingAtlasGroupQuery&&-1<esriGeowConfig.self.livingAtlasGroupQuery.indexOf(a)||esriGeowConfig.self.stylesGroupQuery&&-1<esriGeowConfig.self.stylesGroupQuery.indexOf(a)||
esriGeowConfig.self.symbolSetsGroupQuery&&-1<esriGeowConfig.self.symbolSetsGroupQuery.indexOf(a)||esriGeowConfig.self.templatesGroupQuery&&-1<esriGeowConfig.self.templatesGroupQuery.indexOf(a)||esriGeowConfig.self.analysisLayersGroupQuery&&-1<esriGeowConfig.self.analysisLayersGroupQuery.indexOf(a))},canShowSocialMediaLinks:function(){var a=arcgisonline.sharing.util.isPortal(),h=arcgisonline.sharing.util.canSharePublic(),e=!(!esriGeowConfig.self||!esriGeowConfig.self.portalProperties)&&esri.isDefined(esriGeowConfig.self.portalProperties.showSocialMediaLinks),
g=e&&!0===esriGeowConfig.self.portalProperties.showSocialMediaLinks;return esriGeowConfig.showSocialMediaLinks&&!0===esriGeowConfig.showSocialMediaLinks&&(a?h&&g:h&&(!e||g))},getPortalAdminBaseUrl:function(){var a=arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?esriGeowConfig.enterpriseAdminBaseUrl:esriGeowConfig.portalAdminBaseUrl;return arcgisonline.sharing.util.getSecureUrl(a)},formatPortalOrgUrl:function(a,h,e){return arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?a+"/orgs/"+
e+h:a+h},getLevelSpan:function(a,h){return'\x3cspan class\x3d"license-level-badge" aria-label\x3d"'+a+" "+h+'"\x3e'+h+"\x3c/span\x3e"},getLevelSpanProperties:function(a,h){return{"class":"license-level-badge",innerHTML:h,"aria-label":a+" "+h}},createLevelSpan:function(a,h,e,g){return b.create("span",b.mixin(arcgisonline.sharing.util.getLevelSpanProperties(a,h),g||{}),e)},createLevelSpanAndPlace:function(a,h,e,g,f){return b.create("span",b.mixin(arcgisonline.sharing.util.getLevelSpanProperties(a,h),
g||{}),e,f)},getFullDomain:function(a){a=a.match(/:\/\/([0-9]?\.)?(.[^/:]+)/i);return null!=a&&2<a.length&&"string"===typeof a[2]&&0<a[2].length?a[2]:null},isValidOnlineReturnUrl:function(a){var h=decodeURI(a),e=arcgisonline.sharing.util.parseUrl(window.location.href);a=arcgisonline.sharing.util.parseUrl(h);var g=(h=0===h.indexOf("http://")||0===h.indexOf("https://"))&&a.host?a.host.lastIndexOf(".arcgis.com"):-1,f=h&&a.host?a.host.lastIndexOf(".esri.com"):-1,m=h&&a.host?a.host.lastIndexOf(e.host):
-1;g=-1<g&&g+11-1===a.host.length-1;f=-1<f&&f+9-1===a.host.length-1;e=-1<m&&m+e.host.length-1===a.host.length-1;return h&&a.host&&(g||f||e)?!0:!1},isValidPortalReturnUrl:function(a){var h=decodeURI(a),e=arcgisonline.sharing.util.parseUrl(window.location.href);a=arcgisonline.sharing.util.parseUrl(h);h=0===h.indexOf("http://")||0===h.indexOf("https://");var g=a.host?a.host.lastIndexOf(e.host):-1;e=-1<g&&g+e.host.length-1===a.host.length-1;return h&&a.host&&e?!0:!1},isSameUrl:function(a,h,e){var g=a,
f=h;e&&a&&h&&(g=a.substring(a.indexOf("://")+3),f=h.substring(h.indexOf("://")+3));return g===f},overrideDojoAriaLabel:function(a,h){a&&(b.attr(a,"aria-label",h),a.removeAttribute("aria-labelledby"))},getStepProgressIndicatorProperties:function(a,h){return{"class":"stepProgressBar stepProgressBar--"+h+"-steps",innerHTML:'\x3cdiv class\x3d"stepProgressBar__value" style\x3d"width: '+Math.floor(a/h*100)+'%;"\x3e\x3c/div\x3e',"aria-hidden":"true"}},createStepProgressIndicatorAndPlace:function(a,h,e,g){e=
b.create("div",{"class":"progressBarContainer"},e,g);b.create("div",b.mixin(arcgisonline.sharing.util.getStepProgressIndicatorProperties(a,h)),e,"first");b.place('\x3cspan class\x3d"stepLabel"\x3e'+esri.i18nBundle.common.steppedProgress.step+"  "+a+"  "+esri.i18nBundle.common.steppedProgress.of+" "+h+"\x3c/span\x3e",e,"last");return e},clearProgressBars:function(){b.query(".progressBarContainer").forEach(function(a){b.destroy(a)})},isServiceProxyGeocoder:function(a){var h=(a||"").toLowerCase();a=
-1<h.indexOf("/geocodeserver")&&-1<h.indexOf("/servers/")&&-1<h.indexOf("/rest/services/");var e=arcgisonline.sharing.util.isPortal()&&-1<h.indexOf(esriGeowConfig.self.portalHostname);h=!arcgisonline.sharing.util.isPortal()&&h.indexOf("utility")&&-1<h.indexOf(".arcgis.com");return a&&(e||h)},applyChrome62ButtonRepaintFix:function(a){b.has&&61<b.has("chrome")&&a&&(b.style(a,"display","none"),setTimeout(function(){b.style(a,"display","")},1))},isValidUrl:function(a){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(a)},
setFederatedServers:function(a){esriGeowConfig.federatedServers=a},shouldUseProxy:function(a){return(((a||"").split("//")[1]||"").split("/")[0]||"").toLowerCase()!==window.location.host.toLowerCase()}}})},"arcgisonline/sharing/dijit/dialog/GeneralDlg":function(){define("require esri/declare esri/Evented dojo/_base/lang dijit/Dialog dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/query dojo/dom-style dojo/dom-attr dojo/on dojo/i18n!../../../nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t){var n=y("arcgisonline.sharing.dijit.dialog.GeneralDlg",[e,g,f,q],{baseClass:"esriThumbnailDlg",templateString:t,widgetsInTemplate:!0,onCancel:function(){},onHide:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=a.mixin({},k.common,k.generalDlg)},postCreate:function(){this.loadConnections()},show:function(u){this.clear();this.setTitle(u.title);this.setMessage(u.message);this.setContent(u.content);this.key=u.key;u.hideTitleBar&&l.set(m(".dijitDialogTitleBar")[0],
"display","none");u.error&&m("#general-dialog-content").addClass("error");this._dialog.show()},showWide:function(u){l.set(this._dialog,"width","700px");this.show(u)},destroy:function(){this.inherited(arguments);n.prototype.statics._instance&&(n.prototype.statics._instance=null)},clear:function(){this.setTitle("");m("#general-dialog-content").attr("innerHTML","");m("#general-dialog-content").removeClass("error")},loadConnections:function(){m(".jevent").on("click",function(x){x.preventDefault()});m("#general-dialog .dijitDialogTitleBar .dijitDialogCloseIcon").forEach(a.hitch(this,
function(x){d.set(x,"title",this.i18n.close)}));var u=this._dialog;this.own(c(u,"cancel",a.hitch(this,function(x){x&&x instanceof Event&&x.preventDefault();this.onCancel()})),c(u,"hide",a.hitch(this,function(x){x&&x instanceof Event&&x.preventDefault();this.onHide()})))},setTitle:function(u){u&&this._dialog.set("title",u)},setMessage:function(u){u&&m("#general-dialog-content").attr("innerHTML","\x3cp style\x3d'word-wrap:break-word;'\x3e"+u+"\x3c/p\x3e")},setContent:function(u){u&&m("#general-dialog-content").attr("innerHTML",
u)},hideTitle:function(){this._dialog.titleNode.classList.add("hide")},setButtonLabel:function(u){this._okBtn.setLabel(u)},hide:function(){this._dialog.hide()},onOkClick:function(u){this._dialog.hide()}});n.prototype.statics={getInstance:function(){this._instance||(this._instance=new n);return this._instance}};return n})},"esri/declare":function(){define(["dojo/_base/declare","dojo/_base/lang","./extend"],function(b,y,q){return function(a,h,e){var g=y.isString(a);g?e.declaredClass=a:(e=h,h=a);h=b(h,
e);g&&q(a,h);return h}})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(b,y,q){return function(a,h){a=a.substring(a.indexOf(".")+1);b.setObject(a,h,q)}})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(b,y,q,a,h){return q("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var e=
this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);h.parse(e,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(a.hitch(this,function(g){this._startupWidgets=g;for(var f=0;f<g.length;f++)this._processTemplateNode(g[f],function(m,l){return m[l]},function(m,l,d){return l in m?m.connect(m,l,d):m.on(l,d,!0)});this.containerNode&&
this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(e,g,f){return g(e,"dojoType")||g(e,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){b.forEach(this._startupWidgets,function(e){e&&!e._started&&
e.startup&&e.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated,dijit/form/Button,dojo/cookie"],function(b,y,q){b.provide("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");b.require("dijit.Dialog");b.require("dijit._Widget");b.require("dijit._Templated");b.require("dijit.form.Button");b.require("dojo.cookie");b.declare("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg",
[y._Widget,y._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent" \x3e\n  \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"subscription-status-dialog" dojoAttachPoint\x3d"subscriptionStatusDlg" title\x3d"" execute\x3d""\x3e\n    \x3cdiv dojoAttachPoint\x3d"subscriptionStateDiv"\x3e\x3c/div\x3e\n    \x3cbr/\x3e\n    \x3cdiv dojoAttachPoint\x3d"actionNeededDiv"\x3e\x3c/div\x3e\n    \x3cbr/\x3e\n    \x3cdiv class\x3d"esriFloatTrailing"\x3e\x3cbutton dojoAttachPoint\x3d"closeButton" dojoAttachEvent\x3d"onClick:onOkClick" class\x3d"jevent primary" dojoType\x3d"dijit.form.Button"\x3e${i18n.ok}\x3c/button\x3e\x3c/div\x3e\n    \x3cbr style\x3d"clear:both;"/\x3e\n  \x3c/div\x3e\n\x3c/div\x3e',
statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg);return this._instance}},subscriptionStatusDlg:null,subscriptionStateDiv:null,actionNeededDiv:null,closeButton:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").subscriptionStatusDlg)},postCreate:function(){this.loadConnections()},
show:function(a){this.clear();this.setSubscriptionState(a);this.setActionMessage(a);this.subscriptionStatusDlg.show()},showOther:function(a){this.clear();this.setOtherSubscriptionStatus(a);b.style(this.actionNeededDiv,"display","none");this.subscriptionStatusDlg.show()},setSubscriptionState:function(a){if(a&&a.state){var h=this.i18n.subscriptionStatusExpiredMsg;a=a.state.toLowerCase();"expired"===a?h=this.i18n.subscriptionStatusExpiredMsg:"cancelled"===a?h=this.i18n.subscriptionStatusCancelledMsg:
"suspended"===a?h=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://doc.arcgis.com/en/arcgis-online/administer/view-status.htm' target\x3d'_blank'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.subscriptionStatusSuspendedMsg):"restricted"===a&&(h=this.i18n.subscriptionStatusRestrictedMsgNoLink);b.attr(this.subscriptionStateDiv,"innerHTML",h)}},setOtherSubscriptionStatus:function(a){this.subscriptionStatusDlg.set("title",this.i18n.errorTitle);var h=this.i18n.expiredStatus;
a&&("SB_0005"===a?h=this.i18n.suspendedStatus:"SB_0006"===a?h=this.i18n.cancelledStatus:"SB_0007"===a&&(h=this.i18n.expiredStatus));a=esri.substitute({subscriptionState:h},this.i18n.otherSubscriptionStatusMsg);b.attr(this.subscriptionStateDiv,"innerHTML",a)},setActionMessage:function(a){var h=this.getUser();h&&h.role&&("org_admin"===h.role||"account_admin"===h.role)?((a.type||"").toLowerCase(),a.state.toLowerCase(),a=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://www.esri.com/en-us/contact#c\x3dus\x26t\x3d3' target\x3d'_blank'\x3e",
linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.contactCustomerService),b.attr(this.actionNeededDiv,"innerHTML",a)):b.attr(this.actionNeededDiv,"innerHTML",this.i18n.nonAdminActionMsg)},loadConnections:function(){b.query(".jevent").connect("onclick",function(a){a.preventDefault()});b.connect(this.subscriptionStatusDlg,"onCancel",b.hitch(this,function(a){this.onCancel(a)}));b.connect(this.subscriptionStatusDlg,"hide",b.hitch(this,function(a){this.onHide(a)}))},clear:function(){this.subscriptionStatusDlg.set("title",
this.i18n.subscriptionStatusTitle);b.attr(this.subscriptionStateDiv,"innerHTML","");b.attr(this.actionNeededDiv,"innerHTML","");b.style(this.actionNeededDiv,"display","")},hide:function(){this.subscriptionStatusDlg.hide()},onOkClick:function(a){y.byId("subscription-status-dialog").hide()},getUser:function(){var a=b.cookie("esri_auth");return esriGeowConfig.userInfo||JSON.parse(a)||null},onCancel:function(){},onHide:function(){}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(b,y,q,a,h,e,g){e.extend(b,{waiRole:"",waiState:""});return h("dijit._Templated",[y,q],{constructor:function(){g.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(f,m){var l=this.inherited(arguments),d=m(f,"waiRole");d&&f.setAttribute("role",d);(d=m(f,"waiState"))&&a.forEach(d.split(/\s*,\s*/),function(c){-1!=c.indexOf("-")&&(c=c.split("-"),f.setAttribute("aria-"+c[0],c[1]))});
return l}})})},"arcgisonline/sharing/dijit/dialog/ConfirmDialog":function(){define(["dojo/_base/declare","dijit/Dialog","./_ConfirmDialogMixin"],function(b,y,q){return b("arcgisonline/sharing/dijit/dialog/ConfirmDialog",[y,q],{})})},"arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/query dojo/topic dojo/keys dijit/_WidgetsInTemplateMixin dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/actionBar.html dijit/form/Button".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t){return b("arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin",c,{actionBarTemplate:t,buttonOkLabel:k.common.ok,_setButtonOkLabelAttr:function(n){this.okButton.set("label",n)},buttonCancelLabel:k.common.cancel,_setButtonCancelLabelAttr:function(n){this.cancelButton.set("label",n)},busyMessage:k.common.pleaseWait,_setBusyMessageAttr:{node:"busyMessageSpan",attribute:"innerHTML"},_setShowCancelAttr:function(n){g.set(this.cancelButton.domNode,"display",n?"":"none")},
_setHelpLinkInfoAttr:function(n){var u=m(".dijitDialogTitle",this.domNode).shift();e.create("a",{className:"icon-ui-question margin-left-half font-size--1",title:n.title,href:n.url||"#",target:"_blank"},u)},onOk:function(){},onCancel:function(){},onHide:function(){},show:function(n){var u=new q;n&&n.message&&(this._messageNode||(this._messageNode=e.create("p",{innerHTML:n,"class":"esriMessageNode trailer-0"},m(".dijitDialogPaneContent",this.domNode)[0],"first")),this.set("title",n.title||""),h.set(this._messageNode,
"innerHTML",n.message||""));this.own(a(this,"hide",y.hitch(this,function(x){u.isResolved()||u.resolve("onCancel");this.destroyRecursive()})),a(this.okButton,"click",y.hitch(this,function(x){x.preventDefault();l.publish("/dlg/onOk");u.isResolved()||u.resolve("onOk");this.onOk()})),a(this.cancelButton,"click",y.hitch(this,function(x){x.preventDefault();l.publish("/dlg/onCancel");u.isResolved()||u.resolve("onCancel");this.onCancel();this.hide()})),a(this.domNode,"keypress",y.hitch(this,function(x){if(x&&
x.keyCode===d.ENTER)this.okButton.onClick(x)})),l.subscribe("/dlg/busyMessage",y.hitch(this,function(x){this.set("busyMessage",x)})),l.subscribe("/esri/disable",y.hitch(this,function(x,A){this.set("busyMessage",A||this.busyMessage||k.common.pleaseWait);this.set("disabled",x)})));this.inherited(arguments);return u},_setDisabledAttr:function(n){m(".dijitButton",this.actionBarNode).map(dijit.byNode).forEach(function(u){u.set("disabled",n)});dojo[n?"removeClass":"addClass"](this.busyMessageSpan,"hide")}})})},
"esri/libs/sanitizer/Sanitizer":function(){!function(b,y){"object"==typeof exports&&"undefined"!=typeof module?module.exports=y():"function"==typeof define&&define.amd?define(y):(b=b||self).Sanitizer=y()}(this,function(){function b(la,Aa){return la(Aa={exports:{}},Aa.exports),Aa.exports}function y(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,
"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,
"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,
"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,
"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,
float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,
"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,
"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,
"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,
"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,
"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,
"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,
"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}function q(la){var Aa=la||{},da={},fa;for(fa in Aa)da[fa]=Aa[fa];(la=da).whiteList=la.whiteList||C.whiteList;la.onAttr=la.onAttr||C.onAttr;la.onIgnoreAttr=la.onIgnoreAttr||C.onIgnoreAttr;la.safeAttrValue=
la.safeAttrValue||C.safeAttrValue;this.options=la}function a(la){return la.replace(S,"\x26lt;").replace(L,"\x26gt;")}function h(la){return la.replace(aa,"\x26quot;")}function e(la){return la.replace(ba,'"')}function g(la){return la.replace(O,function(Aa,da){return"x"===da[0]||"X"===da[0]?String.fromCharCode(parseInt(da.substr(1),16)):String.fromCharCode(parseInt(da,10))})}function f(la){return la.replace(V,":").replace(X," ")}function m(la){for(var Aa="",da=0,fa=la.length;da<fa;da++)Aa+=32>la.charCodeAt(da)?
" ":la.charAt(da);return K(Aa)}function l(la){return la=m(la=f(la=g(la=e(la))))}function d(la){return la=a(la=h(la))}function c(la,Aa){for(;Aa<la.length;Aa++){var da=la[Aa];if(" "!==da)return"\x3d"===da?Aa:-1}}function k(la,Aa){for(;0<Aa;Aa--){var da=la[Aa];if(" "!==da)return"\x3d"===da?Aa:-1}}function t(la){return'"'===la[0]&&'"'===la[la.length-1]||"'"===la[0]&&"'"===la[la.length-1]?la.substr(1,la.length-2):la}function n(la){var Aa=la||{},da={},fa;for(fa in Aa)da[fa]=Aa[fa];(la=da).stripIgnoreTag&&
(la.onIgnoreTag=sa.onIgnoreTagStripAll);la.whiteList=la.whiteList||sa.whiteList;la.onTag=la.onTag||sa.onTag;la.onTagAttr=la.onTagAttr||sa.onTagAttr;la.onIgnoreTag=la.onIgnoreTag||sa.onIgnoreTag;la.onIgnoreTagAttr=la.onIgnoreTagAttr||sa.onIgnoreTagAttr;la.safeAttrValue=la.safeAttrValue||sa.safeAttrValue;la.escapeHtml=la.escapeHtml||sa.escapeHtml;this.options=la;!1===la.css?this.cssFilter=!1:(la.css=la.css||{},this.cssFilter=new pa(la.css))}var u,x,A=Object.prototype,z=Function.prototype.toString,E=
A.hasOwnProperty,w=z.call(Object),D=A.toString,r=(u=Object.getPrototypeOf,x=Object,function(la){return u(x(la))}),v=function(la){var Aa;if(!(Aa=!la||"object"!=typeof la||"[object Object]"!=D.call(la))&&(Aa=!1,null!=la&&"function"!=typeof la.toString))try{Aa=!!(la+"")}catch(da){}if(Aa)return!1;la=r(la);if(null===la)return!0;la=E.call(la,"constructor")&&la.constructor;return"function"==typeof la&&la instanceof la&&z.call(la)==w},B=/javascript\s*:/gim,C={whiteList:y(),getDefaultWhiteList:y,onAttr:function(la,
Aa,da){},onIgnoreAttr:function(la,Aa,da){},safeAttrValue:function(la,Aa){return B.test(Aa)?"":Aa}},F=function(la){return String.prototype.trim?la.trim():la.replace(/(^\s*)|(\s*$)/g,"")},G=function(la){return String.prototype.trimRight?la.trimRight():la.replace(/(\s*$)/g,"")},H=function(la,Aa){function da(){if(!Q){var Qa=F(la.slice(xa,Fa)),va=Qa.indexOf(":");if(-1!==va){var T=F(Qa.slice(0,va));va=F(Qa.slice(va+1));T&&(Qa=Aa(xa,ca.length,T,va,Qa))&&(ca+=Qa+"; ")}}xa=Fa+1}";"!==(la=G(la))[la.length-
1]&&(la+=";");for(var fa=la.length,Q=!1,xa=0,Fa=0,ca="";Fa<fa;Fa++){var Sa=la[Fa];if("/"===Sa&&"*"===la[Fa+1]){Sa=la.indexOf("*/",Fa+2);if(-1===Sa)break;xa=(Fa=Sa+1)+1;Q=!1}else"("===Sa?Q=!0:")"===Sa?Q=!1:";"===Sa?Q||da():"\n"===Sa&&da()}return F(ca)};q.prototype.process=function(la){if(!(la=(la=la||"").toString()))return"";var Aa=this.options,da=Aa.whiteList,fa=Aa.onAttr,Q=Aa.onIgnoreAttr,xa=Aa.safeAttrValue;return H(la,function(Fa,ca,Sa,Qa,va){var T=da[Sa],ja=!1;if(!0===T?ja=T:"function"==typeof T?
ja=T(Qa):T instanceof RegExp&&(ja=T.test(Qa)),!0!==ja&&(ja=!1),Qa=xa(Sa,Qa)){var ka;Fa={position:ca,sourcePosition:Fa,source:va,isWhite:ja};return ja?null==(ka=fa(Sa,Qa,Fa))?Sa+":"+Qa:ka:null==(ka=Q(Sa,Qa,Fa))?void 0:ka}})};A=b(function(la,Aa){for(var da in(Aa=la.exports=function(fa,Q){return(new q(Q)).process(fa)}).FilterCSS=q,C)Aa[da]=C[da]});var J=(A.FilterCSS,function(la,Aa){var da;if(Array.prototype.indexOf)return la.indexOf(Aa);var fa=0;for(da=la.length;fa<da;fa++)if(la[fa]===Aa)return fa;return-1}),
I=function(la,Aa,da){var fa;if(Array.prototype.forEach)return la.forEach(Aa,da);var Q=0;for(fa=la.length;Q<fa;Q++)Aa.call(da,la[Q],Q,la)},K=function(la){return String.prototype.trim?la.trim():la.replace(/(^\s*)|(\s*$)/g,"")},R=function(la){return(la=/\s|\n|\t/.exec(la))?la.index:-1},W=A.getDefaultWhiteList,P=new A.FilterCSS,S=/</g,L=/>/g,aa=/"/g,ba=/&quot;/g,O=/&#([a-zA-Z0-9]*);?/gim,V=/&colon;?/gim,X=/&newline;?/gim,N=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,
Y=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,ia=/u\s*r\s*l\s*\(.*/gi,oa=/\x3c!--[\s\S]*?--\x3e/g,sa={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],
div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan",
"align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")},getDefaultWhiteList:function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],
details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align",
"valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")}},onTag:function(la,Aa,da){},onIgnoreTag:function(la,Aa,da){},onTagAttr:function(la,Aa,da){},onIgnoreTagAttr:function(la,Aa,da){},safeAttrValue:function(la,Aa,da,fa){if(da=l(da),"href"===Aa||"src"===Aa){if("#"===(da=K(da)))return"#";if("http://"!==da.substr(0,7)&&"https://"!==da.substr(0,8)&&"mailto:"!==da.substr(0,7)&&"tel:"!==da.substr(0,4)&&"#"!==da[0]&&"/"!==da[0])return""}else if("background"===
Aa){if(N.lastIndex=0,N.test(da))return""}else if("style"===Aa){if((Y.lastIndex=0,Y.test(da))||(ia.lastIndex=0,ia.test(da)&&(N.lastIndex=0,N.test(da))))return"";!1!==fa&&(da=(fa=fa||P).process(da))}return da=d(da)},escapeHtml:a,escapeQuote:h,unescapeQuote:e,escapeHtmlEntities:g,escapeDangerHtml5Entities:f,clearNonPrintableCharacter:m,friendlyAttrValue:l,escapeAttrValue:d,onIgnoreTagStripAll:function(){return""},StripTagBody:function(la,Aa){"function"!=typeof Aa&&(Aa=function(){});var da=!Array.isArray(la),
fa=[],Q=!1;return{onIgnoreTag:function(xa,Fa,ca){return da||-1!==J(la,xa)?ca.isClosing?(fa.push([!1!==Q?Q:ca.position,ca.position+10]),Q=!1,"[/removed]"):(Q||(Q=ca.position),"[removed]"):Aa(xa,Fa,ca)},remove:function(xa){var Fa="",ca=0;return I(fa,function(Sa){Fa+=xa.slice(ca,Sa[0]);ca=Sa[1]}),Fa+=xa.slice(ca)}}},stripCommentTag:function(la){return la.replace(oa,"")},stripBlankChar:function(la){la=la.split("");return(la=la.filter(function(Aa){Aa=Aa.charCodeAt(0);return 127!==Aa&&(!(31>=Aa)||10===
Aa||13===Aa)})).join("")},cssFilter:P,getDefaultCSSWhiteList:W},Ba=/[^a-zA-Z0-9_:\.\-]/gim,Da={parseTag:function(la,Aa,da){var fa="",Q=0,xa=!1,Fa=!1,ca=0,Sa=la.length,Qa="",va="";for(ca=0;ca<Sa;ca++)va=la.charAt(ca),!1===xa?"\x3c"===va&&(xa=ca):!1===Fa?"\x3c"===va?(fa+=da(la.slice(Q,ca)),Q=xa=ca):"\x3e"===va?(fa+=da(la.slice(Q,xa)),Q=va=la.slice(xa,ca+1),Qa=R(Q),Q=-1===Qa?Q.slice(1,-1):Q.slice(1,Qa+1),Qa=("/"===(Q=K(Q).toLowerCase()).slice(0,1)&&(Q=Q.slice(1)),"/"===Q.slice(-1)&&(Q=Q.slice(0,-1)),
Q),fa+=Aa(xa,fa.length,Qa,va,"\x3c/"===va.slice(0,2)),Q=ca+1,xa=!1):'"'!==va&&"'"!==va||"\x3d"!==la.charAt(ca-1)||(Fa=va):va===Fa&&(Fa=!1);return Q<la.length&&(fa+=da(la.substr(Q))),fa},parseAttr:function(la,Aa){function da(Qa,va){1>(Qa=(Qa=K(Qa)).replace(Ba,"").toLowerCase()).length||(Qa=Aa(Qa,va||""))&&Q.push(Qa)}for(var fa=0,Q=[],xa=!1,Fa=la.length,ca=0;ca<Fa;ca++){var Sa=la.charAt(ca);if(!1!==xa||"\x3d"!==Sa)if(!1===xa||ca!==fa||'"'!==Sa&&"'"!==Sa||"\x3d"!==la.charAt(ca-1))/\s|\n|\t/.test(Sa)&&
((la=la.replace(/\s|\n|\t/g," "),!1===xa)?-1===(Sa=c(la,ca))?(da(K(la.slice(fa,ca))),xa=!1,fa=ca+1):ca=Sa-1:-1===(Sa=k(la,ca-1))&&(da(xa,t(K(la.slice(fa,ca)))),xa=!1,fa=ca+1));else{if(-1===(Sa=la.indexOf(Sa,ca+1)))break;da(xa,K(la.slice(fa+1,Sa)));xa=!1;fa=(ca=Sa)+1}else xa=la.slice(fa,ca),fa=ca+1}return fa<la.length&&(!1===xa?da(la.slice(fa)):da(xa,t(K(la.slice(fa))))),K(Q.join(" "))}},pa=A.FilterCSS,ra=Da.parseTag,ya=Da.parseAttr;n.prototype.process=function(la){if(!(la=(la=la||"").toString()))return"";
var Aa=this.options,da=Aa.whiteList,fa=Aa.onTag,Q=Aa.onIgnoreTag,xa=Aa.onTagAttr,Fa=Aa.onIgnoreTagAttr,ca=Aa.safeAttrValue,Sa=Aa.escapeHtml,Qa=this.cssFilter;Aa.stripBlankChar&&(la=sa.stripBlankChar(la));Aa.allowCommentTag||(la=sa.stripCommentTag(la));var va=!1;Aa.stripIgnoreTagBody&&(va=sa.StripTagBody(Aa.stripIgnoreTagBody,Q),Q=va.onIgnoreTag);la=ra(la,function(T,ja,ka,U,ha){ja={sourcePosition:T,position:ja,isClosing:ha,isWhite:da.hasOwnProperty(ka)};if(null!=(T=fa(ka,U,ja)))return T;if(ja.isWhite){if(ja.isClosing)return"\x3c/"+
ka+"\x3e";T=function(qa){var ua=R(qa);if(-1===ua)return{html:"",closing:"/"===qa[qa.length-2]};ua="/"===(qa=K(qa.slice(ua+1,-1)))[qa.length-1];return ua&&(qa=K(qa.slice(0,-1))),{html:qa,closing:ua}}(U);var na=da[ka];ja=ya(T.html,function(qa,ua){var za,Ea=-1!==J(na,qa);return null==(za=xa(ka,qa,ua,Ea))?Ea?(ua=ca(ka,qa,ua,Qa))?qa+'\x3d"'+ua+'"':qa:null==(za=Fa(ka,qa,ua,Ea))?void 0:za:za});U="\x3c"+ka;return ja&&(U+=" "+ja),T.closing&&(U+=" /"),U+="\x3e"}return null==(T=Q(ka,U,ja))?Sa(U):T},Sa);return va&&
(la=va.remove(la)),la};var wa=b(function(la,Aa){function da(Q,xa){return(new n(xa)).process(Q)}for(var fa in(Aa=la.exports=da).filterXSS=da,Aa.FilterXSS=n,sa)Aa[fa]=sa[fa];for(fa in Da)Aa[fa]=Da[fa];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=la.exports)});wa.filterXSS;wa.FilterXSS;return function(){function la(Aa,da){var fa,Q=this;this.arcgisWhiteList={a:["href","target","style"],img:"src width height border alt style".split(" "),
video:"autoplay controls height loop muted poster preload width".split(" "),audio:["autoplay","controls","loop","muted","preload"],source:["media","src","type"],span:["style"],table:"width height cellpadding cellspacing border style".split(" "),div:["style","align"],font:["size","color","style"],tr:["height","valign","align","style"],td:"height width valign align colspan rowspan nowrap style".split(" "),th:"height width valign align colspan rowspan nowrap style".split(" "),p:["style"],b:[],strong:[],
i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]};this.allowedProtocols="http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" ");this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(xa,Fa,ca,Sa){return"a"===xa&&"href"===Fa||("img"===xa||"source"===xa)&&"src"===Fa?Q.sanitizeUrl(ca):
wa.safeAttrValue(xa,Fa,ca,Sa)}};Aa&&!da?fa=Aa:Aa&&da?(fa=Object.create(this.arcgisFilterOptions),Object.keys(Aa).forEach(function(xa){"whiteList"===xa?fa.whiteList=Q._extendObjectOfArrays([Q.arcgisWhiteList,Aa.whiteList||{}]):fa[xa]=Aa[xa]})):(fa=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList;this.xssFilterOptions=fa;this._xssFilter=new wa.FilterXSS(fa)}return la.prototype.sanitize=function(Aa,da){switch(void 0===da&&(da={}),typeof Aa){case "number":return isNaN(Aa)||!isFinite(Aa)?
null:Aa;case "boolean":return Aa;case "string":return this._xssFilter.process(Aa);case "object":return this._iterateOverObject(Aa,da);default:if(!da.allowUndefined||void 0!==Aa)return null}},la.prototype.sanitizeUrl=function(Aa){var da=this._trim(Aa.substring(0,Aa.indexOf(":")));return"/"===Aa||"#"===Aa||"#"===Aa[0]||-1<this.allowedProtocols.indexOf(da.toLowerCase())?wa.escapeAttrValue(Aa):""},la.prototype.validate=function(Aa,da){void 0===da&&(da={});da=this.sanitize(Aa,da);return{isValid:Aa===da,
sanitized:da}},la.prototype._extendObjectOfArrays=function(Aa){var da={};return Aa.forEach(function(fa){Object.keys(fa).forEach(function(Q){Array.isArray(fa[Q])&&Array.isArray(da[Q])?da[Q]=da[Q].concat(fa[Q]):da[Q]=fa[Q]})}),da},la.prototype._iterateOverObject=function(Aa,da){var fa=this;void 0===da&&(da={});try{var Q=!1,xa=void 0;if(Array.isArray(Aa))xa=Aa.reduce(function(Fa,ca){var Sa=fa.validate(ca,da);return Sa.isValid?Fa.concat([ca]):(Q=!0,Fa.concat([Sa.sanitized]))},[]);else{if(!v(Aa))return da.allowUndefined&&
void 0===Aa?void 0:null;xa=Object.keys(Aa).reduce(function(Fa,ca){var Sa=Aa[ca],Qa=fa.validate(Sa,da);return Qa.isValid?Fa[ca]=Sa:(Q=!0,Fa[ca]=Qa.sanitized),Fa},{})}return Q?xa:Aa}catch(Fa){return null}},la.prototype._trim=function(Aa){return String.prototype.trim?Aa.trim():Aa.replace(/(^\s*)|(\s*$)/g,"")},la}()})},"arcgisonline/map/utils/deleteMapStorageNoFeedback":function(){define(["dojo/Deferred"],function(b){return function(){var y=new b;sessionStorage.removeItem("Esri_webmap");y.resolve(!0);
return y}})},"arcgisonline/telemetry":function(){define(["require","exports","tslib","./esriGeowConfig","telemetry/telemetry.dojo.min"],function(b,y,q,a,h){Object.defineProperty(y,"__esModule",{value:!0});a=q.__importDefault(a);h=q.__importDefault(h);b=function(){function e(){}e.init=function(g,f){var m;if(this._instance)return this._instance;this._envCredentials=JSON.parse(atob(a.default.telemetryConfig||"Int9Ig\x3d\x3d"));if(JSON.stringify(this._envCredentials)!==JSON.stringify("{}"))return f=new h.default({disabled:!(a.default.usageTrackingEnabled&&
!g.disabled&&!g.config.isPortal),portal:g.config,amazon:this._getAmazonCredentials(g)}),"logPageView"in g&&!0!==g.logPageView||f.logPageView(null===(m=null===window||void 0===window?void 0:window.location)||void 0===m?void 0:m.href),this._instance=f};e._getAmazonCredentials=function(g){var f=this._getEnvironment(g.config.portalHostname);return{userPoolID:this._envCredentials[f].userPoolID,app:{name:g.name||"Arcgis Online",id:this._envCredentials[f].appId,version:g.config.currentVersion||"5.2"}}};
e._getEnvironment=function(g){g=g.replace("www.","");return"arcgis.com"===g&&"production"||"qaext.arcgis.com"===g&&"qa"||"dev"};return e}();y.default=b})},"tslib/tslib":function(){var b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E;(function(w){function D(v,B){v!==r&&("function"===typeof Object.create?Object.defineProperty(v,"__esModule",{value:!0}):v.__esModule=!0);return function(C,F){return v[C]=B?B(C,F):F}}var r="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};
"function"===typeof define&&define.amd?define("tslib",["exports"],function(v){w(D(r,D(v)))}):"object"===typeof module&&"object"===typeof module.exports?w(D(r,D(module.exports))):w(D(r))})(function(w){var D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,v){r.__proto__=v}||function(r,v){for(var B in v)v.hasOwnProperty(B)&&(r[B]=v[B])};b=function(r,v){function B(){this.constructor=r}D(r,v);r.prototype=null===v?Object.create(v):(B.prototype=v.prototype,new B)};y=Object.assign||function(r){for(var v,
B=1,C=arguments.length;B<C;B++){v=arguments[B];for(var F in v)Object.prototype.hasOwnProperty.call(v,F)&&(r[F]=v[F])}return r};q=function(r,v){var B={},C;for(C in r)Object.prototype.hasOwnProperty.call(r,C)&&0>v.indexOf(C)&&(B[C]=r[C]);if(null!=r&&"function"===typeof Object.getOwnPropertySymbols){var F=0;for(C=Object.getOwnPropertySymbols(r);F<C.length;F++)0>v.indexOf(C[F])&&Object.prototype.propertyIsEnumerable.call(r,C[F])&&(B[C[F]]=r[C[F]])}return B};a=function(r,v,B,C){var F=arguments.length,
G=3>F?v:null===C?C=Object.getOwnPropertyDescriptor(v,B):C,H;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)G=Reflect.decorate(r,v,B,C);else for(var J=r.length-1;0<=J;J--)if(H=r[J])G=(3>F?H(G):3<F?H(v,B,G):H(v,B))||G;return 3<F&&G&&Object.defineProperty(v,B,G),G};h=function(r,v){return function(B,C){v(B,C,r)}};e=function(r,v){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(r,v)};g=function(r,v,B,C){return new (B||(B=Promise))(function(F,
G){function H(K){try{I(C.next(K))}catch(R){G(R)}}function J(K){try{I(C["throw"](K))}catch(R){G(R)}}function I(K){K.done?F(K.value):(new B(function(R){R(K.value)})).then(H,J)}I((C=C.apply(r,v||[])).next())})};f=function(r,v){function B(K){return function(R){return C([K,R])}}function C(K){if(G)throw new TypeError("Generator is already executing.");for(;F;)try{if(G=1,H&&(J=K[0]&2?H["return"]:K[0]?H["throw"]||((J=H["return"])&&J.call(H),0):H.next)&&!(J=J.call(H,K[1])).done)return J;if(H=0,J)K=[K[0]&2,
J.value];switch(K[0]){case 0:case 1:J=K;break;case 4:return F.label++,{value:K[1],done:!1};case 5:F.label++;H=K[1];K=[0];continue;case 7:K=F.ops.pop();F.trys.pop();continue;default:if(!(J=F.trys,J=0<J.length&&J[J.length-1])&&(6===K[0]||2===K[0])){F=0;continue}if(3===K[0]&&(!J||K[1]>J[0]&&K[1]<J[3]))F.label=K[1];else if(6===K[0]&&F.label<J[1])F.label=J[1],J=K;else if(J&&F.label<J[2])F.label=J[2],F.ops.push(K);else{J[2]&&F.ops.pop();F.trys.pop();continue}}K=v.call(r,F)}catch(R){K=[6,R],H=0}finally{G=
J=0}if(K[0]&5)throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}var F={label:0,sent:function(){if(J[0]&1)throw J[1];return J[1]},trys:[],ops:[]},G,H,J,I;return I={next:B(0),"throw":B(1),"return":B(2)},"function"===typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I};m=function(r,v){for(var B in r)v.hasOwnProperty(B)||(v[B]=r[B])};l=function(r){var v="function"===typeof Symbol&&r[Symbol.iterator],B=0;return v?v.call(r):{next:function(){r&&B>=r.length&&(r=void 0);return{value:r&&r[B++],done:!r}}}};
d=function(r,v){var B="function"===typeof Symbol&&r[Symbol.iterator];if(!B)return r;r=B.call(r);var C,F=[];try{for(;(void 0===v||0<v--)&&!(C=r.next()).done;)F.push(C.value)}catch(H){var G={error:H}}finally{try{C&&!C.done&&(B=r["return"])&&B.call(r)}finally{if(G)throw G.error;}}return F};c=function(){for(var r=[],v=0;v<arguments.length;v++)r=r.concat(d(arguments[v]));return r};k=function(){for(var r=0,v=0,B=arguments.length;v<B;v++)r+=arguments[v].length;r=Array(r);var C=0;for(v=0;v<B;v++)for(var F=
arguments[v],G=0,H=F.length;G<H;G++,C++)r[C]=F[G];return r};t=function(r){return this instanceof t?(this.v=r,this):new t(r)};n=function(r,v,B){function C(W){I[W]&&(K[W]=function(P){return new Promise(function(S,L){1<R.push([W,P,S,L])||F(W,P)})})}function F(W,P){try{var S=I[W](P);S.value instanceof t?Promise.resolve(S.value.v).then(G,H):J(R[0][2],S)}catch(L){J(R[0][3],L)}}function G(W){F("next",W)}function H(W){F("throw",W)}function J(W,P){(W(P),R.shift(),R.length)&&F(R[0][0],R[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var I=B.apply(r,v||[]),K,R=[];return K={},C("next"),C("throw"),C("return"),K[Symbol.asyncIterator]=function(){return this},K};u=function(r){function v(F,G){B[F]=r[F]?function(H){return(C=!C)?{value:t(r[F](H)),done:"return"===F}:G?G(H):H}:G}var B,C;return B={},v("next"),v("throw",function(F){throw F;}),v("return"),B[Symbol.iterator]=function(){return this},B};x=function(r){function v(G){F[G]=r[G]&&function(H){return new Promise(function(J,I){H=r[G](H);B(J,I,H.done,H.value)})}}function B(G,H,J,I){Promise.resolve(I).then(function(K){G({value:K,
done:J})},H)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=r[Symbol.asyncIterator],F;return C?C.call(r):(r="function"===typeof l?l(r):r[Symbol.iterator](),F={},v("next"),v("throw"),v("return"),F[Symbol.asyncIterator]=function(){return this},F)};A=function(r,v){Object.defineProperty?Object.defineProperty(r,"raw",{value:v}):r.raw=v;return r};z=function(r){if(r&&r.__esModule)return r;var v={};if(null!=r)for(var B in r)Object.hasOwnProperty.call(r,B)&&(v[B]=
r[B]);v["default"]=r;return v};E=function(r){return r&&r.__esModule?r:{"default":r}};w("__extends",b);w("__assign",y);w("__rest",q);w("__decorate",a);w("__param",h);w("__metadata",e);w("__awaiter",g);w("__generator",f);w("__exportStar",m);w("__values",l);w("__read",d);w("__spread",c);w("__spreadArrays",k);w("__await",t);w("__asyncGenerator",n);w("__asyncDelegator",u);w("__asyncValues",x);w("__makeTemplateObject",A);w("__importStar",z);w("__importDefault",E)})},"arcgisonline/esriGeowConfig":function(){define([],
function(){return window.esriGeowConfig||{}})},"telemetry/telemetry.dojo.min":function(){define(function(){function b(V,X){var N=new XMLHttpRequest;N.addEventListener("load",function(){X(N.responseText)});N.open(V.method,V.url);Object.keys(V.headers).forEach(function(Y){N.setRequestHeader(Y,V.headers[Y])});N.send(V.body)}function y(V,X){var N=w.get(C);if(N&&Date.now()/1E3<N.Expiration)return X(N);q(V,function(Y){w.set(C,Y);X(Y)})}function q(V,X){var N=B({},F);N.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetId";
N.body=JSON.stringify({IdentityPoolId:V});b(N,function(Y){a(JSON.parse(Y),X)})}function a(V,X){var N=B({},F);N.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetCredentialsForIdentity";N.body=JSON.stringify({IdentityId:V.IdentityId});b(N,function(Y){Y=JSON.parse(Y);X(Y.Credentials)})}function h(){var V=void 0,X=w.get(H);var N=((!X||Date.now()>X.expiration)&&(V=!0,X={id:Math.floor(17592186044416*(1+Math.random())).toString(16),startTimestamp:(new Date).toISOString()}),X.expiration=Date.now()+G,
w.set(H,X),V&&(X.new=!0),X);X=w.get(J);V=(X||(X=e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e(),w.set(J,X)),X);return{session:N,id:V}}function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function g(V,X){var N={host:X.uri.host,"content-type":V.config.defaultContentType,accept:V.config.defaultAcceptType,"x-amz-date":m(X.signDate)};X.request.method=X.request.method.toUpperCase();X.request.body?X.payload=X.request.body:X.request.data&&V.payloadSerializer?X.payload=V.payloadSerializer(X.request.data):
delete N["content-type"];X.request.headers=l(N,Object.keys(X.request.headers||{}).reduce(function(Y,ia){return Y[ia.toLowerCase()]=X.request.headers[ia],Y},{}));X.sortedHeaderKeys=Object.keys(X.request.headers).sort();X.request.headers["content-type"]&&(X.request.headers["content-type"]=X.request.headers["content-type"].split(";")[0]);"object"===D(X.request.params)&&l(X.uri.queryParams,X.request.params)}function f(V,X){X.signedHeaders=X.sortedHeaderKeys.map(function(N){return N.toLowerCase()}).join(";");
X.canonicalRequest=String(X.request.method).toUpperCase()+"\n"+encodeURI(X.uri.path)+"\n"+Object.keys(X.uri.queryParams).sort().map(function(N){return encodeURIComponent(N)+"\x3d"+encodeURIComponent(X.uri.queryParams[N])}).join("\x26")+"\n"+X.sortedHeaderKeys.map(function(N){return N.toLocaleLowerCase()+":"+X.request.headers[N]}).join("\n")+"\n\n"+X.signedHeaders+"\n"+V.hasher.hash(X.payload?X.payload:"")}function m(V,X){V=V.toISOString().replace(/[:\-]|\.\d{3}/g,"").substr(0,17);return X?V.substr(0,
8):V}function l(V){return[].slice.call(arguments,1).forEach(function(X){X&&"object"===(void 0===X?"undefined":D(X))&&Object.keys(X).forEach(function(N){var Y=X[N];void 0!==Y&&(null!==Y&&"object"===(void 0===Y?"undefined":D(Y))?(V[N]=Array.isArray(Y)?[]:{},l(V[N],Y)):V[N]=Y)})}),V}function d(V){var X=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},N=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},Y=h().session;return{eventType:"pageView",timestamp:(new Date).toISOString(),session:{id:Y.id,
startTimestamp:Y.startTimestamp},attributes:B({referrer:document.referrer,hostname:window.location.hostname,path:V||window.location.pathname,pageUrl:V||window.location.pathname,pageName:document.title,previousPageUrl:X.pageUrl,previousPageName:X.pageName},c(N)),metrics:k(N)}}function c(V){var X=B({},V);return delete X.workflow,W.forEach(function(N){return delete X[N]}),Object.keys(X).forEach(function(N){X[N]="json"===N?X[N]?JSON.stringify(X[N]):"null":void 0!==X[N]?X[N].toString():"null"}),X}function k(V){var X=
{};return W.forEach(function(N){V[N]&&(X[N]=V[N])}),X}function t(){var V=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},X=arguments[1];return(new R({region:"us-east-1",service:"mobileanalytics",accessKeyId:V.AccessKeyId,secretAccessKey:V.SecretKey,sessionToken:V.SessionToken})).sign(X)}function n(V,X,N){var Y=h();V=Array.isArray(V)?V:[V];var ia=u(V);y(X,function(oa){try{ia.headers=t(oa,ia),ia.headers["x-amz-Client-Context"]=JSON.stringify({client:{client_id:Y.id,app_title:N.name,app_version_name:N.version||
"unknown"},services:{mobile_analytics:{app_id:N.id}}})}catch(sa){return}b(ia,function(sa){})})}function u(V){return{url:1<arguments.length&&void 0!==arguments[1]?arguments[1]:P,method:"POST",body:JSON.stringify({events:V})}}function x(V){window.ga&&window.ga(function(){V(window.ga.getAll())})}function A(V,X){return E({hitType:"pageview",page:V||window.location.pathname},X,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},3<arguments.length&&void 0!==arguments[3]?arguments[3]:{})}function z(V){return E({hitType:"event",
eventCategory:V.category||"none",eventAction:V.action,eventLabel:V.label},V,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}function E(V,X,N,Y){return Object.keys(N).forEach(function(ia){V["dimension"+N[ia]]=X[ia]}),Object.keys(Y).forEach(function(ia){V["metric"+Y[ia]]=X[ia]}),V}var w={storage:{},memory:!0,get:function(V){var X=void 0;try{X=window.localStorage&&window.localStorage.getItem(V)||this.storage[V]}catch(N){X=this.storage[V]}if(X)try{return JSON.parse(X)}catch(N){}},
set:function(V,X){X=JSON.stringify(X);try{window.localStorage.setItem(V,X)}catch(N){this.memory||(this.memory=!0),this.storage[V]=X}},delete:function(V){try{window.localStorage.removeItem(V)}catch(X){this.memory||(this.memory=!0),delete this.storage[V]}}},D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},r=function(V,X){if(!(V instanceof X))throw new TypeError("Cannot call a class as a function");
},v=function(){function V(X,N){for(var Y=0;Y<N.length;Y++){var ia=N[Y];ia.enumerable=ia.enumerable||!1;ia.configurable=!0;"value"in ia&&(ia.writable=!0);Object.defineProperty(X,ia.key,ia)}}return function(X,N,Y){return N&&V(X.prototype,N),Y&&V(X,Y),X}}(),B=Object.assign||function(V){for(var X=1;X<arguments.length;X++){var N=arguments[X],Y;for(Y in N)Object.prototype.hasOwnProperty.call(N,Y)&&(V[Y]=N[Y])}return V},C="TELEMETRY_COGNITO_CREDENTIALS",F={method:"POST",url:"https://cognito-identity.us-east-1.amazonaws.com/",
headers:{"Content-type":"application/x-amz-json-1.1"}},G=18E5,H="TELEMETRY_SESSION",J="TELEMETRY_CLIENT_ID",I=function(V,X){X={};var N=X.lib={},Y=function(){},ia=N.Base={extend:function(wa){Y.prototype=this;var la=new Y;return wa&&la.mixIn(wa),la.hasOwnProperty("init")||(la.init=function(){la.$super.init.apply(this,arguments)}),la.init.prototype=la,la.$super=this,la},create:function(){var wa=this.extend();return wa.init.apply(wa,arguments),wa},init:function(){},mixIn:function(wa){for(var la in wa)wa.hasOwnProperty(la)&&
(this[la]=wa[la]);wa.hasOwnProperty("toString")&&(this.toString=wa.toString)},clone:function(){return this.init.prototype.extend(this)}},oa=N.WordArray=ia.extend({init:function(wa,la){wa=this.words=wa||[];this.sigBytes=void 0!=la?la:4*wa.length},toString:function(wa){return(wa||Ba).stringify(this)},concat:function(wa){var la=this.words,Aa=wa.words,da=this.sigBytes;if(wa=wa.sigBytes,this.clamp(),da%4)for(var fa=0;fa<wa;fa++)la[da+fa>>>2]|=(Aa[fa>>>2]>>>24-fa%4*8&255)<<24-(da+fa)%4*8;else if(65535<
Aa.length)for(fa=0;fa<wa;fa+=4)la[da+fa>>>2]=Aa[fa>>>2];else la.push.apply(la,Aa);return this.sigBytes+=wa,this},clamp:function(){var wa=this.words,la=this.sigBytes;wa[la>>>2]&=4294967295<<32-la%4*8;wa.length=V.ceil(la/4)},clone:function(){var wa=ia.clone.call(this);return wa.words=this.words.slice(0),wa},random:function(wa){for(var la=[],Aa=0;Aa<wa;Aa+=4)la.push(4294967296*V.random()|0);return new oa.init(la,wa)}}),sa=X.enc={},Ba=sa.Hex={stringify:function(wa){var la=wa.words;wa=wa.sigBytes;for(var Aa=
[],da=0;da<wa;da++){var fa=la[da>>>2]>>>24-da%4*8&255;Aa.push((fa>>>4).toString(16));Aa.push((15&fa).toString(16))}return Aa.join("")},parse:function(wa){for(var la=wa.length,Aa=[],da=0;da<la;da+=2)Aa[da>>>3]|=parseInt(wa.substr(da,2),16)<<24-da%8*4;return new oa.init(Aa,la/2)}},Da=sa.Latin1={stringify:function(wa){var la=wa.words;wa=wa.sigBytes;for(var Aa=[],da=0;da<wa;da++)Aa.push(String.fromCharCode(la[da>>>2]>>>24-da%4*8&255));return Aa.join("")},parse:function(wa){for(var la=wa.length,Aa=[],
da=0;da<la;da++)Aa[da>>>2]|=(255&wa.charCodeAt(da))<<24-da%4*8;return new oa.init(Aa,la)}},pa=sa.Utf8={stringify:function(wa){try{return decodeURIComponent(escape(Da.stringify(wa)))}catch(la){throw Error("Malformed UTF-8 data");}},parse:function(wa){return Da.parse(unescape(encodeURIComponent(wa)))}},ra=N.BufferedBlockAlgorithm=ia.extend({reset:function(){this._data=new oa.init;this._nDataBytes=0},_append:function(wa){"string"==typeof wa&&(wa=pa.parse(wa));this._data.concat(wa);this._nDataBytes+=
wa.sigBytes},_process:function(wa){var la=this._data,Aa=la.words,da=la.sigBytes,fa=this.blockSize,Q=da/(4*fa);Q=wa?V.ceil(Q):V.max((0|Q)-this._minBufferSize,0);if(wa=Q*fa,da=V.min(4*wa,da),wa){for(var xa=0;xa<wa;xa+=fa)this._doProcessBlock(Aa,xa);xa=Aa.splice(0,wa);la.sigBytes-=da}return new oa.init(xa,da)},clone:function(){var wa=ia.clone.call(this);return wa._data=this._data.clone(),wa},_minBufferSize:0});N.Hasher=ra.extend({cfg:ia.extend(),init:function(wa){this.cfg=this.cfg.extend(wa);this.reset()},
reset:function(){ra.reset.call(this);this._doReset()},update:function(wa){return this._append(wa),this._process(),this},finalize:function(wa){return wa&&this._append(wa),this._doFinalize()},blockSize:16,_createHelper:function(wa){return function(la,Aa){return(new wa.init(Aa)).finalize(la)}},_createHmacHelper:function(wa){return function(la,Aa){return(new ya.HMAC.init(wa,Aa)).finalize(la)}}});var ya=X.algo={};return X}(Math);!function(V){var X=I.lib,N=X.WordArray,Y=X.Hasher;X=I.algo;for(var ia=[],
oa=[],sa=function(la){return 4294967296*(la-(0|la))|0},Ba=2,Da=0;64>Da;){a:{var pa=Ba;for(var ra=V.sqrt(pa),ya=2;ya<=ra;ya++)if(!(pa%ya)){pa=!1;break a}pa=!0}pa&&(8>Da&&(ia[Da]=sa(V.pow(Ba,.5))),oa[Da]=sa(V.pow(Ba,1/3)),Da++);Ba++}var wa=[];X=X.SHA256=Y.extend({_doReset:function(){this._hash=new N.init(ia.slice(0))},_doProcessBlock:function(la,Aa){for(var da=this._hash.words,fa=da[0],Q=da[1],xa=da[2],Fa=da[3],ca=da[4],Sa=da[5],Qa=da[6],va=da[7],T=0;64>T;T++){if(16>T)wa[T]=0|la[Aa+T];else{var ja=wa[T-
15],ka=wa[T-2];wa[T]=((ja<<25|ja>>>7)^(ja<<14|ja>>>18)^ja>>>3)+wa[T-7]+((ka<<15|ka>>>17)^(ka<<13|ka>>>19)^ka>>>10)+wa[T-16]}ja=va+((ca<<26|ca>>>6)^(ca<<21|ca>>>11)^(ca<<7|ca>>>25))+(ca&Sa^~ca&Qa)+oa[T]+wa[T];ka=((fa<<30|fa>>>2)^(fa<<19|fa>>>13)^(fa<<10|fa>>>22))+(fa&Q^fa&xa^Q&xa);va=Qa;Qa=Sa;Sa=ca;ca=Fa+ja|0;Fa=xa;xa=Q;Q=fa;fa=ja+ka|0}da[0]=da[0]+fa|0;da[1]=da[1]+Q|0;da[2]=da[2]+xa|0;da[3]=da[3]+Fa|0;da[4]=da[4]+ca|0;da[5]=da[5]+Sa|0;da[6]=da[6]+Qa|0;da[7]=da[7]+va|0},_doFinalize:function(){var la=
this._data,Aa=la.words,da=8*this._nDataBytes,fa=8*la.sigBytes;return Aa[fa>>>5]|=128<<24-fa%32,Aa[14+(fa+64>>>9<<4)]=V.floor(da/4294967296),Aa[15+(fa+64>>>9<<4)]=da,la.sigBytes=4*Aa.length,this._process(),this._hash},clone:function(){var la=Y.clone.call(this);return la._hash=this._hash.clone(),la}});I.SHA256=Y._createHelper(X);I.HmacSHA256=Y._createHmacHelper(X)}(Math);(function(){var V=I.enc.Utf8;I.algo.HMAC=I.lib.Base.extend({init:function(X,N){X=this._hasher=new X.init;"string"==typeof N&&(N=V.parse(N));
var Y=X.blockSize,ia=4*Y;N.sigBytes>ia&&(N=X.finalize(N));N.clamp();X=this._oKey=N.clone();N=this._iKey=N.clone();for(var oa=X.words,sa=N.words,Ba=0;Ba<Y;Ba++)oa[Ba]^=1549556828,sa[Ba]^=909522486;X.sigBytes=N.sigBytes=ia;this.reset()},reset:function(){var X=this._hasher;X.reset();X.update(this._iKey)},update:function(X){return this._hasher.update(X),this},finalize:function(X){var N=this._hasher;return X=N.finalize(X),N.reset(),N.finalize(this._oKey.clone().concat(X))}})})();var K={region:"eu-west-1",
service:"execute-api",defaultContentType:"application/json",defaultAcceptType:"application/json",payloadSerializerFactory:function(){return function(V){return JSON.stringify(V)}},uriParserFactory:function(){function V(N){return/^\??(.*)$/.exec(N)[1].split("\x26").reduce(function(Y,ia){return ia=/^(.+)=(.*)$/.exec(ia),ia&&(Y[ia[1]]=ia[2]),Y},{})}var X=document?document.createElement("a"):{};return function(N){return X.href=N,{protocol:X.protocol,host:X.host.replace(/^(.*):((80)|(443))$/,"$1"),path:("/"!==
X.pathname.charAt(0)?"/":"")+X.pathname,queryParams:V(X.search)}}},hasherFactory:function(){return{hash:function(V,X){X=l({hexOutput:!0,textInput:!0},X);V=I.SHA256(V);return X.hexOutput?V.toString(I.enc.Hex):V},hmac:function(V,X,N){N=l({hexOutput:!0,textInput:!0},N);V=I.HmacSHA256(X,V,{asBytes:!0});return N.hexOutput?V.toString(I.enc.Hex):V}}}},R=function(){function V(X){r(this,V);this.config=l({},K,X);this.payloadSerializer=this.config.payloadSerializer||this.config.payloadSerializerFactory();this.uriParser=
this.config.uriParserFactory();this.hasher=this.config.hasherFactory();X=this.config.accessKeyId;if(void 0===X||!X)throw Error("AwsSigner requires AWS AccessKeyID");X=this.config.secretAccessKey;if(void 0===X||!X)throw Error("AwsSigner requires AWS SecretAccessKey");}return v(V,[{key:"sign",value:function(X,N){X={request:l({},X),signDate:N||new Date,uri:this.uriParser(X.url)};g(this,X);f(this,X);X.credentialScope=[m(X.signDate,!0),this.config.region,this.config.service,"aws4_request"].join("/");X.stringToSign=
"AWS4-HMAC-SHA256\n"+m(X.signDate)+"\n"+X.credentialScope+"\n"+this.hasher.hash(X.canonicalRequest);N=this.hasher.hmac;var Y=N(N(N(N("AWS4"+this.config.secretAccessKey,m(X.signDate,!0),{hexOutput:!1}),this.config.region,{hexOutput:!1,textInput:!1}),this.config.service,{hexOutput:!1,textInput:!1}),"aws4_request",{hexOutput:!1,textInput:!1});X.signature=N(Y,X.stringToSign,{textInput:!1});X.authorization="AWS4-HMAC-SHA256 Credential\x3d"+this.config.accessKeyId+"/"+X.credentialScope+", SignedHeaders\x3d"+
X.signedHeaders+", Signature\x3d"+X.signature;return{Accept:X.request.headers.accept,Authorization:X.authorization,"Content-Type":X.request.headers["content-type"],"x-amz-date":X.request.headers["x-amz-date"],"x-amz-security-token":this.config.sessionToken||void 0}}}]),V}(),W=["size","duration","position","number","count"],P="https://mobileanalytics.us-east-1.amazonaws.com/2014-06-05/events",S=function(){function V(X){r(this,V);this.name="amazon";B(this,X);h().session.new&&!X.test&&this.logEvent({eventType:"_session.start"})}
return v(V,[{key:"logPageView",value:function(X,N){X=d(X,this.previousPage,N);n(X,this.userPoolID,this.app);this.previousPage=X.attributes}},{key:"logEvent",value:function(X){var N=h().session;X={eventType:X.eventType||"other",timestamp:(new Date).toISOString(),session:{id:N.id,startTimestamp:N.startTimestamp},attributes:B({referrer:document.referrer,hostname:window.location.hostname,path:window.location.pathname},c(X)),metrics:k(X)};n(X,this.userPoolID,this.app)}}]),V}(),L=function(){function V(){var X=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};r(this,V);this.name="google";B(this,X)}return v(V,[{key:"logPageView",value:function(X,N){var Y=A(X,N,this.dimensions,this.metrics);x(function(ia){ia.forEach(function(oa){oa.send(Y)})})}},{key:"logEvent",value:function(X){var N=z(X,this.dimensions,this.metrics);x(function(Y){Y.forEach(function(ia){ia.send(N)})})}}]),V}(),aa=function(V){if(V)return I.SHA256(V).toString(I.enc.Hex)},ba="esri.com esriuk.com esri.de esri.ca esrifrance.fr esri.nl esri-portugal.pt esribulgaria.com esri.fi esri.kr esrimalaysia.com.my esri.es esriaustralia.com.au esri-southafrica.com esri.cl esrichina.com.cn esri.co esriturkey.com.tr geodata.no esriitalia.it esri.pl".split(" "),
O=function(){var V=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},X=V.portal||{};return!V.disabled&&"1"!==navigator.doNotTrack&&"1"!==window.doNotTrack&&(void 0===X.eueiEnabled||!1!==X.eueiEnabled)&&(!(!X.eueiEnabled||!X.user||X.user.orgId!==X.id)||!(!X.user||X.user.orgId||"US"!==X.ipCntryCode)||!X.user&&"US"===X.ipCntryCode||!(0<Object.keys(X).length))};return function(){function V(X){r(this,V);try{(this.trackers=[],this.workflows={},this.test=X.test,this.debug=X.debug,this.disabled=!O(X),
X.portal&&X.portal.user)?this.setUser(X.portal.user,(X.portal.subscriptionInfo||{}).type):X.user&&this.setUser(X.user),this.disabled||this._initTrackers(X)}catch(N){this.disabled=!0}}return v(V,[{key:"_initTrackers",value:function(X){if(X.amazon){var N=new S(X.amazon);this.trackers.push(N)}X.google&&(X=new L(X.google),this.trackers.push(X))}},{key:"setUser",value:function(){var X=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},N=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Public";
this.user=X="string"==typeof X?{username:X}:X;this.user.accountType=N;var Y=void 0;if(X.email&&X.email.split){var ia=X.email.split("@")[1];Y=0<ba.filter(function(oa){return ia===oa}).length}(Y||-1<["In House","Demo and Marketing"].indexOf(N))&&(this.user.internalUser=!0)}},{key:"logPageView",value:function(X){var N=this.preProcess(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return this.debug||!this.test||this.disabled?!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(Y){try{Y.logPageView(X,
N)}catch(ia){}}),!0):N}},{key:"logEvent",value:function(){var X=this.preProcess(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return!this.debug&&this.test?X:!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(N){try{N.logEvent(X)}catch(Y){}}),!0)}},{key:"logError",value:function(){var X=B({eventType:"error"},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});this.logEvent(X)}},{key:"startWorkflow",value:function(X){var N=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{},Y={name:X,start:Date.now(),steps:[],workflowId:Math.floor(17592186044416*(1+Math.random())).toString(16)};this._saveWorkflow(Y);N=B({name:X,step:"start"},N);return this._logWorkflow(N),Y}},{key:"stepWorkflow",value:function(X,N){var Y=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Y=B({name:X,step:N,details:"string"==typeof options?Y:Y.details},Y);this._logWorkflow(Y)}},{key:"endWorkflow",value:function(X){var N=B({name:X,step:"finish"},1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{});this._logWorkflow(N)}},{key:"cancelWorkflow",value:function(X){var N=B({name:X,step:"cancel"},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});this._logWorkflow(N)}},{key:"getWorkflow",value:function(X){if(X=w.get("TELEMETRY-WORKFLOW:"+X)){if(18E5>Date.now()-X.start)return X;this._deleteWorkflow(X)}}},{key:"_saveWorkflow",value:function(X){w.set("TELEMETRY-WORKFLOW:"+X.name,X)}},{key:"_deleteWorkflow",value:function(X){w.delete("TELEMETRY-WORKFLOW:"+X.name)}},{key:"_logWorkflow",
value:function(){var X=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};X=this.preProcess(X);var N=this.getWorkflow(X.name);N||(this.startWorkflow(X.name),N=this.getWorkflow(X.name));N.steps.push(X.step);N.duration=(Date.now()-N.start)/1E3;-1<["cancel","finish"].indexOf(X.step)?this._deleteWorkflow(N):this._saveWorkflow(N);X=B(X,{eventType:"workflow",category:X.name,action:X.step,label:X.details,duration:N.duration,workflowId:N.workflowId});this.logEvent(X)}},{key:"preProcess",value:function(){var X=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},N={};return this.user&&(N={user:aa(this.user.username),orgId:aa(this.user.orgId),lastLogin:this.user.lastLogin,userSince:this.user.created,internalUser:this.user.internalUser||!1,accountType:this.user.accountType}),B({},X,N)}}]),V}()})},"arcgisonline/sharing/geow/Community":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util"],function(b,y,q){b.provide("arcgisonline.sharing.geow.Community");b.require("arcgisonline.sharing.util");
arcgisonline.sharing.geow.Community={util:arcgisonline.sharing.util,i18n:function(){if(this._i18n)return this._i18n;this._i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this._i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").community);return this._i18n},getProfile:function(a,h,e){if(null===a)return b.publish("globalMessage",[{message:this.i18n().noUser,type:"error",duration:0}]),null;this.util.getJson(esriGeowConfig.restBaseUrl+"community/users/"+a,h,null)},getProfileThumbnailUrl:function(a,
h){if(null!==a.thumbnail){var e=this.util.getToken();return h?(h=esriGeowConfig.restBaseUrl,esriGeowConfig.useDefaultIdentityStore&&(h=!1!==esriGeowConfig.useSSL?this.util.getSecureUrl(h):h),h+"community/users/"+a.username+"/info/"+a.thumbnail+(null===e||0===e.length?"":"?token\x3d"+e)):esriGeowConfig.restBaseUrl+"community/users/"+a.username+"/info/"+a.thumbnail+(null===e||0===e.length?"":"?token\x3d"+e)}return null},updateProfile:function(a,h,e){e=this.util.getUser();null==e&&b.publish("globalMessage",
[{message:this.i18n().mustLogIn,type:"error",duration:0}]);e=e.username||e.email;e=this.util.getSecureUrl(esriGeowConfig.restBaseUrl)+"community/users/"+e+"/update";this.util.postForm(a,e,h)},updateProfileByUser:function(a,h,e){null!=this.util.getUser()&&(e=this.util.getSecureUrl(esriGeowConfig.restBaseUrl)+"community/users/"+a.username.value+"/update",this.util.postForm(a,e,h))},getUserGroups:function(a,h){var e=this.util.getUser();(e=e&&(e.username||e.email))?a=this.getUserGroupsByUser(e,a,h):(a=
new b.Deferred,a.resolve());return a},getUserGroupsByUser:function(a,h,e){a=esriGeowConfig.restBaseUrl+"community/users/"+a;var g=new b.Deferred;this.util.request({url:a}).then(b.hitch(this,function(f){g.resolve(f);h&&h(f)}),b.hitch(this,function(f){g.reject(f);e&&e(f)}));return g},getGroup:function(a,h,e){this.util.getJson(esriGeowConfig.restBaseUrl+"community/groups/"+a,h,e)},createGroup:function(a,h,e){null!=this.util.getUser()&&this.util.postForm(a,esriGeowConfig.restBaseUrl+"community/createGroup",
h,e)},updateGroup:function(a,h,e,g){null!=this.util.getUser()&&this.util.postForm(h,esriGeowConfig.restBaseUrl+"community/groups/"+a+"/update",e,g)},deleteGroup:function(a,h,e){null!=this.util.getUser()&&this.util.postJson("",esriGeowConfig.restBaseUrl+"community/groups/"+a.id+"/delete",h,e)},reassignGroup:function(a,h,e,g){null!=this.util.getUser()&&this.util.postJson({targetUsername:h},esriGeowConfig.restBaseUrl+"community/groups/"+a.id+"/reassign",e,g)},leaveGroup:function(a,h,e){this.util.postJson("",
esriGeowConfig.restBaseUrl+"community/groups/"+a.id+"/leave",h,e)},inviteToGroup:function(a,h,e){null!=this.util.getUser()&&this.util.globalMessage("TODO: not implemented in rest","error",0)},searchGroups:function(a,h,e){this.util.getJson(esriGeowConfig.restBaseUrl+"community/groups?q\x3d"+a,h)},searchToStore:function(a){var h=[];b.forEach(a.results,function(e,g){e={id:g,title:this._getGroupTitleLink(e),owner:e.owner,description:e.description,imageUrl:e.imageUrl,tags:e.keywords,created:e.created};
h[g]=e},this);return new b.data.ItemFileReadStore({data:{identifier:"id",label:"item",items:h}})},_getGroupTitleLink:function(a){return"\x3ca href\x3d'group.html?owner\x3d"+a.owner+"\x26title\x3d"+encodeURIComponent(a.title)+'\' class\x3d"esriGroupTitle" alt\x3d'+this.i18n().viewGroupDetails+" title\x3d"+this.i18n().viewGroupDetails+"\x3e"+a.title+"\x3c/a\x3e"},getNotifications:function(){arcgisonline.sharing.dijit.dialog.NotificationsDlg.prototype.statics.getInstance().show()},getNotificationsCount:function(){var a=
this.util.getUser();if(null!=a){var h=function(g,f){b.publish("onNotificationCount",[g.notifications.length])},e;this.util.getJson(esriGeowConfig.restBaseUrl+"community/users/"+(a.username||a.email)+"/notifications").then(b.hitch(this,function(g){e=(g&&g.notifications||[]).filter(function(f){return f&&"message_received"!==f.type});h({notifications:e})}))}},deleteNotifictation:function(a){var h=this.util.getUser();null!=h&&this.util.postJson("",esriGeowConfig.restBaseUrl+"community/users/"+(h.username||
h.email)+"/notifications/"+a+"/delete",b.hitch(this,function(e,g){b.publish("onNotificationDelete",[""])}))},updateUserSecure:function(a,h,e,g){g=esriGeowConfig.restBaseUrl;esriGeowConfig.useDefaultIdentityStore&&(g=!1!==esriGeowConfig.useSSL?this.util.getSecureUrl(g):g);this.util.postForm(h,g+"community/users/"+a+"/update",e)},getProvisionedListings:function(a,h,e){return this.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+a+"/provisionedListings",content:{start:h||1,num:e||100}})}}})},
"arcgisonline/pages/portal/Portal":function(){define("require exports tslib ../../esriGeowConfig ./PortalItem ./UserProfiles ../utils/promises ../utils/verified ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/io-query dojo/Stateful dojo/_base/kernel dojo/_base/lang dojo/promise/all esri/arcgis/Portal esri/lang esri/request ../utils/itemsgroups".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);
f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);t=q.__importDefault(t);n=q.__importDefault(n);u=q.__importDefault(u);x=q.__importDefault(x);A=q.__importDefault(A);z=q.__importDefault(z);return function(){function w(D){this.blockedApps=[];this.userProfiles=new e.default({portal:this})}w.prototype.postscript=function(){};w.prototype._getSelf=function(D){var r=this,v=new d.default,B=D+"portals/helpmap";if(this._hasHelpMap)return this.inherited(arguments).then(function(C){a.default.self=
n.default.mixin(a.default.self||{},n.default.clone(C));return C});g.default.eachAlways({selfResult:this.inherited(arguments),helpMapResult:x.default.PortalUtil.request(B,{culture:t.default.locale})}).then(function(C){if(C.selfResult&&C.selfResult.error)v.reject(C.selfResult.error);else{var F={};C.selfResult&&C.selfResult.value&&(F=n.default.mixin(F,C.selfResult.value),C.helpMapResult&&C.helpMapResult.value&&(F=n.default.mixin(F,C.helpMapResult.value)));r._hasHelpMap=!0;a.default.self=n.default.clone(F);
v.resolve(F)}});return v};w.prototype.getPortalUser=function(){return this.portalUser};w.prototype.getEnvironment=function(){var D=this.customBaseUrl;D=null===D||void 0===D?void 0:D.split(".")[0].replace("maps","");return-1<(null===D||void 0===D?void 0:D.indexOf("dev"))?"dev":-1<(null===D||void 0===D?void 0:D.indexOf("qa"))?"qa":""};w.prototype.queryItems=function(D,r,v){var B=this,C,F=new d.default,G=null!==(C=null===D||void 0===D?void 0:D.q)&&void 0!==C?C:D;C=null===G||void 0===G?void 0:G.match(/ownerfolder:([^\s]+)/);
var H=(null===C||void 0===C?0:C.length)?C[0].split(":")[1]:null,J=this.url,I=this.portalUser;C=J+"search";D?(D.categories&&(C=C+"?categories\x3d"+D.categories,delete D.categories),"object"===typeof D&&"bbox"in D&&(D.sortField="bbox",D.srSort="true",D.spatialFilter="true",G=c.default.queryToObject(document.URL.replace(/^[^\?]*\?/,"")),D.srsConfig="srsConfig"in G?G.srsConfig:"offset:.5,scale:2"),this._queryPortal(C,x.default.PortalUtil.formatQueryParams({},D,r),x.default.PortalItem).then(function(K){return E.getAllItemsGroups({response:K,
contentUser:v,portalUser:I,url:J})}).then(function(K){return B.toPortalItems(H,B.isAdminView,K)}).then(function(K){return F.resolve(n.default.mixin(K,{total:K.total,nextStart:K.nextQueryParams.start,start:K.queryParams.start}))})):F.resolve({items:[],results:[],total:0,nextStart:-1,start:-1});return x.default.PortalResult(F)};w.prototype.getUserProfile=function(D){var r=new d.default;this.userProfiles.find(D).then(function(v){return r.resolve(v)});return r};w.prototype.getFederatedServers=function(){var D=
new d.default,r=this.getPortalUser(),v=this.url+"portals/self/servers/";r?m.default.request({url:v}).then(function(B){m.default.setFederatedServers((null===B||void 0===B?void 0:B.servers)||[]);D.resolve(B&&B.servers?B:null)}):D.resolve(null);return D};w.prototype.getHostedFederatedServers=function(){var D=new d.default,r;this.getFederatedServers().then(function(v){var B;r=(null!==(B=null===v||void 0===v?void 0:v.servers)&&void 0!==B?B:[]).filter(function(C){return C.isHosted});D.resolve(r[0])});return D};
w.prototype.getManagedServers=function(){var D=new d.default,r,v;this.getHostedFederatedServers().then(function(B){B?(r=B.adminUrl+"/admin/data/findItems",m.default.request({url:r,content:{managed:!0}},{useProxy:m.default.shouldUseProxy(r)}).then(function(C){var F;v=(null!==(F=null===C||void 0===C?void 0:C.items)&&void 0!==F?F:C||[]).filter(function(G){var H;return"arcgis data store"===(null===(H=null===G||void 0===G?void 0:G.provider)||void 0===H?void 0:H.toLowerCase())});D.resolve(v)},function(){return D.resolve(null)})):
D.resolve(null)});return D};w.prototype.getIsBackedBySDS=function(){var D,r,v,B,C,F,G,H=new d.default,J=this.getPortalUser(),I=null!==(D=null===J||void 0===J?void 0:J.userRole)&&void 0!==D?D:{},K;A.default.isDefined(this.isBackedBySDS)?H.resolve(this.isBackedBySDS):(D=(null===(r=I.isAdmin)||void 0===r?void 0:r.call(I))||(null===(v=I.canManageSecurity)||void 0===v?void 0:v.call(I))||(null===(B=I.canManageServers)||void 0===B?void 0:B.call(I))||(null===(C=I.canUpdateOrgItems)||void 0===C?void 0:C.call(I))||
(null===(F=I.canDeleteOrgItems)||void 0===F?void 0:F.call(I)),this.isPortal&&J&&(D||(null===(G=I.isBasedOnPublisher)||void 0===G?0:G.call(I)))?this.getManagedServers().then(function(R){var W;K=null!==(W=null===R||void 0===R?void 0:R[0])&&void 0!==W?W:null;H.resolve(K?!0:!1)}):(this.isBackedBySDS=!0,H.resolve(!0)));return H};w.prototype.getOrgIsVerified=function(D){var r,v=new d.default;return!D&&A.default.isDefined(this.isVerified)?(v.resolve(this.isVerified),v):this.queryItems({q:"(orgid: "+(D||
(null===(r=this.portalUser)||void 0===r?void 0:r.orgId))+" AND contentstatus: public_authoritative)",num:1}).then(function(B){return!!B.total})};w.prototype.getCategories=function(){var D=new d.default;m.default.request({url:this.url+"portals/"+this.id+"/categorySchema"}).then(function(r){return D.resolve(r.categorySchema)},function(r){return D.reject(r)});return D};w.prototype.getRegions=function(){var D,r,v=new d.default,B=(null===(D=this.portalUser)||void 0===D?void 0:D.culture)||(null===(r=this.portal)||
void 0===r?void 0:r.culture)||t.default.locale||"en",C;m.default.request({url:this.portalUrl+"portals/regions",content:{culture:B}}).then(function(F){F&&F.length&&(C=F.sort(function(G,H){return"WO"===G.region?-1:G.localizedName.localeCompare(H.localizedName)}));v.resolve(C)});return v};w.prototype.toPortalItems=function(D,r,v){var B=this,C={},F=new d.default;D&&"root"!==D&&n.default.mixin(C,{folderId:D,ownerFolder:D});r&&(C.isAdminView=!0);this.getBlockedApps().then(function(){var G=v.results.map(function(H){var J=
new h.default(n.default.mixin(H,C,{portal:B}));J.groupData=H.groupData;J.removeBlockedTypes(B.blockedApps);return f.default.setVerifiedInfo(J)});u.default(G).then(function(H){v.items=H;F.resolve(v)},function(H){return 0})});return F};w.prototype.formatThumbnailUrl=function(D){return x.default.PortalUtil.formatUrl(this.portalUrl+"portals/self/resources/"+D)};w.prototype.getLocalizedOrgProperties=function(){var D=this,r,v,B=new d.default,C=a.default.restBaseUrl+"portals/self/resources",F=null===(v=
null===(r=this.portalUser)||void 0===r?void 0:r.credential)||void 0===v?void 0:v.token;r={f:"json"};F&&(r.token=F);z.default({url:C+"/localizedOrgProperties",content:r},{disableIdentityLookup:!0}).then(function(G){G&&!G.code?(D.localizedOrgProperties=G,D.localizedOrgProperties.default||(D.localizedOrgProperties.default={name:D.name,description:null})):D.createLocalizedOrgPropertiesDefault();B.resolve(D.localizedOrgProperties)},function(){D.createLocalizedOrgPropertiesDefault();B.resolve(D.localizedOrgProperties)});
return B};w.prototype.isTrialOrg=function(){var D,r=null===(D=this.subscriptionInfo)||void 0===D?void 0:D.type;return"Trial"===r||"Trial Press"===r||"Trial Developer"===r||"Developer Subscription"===r};w.prototype.isKubernetes=function(){return"ArcGISEnterpriseOnKubernetes"===this.portalDeploymentType};w.prototype.createLocalizedOrgPropertiesDefault=function(){this.localizedOrgProperties={default:{name:this.name,description:null}}};w.prototype.getBlockedApps=function(){var D=this,r,v=new d.default;
if(null===(r=this.portalUser)||void 0===r||!r.orgId)return v.resolve(),v;m.default.request({url:a.default.restBaseUrl+"portals/self/signinSettings"}).then(function(B){D.blockedApps=null===B||void 0===B?void 0:B.blockedApps;v.resolve()},function(){v.resolve()});return v};return w=q.__decorate([l.default(x.default.Portal,k.default)],w)}()})},"arcgisonline/pages/portal/PortalItem":function(){define("require exports tslib ../pageUtil ../getThumbnail ./CommentsUtil ../item/_Info ../utils/arrays ../utils/item ../utils/socialMedia ../../sharing/util ../../esriGeowConfig ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/promise/all dojo/Stateful esri/lang esri/arcgis/Portal ../utils/url".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);t=q.__importDefault(t);n=q.__importDefault(n);u=q.__importDefault(u);x=q.__importDefault(x);A=q.__importDefault(A);z=q.__importDefault(z);return function(){function D(v){var B,C,F,G,H,J;this.portalUser=null!==(C=null===
(B=this.portal)||void 0===B?void 0:B.getPortalUser())&&void 0!==C?C:null;this.title=null!==(F=this.title)&&void 0!==F?F:"";this.snippet=null!==(G=this.snippet)&&void 0!==G?G:"";this.type=this.type||"Unknown";this.displayName=null!==(H=this.displayName)&&void 0!==H?H:"";this.commentsInfo={sortField:"created",sortOrder:"desc",start:0,num:5,comments:[],item:this};this.screenshots=(null===(J=this.screenshots)||void 0===J?0:J.length)?this.screenshots:null;this.thumbnailUrl="Image"!==this.type||this.thumbnail?
this.thumbnailUrl:this.itemDataUrl;this.sourceLabel=this._getSourceLabel();this.scoreCompleteness=this.setScoreCompleteness(this.scoreCompleteness);this.url=this._getAdjustedUrl();this._setAdminFlags();this.setTypeKeywordFlags();this.tags instanceof Array&&-1<this.tags.length&&(this.tags=this.tags.join(","));this.size=this._getAdjustedSize();u.default.mixin(this,{extent:a.default.extentToString(this.extent)});u.default.mixin(this,g.default.getItemInfo(this))}var r=D;D.prototype.postscript=function(){};
D.prototype.getOwnerProfile=function(v,B){var C=this,F=this.owner,G=new t.default;this.ownerProfile?G.resolve(this.ownerProfile):(this.isOwner?(F=new t.default,F.resolve(this.portalUser)):F=this.portal.getUserProfile(F),F.then(function(H){C.isOwner||H.orgId===C.portal.id||(B=v=!1);x.default({folders:C.isAdmin&&B?H.getFolders():null,tags:C.isAdmin&&v?H.getTags():null,contentTags:C.isAdmin&&v?H.getContentTags():null}).then(function(J){u.default.mixin(C,{ownerProfile:H,itemOwner:H});C._setAdminFlags();
G.resolve(H)},function(J){u.default.mixin(C,{ownerProfile:H,itemOwner:H});C._setAdminFlags();G.resolve(H)})}));return G};D.prototype.getComments=function(v,B){var C=this,F=new t.default;this.commentsEnabled&&this.numComments?e.default.fetchComments(v,B,this.commentsInfo).then(function(G){C.commentsInfo=u.default.mixin(C.commentsInfo,G.commentsInfo);C.comments=C.commentsInfo.comments;F.resolve(C.comments)}):F.resolve([]);return F};D.prototype.getRelatedItems=function(v,B){var C=this,F={WMA2Code:1,
MobileApp2Code:1},G,H,J=new t.default;this.relatedItems=this.relatedItems||{};z.default.isDefined(this.relatedItems[v+"_"+B])?J.resolve(this.relatedItems[v+"_"+B].slice(0)):d.default.request({url:this.itemUrl+"/relatedItems",content:{relationshipType:v,direction:B}}).then(function(I){G=(null===I||void 0===I?0:I.relatedItems)?I.relatedItems:null!==I&&void 0!==I?I:[];G=G.map(function(K){return new r(q.__assign(q.__assign({},K),{portal:C.portal}))});H=v in F?(G||[]).shift():G||[];C.relatedItems[v+"_"+
B]=H;J.resolve((null===H||void 0===H?0:H.length)?H.slice(0):H)},function(I){J.reject(I)});return J};D.prototype.getSourceData=function(){var v=this,B=new t.default,C="Scene Service"===this.type||"Map Service"===this.type||"WFS"===this.type,F="Map Service"===this.type,G=C?"Service2Service":this.isRouteLayer?"Service2Route":"Service2Data",H="Service2Service"===G||"Service2Route"===G?"reverse":"forward",J;-1<this.typeKeywords.indexOf("Bulk Published Service")&&(G="DataStore2BPService",H="reverse");this.sourceData?
B.resolve(this.sourceData):this.getRelatedItems(G,H).then(function(I){J=(null===I||void 0===I?0:I.length)?I.shift():null;C?F&&!v._isView(J)||!J?v.getRelatedItems("Service2Data","forward").then(function(K){K=(null===K||void 0===K?0:K.length)?K.shift():J;B.resolve(K)}):B.resolve(J):B.resolve(J)},function(I){B.reject(I)});return B};D.prototype._isView=function(v){return v&&f.default.includes(v.typeKeywords,"View Service")||!1};D.prototype.getResultData=function(){var v=new t.default,B=this.isHostedService?
"Service2Service":"Service2Data";this.getRelatedItems(B,"Service2Service"===B?"forward":"reverse").then(function(C){return v.resolve((null===C||void 0===C?0:C.length)?C:null)});return v};D.prototype.getThumbnail=function(v){var B=this,C=new t.default;this._fetchingThumbnail?setTimeout(function(){B.getThumbnail(!1).then(function(F){return C.resolve(F)})},50):(this._fetchingThumbnail=!0,h.default(this,v).then(function(F){delete B._fetchingThumbnail;F.dataURL?B._updateThumbnail(F).then(function(G){B.set("thumbnailUrl",
G);C.resolve(G)}):(B.set("thumbnailUrl",F),C.resolve(F))}));return C};D.prototype.getData=function(){var v=new t.default;d.default.request({url:this.itemDataUrl}).then(function(B){return v.resolve(B)});return v};D.prototype.canBeDeleted=function(){var v=new t.default;d.default.request({url:this.userItemUrl+"/canDelete"}).then(function(B){return v.resolve(B)},function(B){return v.resolve(B)});return v};D.prototype.setTypeKeywordFlags=function(){var v,B,C,F,G=this.typeKeywords;this.isViewOnly=f.default.includes(G,
"useOnly");this.isOfflineEnabled=f.default.includes(G,"Offline");this.isHostedService=f.default.includes(G,"Hosted Service")&&"Insights Workbook"!==this.type&&"Insights Page"!==this.type;this.isServiceProxy=f.default.includes(G,"Service Proxy");this.isAppProxy=f.default.includes(G,"App Proxy");this.isAppCollector=f.default.includes(["Web Map","Web Scene"],this.type);this.useInCollector=f.default.includes(G,"Collector");this.disableInCollector=f.default.includes(G,"CollectorDisabled");this.isFeatureCollection=
"Feature Collection"===this.type||f.default.includes(G,"Feature Collection");this.isMapNotes="Feature Collection"===this.type&&f.default.includes(G,"Map Notes");this.isTable=f.default.includes(G,"Table");this.hasMetadata=f.default.includes(G,"Metadata");this.isSDS=!this.portal.isPortal||this.portal.isPortal&&f.default.includes(G,"providerSDS");this.isBDS=this.portal.isPortal&&f.default.includes(G,"providerBDS");this.isRegisteredApp=f.default.includes(G,"Registered App");this.hasGeocodeReviewTable=
f.default.includes(G,"Involved Lookup");this.isHostedTemplate=f.default.includes(G,"configurableApp")||f.default.includes(G,"Configurable")&&f.default.includes(G,"createAppWithoutMap");this.isPremium=-1<this.owner.toLowerCase().indexOf("esri")&&this.isPremiumContent;this.requiresCredits=f.default.includes(this.typeKeywords,"Requires Credits");this.typeInfo=u.default.mixin({},this.getTypeInfo(),{premiumTitle:n.default.common[(this.requiresCredits?"premiumcontentcreditstitle":"premiumcontenttitle")+
(this.portal.isPortal?"portal":"")],premiumLabel:n.default.common[this.requiresCredits?"premiumcontent":"subscriptioncontent"]});this.hasKMLItemData="KML"===this.type&&-1<(null===(v=this.url)||void 0===v?void 0:v.indexOf("rest/content/items/"+this.id+"/data"));this.isDataView=f.default.includes(G,"View Service");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(B=this.portalUser)||void 0===B?void 0:B.userRole.canDeleteOrgItems())||!1;this.isLocatorView=this.isServiceProxy&&
f.default.includes(G,"Geocoding filter");this.isRouteLayer=f.default.includes(G,"Route Layer");this.isSpatiotemporal=f.default.includes(G,"Spatiotemporal");this.isMarkup=f.default.includes(G,"Markup");this.isMultiServicesView=f.default.includes(G,"Multi Services View");this.isPhotoLocations="Image Collection"===this.type&&f.default.includes(G,"Photo locations");this.isLocationTrackingView=(this.isLocationTrackingService="Feature Service"===this.type&&f.default.includes(G,"Location Tracking Service"))&&
f.default.includes(G,"Location Tracking View");this.canShowSocialMediaLinks=l.default.canShowSocialMediaLinksOnItems(this.portal);this.isVectorTileService=f.default.includes(G,"Vector Tile Service");this.isUtilityNetwork="Feature Service"===this.type&&f.default.includes(this.typeKeywords,"UtilityNetwork");v=g.default[this.type];B=z.default.isDefined(c.default.newMapViewerEnabled)&&!0===c.default.newMapViewerEnabled;G=!c.default.self.portalProperties||!z.default.isDefined(c.default.self.portalProperties.newMapViewerEnabled)||
!0===c.default.self.portalProperties.newMapViewerEnabled;B&&G&&(this.canOpenInNewMapViewer=-1<(null===(C=null===v||void 0===v?void 0:v.openIn)||void 0===C?void 0:C.indexOf("mapViewer")));this.userItemUrl=null===(F=this.itemUrl)||void 0===F?void 0:F.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/")};D.prototype.addBlockClasses=function(v){var B=this,C,F,G,H;this.blockedApps||(this.blockedApps=null===(C=this.portal)||void 0===C?void 0:C.blockedApps);if(null!==
(F=this.blockedApps)&&void 0!==F&&F.length&&(-1<this.blockedApps.indexOf("survey123")&&v.some(function(J){return-1<["is-surveyForm","is-surveyFormBrowser"].indexOf(J)})&&-1===v.indexOf("survey-blocked")&&v.push("survey-blocked"),-1<this.blockedApps.indexOf("webappbuilder"))){v.some(function(J){return"can-edit-wab"===J})&&-1===v.indexOf("wab-blocked")&&v.push("wab-blocked");if(["Web AppBuilder","WABTemplate"].some(function(J){return B.typeKeywords.some(function(I){return I===J})})||-1<(null===(G=this.url)||
void 0===G?void 0:G.indexOf("webappviewer")))C=v.indexOf("has-url"),-1<C&&v.splice(C,1);-1<(null===(H=this.configureUrl)||void 0===H?void 0:H.indexOf("webappviewer"))&&(v=this.privileges.indexOf("can-configure"),-1<v&&this.privileges.splice(v,1))}};D.prototype.removeBlockedTypes=function(v){var B=this,C;if((null===v||void 0===v?0:v.length)||(null===(C=this.blockedApps)||void 0===C?0:C.length)){(null===v||void 0===v?0:v.length)?this.blockedApps=v:v=this.blockedApps;var F={arcgisInsights:{types:["is-insights"],
blockedType:"insights-blocked",texts:[n.default.itemLinks.openInsights],openIn:["insightsViewer"]},arcgisstorymaps:{types:["is-published-storymap","is-editable-storymap"],blockedType:"storymap-blocked",openIn:["storyMapViewer","configureStoryMap"]},experienceBuilder:{types:["is-published-webExperience","is-published-webExperienceTemplate"],blockedType:"exp-builder-blocked",openIn:["webExperienceViewer"]},HubforArcGIS:{types:["is-hubInitiative","is-hubEvent"],blockedType:"hub-blocked",texts:[n.default.itemLinks.viewInHub,
n.default.itemLinks.openHubInitiative],openIn:["hubEventViewer","hubInitiative"]},opsdashboard:{types:["is-dashboard"],blockedType:"dashboard-blocked",texts:[n.default.itemLinks.dashboardView],openIn:["dashboard"]},survey123:{types:["is-surveyForm","is-surveyFormBrowser"],blockedType:"survey-blocked",openIn:["surveyViewer"],texts:[n.default.itemLinks.openSurvey123]},webappbuilder:{types:["can-edit-wab"],blockedType:"wab-blocked"},Workforce:{types:["is-workforceProject"],blockedType:"workforce-blocked",
texts:[n.default.itemLinks.openWorkforce],openIn:["workforceViewer"]}};Object.keys(F).forEach(function(G){var H;if(-1<v.indexOf(G)){var J=F[G],I=J.types,K=J.blockedType,R=J.texts;J=J.openIn;"arcgisstorymaps"===G&&"StoryMap"===B.type&&(B.defaultOpenText=void 0);I&&(B.types.some(function(W){return I.some(function(P){return P===W})})||(null===(H=B.privileges)||void 0===H?0:H.some(function(W){return I.some(function(P){return P===W})})))&&-1===B.types.indexOf(K)&&(B.types=q.__spreadArrays(B.types,[K]));
if(null===R||void 0===R?0:R.some(function(W){return W===B.defaultOpenText}))B.defaultOpenText=B.defaultOpenIcon=void 0;J&&J.forEach(function(W){W=B.openIn.indexOf(W);-1<W&&B.openIn.splice(W,1)})}});-1<v.indexOf("webappbuilder")&&-1<this.typeKeywords.indexOf("Web AppBuilder")&&(this.defaultOpenText=void 0,this.openIn=[])}};D.prototype._getAdjustedSize=function(){var v=this.isHostedService&&"Feature Service"===this.type&&0<=this.subInfo,B=this.isHostedService&&"Image Service"===this.type&&!f.default.includes(this.typeKeywords,
"Tiled Imagery Layer")&&!f.default.includes(this.typeKeywords,"Elevation 3D Layer")&&0<=this.subInfo;return this.size&&(v||B)?this.size-this.subInfo:this.size};D.prototype._getAdjustedUrl=function(){if(this.url){var v=/^(?:[a-z]+:)?\/\//i.test(this.url)||-1!==this.url.indexOf("../");if(!this.portal.isPortal){var B=void 0;try{B=d.default.parseUrl(this.url)}catch(C){B=this.url}if("public"!==this.access&&d.default.isHostedTemplateItem(this.url))return this.url.replace(B.host,window.location.hostname);
if("KML"===this.type)return this.itemDataUrl&&this.itemDataUrl.replace(B.host,this.portal.portalHostname),this.url.replace(B.host,this.portal.portalHostname)}return this.portal.isPortal&&!v&&(v=d.default.getHomeAppContext(),-1===this.url.indexOf(v))?v+this.url:w.sanitizeServerURL(this.url)}return null};D.prototype._getSourceLabel=function(){var v=this.type,B=this.typeKeywords,C=f.default.includes(B,"Service")||"Feature Collection"===v?n.default.itemProperties.source+" ":"";return"Web Scene"===v?f.default.includes(B,
"ViewingMode-Local")?n.default.common.localWebScene:n.default.common.globalWebScene:C?C+v:v};D.prototype._setAdminFlags=function(){var v,B,C,F,G;this.isOwnedByMyOrg=this.isOwner||(null===(v=this.itemOwner)||void 0===v?void 0:v.orgId)===this.portal.id||this.portalUser&&(null===(B=this.itemOwner)||void 0===B?void 0:B.orgId)&&this.portal&&this.portalUser.orgId===this.portal.id||!1;v=this.isAdminView||(null===(F=null===(C=this.portal)||void 0===C?void 0:C.portalUser)||void 0===F?void 0:F.isOrgAdmin)&&
this.isOwnedByMyOrg;this.isOwner=this.portalUser&&this.owner===this.portalUser.username;this.canUpdate=(this.isAdmin=this.portalUser?this.isOwner||m.default.isItemAdmin(this,this.portal)||v:!1)||this.itemControl&&-1<this.itemControl.indexOf("update");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(G=this.portalUser)||void 0===G?void 0:G.userRole.canDeleteOrgItems())||!1};D.prototype._setContentStatusTo=function(v){return d.default.request({url:this.itemUrl+"/setContentStatus",
content:{status:v,clearEmptyFields:!v}},{usePost:!0})};D.prototype.setScoreCompleteness=function(v){v=parseInt(v,10);return this.scoreCompleteness=10*Math.ceil(v/10)};D.prototype._updateThumbnail=function(v){var B=this,C=new t.default,F=this.itemUrl,G;d.default.request({url:this.userItemUrl+"/updateThumbnail",content:{data:v.dataURL,filename:"ago_downloaded.png"}},{usePost:!0}).then(function(){d.default.request({url:F}).then(function(H){G=new r(q.__assign(q.__assign({},H),{portal:B.portal}));C.resolve(G.thumbnailUrl)})});
return C};return D=r=q.__decorate([k.default(E.PortalItem,A.default)],D)}()})},"arcgisonline/pages/pageUtil":function(){define("require exports tslib ../esriGeowConfig ../map/core/canUseForPublish ./dijit/Alert ./utils/arrays ./utils/strings ./utils/dom ../sharing/util ../sharing/dijit/dialog/DownloadImageDlg dijit/registry dijit/Dialog dojo/_base/lang dojo/_base/kernel dojo/dom-attr dojo/dom-construct dojo/Deferred dojo/json dojo/on dojo/hash dojo/string dojo/number dojo/query dojo/sniff dojo/keys dojo/promise/all dojo/io-query esri/lang esri/arcgis/Portal esri/geometry/Point esri/tileUtils esri/urlUtils esri/tasks/Geoprocessor dojo/i18n!../nls/arcgisonline".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B,C,F,G,H,J,I,K,R,W,P){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);t=q.__importDefault(t);n=q.__importDefault(n);u=q.__importDefault(u);x=q.__importDefault(x);A=q.__importDefault(A);z=q.__importDefault(z);E=q.__importDefault(E);w=q.__importDefault(w);D=q.__importDefault(D);
r=q.__importDefault(r);v=q.__importDefault(v);B=q.__importDefault(B);C=q.__importDefault(C);F=q.__importDefault(F);G=q.__importDefault(G);H=q.__importDefault(H);J=q.__importDefault(J);I=q.__importDefault(I);K=q.__importDefault(K);R=q.__importDefault(R);W=q.__importDefault(W);P=q.__importDefault(P);return function(){function S(){}S.editorDefaults=function(L){return{id:L,"aria-label":L,plugins:["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull",
"|","insertOrderedList","insertUnorderedList","indent","outdent","|","createEsriLink","unlink","insertEsriImage","removeFormat","|","undo","redo","|","viewsourcesanitize","|",{name:"dijit._editor.plugins.FontChoice",command:"fontSize",class:"dijitFontSizeWrap",custom:["2","3","4","5","6"]}],style:"font-family: '"+("vi"===(a.default.userInfo&&a.default.userInfo.culture)?"SST Vietnamese":"Avenir Next")+"', 'Avenir', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif; font-size: 15px;",height:"140px"}};
S.tagDefaults=function(L){return{id:L,minWidth:"100%",maxWidth:"100%",required:!0}};S.getQueryParams=function(){return G.default.queryToObject(window.location.search.slice(1))};S.setQueryParams=function(L,aa){S[aa?"pushCurrentLocation":"replaceCurrentLocation"](window.location.pathname+"?"+G.default.objectToQuery(L)+window.location.hash)};S.updateQueryParams=function(L,aa){S.setQueryParams(q.__assign(q.__assign({},S.getQueryParams()),L),aa)};S.removeQueryParams=function(L,aa){var ba=S.getQueryParams();
L.forEach(function(O){return delete ba[O]});S.setQueryParams(ba,aa)};S.clearAllQueryParams=function(){S.setQueryParams({})};S.replaceCurrentLocation=function(L){history&&history.replaceState&&history.replaceState({},document.title,L)};S.pushCurrentLocation=function(L){null===history||void 0===history?void 0:history.pushState({},document.title,L)};S.applyCSSClassToStringMatch=function(L,aa,ba){var O=aa.indexOf(L),V=aa.slice(0,O),X=aa.slice(O,O+L.length),N=aa.slice(O+L.length);return-1<O?0===O?(L=aa.slice(0,
L.length),'\x3cspan class\x3d"'+ba+'"\x3e'+L+"\x3c/span\x3e"+N):V+'\x3cspan class\x3d"'+ba+'"\x3e'+X+"\x3c/span\x3e"+N:aa};S.isEmptyObject=function(L){for(var aa in L)if(L.hasOwnProperty(aa))return!1;return!0};S.isJson=function(L){try{z.default.parse(L)}catch(aa){return!1}return!0};S.extentToString=function(L){return L=L instanceof Array&&2===L.length&&2===L[0].length&&2===L[1].length?[L[0].join(","),L[1].join(",")].join():L&&L+""||""};S.getClosestValue=function(L,aa,ba){return ba-L>=aa-ba?aa:L};
S.findClosestValue=function(L,aa){if(aa<=L[0])return L[0];if(aa>=L[L.length-1])return L[L.length-1];for(var ba=0,O=L.length,V=0;ba<O;){V=Math.floor((ba+O)/2);if(L[V]===aa)break;if(aa<L[V]){if(0<V&&aa>L[V-1])return S.getClosestValue(L[V-1],L[V],aa);O=V}else{if(V<L.length-1&&aa<L[V+1])return S.getClosestValue(L[V],L[V+1],aa);ba=V+1}}return L[V]};S.isFavorite=function(L){var aa=L.portal,ba=aa.getPortalUser();ba=ba&&ba.favGroupId;var O=new A.default;H.default.isDefined(L.isFavorite)?O.resolve(L.isFavorite):
ba?(L.isFavorite=!1,aa.queryItems('(group:"'+ba+'" AND id:"'+L.id+'")',!0).then(function(V){L.isFavorite=V&&0<V.total;O.resolve(L.isFavorite)},function(){O.resolve(!1)})):(L.isFavorite=!1,O.resolve(!1));return O};S.isConfigurableApplication=function(L){var aa=new A.default,ba=L.owner,O=L.itemData||{},V=L.itemControl&&-1<L.itemControl.indexOf("admin"),X=L.typeKeywords||[],N=X.some(function(Y){return Y.match(/(sourceId#).*/gi)});H.default.isDefined(L.isConfigurableApp)?aa.resolve(L.isConfigurableApp):
L.portal.isPortal&&!L.isOwner&&V&&-1<ba.indexOf("esri_")?(L.isConfigurableApp=!1,aa.resolve(!1)):L.type&&(0===L.type.indexOf("Hub")&&"Hub Initiative Template"!==L.type&&"Hub Event"!==L.type||"Site Application"===L.type)?(L.isConfigurableApp=L.canUpdate,aa.resolve(L.isConfigurableApp)):L.canUpdate&&"Web Mapping Application"===L.type?(L.isConfigurableApp=!1,g.default.includes(X,"WABTemplate")?(L.isConfigurableApp=!1,aa.resolve(!1)):g.default.includes(X,"selfConfigured")?(L.isConfigurableApp=O&&(O.source||
l.default.isHostedTemplateItem(L.url)||!N),aa.resolve(L.isConfigurableApp)):g.default.includes(X,"configurableApp")?(L.isConfigurableApp=!0,aa.resolve(L.isConfigurableApp)):O&&O.source?l.default.request({url:L.portal.url+"content/items/"+O.source+"/data"}).then(function(Y){L.isConfigurableApp=!(!Y||!Y.configurationSettings);aa.resolve(L.isConfigurableApp)},function(){L.isConfigurableApp=!1;aa.resolve(L.isConfigurableApp)}):aa.resolve(!1)):(L.isConfigurableApp=!1,aa.resolve(!1));return aa};S.isFilePublishableByUser=
function(L){var aa=new A.default,ba=L.portal,O=ba.getPortalUser(),V=null===O||void 0===O?void 0:O.userRole,X=ba.supportsHostedServices;O=ba.helperServices&&ba.helperServices.rasterAnalytics&&H.default.isDefined(ba.helperServices.rasterAnalytics.url);var N=V&&V.canCreateItem();N=(X=X&&N&&L.isAdmin)&&V.canPublishTiles();var Y=X&&V.canPublishFeatures();V=X&&V.canPublishScenes();var ia=L.resultData&&L.resultData.length||null;O=ba.isPortal&&X&&O;ba=!ba.isPortal||ba.supportsSceneServices;ba=H.default.isDefined(L.canPublishFile)?
L.canPublishFile:Y&&(g.default.includes(L.types,"is-feature")||g.default.includes(L.types,"is-featureCollection")&&!ia&&!L.isMarkup)||N&&g.default.includes(L.types,"is-tile")||V&&ba&&g.default.includes(L.types,"is-scene-package")||N&&g.default.includes(L.types,"is-vector-tile")||O&&g.default.includes(L.types,"is-image-collection")||X&&g.default.includes(L.typeKeywords,"Photo locations")||X&&g.default.includes(L.types,"is-notebook")?!0:!1;L.canPublishFile=ba;aa.resolve(ba);return aa};S.isServicePublishableByUser=
function(L,aa){var ba=new A.default,O=L.portal.getPortalUser();O=(O=null===O||void 0===O?void 0:O.userRole)&&O.canCreateItem();var V=L.serviceInfo||{},X=L.isSDS;aa=L.isTable&&!aa;var N=L.isLocationTrackingService;aa=!(L.isMultiServicesView||V.isMultiServicesView||!L.isHostedService||"Feature Service"!==L.type||!O||!X||aa||N);L.canPublish=aa;ba.resolve(aa);return ba};S.canPublishTileServiceFromFeatureService=function(L){var aa=new A.default,ba=L.portal.getPortalUser();ba=null===ba||void 0===ba?void 0:
ba.userRole;var O=S.isServicePublishableByUser(L)&&L.isAdmin&&ba.canPublishTiles(),V=g.default.includes(L.typeKeywords,"Spatiotemporal"),X=(L.resultData||[]).filter(function(Y){return"Map Service"===Y.type});ba=L.featureLayers;var N=L.isHostedService&&(ba||[]).every(function(Y){return S.canUseForPublish(L,Y,!0)});S.isServicePublishableByUser(L).then(function(Y){Y=!(!(Y&&O&&N)||V||X&&X.length);L.canPublishTiles=Y;aa.resolve(Y)});return aa};S.canPublishVectorTileServiceFromFeatureService=function(L){var aa=
new A.default,ba=null===a.default||void 0===a.default?void 0:a.default.publishVectorTilesFromFeaturesEnabled,O=(L.resultData||[]).filter(function(V){return"Vector Tile Service"===V.type});S.isServicePublishableByUser(L).then(function(V){V=!(!ba||!V||O&&O.length);L.canPublishVectorTiles=V;aa.resolve(V)});return aa};S.canPublishWFSServiceFromFeatureService=function(L){var aa=new A.default,ba=L.portal,O=ba.getPortalUser();O=null===O||void 0===O?void 0:O.userRole;var V=g.default.includes(L.typeKeywords,
"View Service"),X=!V||V&&!ba.isPortal,N=S.isServicePublishableByUser(L)&&L.isAdmin&&O.canPublishFeatures(),Y=(L.resultData||[]).filter(function(oa){return"WFS"===oa.type}),ia=g.default.includes(L.typeKeywords,"Spatiotemporal");S.isServicePublishableByUser(L).then(function(oa){oa=!(!(oa&&X&&N)||ia||Y&&Y.length);L.canPublishWFS=oa;aa.resolve(oa)});return aa};S.canPublishSceneServiceFromFeatureService=function(L){var aa=this,ba=new A.default,O=L.portal,V=O.getPortalUser();V=null===V||void 0===V?void 0:
V.userRole;var X=S.isServicePublishableByUser(L),N=O&&!O.isPortal&&X&&L.isAdmin&&V.canPublishScenes();O=L.featureLayers||[];var Y=L.isHostedService&&O.every(function(Da){return aa.canUseForPublish(L,Da,!0,"scene")}),ia=L.tables||[],oa=O.every(function(Da){return Da&&"esriGeometryPoint"===Da.geometryType}),sa=O.every(function(Da){return Da&&"esriGeometryMultiPatch"===Da.geometryType}),Ba=(L.resultData||[]).filter(function(Da){return"Scene Service"===Da.type});S.isServicePublishableByUser(L).then(function(Da){Da=
!(!(Da&&N&&Y&&(oa||sa))||Ba&&Ba.length||ia.length||L.hasGeocodeReviewTable);L.canPublishScenes=Da;ba.resolve(Da)});return ba};S.canPublishViewServiceFromFeatureService=function(L){var aa=new A.default,ba=L.portal||{},O=ba.getPortalUser();O=null===O||void 0===O?void 0:O.userRole;var V=L.isAdmin&&O.canPublishFeatures(),X=S.isMultipatchFeatureService(L),N=L.isLocationTrackingService&&!ba.isPortal,Y=g.default.includes(L.typeKeywords,"View Service");S.isServicePublishableByUser(L,!0).then(function(ia){ia=
X||!ia||!V||Y||N?!1:!0;L.canPublishView=ia;aa.resolve(ia)});return aa};S.canPublishImageServiceAsTiled=function(L){var aa,ba=new A.default,O=S.canPublishFromImageService(L),V=null===(aa=L.portal.getPortalUser())||void 0===aa?void 0:aa.userRole.canPublishTiledImagery();L.canPublishImageServiceAsTiled=O&&V&&!S.isTiledOnlyImageryService(L.serviceInfo);ba.resolve(L.canPublishImageServiceAsTiled);return ba};S.canPublishImageServiceAsDynamic=function(L){var aa,ba=new A.default,O=S.canPublishFromImageService(L),
V=null===(aa=L.portal.getPortalUser())||void 0===aa?void 0:aa.userRole.canPublishDynamicImagery();L.canPublishImageServiceAsDynamic=O&&V&&S.isTiledOnlyImageryService(L.serviceInfo);ba.resolve(L.canPublishImageServiceAsDynamic);return ba};S.canEnableAttachments=function(L){var aa=new A.default,ba=L.isDataView,O=L.isLocationTrackingService;ba=H.default.isDefined(L.canEnableAttachments)?L.canEnableAttachments:!(!L.isHostedService||ba||O||!L.canUpdate);L.canEnableAttachments=ba;aa.resolve(ba);return aa};
S.canEditViewAttachments=function(L){H.default.isDefined(L.canEditViewAttachments)||(L.canEditViewAttachments=!!(L.isHostedService&&L.isDataView&&L.canUpdate));return L.canEditViewAttachments};S.canAppendData=function(L){var aa=new A.default,ba=g.default.includes(L.typeKeywords,"View Service"),O=g.default.includes(L.typeKeywords,"Cloud Drive"),V=L.isLocationTrackingService;ba=!O&&!ba&&!V&&L.isAdmin&&L.isHostedService&&(L.portal.isPortal&&L.serviceInfo.supportsAppend||!L.portal.isPortal&&(L.layers||
[]).some(function(X){return X.supportsAppend}));L.canAppendData=ba;aa.resolve(ba);return aa};S.canUseForPublish=function(L,aa,ba,O){L=g.default.find(L.itemData&&L.itemData.layers||[],function(X){return X.id===aa.id});var V=t.default.clone(aa);L&&L.layerDefinition&&(V.drawingInfo=t.default.mixin(V.drawingInfo||{},L.layerDefinition.drawingInfo||{}));return h.default(t.default.mixin({},V),ba,O)};S.canPublishFromImageService=function(L){var aa,ba=L.portal,O=L.isAdmin,V=L.isOwner,X=L.isHostedService,N=
L.serviceInfo;L=L.type;var Y=null===(aa=ba.getPortalUser())||void 0===aa?void 0:aa.userRole;aa=X&&!ba.isPortal;return"Image Service"===L&&(null===N||void 0===N?void 0:N.bandCount)&&(O||V)&&aa&&(null===Y||void 0===Y?void 0:Y.canCreateItem())&&(null===Y||void 0===Y?void 0:Y.canPublishImageCollection())};S.isTiledOnlyImageryService=function(L){L=L.capabilities.split(",").map(function(aa){return aa.toLowerCase().trim()});return g.default.includes(L,"tilesonly")};S.isTiledImageryService=function(L){var aa=
new A.default;L="Image Service"===L.type&&g.default.includesSome(L.typeKeywords,["Elevation 3D Layer","Tiled Imagery"]);aa.resolve(L);return aa};S.isServiceEditableByUser=function(L){var aa=L.isOrgItem,ba=L.isHostedService,O=L.serviceInfo,V=L.canEditService,X=L.portal,N=new A.default,Y=X.getPortalUser();X=(null===Y||void 0===Y?void 0:Y.userRole)&&(null===Y||void 0===Y?void 0:Y.userRole.canEditFeaturesFullControl());aa=Y&&aa;Y=-1<((null===O||void 0===O?void 0:O.capabilities)||"").indexOf("Editing");
O=null===O||void 0===O?void 0:O.isMultiServicesView;H.default.isDefined(V)||(L.canEditService=!(!ba||O||!(L.canUpdate||Y&&X&&aa)));N.resolve(L.canEditService);return N};S.isExportableByUser=function(L){var aa,ba=L.portal,O=L.serviceInfo,V=L.isLocationTrackingService,X=L.isHostedService,N=L.isAdmin,Y=L.type,ia=new A.default,oa=ba.getPortalUser();O=!!(-1<(null===(aa=null===O||void 0===O?void 0:O.capabilities)||void 0===aa?void 0:aa.indexOf("Extract")));aa=(null===oa||void 0===oa?void 0:oa.userRole)&&
oa.userRole.canCreateItem();aa=oa&&O&&(!oa.isOrgUser||aa);H.default.isDefined(L.canExport)||(L.canExport=!(!X||!oa||ba.isPortal&&(!ba.isPortal||V)||!("Feature Service"===Y&&N||aa)));ia.resolve(L.canExport);return ia};S.isOverwriteableService=function(L,aa){var ba,O=L.type,V=L.serviceInfo,X=L.adminServiceInfo,N=L.isPortal,Y=L.isSDS,ia=L.typeKeywords,oa=L.sourceData,sa=new A.default,Ba={shapefile:1,"file geodatabase":1,geojson:1};X=null===(ba=N&&!Y?V:X)||void 0===ba?void 0:ba.capabilities;ba=f.default.stringToArray(X||
"",",",!0);ba=g.default.includes(ba,"ChangeTracking");!aa&&g.default.includes(ia,"Cloud Drive")&&sa.resolve(!1);L.isHostedService&&"Feature Service"===O&&L.serviceInfo&&!1===L.serviceInfo.sourceSchemaChangesAllowed&&sa.resolve(!1);!L.isAdmin||!L.isHostedService||"Feature Service"!==O||V.syncEnabled||L.isDataView||ba?sa.resolve(!1):oa&&oa.owner===L.owner&&(oa.type&&oa.type.toLowerCase())in Ba?sa.resolve(!0):!oa||"CSV"!==oa.type&&"Microsoft Excel"!==oa.type?sa.resolve(!1):S.fetchPublishParameters(L).then(function(Da){L.publishParameters=
Da;sa.resolve(!!Da)});return sa};S.isOverwriteableCloudService=function(L){var aa=new A.default,ba=L.cloudProviderInfo,O=L.sourceData;if(g.default.includes(L.typeKeywords,"Cloud Drive")&&ba&&ba.mimeType){var V=!O;L.sourceData=O||{type:-1!==ba.mimeType.indexOf("csv")?"CSV":"Microsoft Excel"};S.isOverwriteableService(L,!0).then(function(X){V&&(L.sourceData=null);aa.resolve(!!X)})}else aa.resolve(!1);return aa};S.isApplicationCreateableFromItem=function(L){var aa=new A.default,ba=L.portal.getPortalUser(),
O=null===ba||void 0===ba?void 0:ba.userRole;O=O&&O.canCreateItem()||ba&&!ba.isOrgUser;var V=!1;if(H.default.isDefined(L.isApplicationCreateableFromItem))aa.resolve(L.isApplicationCreateableFromItem);else{L.isApplicationCreateableFromItem=V;if(O)if(g.default.includes(L.types,"is-map")||g.default.includes(L.types,"is-scene"))L.isApplicationCreateableFromItem=!0,L.privileges.push("can-create-app"),g.default.includes(L.types,"is-map")&&a.default.showCreateDashboard&&ba&&ba.isOrgUser&&L.privileges.push("can-create-dashboard-item"),
V=!0;else if(g.default.includes(L.typeKeywords,"Configurable")&&g.default.includes(L.typeKeywords,"createAppWithoutMap")&&!g.default.includes(L.typeKeywords,"Web AppBuilder for ArcGIS")||g.default.includes(L.typeKeywords,"Web AppBuilder for ArcGIS")&&ba.isOrgUser)L.isApplicationCreateableFromItem=!0,L.types.push("is-hostedTemplate"),V=!0;aa.resolve(V)}return aa};S.isMultipatchFeatureService=function(L){var aa=L.isHostedService,ba=L.typeKeywords,O=L.serviceInfo;L="Feature Service"===L.type&&(aa||g.default.includes(ba,
"Hosted"));O=((null===O||void 0===O?void 0:O.layers)||[]).some(function(V){return V&&V.geometryType&&"esriGeometryMultiPatch"===V.geometryType});return L&&O};S.registerItemActions=function(L,aa,ba,O,V){v.default("[class*\x3djs-action-]",aa).forEach(function(X){var N=u.default.get(X,"data-action");ba[N]&&L.own(E.default(X,"click",function(Y){Y.preventDefault();if(V&&V(N))Y.stopPropagation();else ba[N](t.default.mixin({},{evt:Y,item:L.item,user:L.portalUser,page:O,scope:L}))}))},L)};S.calculateExpectedTiles=
function(L,aa,ba){var O=new I.default(aa.xmax,aa.ymin,aa.spatialReference);aa=new I.default(aa.xmin,aa.ymax,aa.spatialReference);aa=K.default.getContainingTileCoords(L,aa,ba);L=K.default.getContainingTileCoords(L,O,ba);L=(L.row+1-aa.row)*(L.col+1-aa.col);return 0>=L?1:L};S.sizeInMB=function(L){var aa=L||0;0<L&&(aa=L/1048567);aa=Math.round(100*aa)/100;return r.default.format(aa)};S.getHashParts=function(){return w.default().split("/")};S.splitHashParts=function(L){return L?L.split("/"):[""]};S.removeUrlQueryParameter=
function(L,aa){if(L){var ba=R.default.urlToObject(L),O=ba.path,V=w.default()?"#"+w.default():"";if(!(aa&&ba.query&&ba.query[aa]))return L;delete ba.query[aa];L=0;for(var X in ba.query)ba.query.hasOwnProperty(X)&&X!==aa&&(O=""+O+(0===L?"?":"\x26")+X+"\x3d"+encodeURIComponent(ba.query[X]),L++);return O+V}return L};S.needsToken=function(L,aa){var ba=L.portal&&L.portal.getPortalUser(),O=L.serverToken||ba&&ba.token;return L&&"WFS"!==L.type&&ba&&((L.isServiceProxy||L.hasKMLItemData)&&"public"!==L.access||
L.isHostedService&&(L.isAdmin||"public"!==L.access)||L.isFeatureCollection&&"public"!==L.access)?aa+(O?"?token\x3d"+O:""):aa};S.getNeededToken=function(L){var aa=L.portal&&L.portal.getPortalUser(),ba=L.serverToken||aa&&aa.token;return L&&"WFS"!==L.type&&aa&&((L.isServiceProxy||L.hasKMLItemData)&&"public"!==L.access||L.isHostedService&&(L.isAdmin||"public"!==L.access)||L.isFeatureCollection&&"public"!==L.access)?ba:null};S.addToken=function(L){return(L=S.needsToken(L,L.url))&&-1<L.indexOf("?token\x3d")};
S.needsSSL=function(L,aa){return L.portal.allSSL||-1<window.location.protocol.indexOf("https:")?l.default.getSecureUrl(L.url):aa};S.registerKeystrokeHandler=function(L,aa){return E.default(L,10>=B.default("ie")||7>B.default("trident")?"keydown":"keyup",aa)};S.registerEnterSpaceKeystrokeHandler=function(L,aa){return E.default(L,"keyup",function(ba){ba.keyCode!==C.default.ENTER&&ba.keyCode!==C.default.SPACE||aa(ba)})};S.sendAllResources=function(L,aa,ba,O,V,X){var N=new A.default;ba=t.default.clone(ba);
var Y=[],ia=ba.splice(0,aa);for(H.default.isDefined(X)||(X=!0);ia&&0<ia.length;)Y.push(l.default.request({url:L,content:O(ia)},t.default.mixin({usePost:X},V||{}))),ia=ba.splice(0,aa);F.default(Y).then(function(oa){return N.resolve(oa)},function(oa){return N.reject(oa)});return N};S.sendAllResourcesWithDelay=function(L,aa,ba,O,V){function X(){setTimeout(function(){(Da=Y.splice(0,aa))&&0<Da.length&&(l.default.request({url:L,content:O(Da)},{usePost:!0}).then(function(pa){sa++;ia.push(pa);sa>=N&&oa.resolve(ia)},
function(pa){sa++;sa>=N&&oa.reject(pa)}),Ba++,X())},0===Ba?0:V)}var N=Math.ceil(ba.length/aa),Y=t.default.clone(ba),ia=[],oa=new A.default,sa=0,Ba=0,Da;X();return oa};S.sendAllResourcesSerially=function(L,aa,ba,O){function V(){(oa=N.splice(0,aa))&&0<oa.length&&l.default.request({url:L,content:O(oa)},{usePost:!0}).then(function(Ba){sa++;Y.push(Ba);sa>=X?ia.resolve(Y):V()},function(Ba){sa++;sa>=X?ia.reject(Ba):V()})}var X=Math.ceil(ba.length/aa),N=t.default.clone(ba),Y=[],ia=new A.default,oa,sa=0;V();
return ia};S.fetchAllResources=function(L,aa,ba){var O=new A.default,V=1,X=[],N=100,Y,ia,oa,sa;aa=aa||{};ba=ba||"results";aa.start=V;!aa.num||aa.num>N?aa.num=N:N=aa.num;l.default.request({url:L,content:aa}).then(function(Ba){if(Ba&&Ba[ba]){X=X.concat(Ba[ba]);V=Ba.nextStart;Y=Ba.total-X.length;ia=Math.ceil(Y/N);oa=[];if(-1<V)for(sa=0;sa<ia;sa++)aa.start=V+sa*N,oa.push(l.default.request({url:L,content:aa}));F.default(oa).then(function(Da){Da.forEach(function(pa){X=X.concat(pa[ba])});O.resolve(X)},function(Da){return O.reject(Da)})}else O.resolve(X)},
function(Ba){return O.reject(Ba)});return O};S.deleteItem=function(L){var aa=L.userItemUrl+"/delete";if(L&&"Deep Learning Package"===L.type){var ba=new A.default;S.uninstallDeepLearningPackage(L).then(function(O){O&&"uninstallFail"===O.messageCode?ba.resolve(O):l.default.request({url:aa},{usePost:!0}).then(function(V){return ba.resolve(V)})});return ba}return l.default.request({url:aa},{usePost:!0})};S.uninstallDeepLearningPackage=function(L){var aa=L.portal,ba=new A.default,O=aa.helperServices&&
aa.helperServices.rasterAnalytics,V=(L.portal.getPortalUser()||{}).token,X={messageCode:"uninstallFail"},N={messageCode:"uninstallSuccess"};if(aa&&aa.isPortal&&O&&H.default.isDefined(O.url)){aa={modelItemId:z.default.stringify({itemId:L.id})};var Y=O.url+"/UninstallDeepLearningModel";ba=(new W.default(Y+(V?"?token\x3d"+V:""))).submitJob(aa).then(function(ia){var oa=ia&&ia.results&&ia.results.uninstallSucceed&&ia.results.uninstallSucceed.paramUrl;ia=ia.jobId;return oa&&ia?l.default.request({url:Y+
"/jobs/"+ia+"/"+oa},{usePost:!0}).then(function(sa){return(sa=sa&&sa.value)&&sa===L.id?N:X}):X},function(){return X})}else ba.resolve(N);return ba};S.getUserProfile=function(L){L="string"===typeof L?{username:L}:L;var aa=a.default.restBaseUrl+"community/users/"+L.username,ba=l.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");return l.default.request({url:aa}).then(function(O){return t.default.mixin(O,{thumbnailUrl:O.thumbnail?J.default.PortalUtil.formatUrl(aa+"/info/"+
O.thumbnail):ba},L)})};S.getItemSharing=function(L){var aa=new A.default,ba=L.portal,O=L.itemOwner,V=L.access,X=L.canUpdate,N=L.isOwner,Y=L.userItemUrl,ia=ba.getPortalUser(),oa={access:V};X&&(N||ia&&ia.canViewOthersOrgItems)?l.default.request({url:Y}).then(function(sa){var Ba=(oa=sa.sharing)&&oa.groups;"shared"===oa.access&&Ba&&1===Ba.length&&Ba[0]===ia.favGroupId&&(oa={access:"private"});Ba&&(sa={userGroups:ia.getGroups(),ownerGroups:L.isOwner?null:O.getGroups()},F.default(sa).then(function(Da){(Da=
(Da.userGroups||[]).concat(Da.ownerGroups||[]).filter(function(pa){return g.default.find(Ba,function(ra){return pa.id===ra})}).map(function(pa){return'id: "'+pa.id+'"'}))&&Da.length?ba.queryGroups({q:Da.join(" OR "),num:100},!0).then(function(pa){oa.groups=(pa.results||[]).sort(function(ra,ya){return ya.title.localeCompare(ra.title)});oa.total=pa.total;L=t.default.mixin(L,{sharing:oa});aa.resolve(oa)}):(delete oa.groups,L=t.default.mixin(L,{sharing:oa}),aa.resolve(oa))}))}):(L=t.default.mixin(L,{sharing:oa}),
aa.resolve(oa));return aa};S.protectItem=function(L){return l.default.request({url:L.userItemUrl+"/protect"},{usePost:!0})};S.unprotectItem=function(L){return l.default.request({url:L.userItemUrl+"/unprotect"},{usePost:!0})};S.protectGroup=function(L){return l.default.request({url:a.default.restBaseUrl+"community/groups/"+L.id+"/protect"},{usePost:!0})};S.unprotectGroup=function(L){return l.default.request({url:a.default.restBaseUrl+"community/groups/"+L.id+"/unprotect"},{usePost:!0})};S.fetchPublishParameters=
function(L){var aa=L.sourceData;L=L.itemUrl;var ba=new A.default;L+="/info/publishParameters.json";!aa||"CSV"!==aa.type&&"Microsoft Excel"!==aa.type?ba.resolve(!1):l.default.request({url:L}).then(function(O){return ba.resolve(O)},function(){return ba.resolve(!1)});return ba};S.fetchRegisteredAppInfo=function(L){L=l.default.getSecureUrl(L.userItemUrl+"/registeredAppInfo");return l.default.request({url:L})};S.refreshAppSecret=function(L){L=l.default.getSecureUrl(a.default.restBaseUrl)+"oauth2/apps/"+
L+"/resetSecret";return l.default.request({url:L},{usePost:!0})};S.registerApp=function(L,aa){aa=aa?"apps/"+L.client_id+"/update":"registerApp";aa=l.default.getSecureUrl(a.default.restBaseUrl)+"oauth2/"+aa;return l.default.request({url:aa,content:L},{usePost:!0})};S.unregisterApp=function(L){L=l.default.getSecureUrl(a.default.restBaseUrl)+"oauth2/apps/"+L+"/unregister";return l.default.request({url:L},{usePost:!0})};S.enableAttachments=function(L,aa,ba){return l.default.request({url:L.adminUrl+"/"+
aa.id+"/updateDefinition",content:{updateDefinition:z.default.stringify({hasAttachments:!!ba})}},{usePost:!0}).then(function(){return aa.hasAttachments=ba})};S.isItemListable=function(L){var aa=L.portal.getPortalUser().userRole,ba=aa&&aa.isCustom()&&aa.canManageMarketplace();aa=aa&&aa.isAdmin()||ba;ba=g.default.includes(L.typeKeywords,"Service Proxy")&&L.sourceUrl&&(-1<L.sourceUrl.indexOf(".arcgis.com")||-1<L.sourceUrl.indexOf(".esri.com"));var O=a.default.self,V=O.canListApps;O=O.canListData;!L.listed&&
a.default.self&&aa?O&&ba?(aa=new A.default,aa.resolve("Geoprocessing Service"===L.type)):V&&(g.default.includes(L.typeKeywords,"Registered App")||g.default.includes(["ArcGIS Pro Add In","AppBuilder Widget Package"],L.type))?(aa=new A.default,aa.resolve(!0)):O&&"Rule Package"===L.type?(aa=new A.default,aa.resolve(!0)):O?aa=S.isServiceListable(L):(aa=new A.default,aa.resolve(!1)):(aa=new A.default,aa.resolve(!1));return aa};S.isServiceListable=function(L){var aa=a.default.restBaseUrl+"portals/isServerRegistered",
ba=L.type?L.type.toLowerCase():"",O=L.url&&l.default.parseUrl(L.url);"web map"===ba?(L=new A.default,L.resolve(!0)):g.default.includes(["feature service","map service","image service","scene service"],ba)?l.default.isHostedServiceItem(L)?(L=new A.default,L.resolve(!0)):O&&H.default.isDefined(O.protocol)&&H.default.isDefined(O.host)?L=l.default.request({url:aa,content:{serverUrl:O.protocol+"://"+O.host}}).then(function(V){return V.registered}):(L=new A.default,L.resolve(!1)):(L=new A.default,L.resolve(!1));
return L};S.findLayer=function(L,aa){var ba=parseInt(L,10);if(H.default.isDefined(ba))return(aa||[]).filter(function(O){return O.id===ba}).shift()};S.getServiceNameFromUrl=function(L){var aa=L.url||"",ba=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer)).*/gi,O=aa.replace(ba,"").replace(/^.*\//,"").replace(/\?.*$/,"");aa=aa.replace(/http.+\/(arcgis\/rest\/services|\/.*\/rest\/services|arcgis\/services)\/?/gi,
"").match(ba);try{return aa?decodeURI(O):L.title}catch(V){return O}};S.getAppPurpose=function(L){L=L.typeKeywords;if(g.default.includes(L,"Ready To Use")||g.default.includes(L,"Ready to Use"))return P.default.itemProperties.readyToUse;if(g.default.includes(L,"selfConfigured"))return P.default.itemProperties.selfConfigurable;if(g.default.includes(L,"Configurable"))return P.default.itemProperties.configurable;if(g.default.includes(L,"Code Sample"))return P.default.itemProperties.codeSample};S.getAppApi=
function(L){var aa={"Windows Mobile":P.default.common.mobile,"ArcGIS for iPhone":P.default.common.ios,"ArcGIS for Windows Phone":P.default.common.windowsPhone,"ArcGIS for Windows Store":P.default.common.windowsStore,"ArcGIS for Windows Universal":P.default.common.windowsUniversal,"ArcGIS for Android":P.default.common.Android,Flex:P.default.common.Flex,JavaScript:P.default.common.JavaScript,Silverlight:P.default.common.Silverlight,"Web ADF":P.default.common.WebADF,Other:P.default.common.other,Java:"Java",
Qt:"Qt",".NET-Windows Desktop":".NET\u2013Windows Desktop",WPF:"WPF","OS X":"OS X"};return Object.keys(aa).reduce(function(ba,O){g.default.includes(L.typeKeywords,O)&&(ba=aa[O]);return ba},"")};S.linkify=function(L){L=l.default.htmlEncode(L);for(var aa=L.indexOf("http"),ba,O;-1<aa;){ba=L.substring(aa,aa+8);if(-1<ba.indexOf("http://")||-1<ba.indexOf("https://")){if(ba=!0,6<aa&&(O=L.substring(aa-6,aa-1),"href\x3d"===O.toLowerCase()&&(ba=!1,aa=aa+L.toLowerCase().substring("/a",aa).length+1)),ba){ba=
L.indexOf(" ",aa);-1===ba&&(ba=L.length);O=L.substring(aa,ba);var V='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+O+'" target\x3d"_blank"\x3e'+O+"\x3c/a\x3e\x3c/span\x3e";L=L.substring(0,aa)+V+L.substring(ba,L.length);aa=aa+V.length-O.length+5}}else aa+=1;aa=L.indexOf("http",aa)}return L};S.includeTimestampInRequest=function(L){if(10>=B.default("ie")||7>B.default("trident"))L.ts=(new Date).getTime();return L};S.fetchIDPConfig=function(){var L=l.default.getSecureUrl(a.default.restBaseUrl)+
"portals/self/idp";return l.default.request({url:L})};S.checkEnterpriseGroupStore=function(){var L=new A.default,aa=l.default.getPortalAdminBaseUrl()+"/security/config";l.default.request({url:aa}).then(function(ba){var O=null,V=!1,X=null;O=l.default.isArcGISEnterpriseOnKubernetes()?null===ba||void 0===ba?void 0:ba.roleStoreConfig:null===ba||void 0===ba?void 0:ba.groupStoreConfig;if(null===O||void 0===O?0:O.type)X=null===O||void 0===O?void 0:O.type.toLowerCase(),"builtin"!==X&&"saml"!==X&&(V=!0);L.resolve({storeType:X,
supportsEnterpriseGroups:V})},function(){L.resolve({supportsEnterpriseGroups:!1})});return L};S.enterpriseGroupMatches=function(L,aa){return!(!H.default.isDefined(L)||!H.default.isDefined(aa)||L.toLowerCase()!==aa.toLowerCase())};S.isAmazonBasedTileService=function(L){return!l.default.isPortal()&&/tiles[\s\S]*.arcgis.com\//gi.test(L)};S.createDialogWrapper=function(L,aa){var ba=(new k.default(L)).placeAt(document.body);ba.setContent(aa);E.default.once(ba,"hide",function(){return ba.destroyRecursive()});
return ba};S.createSpecifiedDialog=function(L,aa,ba){var O=aa?new L(aa):new L,V=O._dialog||O.dialog;if(V)E.default.once(V,"hide",function(){V.destroyRecursive();O.destroyRecursive();ba&&ba.focus&&ba.focus()});return O};S.showAlert=function(L,aa,ba,O){void 0===ba&&(ba="");void 0===O&&(O=!1);S.clearAlerts();return new e.default({type:L,text:aa,cssClasses:ba,preventAutoDimiss:O},x.default.create("div",null,document.body))};S.clearAlerts=function(){m.default.forEachNode(document.querySelectorAll(".alert"),
function(L){(L=c.default.byNode(L))&&L.destroy&&L.destroy()})};S.showAlertList=function(L,aa){aa=aa.reduce(function(ba,O){return ba+"\x3cli\x3e"+O+"\x3c/li\x3e"},"");return new e.default({type:L,text:"",listHTML:"\x3cul\x3e"+aa+"\x3c/ul\x3e"},x.default.create("div",null,document.body))};S.getPageRangeString=function(L,aa){var ba=n.default.locale?n.default.locale.substring(0,2):"en";aa=aa?aa:P.default.common.pageRange;L.total&&1E4<=L.total&&(L.total="10000+");return D.default.substitute(aa["en"===
ba?"en":"other"],L)};S.sortListByStrProp=function(L,aa,ba){L.sort(function(O,V){O=O[aa].toLowerCase();V=V[aa].toLowerCase();return ba?O<V?1:O>V?-1:0:O<V?-1:O>V?1:0})};S.formatDataStoreItem=function(L,aa){(aa||[]).length&&(aa.some(function(ba){return g.default.includes(ba.toLowerCase(),"cloud")})?L+=" ("+P.default.AddDatastoreDlg.cloud+")":-1!==aa.indexOf("egdb")?L+=" ("+P.default.AddDatastoreDlg.database+")":-1!==aa.indexOf("folder")&&(L+=" ("+P.default.AddDatastoreDlg.folder+")"));return L};S.downloadImage=
function(L){var aa;L=L.item;var ba=L.portal,O=new d.default,V=new A.default,X=null===(aa=ba.helperServices)||void 0===aa?void 0:aa.rasterUtilities;aa=(L.portal.getPortalUser()||{}).token;if((null===ba||void 0===ba?0:ba.isPortal)&&(null===X||void 0===X?0:X.url)){L={inputImageLayer:z.default.stringify({itemId:L.id})};var N=X.url+"/DownloadRaster",Y=aa?"?token\x3d"+aa:"";V=(new W.default(N+Y)).submitJob(L,function(ia){var oa,sa="esriJobSucceeded"===(null===ia||void 0===ia?void 0:ia.jobStatus)&&(null===
(oa=ia.results)||void 0===oa?void 0:oa.outputRaster);ia=ia.jobId;O.updateMessage(P.default.downloadImageDlg.succeeded);return sa&&ia?(O.hide(),l.default.request({url:N+"/jobs/"+ia+"/results/outputRaster"},{usePost:!0}).then(function(Ba){var Da;return null===(Da=null===Ba||void 0===Ba?void 0:Ba.value)||void 0===Da?void 0:Da[0]})):""},function(ia){O.setCancelUrl(X.url+"/DownloadRaster/jobs/"+ia.jobId+"/cancel"+Y)});O.show();O.updateMessage(P.default.downloadImageDlg.message)}else V.resolve("");return V};
S.cancelDownloadImage=function(L,aa){(new W.default(L)).cancelJob(aa,null,null)};S.goToPage=function(L,aa){var ba=aa.username;aa=aa.orgId;var O=l.default.getUser(),V=null===O||void 0===O?void 0:O.userRole,X=(null===O||void 0===O?void 0:O.username)===ba;L=("groups"===L&&(null===V||void 0===V?0:V.canViewOrgGroups())||"content"===L&&(null===V||void 0===V?0:V.canManageItems())||(null===V||void 0===V?0:V.isAdmin())||X)&&aa===O.orgId?""+a.default.baseUrl+L+".html"+(X?"":"?user\x3d"+ba):a.default.baseUrl+
"search.html?q\x3downer:%22"+ba+"%22\x26t\x3d"+L+"\x26restrict\x3dfalse";window.open(L,"_blank")};return S}()})},"arcgisonline/map/core/canUseForPublish":function(){define(["dojo/_base/array"],function(b){function y(a,h){if("esriGeometryMultiPatch"===a.geometryType)return!1;var e=a.drawingInfo.renderer,g=a.drawingInfo.labelingInfo,f=a.featureReduction,m=a.fields;if("heatmap"===e.type||"esriGeometryPolygon"===a.geometryType&&e.uniqueValueInfos&&e.visualVariables&&b.some(e.visualVariables,function(d){if("sizeInfo"===
d.type&&!d.target)return!0}))return!1;var l=b.map(b.filter(m,function(d){return"esriFieldTypeDate"===d.type}),function(d){return d.name});return l.length&&(-1<b.indexOf(l,e.field)||-1<b.indexOf(l,e.field1)||e.visualVariables&&b.some(e.visualVariables,function(d){if(d.field&&-1<b.indexOf(l,d.field))return!0}))||f||!h&&g&&g.length?!1:!0}function q(a,h){var e=a.drawingInfo.renderer,g=a.drawingInfo.labelingInfo,f=a.featureReduction,m=a.fields;if(-1===b.indexOf(["esriGeometryPoint","esriGeometryMultiPatch"],
a.geometryType)||e.observationRenderer||e.latestObservationRenderer||"heatmap"===e.type||e.valueExpression&&e.valueExpression.length)return!1;if(e.visualVariables)for(a=0;a<e.visualVariables.length;a++)if(e.visualVariables[a].valueExpression&&e.visualVariables[a].valueExpression.length)return!1;var l=b.map(b.filter(m,function(d){return"esriFieldTypeDate"===d.type}),function(d){return d.name});return l.length&&(-1<b.indexOf(l,e.field)||-1<b.indexOf(l,e.field1)||e.visualVariables&&b.some(e.visualVariables,
function(d){if(d.field&&-1<b.indexOf(l,d.field))return!0}))||f||!h&&g&&g.length?!1:!0}return function(a,h,e){return"Feature Layer"===a.type&&a.drawingInfo?"scene"===e?q(a,h):y(a,h):!1}})},"arcgisonline/pages/dijit/Alert":function(){define("require exports tslib ../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/query dojo/text!./Alert/Alert.html dojo/i18n!../../nls/arcgisonline ../utils/icons dojo/_base/lang".split(" "),function(b,y,q,a,h,e,g,f,m,l,d){a=q.__importDefault(a);
h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);return function(){function c(k,t){this.templateString=f.default;this.i18n=m.default;this.icons=l.default;this.cssClasses="";this.preventAutoDimiss=!1}c.prototype.postMixInProperties=function(){"success"===this.type?(this.modifier="green",this.icon=l.default["check-circle"]["32"],this.iconAltText=m.default.GroupWidget.successIcon):"error"===
this.type?(this.modifier="red",this.icon=l.default["exclamation-mark-circle"]["32"],this.iconAltText=m.default.GroupWidget.errorIcon):"warning"===this.type?(this.modifier="yellow",this.icon=l.default["exclamation-mark-triangle"]["32"],this.iconAltText=m.default.GroupWidget.warningIcon):"info"===this.type&&(this.modifier="info",this.iconAltText=this.icon="")};c.prototype.postCreate=function(){var k=this;this.inherited(arguments);this.listHTML&&(this._listContainer.innerHTML=this.listHTML);this._addEventListeners();
"success"!==this.type||this.preventAutoDimiss||this._setAlertTimer();setTimeout(function(){k.domNode&&k.domNode.classList.add("is-active")},10)};c.prototype._addEventListeners=function(){"success"===this.type&&this.own(g.default(this.domNode).on("mouseover",d.default.hitch(this,this._clearAlertTimer)),g.default(this.domNode).on("mouseout",d.default.hitch(this,this._setAlertTimer)));this.own(g.default(".js-alert-close",this.domNode).on("click",d.default.hitch(this,this._dismiss)))};c.prototype._setAlertTimer=
function(){var k=this;this._timeout||(this._timeout=window.setTimeout(function(){k._dismiss()},4E3))};c.prototype._clearAlertTimer=function(){clearTimeout(this._timeout);this._timeout=null};c.prototype._dismiss=function(k){var t=this;k&&k.preventDefault();this.domNode&&this.domNode.classList.remove("is-active");setTimeout(function(){t.destroy()},300)};c.prototype.dismiss=function(){var k=this;this.domNode&&this.domNode.classList.remove("is-active");setTimeout(function(){k.destroy()},300)};return c=
q.__decorate([a.default(h.default,e.default)],c)}()})},"arcgisonline/tsutils/declareDecorator":function(){define(["require","exports","tslib","dojo/_base/declare"],function(b,y,q,a){Object.defineProperty(y,"__esModule",{value:!0});a=q.__importDefault(a);y.default=function(){for(var h=[],e=0;e<arguments.length;e++)h[e]=arguments[e];return function(g){return a.default(h,g.prototype)}}})},"arcgisonline/pages/utils/icons":function(){define(["require","exports","tslib","dojo/_base/kernel"],function(b,
y,q,a){function h(m){var l,d,c=m.paths,k=m.size,t=m.direction,n=m.rtl,u=m.title,x=m.titleId;m=m.inline?"icon-inline--on-"+(null!==t&&void 0!==t?t:"left"):"";t=null!==(d=null===(l=a.default.locale)||void 0===l?void 0:l.split("-")[0])&&void 0!==d?d:"en";l="icon-inline "+m+" "+(!0===n||n===t?"icon-inline--flip-rtl":"");c=Array.isArray(c)?e(c):'\x3cpath d\x3d"'+c+'"/\x3e';d=u&&x;return'\x3csvg viewBox\x3d"0 0 '+k+" "+k+'" width\x3d"'+k+'" height\x3d"'+k+'" class\x3d"'+l+'" '+(d?'aria-labelledby\x3d"'+
x+'"':"")+"\x3e\n    "+(d?'\x3ctitle id\x3d"'+x+'" \x3e'+u+"\x3c/title\x3e":"")+"\n    "+c+"\n  \x3c/svg\x3e"}function e(m){return m.reduce(function(l,d){return l+" \x3cpath "+(d.opacity?'opacity\x3d"'+d.opacity+'" ':"")+' d\x3d"'+d.d+'" /\x3e'},"")}a=q.__importDefault(a);var g={"app-launcher":{24:"M11.5 18.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 20h-1v-1h1zM3.5 2.05A1.45 1.45 0 104.95 3.5 1.45 1.45 0 003.5 2.05zM4 4H3V3h1zm7.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 12h-1v-1h1zm-8.5-1.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 12H3v-1h1zm-.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 20H3v-1h1zM19.5 4.95a1.45 1.45 0 10-1.45-1.45 1.45 1.45 0 001.45 1.45zM19 3h1v1h-1zm.5 7.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 12h-1v-1h1zm-8.5-9.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 4h-1V3h1zm7.5 14.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 20h-1v-1h1z"},
apps:{24:"M9.5 2h-6A1.502 1.502 0 0 0 2 3.5v6A1.502 1.502 0 0 0 3.5 11h6A1.502 1.502 0 0 0 11 9.5v-6A1.502 1.502 0 0 0 9.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 2h-6A1.502 1.502 0 0 0 13 3.5v6a1.502 1.502 0 0 0 1.5 1.5h6A1.502 1.502 0 0 0 22 9.5v-6A1.502 1.502 0 0 0 20.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM9.5 13h-6A1.502 1.502 0 0 0 2 14.5v6A1.502 1.502 0 0 0 3.5 22h6a1.502 1.502 0 0 0 1.5-1.5v-6A1.502 1.502 0 0 0 9.5 13zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 13h-6a1.502 1.502 0 0 0-1.5 1.5v6a1.502 1.502 0 0 0 1.5 1.5h6a1.502 1.502 0 0 0 1.5-1.5v-6a1.502 1.502 0 0 0-1.5-1.5zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5z",
32:"M13.25 3h-8.5A1.752 1.752 0 0 0 3 4.75v8.5A1.752 1.752 0 0 0 4.75 15h8.5A1.752 1.752 0 0 0 15 13.25v-8.5A1.752 1.752 0 0 0 13.25 3zM14 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5A.751.751 0 0 1 4.75 4h8.5a.751.751 0 0 1 .75.75zM27.25 3h-8.5A1.752 1.752 0 0 0 17 4.75v8.5A1.752 1.752 0 0 0 18.75 15h8.5A1.752 1.752 0 0 0 29 13.25v-8.5A1.752 1.752 0 0 0 27.25 3zM28 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM27.25 17h-8.5A1.752 1.752 0 0 0 17 18.75v8.5A1.752 1.752 0 0 0 18.75 29h8.5A1.752 1.752 0 0 0 29 27.25v-8.5A1.752 1.752 0 0 0 27.25 17zM28 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM13.25 17h-8.5A1.752 1.752 0 0 0 3 18.75v8.5A1.752 1.752 0 0 0 4.75 29h8.5A1.752 1.752 0 0 0 15 27.25v-8.5A1.752 1.752 0 0 0 13.25 17zM14 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75z"},
"arcgis-online":{24:"M24 13.226a4.785 4.785 0 01-3.523 4.658L18.962 17h.633A3.694 3.694 0 0023 13.226a4.173 4.173 0 00-2.895-3.977l-.595-.193-.086-.62A6.164 6.164 0 0013.482 3a5.988 5.988 0 00-5.254 3.265l-.373.703-.769-.206a2.966 2.966 0 00-.763-.116 2.473 2.473 0 00-2.532 2.319l-.041.563-.503.255A4.026 4.026 0 001 13.37 3.614 3.614 0 004.405 17H6v1H4.405A4.606 4.606 0 010 13.37a5.04 5.04 0 012.795-4.479 3.47 3.47 0 013.528-3.244 3.952 3.952 0 011.02.15A6.971 6.971 0 0113.483 2a7.131 7.131 0 016.933 6.297A5.186 5.186 0 0124 13.226zm-6.764 4.78l.846.494-4.534 2.645L9.014 18.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm0-3l.846.494-4.534 2.645L9.014 15.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm2.312-2.506l-6 3.5-6-3.5 6-3.5zm-6 2.645l4.534-2.645-4.534-2.645L9.014 12.5z",
32:"M32 14.704a6.28 6.28 0 0 1-4.862 6.248l-.942-.55.738-.43A5.29 5.29 0 0 0 31 14.703a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 1a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 14.897C2 17.521 4.157 20 6.438 20H9v1H6.437C3.592 21 1 18.092 1 14.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 0a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 14.704zm-7.591 6.74l1.12.654-7.075 4.128-7.074-4.128 1.188-.694-.794-.463-1.982 1.157 8.662 5.054 8.663-5.054-1.915-1.117zm-.123-3.542l1.31.765-7.075 4.128-7.074-4.128 1.31-.765-.793-.463-2.105 1.228 8.663 5.054 8.663-5.054-2.105-1.228zm2.899-2.849l-8.663 5.054-8.663-5.054L18.522 10zm-1.588 0l-7.076-4.127-7.074 4.128 7.074 4.127z"},
"arrow-left":{24:"M9.11 6.32L4.43 11H20v1H4.43l4.68 4.68-.707.707L2.517 11.5l5.886-5.887z"},"arrow-right":{16:"M2 8h10.26l-1.585-1.585.707-.707 2.81 2.81-2.81 2.808-.707-.707L12.295 9H2z",24:"M15.646 14.646L18.293 12H4v-1h14.293l-2.647-2.646.707-.707 3.854 3.853-3.854 3.854z"},"arrow-down":{32:"M16.5 27.207l-4.854-4.854.707-.707L16 25.293V5h1v20.293l3.646-3.646.707.707z"},attachment:{16:"M3.991 15.92a3.913 3.913 0 0 1-2.767-6.68L9.552.912a2.92 2.92 0 0 1 4.031 0 2.854 2.854 0 0 1 0 4.031l-8.001 7.998a1.833 1.833 0 0 1-2.527 0 1.789 1.789 0 0 1 0-2.526L8.72 4.751l.566.566-5.665 5.665a.985.985 0 0 0 0 1.394 1.009 1.009 0 0 0 1.395 0l8-7.998a2.05 2.05 0 0 0 0-2.899 2.098 2.098 0 0 0-2.898 0L1.79 9.805a3.11 3.11 0 0 0 0 4.403 3.186 3.186 0 0 0 4.403 0l6.555-6.555.566.567-6.554 6.554a3.905 3.905 0 0 1-2.77 1.146z"},
browser:{32:"M2 28h28V5H2zm27-1H8V11h21zM3 6h26v4H3zm0 5h4v16H3zm24-3h-1V7h1z"},calculator:{16:"M14.5 16h-13A1.502 1.502 0 0 1 0 14.5v-13A1.502 1.502 0 0 1 1.5 0h13A1.502 1.502 0 0 1 16 1.5v13a1.502 1.502 0 0 1-1.5 1.5zM1.5 1a.501.501 0 0 0-.5.5v13a.501.501 0 0 0 .5.5h13a.501.501 0 0 0 .5-.5v-13a.501.501 0 0 0-.5-.5zM2 6V2h12v4zm11-1V3H3v2zm0 9h-2a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1zm0-1V8h-2v5zm-5 1H7a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H7v1zm-4 1H3a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H3v1zm4-3H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H7v1zm-4 1H3a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H3v1z"},
calendar:{16:"M14 1v1h1v2H1V2h1V1H0v14h16V1zm1 13H1V5h14zM5 2V1h6v1zM4 0v2H3V0zm8 2V0h1v2z"},"caret-right":{16:"M5 1.5l7 7-7 7zm1 11.586L10.586 8.5 6 3.914z"},check:{16:"M2 8.689l.637-.636L5.5 10.727l8.022-7.87.637.637L5.5 12z",24:"M6.218 13.64l3.288 3.098 10.073-9.92.637.637L9.506 18.01 5.58 14.276z",32:"M12.5 22.142L6.59 16.42l.636-.636L12.5 20.87 25.721 7.8l.637.637L12.5 22.142"},"check-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM3.735 8.346l.738-.738 2.084 2.088 4.97-4.97.738.737-5.708 5.705z",
24:"M7 13.689l.637-.636 2.863 2.674 7.022-6.87.637.637L10.5 17zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"},"check-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM6.557 11.592L3.31 8.346l1.163-1.162L6.557 9.27l5.172-5.17 1.162 1.162z",
24:"M23 11.5A11.5 11.5 0 1 1 11.5 0 11.5 11.5 0 0 1 23 11.5zm-5.5-6.018l-8.5 8.5-3.5-3.5-2 2L9.018 18l.018-.018L11.018 16l8.5-8.5z",32:"M30 16A14 14 0 1 1 16 2a14 14 0 0 1 14 14zm-6.11-7.72L12.823 19.346 8.36 14.883l-2.486 2.486 6.95 6.95 13.554-13.553z"},"chevron-down":{16:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z",24:"M19 8.293v1.414l-7.5 7.5-7.5-7.5V8.293l7.5 7.5z"},"chevron-down-f":{16:"M14 4.217v2.766l-6 6-6-6V4.217l6 6z"},"chevron-left":{16:"M10.707 12H9.293l-4.5-4.5 4.5-4.5h1.414l-4.5 4.5z",
24:"M6.293 12l7-7h1.414l-7 7 7 7h-1.414z"},"chevron-right":{16:"M5.293 3h1.414l4.5 4.5-4.5 4.5H5.293l4.5-4.5z",24:"M8.293 5h1.414l7.5 7.5-7.5 7.5H8.293l7.5-7.5z"},"chevron-up":{24:"M11.5 8.207l-7.5 7.5v-1.414l7.5-7.5 7.5 7.5v1.414z"},clock:{16:"M8 7h3v1H7V3h1zm4.803 5.803a7.5 7.5 0 1 1 0-10.606 7.5 7.5 0 0 1 0 10.606zm-.636-9.97A6.591 6.591 0 0 0 .927 7H2v1H.927A6.567 6.567 0 0 0 7 14.073v-1.38h1v1.38a6.591 6.591 0 0 0 4.167-11.24z"},collection:{16:"M10 10V0H0v10zM9 9H6.416c.007-.188.011-.353.014-.453a1.206 1.206 0 0 0 .545-1.058 1.28 1.28 0 0 0 .092-.15 1.143 1.143 0 0 0 .163-.056A2.782 2.782 0 0 0 9 7.461zM1 9V1h5.098a1.276 1.276 0 0 0-.28 1.041 1.26 1.26 0 0 0-.206.466 1.256 1.256 0 0 0-.52 1.185.696.696 0 0 0-.06.062 1.236 1.236 0 0 0-1.175.418 1.352 1.352 0 0 0-1.779 1.571 1.235 1.235 0 0 0 .333 1.568 1.287 1.287 0 0 0 .568 1.34A2.11 2.11 0 0 0 2.962 9zm3.123-.857c0-.313-.595-.223-.688-.41-.234-.467.395-.587.395-.958 0-.09-.047-.277-.191-.293-.202-.021-.254.088-.454.088a.232.232 0 0 1-.25-.207c0-.22.174-.322.174-.543 0-.144-.06-.224-.06-.367 0-.36.397-.586.692-.06.19.342.808.176.808-.38a.271.271 0 0 1 .25-.28c.199 0 .272.205.47.205.327 0 .316-.432.604-.586.353-.192.25-.604.205-.823-.018-.1.165-.287.264-.281.41.031.236-.308.236-.469 0-.258.353-.302.353-.56 0-.158-.132-.235-.132-.397 0-.424.623-.42.78-.822H9v5.449c-.367.057-1.053.165-1.335-.082-.151-.13-.147-.396-.352-.396-.276 0-.297.412-.573.412-.125 0-.184-.088-.31-.088-.26 0-.22.206-.22.465 0 .242-.322.29-.322.535 0 .098.088.135.088.234 0 .33-.588.286-.588.617 0 .026.044.293.044.293 0 .052-.007.287-.019.56h-1.45c-.002-.341.16-.643.16-.856zM16 5v11H5v-1h10V5zm-3 8H2v-1h10V2h1z",
24:"M17 17V2H2v15zm-1-1h-4.874a8.585 8.585 0 0 0 .03-1.017 1.45 1.45 0 0 0 .897-1.63 1.557 1.557 0 0 0 .381-.659 1.376 1.376 0 0 0 .811-.3 3.207 3.207 0 0 0 2.755.42zM3 16V3h8.81a1.483 1.483 0 0 0-.194 1.43 1.461 1.461 0 0 0-.472 1.029 1.47 1.47 0 0 0-.826 1.501 3.333 3.333 0 0 1 .063.37 1.957 1.957 0 0 0-.602.616 1.417 1.417 0 0 0-1.99.87 1.577 1.577 0 0 0-2.517 1.76.033.033 0 0 0 .02-.016c-.609 1.132-.186 1.97.634 2.256a1.509 1.509 0 0 0 .944 2.189 2.551 2.551 0 0 0-.14.995zm5.001-1.447c0-.528-1.006-.378-1.164-.695-.393-.785.668-.987.668-1.612 0-.154-.08-.47-.323-.497-.338-.034-.426.15-.767.15a.39.39 0 0 1-.422-.348c0-.372.297-.545.297-.917 0-.243-.1-.38-.1-.62a.597.597 0 0 1 .57-.62c.312 0 .446.254.595.52.324.579 1.365.294 1.365-.644a.456.456 0 0 1 .422-.473c.334 0 .459.348.793.348.552 0 .532-.73 1.017-.99.596-.322.422-1.019.348-1.39-.033-.165.279-.483.446-.473.694.052.397-.518.397-.792 0-.435.596-.506.596-.943 0-.27-.224-.396-.224-.668 0-.33.4-.628.883-.889H16v8.782c-.29.075-.54.136-.584.136-.503 0-1.117.07-1.48-.249-.256-.22-.249-.669-.596-.669-.466 0-.501.696-.967.696-.21 0-.31-.151-.52-.151a.342.342 0 0 0-.372.305v.483c0 .409-.547.49-.547.9 0 .166.15.23.15.396 0 .559-.994.484-.994 1.042 0 .172.077.336.077.496 0 .103-.015.456-.043.833H7.73c-.003-.58.27-1.096.27-1.447zM20 20H5v-1h14V5h1zm3-12v15H8v-1h14V8z"},
"copy-to-clipboard":{16:"M16 10H8.767l1.558 1.558-.707.707-2.81-2.81 2.81-2.809.707.707L8.678 9H16zM7 6H3v1h4zm-2 4H3V9h2zm2 3H3v-1h4zm5-2v4H2V3h1v1h8V3h1v5h1V2h-2V1H8.723a1.984 1.984 0 0 0-3.446 0H3v1H1v14h12v-5zM4 2h2v-.318A.682.682 0 0 1 6.682 1h.636A.682.682 0 0 1 8 1.682V2h2v1H4z"},credits:{16:"M10.5 5.05a5.45 5.45 0 1 0 5.45 5.45 5.457 5.457 0 0 0-5.45-5.45zm0 10.05a4.6 4.6 0 1 1 4.6-4.6 4.605 4.605 0 0 1-4.6 4.6zm0-1.2a3.404 3.404 0 0 1-3.398-3.3h.8a2.6 2.6 0 0 0 5.196 0h.8a3.404 3.404 0 0 1-3.398 3.3zm1.597-3.5a1.6 1.6 0 0 0-3.194 0h-.801a2.4 2.4 0 0 1 4.796 0zm-8.19.253a5.397 5.397 0 1 1 6.747-6.747A2.698 2.698 0 0 0 10.5 3.9a6.505 6.505 0 0 0-.693.04A4.588 4.588 0 1 0 3.94 9.806a6.418 6.418 0 0 0-.04.694c0 .052.003.103.006.153zm.272-2.03A3.373 3.373 0 0 1 2.102 5.6h.8a2.583 2.583 0 0 0 1.55 2.274 6.55 6.55 0 0 0-.273.748zM3.102 5.4a2.396 2.396 0 0 1 4.59-.866 6.65 6.65 0 0 0-.708.386A1.585 1.585 0 0 0 5.5 3.9a1.602 1.602 0 0 0-1.597 1.5z"},
cube:{16:"M8.5 1.108L1 4.188v8.753L8.448 16h.104L16 12.94V4.189zM8 14.735l-6-2.464V5.197L8 7.65zM2.906 4.486L8.5 2.19l5.594 2.297L8.5 6.774zM15 12.271l-6 2.464V7.65l6-2.453z"},data:{24:"M11.5 2C5.702 2 1 3.566 1 5.5v12.808C1 20.346 5.702 22 11.5 22S22 20.346 22 18.308V5.5C22 3.566 17.298 2 11.5 2zm0 1C17.768 3 21 4.752 21 5.5S17.768 8 11.5 8 2 6.248 2 5.5 5.232 3 11.5 3zM2 6.983C3.676 8.173 7.294 9 11.5 9s7.824-.827 9.5-2.017V10.5c0 .748-3.232 2.5-9.5 2.5S2 11.248 2 10.5zM11.5 21C5.354 21 2 19.221 2 18.308v-6.325C3.676 13.173 7.294 14 11.5 14s7.824-.827 9.5-2.017v6.325C21 19.22 17.646 21 11.5 21z",
32:"M28.983 7.875C28.803 5.171 22.841 3 15.5 3S2.198 5.17 2.017 7.875H2v16.25C2 26.816 8.045 29 15.5 29S29 26.816 29 24.125V7.875zM28 24.125C28 25.705 23.13 28 15.5 28S3 25.705 3 24.125v-8.241C5.01 17.711 9.846 19 15.5 19s10.49-1.29 12.5-3.116zm0-9.24C25.99 16.71 21.154 18 15.5 18S5.01 16.71 3 14.884v-5C5.01 11.711 9.846 13 15.5 13S25.99 11.71 28 9.884zm-12.5-2.91C7.87 11.974 3 9.62 3 8s4.87-3.974 12.5-3.974S28 6.379 28 8s-4.87 3.974-12.5 3.974z"},download:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.563C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.438 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM17 28.278V14h-1v14.278l-4.332-4.332-.707.707 5.539 5.54 5.54-5.54-.708-.707z"},
"download-to":{16:"M12 13v1H3v-1zm-1.674-4.618l-.707-.707L8 9.295V1H7v8.26L5.415 7.675l-.707.707 2.81 2.81z",32:"M7 25h17v1H7zm13.354-8.646l-.707-.707L16 19.293V5h-1v14.293l-3.646-3.646-.707.707 4.853 4.853z"},drag:{16:"M5.95 1.5A1.45 1.45 0 1 1 4.5.05 1.45 1.45 0 0 1 5.95 1.5zM10.5.05a1.45 1.45 0 1 0 1.45 1.45A1.45 1.45 0 0 0 10.5.05zm-6 6A1.45 1.45 0 1 0 5.95 7.5 1.45 1.45 0 0 0 4.5 6.05zm6 0a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm-6 6a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm7.45 1.45a1.45 1.45 0 1 0-1.45 1.45 1.45 1.45 0 0 0 1.45-1.45z"},
edit:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},"ellipsis-f":{16:"M3.55 8A1.55 1.55 0 1 1 2 6.45 1.55 1.55 0 0 1 3.55 8zm6 0A1.55 1.55 0 1 0 8 9.55 1.55 1.55 0 0 0 9.55 8zm6 0A1.55 1.55 0 1 0 14 9.55 1.55 1.55 0 0 0 15.55 8z"},
envelope:{16:"M14 11.434l-4.52-4.52L14 3.301v8.133zM1.566 12L6.15 7.418l1.35 1.08 1.351-1.08L13.434 12H1.566zM1 3.3l4.52 3.614L1 11.434V3.3zM13.095 3L7.5 7.475 1.904 3h11.191zM14 2H1a1.002 1.002 0 0 0-1 1v9a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z",24:"M22.5 4h-20A1.504 1.504 0 0 0 1 5.5v14A1.5 1.5 0 0 0 2.5 21h20a1.5 1.5 0 0 0 1.5-1.5v-14A1.5 1.5 0 0 0 22.5 4zm-.071 1L12.5 12.94 2.571 5zM2.026 19.63A.482.482 0 0 1 2 19.5V5.568l7.829 6.26zm.763.37l7.67-7.67 2.041 1.633 2.042-1.632L22.21 20zM23 19.5a.483.483 0 0 1-.026.13l-7.803-7.803L23 5.568z"},
"exclamation-mark-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zm.994-3.576a1 1 0 0 1-2 0v-.048a1 1 0 0 1 2 0zM7.995 8h-.977V4h.977z",24:"M12 7h1v7h-1zm1.5 9.5a1 1 0 1 0-1 1 1.002 1.002 0 0 0 1-1zm9.3-4A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm0-5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM15 8h1v11h-1z"},
"exclamation-mark-circle-f":{24:"M12.5 2.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zM12 7h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},"exclamation-mark-triangle":{16:"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z",
24:"M1.225 21.225A1.678 1.678 0 0 0 2.707 22H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656L13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656zm.859-1.143l9.82-17.773A.71.71 0 0 1 12.508 2a.73.73 0 0 1 .629.342l9.751 17.708a.626.626 0 0 1 .017.662.725.725 0 0 1-.626.288H2.708a.723.723 0 0 1-.623-.286.605.605 0 0 1-.001-.632zM13 15h-1V8h1zm-1.5 2.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1z",32:"M3.929 29h25.148a1.897 1.897 0 0 0 1.67-2.797L18.217 2.951a1.897 1.897 0 0 0-3.337-.005L2.261 26.198A1.897 1.897 0 0 0 3.93 29zm-.788-2.324L15.759 3.423a.896.896 0 0 1 1.577.002l12.531 23.253a.898.898 0 0 1-.79 1.322H3.93a.897.897 0 0 1-.788-1.324zM15.5 24.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1zM17 21h-1V10h1z"},
"exclamation-mark-triangle-f":{16:"M14.894 12.552l-6-11.998a1 1 0 0 0-1.787 0l-6 11.998A.998.998 0 0 0 2 13.999h12a.998.998 0 0 0 .894-1.447zM9 12H7v-2h2zm0-3H7V4h2z",24:"M13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656 1.678 1.678 0 0 0 1.48.775H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656zM12 8h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z",32:"M29.733 27.06L17.734 3.191a2 2 0 0 0-3.463 0L2.268 27.061a2.003 2.003 0 0 0 0 2.001 1.941 1.941 0 0 0 1.73.938H28a1.944 1.944 0 0 0 1.731-.938 2.008 2.008 0 0 0 .002-2.002zM17 25h-2v-2h2zm0-4h-2V11h2z"},
file:{32:"M20.3 1H4v30h24V8.699zM27 30H5V2h14v8h8zM20 9V2l7 7z"},"file-image":{16:"M13 14H4v-1h9zm-9-2h9v-1.44l-1.527-1.472a.27.27 0 0 0-.37-.028l-1.224.824a.269.269 0 0 1-.35-.01L7.498 8.07a.27.27 0 0 0-.382.018L5.1 10.24a.27.27 0 0 1-.4 0 .27.27 0 0 0-.4 0l-.3.32zm1.752-1a1.38 1.38 0 0 0 .077-.076l1.534-1.636 1.501 1.334a1.267 1.267 0 0 0 1.64.041l.687-.458.809.78V11zM15 3.6V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3zm-3.5 3.06a.75.75 0 1 0 .75.75.75.75 0 0 0-.75-.75z",24:"M18 20H6v-1h12zM6 18h12v-2.8l-2.035-2.035a.377.377 0 0 0-.493-.035l-1.633 1.225a.377.377 0 0 1-.468-.012l-2.706-2.256a.377.377 0 0 0-.509.023l-2.69 2.69a.377.377 0 0 1-.533 0 .377.377 0 0 0-.533 0l-.4.4zm1-1v-1.104a1.376 1.376 0 0 0 1.174-.389l2.287-2.287 2.27 1.89a1.375 1.375 0 0 0 1.708.044l1.2-.9L17 15.614V17zM21 6.709V23H3V1h12.29zM20 8h-6V2H4v20h16zm0-1.2L15.2 2H15v5h5zM14.021 12a.979.979 0 0 0 .979-.979A1.021 1.021 0 0 0 13.979 10a.979.979 0 0 0-.979.979v.043a.981.981 0 0 0 .979.978z"},
"file-magnifying-glass":{16:"M12.4 0H6v3.232a5.4 5.4 0 0 1 1 .395V1h4v4h4v7h-3.7l1 1H16V3.6zM15 4h-3V1h.31L15 3.69zm-5.233 6H12v1h-1.714a1.66 1.66 0 0 0-.707-.385A5.485 5.485 0 0 0 9.767 10zM14 9H9.95c.016-.167.05-.33.05-.501 0-.17-.034-.332-.049-.499H14zm0-2H9.768a5.404 5.404 0 0 0-.395-1H14zm-4.358 4.754a.672.672 0 0 0-.951 0l-.115.115L8 11.294A4.484 4.484 0 0 0 4.499 4a4.5 4.5 0 1 0 2.795 8.001l.575.575-.115.114a.672.672 0 0 0 0 .951l2.16 2.159a.672.672 0 0 0 .95 0l.936-.933a.672.672 0 0 0 .001-.951zm-7.617-.78a3.5 3.5 0 1 1 4.95 0 3.5 3.5 0 0 1-4.95 0zm8.365 3.887l-1.697-1.695.473-.473 1.696 1.698z"},
"file-text":{16:"M13 7H4V6h9zm0 2H4v1h9zm-2 3H4v1h7zm4-8.4V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3z"},folder:{16:"M7.3 3.002L5.98 2H3L1.7 3H0v11h15V3zM14 6H1V4h1.04l1.3-1h2.304l1.319 1H14zm0 7H1V7h13z"},"folder-move":{16:"M5 12H1V6h13v2.352l.007.005.993.994V2l-7.7.002L5.98 1H3L1.7 2H0v11h5zM1 3h1.04l1.3-1h2.304l1.319 1H14v2H1zm14.284 9.563l-2.79 2.79-.708-.706L13.433 13H7v-1h6.308l-1.522-1.521.707-.707z"},"folder-open":{16:"M14 6V3l-6.7.002L5.98 2H3L1.7 3H0v11h14l2-8zM1 4h1.041L3.34 3h2.304l1.319 1.002L13 4v2H9L7.7 7h-5L1 11.408zm2.387 4H8.04l1.3-1h5.379l-1.5 6H1.458z"},
"folder-plus":{16:"M14 9h1v5H0V3h1.7L3 2h2.981l1.04.79A1.966 1.966 0 0 0 7 3v1h-.037L5.644 3H3.34l-1.3 1H1v2h9v1H1v6h13zm-1-6V0h-1v3H9v1h3v3h1V4h3V3z"},globe:{16:"M8 0a8 8 0 1 0 8 8 7.999 7.999 0 0 0-8-8zm3.83 3.162c.067.24.01.47-.273.47a.669.669 0 0 0 .16-.55c.039.027.08.055.112.08zm-.372-.95l.207.072a.803.803 0 0 0-.428.158.406.406 0 0 1 .222-.23zM7.792 1.01a2.963 2.963 0 0 1 .638.012l-.054.083c-.123-.004-.54-.027-.653-.01.073-.074.015-.021.07-.085zM2.527 12.357a7.018 7.018 0 0 1-.414-.58 6.759 6.759 0 0 1 .58.405.918.918 0 0 0-.166.175zm7.606 2.31a6.986 6.986 0 0 1-7.058-1.695c-.003-.07 0-.08.059-.122 1-.692.512-1.033-1.055-2.047-.123-.084-.179-.132-.19-.165-.075-1.662-.082-.85-.662-2.313a2.123 2.123 0 0 0-.222-.427 6.967 6.967 0 0 1 1.911-4.701c.616.008.934.146 1.176-.473.015-.04.06-.16.073-.121.7.04.593.475 1.518-.9a1.156 1.156 0 0 0 .157-.36c.2-.065.405-.119.613-.166-.465.623-.137 1.095.319 1.095.141 0 .731-.33 1.07-.387.608.03.853.118 1.201-.337a2.112 2.112 0 0 1 .3-.416 6.936 6.936 0 0 1 1.548.498c-.508.388-.222.396-.56.838-.334.444-.017.803.425 1.138a2.056 2.056 0 0 0-.28.242.59.59 0 0 0-.223-.321.669.669 0 0 0-.735-.596.599.599 0 0 0-.147 1.122.573.573 0 0 0 .292.473c-.164.242-.081.414-.01.663-.052 0-.29-.069-.374-.069-.72 0-.785 1.215-.46 1.543-.79.68-.809.795-.917 1.017a1.921 1.921 0 0 0-1.248 1.686c0 .41-.25.36-.317.682-.102.485.146.728.435 1.006.32.311.152.587.628.973.572.477.863.374 1.603.268a2.339 2.339 0 0 1 1.257.134c.09.021.181.057.1.298a.596.596 0 0 0 .133.739.275.275 0 0 1 .11.19c.05.639-.197.474-.47 1.01zm.383-8.91l.2.098a.313.313 0 0 1 .255-.052c.37.233.57.424.93.066a2.055 2.055 0 0 1 .325.339.593.593 0 0 0 .914.493c.214.276.447.177.757.255a1.3 1.3 0 0 1 .088.284 1.486 1.486 0 0 1-.52.136c-.114-.03-.231-.125-.35-.125a.533.533 0 0 0-.656.356 1.398 1.398 0 0 1-.698-.416c.1-.693-.948-.767-1.63-.616.02-.025.108-.16.089-.185a.665.665 0 0 0 .094-.14.838.838 0 0 0 .315-.284zm-.996.222a.732.732 0 0 0-.064.138c0-.055.002-.102.005-.147l.059.01zm1.844 8.16a1.248 1.248 0 0 0-.241-1.173.955.955 0 0 0-.68-1.316c-.006-.002-.38-.081-.473-.113-1.052-.302-1.98.487-2.265-.484a2.546 2.546 0 0 0-.573-.79c.382-.424.237-.624.333-1.035.313-1.157.897-.378 1.276-1.376.017-.042.634-.564.768-.765.379.458.848.204 1.465.243.133.77 1.55 1.512 2.121.763.703.292 1.96-.216 1.646-1.118v.001a1.301 1.301 0 0 0-.112-.342.945.945 0 0 0-.935-.511.8.8 0 0 0-.72-.205c-.255-.554-.903-1.088-1.488-.733a.95.95 0 0 0-.705-.183.798.798 0 0 0-.36-.04 5.498 5.498 0 0 0-.033-.098.782.782 0 0 0 .065-.216.87.87 0 0 0 .691-.33c1.179.708 2.182-1.263.96-1.935.016 0 .03-.01.046-.011a6.994 6.994 0 0 1-.786 11.766z",
24:"M13.802 4.306a.683.683 0 01.708.76.528.528 0 01.357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 01-.046-1.135zM11.5 23A11.5 11.5 0 010 11.5v-.021a11.738 11.738 0 012.057-6.534 12.15 12.15 0 014.12-3.637h.005A11.595 11.595 0 0113.618.202l.002.002a11.525 11.525 0 019.325 10.188v.004A11.497 11.497 0 0111.5 23zm9.795-7.748a7.604 7.604 0 01-.666-1.746 4.55 4.55 0 01-.651-1.655 1.383 1.383 0 01-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 00-.992.133l-.113.177-.794.021a2.538 2.538 0 01-.483-.213 7.396 7.396 0 00-.628.541 1.463 1.463 0 01-.941.97 1.544 1.544 0 00-.961 1.24 2.264 2.264 0 01-.449 1.34 2.446 2.446 0 01.811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 01.028.937 1.452 1.452 0 01-.025.098 2.11 2.11 0 01.327 1.883 10.447 10.447 0 004.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 011.517 2.251 3.648 3.648 0 01.435.592 10.477 10.477 0 00-3.824-8.016h-.103a1.768 1.768 0 01-1.938 2.838 4.716 4.716 0 01-.723.7 1.525 1.525 0 01.97.078l.183-.654a6.478 6.478 0 012.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 00-.843-1.825 18.554 18.554 0 00.793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 01-.102.147zm-8.209 16.74a1.557 1.557 0 01.244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 00-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 00-2.22-.08 1.602 1.602 0 01-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 011.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 01.384.135s.282.166.372.2l.074-.002a3.411 3.411 0 012.208-.269.557.557 0 01.432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 00.066-.184.48.48 0 01.562-.362c.2.01.514.231.703.231a4.382 4.382 0 00.786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 00-.161-.218c.007.01-.022.034-.042.068a.52.52 0 01-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 00-.72-.63.545.545 0 01-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 01-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 00.887-1.249.868.868 0 01-.316-.254.095.095 0 00-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 01-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 01.34-.69 1.71 1.71 0 01.588-.442 10.406 10.406 0 00-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 00-1.884.475 7.258 7.258 0 01-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 00-.588-.039A10.467 10.467 0 001 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 012.006 1.477.495.495 0 01.111.525c-.07.264-.346.34-.568.502a.431.431 0 00-.21.376 10.425 10.425 0 0011.017 2.669z"},
grid:{16:"M0 0v7h7V0zm6 6H1V1h5zm3-6v7h7V0zm6 6h-5V1h5zM0 9v7h7V9zm6 6H1v-5h5zm3-6v7h7V9zm6 6h-5v-5h5z",32:"M3 15h12V3H3zM4 4h10v10H4zm13 11h12V3H17zm1-11h10v10H18zM3 29h12V17H3zm1-11h10v10H4zm13 11h12V17H17zm1-11h10v10H18z"},home:{16:"M8 0L6 2V0H3v5L0 8h1v8h5v-6h4v6h5V7.978h1zm6 15h-3V9H5v6H2V7.414l2-2V1h1v3.414l3.001-3L14 7.395z"},image:{16:"M1 2v12h14V2zm13 11H2V3h12zm-1-1H3v-1h10zM3 8.678l.333-.356a.3.3 0 0 1 .445 0 .3.3 0 0 0 .444 0l2.242-2.39a.3.3 0 0 1 .423-.021l2.255 2.005a.299.299 0 0 0 .39.01l1.361-.915a.3.3 0 0 1 .41.032L13 8.678V10H3zM11.894 9l-.89-.859-.846.565a1.299 1.299 0 0 1-1.68-.043L6.732 7.11 4.958 9zm-.644-4.5a.75.75 0 1 1-.75-.75.75.75 0 0 1 .75.75z",
32:"M2 4v24h28V4zm27 23H3V5h26zm-9.5-17A1.5 1.5 0 1 1 21 8.5a1.502 1.502 0 0 1-1.5 1.5zm.5-1.5a.5.5 0 1 0-.5.5.5.5 0 0 0 .5-.5zM28 25H4v-1h24zM7.624 16.026l.827.39 5.138-4.267a.652.652 0 0 1 .857.013l.863.774c.864.771 2.71 2.382 3.845 3.357l2.923-2.748a.652.652 0 0 1 .926.033L28 19v4H4v-4.547l2.905-2.31a.642.642 0 0 1 .719-.117zM27 22v-2.61l-4.494-4.875-3.322 3.122-.682-.586a355.007 355.007 0 0 1-3.861-3.37l-.637-.573-5.4 4.487-1.184-.56L5 18.88V22z"},info:{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",
24:"M11.5 1A10.5 10.5 0 1 0 22 11.5 10.499 10.499 0 0 0 11.5 1zm0 20.1a9.6 9.6 0 1 1 9.6-9.6 9.61 9.61 0 0 1-9.6 9.6zM13 18h-3v-1h1V8h1v9h1zM11.5 6.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM12 9h-2V8h2z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm1.5-6h-3v-1h1V11h1v11h1zM15.5 8.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM16 12h-2v-1h2z"},"information-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM9 12H7V6h2zm0-7H7V3h2z"},
key:{16:"M10.075 1A4.926 4.926 0 0 0 5.15 5.925a4.874 4.874 0 0 0 .51 2.141L0 13.726V16h3.222l.022-.01.756-.756V14h1.233L6 13.233V12h1.232l1.393-1.393a4.869 4.869 0 0 0 1.45.243 4.925 4.925 0 1 0 0-9.85zM6.818 11H5v1.82l-.18.18H3v1.82l-.18.18H1v-.86l5.204-5.204a4.918 4.918 0 0 0 1.434 1.244zm3.257-1.15A3.925 3.925 0 1 1 14 5.925a3.93 3.93 0 0 1-3.925 3.925zM11.5 3A1.5 1.5 0 1 0 13 4.5 1.5 1.5 0 0 0 11.5 3zm0 2a.5.5 0 1 1 .5-.5.501.501 0 0 1-.5.5z"},launch:{16:"M14 8h1v7H1V1h7v1H2v12h12zm-4-7v1h3.29L7.62 7.67l.71.71L14 2.71V6h1V1z",
24:"M13 2v1H3v18h18V11h1v11H2V2zm9 6V2h-6v1h4.3l-8.41 8.403.707.707L21 3.714V8z"},layer:{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.205 8.205 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.213 7.213 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363z"},
"layer-basemap":{32:"M31.603 27.899l-4-24s-6-2-11 0a13.388 13.388 0 0 1-11 0L1.61 27.865c.752.17 7.816 2.427 14.994.034 8.04-2.68 15.96.48 15 0zm-7.927-2.091a23.33 23.33 0 0 0-7.389 1.142 21.34 21.34 0 0 1-6.756 1.04 28.2 28.2 0 0 1-6.785-.864L6.39 5.266a13.201 13.201 0 0 0 4.553.8 16.268 16.268 0 0 0 6.032-1.238 12.652 12.652 0 0 1 4.703-.818 20.298 20.298 0 0 1 5.043.674l3.651 21.908a29.998 29.998 0 0 0-6.696-.784zM1.609 27.865l-.006.034c-.103-.052-.084-.055.006-.034zm23.36-21.53a18.501 18.501 0 0 0-2.209-.284l-.011-.001a15.46 15.46 0 0 0-1.071-.04 10.688 10.688 0 0 0-3.961.675 18.243 18.243 0 0 1-6.774 1.382 15.075 15.075 0 0 1-2.927-.282v.001l-.018-.002-2.966 17.79.02.003H5.05a25.156 25.156 0 0 0 4.495.414h.004c.039 0 .075-.005.115-.006a21.638 21.638 0 0 0 3.946-.4v-.005c2.635-.535 4.778-1.771 10.065-1.771a30.81 30.81 0 0 1 4.253.299v-.001h.002zm-3.04 16.538a36.78 36.78 0 0 0-1.061.083 1.708 1.708 0 0 0 .73-1.412 1.502 1.502 0 0 0-.18-.71l.072-.066a2.025 2.025 0 0 0 .82-1.55v-.25a1.794 1.794 0 0 0 .602.105 1.999 1.999 0 0 0 1.63-.97 2.347 2.347 0 0 0 .514.676 2.616 2.616 0 0 0 1.067.564l.603 3.614a31.59 31.59 0 0 0-3.05-.15c-.036 0-.07.004-.106.005a27.32 27.32 0 0 0-1.64.06zM20.693 8.326a2.143 2.143 0 0 0-1.254.76 1.592 1.592 0 0 0-.417 1.319l.023.112c.196.96.153 1.307-.186 1.49a3.217 3.217 0 0 0-1.239 1.38 2.399 2.399 0 0 1-.276.43c.032-.03-.06-.1-.128-.15a2.19 2.19 0 0 0-1.366-.537 1.864 1.864 0 0 0-1.813 1.907c0 .32-.32.815-.48.815a.556.556 0 0 1-.26-.038 2.364 2.364 0 0 0-2.032-1.539 2.151 2.151 0 0 0-2.099 2.196 3.19 3.19 0 0 0 .128.849 1.341 1.341 0 0 1 .062.344.94.94 0 0 1-.164.406 2.694 2.694 0 0 0-.408 1.363 1.746 1.746 0 0 0 1.812 1.667 2.718 2.718 0 0 0 1.043-.213 4.21 4.21 0 0 1-.377.41 2.41 2.41 0 0 0-.75 3.023 1.469 1.469 0 0 0 .58.61c-.35.028-.7.033-1.052.042-.17.004-.336.018-.508.018a23.876 23.876 0 0 1-3.329-.24L8.838 8.932a16.49 16.49 0 0 0 2.123.135 19.256 19.256 0 0 0 7.146-1.454 9.276 9.276 0 0 1 2.658-.57h.016q-.032.073-.058.15a1.815 1.815 0 0 0-.095.583 3.228 3.228 0 0 0 .064.549zm-5.354 15.778a16.56 16.56 0 0 1-2.06.523c-.577-.338-1.65-.315-1.872-.755-.755-1.509 1.29-1.896 1.29-3.103 0-.3-.154-.909-.621-.956-.653-.067-.823.287-1.48.287a.751.751 0 0 1-.812-.667c0-.718.572-1.052.572-1.769 0-.466-.19-.729-.19-1.193a1.15 1.15 0 0 1 1.098-1.196c.598 0 .86.49 1.146 1.004a1.19 1.19 0 0 0 1.147.573c.907 0 1.48-1.133 1.48-1.815a.875.875 0 0 1 .813-.907c.644 0 .883.669 1.528.669 1.062 0 1.022-1.405 1.958-1.912 1.146-.62.812-1.956.668-2.672-.062-.319.54-.932.861-.91 1.337.097.764-1 .764-1.528a.824.824 0 0 1 .042-.263 1.218 1.218 0 0 1 .355-.49A16.23 16.23 0 0 1 24.1 7.2l1.83 10.981a1.527 1.527 0 0 1-.22-.154c-.456-.4-.446-1.2-1.068-1.2-.835 0-.901 1.246-1.736 1.246-.379 0-.557-.268-.935-.268a.616.616 0 0 0-.667.546v.868c0 .733-.978.879-.978 1.614 0 .299.266.41.266.71 0 .934-1.528.893-1.739 1.692a24.652 24.652 0 0 0-3.514.869z"},
"layer-feature":{32:"M27 4a20.57 20.57 0 0 0-4.061-.793 3.177 3.177 0 0 1 .061.6v.412a20.975 20.975 0 0 1 3.117.565l3.614 21.686a20.65 20.65 0 0 0-5.842-.803 25.953 25.953 0 0 0-8.205 1.385 23.961 23.961 0 0 1-7.573 1.281 18.036 18.036 0 0 1-5.993-.957L5.804 5.26A22.899 22.899 0 0 0 9 5.793V4.787A20.657 20.657 0 0 1 5 4L1 28s6 3 15 0 15 0 15 0zm-5 .608v10.665l-6 5.996-6-5.996V4.608C10 2.455 12.258 0 16 0s6 2.455 6 4.608zm-6 15.247l5-4.996V4.607C21 3.095 19.262 1 16 1s-5 2.095-5 3.607V14.86zM19 7a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2z"},
"layer-graphics":{32:"M31 27.9c.96.48-6.96-2.68-15 0s-15.96-.48-15 0l4-24a13.388 13.388 0 0 0 11 0c5-2 11 0 11 0zm-15.316-.949a23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04zm1.543-17.28a12.423 12.423 0 0 1 4.305-.773 20.349 20.349 0 0 1 2.964.229l-.132-.791a17.556 17.556 0 0 0-3.29-.327 10.623 10.623 0 0 0-3.96.774 16.71 16.71 0 0 1-6.188 1.303 23.281 23.281 0 0 1-3.488-.273l-.16.96a26.752 26.752 0 0 0 3.219.202 19.531 19.531 0 0 0 6.73-1.303zm6.41 12.159A26.767 26.767 0 0 0 16 23v-7.828A26.697 26.697 0 0 1 23.637 14c.58 0 1.13.023 1.658.06l1.327 7.965a23.502 23.502 0 0 0-2.985-.195zM17 21.688a27.149 27.149 0 0 1 6.637-.858c.592 0 1.182.023 1.784.068l-.98-5.883Q24.047 15 23.636 15a25.363 25.363 0 0 0-6.637.927zm-8 2.2a3.757 3.757 0 0 1-4-3.445A3.757 3.757 0 0 1 9 17a3.757 3.757 0 0 1 4 3.443 3.757 3.757 0 0 1-4 3.446zm3-3.445A2.768 2.768 0 0 0 9 18a2.768 2.768 0 0 0-3 2.443 2.769 2.769 0 0 0 3 2.446 2.769 2.769 0 0 0 3-2.446z"},
"layer-imagery":{32:[{d:"M23.463 23.2a26.071 26.071 0 0 0-3.463.224v-5.076a34.065 34.065 0 0 1 5.302-.251l.861 5.191c-.9-.059-1.804-.088-2.7-.088zM13 8.705v4.258c.456-.124.916-.253 1.392-.389A46.427 46.427 0 0 1 19 11.432V7.347a16.922 16.922 0 0 0-2.396.56A22.646 22.646 0 0 1 13 8.705z",opacity:.25},{d:"M13 13.999a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-4.463 11.8A16.675 16.675 0 0 0 12 25.477v-5.1a15.064 15.064 0 0 1-3.463.395 20.464 20.464 0 0 1-2.259-.142l-.796 4.796a13.024 13.024 0 0 0 3.055.375z",
opacity:.5},{d:"M23.462 27.2A33.153 33.153 0 0 1 31 28L27 3.9a26.401 26.401 0 0 0-5.926-.689c-5.144 0-5.927 1.657-10.735 1.657A14.99 14.99 0 0 1 5 3.9L1 28a16.273 16.273 0 0 0 7.538 1.8c6.876 0 8.048-2.6 14.924-2.6zm-21.355.234L5.795 5.217a15.6 15.6 0 0 0 4.544.651 17.42 17.42 0 0 0 5.445-.847 16.628 16.628 0 0 1 5.29-.81 26.164 26.164 0 0 1 5.05.518l3.651 21.999a37.286 37.286 0 0 0-6.313-.528 22.381 22.381 0 0 0-7.77 1.348A20.422 20.422 0 0 1 8.539 28.8a15.989 15.989 0 0 1-6.43-1.366zM24.384 6.456a23.558 23.558 0 0 0-3.31-.245 14.762 14.762 0 0 0-4.738.733 19.402 19.402 0 0 1-5.996.924 18.182 18.182 0 0 1-2.92-.228L4.349 26.146a14.096 14.096 0 0 0 4.188.654 18.525 18.525 0 0 0 6.541-1.154 24.357 24.357 0 0 1 8.385-1.446c1.448 0 2.763.078 3.896.188zM20 12.29a26.155 26.155 0 0 1 4.29-.29l.845 5.097a35.442 35.442 0 0 0-5.135.242zm3.519-4.935l.604 3.643a27.235 27.235 0 0 0-4.123.276V7.246c.33-.02.68-.035 1.074-.035a21.744 21.744 0 0 1 2.445.143zm-6.915.553A16.922 16.922 0 0 1 19 7.347v4.085a46.427 46.427 0 0 0-4.608 1.142c-.475.136-.936.265-1.392.389V8.705a22.646 22.646 0 0 0 3.604-.798zM13 14a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-2.66-5.13c.603 0 1.146-.027 1.66-.065v4.414a13.823 13.823 0 0 1-4.56.414l.808-4.872a19.724 19.724 0 0 0 2.092.108zM12 19.344a15.286 15.286 0 0 1-5.558.299l.832-5.012c.407.04.808.066 1.198.066A15.487 15.487 0 0 0 12 14.241zm-6.518 6.08l.796-4.796a20.464 20.464 0 0 0 2.26.143A15.064 15.064 0 0 0 12 20.376v5.1a16.675 16.675 0 0 1-3.463.324 13.024 13.024 0 0 1-3.055-.375zm9.289-.73a39.72 39.72 0 0 1-1.771.537V20.12a49.66 49.66 0 0 0 1.587-.48A31.896 31.896 0 0 1 19 18.5v5.077a30.389 30.389 0 0 0-4.23 1.117zM20 23.423v-5.076a34.138 34.138 0 0 1 5.302-.25l.861 5.19c-.9-.059-1.804-.088-2.7-.088a26.071 26.071 0 0 0-3.463.224z"}]},
"layer-points":{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.204 8.204 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.212 7.212 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363zM4.5 5.5a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm6 3a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm-7 2a1 1 0 1 1 1 1 1 1 0 0 1-1-1z",
32:"M1.006 27.866L1 27.9c-.103-.051-.085-.055.006-.034zM16 27.9c-7.178 2.393-14.242.137-14.994-.034L5 3.9a13.387 13.387 0 0 0 11 0c5-2 11 0 11 0l4 24c.96.48-6.96-2.68-15 0zm13.769-1.307L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04 23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784zM12.5 10.5a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm9 4a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm-10 5a1 1 0 1 0 1 1 1 1 0 0 0-1-1z"},
"layer-tile":{32:"M31 28s-6-3-15 0-15 0-15 0l2.714-16.286.87.87-2.466 14.792a18.032 18.032 0 0 0 5.993.957 23.961 23.961 0 0 0 7.573-1.281 25.957 25.957 0 0 1 8.205-1.385 20.658 20.658 0 0 1 5.842.803L26.117 4.784a20.35 20.35 0 0 0-5.043-.673 12.939 12.939 0 0 0-4.286.677L16 4c5-2 11 0 11 0zM16 7h9v17H8v-9h8zM9 23h3.243l.04-.137a6.48 6.48 0 0 1 .546-1.23 3.236 3.236 0 0 0 .337-.757.575.575 0 0 0-.1-.327 1.52 1.52 0 0 1-.218-.787c0-1.236 1.963-2.573 2.619-2.573H16V16H9zm7 0v-4.812h-.533c-.347.075-1.62 1.022-1.62 1.574a.55.55 0 0 0 .1.313 1.545 1.545 0 0 1 .219.801 2.894 2.894 0 0 1-.454 1.227 6.684 6.684 0 0 0-.414.897zm8 0v-4.918a10.162 10.162 0 0 0-2.276.865c-1.58.79-3.622.08-4.724-.427V23zm0-7h-7v1.41c.751.388 2.867 1.345 4.276.643A10.442 10.442 0 0 1 24 17.058zm-7-1h7V8h-7zM6 14V5h9v9zm8-8H7v5.145a.824.824 0 0 0 .627-.21 2.075 2.075 0 0 0 .663-1.392 1.508 1.508 0 0 1 1.448-1.558 1.893 1.893 0 0 1 1.194.494 1.296 1.296 0 0 0 .467.255.517.517 0 0 0 .123.034c.316 0 .486-.183.738-.608.042-.07.08-.129.126-.212A2.776 2.776 0 0 1 14 6.428zm0 7V7.513a2.36 2.36 0 0 0-.743.926c-.334.592-.75 1.329-1.736 1.329a1.735 1.735 0 0 1-1.069-.403l-.124-.09a.997.997 0 0 0-.59-.29c-.257 0-.448.294-.448.558a2.6 2.6 0 0 1-.112.672 3.02 3.02 0 0 1-.908 1.487 1.854 1.854 0 0 1-1.205.46c-.021 0-.043-.005-.065-.006V13z"},
layers:{16:"M8.023 1.023l-8 4.5 8 4.5 8-4.5zm-5.96 4.5l5.96-3.352 5.96 3.352-5.96 3.353zm13.96 3l-8 4.5-8-4.5 1.02-.573 6.98 3.926 6.98-3.926zm-8 6.353l6.98-3.926 1.02.573-7.914 4.452a.175.175 0 0 1-.171 0L.023 11.523l1.02-.573z"},lightbulb:{24:"M16.337 3.055a6.057 6.057 0 0 0-4.675-2.051l-.162.002-.162-.002a6.057 6.057 0 0 0-4.675 2.05 6.46 6.46 0 0 0-1.63 4.802 11.406 11.406 0 0 0 2.014 4.465 6.703 6.703 0 0 1 .75 1.322 12.957 12.957 0 0 1 .113 1.333c.019.366.037.71.074.994a2.84 2.84 0 0 0 .704 1.576l-.525.458a.804.804 0 0 0 .066 1.264l.414.293-.364.263a.804.804 0 0 0-.333.689.794.794 0 0 0 .37.641l2.45 1.625a1.311 1.311 0 0 0 .723.22h.016a1.316 1.316 0 0 0 .73-.22l2.43-1.613a.803.803 0 0 0 .059-1.34l-.367-.265.418-.295a.806.806 0 0 0 .062-1.263l-.525-.458a2.87 2.87 0 0 0 .707-1.596c.034-.263.052-.607.07-.973a12.957 12.957 0 0 1 .114-1.333 6.703 6.703 0 0 1 .75-1.322 11.406 11.406 0 0 0 2.014-4.465 6.46 6.46 0 0 0-1.63-4.801zm-2.43 17.414l-2.225 1.476a.41.41 0 0 1-.185.053h-.002a.32.32 0 0 1-.177-.053L9.093 20.47l1.264-.923-1.35-.953.68-.594h3.626l.68.594-1.35.953zM12 17h-1v-3h1zm4.975-9.263a10.671 10.671 0 0 1-1.863 4.042 5.638 5.638 0 0 0-.895 1.7 13.401 13.401 0 0 0-.125 1.446c-.018.336-.033.65-.07.93A1.898 1.898 0 0 1 13.456 17H13v-3.421l1.075-3.325-.951-.309L12.136 13h-1.272l-.988-3.055-.951.309L10 13.579V17h-.456a1.93 1.93 0 0 1-.57-1.182c-.033-.243-.048-.557-.066-.893a13.401 13.401 0 0 0-.125-1.446 5.638 5.638 0 0 0-.895-1.7 10.671 10.671 0 0 1-1.863-4.042 5.49 5.49 0 0 1 1.386-4.02 5.083 5.083 0 0 1 3.927-1.713l.162.002.162-.002a5.083 5.083 0 0 1 3.927 1.714 5.49 5.49 0 0 1 1.386 4.02z"},
link:{16:"M5 9.5a4.505 4.505 0 0 0 .048.493c-.007-.007-.016-.011-.023-.018l-3-3a3.5 3.5 0 1 1 4.95-4.95l3 3a3.486 3.486 0 0 1-1.31 5.76l-.226-.225a1.484 1.484 0 0 1-.37-.631 2.495 2.495 0 0 0 1.199-4.197l-3-3a2.5 2.5 0 1 0-3.536 3.536L5.09 8.625A4.498 4.498 0 0 0 5 9.5zm11 3a3.475 3.475 0 0 0-1.025-2.475l-3-3c-.007-.007-.016-.011-.023-.018A4.505 4.505 0 0 1 12 7.5a4.498 4.498 0 0 1-.089.876l2.357 2.356a2.5 2.5 0 0 1-.009 3.544 2.561 2.561 0 0 1-3.527-.008l-3-3a2.5 2.5 0 0 1-.094-3.436 2.43 2.43 0 0 1 1.3-.74 1.485 1.485 0 0 0-.377-.652l-.222-.222a3.482 3.482 0 0 0-1.314 5.757l3 3a3.5 3.5 0 0 0 4.937.012l-.351-.355.352.355A3.476 3.476 0 0 0 16 12.5z",
24:"M7 14c0 .025.003.05.004.075l-3.54-3.54a5 5 0 0 1 7.072-7.07l4 4a4.992 4.992 0 0 1-1.713 8.187l-.237-.237a1.998 1.998 0 0 1-.413-.609 3.985 3.985 0 0 0 1.656-6.635l-4-4a4 4 0 0 0-5.369-.26l-.318-.387.318.386a4 4 0 0 0-.29 5.92l2.94 2.94A7.012 7.012 0 0 0 7 14zm16 4a4.97 4.97 0 0 0-1.464-3.536l-3.54-3.539c0 .025.004.05.004.075a7.087 7.087 0 0 1-.113 1.23l2.942 2.941a4 4 0 0 1-.128 5.78l.338.368-.338-.368a4 4 0 0 1-5.53-.122l-4-4a3.966 3.966 0 0 1 1.658-6.631 1.998 1.998 0 0 0-.415-.613l-.234-.234a5.004 5.004 0 0 0-1.907 1.315 5 5 0 0 0 .191 6.87l4 4A5 5 0 0 0 23 18z"},
list:{16:"M6 14h9v1H6zm-5-1h3v3H1zm1 2h1v-1H2zM6 2v1h9V2zm0 7h9V8H6zM1 1h3v3H1zm1 2h1V2H2zM1 7h3v3H1zm1 2h1V8H2z"},locator:{32:"M27 15h2l-4-4V3h-5v3l-4.5-4.5L2 15h2v14H2v1h27v-1h-2zM21 4h3v6l-3-3zm-5.5-1.086L26.586 14H4.414zM5 29V15h21v14zm4-4h13v-7H9zm12-6v5h-5v-5zm-11 0h5v5h-5z"},lock:{16:"M13 7V5A5 5 0 0 0 3 5v2a1.003 1.003 0 0 0-1 1v7a1.003 1.003 0 0 0 1 1h10a1.003 1.003 0 0 0 1-1V8a1.003 1.003 0 0 0-1-1zM4 5a4 4 0 0 1 8 0v2h-1V5a3 3 0 0 0-6 0v2H4zm6 2H6V5a2 2 0 0 1 4 0zm3 8H3V8h10zm-5-1H7V9h1v1h1v1H8v1h1v1H8z",
32:"M26 14h-2v-3.5a8.5 8.5 0 0 0-17 0V14H5a2.006 2.006 0 0 0-2 2v14a2.006 2.006 0 0 0 2 2h21a2.006 2.006 0 0 0 2-2V16a2.006 2.006 0 0 0-2-2zM8 10.5a7.5 7.5 0 0 1 15 0V14h-1v-3.5a6.5 6.5 0 0 0-13 0V14H8zM21 14H10v-3.5a5.5 5.5 0 0 1 11 0zm6 16a1.001 1.001 0 0 1-1 1H5a1.001 1.001 0 0 1-1-1V16a1.001 1.001 0 0 1 1-1h21a1.001 1.001 0 0 1 1 1zM16 19h1v1h-1zm-1 1h1v1h1v1h-1v1h1v1h-1v1h1v1h-1v1h-1z"},line:{16:"M6 5v1.293L9.707 10h.328L14 3.657V2h2v2h-1.035L11 10.343V12H9v-1.293L5.293 7h-.492L2 12.383V14H0v-2h1.073L4 6.374V5z",
24:"M21 6h.046l-5.25 9h-.944L10 9.455V7H7v2.926L1.862 18H0v3h3v-2.926L8.138 10h1.01L14 15.545V18h3v-3h-.046l5.25-9H24V3h-3zM8 8h1v1H8zM2 20H1v-1h1zm14-3h-1v-1h1zm7-13v1h-1V4z"},"magnifying-glass-plus":{16:"M15.805 13.918l-3.067-3.068a.668.668 0 0 0-.943 0l-.124.124-.968-.968a5.5 5.5 0 1 0-.69.69l.968.968-.13.129a.667.667 0 0 0 0 .943l3.068 3.067a.665.665 0 0 0 .943 0l.943-.942a.666.666 0 0 0 0-.943zM9.683 9.68A4.47 4.47 0 0 1 6.5 10.999a4.502 4.502 0 1 1 3.183-1.318zm4.708 5.18l-2.597-2.596.473-.473 2.595 2.598zM7 6h2v1H7v2H6V7H4V6h2V4h1z"},
map:{16:"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.498 1.498 0 0 0 .718-1.267 1.24 1.24 0 0 0-.053-.358 1.594 1.594 0 0 0 .326-.607c.03.002.062.003.093.003a1.415 1.415 0 0 0 .836-.266 1.517 1.517 0 0 0 .126.124 2.385 2.385 0 0 0 1.564.68H14v2h-3.183zM14 11h-.43a1.464 1.464 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375a1.545 1.545 0 0 0 .09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.619.619 0 0 1 .59-.643c.323 0 .464.264.618.54a.642.642 0 0 0 .617.308c.49 0 .798-.61.798-.977a.471.471 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823a.434.434 0 0 1 .022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.653.653 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44a1.496 1.496 0 0 0 .112.567 1.6 1.6 0 0 0-.422.643 1.428 1.428 0 0 0-.074.442 1.676 1.676 0 0 0-.536.43 1.317 1.317 0 0 0-.32 1.091 3.213 3.213 0 0 1 .066.414 1.987 1.987 0 0 0-.649.67 1.462 1.462 0 0 0-.674-.166 1.447 1.447 0 0 0-1.383 1.086 1.443 1.443 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.371 1.371 0 0 0 .984 1.29 1.583 1.583 0 0 0-.003 1.549c.143.286.636.774.534.774z",
24:"M22.82 15.995l-.02-.016V1.2H1.2v21.6h21.6v-6.78zM22 15.81a2.898 2.898 0 0 1-.749.147 2.476 2.476 0 0 1-.396.044c-.319 0-.746-.376-1.03-.625a1.32 1.32 0 0 1-.214-.39c-.145-.339-.39-.907-1.04-.907a1.585 1.585 0 0 0-1.062.414.625.625 0 0 1-.444.2.77.77 0 0 1-.237-.086 1.52 1.52 0 0 0-.66-.178 1.068 1.068 0 0 0-1.168.94v.752c0 .098-.05.161-.233.346a1.455 1.455 0 0 0-.526 1.055 1.146 1.146 0 0 0 .357.73c.036.042.086.1.11.105a1.85 1.85 0 0 1-.444.16c-.444.122-1.186.326-1.186 1.14a1.214 1.214 0 0 0 .318.73c.029.037.066.086.087.116-.048.124-.14.328-.235.547a15.9 15.9 0 0 0-.391.951h-2.58l-.002-.287a2.293 2.293 0 0 1 .184-.817l.053-.15a2.931 2.931 0 0 0 .186-.999c0-.871-.876-1.076-1.4-1.198-.172-.04-.432-.102-.464-.108-.174-.345-.088-.485.357-.93a1.925 1.925 0 0 0 .736-1.353 1.198 1.198 0 0 0-.951-1.267 1.626 1.626 0 0 0-.856.137.95.95 0 0 1-.39.091.28.28 0 0 1-.156-.039.974.974 0 0 1 .171-.475 1.898 1.898 0 0 0 .292-.955 2.3 2.3 0 0 0-.093-.608 1.337 1.337 0 0 1-.06-.355.434.434 0 0 1 .386-.464c.156 0 .246.118.488.55a1.44 1.44 0 0 0 1.363.721c1.035 0 1.696-1.164 1.696-1.965 0-.113.08-.232.157-.232.084 0 .157.049.315.169a1.468 1.468 0 0 0 .92.37 1.523 1.523 0 0 0 1.335-.997 1.485 1.485 0 0 1 .483-.607 2.175 2.175 0 0 0 .81-2.616c.049-.08.161-.199.152-.217a1.18 1.18 0 0 0 1.02-.32 1.325 1.325 0 0 0 .17-1.18 1.024 1.024 0 0 1-.03-.286 1.002 1.002 0 0 1 .282-.3 1.451 1.451 0 0 0 .637-1.114 1.487 1.487 0 0 0-.238-.764.583.583 0 0 1-.11-.276c0-.055.109-.404.996-.885.281-.152.445-.226.552-.274H22zM2 2h15.354a1.586 1.586 0 0 0-.634 1.16 1.488 1.488 0 0 0 .239.767.582.582 0 0 1 .11.272c0 .092-.069.165-.288.353a1.707 1.707 0 0 0-.58.743 1.173 1.173 0 0 0-.058.372 2.331 2.331 0 0 0 .053.419c.02.106.058.303.097.303h.001a.537.537 0 0 1-.235.012 1.244 1.244 0 0 0-.91.474 1.051 1.051 0 0 0-.293.94c.165.802.165 1.285-.304 1.538a2.313 2.313 0 0 0-.88.995c-.23.41-.305.488-.463.488-.085 0-.158-.049-.317-.169a1.462 1.462 0 0 0-.918-.37 1.197 1.197 0 0 0-1.157 1.232c0 .323-.3.965-.696.965-.375 0-.448-.134-.504-.233a1.569 1.569 0 0 0-1.347-1.038 1.428 1.428 0 0 0-1.386 1.464 2.3 2.3 0 0 0 .093.608 1.337 1.337 0 0 1 .06.355.974.974 0 0 1-.17.476 1.898 1.898 0 0 0-.293.954 1.103 1.103 0 0 0 1.156 1.04 1.936 1.936 0 0 0 .752-.16.874.874 0 0 1 .35-.09h.007a.537.537 0 0 1 .088.288c0 .19-.167.371-.442.646a1.645 1.645 0 0 0-.546 2.086 1.529 1.529 0 0 0 1.131.632c.199.046.568.132.628.225a1.957 1.957 0 0 1-.132.672l-.05.14a3.23 3.23 0 0 0-.24 1.154l.002.287H2zm11.927 20c.07-.168.156-.363.238-.55.297-.682.335-.775.335-.965a1.173 1.173 0 0 0-.31-.708c-.042-.054-.095-.141-.118-.127a1.528 1.528 0 0 1 .457-.17c.415-.115 1.188-.328 1.188-1.144a1.156 1.156 0 0 0-.359-.735c-.047-.054-.116-.132-.117-.08 0-.1.05-.165.235-.35A1.449 1.449 0 0 0 16 16.12v-.66a.498.498 0 0 1 .407.053 1.498 1.498 0 0 0 .658.178 1.587 1.587 0 0 0 1.063-.414.768.768 0 0 1 .4-.217 1.413 1.413 0 0 1 .165.32 1.965 1.965 0 0 0 .473.745 2.772 2.772 0 0 0 1.69.874 3.63 3.63 0 0 0 .551-.056 2.464 2.464 0 0 1 .395-.044.526.526 0 0 0 .198-.038V22z"},
"mega-phone":{32:"M28.97 4.36a2.06 2.06 0 0 0-2.06.002l-12.768 7.372a1.99 1.99 0 0 1-1 .267H4a2 2 0 0 0-2 2V18a2 2 0 0 0 2 2h4v3a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-1.083l9.91 5.722A2.06 2.06 0 0 0 30 25.857V6.144a2.06 2.06 0 0 0-1.03-1.784zM16 23a1.001 1.001 0 0 1-1 1h-5a1.001 1.001 0 0 1-1-1v-3h4.002a2.53 2.53 0 0 1 1.269.341L16 21.34zm13 2.856a1.06 1.06 0 0 1-1.59.916L14.641 19.4a3.015 3.015 0 0 0-1.5-.4H4a1 1 0 0 1-1-1v-4.01a1 1 0 0 1 1-.999h9.144a2.992 2.992 0 0 0 1.496-.4l12.77-7.362a1.067 1.067 0 0 1 .532-.144A1.06 1.06 0 0 1 29 6.145z"},
"minus-circle":{16:"M12 7v1H3V7zM7.5 0A7.5 7.5 0 1 0 15 7.5 7.5 7.5 0 0 0 7.5 0zm0 14A6.5 6.5 0 1 1 14 7.5 6.508 6.508 0 0 1 7.5 14z"},mobile:{16:"M10.983 0H6.017A2.017 2.017 0 0 0 4 2.017v11.966A2.017 2.017 0 0 0 6.017 16h4.966A2.017 2.017 0 0 0 13 13.983V2.017A2.017 2.017 0 0 0 10.983 0zM6.018 1h4.964a1.016 1.016 0 0 1 1.015 1H5.004a1.016 1.016 0 0 1 1.014-1zM12 13.983A1.018 1.018 0 0 1 10.982 15H9v-1H8v1H6.018A1.018 1.018 0 0 1 5 13.983V13h7zM12 12H5V3h7z",24:"M6 2.524v19.952A1.524 1.524 0 0 0 7.524 24h9.952A1.524 1.524 0 0 0 19 22.476V2.524A1.524 1.524 0 0 0 17.476 1H7.524A1.524 1.524 0 0 0 6 2.524zm12 19.953a.524.524 0 0 1-.524.523H14v-1h-3v1H7.524A.524.524 0 0 1 7 22.477V21h11zM18 20H7V4h11zm-.524-18a.524.524 0 0 1 .524.523V3H7v-.477A.524.524 0 0 1 7.524 2z"},
monitor:{16:"M15.167 1H.833A.834.834 0 0 0 0 1.833v10.334A.834.834 0 0 0 .833 13H6v1H5v1h6v-1h-1v-1h5.167a.834.834 0 0 0 .833-.834V1.834A.834.834 0 0 0 15.167 1zM9 14H7v-1h2zm6-2H1V2h14z",24:"M0 4v14a1.001 1.001 0 0 0 1 1h9v1H8v1h8v-1h-2v-1h9a1.001 1.001 0 0 0 1-1V4a1.001 1.001 0 0 0-1-1H1a1.001 1.001 0 0 0-1 1zm13 16h-2v-1h2zm10-2H1V4h22z"},notebook:{32:"M5 24H3v-1h1v-1h1zm0-5H4v1H3v1h2zm0 6H4v1H3v1h2zM28 2v28H4v-2h1v1h2V3H5v3H3V5h1V2zm-1 1H8v26h19zM5 13H4v1H3v1h2zm0 3H4v1H3v1h2zm0-6H4v1H3v1h2zm0-3H4v1H3v1h2zm10.5 14H13V11h2.5v-1H12v12h3.5zM23 10h-3.5v1H22v10h-2.5v1H23z"},
organization:{16:"M8 3V1H2v2H0v13h7v-4h1v4h7V3zm1 12v-4H6v4H1V4h2V2h4v2h7v11zM6 9h3V6H6zm1-2h1v1H7zm3-1v3h3V6zm2 2h-1V7h1zM2 9h3V6H2zm1-2h1v1H3z"},"pause-f":{16:"M5 14H2a1.003 1.003 0 0 1-1-1V2a1.003 1.003 0 0 1 1-1h3a1.003 1.003 0 0 1 1 1v11a1.003 1.003 0 0 1-1 1zm9-1V2a1.003 1.003 0 0 0-1-1h-3a1.003 1.003 0 0 0-1 1v11a1.003 1.003 0 0 0 1 1h3a1.003 1.003 0 0 0 1-1z"},pencil:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},
pin:{24:"M12 1C8.687 1 6 2.283 6 5.619v11.93l6 6.04 6-6.04V5.619C18 2.283 15.313 1 12 1zm5.1 16.238L12 22.37l-5.1-5.133V5.488c0-3.05 2.773-3.69 5.1-3.69s5.1.64 5.1 3.69zM15 8a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.003 2.003 0 0 0 2-2z"},plus:{16:"M14 8H9v5H8V8H3V7h5V2h1v5h5z",24:"M22 13h-9v9h-1v-9H3v-1h9V3h1v9h9z",32:"M16 17H8v-1h8V8h1v8h8v1h-8v8h-1z"},"plus-circle":{24:"M11.5 1.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 11.5 1.2zm0 19.6a9.3 9.3 0 1 1 9.3-9.3 9.31 9.31 0 0 1-9.3 9.3zM12 11h5v1h-5v5h-1v-5H6v-1h5V6h1z",
32:"M16.5 3.2a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm0 25.6a12.3 12.3 0 1 1 12.3-12.3 12.314 12.314 0 0 1-12.3 12.3zM17 16h7v1h-7v7h-1v-7H9v-1h7V9h1z"},"plus-f":{16:"M9 7h5v2H9v5H7V9H2V7h5V2h2z"},"plus-square":{16:"M13.071 1H1.93a.929.929 0 0 0-.93.929V13.07a.929.929 0 0 0 .929.929H13.07a.929.929 0 0 0 .929-.929V1.93a.929.929 0 0 0-.928-.93zM13 13H2V2h11zm-2-5H8v3H7V8H4V7h3V4h1v3h3z",24:"M19.719 2H3.28A1.281 1.281 0 0 0 2 3.281v16.437A1.282 1.282 0 0 0 3.281 21h16.437A1.282 1.282 0 0 0 21 19.718V3.281A1.281 1.281 0 0 0 19.719 2zM20 19.719a.281.281 0 0 1-.281.281H3.28a.281.281 0 0 1-.28-.281V3.28A.281.281 0 0 1 3.281 3H19.72a.281.281 0 0 1 .281.281zM12 11h6v1h-6v6h-1v-6H5v-1h6V5h1z"},
polygon:{16:"M15 1L6.833 7 1 4v11h14zm-1 13H2V5.639l4.927 2.534L14 2.976z",24:"M2 4.8V22h20V2l-11.538 8.4zm19-.835V21H3V6.661l7.489 4.956z"},point:{16:"M6 11h5V6H6zm1-4h3v3H7zm5 1h4v1h-4zM1 8h4v1H1zm8 8H8v-4h1zM9 5H8V1h1z",24:"M16 12h7v1h-7zM2 13h7v-1H2zm10 10h1v-7h-1zm0-14h1V2h-1zm-2 1h5v5h-5zm1 4h3v-3h-3z"},portal:{24:"M11.994 1.115L3.628 5.356A4.8 4.8 0 0 0 1 9.633v7.596A4.732 4.732 0 0 0 5.4 22h11.141A6.786 6.786 0 0 0 23 15.17V6.104zM22 15.17A5.775 5.775 0 0 1 16.541 21H5.401A3.724 3.724 0 0 1 2 17.229V9.633a3.777 3.777 0 0 1 2.08-3.385l7.939-4.024L22 6.748zm-7.686-2.152l2.537 1.4-4.849 2.676-4.85-2.676 2.537-1.4.932.514-1.606.886 2.987 1.648 2.987-1.648-1.607-.886zM12.002 7.8l-4.85 2.676 4.85 2.676 4.85-2.676zm0 4.324l-2.987-1.648 2.987-1.648 2.987 1.648z"},
promote:{48:"M13.147 22.954l-7.021 2.167-.236-.765 7.021-2.167zm.52 1.686l-7.021 2.167.236.764 7.021-2.166zm24.084-4.995l-1.812.56 3.706 12.01a1.861 1.861 0 0 1-1.262 2.31 1.85 1.85 0 0 1-1.416-.152 1.847 1.847 0 0 1-.894-1.11l-.45-1.457c-1.123-.63-9.406-5.06-16.124-2.985l-.917.283-2.128.657c.094.282.188.565.283.842a7.906 7.906 0 0 0 2.858 1.61 1.423 1.423 0 0 1 .616 2.372l-1.252 1.256a26.572 26.572 0 0 0 3.062 4.561l.6-.185a2.224 2.224 0 0 1 2.778 1.469l.128.414a2.223 2.223 0 0 1-1.468 2.78l-5.163 1.592-.17-.166a29.572 29.572 0 0 1-8.8-14.531l-.613.189a6.55 6.55 0 0 1-3.862-12.516l9.269-2.86.916-.283c6.721-2.073 11.068-10.401 11.64-11.552l-.452-1.466a1.86 1.86 0 0 1 1.26-2.315 1.865 1.865 0 0 1 2.31 1.261l3.64 11.799 1.812-.559a3.23 3.23 0 0 1 1.905 6.173zm-19.788 8.812l-3.39-10.986-8.886 2.741A5.749 5.749 0 1 0 9.077 31.2zm1.411 4.526a8.179 8.179 0 0 1-2.9-1.567 7.292 7.292 0 0 0 1.202 3.414 1.309 1.309 0 0 0 .616.547l1.353-1.356a.622.622 0 0 0-.271-1.038zm-3.685-2.986l-5 1.542a28.411 28.411 0 0 0 8.427 14.028l4.706-1.452a1.423 1.423 0 0 0 .942-1.779l-.128-.414a1.426 1.426 0 0 0-1.78-.94l-1.106.34-.17-.2a27.468 27.468 0 0 1-3.354-4.954 1.696 1.696 0 0 1-1.108-.75c-.905-1.154-1.74-3.717-1.32-4.58a.692.692 0 0 1 .125-.146q-.118-.345-.234-.695zm19.598.719L27.613 5.845c-1.316 2.454-5.463 9.288-11.74 11.225l-.535.164 3.39 10.988.535-.165c6.278-1.935 13.554 1.374 16.024 2.659zm3.59 1.727l-9.25-29.979a1.061 1.061 0 1 0-2.037.592l9.249 29.977a1.061 1.061 0 1 0 2.039-.59zM37.516 18.88a2.43 2.43 0 1 0-1.433-4.643l-1.812.559 1.433 4.643zM43.39 3.96l-.567-.565-4.17 4.17.567.566zM43.235 15.5l4.869-1.305-.207-.772-4.869 1.305zm-1.25 8.108l5.911 1.583.207-.772-5.91-1.584z"},
question:{rtl:"ar",16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 10.5a1 1 0 1 1-1 1 1 1 0 0 1 1-1zM8 9H7a3.046 3.046 0 0 1 1.282-2.51c.47-.462.736-.746.732-1.217a1.324 1.324 0 0 0-1.46-1.27 1.418 1.418 0 0 0-1.548 1.394h-1c0-3.09 5.009-3.154 5.008-.128a2.617 2.617 0 0 1-1.032 1.935C8.462 7.715 8 7.995 8 9z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm.5-9h-1c0-2.959 1.227-3.919 2.371-5.207.916-1.031 1.639-1.846 1.629-3.264C19 9.104 17.08 8 15.167 8 13.16 8 11 9.194 11 11.817h-1a4.523 4.523 0 0 1 1.648-3.628A5.549 5.549 0 0 1 15.168 7C17.637 7 20 8.555 20 11.525a5.598 5.598 0 0 1-1.881 3.932C17.043 16.668 16 17.421 16 20zm-.5 4.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},
"question-f":{24:"M12.5 19.5a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm0-17.3a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zm2.144 9.9l-.113.11a3.321 3.321 0 0 0-1.33 2.79v.2H11.8V15a4.735 4.735 0 0 1 1.77-3.807l.092-.09c.664-.652 1.144-1.122 1.138-1.906A1.998 1.998 0 0 0 12.607 7.2a2.228 2.228 0 0 0-2.424 2.19v.2h-1.4v-.2a3.382 3.382 0 0 1 1.237-2.711 4.082 4.082 0 0 1 2.587-.88A3.36 3.36 0 0 1 16.2 9.194a3.937 3.937 0 0 1-1.556 2.908z",32:"M16.5 25.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zm0-22.3a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm2.77 13.388c-.137.155-.273.3-.406.443A4.936 4.936 0 0 0 17.2 21v.2h-1.4V21a6.202 6.202 0 0 1 2.039-4.92c.128-.138.256-.276.383-.42.922-1.038 1.588-1.787 1.578-3.13 0-2.3-1.824-3.33-3.632-3.33-1.911 0-3.968 1.132-3.968 3.617v.2h-1.4v-.2a4.715 4.715 0 0 1 1.721-3.782A5.741 5.741 0 0 1 16.168 7.8c2.424 0 5.032 1.478 5.032 4.725a5.76 5.76 0 0 1-1.93 4.063z"},
refresh:{16:"M13.91 9h1.01A6.987 6.987 0 0 1 2 11.587V14H1v-4h4v1H2.812A5.99 5.99 0 0 0 13.91 9zM14 2v2.413A6.987 6.987 0 0 0 1.08 7h1.01a5.99 5.99 0 0 1 11.098-2H11v1h4V2z"},reset:{16:"M.146 6.854L4 10.707l3.854-3.853-.707-.707L4.232 9.06a5.48 5.48 0 1 1 3.65 3.697l-.293.956A6.501 6.501 0 1 0 3 7.5a6.58 6.58 0 0 0 .061.854L.854 6.146z"},"road-sign":{32:"M30.927 14.615L17.386 1.076a1.957 1.957 0 0 0-2.77-.002L1.073 14.615a1.96 1.96 0 0 0 0 2.77l13.543 13.542a1.957 1.957 0 0 0 2.768 0l13.543-13.542a1.96 1.96 0 0 0 0-2.77zm-.707 2.063L16.677 30.22a.957.957 0 0 1-1.354 0L1.78 16.678a.96.96 0 0 1 0-1.356l13.543-13.54a.957.957 0 0 1 1.354 0l13.543 13.54a.96.96 0 0 1 0 1.356zM19.354 9.646l3.853 3.855-3.852 3.853-.707-.707L21.293 14h-4.639a4.68 4.68 0 0 0-4.674 4.674v3.282h-1v-3.282A5.68 5.68 0 0 1 16.654 13h4.64l-2.648-2.647z"},
save:{16:"M14.707 3.293l-2-2A.995.995 0 0 0 12 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a.99.99 0 0 0-.293-.707zM9 2v2H8V2zM5 2h2v3h3V2h1v4H5zm6 12H5v-4h6zm3 0h-2V9H4v5H2V2l2 .001V6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V2l2 2z",24:"M22.969.844v21.312a.844.844 0 0 1-.844.844H5.25a.848.848 0 0 1-.506-.168L1.37 20.3a.847.847 0 0 1-.338-.676V.844A.845.845 0 0 1 1.875 0h20.25a.845.845 0 0 1 .844.844zM6 1v8h12V1zm3 21v-5H8v5zm9 0v-7H6v7h1v-6h3v6zm4-21h-3v9H5V1H2v18.548l3 2.278v-7.17A.769.769 0 0 1 5.844 14h12.312a.769.769 0 0 1 .844.656V22h3z"},
search:{16:"M9.85 9.153a5 5 0 1 0-.69.69l4.631 4.631.69-.69zm-1.02-.326A3.973 3.973 0 0 1 6 10a4.002 4.002 0 1 1 2.83-1.172z",24:"M21.995 21.288l-6.855-6.855a7.517 7.517 0 1 0-.707.707l6.855 6.855zm-17.092-7.19a6.501 6.501 0 1 1 9.6-.45l-.854.855a6.501 6.501 0 0 1-8.746-.405z"},"search-f":{24:"M22.289 20.91l-6.847-6.846a7.524 7.524 0 1 0-1.419 1.409l6.852 6.852zM4 9.5A5.5 5.5 0 1 1 9.5 15 5.506 5.506 0 0 1 4 9.5z"},"select-category":{16:"M5 8H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm7-5h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM13 0h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM5 0H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm-4.265 6.646l.738-.738.784.788L4.962 10l.738.738-2.443 2.43z"},
settings:{16:"M2.17 6.06L0 6.862l.009 2.333 2.179.789a6.153 6.153 0 0 0 .317.764l-.966 2.104 1.655 1.643 2.1-.983a6.105 6.105 0 0 0 .765.318L6.863 16l2.333-.008.789-2.18a6.162 6.162 0 0 0 .764-.317l2.104.966 1.643-1.656-.983-2.099a6.097 6.097 0 0 0 .318-.765L16 9.137l-.009-2.333-2.179-.789a6.149 6.149 0 0 0-.318-.764l.967-2.104-1.656-1.643-2.099.983a6.106 6.106 0 0 0-.765-.318L9.137 0 6.804.009l-.789 2.179a6.163 6.163 0 0 0-.764.317L3.147 1.54 1.504 3.195l.983 2.099a6.093 6.093 0 0 0-.318.765zm3.709 1.592a2.15 2.15 0 1 1 1.773 2.47 2.15 2.15 0 0 1-1.773-2.47zm.951 5.382l-.454-.151a5.436 5.436 0 0 1-.644-.268l-.43-.21-1.899.889-.664-.66.876-1.905-.216-.428a5.223 5.223 0 0 1-.265-.64l-.155-.453-1.973-.715-.003-.935 1.963-.728.151-.454a5.436 5.436 0 0 1 .268-.644l.21-.43-.889-1.899.66-.664 1.904.876.43-.216a5.223 5.223 0 0 1 .639-.265l.453-.155.715-1.973.934-.003.728 1.963.455.151a5.368 5.368 0 0 1 .644.268l.43.21 1.899-.889.664.66-.876 1.905.216.428a5.223 5.223 0 0 1 .265.64l.155.453 1.973.715.003.935-1.962.727-.152.454a5.45 5.45 0 0 1-.268.645l-.21.43.889 1.899-.66.664-1.905-.876-.428.216a5.223 5.223 0 0 1-.64.265l-.453.156-.715 1.972-.935.003zM7.998 4.85a3.154 3.154 0 1 0 .512.042 3.138 3.138 0 0 0-.512-.042z"},
share:{16:"M14 9h1v6H1V1h8v1H2v12h12zm-8-.31V11h1V8.69A3.7 3.7 0 0 1 10.6 5h2.68l-1.4 1.42.71.71 2.61-2.61-2.61-2.61-.71.71L13.28 4H10.6A4.67 4.67 0 0 0 6 8.69z"},"sign-out":{16:"M15 1v14H6v-5h1v4h7V2H7v5H6V1zm-4 7H2.773l1.58-1.581-.706-.707-2.81 2.81 2.81 2.808.706-.707L2.73 9H11z"},sliders:{16:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"},"sort-descending":{rtl:!0,16:"M4 5h11v1H4zM1 2h14V1H1zm6 8h8V9H7zm3 4h5v-1h-5z"},"speech-bubble":{16:"M8.666 12h4.084A2.253 2.253 0 0 0 15 9.75v-5.5A2.253 2.253 0 0 0 12.75 2h-9.5A2.253 2.253 0 0 0 1 4.25v5.5A2.253 2.253 0 0 0 3.25 12H4v3.5zM3.25 11A1.251 1.251 0 0 1 2 9.75v-5.5A1.251 1.251 0 0 1 3.25 3h9.5A1.251 1.251 0 0 1 14 4.25v5.5A1.251 1.251 0 0 1 12.75 11H8.334L5 13.5V11zM12 6H4V5h8zm-2 3H4V8h6z"},
star:{16:"M15.977 6.016H9.883L7.998.2 6.112 6.016H-.023l4.97 3.586-1.893 5.813 4.944-3.597 4.943 3.597-1.894-5.813zm-7.979 4.566l-3.038 2.21 1.164-3.573-3.052-2.203h3.767l1.159-3.573 1.158 3.573h3.746l-3.03 2.206 1.162 3.569z"},"star-f":{16:"M7.998.2l1.885 5.816h6.094l-4.93 3.586 1.894 5.813-4.943-3.597-4.944 3.597 1.893-5.813-4.97-3.586h6.135z"},table:{16:"M16 15H0V1h16zM5 9H1v2h4zm1-3v2h4V6zM5 6H1v2h4zm5 8v-2H6v2zm0-5H6v2h4zm1-3v2h4V6zm-6 6H1v2h4zm6-1h4V9h-4zm0 3h4v-2h-4zm4-12H1v3h14z",32:"M2 5v21h27V5zm5 20H3v-4h4zm0-5H3v-4h4zm0-5H3v-4h4zm10 10H8v-4h9zm0-5H8v-4h9zm0-5H8v-4h9zm11 10H18v-4h10zm0-5H18v-4h10zm0-5H18v-4h10zm0-5H3V6h25z"},
tablet:{16:"M15 2H1a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zM1 3.25A.25.25 0 0 1 1.25 3H2v4H1zM1.25 12a.25.25 0 0 1-.25-.25V8h1v4zM3 12V3h10v9zm12-.25a.25.25 0 0 1-.25.25H14V3h.75a.25.25 0 0 1 .25.25z",24:"M22.75 4H1.25A1.25 1.25 0 0 0 0 5.25v13.5A1.25 1.25 0 0 0 1.25 20h21.5A1.25 1.25 0 0 0 24 18.75V5.25A1.25 1.25 0 0 0 22.75 4zM1.25 19a.25.25 0 0 1-.25-.25V13h1v-2H1V5.25A.25.25 0 0 1 1.25 5H3v14zM4 5h17v14H4zm19 13.75a.25.25 0 0 1-.25.25H22V5h.75a.25.25 0 0 1 .25.25z"},text:{24:"M22 5H12V4h10zm0 3h-8v1h8zm0 5v-1h-6v1zM2 17h20v-1H2zm0 4h20v-1H2zm.234-8L7.042 2.049h.916L12.766 13h-1.093L9.917 9H5.083l-1.756 4zm3.288-5h3.956L7.5 3.494z"},
trash:{16:"M2 4l1 12h9l1-12zm9.08 11H3.92L3.087 5h8.826zM5 6.4a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.512.512 0 0 1 1 0v7.2a.512.512 0 0 1-1 0zM11 2V0H4v2H1v1h13V2zm-1 0H5V1h5z"},upload:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.562C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.437 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM10.96 18.3l.708.707L16 14.674V29h1V14.674l4.332 4.332.707-.707-5.539-5.54z"},
"upload-to":{16:"M12 2v1H3V2zM4.708 7.618l.707.707L7 6.74V15h1V6.705l1.62 1.62.706-.707-2.808-2.81z",24:"M11 20V8.707l-2.646 2.647-.707-.707L11.5 6.793l3.854 3.854-.707.707L12 8.707V20zM5 4h13V3H5z",32:"M24 6H7V5h17zm-8.5 3.793l-4.854 4.854.707.707L15 11.707V26h1V11.707l3.646 3.646.707-.707z"},"urban-model":{32:"M13 29V7h2V3h1.455L18 5.568V14h-2v1h3v6h1v-7h-1V5.29L17.02 2H14v4h-2v15H9V11H4v3H2v16h12v-1zm-1 0H3V15h2v-3h3v9H6v1h6zm18-16v17h-4v-1h3V14h-4v7h-1v-8zm-5 9h-6v3h-4v5h10zm-1 7h-8v-3h4v-3h4zM8 24h2v1H8zm0 2h2v1H8z"},
user:{16:"M11 3a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8 5a2 2 0 1 1 2-2 2 2 0 0 1-2 2zm3 1H5a2 2 0 0 0-2 2v6a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1V8a2 2 0 0 0-2-2zm1 3v5h-1V9h-1v6H6V9H5v5H4V8a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"},"user-plus":{24:"M13 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zM9 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4 16.25a.75.75 0 0 1-.75.75h-6.5a.75.75 0 0 1-.75-.75V21H3.5A1.5 1.5 0 0 1 2 19.5v-9.25A2.25 2.25 0 0 1 4.25 8h9.5A2.25 2.25 0 0 1 16 10.25V17h-1v-6.75A1.251 1.251 0 0 0 13.75 9h-9.5A1.251 1.251 0 0 0 3 10.25v9.25a.501.501 0 0 0 .5.5H5v-8h1v11h6V12h1m10 7v.999h-4V24h-1v-4.001h-4V19h4v-4h1v4z",
32:"M13.065 10a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm.002-9a4 4 0 1 1-4.002 4 4 4 0 0 1 4.002-4zM5 14v12a1 1 0 0 0 1 1h1V15h1v16h10V15h1v16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1v-3H6a2 2 0 0 1-2-2V14a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v10h-1V14a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2zm26 12v.999h-5V32h-1v-5.001h-5V26h5v-5h1v5z"},users:{16:"M8 1.998a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm-2 4h1v5a1 1 0 0 1-1-1H3a1 1 0 0 1-1-1v-4a2 2 0 0 1 2-2h3.78a3.05 3.05 0 0 0-.596 1H4a1 1 0 0 0-1 1v4h1zm8-1a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm2 1H8a2 2 0 0 0-2 2v4a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1v-4a2 2 0 0 0-2-2zm1 3v3h-1v-3h-1v4H9v-4H8v3H7v-4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1z",
32:"M15 14.556a3.998 3.998 0 0 0-1 .826V13h1zM13 25v-1H8V13H7v7H6a1 1 0 0 1-1-1v-7a2 2 0 0 1 2-2h8a1.984 1.984 0 0 1 1.067.314 5.358 5.358 0 0 1 .246-1A2.968 2.968 0 0 0 15 9H7a3 3 0 0 0-3 3v7a2 2 0 0 0 2 2h1v3a1 1 0 0 0 1 1h5zM11 9a4 4 0 1 1 4-4 4 4 0 0 1-4 4zm3-4a3 3 0 1 0-2.998 3A3 3 0 0 0 14 5zm.9 16.25v3.171A.985.985 0 0 0 15 24v-2.75zM21 15a4 4 0 1 1 4-4 4 4 0 0 1-4 4zm3-4a3 3 0 1 0-2.998 3A3 3 0 0 0 24 11zm4 7v7a2 2 0 0 1-2 2h-1v3a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-3h-1a2 2 0 0 1-2-2v-7a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3zm-1 0a2 2 0 0 0-2-2h-8a2 2 0 0 0-2 2v7a1 1 0 0 0 1 1h1v-7h1v11h6V19h1v7h1a1 1 0 0 0 1-1z"},
web:{24:"M11.5 0A11.5 11.5 0 1 0 23 11.5 11.513 11.513 0 0 0 11.5 0zM1.025 12h3.989a18.969 18.969 0 0 0 .753 5H2.573a10.415 10.415 0 0 1-1.548-5zM12 5V1.05c1.51.274 2.862 1.77 3.779 3.95zm4.15 1a17.518 17.518 0 0 1 .836 5H12V6zM11 1.05V5H7.221C8.138 2.82 9.491 1.324 11 1.05zM11 6v5H6.014a17.518 17.518 0 0 1 .836-5zm-5.986 5H1.025a10.415 10.415 0 0 1 1.548-5h3.194a18.969 18.969 0 0 0-.753 5zm1 1H11v5H6.85a17.518 17.518 0 0 1-.836-5zM11 18v3.95c-1.51-.274-2.862-1.77-3.779-3.95zm1 3.95V18h3.779c-.917 2.18-2.27 3.676-3.779 3.95zM12 17v-5.01h5a17.58 17.58 0 0 1-.85 5.01zm5.986-5.01h3.989A10.453 10.453 0 0 1 20.427 17h-3.194a19.046 19.046 0 0 0 .753-5.01zm0-.99a18.969 18.969 0 0 0-.753-5h3.194a10.415 10.415 0 0 1 1.548 5zm1.744-6h-2.837a9.988 9.988 0 0 0-2.119-3.47A10.528 10.528 0 0 1 19.73 5zM8.226 1.53A9.988 9.988 0 0 0 6.107 5H3.27a10.528 10.528 0 0 1 4.956-3.47zM3.27 18h2.837a9.988 9.988 0 0 0 2.119 3.47A10.528 10.528 0 0 1 3.27 18zm11.504 3.47A9.988 9.988 0 0 0 16.893 18h2.837a10.528 10.528 0 0 1-4.956 3.47z",
32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zM2.025 16h4.99a22.884 22.884 0 0 0 .898 6H3.669a13.424 13.424 0 0 1-1.644-6zM16 8V2.046C18.387 2.33 20.472 4.62 21.732 8zm6.07 1a22.167 22.167 0 0 1 .916 6H16V9zM15 2.046V8H9.268c1.26-3.38 3.345-5.669 5.732-5.954zM15 9v6H8.014a22.167 22.167 0 0 1 .916-6zm-7.985 6h-4.99A13.424 13.424 0 0 1 3.67 9h4.244a22.884 22.884 0 0 0-.898 6zm1 1H15v6H8.93a22.167 22.167 0 0 1-.916-6zM15 23v5.954C12.613 28.67 10.528 26.38 9.268 23zm1 5.954V23h5.732c-1.26 3.38-3.345 5.669-5.732 5.954zM16 22v-6h6.986a22.167 22.167 0 0 1-.916 6zm7.985-6h4.99a13.424 13.424 0 0 1-1.644 6h-4.244a22.884 22.884 0 0 0 .898-6zm0-1a22.884 22.884 0 0 0-.898-6h4.244a13.424 13.424 0 0 1 1.644 6zm2.739-7H22.76a12.808 12.808 0 0 0-3.455-5.447A13.52 13.52 0 0 1 26.724 8zm-15.03-5.447A12.808 12.808 0 0 0 8.239 8H4.276a13.52 13.52 0 0 1 7.418-5.447zM4.276 23H8.24a12.808 12.808 0 0 0 3.455 5.447A13.519 13.519 0 0 1 4.276 23zm15.03 5.447A12.808 12.808 0 0 0 22.761 23h3.963a13.519 13.519 0 0 1-7.418 5.447z"},
wrench:{32:"M23.875 8.884l-.938-2.327 4.145-3.224a.67.67 0 0 0 .264-.677l-.051-.215-.09-.11a.695.695 0 0 0-.441-.251 8.172 8.172 0 0 0-5.858 1.395 5.627 5.627 0 0 0-1.68 6.3l-.008.035a4.82 4.82 0 0 1-.769 1.144L3.124 24.33a3.957 3.957 0 0 0 .002 5.522A3.793 3.793 0 0 0 5.851 31a3.81 3.81 0 0 0 2.75-1.175L21.81 14.193a1.86 1.86 0 0 1 .771-.485 2.076 2.076 0 0 1 .366.022 5.244 5.244 0 0 0 5.196-.662 8.46 8.46 0 0 0 2.85-5.36.692.692 0 0 0-.126-.506l-.123-.138-.09-.054a.698.698 0 0 0-.786.056l-4.074 3.232zm5.992-.55a7.24 7.24 0 0 1-2.339 3.945 4.263 4.263 0 0 1-4.266.5l-.118-.031a3.31 3.31 0 0 0-.617-.038 2.616 2.616 0 0 0-1.435.79L7.862 29.152a2.803 2.803 0 0 1-2.01.848H5.85a2.802 2.802 0 0 1-2.012-.849 2.946 2.946 0 0 1-.03-4.093l15.354-13.409a5.294 5.294 0 0 0 1.018-1.57 1.989 1.989 0 0 0 .054-.288l.015-.118-.04-.112a4.648 4.648 0 0 1 1.31-5.297A6.938 6.938 0 0 1 25.627 3c.083 0 .166.001.25.004L22.321 5.77a.968.968 0 0 0-.306 1.105l.937 2.393a.904.904 0 0 0 .107.19.856.856 0 0 0 .195.193l1.938 1.446a.937.937 0 0 0 1.147-.018zM6.501 25H5.5a1.499 1.499 0 0 0-1.499 1.495L4 27.505a1.502 1.502 0 0 0 1.5 1.497l1.009-.001a1.503 1.503 0 0 0 1.495-1.504l-.003-1A1.5 1.5 0 0 0 6.501 25zm.005 3l-1.006.002a.5.5 0 0 1-.5-.5l.001-1.004A.5.5 0 0 1 5.5 26h1.001a.5.5 0 0 1 .5.5l.003.999a.502.502 0 0 1-.498.501z"},
x:{16:"M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",24:"M18.01 6.697L12.707 12l5.303 5.303-.707.707L12 12.707 6.697 18.01l-.707-.707L11.293 12 5.99 6.697l.707-.707L12 11.293l5.303-5.303z",32:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"},"x-circle":{32:"M25.753 5.247a14.5 14.5 0 1 0 0 20.506 14.5 14.5 0 0 0 0-20.506zm-.636 19.87a13.6 13.6 0 1 1 0-19.234 13.6 13.6 0 0 1 0 19.234zM21.864 9.843L16.207 15.5l5.657 5.657-.707.707-5.657-5.657-5.657 5.657-.707-.707 5.657-5.657-5.657-5.657.707-.707 5.657 5.657 5.657-5.657z",
24:"M17.45 8.257L13.207 12.5l4.243 4.243-.707.707-4.243-4.243-4.243 4.243-.707-.707 4.243-4.243L7.55 8.257l.707-.707 4.243 4.243 4.243-4.243zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"},"x-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zm4.95 11.386l-1.414 1.414L8 9.414 4.464 12.95 3.05 11.536 6.586 8 3.05 4.464 4.464 3.05 8 6.586l3.536-3.536 1.414 1.414L9.414 8z",24:"M19.632 3.368a11.5 11.5 0 1 0 0 16.264 11.5 11.5 0 0 0 0-16.264zM18.57 16.45l-2.12 2.12-4.95-4.95-4.95 4.95-2.12-2.12 4.95-4.95-4.95-4.95 2.12-2.12 4.95 4.95 4.95-4.95 2.12 2.12-4.95 4.95z",
32:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm9.192 20.364l-2.828 2.828L16 18.828l-6.364 6.364-2.828-2.828L13.172 16 6.808 9.636l2.828-2.828L16 13.172l6.364-6.364 2.828 2.828L18.828 16z"}},f={inline:{},"inline-end":{},getIconWithTitle:function(m,l,d,c){m=g[m];return h({paths:m[l],size:l,rtl:m.rtl,title:d,titleId:c})}};Object.keys(g).forEach(function(m){Object.keys(g[m]).filter(function(l){return"rtl"!==l}).forEach(function(l){var d,c,k,t=g[m],n=t.rtl;f[m]=null!==(d=f[m])&&void 0!==d?d:{};f.inline[m]=
null!==(c=f.inline[m])&&void 0!==c?c:{};f["inline-end"][m]=null!==(k=f["inline-end"][m])&&void 0!==k?k:{};f[m][l]=h({paths:t[l],size:l,rtl:n});f.inline[m][l]=h({paths:t[l],size:l,inline:!0,rtl:n});f["inline-end"][m][l]=h({paths:t[l],size:l,inline:!0,direction:"right",rtl:n})})});return f})},"arcgisonline/pages/utils/arrays":function(){define(["require","exports"],function(b,y){return function(){function q(){}q.includes=function(a,h){return-1<(null===a||void 0===a?void 0:a.indexOf(h))};q.find=function(a,
h){if(null===a||void 0===a?0:a.length)for(var e=void 0,g=0;g<a.length;g++)if(e=a[g],h(e))return e};q.findIndex=function(a,h){if(null===a||void 0===a?0:a.length)for(var e=0;e<a.length;e++)if(h(a[e]))return e;return-1};q.toArray=function(a){return Object.keys(a).map(function(h){return a[h]})};q.includesSome=function(a,h){return a&&(null===h||void 0===h?void 0:h.some(function(e){return-1<a.indexOf(e)}))};q.includesAll=function(a,h){return a&&(null===h||void 0===h?void 0:h.every(function(e){return-1<
a.indexOf(e)}))};q.filterOut=function(a,h){var e;return null!==(e=h&&(null===a||void 0===a?void 0:a.filter(function(g){return-1===h.indexOf(g)})))&&void 0!==e?e:[]};q.concatUnique=function(a,h){var e=[].concat(null!==a&&void 0!==a?a:[]);h&&h.forEach(function(g){g&&-1===e.indexOf(g)&&e.push(g)});return e};q.from=function(a){if(Array.from)return Array.from(a);for(var h=[],e=0;e<a.length;e++)h.push(a[e]);return h};q.batch=function(a,h){void 0===h&&(h=100);return(null!==a&&void 0!==a?a:[]).reduce(function(e,
g,f){0===f%h&&e.push(a.slice(f,f+h));return e},[])};return q}()})},"arcgisonline/pages/utils/strings":function(){define(["require","exports"],function(b,y){return function(){function q(){}q.isString=function(a){return(null===a||void 0===a?void 0:a.constructor)===String};q.startsWith=function(a,h){return h&&0===(null===a||void 0===a?void 0:a.indexOf(h))};q.endsWith=function(a,h){if(a&&h){var e=a.lastIndexOf(h);return-1<e&&a.length>=h.length&&e===a.length-h.length}return!1};q.includes=function(a,h){return h&&
-1<(null===a||void 0===a?void 0:a.indexOf(h))};q.isSet=function(a){return!!(0<(null===a||void 0===a?void 0:a.length))};q.areEqual=function(a,h){var e=this.isSet(a),g=this.isSet(h);return!e&&!g||e&&g&&a.trim()===h.trim()};q.replaceAll=function(a,h,e){return a.replace(new RegExp(this.escapeRegExp(h),"g"),e)};q.escapeRegExp=function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")};q.escapeQuestionMarks=function(a){return a.replace(/[?\\]/g,"\\$\x26")};q.stringToArray=function(a,h,e){a=a instanceof
Array?a:a.split(h);return e?a.map(function(g){return g.trim()}):a};q.isValidHex=function(a){return/[0-9A-Fa-f]{6}/g.test(a)};q.stringToHex=function(a){for(var h=0,e=0;e<a.length;e++)h=a.charCodeAt(e)+((h<<5)-h);a="#";for(e=0;3>e;e++)a+=("00"+(h>>8*e&255).toString(16)).substr(-2);return a};q.hexToRgb=function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(h,e,g,f){return e+e+g+g+f+f});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?{r:parseInt(a[1],16),g:parseInt(a[2],16),
b:parseInt(a[3],16)}:null};q.htmlDecode=function(a){var h=document.createElement("textarea");h.innerHTML=a;return h.value};q.encodeWhitespace=function(a){return a?a.replace(/\s/g,"%20"):""};q.encodeAngleBrackets=function(a){var h;return null!==(h=null===a||void 0===a?void 0:a.replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"))&&void 0!==h?h:""};q.decodeAngleBrackets=function(a){var h;return null!==(h=null===a||void 0===a?void 0:a.replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e"))&&void 0!==h?h:""};q.shouldStripHTML=
function(a){var h;if(!a)return!1;a=null!==(h=null===a||void 0===a?void 0:a.split("\x3c"))&&void 0!==h?h:[];return 1<a.length&&a.some(function(e){return-1<e.search(/^[A-Za-z\/]+.*[>]+.*$/m)})};q.stripHTML=function(a){if(!a)return"";var h=document.createElement("div");h.innerHTML=a;return h.textContent};q.addHyperlinks=function(a){return a.replace(/(https?:\/\/[^\s]+)/g,function(h){return'\x3ca href\x3d"'+h+'" target\x3d"_blank"\x3e'+h+"\x3c/a\x3e"})};q.escapeNewlines=function(a){return null===a||void 0===
a?void 0:a.replace(/(?:\r)/g,"\x26#10;").replace(/(?:\n)/g,"\x26#13;")};q.restoreNewlines=function(a){return null===a||void 0===a?void 0:a.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")};q.insertHTMLLineBreaks=function(a){return null===a||void 0===a?void 0:a.replace(/(?:"&#10;&#13;|&#10;|&#13;|\r\n|\r|\n")/g,"\x3cbr\x3e")};q.containsHTTPProtocol=function(a){var h;return-1<(null!==(h=null===a||void 0===a?void 0:a.toLowerCase())&&void 0!==h?h:"").indexOf("http://")};return q}()})},"arcgisonline/pages/utils/dom":function(){define(["require",
"exports","tslib","./strings","dojo/dom-style"],function(b,y,q,a,h){a=q.__importDefault(a);h=q.__importDefault(h);return function(){function e(){}e.addStylesheet=function(g){var f=document.createElement("link");f.rel="stylesheet";f.type="text/css";f.href=g;document.head.appendChild(f)};e.isHidden=function(g){var f=["none","none !important","none!important"],m=["hidden","hidden !important","hidden!important"],l=""+h.default.get(g,"visibility"),d=""+h.default.get(g,"display");return g&&(-1<f.indexOf(d)||
-1<m.indexOf(l))};e.hideNode=function(g){null===g||void 0===g?void 0:g.classList.add("hide")};e.hideNodes=function(g){if(g)if(g.forEach)g.forEach(this.hideNode);else for(var f=0;f<g.length;f++)this.hideNode(g[f])};e.showNode=function(g){null===g||void 0===g?void 0:g.classList.remove("hide")};e.showNodes=function(g){if(g)if(g.forEach)g.forEach(this.showNode);else for(var f=0;f<g.length;f++)this.showNode(g[f])};e.showHide=function(g,f){null===g||void 0===g?void 0:g.classList[f?"remove":"add"]("hide")};
e.showHideAll=function(g,f){var m=this;null===g||void 0===g?void 0:g.forEach(function(l){return m.showHide(l,f)})};e.addRemoveClass=function(g,f,m){null===g||void 0===g?void 0:g.classList[m?"add":"remove"](f)};e.addRemoveClassAll=function(g,f,m){var l=this;null===g||void 0===g?void 0:g.forEach(function(d){return l.addRemoveClass(d,f,m)})};e.setVisibility=function(g,f){null===g||void 0===g?void 0:g.classList[f?"remove":"add"]("visibility-hidden")};e.toggleHide=function(g){null===g||void 0===g?void 0:
g.classList.toggle("hide")};e.toggleHideAll=function(g){null===g||void 0===g?void 0:g.forEach(function(f){f.classList.toggle("hide")})};e.activateNode=function(g){null===g||void 0===g?void 0:g.classList.add("is-active")};e.deactivateNode=function(g){null===g||void 0===g?void 0:g.classList.remove("is-active")};e.canBeDisabled=function(g){return g instanceof HTMLInputElement||g instanceof HTMLButtonElement||g instanceof HTMLFieldSetElement||g instanceof HTMLOptGroupElement||g instanceof HTMLOptionElement||
g instanceof HTMLSelectElement||g instanceof HTMLTextAreaElement};e.isDisabled=function(g){var f;return null!==(f=null===g||void 0===g?void 0:g.disabled)&&void 0!==f?f:!1};e.disableNode=function(g,f){g&&(g.disabled=f)};e.disableNodes=function(g,f){var m=this;null===g||void 0===g?void 0:g.forEach(function(l){m.disableNode(l,f)})};e.isNodeVisible=function(g){return 0!==(null===g||void 0===g?void 0:g.offsetHeight)};e.isChecked=function(g){var f;return null!==(f=null===g||void 0===g?void 0:g.checked)&&
void 0!==f?f:!1};e.checkNode=function(g,f){g&&(g.checked=f)};e.selectOption=function(g,f){if(g)for(var m=0;m<g.length;m++){var l=g[m];if(a.default.areEqual(l.value,f)){l.selected=!0;break}}};e.getSelectedOption=function(g){if(g)for(var f=0;f<g.length;f++){var m=g[f];if(m.selected)return m}return null};e.addClasses=function(g,f){g&&(null===f||void 0===f?0:f.length)&&f.forEach(function(m){g.classList.add(m)})};e.removeClasses=function(g,f){g&&(null===f||void 0===f?0:f.length)&&f.forEach(function(m){g.classList.remove(m)})};
e.setModifierClass=function(g,f,m){var l,d=null===(l=g.className.match(new RegExp("(^| )"+f+"\\S+","g")))||void 0===l?void 0:l[0].replace(/ +/g,"");d&&g.classList.remove(d);g.classList.add(""+f+m)};e.appendChildren=function(g,f){var m=document.createDocumentFragment();null===g||void 0===g?void 0:g.forEach(function(l){m.appendChild(l)});null===f||void 0===f?void 0:f.appendChild(m)};e.forEachNode=function(g,f,m){for(var l=0;l<g.length;l++)null===f||void 0===f?void 0:f.call(m,g[l],l)};e.nodeListToArray=
function(g){return Array.prototype.slice.call(g)};e.querySelectorAllAsArray=function(g,f){return this.nodeListToArray(f.querySelectorAll(g))};return e}()})},"arcgisonline/sharing/dijit/dialog/DownloadImageDlg":function(){define("dojo/_base/declare dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/DownloadImageDlg.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../util".split(" "),function(b,y,q,a,h,e,g){return b([a,h,e],{templateString:q,widgetsInTemplate:!0,
_i18nStrings:y,constructor:function(f,m){b.safeMixin(this,f)},show:function(){this.dialog.show();this.own(dojo.connect(this.dialog,"onHide",dojo.hitch(this,function(){this.hide()})))},updateMessage:function(f){this.message.innerHTML=f},setCancelUrl:function(f){this.cancelUrl=f;this._cancelBtn.set("disabled",!1)},_handleCancelButtonClick:function(){this.hide()},hide:function(){this.cancelUrl&&g.request({url:this.cancelUrl});this.dialog.hide()}})})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c){var k={options:{disableIdentityLookup:!0},requestParams:{f:"json"}},t=function(v){function B(C){v[C]||(v[C]=function(){var F=arguments;return a.when(v,function(G){Array.prototype.unshift.call(F,G.results||G);return t(h[C].apply(h,F))})})}if(!v)return v;v.then&&(v=y.delegate(v));v.total||(v.total=a.when(v,function(C){return m.isDefined(C.total)?C.total:C.length||0}));B("forEach");B("filter");B("map");B("some");B("every");return v},n={useSSL:function(v,B){var C=k&&
k.self||{};if(C&&!C.isPortal)return-1!==v.indexOf("https:")||C.allSSL?B.replace("http:","https:"):B;var F=n.getLocation(B);return-1<C.portalHostname.toLowerCase().indexOf(F.hostname.toLowerCase())&&F.port&&"80"!==F.port&&"443"!==F.port?(B=F.pathname,B=0===B.indexOf("/")?B:"/"+B,C.allSSL||-1<v.indexOf("https:")?"https://"+F.hostname+(C.httpsPort&&"443"!==C.httpsPort?":"+C.httpsPort:"")+B+F.search:"http://"+F.hostname+(C.httpPort&&"80"!==C.httpPort?":"+C.httpPort:"")+B+F.search):-1!==v.indexOf("https:")||
C.allSSL?B.replace("http:","https:"):B},formatUrl:function(v){var B=k.currentToken;return-1!==v.indexOf("null")?null:n.useSSL(window.location.protocol,B?v+(-1!==v.indexOf("?")?"\x26":"?")+("token\x3d"+B):v)},getLocation:function(v){var B=document.createElement("a");B.href=v;return{protocol:B.protocol,hostname:B.hostname,port:B.port,pathname:B.pathname,search:B.search,hash:B.hash,host:B.host}},resultsToTypedArray:function(v,B,C){C=C?C.listings||C.notifications||C.userInvitations||C.tags||C.items||
C.groups||C.comments||C.provisions||C.results||C:[];return h.map(C,function(F){F=y.mixin(F,B||{});return v?new v(F):F})},clearFieldsFromObject:function(v,B){var C,F=v.length;if(y.isArray(v))for(C=0;C<F;C++)delete B[v[C]];else for(C in v)delete B[C];return B},requestToTypedArray:function(v,B,C,F,G){return t(n.request(v,B,C).then(y.partial(n.resultsToTypedArray,F,G)))},request:function(v,B,C){B&&B.portal&&delete B.portal;if(B&&B.form){var F=B.form;delete B.form}B=y.mixin(y.mixin({},B||{}),k.requestParams);
C=y.mixin(C||{},k.options);return l({url:n.useSSL(window.location.protocol,v.url||v),content:B,callbackParamName:"callback",timeout:C&&C.timeout||0,form:F},C)},formatQueryParams:function(v,B,C){v=y.mixin(y.mixin({},v),y.isString(B)?{q:B}:B||{});v.q=!C&&k.extraQuery?"("+v.q+")"+k.extraQuery:v.q;return v}},u=b([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(v){y.mixin(this,v);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),
x=b([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(v){y.mixin(this,v);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),A=b([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(v){y.mixin(this,v);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/","/content/users/"+this.owner+
(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=n.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=n.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var v=this.type;return{source:-1<
h.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===v?v:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(v){var B=y.isString(v)?{comment:v}:v;return n.request(this.itemUrl+"/addComment",B,{usePost:!0}).then(y.hitch(this,function(C){return new u(y.mixin(B,{id:C.commentId,item:this}))}))},updateComment:function(v){if(v&&v.url&&v.comment)return n.request(v.url+"/update",{comment:v.comment},
{usePost:!0}).then(function(B){v.id=B.commentId;return v});throw Error();},getComments:function(){return n.requestToTypedArray(this.itemUrl+"/comments",null,null,u,{item:this})},deleteComment:function(v){if(v&&v.url)return n.request(v.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(v){var B=y.isObject(v)?v:{rating:parseFloat(v)};return n.request(this.itemUrl+"/addRating",B,{usePost:!0}).then(y.hitch(this,function(C){return new x(y.mixin(B,{id:C.ratingId,item:this}))}))},getRating:function(){return n.request(this.itemUrl+
"/rating").then(y.hitch(this,function(v){return new x(y.mixin(v,{item:this}))}))},deleteRating:function(){return n.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var v=this.type,B=this.typeKeywords||[],C=v;"Feature Service"===v||"Feature Collection"===v?C=-1<h.indexOf(B,"Table")?"Table":-1<h.indexOf(B,"Route Layer")?"Route Layer":-1<h.indexOf(B,"Markup")?"Markup":"Feature Layer":"Image Service"===v?C=-1<h.indexOf(B,"Elevation 3D Layer")?"Elevation Layer":-1<h.indexOf(B,
"Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===v?C="Scene Layer":"Scene Package"===v?C="Scene Layer Package":"Stream Service"===v?C="Feature Layer":"Geoprocessing Service"===v&&this.portal&&this.portal.isPortal?C=-1<h.indexOf(B,"Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===v?C="GeoEnrichment Service":"Geocoding Service"===v?C="Locator":"Microsoft Powerpoint"===v?C="Microsoft PowerPoint":"GeoJson"===v?this.type=C="GeoJSON":"Globe Service"===v?C="Globe Layer":
"Vector Tile Service"===v?C="Tile Layer":"netCDF"===v?C="NetCDF":"Map Service"===v?C=-1===h.indexOf(B,"Spatiotemporal")&&(-1<h.indexOf(B,"Hosted Service")||-1<h.indexOf(B,"Tiled"))&&-1===h.indexOf(B,"Relational")?"Tile Layer":"Map Image Layer":v&&-1<v.toLowerCase().indexOf("add in")?C=v.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===v?C="Big Data File Share":"Compact Tile Package"===v?C="Tile Package (tpkx)":"Raster function template"===v&&(C="Raster Function Template");return C},_getIconUrl:function(){var v=
this.type&&this.type.toLowerCase()||"",B=this.typeKeywords||[],C=!1,F=!1,G=!1,H=!1,J=!1,I=!1;F=!1;0<v.indexOf("service")||"feature collection"===v||"kml"===v||"wms"===v||"wmts"===v||"wfs"===v?(C=-1<h.indexOf(B,"Hosted Service"),"feature service"===v||"feature collection"===v||"kml"===v||"wfs"===v?(H=-1<h.indexOf(B,"Table"),F=-1<h.indexOf(B,"Route Layer"),G=-1<h.indexOf(B,"Markup"),J=-1!==h.indexOf(B,"Spatiotemporal"),I=-1!==h.indexOf(B,"UtilityNetwork"),v=J&&H?"spatiotemporaltable":H?"table":F?"routelayer":
G?"markup":J?"spatiotemporal":I?"utilitynetwork":C?"featureshosted":"features"):"map service"===v||"wms"===v||"wmts"===v?(J=-1!==h.indexOf(B,"Spatiotemporal"),F=-1!==h.indexOf(B,"Relational"),v=J||F?"mapimages":C||-1<h.indexOf(B,"Tiled")||"wmts"===v?"maptiles":"mapimages"):v="scene service"===v?-1<h.indexOf(B,"Line")?"sceneweblayerline":-1<h.indexOf(B,"3DObject")?"sceneweblayermultipatch":-1<h.indexOf(B,"Point")?"sceneweblayerpoint":-1<h.indexOf(B,"IntegratedMesh")?"sceneweblayermesh":-1<h.indexOf(B,
"PointCloud")?"sceneweblayerpointcloud":-1<h.indexOf(B,"Polygon")?"sceneweblayerpolygon":-1<h.indexOf(B,"Building")?"sceneweblayerbuilding":"sceneweblayer":"image service"===v?-1<h.indexOf(B,"Elevation 3D Layer")?"elevationlayer":-1<h.indexOf(B,"Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===v?"streamlayer":"vector tile service"===v?"vectortile":"datastore catalog service"===v?"datastorecollection":"geocoding service"===v?"geocodeservice":"geoprocessing service"===v?-1<h.indexOf(B,
"Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):v="web map"===v||"cityengine web scene"===v?"maps":"web scene"===v?-1<h.indexOf(B,"ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===v||"mobile application"===v||"application"===v||"operation view"===v||"desktop application"===v?"apps":"map document"===v||"map package"===v||"published map"===v||"scene document"===v||"globe document"===v||"basemap package"===v||"mobile basemap package"===v||"mobile map package"===
v||"project package"===v||"project template"===v||"pro map"===v||"layout"===v||"layer"===v&&-1<h.indexOf(B,"ArcGIS Pro")||"explorer map"===v&&h.indexOf(B,"Explorer Document")?"mapsgray":"service definition"===v||"csv"===v||"shapefile"===v||"cad drawing"===v||"geojson"===v||"360 vr experience"===v||"netcdf"===v||"administrative report"===v?"datafiles":"explorer add in"===v||"desktop add in"===v||"windows viewer add in"===v||"windows viewer configuration"===v?"appsgray":"arcgis pro add in"===v||"arcgis pro configuration"===
v?"addindesktop":"rule package"===v||"file geodatabase"===v||"sqlite geodatabase"===v||"csv collection"===v||"kml collection"===v||"windows mobile package"===v||"map template"===v||"desktop application template"===v||"gml"===v||"arcpad package"===v||"code sample"===v||"form"===v||"document link"===v||"operations dashboard add in"===v||"rules package"===v||"image"===v||"workflow manager package"===v||"explorer map"===v&&-1<h.indexOf(B,"Explorer Mapping Application")||-1<h.indexOf(B,"Document")?"datafilesgray":
"network analysis service"===v||"geoprocessing service"===v||"geodata service"===v||"geometry service"===v||"geoprocessing package"===v||"locator package"===v||"geoprocessing sample"===v||"workflow manager service"===v?"toolsgray":"layer"===v||"layer package"===v||"explorer layer"===v?"layersgray":"scene package"===v?"scenepackage":"mobile scene package"===v?"mobilescenepackage":"tile package"===v||"compact tile package"===v?"tilepackage":"task file"===v?"taskfile":"report template"===v?"report-template":
"statistical data collection"===v?"statisticaldatacollection":"insights workbook"===v?"workbook":"insights model"===v?"insightsmodel":"insights page"===v?"insightspage":"insights theme"===v?"insightstheme":"hub initiative"===v?"hubinitiative":"hub page"===v?"hubpage":"hub site application"===v?"hubsite":"hub event"===v?"hubevent":"relational database connection"===v?"relationaldatabaseconnection":"big data file share"===v?"datastorecollection":"image collection"===v?"imagecollection":"desktop style"===
v?"desktopstyle":"style"===v?"style":"dashboard"===v?"dashboard":"raster function template"===v?"rasterprocessingtemplate":"vector tile package"===v?"vectortilepackage":"ortho mapping project"===v?"orthomappingproject":"ortho mapping template"===v?"orthomappingtemplate":"solution"===v?"solutions":"geopackage"===v?"geopackage":"deep learning package"===v?"deeplearningpackage":"real time analytic"===v?"realtimeanalytics":"big data analytic"===v?"bigdataanalytics":"feed"===v?"feed":"excalibur imagery project"===
v?"excaliburimageryproject":"notebook"===v?"notebook":"storymap"===v?"storymap":"survey123 add in"===v?"survey123addin":"mission"===v?"mission":"mission report"===v?"missionreport":"quickcapture project"===v?"quickcaptureproject":"pro report"===v?"proreport":"urban model"===v?"urbanmodel":"web experience"===v?"experiencebuilder":"web experience template"===v?"webexperiencetemplate":"workflow"===v?"workflow":"kernel gateway connection"===v?"kernelgatewayconnection":"insights script"===v?"insightsscript":
"hub initiative template"===v?"hubinitiativetemplate":"storymap theme"===v?"storymaptheme":"knowledge graph"===v?"knowledgegraph":"maps";return v?g.toUrl("../css/images/item_type_icons/"+v+"16.png"):null},_getIsPremiumContent:function(){var v=this.typeKeywords,B=!1;if(-1<h.indexOf(v,"Requires Subscription")||-1<h.indexOf(v,"Requires Credits"))B=!0;return B},_getPremiumIconUrl:function(){var v=this.typeKeywords,B;this.isPremiumContent&&(B=-1<h.indexOf(v,"Requires Credits")?"premiumcredits":"premiumitem");
return B?g.toUrl("../css/images/item_type_icons/"+B+"16.png"):null},getThumbnailUrl:function(v){var B=this.thumbnailUrl;B&&v&&(B+=(-1===B.indexOf("?")?"?":"\x26")+"w\x3d"+v);return B}}),z=b([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(v){y.mixin(this,v);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=
this.banner?n.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?n.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?n.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var B in this.listingProperties)this[B]&&
(this.listingProperties[B]=this[B]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=h.map(this.screenshots,y.hitch(this,function(C){return n.formatUrl(this.url+"/info/"+C)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?n.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):n.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return n.requestToTypedArray(this.commentsUrl,
null,null,u,{item:this})},getVendor:function(){return this.vendor}}),E=b([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(v){y.mixin(this,v);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=v.listing?new z(y.mixin(v.listing,{portal:this.portal})):null}}),w=b([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(v){y.mixin(this,
v);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=n.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return n.request(this.url+"/users")},queryItems:function(v,B){v=n.formatQueryParams({},v,B);v.q="group:"+this.id+(v.q?" "+v.q:"");return this.portal.queryItems(v)},getThumbnailUrl:function(v){var B=this.thumbnailUrl;B&&v&&(B+=
(-1===B.indexOf("?")?"?":"\x26")+"w\x3d"+v);return B}}),D=b([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(v){y.mixin(this,v);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return n.requestToTypedArray(this.url,null,null,A,{portal:this.portal,folderId:this.id})}}),r=b([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(v){y.mixin(this,v);this.url=(this.portal&&
this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?n.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return t(n.request(this.url).then(y.hitch(this,function(v){return n.resultsToTypedArray(w,{portal:this.portal},v.groups)})))},getNotifications:function(){return n.requestToTypedArray(this.url+
"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return n.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return n.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return t(this.getContent(null,{num:1}).then(function(v){return v.folders}))},getItems:function(v){return t(this.getContent(v).then(function(B){return B.items}))},getItem:function(v){return n.request(this.portal.portalUrl+
"content/items/"+v).then(y.hitch(this,function(B){return new A(y.mixin(B,{portal:this.portal}))}))},getContent:function(v,B){var C=this.url.replace("/community/","/content/")+(v?"/"+v:"");return n.request(C,B).then(y.hitch(this,function(F){F.folders=n.resultsToTypedArray(D,{portal:this.portal},F.folders);F.items=n.resultsToTypedArray(A,{portal:this.portal,folderId:v},F.items);return F}))},getThumbnailUrl:function(v){var B=this.thumbnailUrl;B&&v&&(B+=(-1===B.indexOf("?")?"?":"\x26")+"w\x3d"+v);return B}});
b={Portal:b([c],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(v){v=y.isObject(v)?v:{url:v};this.registerConnectEvents();k={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};v.self?(k.self=v.self,y.mixin(this,{url:v.url||d.getProtocolForWebResource()+"//"+(v.self.urlKey?v.self.urlKey+"."+v.self.customBaseUrl:v.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",v=v.self.user?this.signIn():
this.init(this.url)):(v.url&&y.mixin(this,{url:v.url}),v=this.init(this.url));v.then(y.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(v,B){v=(v||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==v.indexOf("/sharing")?v+"/":v+"/sharing/rest/";return this._getSelf(this.portalUrl).then(y.hitch(this,function(C){k.self=y.mixin({},C);(C=C.user)&&B&&(k.currentToken=B&&B.token,k.loggedInUser=new r(y.mixin(C,{portal:this,credential:B})));k.self.id&&!1===k.self.canSearchPublic&&
(k.extraQuery=" AND orgid:"+k.self.id);y.mixin(this,k.self);this.thumbnailUrl=n.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),y.hitch(this,function(C){this.onError(C);throw C;}))},signIn:function(){var v=new a,B=y.hitch(this,function(){this._onSignIn().then(y.hitch(this,function(){v.resolve(k.loggedInUser)}),
y.hitch(this,function(C){v.reject(C)}))});if(k&&k.self)k&&k.loggedInUser?setTimeout(function(){v.resolve(k.loggedInUser)},0):B();else this.on("load",y.hitch(this,function(){B()}));return v},signOut:function(){k.loggedInUser.credential&&k.loggedInUser.credential.destroy();k.loggedInUser=null;k.options.disableIdentityLookup=!0;n.clearFieldsFromObject(k.self,this);k.self=null;return this.init(this.url)},getPortalUser:function(){return k.loggedInUser},addResource:function(v,B){return n.request(this.portalUrl+
"portals/self/addResource",{key:v,text:B},{usePost:!0})},update:function(v){return n.request(this.portalUrl+"portals/self/update",v,{usePost:!0})},queryGroups:function(v,B){return this._queryPortal(this.portalUrl+"community/groups",n.formatQueryParams({},v,B),w)},queryItems:function(v,B){return this._queryPortal(this.portalUrl+"search",n.formatQueryParams({},v,B),A)},queryListings:function(v){v=n.formatQueryParams({},v,!0);var B="";v.q&&-1<v.q.toLowerCase().indexOf("mylistings:true")?(v.q=v.q.toLowerCase().replace("mylistings:true",
""),B="?mylistings\x3dtrue"):v.q||(v.q='""');return this._queryPortal(this.portalUrl+"content/listings"+B,v,z)},queryCustomerList:function(v,B){v=n.formatQueryParams({},v,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",v)},getProvisions:function(){return this.getCustomers().then(y.hitch(this,function(v){return v.purchases}))},getInterests:function(){return this.getCustomers().then(y.hitch(this,function(v){return v.interests}))},getTrials:function(){return this.getCustomers().then(y.hitch(this,
function(v){return v.trials}))},getCustomers:function(v){return n.request(this.portalUrl+"portals/self/customers",{status:v||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(v){return v.purchases})},getMyInterests:function(){return this.getPurchases().then(function(v){return v.interests})},getPurchases:function(){return n.request(this.portalUrl+"portals/self/purchases").then(y.hitch(this,function(v){v.interests=h.map(v.interests,function(B){return y.mixin(B.provision,{listing:B.listing})});
v.purchases=h.map(v.purchases,function(B){return y.mixin(B.provision,{listing:B.listing})});v.trials=h.map(v.trials,function(B){return y.mixin(B.provision,{listing:B.listing})});v.interests=n.resultsToTypedArray(E,{portal:this},v.interests);v.trials=n.resultsToTypedArray(E,{portal:this},v.trials);v.purchases=n.resultsToTypedArray(E,{portal:this},v.purchases);return v}))},queryUsers:function(v,B){return this._queryPortal(this.portalUrl+"community/users",n.formatQueryParams({sortField:"username"},v,
B),r)},_onSignIn:function(){k.options.disableIdentityLookup=!1;k.self=null;return f.id.getCredential(this.portalUrl).then(y.hitch(this,"init",this.url)).then(function(){return k.loggedInUser},y.hitch(this,function(v){k.options.disableIdentityLookup=!0;this.onError(v);throw v;}))},_getSelf:function(v){v+="portals/self";if(k.self){var B=new a;setTimeout(function(){B.resolve(k.self)},0)}else B=n.request(v,{culture:q.locale});return B},_queryPortal:function(v,B,C){var F=y.mixin({num:10,start:0,sortField:"title",
sortOrder:"asc"},B),G=["start","query","num","nextStart"];v=n.request(v,F).then(y.hitch(this,function(H){H.results=n.resultsToTypedArray(C,{portal:this},H);H.queryParams=y.mixin({},F);H.nextQueryParams=y.mixin(F,{start:H.nextStart});return n.clearFieldsFromObject(G,H)}));v=y.delegate(v);v.queryParams=y.mixin({},F);v.nextQueryParams=a.when(v,function(H){return H.nextQueryParams});return t(v)}}),PortalFolder:D,PortalGroup:w,PortalItem:A,PortalUser:r,PortalComment:u,PortalRating:x,PortalUtil:n,PortalResult:t,
PortalListing:z};y.mixin(y.getObject("arcgis",!0,f),b);return b})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(b,y,q,a,h,e,g,f){function m(t,n){89.99999<n?n=89.99999:-89.99999>n&&(n=-89.99999);n*=.017453292519943;return[111319.49079327169*t,3189068.5*Math.log((1+Math.sin(n))/(1-Math.sin(n)))]}function l(t,n,u){t=t/6378137*57.29577951308232;return u?[t,57.29577951308232*(1.5707963267948966-
2*Math.atan(Math.exp(-1*n/6378137)))]:[t-360*Math.floor((t+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*n/6378137)))]}function d(){}function c(){}function k(t){var n=t._json;t._unquantizeFn?(n=t._unquantizeFn({x:n.x,y:n.y}),t._xVal=n.x,t._yVal=n.y,t._unquantizeFn=null):(t._xVal=n.x,t._yVal=n.y);t._json=null}q={type:"point",x:0,y:0};b=b(g,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(t,n,u){y.isArray(t)?(this.x=t[0],this.y=t[1],this.spatialReference=
n):h.isObject(t)?(h.mixin(this,t),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference))):(this.x=t,this.y=n,this.spatialReference=u);this.verifySR()},offset:function(t,n){return new this.constructor(this.x+t,this.y+n,this.spatialReference)},setX:function(t){this.x=t;this.clearCache();return this},setY:function(t){this.y=t;this.clearCache();return this},setLongitude:function(t){var n=
this.spatialReference;n&&(n._isWebMercator()?this.setX(m(t,this.y)[0]):4326===n.wkid&&this.setX(t));return this},setLatitude:function(t){var n=this.spatialReference;n&&(n._isWebMercator()?this.setY(m(this.x,t)[1]):4326===n.wkid&&this.setY(t));return this},getLongitude:function(){var t=this.spatialReference;if(t)if(t._isWebMercator())var n=l(this.x,this.y)[0];else 4326===t.wkid&&(n=this.x);return n},getLatitude:function(){var t=this.spatialReference;if(t)if(t._isWebMercator())var n=l(this.x,this.y)[1];
else 4326===t.wkid&&(n=this.y);return n},update:function(t,n){this.x=t;this.y=n;this.clearCache();return this},normalize:function(){var t=this.x,n=this.spatialReference;if(n){var u=n._getInfo();u&&(t=this._normalizeX(t,u))}return new this.constructor(t,this.y,n)},_normalizeX:function(t,n){var u=n.valid[0],x=n.valid[1];n=2*x;t>x?(u=Math.ceil(Math.abs(t-x)/n),t-=u*n):t<u&&(u=Math.ceil(Math.abs(t-u)/n),t+=u*n);return t},toJson:function(){var t={x:this.x,y:this.y},n=this.spatialReference;n&&(t.spatialReference=
n.toJson());return t}});d.prototype=b.prototype;c.prototype=new d;Object.defineProperty(c.prototype,"x",{get:function(){this._json&&k(this);return this._xVal},set:function(t){this._xVal=t}});Object.defineProperty(c.prototype,"y",{get:function(){this._json&&k(this);return this._yVal},set:function(t){this._yVal=t}});c.prototype.setupLazyUnquantization=function(t,n){this._unquantizeFn=t;this._json=n};b.simpleConstructor=d;b.accessorConstructor=c;b.lngLatToXY=m;b.xyToLngLat=l;b.defaultProps=q;b.metersPerDegree=
6378137*Math.PI/180;y.setObject("geometry.Point",b,a);a.geometry.defaultPoint=q;return b})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(b,y,q,a,h){function e(){}q=[-2.0037508342788905E7,2.0037508342788905E7];var g=[-2.0037508342787E7,2.0037508342787E7];b=b(null,{declaredClass:"esri.SpatialReference",constructor:function(f){f&&(h.isObject(f)?h.mixin(this,f):h.isString(f)?this.wkt=f:this.wkid=f)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:q,origin:g,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:q,origin:g,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:q,origin:g,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:q,origin:g,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==y.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==y.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(f){var m=!1;f&&(m=this.isWebMercator()&&4326===f.wkid||f.isWebMercator()&&4326===this.wkid);return m},isWebMercator:function(){return this._isWebMercator()},equals:function(f){var m=!1;f&&(this===f&&
(m=!0),this.wkid||f.wkid?m=this.wkid===f.wkid||this.isWebMercator()&&f.isWebMercator()||this.wkid===f.latestWkid||f.wkid===this.latestWkid:this.wkt&&f.wkt&&(m=this.wkt.toUpperCase()===f.wkt.toUpperCase()));return m},toJson:function(){var f=null;null!=this.wkid?f={wkid:this.wkid}:null!=this.wkt&&(f={wkt:this.wkt});f&&null!=this.latestWkid&&(f.latestWkid=this.latestWkid);return f}});e.prototype=b.prototype;b.simpleConstructor=e;return a.SpatialReference=b})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(b,y,q,a,h){b=b(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(e){this.spatialReference=e;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new h(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(e){return this.cache&&this.cache[e]},setCacheValue:function(e,g){this.cache||
(this.cache={});this.cache[e]=g}});y.setObject("geometry.Geometry",b,a);return b})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(b,y,q,a,h){function e(g){var f=!1;g&&(g.ics||g.icsid)&&(f=!0);return f}a={isICS:e,createSpatialReference:function(g){var f=null;g&&(f=e(g)?new y(g):new b(g));return f}};h.mixin(q,a);return a})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(b,y,q,a,h,e){b=b(e,{declaredClass:"esri.ImageSpatialReference",constructor:function(g){g&&y.isObject(g)&&y.mixin(this,g)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(g){var f=!1;if(g)if(this.icsid&&g.icsid){if(f=this.icsid===g.icsid,this.icsns||g.icsns)f=f&&this.icsns===g.icsns}else this.ics&&g.ics&&(f=this.ics===g.ics);return f},toJson:function(g){var f=null,m=h.isDefined;g=m(g)?g:!0;m(this.icsid)?(f={icsid:this.icsid},
m(this.icsns)&&(f.icsns=this.icsns)):m(this.ics)&&(f={ics:this.ics});m(this.url)&&m(f)&&g&&(f.url=this.url);return f}});return a.ImageSpatialReference=b})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(b,y,q,a,h){y={_addFrameInfo:function(e,g){var f,m,l=2*g.origin[1],d=g.origin[0],c=e.origin.x,k=e.width,t;b.forEach(e.lods,function(n){f=Math.round(l/n.resolution);m=Math.ceil(f/k);t=Math.floor((d-c)/(k*n.resolution));n._frameInfo||
(n._frameInfo=[m,t,t+m-1,f])})},getContainingTileCoords:function(e,g,f){var m=e.origin;f=f.resolution;return{row:Math.floor((m.y-g.y)/(e.height*f)),col:Math.floor((g.x-m.x)/(e.width*f))}},getCandidateTileInfo:function(e,g,f){var m=e.width;var l=e.height,d=f.xmax-f.xmin,c=f.ymax-f.ymin,k=e.__tileInfo===g,t=k?e.getMinZoom():-1;k=k?e.getMaxZoom():-1;var n=-1,u=g.lods,x=Math.abs,A;k=-1<k?k:u.length-1;for(t=-1<t?t:0;t<=k;t++)if(A=u[t]){var z=d>c?x(c-l*A.resolution):x(d-m*A.resolution);if(0>n||z<=n){var E=
A;n=z}else break}m=E;E=m.resolution;l=(f.xmin+f.xmax)/2;d=(f.ymin+f.ymax)/2;c=e.width/2*E;E*=e.height/2;l=new h(l-c,d-E,l+c,d+E,f.spatialReference);f=new a(l.xmin,l.ymax,f.spatialReference);k=m.resolution;c=g.width;d=g.height;g=g.origin;e=e.__visibleDelta;E=Math.floor;u=c*k;x=d*k;k=E((g.y-f.y)/x);n=E((f.x-g.x)/u);t=g.y-k*x;g=E(Math.abs((f.x-(g.x+n*u))*c/u))+e.x;e=E(Math.abs((f.y-t)*d/x))+e.y;return{tile:{point:f,coords:{row:k,col:n},offsets:{x:g,y:e}},lod:m,extent:l}},getTileExtent:function(e,g,f,
m){var l=e.origin;g=e.lods[g].resolution;var d=e.width,c=e.height;return new h(m*g*d+l.x,l.y-(f+1)*g*c,(m+1)*g*d+l.x,l.y-f*g*c,e.spatialReference)}};return q.TileUtils=y})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c){function k(){}a={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var t=b(f,{declaredClass:"esri.geometry.Extent",
type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(n,u,x,A,z){e.isObject(n)?(e.mixin(this,n),this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference))):this.update(n,u,x,A,z);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new m((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new m(this.xmin,
this.ymax,this.spatialReference)},getTopRight:function(){return new m(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new m(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new m(this.xmax,this.ymin,this.spatialReference)},centerAt:function(n){var u=this.getCenter(),x=n.x-u.x;n=n.y-u.y;return new t(this.xmin+x,this.ymin+n,this.xmax+x,this.ymax+n,this.spatialReference)},update:function(n,u,x,A,z){this.xmin=n;this.ymin=u;this.xmax=x;this.ymax=
A;this.spatialReference=z;this.clearCache();return this},offset:function(n,u){return new t(this.xmin+n,this.ymin+u,this.xmax+n,this.ymax+u,this.spatialReference)},expand:function(n){var u=(1-n)/2;n=this.getWidth()*u;u*=this.getHeight();return new t(this.xmin+n,this.ymin+u,this.xmax-n,this.ymax-u,this.spatialReference)},intersects:function(n){if(!n)return!1;var u=n.type,x=this.spatialReference,A=n.spatialReference;x&&A&&!x.equals(A)&&x._canProject(A)&&(n=x.isWebMercator()?l.geographicToWebMercator(n):
l.webMercatorToGeographic(n,!0));switch(u){case "point":return this.contains(n);case "multipoint":return this._intersectsMultipoint(n);case "extent":return this._intersectsExtent(n);case "polygon":return this._intersectsPolygon(n);case "polyline":return this._intersectsPolyline(n)}},normalize:function(){var n=this._normalize(!1,!0);q.isArray(n)||(n=[n]);return n},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var n=this.spatialReference,u=n&&n._getInfo(),x=[],A=0;if(u&&
this._isOutOfBounds(u)){var z=this;A=z.xmin;var E=z.ymin,w=z.ymax,D=u.valid[0],r=u.valid[1];z.getWidth()>2*r&&(z=z.getCenter(),z=new t(z.x-r,E,z.x+r,w,new g(n.toJson())));A=z.xmin-A;var v=this._normalizeX(z.xmin,u);u=this._normalizeX(z.xmax,u);v.frameId===u.frameId?x.push(new t(v.x,E,u.x,w,new g(n.toJson()))):x.push(new t(v.x,E,r,w,new g(n.toJson())),new t(D,E,u.x,w,new g(n.toJson())))}else x.push(this.getExtent());return{extents:x,marginLeft:A}},_intersectsMultipoint:function(n){var u=n.points.length,
x;for(x=0;x<u;x++)if(this.contains(n.getPoint(x)))return!0;return!1},_intersectsExtent:function(n){var u,x,A=!1;if(this.xmin<=n.xmin){var z=n.xmin;this.xmax<z?A=!0:u=Math.min(this.xmax,n.xmax)-z}else z=this.xmin,n.xmax<z?A=!0:u=Math.min(this.xmax,n.xmax)-z;if(this.ymin<=n.ymin){var E=n.ymin;this.ymax<E?A=!0:x=Math.min(this.ymax,n.ymax)-E}else E=this.ymin,n.ymax<E?A=!0:x=Math.min(this.ymax,n.ymax)-E;return A?null:new t(z,E,z+u,E+x,this.spatialReference)},_intersectsPolygon:function(n){var u=[this.xmin,
this.ymax],x=[this.xmax,this.ymax],A=[this.xmin,this.ymin],z=[this.xmax,this.ymin],E=[u,x,A,z];u=[[A,u],[u,x],[x,z],[z,A]];A=n.rings;z=A.length;var w=new m(0,0,this.spatialReference);var D=E.length;for(x=0;x<D;x++)if(w.update(E[x][0],E[x][1]),n.contains(w))return!0;w.setSpatialReference(n.spatialReference);for(x=0;x<z;x++)if(E=A[x],D=E.length){var r=E[0];w.update(r[0],r[1]);if(this.contains(w))return!0;for(n=1;n<D;n++){var v=E[n];w.update(v[0],v[1]);if(this.contains(w)||this._intersectsLine([r,v],
u))return!0;r=v}}return!1},_intersectsPolyline:function(n){var u=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],x,A=n.paths,z=A.length,E,w=new m(0,0,n.spatialReference);for(n=0;n<z;n++){var D=A[n];if(E=D.length){var r=D[0];w.update(r[0],r[1]);if(this.contains(w))return!0;for(x=1;x<E;x++){var v=D[x];w.update(v[0],v[1]);if(this.contains(w)||this._intersectsLine([r,
v],u))return!0;r=v}}}return!1},_intersectsLine:function(n,u){var x=d._getLineIntersection2,A,z=u.length;for(A=0;A<z;A++)if(x(n,u[A]))return!0;return!1},contains:function(n){if(!n)return!1;var u=n.type;if("point"===u){var x=this.spatialReference,A=n.spatialReference;u=n.x;n=n.y;x&&A&&!x.equals(A)&&x._canProject(A)&&(n=x.isWebMercator()?m.lngLatToXY(u,n):m.xyToLngLat(u,n,!0),u=n[0],n=n[1]);return u>=this.xmin&&u<=this.xmax&&n>=this.ymin&&n<=this.ymax}return"extent"===u?this._containsExtent(n):!1},_containsExtent:function(n){var u=
n.xmin,x=n.ymin,A=n.xmax,z=n.ymax,E=n.spatialReference;n=new m(u,x,E);u=new m(u,z,E);z=new m(A,z,E);x=new m(A,x,E);return this.contains(n)&&this.contains(u)&&this.contains(z)&&this.contains(x)?!0:!1},union:function(n){return new t(Math.min(this.xmin,n.xmin),Math.min(this.ymin,n.ymin),Math.max(this.xmax,n.xmax),Math.max(this.ymax,n.ymax),this.spatialReference)},getExtent:function(){var n=this.spatialReference;return new t(this.xmin,this.ymin,this.xmax,this.ymax,n&&new g(n.toJson()))},_shiftCM:function(n){var u=
this.getCacheValue("_shifted");if(!u){u=new t(this.toJson());var x=u.spatialReference;if(n=n||x._getInfo()){var A=this._getCM(n);if(A){var z=x._isWebMercator()?l.webMercatorToGeographic(A):A;u.xmin-=A.x;u.xmax-=A.x;x._isWebMercator()||(z.x=this._normalizeX(z.x,n).x);u.setSpatialReference(new g(e.substitute({Central_Meridian:z.x},4326===x.wkid?n.altTemplate:n.wkTemplate)))}}this.setCacheValue("_shifted",u)}return u},_getCM:function(n){var u;this._isOutOfBounds(n)&&(u=this.getCenter());return u},_isOutOfBounds:function(n){var u=
n.valid[0];n=n.valid[1];var x=this.xmin,A=this.xmax;return!(x>=u&&x<=n&&A>=u&&A<=n)},_normalize:function(n,u,x){var A=new t(this.toJson()),z=A.spatialReference;if(z&&(x=x||z._getInfo())){var E=y.map(this._getParts(x),function(w){return w.extent});return 2<E.length?n?this._shiftCM(x):A.update(x.valid[0],A.ymin,x.valid[1],A.ymax,z):2===E.length?n?this._shiftCM(x):u?E:{rings:y.map(E,function(w){return[[w.xmin,w.ymin],[w.xmin,w.ymax],[w.xmax,w.ymax],[w.xmax,w.ymin],[w.xmin,w.ymin]]}),spatialReference:z}:
E[0]||A}return A},_getParts:function(n){var u=this.getCacheValue("_parts");if(!u){u=[];var x=this.xmin,A=this.xmax,z=this.ymin,E=this.ymax,w=this.spatialReference,D=this.getWidth(),r=x,v=A,B=0,C=0;n=n||w._getInfo();var F=n.valid[0];var G=n.valid[1];C=this._normalizeX(x,n);x=C.x;B=C.frameId;C=this._normalizeX(A,n);A=C.x;C=C.frameId;n=x===A&&0<D;if(D>2*G){D=new t(r<v?x:A,z,G,E,w);x=new t(F,z,r<v?A:x,E,w);G=new t(0,z,G,E,w);z=new t(F,z,0,E,w);w=[];F=[];D.contains(G)&&w.push(B);D.contains(z)&&F.push(B);
x.contains(G)&&w.push(C);x.contains(z)&&F.push(C);for(E=B+1;E<C;E++)w.push(E),F.push(E);u.push({extent:D,frameIds:[B]},{extent:x,frameIds:[C]},{extent:G,frameIds:w},{extent:z,frameIds:F})}else x>A||n?u.push({extent:new t(x,z,G,E,w),frameIds:[B]},{extent:new t(F,z,A,E,w),frameIds:[C]}):u.push({extent:new t(x,z,A,E,w),frameIds:[B]});this.setCacheValue("_parts",u)}return u},_normalizeX:function(n,u){var x=0,A=u.valid[0],z=u.valid[1];u=2*z;n>z?(x=Math.ceil(Math.abs(n-z)/u),n-=x*u):n<A&&(x=Math.ceil(Math.abs(n-
A)/u),n+=x*u,x=-x);return{x:n,frameId:x}},toJson:function(){var n={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},u=this.spatialReference;u&&(n.spatialReference=u.toJson());return n}});k.prototype=t.prototype;t.simpleConstructor=k;t.defaultProps=a;q.setObject("geometry.Extent",t,h);h.geometry.defaultExtent=a;return t})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(b,y,q,a,h,e){function g(m,
l,d,c){if("point"===m.type){var k=l(m.x,m.y,c);return new m.constructor(k[0],k[1],new h(d))}if("extent"===m.type){k=l(m.xmin,m.ymin,c);var t=l(m.xmax,m.ymax,c);return new m.constructor(k[0],k[1],t[0],t[1],new h(d))}if("polyline"===m.type||"polygon"===m.type){k="polyline"===m.type;var n=[],u;b.forEach(k?m.paths:m.rings,function(A){n.push(u=[]);b.forEach(A,function(z){u.push(l(z[0],z[1],c))})});return k?new m.constructor({paths:n,spatialReference:new h(d)}):new m.constructor({rings:n,spatialReference:new h(d)})}if("multipoint"===
m.type){var x=[];b.forEach(m.points,function(A){x.push(l(A[0],A[1],c))});return new m.constructor({points:x,spatialReference:new h(d)})}}function f(m,l){m=m&&(null!=m.wkid?m:m.spatialReference);l=l&&(null!=l.wkid?l:l.spatialReference);return m&&l?l.equals(m)?!0:l._canProject(m):!1}q={canProject:f,project:function(m,l){var d=m&&m.spatialReference;l=l&&(null!=l.wkid?l:l.spatialReference);d&&l?d.equals(l)?m=new m.constructor(m.toJson()):f(d,l)?l.isWebMercator()?m=g(m,e.lngLatToXY,{wkid:102100}):4326===
l.wkid&&(m=g(m,e.xyToLngLat,{wkid:4326})):m=null:m=null;return m},lngLatToXY:e.lngLatToXY,xyToLngLat:e.xyToLngLat,metersPerDegree:e.metersPerDegree,geographicToWebMercator:function(m){return g(m,e.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(m,l){return g(m,e.xyToLngLat,{wkid:4326},l)}};y.mixin(y.getObject("geometry",!0,a),q);return q})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(b,y,q,a){function h(f,m,l){return f instanceof
a?new a(f.x+l*(m.x-f.x),f.y+l*(m.y-f.y)):[f[0]+l*(m[0]-f[0]),f[1]+l*(m[1]-f[1])]}function e(f,m){return 1E-8>Math.abs(f-m)}function g(f,m,l,d){var c=e(f[0],m[0])?1E10:(f[1]-m[1])/(f[0]-m[0]),k=e(l[0],d[0])?1E10:(l[1]-d[1])/(l[0]-d[0]),t=f[1]-c*f[0],n=l[1]-k*l[0];if(e(c,k)){if(e(t,n)){if(e(f[0],m[0]))if(Math.min(f[1],m[1])<Math.max(l[1],d[1])||Math.max(f[1],m[1])>Math.min(l[1],d[1])){f=(f[1]+m[1]+l[1]+d[1]-Math.min(f[1],m[1],l[1],d[1])-Math.max(f[1],m[1],l[1],d[1]))/2;var u=(f-t)/c}else return null;
else if(Math.min(f[0],m[0])<Math.max(l[0],d[0])||Math.max(f[0],m[0])>Math.min(l[0],d[0]))u=(f[0]+m[0]+l[0]+d[0]-Math.min(f[0],m[0],l[0],d[0])-Math.max(f[0],m[0],l[0],d[0]))/2,f=c*u+t;else return null;return[u,f]}return null}e(c,1E10)?(u=f[0],f=k*u+n):e(k,1E10)?(u=l[0],f=c*u+t):(u=-(t-n)/(c-k),f=f[1]===m[1]?f[1]:l[1]===d[1]?l[1]:c*u+t);return[u,f]}y={getLength:function(f,m){var l=m.x-f.x;f=m.y-f.y;return Math.sqrt(l*l+f*f)},_getLength:function(f,m){var l=m[0]-f[0];f=m[1]-f[1];return Math.sqrt(l*l+
f*f)},getPointOnLine:h,getMidpoint:function(f,m){return h(f,m,.5)},_equals:e,_getLineIntersection:g,getLineIntersection:function(f,m,l,d,c){(f=g([f.x,f.y],[m.x,m.y],[l.x,l.y],[d.x,d.y]))&&(f=new a(f[0],f[1],c));return f},_getLineIntersection2:function(f,m){var l=f[0],d=f[1],c=m[0],k=m[1];m=l[0];l=l[1];f=d[0];d=d[1];var t=c[0],n=c[1];c=k[0]-t;t=m-t;var u=f-m;k=k[1]-n;n=l-n;var x=d-l,A=k*u-c*x;if(0===A)return!1;c=(c*n-k*t)/A;t=(u*n-x*t)/A;return 0<=c&&1>=c&&0<=t&&1>=t?[m+c*(f-m),l+c*(d-l)]:!1},_pointLineDistance:function(f,
m){var l=m[0],d=m[1];m=l[0];var c=l[1];l=f[0];f=f[1];var k=d[0]-m,t=d[1]-c,n=l-m,u=f-c;d=Math.sqrt;var x=Math.pow,A=d(x(k,2)+x(t,2));n=(n*k+u*t)/(A*A);c+=n*t;return d(x(l-(m+n*k),2)+x(f-c,2))}};b.mixin(b.getObject("geometry",!0,q),y);return y})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r){b=b(c,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(v){this._jobUpdateHandler=y.hitch(this,this._jobUpdateHandler);this._getJobStatus=y.hitch(this,this._getJobStatus);this._getResultDataHandler=
y.hitch(this,this._getResultDataHandler);this._getResultImageHandler=y.hitch(this,this._getResultImageHandler);this._executeHandler=y.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(v){this.updateDelay=v},setProcessSpatialReference:function(v){this.processSpatialReference=v},setOutputSpatialReference:function(v){this._setOutSR(v)},setOutSpatialReference:function(v){this._setOutSR(v)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(v){this.outSpatialReference=this.outputSpatialReference=v},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(v,B,C){for(var F in v){var G=v[F];y.isArray(G)?v[F]=h.toJson(q.map(G,function(H){return this._gpEncode({item:H},!0).item},this)):G instanceof Date&&(v[F]=G.getTime())}return this._encode(v,B,C)},_decode:function(v){var B=v.dataType,
C=new E(v);if(-1!==q.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],B))return C;if("GPLinearUnit"===B)C.value=new u(C.value);else if("GPFeatureRecordSetLayer"===B||"GPRecordSet"===B)C.value=new k(C.value);else if("GPDataFile"===B)C.value=new x(C.value);else if("GPDate"===B)v=C.value,y.isString(v)?C.value=new z({date:v}):C.value=new Date(v);else if("GPRasterData"===B||"GPRasterDataLayer"===B)v=v.value.mapImage,C.value=v?new r(v):new A(C.value);else if(-1!==B.indexOf("GPMultiValue:")){var F=B.split(":")[1];
v=C.value;C.value=q.map(v,function(G){return this._decode({paramName:"_name",dataType:F,value:G}).value},this)}else C=null;return C},submitJob:function(v,B,C,F,G){var H=this._getOutSR(),J=G.assembly;v=this._gpEncode(y.mixin({},this._url.query,{f:"json","env:outSR":H?H.wkid||h.toJson(H.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||h.toJson(this.processSpatialReference.toJson()):null},v),null,J&&J[0]);var I=this._jobUpdateHandler,K=this._errorHandler;
return m({url:this._url.path+"/submitJob",content:v,callbackParamName:"callback",load:function(R,W){I(R,W,!1,B,C,G.dfd)},error:function(R){K(R,F,G.dfd)}})},_jobUpdateHandler:function(v,B,C,F,G,H){var J=v.jobId;B=new t(v);this._successHandler([B],"onStatusUpdate",G,C&&H);if(!C)switch(clearTimeout(this._updateTimers[J]),this._updateTimers[J]=null,H&&H.progress(B),v.jobStatus){case t.STATUS_SUBMITTED:case t.STATUS_EXECUTING:case t.STATUS_WAITING:case t.STATUS_NEW:var I=this._getJobStatus;this._updateTimers[J]=
setTimeout(function(){I(J,C,F,G,H)},this.updateDelay);break;default:this._successHandler([B],"onJobComplete",F,H)}},_getJobStatus:function(v,B,C,F,G){var H=this._jobUpdateHandler;m({url:this._url.path+"/jobs/"+v,content:y.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(J,I){H(J,I,B,C,F,G)},error:this._errorHandler})},_getResultDataHandler:function(v,B,C,F,G){try{var H=this._decode(v);this._successHandler([H],"onGetResultDataComplete",C,G)}catch(J){this._errorHandler(J,
F,G)}},getResultData:function(v,B,C,F){var G=this._getResultDataHandler,H=this._errorHandler,J=new a(l._dfdCanceller);J._pendingDfd=m({url:this._url.path+"/jobs/"+v+"/results/"+B,content:y.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(I,K){G(I,K,C,F,J)},error:function(I){H(I,F,J)}});return J},checkJobStatus:function(v,B,C){var F=this._jobUpdateHandler,G=this._errorHandler,H=new a(l._dfdCanceller);H._pendingDfd=m({url:this._url.path+"/jobs/"+v,content:y.mixin({},
this._url.query,{f:"json"}),callbackParamName:"callback",load:function(J,I){F(J,I,!0,null,B,H)},error:function(J){G(J,C,H)}});return H},cancelJob:function(v,B,C){var F=this._errorHandler,G=new a(l._dfdCanceller);G._pendingDfd=m({url:this._url.path+"/jobs/"+v+"/cancel",content:y.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:y.hitch(this,function(H,J){this._successHandler([H],"onJobCancel",B,G)}),error:function(H){F(H,C,G)}});return G},execute:function(v,B,C,F){var G=this._getOutSR(),
H=F.assembly;v=this._gpEncode(y.mixin({},this._url.query,{f:"json","env:outSR":G?G.wkid||h.toJson(G.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||h.toJson(this.processSpatialReference.toJson()):null},v),null,H&&H[0]);var J=this._executeHandler,I=this._errorHandler;return m({url:this._url.path+"/execute",content:v,callbackParamName:"callback",load:function(K,R){J(K,R,B,C,F.dfd)},error:function(K){I(K,C,F.dfd)}})},_executeHandler:function(v,B,C,F,G){try{var H=
v.results,J,I=v.messages;var K=0;for(J=H.length;K<J;K++)H[K]=this._decode(H[K]);K=0;for(J=I.length;K<J;K++)I[K]=new n(I[K]);this._successHandler([H,I],"onExecuteComplete",C,G)}catch(R){this._errorHandler(R,F,G)}},_getResultImageHandler:function(v,B,C,F,G){try{var H=this._decode(v);this._successHandler([H],"onGetResultImageComplete",C,G)}catch(J){this._errorHandler(J,F,G)}},getResultImage:function(v,B,C,F,G){var H=this._getResultImageHandler,J=this._errorHandler;C=this._gpEncode(y.mixin({},this._url.query,
{f:"json"},C.toJson()));var I=new a(l._dfdCanceller);I._pendingDfd=m({url:this._url.path+"/jobs/"+v+"/results/"+B,content:C,callbackParamName:"callback",load:function(K,R){H(K,R,F,G,I)},error:function(K){J(K,G,I)}});return I},cancelJobStatusUpdates:function(v){clearTimeout(this._updateTimers[v]);this._updateTimers[v]=null},getResultImageLayer:function(v,B,C,F){if(null==B){var G=this._url.path.indexOf("/GPServer/");v=this._url.path.substring(0,G)+"/MapServer/jobs/"+v}else v=this._url.path+"/jobs/"+
v+"/results/"+B;this._url.query&&(v+="?"+g.objectToQuery(this._url.query));B=null==B?new D(v,{imageParameters:C}):new w(v,{imageParameters:C},!0);this.onGetResultImageLayerComplete(B);F&&F(B);return B},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});d._createWrappers(b);y.setObject("tasks.Geoprocessor",b,f);return b})},
"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c){function k(v,B){return Math.ceil((v-B)/(2*B))}function t(v,B){var C=v.paths||v.rings,F,G,H=C.length;for(F=0;F<H;F++){var J=C[F].length;for(G=0;G<J;G++){var I=v.getPoint(F,G);v.setPoint(F,G,I.offset(B,0))}}return v}function n(v,B){if(!(v instanceof
m||v instanceof l))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var C=v instanceof m,F=[],G;b.forEach(C?v.paths:v.rings,function(H){F.push(G=[]);G.push([H[0][0],H[0][1]]);var J,I;for(J=0;J<H.length-1;J++){var K=H[J][0];var R=H[J][1];var W=H[J+1][0];var P=H[J+1][1];var S=Math.sqrt((W-K)*(W-K)+(P-R)*(P-R));var L=(P-R)/S;var aa=(W-K)/S;var ba=S/B;if(1<ba){for(I=1;I<=ba-1;I++){var O=I*B;var V=aa*O+K;O=L*O+R;G.push([V,O])}I=(S+Math.floor(ba-1)*B)/2;V=aa*I+K;O=
L*I+R;G.push([V,O])}G.push([W,P])}});return C?new m({paths:F,spatialReference:v.spatialReference}):new l({rings:F,spatialReference:v.spatialReference})}function u(v,B,C){B&&(v=n(v,1E6),v=d.webMercatorToGeographic(v,!0));C&&(v=t(v,C));return v}function x(v,B,C){var F=v.x||v[0];if(F>B){var G=k(F,B);v.x?v=v.offset(-2*G*B,0):v[0]=F+-2*G*B}else F<C&&(G=k(F,C),v.x?v=v.offset(-2*G*C,0):v[0]=F+-2*G*C);return v}function A(v,B){var C=-1;b.forEach(B.cutIndexes,function(F,G){var H=B.geometries[G];b.forEach(H.rings||
H.paths,function(J,I){b.some(J,function(K){if(!(180>K[0])){K=0;var R,W=J.length;for(R=0;R<W;R++){var P=J[R][0];K=P>K?P:K}K=Number(K.toFixed(9));K=-360*k(K,180);W=J.length;for(R=0;R<W;R++)P=H.getPoint(I,R),H.setPoint(I,R,P.offset(K,0))}return!0})});F===C?H.rings?b.forEach(H.rings,function(J){v[F]=v[F].addRing(J)}):b.forEach(H.paths,function(J){v[F]=v[F].addPath(J)}):(C=F,v[F]=H)});return v}function z(v,B,C,F){var G=new q;G.addCallbacks(C,F);B=B||e.defaults.geometryService;var H=[],J=[],I,K,R,W,P,S,
L,aa,ba=0;b.forEach(v,function(N){if(N)if(I||(I=N.spatialReference,K=I._getInfo(),W=(R=I._isWebMercator())?2.0037508342788905E7:180,P=R?-2.0037508342788905E7:-180,S=R?102100:4326,L=new m({paths:[[[W,P],[W,W]]],spatialReference:{wkid:S}}),aa=new m({paths:[[[P,P],[P,W]]],spatialReference:{wkid:S}})),K){var Y=c.fromJson(N.toJson()),ia=N.getExtent();"point"===N.type?H.push(x(Y,W,P)):"multipoint"===N.type?(Y.points=b.map(Y.points,function(oa){return x(oa,W,P)}),H.push(Y)):"extent"===N.type?(Y=ia._normalize(null,
null,K),H.push(Y.rings?new l(Y):Y)):ia?(N=2*k(ia.xmin,P)*W,Y=0===N?Y:t(Y,N),ia=ia.offset(N,0),ia.intersects(L)&&ia.xmax!==W?(ba=ia.xmax>ba?ia.xmax:ba,Y=u(Y,R),J.push(Y),H.push("cut")):ia.intersects(aa)&&ia.xmin!==P?(ba=2*ia.xmax*W>ba?2*ia.xmax*W:ba,Y=u(Y,R,360),J.push(Y),H.push("cut")):H.push(Y)):H.push(Y)}else H.push(N);else H.push(N)});C=new m;F=k(ba,W);for(var O=-90,V=F;0<F;){var X=-180+360*F;C.addPath([[X,O],[X,-1*O]]);O*=-1;F--}0<J.length&&0<V?B?B.cut(J,C,function(N){J=A(J,N);var Y=[];b.forEach(H,
function(ia,oa){"cut"===ia&&(ia=J.shift(),v[oa].rings&&1<v[oa].rings.length&&ia.rings.length>=v[oa].rings.length?(H[oa]="simplify",Y.push(ia)):H[oa]=!0===R?d.geographicToWebMercator(ia):ia)});0<Y.length?B.simplify(Y,function(ia){b.forEach(H,function(oa,sa){"simplify"===oa&&(H[sa]=!0===R?d.geographicToWebMercator(ia.shift()):ia.shift())});G.callback(H)},function(ia){G.errback(ia)}):G.callback(H)},function(N){G.errback(N)}):G.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):
(b.forEach(H,function(N,Y){"cut"===N&&(N=J.shift(),H[Y]=!0===R?d.geographicToWebMercator(N):N)}),G.callback(H));return G}function E(v,B,C,F){var G=!1,H;y.isObject(v)&&v&&(y.isArray(v)?v.length&&((H=v[0]&&v[0].declaredClass)&&-1!==H.indexOf("Graphic")?(v=b.map(v,function(J){return J.geometry}),G=v.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&(G=!0)):(H=v.declaredClass)&&-1!==H.indexOf("FeatureSet")?(v=b.map(v.features||[],function(J){return J.geometry}),G=v.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&
(G=!0));G&&B.push({index:C,property:F,value:v})}function w(v,B){var C=[];b.forEach(B,function(F){var G=F.i,H=v[G];F=F.p;var J;if(y.isObject(H)&&H)if(F)if("*"===F[0])for(J in H)H.hasOwnProperty(J)&&E(H[J],C,G,J);else b.forEach(F,function(I){E(y.getObject(I,!1,H),C,G,I)});else E(H,C,G)});return C}function D(v,B){var C=0,F={};b.forEach(B,function(G){var H=G.index,J=G.property,I=G.value,K=I.length||1,R=v.slice(C,C+K);y.isArray(I)||(R=R[0]);C+=K;delete G.value;J?(F[H]=F[H]||{},F[H][J]=R):F[H]=R});return F}
function r(v){for(var B=[],C=0,F=0,G=Math.min,H=Math.max,J=0;J<v.length;J++){for(var I=v[J],K=null,R=0;R<I.length;R++)K=I[R],B.push(K),0===R?F=C=K[0]:(C=G(C,K[0]),F=H(F,K[0]));K&&B.push([(C+F)/2,0])}return B}a={normalizeCentralMeridian:z,_foldCutResults:A,_prepareGeometryForCut:u,_offsetMagnitude:k,_pointNormalization:x,_updatePolyGeometry:t,_straightLineDensify:n,_createWrappers:function(v){var B=y.isObject(v)?v.prototype:y.getObject(v+".prototype");b.forEach(B.__msigns,function(C){var F=B[C.n];
B[C.n]=function(){var G=this,H=[],J,I=new q(g._dfdCanceller);C.f&&g._fixDfd(I);for(J=0;J<C.c;J++)H[J]=arguments[J];var K={dfd:I};H.push(K);var R=[],W;if(G.normalization&&!G._isTable){var P=w(H,C.a);b.forEach(P,function(S){R=R.concat(S.value)});R.length&&(W=z(R))}W?(I._pendingDfd=W,W.addCallbacks(function(S){I.canceled||(K.assembly=D(S,P),I._pendingDfd=F.apply(G,H))},function(S){var L=G.declaredClass;L&&-1!==L.indexOf("FeatureLayer")?G._resolve([S],null,H[C.e],I,!0):G._errorHandler(S,H[C.e],I)})):
I._pendingDfd=F.apply(G,H);return I}})},_disassemble:w,_addToBucket:E,_reassemble:D,getDenormalizedExtent:function(v){if(!v)return null;var B=v.getExtent();if(!B)return null;var C=v.spatialReference&&v.spatialReference._getInfo();if(!C)return B;var F=C.valid[0];C=C.valid[1];var G=2*C,H=B.getWidth(),J=B.xmax,I=B.xmin;if("extent"===v.type||0===H||H<=C||H>G||J<F||I>C)return B;switch(v.type){case "polygon":if(1<v.rings.length)var K=r(v.rings);else return B;break;case "polyline":if(1<v.paths.length)K=
r(v.paths);else return B;break;case "multipoint":K=v.points}v=Math.min;F=Math.max;G=new f(B.toJson());for(var R=0;R<K.length;R++){var W=K[R][0];0>W?(W+=C,I=F(W,I)):(W-=C,J=v(W,J))}G.xmin=J;G.xmax=I;return G.getWidth()<H?(G.xmin-=C,G.xmax-=C,G):B}};y.mixin(y.getObject("geometry",!0,h),a);return a})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(b,
y,q,a,h,e,g,f,m,l,d){function c(){}function k(){}a={type:"polyline",paths:null};b=b(f,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(t){this.paths=[];this._path=0;t&&(q.isArray(t)?this.paths=q.isArray(t[0][0])?t:[t]:t.paths?e.mixin(this,t):this.spatialReference=t,this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(t){this.clearCache();this._path=this.paths.length;this.paths[this._path]=
[];q.isArray(t[0])?y.forEach(t,this._addPointArr,this):y.forEach(t,this._addPoint,this);return this},_addPointArr:function(t){this.paths[this._path].push(t)},_addPoint:function(t){this.paths[this._path].push([t.x,t.y])},_insertPoints:function(t,n){this.clearCache();this._path=n;this.paths[this._path]||(this.paths[this._path]=[]);y.forEach(t,this._addPoint,this)},_validateInputs:function(t,n){return null!==t&&void 0!==t&&(0>t||t>=this.paths.length)||null!==n&&void 0!==t&&(0>n||n>=this.paths[t].length)?
!1:!0},getPoint:function(t,n){if(this._validateInputs(t,n))return new m(this.paths[t][n],this.spatialReference)},setPoint:function(t,n,u){if(this._validateInputs(t,n))return this.clearCache(),this.paths[t][n]=[u.x,u.y],this},insertPoint:function(t,n,u){if(this._validateInputs(t)&&null!=n&&0<=n&&n<=this.paths[t].length)return this.clearCache(),this.paths[t].splice(n,0,[u.x,u.y]),this},removePath:function(t){if(this._validateInputs(t,null)){this.clearCache();t=this.paths.splice(t,1)[0];var n,u=t.length,
x=this.spatialReference;for(n=0;n<u;n++)t[n]=new m(t[n],x);return t}},removePoint:function(t,n){if(this._validateInputs(t,n))return this.clearCache(),new m(this.paths[t].splice(n,1)[0],this.spatialReference)},getExtent:function(){var t=this.getCacheValue("_extent");var n=this.getCacheValue("_partwise");if(t)return t=new l(t),t._partwise=n,t;t=this.paths;var u=t.length;if(u&&t[0].length){var x,A,z,E,w=x=t[0][0][0],D=A=t[0][0][1],r=Math.min,v=Math.max,B=this.spatialReference;n=[];var C,F;for(z=0;z<
u;z++){var G=t[z];var H=C=G[0]&&G[0][0];var J=F=G[0]&&G[0][1];var I=G.length;for(E=0;E<I;E++){var K=G[E];var R=K[0];K=K[1];w=r(w,R);D=r(D,K);x=v(x,R);A=v(A,K);H=r(H,R);J=r(J,K);C=v(C,R);F=v(F,K)}n.push(new l({xmin:H,ymin:J,xmax:C,ymax:F,spatialReference:B?B.toJson():null}))}t={xmin:w,ymin:D,xmax:x,ymax:A,spatialReference:B?B.toJson():null};n=1<n.length?n:null;this.setCacheValue("_extent",t);this.setCacheValue("_partwise",n);t=new l(t);t._partwise=n;return t}},toJson:function(){var t={paths:e.clone3DArray(this.paths)},
n=this.spatialReference;n&&(t.spatialReference=n.toJson());return t}});c.prototype=b.prototype;k.prototype=new c;Object.defineProperty(k.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:e.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(t){this._pathsVal=t}});k.prototype.setupLazyUnquantization=function(t,n){this._unquantizeFn=t;this._pathsVal=n.paths};b.simpleConstructor=c;b.accessorConstructor=k;b.defaultProps=
a;q.setObject("geometry.Polyline",b,h);h.geometry.defaultPolyline=a;return b})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c){function k(){}function t(){}a={type:"polygon",rings:null};var n=b(f,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(u){this.rings=[];this._ring=
0;u&&(q.isArray(u)?this.rings=q.isArray(u[0][0])?u:[u]:u.rings?e.mixin(this,u):this.spatialReference=u,this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(u){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];q.isArray(u[0])?y.forEach(u,this._addPointArr,this):y.forEach(u,this._addPoint,this);return this},_addPointArr:function(u){this.rings[this._ring].push(u)},_addPoint:function(u){this.rings[this._ring].push([u.x,
u.y])},_insertPoints:function(u,x){this.clearCache();this._ring=x;this.rings[this._ring]||(this.rings[this._ring]=[]);y.forEach(u,this._addPoint,this)},_validateInputs:function(u,x){return null!==u&&void 0!==u&&(0>u||u>=this.rings.length)||null!==x&&void 0!==u&&(0>x||x>=this.rings[u].length)?!1:!0},getPoint:function(u,x){if(this._validateInputs(u,x))return new m(this.rings[u][x],this.spatialReference)},setPoint:function(u,x,A){if(this._validateInputs(u,x))return this.clearCache(),this.rings[u][x]=
[A.x,A.y],this},insertPoint:function(u,x,A){if(this._validateInputs(u)&&null!=x&&0<=x&&x<=this.rings[u].length)return this.clearCache(),this.rings[u].splice(x,0,[A.x,A.y]),this},removeRing:function(u){if(this._validateInputs(u,null)){this.clearCache();u=this.rings.splice(u,1)[0];var x,A=u.length,z=this.spatialReference;for(x=0;x<A;x++)u[x]=new m(u[x],z);return u}},removePoint:function(u,x){if(this._validateInputs(u,x))return this.clearCache(),new m(this.rings[u].splice(x,1)[0],this.spatialReference)},
getExtent:function(){var u=this.getCacheValue("_extent");var x=this.getCacheValue("_partwise");if(u)return u=new l(u),u._partwise=x,u;u=this.rings;var A=u.length;if(A&&u[0].length){var z,E,w,D,r=z=u[0][0][0],v=E=u[0][0][1],B=Math.min,C=Math.max,F=this.spatialReference;x=[];var G,H;for(w=0;w<A;w++){var J=u[w];var I=G=J[0]&&J[0][0];var K=H=J[0]&&J[0][1];var R=J.length;for(D=0;D<R;D++){var W=J[D];var P=W[0];W=W[1];r=B(r,P);v=B(v,W);z=C(z,P);E=C(E,W);I=B(I,P);K=B(K,W);G=C(G,P);H=C(H,W)}x.push(new l({xmin:I,
ymin:K,xmax:G,ymax:H,spatialReference:F?F.toJson():null}))}u={xmin:r,ymin:v,xmax:z,ymax:E,spatialReference:F?F.toJson():null};x=1<x.length?x:null;this.setCacheValue("_extent",u);this.setCacheValue("_partwise",x);u=new l(u);u._partwise=x;return u}},contains:function(u){var x=this.rings,A=!1,z,E,w,D=x.length;var r=this.spatialReference;var v=u.spatialReference;var B=u.x;u=u.y;r&&v&&!r.equals(v)&&r._canProject(v)&&(u=r.isWebMercator()?m.lngLatToXY(B,u):m.xyToLngLat(B,u,!0),B=u[0],u=u[1]);for(w=0;w<D;w++){r=
x[w];var C=r.length;for(E=z=0;E<C;E++){z++;z===C&&(z=0);v=r[E];var F=r[z];(v[1]<u&&F[1]>=u||F[1]<u&&v[1]>=u)&&v[0]+(u-v[1])/(F[1]-v[1])*(F[0]-v[0])<B&&(A=!A)}}return A},getCentroid:function(){var u=this.getCacheValue("_centroid");if(void 0!==u)return u;u=this.rings;var x,A,z=[],E,w,D=Infinity,r=-Infinity,v=Infinity,B=-Infinity;y.forEach(u,function(G){C=x=A=0;y.forEach(G,function(H,J){J<G.length-1&&(E=G[J+1],w=H[0]*E[1]-E[0]*H[1],C+=(H[0]+E[0])*w,x+=(H[1]+E[1])*w,A+=w,H[0]<D&&(D=H[0]),H[0]>r&&(r=H[0]),
H[1]<v&&(v=H[1]),H[1]>B&&(B=H[1]))});0<A&&(A*=-1);A&&z.push([C,x,A/2])});z.sort(function(G,H){return G[2]-H[2]});var C=x=void 0;if(z[0]){var F=6*z[0][2];C=z[0][0]/F;x=z[0][1]/F;if(C<D||C>r||x<v||x>B)C=x=void 0}if(void 0===C||void 0===x)if(u=u[0]&&u[0].length?this._getLineCentroid(u[0]):null)C=u.x,x=u.y;u=isNaN(C)||isNaN(x)?null:new m(C,x,this.spatialReference);this.setCacheValue("_centroid",u);return u},_getLineCentroid:function(u){var x=0,A=0,z=0,E={x:0,y:0},w={x:0,y:0},D,r=u.length,v;for(D=0;D<
r-1;D++){var B=u[D];var C=u[D+1];if(B&&C){E.x=B[0];E.y=B[1];w.x=C[0];w.y=C[1];var F=d.getLength(E,w);0<F&&(x+=F,B=d.getMidpoint(B,C),A+=F*B[0],z+=F*B[1])}}0<x?v={x:A/x,y:z/x}:u[0]&&(v={x:u[0][0],y:u[0][1]});return v},isClockwise:function(u){var x=0,A,z=u.length,E=q.isArray(u[0])?function(w,D){return w[0]*D[1]-D[0]*w[1]}:function(w,D){return w.x*D.y-D.x*w.y};for(A=0;A<z;A++)x+=E(u[A],u[(A+1)%z]);return 0>=x/2},isSelfIntersecting:function(u){u=u||this;var x,A,z,E,w,D=u.rings.length;for(z=0;z<D;z++){for(x=
0;x<u.rings[z].length-1;x++){var r=[[u.rings[z][x][0],u.rings[z][x][1]],[u.rings[z][x+1][0],u.rings[z][x+1][1]]];for(A=z+1;A<D;A++)for(E=0;E<u.rings[A].length-1;E++){var v=[[u.rings[A][E][0],u.rings[A][E][1]],[u.rings[A][E+1][0],u.rings[A][E+1][1]]];if((w=d._getLineIntersection2(r,v))&&!(w[0]===r[0][0]&&w[1]===r[0][1]||w[0]===v[0][0]&&w[1]===v[0][1]||w[0]===r[1][0]&&w[1]===r[1][1]||w[0]===v[1][0]&&w[1]===v[1][1]))return!0}}E=u.rings[z].length;if(!(4>=E))for(x=0;x<E-3;x++){var B=E-1;0===x&&(B=E-2);
r=[[u.rings[z][x][0],u.rings[z][x][1]],[u.rings[z][x+1][0],u.rings[z][x+1][1]]];for(A=x+2;A<B;A++)if(v=[[u.rings[z][A][0],u.rings[z][A][1]],[u.rings[z][A+1][0],u.rings[z][A+1][1]]],(w=d._getLineIntersection2(r,v))&&!(w[0]===r[0][0]&&w[1]===r[0][1]||w[0]===v[0][0]&&w[1]===v[0][1]||w[0]===r[1][0]&&w[1]===r[1][1]||w[0]===v[1][0]&&w[1]===v[1][1]))return!0}}return!1},toJson:function(){var u={rings:e.clone3DArray(this.rings)},x=this.spatialReference;x&&(u.spatialReference=x.toJson());return u}});k.prototype=
n.prototype;t.prototype=new k;Object.defineProperty(t.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:e.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(u){this._ringsVal=u}});t.prototype.setupLazyUnquantization=function(u,x){this._unquantizeFn=u;this._ringsVal=x.rings};n.simpleConstructor=k;n.accessorConstructor=t;n.defaultProps=a;n.createEllipse=function(u){var x=u.center.x,A=u.center.y,z=u.longAxis,
E=u.shortAxis,w=u.numberOfPoints,D=u.map,r;u=[];var v=2*Math.PI/w;for(r=0;r<w;r++){var B=Math.cos(r*v);var C=Math.sin(r*v);B=D.toMap({x:z*B+x,y:E*C+A});u.push(B)}u.push(u[0]);x=new n(D.spatialReference);x.addRing(u);return x};n.createCircle=function(u){return n.createEllipse({center:u.center,longAxis:u.r,shortAxis:u.r,numberOfPoints:u.numberOfPoints,map:u.map})};n.fromExtent=function(u){var x=u.normalize();u=u.spatialReference;return new n({rings:y.map(x,function(A){return[[A.xmin,A.ymin],[A.xmin,
A.ymax],[A.xmax,A.ymax],[A.xmax,A.ymin],[A.xmin,A.ymin]]}),spatialReference:u?u.toJson():null})};q.setObject("geometry.Polygon",n,h);h.geometry.defaultPolygon=a;h.geometry.createEllipse=n.createEllipse;h.geometry.createCircle=n.createCircle;h.geometry.isClockwise=n.prototype.isClockwise;h.geometry.polygonSelfIntersecting=n.prototype.isSelfIntersecting;return n})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(b,y,q,a,h,e,g,f,m){function l(t,n,u){var x=t.rings||t.paths,A,z;var E=0;for(A=x.length;E<A;E++){var w=x[E];var D=0;for(z=w.length;D<z;D++){var r=w[D];if(0<D)v+=r[0],B+=r[1];else{var v=r[0];var B=r[1]}r[0]=n(v);r[1]=u(B)}}return t}var d={esriGeometryPoint:function(t,n,u){t.x=n(t.x);t.y=u(t.y);return t},esriGeometryPolyline:l,esriGeometryPolygon:l,esriGeometryEnvelope:function(t,n,u){t.xmin=n(t.xmin);t.ymin=u(t.ymin);t.xmax=n(t.xmax);t.ymax=u(t.ymax);return t},esriGeometryMultipoint:function(t,
n,u){var x=t.points,A;var z=0;for(A=x.length;z<A;z++){var E=x[z];if(0<z)w+=E[0],D+=E[1];else{var w=E[0];var D=E[1]}E[0]=n(w);E[1]=u(D)}return t}},c={esriGeometryPoint:function(t,n,u){t.x=n(t.x);t.y=u(t.y);return t}},k={createInstance:function(t,n){t=new t;n&&a.mixin(t,n);return t},fromJson:function(t){if(void 0!==t.x&&void 0!==t.y)return new h(t);if(void 0!==t.paths)return new e(t);if(void 0!==t.rings)return new g(t);if(void 0!==t.points)return new f(t);if(void 0!==t.xmin&&void 0!==t.ymin&&void 0!==
t.xmax&&void 0!==t.ymax)return new m(t)},getJsonType:function(t){return t instanceof h?"esriGeometryPoint":t instanceof e?"esriGeometryPolyline":t instanceof g?"esriGeometryPolygon":t instanceof m?"esriGeometryEnvelope":t instanceof f?"esriGeometryMultipoint":null},getGeometryType:function(t){return"esriGeometryPoint"===t?h:"esriGeometryPolyline"===t?e:"esriGeometryPolygon"===t?g:"esriGeometryEnvelope"===t?m:"esriGeometryMultipoint"===t?f:null},supportsLazyUnquantization:function(t){return"esriGeometryPoint"===
t||"esriGeometryPolyline"===t||"esriGeometryPolygon"===t||"esriGeometryMultipoint"===t},unquantizeFunction:function(t,n){if(t&&n){var u=n.translate[0],x=n.translate[1],A=n.scale[0],z=n.scale[1],E=function(r){return r*A+u},w=function(r){return x-r*z},D=d[t];return function(r){return r?D(r,E,w):null}}},unquantize:function(t,n,u){if(n=k.unquantizeFunction(n,u)){var x=t.length;for(u=0;u<x;u++)n(t[u].geometry)}},quantizeFunction:function(t,n){if(t&&"esriGeometryPoint"===t&&n){var u=n.translate[0],x=n.translate[1],
A=n.scale[0],z=n.scale[1],E=function(r){return Math.round((r-u)/A)},w=function(r){return Math.round((x-r)/z)},D=c[t];return function(r){return r?D(r,E,w):null}}},quantize:function(t,n,u){if(n=k.quantizeFunction(n,u)){var x=t.length;for(u=0;u<x;u++)n(t[u].geometry)}}};b.mixin(b.getObject("geometry",!0,q),k);return k})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(b,
y,q,a,h,e,g,f,m,l){function d(){}function c(){}q={type:"multipoint",points:null};b=b(g,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(k){this.points=[];k&&(k.points?h.mixin(this,k):this.spatialReference=k,this.spatialReference&&(this.spatialReference=l.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(k){this.clearCache();y.isArray(k)?this.points.push(k):this.points.push([k.x,k.y]);return this},removePoint:function(k){if(this._validateInputs(k))return this.clearCache(),
new f(this.points.splice(k,1)[0],this.spatialReference)},getExtent:function(){var k=this.getCacheValue("_extent");if(k)return new m(k);k=this.points;var t=k.length;if(t){var n=k[0],u,x,A=u=n[0],z=x=n[1],E=Math.min,w=Math.max,D=this.spatialReference,r;for(r=0;r<t;r++){n=k[r];var v=n[0];n=n[1];A=E(A,v);z=E(z,n);u=w(u,v);x=w(x,n)}k={xmin:A,ymin:z,xmax:u,ymax:x,spatialReference:D?D.toJson():null};this.setCacheValue("_extent",k);return new m(k)}},_validateInputs:function(k){return null===k||0>k||k>=this.points.length?
!1:!0},getPoint:function(k){if(this._validateInputs(k))return k=this.points[k],new f(k[0],k[1],this.spatialReference)},setPoint:function(k,t){if(this._validateInputs(k))return this.clearCache(),this.points[k]=[t.x,t.y],this},toJson:function(){var k={points:h.clone2DArray(this.points)},t=this.spatialReference;t&&(k.spatialReference=t.toJson());return k}});d.prototype=b.prototype;c.prototype=new d;Object.defineProperty(c.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:h.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(k){this._pointsVal=k}});c.prototype.setupLazyUnquantization=function(k,t){this._unquantizeFn=k;this._pointsVal=t.points};b.simpleConstructor=d;b.accessorConstructor=c;b.defaultProps=q;y.setObject("geometry.Multipoint",b,a);a.geometry.defaultMultipoint=q;return b})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(b,y,q,
a,h,e,g,f){b=b(f,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(m,l){m&&y.isString(m)&&(this._url=g.urlToObject(this.url=m));l&&l.requestOptions&&(this.requestOptions=l.requestOptions);this.normalization=!0;this._errorHandler=y.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var m=this._url,l=/^http:/i;this.url&&(this.url=this.url.replace(l,"https:"));m&&m.path&&(m.path=m.path.replace(l,"https:"))},_encode:function(m,
l,d){var c={},k;for(k in m)if("declaredClass"!==k){var t=m[k];var n=typeof t;if(null!==t&&void 0!==t&&"function"!==n)if(y.isArray(t)){c[k]=[];var u=t.length;for(n=0;n<u;n++)c[k][n]=this._encode(t[n])}else"object"===n?t.toJson&&(n=t.toJson(d&&d[k]),"esri.tasks.FeatureSet"===t.declaredClass&&n.spatialReference&&(n.sr=n.spatialReference,delete n.spatialReference),c[k]=l?n:q.toJson(n)):c[k]=t}return c},_successHandler:function(m,l,d,c){l&&this[l].apply(this,m);d&&d.apply(null,m);c&&e._resDfd(c,m)},_errorHandler:function(m,
l,d){this.onError(m);l&&l(m);d&&d.errback(m)},setNormalization:function(m){this.normalization=m},onError:function(){}});return h.Task=b})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c){b=b(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(k,t){if(k){y.mixin(this,
k);var n=this.features=this.features||[],u=k.spatialReference;u=this.spatialReference=d.createInstance(f.simpleConstructor,u);var x=d.getGeometryType(k.geometryType);this.geometryType=k.geometryType;k.fields&&(this.fields=k.fields);k=d.supportsLazyUnquantization(this.geometryType);var A=d.unquantizeFunction(this.geometryType,this.transform),z=!!(t&&k&&A),E=x&&(z?x.accessorConstructor:x.simpleConstructor);q.forEach(n,function(w,D){var r=d.createInstance(g.simpleConstructor),v=w.geometry;if(x&&v){var B=
r.geometry=d.createInstance(E,z?null:v);B.setSpatialReference(v.spatialReference?d.createInstance(f.simpleConstructor,v.spatialReference):u);z&&B.setupLazyUnquantization(A,v)}r.symbol=w.symbol?c.fromJson(w.symbol):null;r.attributes=w.attributes;n[D]=r});z||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(k){var t={};this.displayFieldName&&(t.displayFieldName=this.displayFieldName);this.fields&&(t.fields=this.fields);
this.spatialReference?t.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(t.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(t.geometryType=d.getJsonType(this.features[0].geometry)),t.features=m._encodeGraphics(this.features,k));t.geometryType=t.geometryType||this.geometryType;t.exceededTransferLimit=this.exceededTransferLimit;t.transform=this.transform;return e.fixJson(t)},_hydrate:function(){d.unquantize(this.features,
this.geometryType,this.transform);this.transform=null},quantize:function(k){if(!this.geometryType)return this.transform=null,this;var t=k.translate[0],n=k.translate[1],u=k.scale[0],x=k.scale[1],A=this.features,z=function(r,v,B){var C,F=[];var G=0;for(C=r.length;G<C;G++){var H=r[G];if(0<G){var J=v(H[0]);H=B(H[1]);if(J!==I||H!==K){F.push([J-I,H-K]);var I=J;var K=H}}else I=v(H[0]),K=B(H[1]),F.push([I,K])}return 0<F.length?F:null},E=function(r,v,B){if("esriGeometryPoint"===r)return function(C){C.x=v(C.x);
C.y=B(C.y);return C};if("esriGeometryPolyline"===r||"esriGeometryPolygon"===r)return function(C){var F;var G=C.rings||C.paths;var H=[];var J=0;for(F=G.length;J<F;J++){var I=G[J];(I=z(I,v,B))&&H.push(I)}return 0<H.length?(C.rings?C.rings=H:C.paths=H,C):null};if("esriGeometryMultipoint"===r)return function(C){var F=z(C.points,v,B);return 0<F.length?(C.points=F,C):null};if("esriGeometryEnvelope"===r)return function(C){return C}}(this.geometryType,function(r){return Math.round((r-t)/u)},function(r){return Math.round((n-
r)/x)}),w;var D=0;for(w=A.length;D<w;D++)A[D].geometry&&(E(A[D].geometry)||A[D].setGeometry(null));this.transform=k;return this}});b.createGraphics=function(k){var t=k.geometryType,n=d.createInstance(f.simpleConstructor,k.spatialReference),u=d.getGeometryType(t).accessorConstructor,x=d.unquantizeFunction(t,k.transform);return q.map(k.features,function(A,z){z=d.createInstance(g.simpleConstructor);var E=A.geometry;if(E){var w=z.geometry=d.createInstance(u);w.setSpatialReference(n);w.setupLazyUnquantization(x,
E)}z.attributes=A.attributes;return z})};b.createPolygon=function(k,t,n){if(k){var u=d.createInstance(l.accessorConstructor);u.setSpatialReference(t);t=d.unquantizeFunction("esriGeometryPolygon",n);u.setupLazyUnquantization(t,k)}return u};y.setObject("tasks.FeatureSet",b,h);return b})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(b,y,q,a,h,e,g,f,m){function l(){}
b=b(null,{declaredClass:"esri.Graphic",constructor:function(d,c,k,t){this._construct();d&&!d.declaredClass?(this.geometry=d.geometry?f.fromJson(d.geometry):null,this.symbol=d.symbol?m.fromJson(d.symbol):null,this.attributes=d.attributes||null,this.infoTemplate=d.infoTemplate?new g(d.infoTemplate):null):(this.geometry=d,this.symbol=c,this.attributes=k,this.infoTemplate=t)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,
_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(d){this._parentGraphic=d},setSize:function(d){this.size=d;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(d){this._aggregationSourceLayer=d;return this},isAggregate:function(){return!!this._aggregationInfo},
getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(d){this._aggregationInfo=d;return this},getChildGraphics:function(){var d=this.getAggregationSourceLayer();return d?d.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var d=[];this._shape&&d.push(this._shape);this._bgShape&&d.push(this._bgShape);return d},getNode:function(){var d=this._shape&&this._shape.getNode();return d&&d.nodeType?d:null},getNodes:function(){var d=
this.getShapes(),c,k,t=d.length,n=[];for(k=0;k<t;k++)(c=d[k]&&d[k].getNode())&&c.nodeType&&n.push(c);return n},getLayer:function(){return this._layer},getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var d=new this.constructor(this.toJson());d.visible=this.visible;d._layer=this._layer;d._sourceLayer=this._sourceLayer;d._aggregationSourceLayer=this._aggregationSourceLayer;d._aggregationInfo=this._aggregationInfo;d._resolution=this._resolution;return d},draw:function(){var d=
this._graphicsLayer;d&&d._draw(this,!0);return this},setGeometry:function(d){this.geometry=d;this._geomVersion++;var c=this._graphicsLayer;c&&(c._updateExtent(this),this.draw(),d&&"polyline"===d.type&&c._updateSVGMarkers());return this},setResolution:function(d){this._resolution=d;return this},getResolution:function(){return this._resolution},setSymbol:function(d,c){var k=this._graphicsLayer,t=this._shape;this.symbol=d;k&&(c&&t&&k._removeShape(this),this.draw());return this},setAttributes:function(d){this.attributes=
d;this.clearCache();return this},setInfoTemplate:function(d){this.infoTemplate=d;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var d=this.getLayer();return this.infoTemplate||d&&d.infoTemplate},getTitle:function(){var d=this.getInfoTemplate(),c=d&&d.title;if(y.isFunction(c))c=c.call(d,this);else if(y.isString(c)){var k=(d=this.getLayer())&&d._getDateOpts;c=e.substitute(this.attributes,c,{first:!0,dateFormat:k&&k.call(d)})}return c},getContent:function(){var d=
this.getInfoTemplate(),c=d&&d.content;if(y.isFunction(c))c=c.call(d,this);else if(y.isString(c)){var k=(d=this.getLayer())&&d._getDateOpts;c=e.substitute(this.attributes,c,{dateFormat:k&&k.call(d)})}return c},attr:function(d,c){null==c||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[d]=c,this._setDataAttr(d,c));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},
show:function(){this.visible=!0;this.attr("data-hidden");var d;if(this.getShapes().length){var c=this.getNodes();var k=c.length;for(d=0;d<k;d++)h.show(c[d])}else this.draw();(c=this._graphicsLayer)&&c._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var d=this._graphicsLayer,c,k;if(d){if("canvas-2d"===d.surfaceType)d._removeShape(this);else{var t=this.getNodes();if(k=t.length)for(c=0;c<k;c++)h.hide(t[c])}d._graphicVisibilityChanged(this)}return this},
toJson:function(){var d={};this.geometry&&(d.geometry=this.geometry.toJson());this.attributes&&(d.attributes=y.mixin({},this.attributes));this.symbol&&(d.symbol=this.symbol.toJson());this.infoTemplate&&(d.infoTemplate=this.infoTemplate.toJson());return d},_setDataAttr:function(d,c){var k=this.getNodes(),t,n=k.length;for(t=0;t<n;t++)this._setDOMDataAttr(k[t],d,c)},_setDOMDataAttr:function(d,c,k){null==k?d.removeAttribute(c):d.setAttribute(c,k)},_applyDataAttrs:function(){var d=this._dataAttrs;if(d){var c=
this.getNodes(),k,t=c.length;for(k=0;k<t;k++)for(var n in d)this._setDOMDataAttr(c[k],n,d[n])}},_getViewInfo:function(d){return(d=(d=d||this.getLayer())&&d.getMap())&&d.getViewInfo()},evaluateExpression:function(d,c){return this._getDataValue(d._attributeDef,d._attributeCache,null,null,d,c)},_getDataValue:function(d,c,k,t,n,u){var x=c.id,A=this.attributes,z=d.field,E=c.isNumeric,w=null;if(x){var D=this._computedAttributes,r=this._computedVersion,v=this._computedGeomVersion;t=this._getViewInfo(t);
var B=!(!n||!n.async),C=u&&u.skipCache||B,F=!u||!1!==u.strictReturnType,G=c.dependsOnView||c.isJSFunc,H=c.dependsOnGeometry;D||(D=this._computedAttributes={});G&&!r&&(r=this._computedVersion={});H&&!v&&(v=this._computedGeomVersion={});var J=G&&r[x]!==t.version||H&&v[x]!==this._geomVersion;w=D[x];if(void 0===w||J||C)w=null,c.hasExpr?w=n?n.evaluate(u&&u.context):k.executeFunction(c.compiledFunc,k.createExecContext(this,t)):c.isJSFunc?w=z(this,d):A&&(w=A[z],E&&this._isValidNumber(w)&&(c=d.normalizationType||
"field",k=w,w=null,n=d.normalizationTotal,d=A[d.normalizationField],"log"===c&&0!==k?w=Math.log(k)*Math.LOG10E:"percent-of-total"===c&&this._isValidNumber(n)&&0!==n?w=k/n*100:"field"===c&&this._isValidNumber(d)&&0!==d&&(w=k/d))),F&&(B?E&&(this._construct(),w=w.then(this._sanitizeNumericValue)):w=this._sanitizeValue(w,E)),C||(D[x]=w,G&&(r[x]=t.version),H&&(v[x]=this._geomVersion))}else A&&(w=this._sanitizeValue(A[z],E));return w},_sanitizeValue:function(d,c){c&&!this._isValidNumber(d)&&(d=null);return d},
_sanitizeNumericValue:function(d){return this._sanitizeValue(d,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=y.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(d){return"number"===typeof d&&!isNaN(d)&&Infinity!==d&&-Infinity!==d},clearCache:function(d){if(null!=d){var c=this._computedAttributes,k=this._computedVersion,t=this._computedGeomVersion;c&&(c[d]=void 0);k&&(k[d]=void 0);t&&(t[d]=void 0)}else this._computedAttributes=this._computedVersion=
this._computedGeomVersion=null}});b.prototype.getShape=b.prototype.getDojoShape;l.prototype=b.prototype;b.simpleConstructor=l;return a.Graphic=b})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(b,y,q,a,h){b=b(null,{declaredClass:"esri.InfoTemplate",constructor:function(e,g){e&&y.isObject(e)&&!y.isFunction(e)?y.mixin(this,e):(this.title=e||"${*}",this.content=g||"${*}")},setTitle:function(e){this.title=e;return this},setContent:function(e){this.content=
e;return this},toJson:function(){return h.fixJson({title:this.title,content:this.content})}});return a.InfoTemplate=b})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(b,y,q,a,h,e,g,f,m,l,d){var c={createDefaultSymbol:function(k){switch(k){case "esriGeometryPoint":case "esriGeometryMultipoint":var t=
c.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":t=c.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":t=c.createDefaultFillSymbol()}return t},createDefaultMarkerSymbol:function(){return new h},createDefaultLineSymbol:function(){return new g},createDefaultFillSymbol:function(){return new m},getFirstSupportedSymbol:function(k){var t;y.some(k,function(n){n&&-1<c.supportedSymbolTypes.indexOf(n.type)&&(t=n);return!!t});
return t},isPointSymbol:function(k){return k?-1<c.supportedPointSymbolTypes.indexOf(k.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(k,t){var n=null;switch(k.type){case "esriSMS":n=new h(k);break;case "esriPMS":n=new e(k);break;case "esriTS":n=new d(k);break;case "esriSLS":n=void 0!==k.cap?new f(k):new g(k);break;case "esriCLS":n=new f(k);break;case "esriSFS":n=new m(k);break;
case "esriPFS":n=new l(k);break;default:n=(k=t&&t.geometryType)?c.createDefaultSymbol(k):null}return n},getShapeDescriptors:function(k){return k&&k.getShapeDescriptors?k.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};b.mixin(b.getObject("symbol",!0,a),c);return c})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(b,y,q,a,h,e,
g,f,m){var l={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},d={style:l.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};b=b(f,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},
constructor:function(c,k,t,n){c?y.isString(c)?(this.style=c,k&&(this.size=k),t&&(this.outline=t),n&&(this.color=n)):(this.style=g.valueOf(this._styles,this.style),c.outline&&(this.outline=new m(c.outline))):(y.mixin(this,d),this.size=h.pt2px(this.size),this.outline=new m(this.outline),this.color=new q(this.color));this.style||(this.style=l.STYLE_CIRCLE)},setStyle:function(c){this.style=c;return this},setPath:function(c){this.path=c;this.setStyle(l.STYLE_PATH);return this},setOutline:function(c){this.outline=
c;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(c,k,t){this._targetWidth=c;this._targetHeight=k;this._spikeSize=t},getShapeDescriptors:function(){var c,k=this.style,t=(this.size||h.pt2px(d.size))/2,n=0-t,u=0+t,x=0-t,A=0+t;switch(k){case l.STYLE_CIRCLE:var z={type:"circle",cx:0,cy:0,r:t};var E=this.getFill();if(c=this.getStroke())c.style=c.style||"Solid";break;case l.STYLE_CROSS:z={type:"path",path:"M "+n+",0 L "+
u+",0 M 0,"+x+" L 0,"+A+" E"};E=null;c=this.getStroke();break;case l.STYLE_DIAMOND:z={type:"path",path:"M "+n+",0 L 0,"+x+" L "+u+",0 L 0,"+A+" L "+n+",0 Z"};E=this.getFill();c=this.getStroke();break;case l.STYLE_SQUARE:z={type:"path",path:"M "+n+","+A+" L "+n+","+x+" L "+u+","+x+" L "+u+","+A+" L "+n+","+A+" Z"};E=this.getFill();c=this.getStroke();break;case l.STYLE_TRIANGLE:z={type:"path",path:"M "+n+","+A+" L 0,"+x+" L "+u+","+A+" L "+n+","+A+" Z"};E=this.getFill();c=this.getStroke();break;case l.STYLE_X:z=
{type:"path",path:"M "+n+","+A+" L "+u+","+x+" M "+n+","+x+" L "+u+","+A+" E"};E=null;c=this.getStroke();break;case l.STYLE_PATH:z={type:"path",path:this.path||""},E=this.getFill(),c=this.getStroke()}return{defaultShape:z,fill:E,stroke:c}},toJson:function(){var c=this.style,k=this.outline,t=y.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[c]||"esriSMSCircle"});k&&(t.outline=k.toJson());"x"===c||"cross"===c?delete t.color:"target"===c&&(t.style="esriSMSSquare",delete t.color,
0<this._targetHeight&&0<this._targetWidth&&(t.size=h.px2pt(Math.max(this._targetHeight,this._targetWidth))));t.path=this.path;return g.fixJson(t)}});y.mixin(b,l);b.defaultProps=d;y.setObject("symbol.SimpleMarkerSymbol",b,e);e.symbol.defaultSimpleMarkerSymbol=d;return b})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(b,y,q,a,h,e,g,f,m){var l=
y.getObject("dojox.gfx",!0),d=l._base={};l._hasClass=function(x,A){return(x=x.getAttribute("className"))&&0<=(" "+x+" ").indexOf(" "+A+" ")};l._addClass=function(x,A){var z=x.getAttribute("className")||"";(!z||0>(" "+z+" ").indexOf(" "+A+" "))&&x.setAttribute("className",z+(z?" ":"")+A)};l._removeClass=function(x,A){var z=x.getAttribute("className");z&&x.setAttribute("className",z.replace(new RegExp("(^|\\s+)"+A+"(\\s+|$)"),"$1$2"))};d._getFontMeasurements=function(){var x={"1em":0,"1ex":0,"100%":0,
"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},A;if(a("ie")){var z=h.doc.documentElement.style.fontSize||"";z||(h.doc.documentElement.style.fontSize="100%")}var E=f.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},h.body());for(A in x)E.style.fontSize=A,x[A]=16*Math.round(12*E.offsetHeight/16)/12/1E3;a("ie")&&(h.doc.documentElement.style.fontSize=
z);h.body().removeChild(E);return x};var c=null;d._getCachedFontMeasurements=function(x){if(x||!c)c=d._getFontMeasurements();return c};var k=null,t={};d._getTextBox=function(x,A,z){var E=arguments.length,w;k||(k=f.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},h.body()));var D=k;D.className="";var r=D.style;r.borderWidth="0";r.margin="0";r.padding="0";r.outline="0";if(1<E&&A)for(w in A)w in t||(r[w]=A[w]);2<E&&z&&(D.className=z);D.innerHTML=x;D.getBoundingClientRect?
(r=D.getBoundingClientRect(),r={l:r.left,t:r.top,w:r.width||r.right-r.left,h:r.height||r.bottom-r.top}):r=m.getMarginBox(D);D.innerHTML="";return r};d._computeTextLocation=function(x,A,z,E){var w={};switch(x.align){case "end":w.x=x.x-A;break;case "middle":w.x=x.x-A/2;break;default:w.x=x.x}w.y=x.y-z*(E?.75:1);return w};d._computeTextBoundingBox=function(x){if(!l._base._isRendered(x))return{x:0,y:0,width:0,height:0};var A=x.getShape();var z=x.getFont()||l.defaultFont;x=x.getTextWidth();z=l.normalizedLength(z.size);
A=d._computeTextLocation(A,x,z,!0);return{x:A.x,y:A.y,width:x,height:z}};d._isRendered=function(x){for(x=x.parent;x&&x.getParent;)x=x.parent;return null!==x};var n=0;d._getUniqueId=function(){do var x=b._scopeName+"xUnique"+ ++n;while(g.byId(x));return x};var u=a("pointer-events")?"touchAction":a("MSPointer")?"msTouchAction":null;d._fixMsTouchAction=u?function(x){x.rawNode.style[u]="none"}:function(){};y.mixin(l,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",
x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,
cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var x={};return function(A){var z=x[A];if(z)return new z;z=x[A]=
function(){};z.prototype=l["default"+A];return new z}}(),normalizeColor:function(x){return x instanceof q?x:new q(x)},normalizeParameters:function(x,A){var z;if(A){var E={};for(z in x)z in A&&!(z in E)&&(x[z]=A[z])}return x},makeParameters:function(x,A){var z=null;if(!A)return y.delegate(x);var E={};for(z in x)z in E||(E[z]=y.clone(z in A?A[z]:x[z]));return E},formatNumber:function(x,A){var z=x.toString();if(0<=z.indexOf("e"))z=x.toFixed(4);else{var E=z.indexOf(".");0<=E&&5<z.length-E&&(z=x.toFixed(4))}return 0>
x?z:A?" "+z:z},makeFontString:function(x){return x.style+" "+x.variant+" "+x.weight+" "+x.size+" "+x.family},splitFontString:function(x){var A=l.getDefault("Font");x=x.split(/\s+/);if(!(5>x.length)){A.style=x[0];A.variant=x[1];A.weight=x[2];var z=x[3].indexOf("/");A.size=0>z?x[3]:x[3].substring(0,z);var E=4;0>z&&("/"==x[4]?E=6:"/"==x[4].charAt(0)&&(E=5));E<x.length&&(A.family=x.slice(E).join(" "))}return A},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return l._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(x){return x*l.px_in_pt()},px2pt:function(x){return x/l.px_in_pt()},normalizedLength:function(x){if(0===x.length)return 0;if(2<x.length){var A=l.px_in_pt(),z=parseFloat(x);switch(x.slice(-2)){case "px":return z;case "pt":return z*A;case "in":return 72*z*A;case "pc":return 12*z*A;case "mm":return z*l.mm_in_pt*A;case "cm":return z*l.cm_in_pt*A}}return parseFloat(x)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(x,A){return x&&A&&x===A},switchTo:function(x){var A="string"==typeof x?l[x]:x;A&&(e.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(z){l[z]=A[z]}),"string"==typeof x?l.renderer=x:e.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(z){return l.renderer=l[z]&&l[z].Surface===l.Surface?z:null}))}});return l})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],
function(b,y,q){y.switchTo(q);return y})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(b,y,q,a,h){var e=null;q.add("vml",function(g,f,m){m.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';g="adj"in m.firstChild;m.innerHTML="";return g});return{load:function(g,f,m){function l(){f(["dojox/gfx/"+d],function(t){b.renderer=d;e=t;m(t)})}if(e&&"force"!=g)m(e);else{var d=h.forceGfxRenderer;g=!d&&(y.isString(h.gfxRenderer)?
h.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var c,k;!d&&g.length;)switch(g.shift()){case "svg":"SVGAngle"in a.global&&(d="svg");break;case "vml":q("vml")&&(d="vml");break;case "silverlight":try{q("ie")?(c=new ActiveXObject("AgControl.AgControl"),c.IsVersionSupported("1.0"))&&(k=!0):navigator.plugins["Silverlight Plug-In"]&&(k=!0)}catch(t){k=!1}finally{c=null}k&&(d="silverlight");break;case "canvas":a.global.CanvasRenderingContext2D&&(d="canvas")}"canvas"===d&&!1!==h.canvasEvents&&(d=
"canvasWithEvents");"svg"==d&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(l):l()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c){function k(v,B){return q.doc.createElementNS?q.doc.createElementNS(v,B):q.doc.createElement(B)}function t(v,B,C,F){return v.setAttributeNS?v.setAttributeNS(B,
C,F):v.setAttribute(C,F)}function n(v){return u.useSvgWeb?q.doc.createTextNode(v,!0):q.doc.createTextNode(v)}var u=l.svg={};u.useSvgWeb="undefined"!=typeof window.svgweb;var x=navigator.userAgent,A=y("ios"),z=y("android"),E=y("chrome")||z&&4<=z?"auto":"optimizeLegibility";u.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};u.getRef=function(v){return v&&"none"!=v?v.match(/^url\(#.+\)$/)?a.byId(v.slice(5,-1)):v.match(/^#dojoUnique\d+$/)?a.byId(v.slice(1)):null:null};u.dasharray=
{solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var w=0;u.Shape=h("dojox.gfx.svg.Shape",d.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var v=this.rawNode.getAttribute("fill");(v=u.getRef(v))&&v.parentNode.removeChild(v)}this.clip&&(v=this.rawNode.getAttribute("clip-path"))&&(v=a.byId(v.match(/gfx_clip[\d]+/)[0]))&&v.parentNode.removeChild(v);
d.Shape.prototype.destroy.apply(this,arguments)},setFill:function(v){if(!v)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var B=function(F){this.setAttribute(F,C[F].toFixed(8))};if("object"==typeof v&&"type"in v){switch(v.type){case "linear":var C=l.makeParameters(l.defaultLinearGradient,v);v=this._setFillObject(C,"linearGradient");e.forEach(["x1","y1","x2","y2"],B,v);break;case "radial":C=l.makeParameters(l.defaultRadialGradient,
v);v=this._setFillObject(C,"radialGradient");e.forEach(["cx","cy","r"],B,v);break;case "pattern":C=l.makeParameters(l.defaultPattern,v),v=this._setFillObject(C,"pattern"),e.forEach(["x","y","width","height"],B,v)}this.fillStyle=C;return this}this.fillStyle=C=l.normalizeColor(v);this.rawNode.setAttribute("fill",C.toCss());this.rawNode.setAttribute("fill-opacity",C.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(v){var B=this.rawNode;if(!v)return this.strokeStyle=
null,B.setAttribute("stroke","none"),B.setAttribute("stroke-opacity",0),this;if("string"==typeof v||b.isArray(v)||v instanceof m)v={color:v};v=this.strokeStyle=l.makeParameters(l.defaultStroke,v);v.color=l.normalizeColor(v.color);if(v){var C=0>v.width?0:v.width;B.setAttribute("stroke",v.color.toCss());B.setAttribute("stroke-opacity",v.color.a);B.setAttribute("stroke-width",C);B.setAttribute("stroke-linecap",v.cap);"number"==typeof v.join?(B.setAttribute("stroke-linejoin","miter"),B.setAttribute("stroke-miterlimit",
v.join)):B.setAttribute("stroke-linejoin",v.join);var F=v.style.toLowerCase();F in u.dasharray&&(F=u.dasharray[F]);if(F instanceof Array){F=b._toArray(F);var G;for(G=0;G<F.length;++G)F[G]*=C;if("butt"!=v.cap){for(G=0;G<F.length;G+=2)F[G]-=C,1>F[G]&&(F[G]=1);for(G=1;G<F.length;G+=2)F[G]+=C}F=F.join(",")}B.setAttribute("stroke-dasharray",F);B.setAttribute("dojoGfxStrokeStyle",v.style)}return this},_getParentSurface:function(){for(var v=this.parent;v&&!(v instanceof l.Surface);v=v.parent);return v},
_setFillObject:function(v,B){var C=u.xmlns.svg;this.fillStyle=v;var F=this._getParentSurface().defNode,G=this.rawNode.getAttribute("fill");if(G=u.getRef(G))if(G.tagName.toLowerCase()!=B.toLowerCase()){var H=G.id;G.parentNode.removeChild(G);G=k(C,B);G.setAttribute("id",H);F.appendChild(G)}else for(;G.childNodes.length;)G.removeChild(G.lastChild);else G=k(C,B),G.setAttribute("id",l._base._getUniqueId()),F.appendChild(G);if("pattern"==B)G.setAttribute("patternUnits","userSpaceOnUse"),C=k(C,"image"),
C.setAttribute("x",0),C.setAttribute("y",0),C.setAttribute("width",(0>v.width?0:v.width).toFixed(8)),C.setAttribute("height",(0>v.height?0:v.height).toFixed(8)),t(C,u.xmlns.xlink,"xlink:href",v.src),G.appendChild(C);else for(G.setAttribute("gradientUnits","userSpaceOnUse"),B=0;B<v.colors.length;++B){F=v.colors[B];H=k(C,"stop");var J=F.color=l.normalizeColor(F.color);H.setAttribute("offset",F.offset.toFixed(8));H.setAttribute("stop-color",J.toCss());H.setAttribute("stop-opacity",J.a);G.appendChild(H)}this.rawNode.setAttribute("fill",
"url(#"+G.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return G},_applyTransform:function(){if(this.matrix){var v=this.matrix;this.rawNode.setAttribute("transform","matrix("+v.xx.toFixed(8)+","+v.yx.toFixed(8)+","+v.xy.toFixed(8)+","+v.yy.toFixed(8)+","+v.dx.toFixed(8)+","+v.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(v){v=this.rawNode=v;"image"!=this.shape.type&&v.setAttribute("fill",
"none");v.setAttribute("fill-opacity",0);v.setAttribute("stroke","none");v.setAttribute("stroke-opacity",0);v.setAttribute("stroke-width",1);v.setAttribute("stroke-linecap","butt");v.setAttribute("stroke-linejoin","miter");v.setAttribute("stroke-miterlimit",4);v.__gfxObject__=this},setShape:function(v){this.shape=l.makeParameters(this.shape,v);for(var B in this.shape)if("type"!=B){v=this.shape[B];if("width"===B||"height"===B)v=0>v?0:v;this.rawNode.setAttribute(B,v)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);
return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(v){this.inherited(arguments);var B=v?"width"in v?"rect":"cx"in v?"ellipse":"points"in v?"polyline":"d"in v?"path":null:null;if(v&&!B)return this;"polyline"===B&&(v=b.clone(v),v.points=v.points.join(","));var C,F=f.get(this.rawNode,"clip-path");F&&(C=a.byId(F.match(/gfx_clip[\d]+/)[0]))&&C.removeChild(C.childNodes[0]);v?(C?(B=k(u.xmlns.svg,B),C.appendChild(B)):
(F="gfx_clip"+ ++w,this.rawNode.setAttribute("clip-path","url(#"+F+")"),C=k(u.xmlns.svg,"clipPath"),B=k(u.xmlns.svg,B),C.appendChild(B),this.rawNode.parentNode.insertBefore(C,this.rawNode),f.set(C,"id",F)),f.set(B,v)):(this.rawNode.removeAttribute("clip-path"),C&&C.parentNode.removeChild(C));return this},_removeClipNode:function(){var v,B=f.get(this.rawNode,"clip-path");B&&(v=a.byId(B.match(/gfx_clip[\d]+/)[0]))&&v.parentNode.removeChild(v);return v}});u.Group=h("dojox.gfx.svg.Group",u.Shape,{constructor:function(){d.Container._init.call(this)},
setRawNode:function(v){this.rawNode=v;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);u.Shape.prototype.destroy.apply(this,arguments)}});u.Group.nodeType="g";u.Rect=h("dojox.gfx.svg.Rect",[u.Shape,d.Rect],{setShape:function(v){this.shape=l.makeParameters(this.shape,v);this.bbox=null;for(var B in this.shape)if("type"!=B&&"r"!=B){v=this.shape[B];if("width"===B||"height"===B)v=0>v?0:v;this.rawNode.setAttribute(B,v)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),
this.rawNode.setAttribute("rx",this.shape.r));return this}});u.Rect.nodeType="rect";u.Ellipse=h("dojox.gfx.svg.Ellipse",[u.Shape,d.Ellipse],{});u.Ellipse.nodeType="ellipse";u.Circle=h("dojox.gfx.svg.Circle",[u.Shape,d.Circle],{});u.Circle.nodeType="circle";u.Line=h("dojox.gfx.svg.Line",[u.Shape,d.Line],{});u.Line.nodeType="line";u.Polyline=h("dojox.gfx.svg.Polyline",[u.Shape,d.Polyline],{setShape:function(v,B){v&&v instanceof Array?(this.shape=l.makeParameters(this.shape,{points:v}),B&&this.shape.points.length&&
this.shape.points.push(this.shape.points[0])):this.shape=l.makeParameters(this.shape,v);this.bbox=null;this._normalizePoints();v=[];B=this.shape.points;for(var C=0;C<B.length;++C)v.push(B[C].x.toFixed(8),B[C].y.toFixed(8));this.rawNode.setAttribute("points",v.join(" "));return this}});u.Polyline.nodeType="polyline";u.Image=h("dojox.gfx.svg.Image",[u.Shape,d.Image],{setShape:function(v){this.shape=l.makeParameters(this.shape,v);this.bbox=null;v=this.rawNode;for(var B in this.shape)if("type"!=B&&"src"!=
B){var C=this.shape[B];if("width"===B||"height"===B)C=0>C?0:C;v.setAttribute(B,C)}v.setAttribute("preserveAspectRatio","none");t(v,u.xmlns.xlink,"xlink:href",this.shape.src);v.__gfxObject__=this;return this}});u.Image.nodeType="image";u.Text=h("dojox.gfx.svg.Text",[u.Shape,d.Text],{setShape:function(v){this.shape=l.makeParameters(this.shape,v);this.bbox=null;v=this.rawNode;var B=this.shape;v.setAttribute("x",B.x);v.setAttribute("y",B.y);v.setAttribute("text-anchor",B.align);v.setAttribute("text-decoration",
B.decoration);v.setAttribute("rotate",B.rotated?90:0);v.setAttribute("kerning",B.kerning?"auto":0);v.setAttribute("text-rendering",E);v.firstChild?v.firstChild.nodeValue=B.text:v.appendChild(n(B.text));return this},getTextWidth:function(){var v=this.rawNode,B=v.parentNode;v=v.cloneNode(!0);v.style.visibility="hidden";var C=0,F=v.firstChild.nodeValue;B.appendChild(v);if(""!=F)for(;!C;)C=v.getBBox?parseInt(v.getBBox().width):68;B.removeChild(v);return C},getBoundingBox:function(){var v=null;if(this.getShape().text)try{v=
this.rawNode.getBBox()}catch(B){v={x:0,y:0,width:0,height:0}}return v}});u.Text.nodeType="text";u.Path=h("dojox.gfx.svg.Path",[u.Shape,c.Path],{_updateWithSegment:function(v){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(v){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});u.Path.nodeType="path";u.TextPath=h("dojox.gfx.svg.TextPath",
[u.Shape,c.TextPath],{_updateWithSegment:function(v){this.inherited(arguments);this._setTextPath()},setShape:function(v){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var v=this.rawNode;if(!v.firstChild){var B=k(u.xmlns.svg,"textPath"),C=n("");B.appendChild(C);v.appendChild(B)}B=(B=v.firstChild.getAttributeNS(u.xmlns.xlink,"href"))&&u.getRef(B);if(!B&&(C=this._getParentSurface())){C=C.defNode;B=k(u.xmlns.svg,"path");var F=l._base._getUniqueId();
B.setAttribute("id",F);C.appendChild(B);t(v.firstChild,u.xmlns.xlink,"xlink:href","#"+F)}B&&B.setAttribute("d",this.shape.path)}},_setText:function(){var v=this.rawNode;if(!v.firstChild){var B=k(u.xmlns.svg,"textPath"),C=n("");B.appendChild(C);v.appendChild(B)}v=v.firstChild;B=this.text;v.setAttribute("alignment-baseline","middle");switch(B.align){case "middle":v.setAttribute("text-anchor","middle");v.setAttribute("startOffset","50%");break;case "end":v.setAttribute("text-anchor","end");v.setAttribute("startOffset",
"100%");break;default:v.setAttribute("text-anchor","start"),v.setAttribute("startOffset","0%")}v.setAttribute("baseline-shift","0.5ex");v.setAttribute("text-decoration",B.decoration);v.setAttribute("rotate",B.rotated?90:0);v.setAttribute("kerning",B.kerning?"auto":0);v.firstChild.data=B.text}});u.TextPath.nodeType="text";var D=534<function(){var v=/WebKit\/(\d*)/.exec(x);return v?v[1]:0}();u.Surface=h("dojox.gfx.svg.Surface",d.Surface,{constructor:function(){d.Container._init.call(this)},destroy:function(){d.Container.clear.call(this,
!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(v,B){if(!this.rawNode)return this;v=0>v?0:v;B=0>B?0:B;this.rawNode.setAttribute("width",v);this.rawNode.setAttribute("height",B);D&&(this.rawNode.style.width=v,this.rawNode.style.height=B);return this},getDimensions:function(){return this.rawNode?{width:l.normalizedLength(this.rawNode.getAttribute("width")),height:l.normalizedLength(this.rawNode.getAttribute("height"))}:null}});u.createSurface=function(v,B,C){var F=new u.Surface;
F.rawNode=k(u.xmlns.svg,"svg");F.rawNode.setAttribute("overflow","hidden");B&&F.rawNode.setAttribute("width",0>B?0:B);C&&F.rawNode.setAttribute("height",0>C?0:C);B=k(u.xmlns.svg,"defs");F.rawNode.appendChild(B);F.defNode=B;F._parent=a.byId(v);F._parent.appendChild(F.rawNode);l._base._fixMsTouchAction(F);return F};y={_setFont:function(){var v=this.fontStyle;this.rawNode.setAttribute("font-style",v.style);this.rawNode.setAttribute("font-variant",v.variant);this.rawNode.setAttribute("font-weight",v.weight);
this.rawNode.setAttribute("font-size",v.size);this.rawNode.setAttribute("font-family",v.family)}};var r=d.Container;h=u.Container={openBatch:function(){if(!this._batch){var v=u.useSvgWeb?q.doc.createDocumentFragment(!0):q.doc.createDocumentFragment();this.fragment=v}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(v){this!=v.getParent()&&(this.fragment?
this.fragment.appendChild(v.rawNode):this.rawNode.appendChild(v.rawNode),r.add.apply(this,arguments),v.setClip(v.clip));return this},remove:function(v,B){this==v.getParent()&&(this.rawNode==v.rawNode.parentNode&&this.rawNode.removeChild(v.rawNode),this.fragment&&this.fragment==v.rawNode.parentNode&&this.fragment.removeChild(v.rawNode),v._removeClipNode(),r.remove.apply(this,arguments));return this},clear:function(){for(var v=this.rawNode;v.lastChild;)v.removeChild(v.lastChild);var B=this.defNode;
if(B){for(;B.lastChild;)B.removeChild(B.lastChild);v.appendChild(B)}return r.clear.apply(this,arguments)},getBoundingBox:r.getBoundingBox,_moveChildToFront:r._moveChildToFront,_moveChildToBack:r._moveChildToBack};c=u.Creator={createObject:function(v,B){if(!this.rawNode)return null;var C=new v;v=k(u.xmlns.svg,v.nodeType);C.setRawNode(v);C.setShape(B);this.add(C);return C}};b.extend(u.Text,y);b.extend(u.TextPath,y);b.extend(u.Group,h);b.extend(u.Group,d.Creator);b.extend(u.Group,c);b.extend(u.Surface,
h);b.extend(u.Surface,d.Creator);b.extend(u.Surface,c);u.fixTarget=function(v,B){v.gfxTarget||(v.gfxTarget=A&&v.target.wholeText?v.target.parentElement.__gfxObject__:v.target.__gfxObject__);return!0};u.useSvgWeb&&(u.createSurface=function(v,B,C){var F=new u.Surface;B=0>B?0:B;C=0>C?0:C;if(!B||!C){var G=g.position(v);B=B||G.w;C=C||G.h}v=a.byId(v);G=v.id?v.id+"_svgweb":l._base._getUniqueId();var H=k(u.xmlns.svg,"svg");H.id=G;H.setAttribute("width",B);H.setAttribute("height",C);svgweb.appendChild(H,v);
H.addEventListener("SVGLoad",function(){F.rawNode=this;F.isLoaded=!0;var J=k(u.xmlns.svg,"defs");F.rawNode.appendChild(J);F.defNode=J;if(F.onLoad)F.onLoad(F)},!1);F.isLoaded=!1;return F},u.Surface.extend({destroy:function(){var v=this.rawNode;svgweb.removeChild(v,v.parentNode)}}),y={connect:function(v,B,C){"on"===v.substring(0,2)&&(v=v.substring(2));C=2==arguments.length?B:b.hitch(B,C);this.getEventSource().addEventListener(v,C,!1);return[this,v,C]},disconnect:function(v){this.getEventSource().removeEventListener(v[1],
v[2],!1);delete v[0]}},b.extend(u.Shape,y),b.extend(u.Surface,y));return u})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(b,y,q,a,h,e,g,f,m,l){function d(k,t){for(var n=k.length-1;t<n;)k[t]=k[++t];k.length=n}var c=b.shape={};c.Shape=q("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=
this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(h("gfxRegistry")){var k=c.register(this);this.getUID=function(){return k}}},destroy:function(){h("gfxRegistry")&&c.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},
getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var k=this.getBoundingBox();if(!k)return null;var t=this._getRealMatrix();return[l.multiplyPoint(t,k.x,k.y),l.multiplyPoint(t,k.x+k.width,k.y),l.multiplyPoint(t,k.x+k.width,k.y+k.height),l.multiplyPoint(t,k.x,k.y+k.height)]},getEventSource:function(){return this.rawNode},setClip:function(k){this.clip=k},getClip:function(){return this.clip},setShape:function(k){this.shape=b.makeParameters(this.shape,k);this.bbox=null;
return this},setFill:function(k){if(!k)return this.fillStyle=null,this;var t=null;if("object"==typeof k&&"type"in k)switch(k.type){case "linear":t=b.makeParameters(b.defaultLinearGradient,k);break;case "radial":t=b.makeParameters(b.defaultRadialGradient,k);break;case "pattern":t=b.makeParameters(b.defaultPattern,k)}else t=b.normalizeColor(k);this.fillStyle=t;return this},setStroke:function(k){if(!k)return this.strokeStyle=null,this;if("string"==typeof k||y.isArray(k)||k instanceof m)k={color:k};k=
this.strokeStyle=b.makeParameters(b.defaultStroke,k);k.color=b.normalizeColor(k.color);return this},setTransform:function(k){this.matrix=l.clone(k?l.normalize(k):l.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var k=this.getParent();k&&(k._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var k=this.getParent();k&&(k._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},
applyRightTransform:function(k){return k?this.setTransform([this.matrix,k]):this},applyLeftTransform:function(k){return k?this.setTransform([k,this.matrix]):this},applyTransform:function(k){return k?this.setTransform([this.matrix,k]):this},removeShape:function(k){this.parent&&this.parent.remove(this,k);return this},_setParent:function(k,t){this.parent=k;return this._updateParentMatrix(t)},_updateParentMatrix:function(k){this.parentMatrix=k?l.clone(k):null;return this._applyTransform()},_getRealMatrix:function(){for(var k=
this.matrix,t=this.parent;t;)t.matrix&&(k=l.multiply(t.matrix,k)),t=t.parent;return k}});c._eventsProcessing={on:function(k,t){return e(this.getEventSource(),k,c.fixCallback(this,b.fixTarget,t))},connect:function(k,t,n){"on"==k.substring(0,2)&&(k=k.substring(2));return this.on(k,n?y.hitch(t,n):t)},disconnect:function(k){return k.remove()}};c.fixCallback=function(k,t,n,u){u||(u=n,n=null);if(y.isString(u)){n=n||a.global;if(!n[u])throw['dojox.gfx.shape.fixCallback: scope["',u,'"] is null (scope\x3d"',
n,'")'].join("");return function(x){return t(x,k)?n[u].apply(n,arguments||[]):void 0}}return n?function(x){return t(x,k)?u.apply(n,arguments||[]):void 0}:function(x){return t(x,k)?u.apply(n,arguments):void 0}};y.extend(c.Shape,c._eventsProcessing);c.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(k){var t=k.getParent();t&&t.remove(k,!0);this.children.push(k);return k._setParent(this,this._getRealMatrix())},
remove:function(k,t){for(var n=0;n<this.children.length;++n)if(this.children[n]==k){t||(k.parent=null,k.parentMatrix=null);d(this.children,n);break}return this},clear:function(k){for(var t,n=0;n<this.children.length;++n)t=this.children[n],t.parent=null,t.parentMatrix=null,k&&t.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var k=null;g.forEach(this.children,function(t){var n=t.getBoundingBox();n&&((t=t.getTransform())&&(n=l.multiplyRectangle(t,n)),k?(k.x=Math.min(k.x,
n.x),k.y=Math.min(k.y,n.y),k.endX=Math.max(k.endX,n.x+n.width),k.endY=Math.max(k.endY,n.y+n.height)):k={x:n.x,y:n.y,endX:n.x+n.width,endY:n.y+n.height})});k&&(k.width=k.endX-k.x,k.height=k.endY-k.y);return k}return null},_moveChildToFront:function(k){for(var t=0;t<this.children.length;++t)if(this.children[t]==k){d(this.children,t);this.children.push(k);break}return this},_moveChildToBack:function(k){for(var t=0;t<this.children.length;++t)if(this.children[t]==k){d(this.children,t);this.children.unshift(k);
break}return this}};c.Surface=q("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){g.forEach(this._nodes,f.destroy);this._nodes=[];g.forEach(this._events,function(k){k&&k.remove()});this._events=[];this.rawNode=null;if(h("ie"))for(;this._parent.lastChild;)f.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},
isLoaded:!0,onLoad:function(k){},whenLoaded:function(k,t){var n=y.hitch(k,t);if(this.isLoaded)n(this);else e.once(this,"load",function(u){n(u)})}});y.extend(c.Surface,c._eventsProcessing);c.Rect=q("dojox.gfx.shape.Rect",c.Shape,{constructor:function(k){this.shape=b.getDefault("Rect");this.rawNode=k},getBoundingBox:function(){return this.shape}});c.Ellipse=q("dojox.gfx.shape.Ellipse",c.Shape,{constructor:function(k){this.shape=b.getDefault("Ellipse");this.rawNode=k},getBoundingBox:function(){if(!this.bbox){var k=
this.shape;this.bbox={x:k.cx-k.rx,y:k.cy-k.ry,width:2*k.rx,height:2*k.ry}}return this.bbox}});c.Circle=q("dojox.gfx.shape.Circle",c.Shape,{constructor:function(k){this.shape=b.getDefault("Circle");this.rawNode=k},getBoundingBox:function(){if(!this.bbox){var k=this.shape;this.bbox={x:k.cx-k.r,y:k.cy-k.r,width:2*k.r,height:2*k.r}}return this.bbox}});c.Line=q("dojox.gfx.shape.Line",c.Shape,{constructor:function(k){this.shape=b.getDefault("Line");this.rawNode=k},getBoundingBox:function(){if(!this.bbox){var k=
this.shape;this.bbox={x:Math.min(k.x1,k.x2),y:Math.min(k.y1,k.y2),width:Math.abs(k.x2-k.x1),height:Math.abs(k.y2-k.y1)}}return this.bbox}});c.Polyline=q("dojox.gfx.shape.Polyline",c.Shape,{constructor:function(k){this.shape=b.getDefault("Polyline");this.rawNode=k},setShape:function(k,t){k&&k instanceof Array?(this.inherited(arguments,[{points:k}]),t&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[k]);return this},_normalizePoints:function(){var k=
this.shape.points,t=k&&k.length;if(t&&"number"==typeof k[0]){for(var n=[],u=0;u<t;u+=2)n.push({x:k[u],y:k[u+1]});this.shape.points=n}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var k=this.shape.points,t=k.length,n=k[0],u=n.x,x=n.y,A=n.x,z=n.y,E=1;E<t;++E)n=k[E],u>n.x&&(u=n.x),A<n.x&&(A=n.x),x>n.y&&(x=n.y),z<n.y&&(z=n.y);this.bbox={x:u,y:x,width:A-u,height:z-x}}return this.bbox}});c.Image=q("dojox.gfx.shape.Image",c.Shape,{constructor:function(k){this.shape=b.getDefault("Image");
this.rawNode=k},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});c.Text=q(c.Shape,{constructor:function(k){this.fontStyle=null;this.shape=b.getDefault("Text");this.rawNode=k},getFont:function(){return this.fontStyle},setFont:function(k){this.fontStyle="string"==typeof k?b.splitFontString(k):b.makeParameters(b.defaultFont,k);this._setFont();return this},getBoundingBox:function(){var k=null;this.getShape().text&&(k=b._base._computeTextBoundingBox(this));
return k}});c.Creator={createShape:function(k){switch(k.type){case b.defaultPath.type:return this.createPath(k);case b.defaultRect.type:return this.createRect(k);case b.defaultCircle.type:return this.createCircle(k);case b.defaultEllipse.type:return this.createEllipse(k);case b.defaultLine.type:return this.createLine(k);case b.defaultPolyline.type:return this.createPolyline(k);case b.defaultImage.type:return this.createImage(k);case b.defaultText.type:return this.createText(k);case b.defaultTextPath.type:return this.createTextPath(k)}return null},
createGroup:function(){return this.createObject(b.Group)},createRect:function(k){return this.createObject(b.Rect,k)},createEllipse:function(k){return this.createObject(b.Ellipse,k)},createCircle:function(k){return this.createObject(b.Circle,k)},createLine:function(k){return this.createObject(b.Line,k)},createPolyline:function(k){return this.createObject(b.Polyline,k)},createImage:function(k){return this.createObject(b.Image,k)},createText:function(k){return this.createObject(b.Text,k)},createPath:function(k){return this.createObject(b.Path,
k)},createTextPath:function(k){return this.createObject(b.TextPath,{}).setText(k)},createObject:function(k,t){return null}};return c})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(b,y){var q=b.matrix={},a={};q._degToRad=function(h){return a[h]||(a[h]=Math.PI*h/180)};q._radToDeg=function(h){return h/Math.PI*180};q.Matrix2D=function(h){if(h)if("number"==typeof h)this.xx=this.yy=h;else if(h instanceof Array){if(0<h.length){for(var e=q.normalize(h[0]),g=1;g<h.length;++g){var f=
e,m=q.normalize(h[g]);e=new q.Matrix2D;e.xx=f.xx*m.xx+f.xy*m.yx;e.xy=f.xx*m.xy+f.xy*m.yy;e.yx=f.yx*m.xx+f.yy*m.yx;e.yy=f.yx*m.xy+f.yy*m.yy;e.dx=f.xx*m.dx+f.xy*m.dy+f.dx;e.dy=f.yx*m.dx+f.yy*m.dy+f.dy}y.mixin(this,e)}}else y.mixin(this,h)};y.extend(q.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});y.mixin(q,{identity:new q.Matrix2D,flipX:new q.Matrix2D({xx:-1}),flipY:new q.Matrix2D({yy:-1}),flipXY:new q.Matrix2D({xx:-1,yy:-1}),translate:function(h,e){return 1<arguments.length?new q.Matrix2D({dx:h,dy:e}):
new q.Matrix2D({dx:h.x,dy:h.y})},scale:function(h,e){return 1<arguments.length?new q.Matrix2D({xx:h,yy:e}):"number"==typeof h?new q.Matrix2D({xx:h,yy:h}):new q.Matrix2D({xx:h.x,yy:h.y})},rotate:function(h){var e=Math.cos(h);h=Math.sin(h);return new q.Matrix2D({xx:e,xy:-h,yx:h,yy:e})},rotateg:function(h){return q.rotate(q._degToRad(h))},skewX:function(h){return new q.Matrix2D({xy:Math.tan(h)})},skewXg:function(h){return q.skewX(q._degToRad(h))},skewY:function(h){return new q.Matrix2D({yx:Math.tan(h)})},
skewYg:function(h){return q.skewY(q._degToRad(h))},reflect:function(h,e){1==arguments.length&&(e=h.y,h=h.x);var g=h*h,f=e*e,m=g+f,l=2*h*e/m;return new q.Matrix2D({xx:2*g/m-1,xy:l,yx:l,yy:2*f/m-1})},project:function(h,e){1==arguments.length&&(e=h.y,h=h.x);var g=h*h,f=e*e,m=g+f,l=h*e/m;return new q.Matrix2D({xx:g/m,xy:l,yx:l,yy:f/m})},normalize:function(h){return h instanceof q.Matrix2D?h:new q.Matrix2D(h)},isIdentity:function(h){return 1==h.xx&&0==h.xy&&0==h.yx&&1==h.yy&&0==h.dx&&0==h.dy},clone:function(h){var e=
new q.Matrix2D,g;for(g in h)"number"==typeof h[g]&&"number"==typeof e[g]&&e[g]!=h[g]&&(e[g]=h[g]);return e},invert:function(h){h=q.normalize(h);var e=h.xx*h.yy-h.xy*h.yx;return h=new q.Matrix2D({xx:h.yy/e,xy:-h.xy/e,yx:-h.yx/e,yy:h.xx/e,dx:(h.xy*h.dy-h.yy*h.dx)/e,dy:(h.yx*h.dx-h.xx*h.dy)/e})},_multiplyPoint:function(h,e,g){return{x:h.xx*e+h.xy*g+h.dx,y:h.yx*e+h.yy*g+h.dy}},multiplyPoint:function(h,e,g){h=q.normalize(h);return"number"==typeof e&&"number"==typeof g?q._multiplyPoint(h,e,g):q._multiplyPoint(h,
e.x,e.y)},multiplyRectangle:function(h,e){var g=q.normalize(h);e=e||{x:0,y:0,width:0,height:0};if(q.isIdentity(g))return{x:e.x,y:e.y,width:e.width,height:e.height};h=q.multiplyPoint(g,e.x,e.y);var f=q.multiplyPoint(g,e.x,e.y+e.height),m=q.multiplyPoint(g,e.x+e.width,e.y);e=q.multiplyPoint(g,e.x+e.width,e.y+e.height);g=Math.min(h.x,f.x,m.x,e.x);var l=Math.min(h.y,f.y,m.y,e.y);return{x:g,y:l,width:Math.max(h.x,f.x,m.x,e.x)-g,height:Math.max(h.y,f.y,m.y,e.y)-l}},multiply:function(h){for(var e=q.normalize(h),
g=1;g<arguments.length;++g){var f=e,m=q.normalize(arguments[g]);e=new q.Matrix2D;e.xx=f.xx*m.xx+f.xy*m.yx;e.xy=f.xx*m.xy+f.xy*m.yy;e.yx=f.yx*m.xx+f.yy*m.yx;e.yy=f.yx*m.xy+f.yy*m.yy;e.dx=f.xx*m.dx+f.xy*m.dy+f.dx;e.dy=f.yx*m.dx+f.yy*m.dy+f.dy}return e},_sandwich:function(h,e,g){return q.multiply(q.translate(e,g),h,q.translate(-e,-g))},scaleAt:function(h,e,g,f){switch(arguments.length){case 4:return q._sandwich(q.scale(h,e),g,f);case 3:return"number"==typeof g?q._sandwich(q.scale(h),e,g):q._sandwich(q.scale(h,
e),g.x,g.y)}return q._sandwich(q.scale(h),e.x,e.y)},rotateAt:function(h,e,g){return 2<arguments.length?q._sandwich(q.rotate(h),e,g):q._sandwich(q.rotate(h),e.x,e.y)},rotategAt:function(h,e,g){return 2<arguments.length?q._sandwich(q.rotateg(h),e,g):q._sandwich(q.rotateg(h),e.x,e.y)},skewXAt:function(h,e,g){return 2<arguments.length?q._sandwich(q.skewX(h),e,g):q._sandwich(q.skewX(h),e.x,e.y)},skewXgAt:function(h,e,g){return 2<arguments.length?q._sandwich(q.skewXg(h),e,g):q._sandwich(q.skewXg(h),e.x,
e.y)},skewYAt:function(h,e,g){return 2<arguments.length?q._sandwich(q.skewY(h),e,g):q._sandwich(q.skewY(h),e.x,e.y)},skewYgAt:function(h,e,g){return 2<arguments.length?q._sandwich(q.skewYg(h),e,g):q._sandwich(q.skewYg(h),e.x,e.y)}});b.Matrix2D=q.Matrix2D;return q})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(b,y,q,a,h){h=q("dojox.gfx.path.Path",h.Shape,{constructor:function(e){this.shape=y.clone(b.defaultPath);this.segments=
[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=e;this.segmented=!1},setAbsoluteMode:function(e){this._confirmSegmented();this.absolute="string"==typeof e?"absolute"==e:e;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();
if(this.tbbox)return this.tbbox;var e=this.bbox,g=this._getRealMatrix();this.bbox=null;for(var f=0,m=this.segments.length;f<m;++f)this._updateWithSegment(this.segments[f],g);g=this.bbox;this.bbox=e;return this.tbbox=g?[{x:g.l,y:g.t},{x:g.r,y:g.t},{x:g.r,y:g.b},{x:g.l,y:g.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(e,g,f){f&&(g=a.multiplyPoint(f,
e,g),e=g.x,g=g.y);this.bbox&&"l"in this.bbox?(this.bbox.l>e&&(this.bbox.l=e),this.bbox.r<e&&(this.bbox.r=e),this.bbox.t>g&&(this.bbox.t=g),this.bbox.b<g&&(this.bbox.b=g)):this.bbox={l:e,b:g,r:e,t:g}},_updateWithSegment:function(e,g){var f=e.args,m=f.length,l;switch(e.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(l=0;l<m;l+=2)this._updateBBox(f[l],f[l+1],g);this.last.x=f[m-2];this.last.y=f[m-1];this.absolute=!0;break;case "H":for(l=0;l<m;++l)this._updateBBox(f[l],this.last.y,g);
this.last.x=f[m-1];this.absolute=!0;break;case "V":for(l=0;l<m;++l)this._updateBBox(this.last.x,f[l],g);this.last.y=f[m-1];this.absolute=!0;break;case "m":l=0;"x"in this.last||(this._updateBBox(this.last.x=f[0],this.last.y=f[1],g),l=2);for(;l<m;l+=2)this._updateBBox(this.last.x+=f[l],this.last.y+=f[l+1],g);this.absolute=!1;break;case "l":case "t":for(l=0;l<m;l+=2)this._updateBBox(this.last.x+=f[l],this.last.y+=f[l+1],g);this.absolute=!1;break;case "h":for(l=0;l<m;++l)this._updateBBox(this.last.x+=
f[l],this.last.y,g);this.absolute=!1;break;case "v":for(l=0;l<m;++l)this._updateBBox(this.last.x,this.last.y+=f[l],g);this.absolute=!1;break;case "c":for(l=0;l<m;l+=6)this._updateBBox(this.last.x+f[l],this.last.y+f[l+1],g),this._updateBBox(this.last.x+f[l+2],this.last.y+f[l+3],g),this._updateBBox(this.last.x+=f[l+4],this.last.y+=f[l+5],g);this.absolute=!1;break;case "s":case "q":for(l=0;l<m;l+=4)this._updateBBox(this.last.x+f[l],this.last.y+f[l+1],g),this._updateBBox(this.last.x+=f[l+2],this.last.y+=
f[l+3],g);this.absolute=!1;break;case "A":for(l=0;l<m;l+=7)this._updateBBox(f[l+5],f[l+6],g);this.last.x=f[m-2];this.last.y=f[m-1];this.absolute=!0;break;case "a":for(l=0;l<m;l+=7)this._updateBBox(this.last.x+=f[l+5],this.last.y+=f[l+6],g);this.absolute=!1}e=[e.action];for(l=0;l<m;++l)e.push(b.formatNumber(f[l],!0));if("string"==typeof this.shape.path)this.shape.path+=e.join("");else for(l=0,m=e.length;l<m;++l)this.shape.path.push(e[l])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(e,
g){this.tbbox=null;var f=this._validSegments[e.toLowerCase()];"number"==typeof f&&(f?g.length>=f&&(e={action:e,args:g.slice(0,g.length-g.length%f)},this.segments.push(e),this._updateWithSegment(e)):(e={action:e,args:[]},this.segments.push(e),this._updateWithSegment(e)))},_collectArgs:function(e,g){for(var f=0;f<g.length;++f){var m=g[f];"boolean"==typeof m?e.push(m?1:0):"number"==typeof m?e.push(m):m instanceof Array?this._collectArgs(e,m):"x"in m&&"y"in m&&e.push(m.x,m.y)}},moveTo:function(){this._confirmSegmented();
var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"M":"m",e);return this},lineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"L":"l",e);return this},hLineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"H":"h",e);return this},vLineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"V":"v",e);
return this},curveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"C":"c",e);return this},smoothCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"S":"s",e);return this},qCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"Q":"q",e);return this},qSmoothCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,
arguments);this._pushSegment(this.absolute?"T":"t",e);return this},arcTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"A":"a",e);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var e=this.shape.path;this.shape.path=[];this._setPath(e);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(e){e=y.isArray(e)?e:e.match(b.pathSvgRegExp);
this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(e){for(var g="",f=[],m=e.length,l=0;l<m;++l){var d=e[l],c=parseFloat(d);isNaN(c)?(g&&this._pushSegment(g,f),f=[],g=d):f.push(c)}this._pushSegment(g,f)}},setShape:function(e){this.inherited(arguments,["string"==typeof e?{path:e}:e]);this.segmented=!1;this.segments=[];b.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});q=q("dojox.gfx.path.TextPath",h,{constructor:function(e){"text"in this||(this.text=y.clone(b.defaultTextPath));
"fontStyle"in this||(this.fontStyle=y.clone(b.defaultFont))},getText:function(){return this.text},setText:function(e){this.text=b.makeParameters(this.text,"string"==typeof e?{text:e}:e);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(e){this.fontStyle="string"==typeof e?b.splitFontString(e):b.makeParameters(b.defaultFont,e);this._setFont();return this}});return b.path={Path:h,TextPath:q}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang","dojo/_base/array"],
function(b,y){var q={},a={x:"0%",y:"0%",width:"100%",height:"100%"},h={};q.createFilter=function(c,k){c=b.mixin({},a,c);c.primitives||(c.primitives=[]);k&&Array.prototype.push.apply(c.primitives,k);return c};var e=function(c,k,t){k instanceof Array&&(t=k,k=null);k=b.mixin({},k);k.children=t;k.tag=c;return k};y.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),
function(c){q[c]=function(k,t){return e(c,k,t)}});q.feMerge=function(c,k){if("string"===typeof c){for(var t=[],n=0;n<arguments.length;++n)t.push(q.feMergeNode({"in":arguments[n]}));return e("feMerge",{},t)}return e("feMerge",c,k)};var g=q.createFilter;h.convolutions=[g({_gfxName:"boxBlur3"},[q.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),g({_gfxName:"boxBlur5"},[q.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),
g({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[q.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),q.feComponentTransfer({"in":"kernel"},[q.feFuncA({type:"table",tableValues:"1,1"})])]),g({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[q.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),q.feComponentTransfer({"in":"kernel"},[q.feFuncA({type:"table",
tableValues:"1,1"})])]),g({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[q.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),q.feComponentTransfer({"in":"kernel"},[q.feFuncA({type:"table",tableValues:"1,1"})])]),g({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[q.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),q.feComponentTransfer({"in":"kernel"},[q.feFuncA({type:"table",
tableValues:"1,1"})])])];y.forEach(h.convolutions,function(c){b.mixin(c,a)});h.shadows=[g({_gfxName:"fastSmallDropShadow"},[q.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),q.feOffset({dx:3,dy:3,result:"offsetBlur"}),q.feMerge("offsetBlur","SourceGraphic")]),g({_gfxName:"fastDropShadow"},[q.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),
q.feOffset({dx:5,dy:5,result:"offsetBlur"}),q.feMerge("offsetBlur","SourceGraphic")]),g({_gfxName:"fastDropShadowLight"},[q.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),q.feOffset({dx:5,dy:5,result:"offsetBlur"}),q.feMerge("offsetBlur","SourceGraphic")]),g({_gfxName:"dropShadow"},[q.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),q.feOffset({dx:5,dy:5,result:"offsetBlur"}),q.feMerge("offsetBlur",
"SourceGraphic")]),g({_gfxName:"dropShadowLight"},[q.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),q.feComponentTransfer({"in":"blur",result:"lessblur"},[q.feFuncA({type:"linear",slope:.5})]),q.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),q.feMerge("offsetBlur","SourceGraphic")]),g({_gfxName:"smallDropShadow"},[q.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),q.feOffset({dx:2,dy:2,result:"offsetBlur"}),q.feMerge("offsetBlur","SourceGraphic")]),g({_gfxName:"smallDropShadowLight"},
[q.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),q.feComponentTransfer({"in":"blur",result:"lessblur"},[q.feFuncA({type:"linear",slope:.5})]),q.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),q.feMerge("offsetBlur","SourceGraphic")])];var f={x:"-10%",y:"-10%",width:"125%",height:"125%"};y.forEach(h.shadows,function(c){b.mixin(c,f)});h.blurs=[g({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[q.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),g({_gfxName:"blur2",
x:"-15%",y:"-15%",width:"130%",height:"130%"},[q.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),g({_gfxName:"blur4",x:"-15%",y:"-15%",width:"130%",height:"130%"},[q.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),g({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[q.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),g({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[q.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),q.feComponentTransfer([q.feFuncA({type:"linear",
slope:10})])])];h.colors=[g({_gfxName:"negate"},[q.feComponentTransfer([q.feFuncR({type:"table",tableValues:"1,0"}),q.feFuncG({type:"table",tableValues:"1,0"}),q.feFuncB({type:"table",tableValues:"1,0"})])]),g({_gfxName:"sepia"},[q.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),q.feComponentTransfer({"in":"grey"},[q.feFuncR({type:"linear",slope:.5,intercept:.5}),q.feFuncB({type:"table",tableValues:"0,0"})])]),g({_gfxName:"grayscale"},
[q.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),g({_gfxName:"showRed"},[q.feComponentTransfer([q.feFuncG({type:"table",tableValues:"0,0"}),q.feFuncB({type:"table",tableValues:"0,0"})])]),g({_gfxName:"showGreen"},[q.feComponentTransfer([q.feFuncR({type:"table",tableValues:"0,0"}),q.feFuncB({type:"table",tableValues:"0,0"})])]),g({_gfxName:"showBlue"},[q.feComponentTransfer([q.feFuncR({type:"table",tableValues:"0,0"}),q.feFuncG({type:"table",
tableValues:"0,0"})])]),g({_gfxName:"hueRotate60"},[q.feColorMatrix({type:"hueRotate",values:60})]),g({_gfxName:"hueRotate120"},[q.feColorMatrix({type:"hueRotate",values:120})]),g({_gfxName:"hueRotate180"},[q.feColorMatrix({type:"hueRotate",values:180})]),g({_gfxName:"hueRotate270"},[q.feColorMatrix({type:"hueRotate",values:270})])];y.forEach(h.colors,function(c){b.mixin(c,a)});h.miscs=[g({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[q.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:1,result:"blur"}),q.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),q.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"specOut"},[q.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),q.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),q.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),q.feMerge("offsetBlur","litPaint")]),g({_gfxName:"embossDropShadow",
x:"-5%",y:"-5%",width:"120%",height:"120%"},[q.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),q.feOffset({"in":"blur",dx:4,dy:4,result:"offsetBlur"}),q.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[q.fePointLight({x:-5E3,y:-1E4,z:2E4})]),q.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),q.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,
k2:1,k3:1,k4:0,result:"litPaint"}),q.feMerge("offsetBlur","litPaint")]),g({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",height:"140%"},[q.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),q.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),q.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[q.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),q.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),
q.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),q.feMerge("offsetBlur","litPaint")]),g({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[q.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),q.feComponentTransfer({"in":"blur",result:"lessblur"},[q.feFuncA({type:"linear",slope:"0.5"})]),q.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),q.feSpecularLighting({"in":"lessblur",surfaceScale:8,
specularConstant:1,specularExponent:"12",result:"specOut"},[q.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),q.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),q.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),q.feMerge("offsetBlur","litPaint")]),g({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[q.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),q.feComponentTransfer({"in":"blur",
result:"lessblur"},[q.feFuncA({type:"linear",slope:"0.5"})]),q.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),q.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[q.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),q.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),q.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),q.feMerge("offsetBlur",
"litPaint")]),g({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[q.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),q.feComponentTransfer({"in":"blur",result:"lessblur"},[q.feFuncA({type:"linear",slope:"0.5"})]),q.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),q.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[q.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),q.feComposite({"in":"spec",
in2:"SourceGraphic",operator:"in",result:"specOut"}),q.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),q.feMerge("offsetBlur","litPaint")]),g({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[q.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),q.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),g({_gfxName:"veryFuzzy",
x:"-20%",y:"-20%",width:"140%",height:"140%"},[q.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),q.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),g({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[q.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),q.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",
yChannelSelector:"G"}),q.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),q.feComponentTransfer({"in":"bb",result:"BendedSource"},[q.feFuncA({type:"linear",slope:10,intercept:"-1"})]),q.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[q.feFuncR({type:"linear",slope:"0",intercept:"0"}),q.feFuncG({type:"linear",slope:"0",intercept:"0"}),q.feFuncB({type:"linear",slope:"0",intercept:"0"}),q.feFuncA({type:"linear",slope:"1",intercept:"0"})]),q.feGaussianBlur({"in":"BendedAlpha",
stdDeviation:"1",result:"blur"}),q.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",specularConstant:"1",specularExponent:"10",result:"specularOut"},[q.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),q.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),q.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),g({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",
height:"100%"},[q.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),g({_gfxName:"holes",x:"0%",y:"0%",width:"100%",height:"100%"},[q.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),q.feComponentTransfer({"in":"texture",result:"holes"},[q.feFuncA({type:"discrete",tableValues:"0,1"})]),q.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),g({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[q.feTurbulence({type:"fractalNoise",
baseFrequency:"0.1",numOctaves:"1",result:"texture"}),q.feComponentTransfer({"in":"texture",result:"holes"},[q.feFuncA({type:"discrete",tableValues:"1,0"})]),q.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];h.reliefs=[g({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[q.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),q.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[q.feFuncA({type:"table",tableValues:"1,0"})]),q.feDiffuseLighting({"in":"invertedalpha",
"lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[q.feDistantLight({azimuth:"135",elevation:"60"})]),q.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[q.feDistantLight({azimuth:"135",elevation:"30"})]),q.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),g({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[q.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),
q.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[q.feDistantLight({azimuth:"135",elevation:"60"})]),q.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[q.feDistantLight({azimuth:"135",elevation:"30"})]),q.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),g({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[q.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"1",result:"blur"}),q.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[q.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),q.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),q.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),g({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[q.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",
result:"blur"}),q.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[q.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),q.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),q.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),g({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[q.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),
q.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[q.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),q.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),q.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];h.textures=[g({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[q.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),
q.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[q.feDistantLight({azimuth:"135",elevation:"60"})]),q.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),g({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[q.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),q.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[q.feDistantLight({azimuth:"135",elevation:"60"})]),
q.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),g({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",height:"100%"},[q.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),q.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[q.feDistantLight({azimuth:"135",elevation:"60"})]),q.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),g({_gfxName:"gold",
x:"-5%",y:"-5%",width:"115%",height:"110%"},[q.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),q.feComposite({"in":"SourceGraphic",in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),q.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),q.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[q.feDistantLight({azimuth:"135",elevation:"60"})]),q.feSpecularLighting({"in":"bump",
surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[q.feDistantLight({azimuth:"135",elevation:"60"})]),q.feComposite({"in":"specularOut",in2:"SourceGraphic",operator:"in",result:"specularOut"}),q.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),q.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var m in h)if(h.hasOwnProperty(m)){q[m]={};for(var l=
h[m],d=0;d<l.length;++d)(function(){var c=l[d];q[m][c._gfxName]=function(k){return b.delegate(c,k)}})()}return q})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array","dojo/_base/window","./_base","./svg"],function(b,y,q,a,h){function e(f,m){var l=m.ownerDocument.createElementNS(h.xmlns.svg,f.tag);m.appendChild(l);for(var d in f)d in g||l.setAttribute(d,f[d]);f.children&&y.forEach(f.children,function(c){e(c,l)});return l}q=a.svgext={};var g={primitives:null,tag:null,children:null};
h.Shape.extend({addRenderingOption:function(f,m){this.rawNode.setAttribute(f,m);return this},setFilter:function(f){if(!f)return this.rawNode.removeAttribute("filter"),this.filter=null,this;this.filter=f;f.id=f.id||a._base._getUniqueId();var m=b.byId(f.id);if(!m){m=this.rawNode.ownerDocument.createElementNS(h.xmlns.svg,"filter");m.setAttribute("filterUnits","userSpaceOnUse");for(var l in f)l in g||m.setAttribute(l,f[l]);y.forEach(f.primitives,function(d){e(d,m)});(l=this._getParentSurface())&&l.defNode.appendChild(m)}this.rawNode.setAttribute("filter",
"url(#"+f.id+")");return this},getFilter:function(){return this.filter}});return q})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),function(b,y,q,a,h,e,g,f,m,l){function d(t,n){var u=c(n);u&&b.utils.forEach(t,function(x){if(x instanceof b.Surface||x instanceof b.Group)x.textDir=u;x instanceof b.Text&&x.setShape({textDir:u});x instanceof b.TextPath&&x.setText({textDir:u})},
t);return t}function c(t){var n=["ltr","rtl","auto"];return t&&(t=t.toLowerCase(),0>e.indexOf(n,t))?null:t}y.getObject("dojox.gfx._gfxBidiSupport",!0);switch(b.renderer){case "vml":b.isVml=!0;break;case "svg":b.isSvg=!0;b.svg.useSvgWeb&&(b.isSvgWeb=!0);break;case "silverlight":b.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":b.isCanvas=!0}var k=new l;y.extend(b.shape.Surface,{textDir:"",setTextDir:function(t){d(this,t)},getTextDir:function(){return this.textDir}});y.extend(b.Group,{textDir:"",
setTextDir:function(t){d(this,t)},getTextDir:function(){return this.textDir}});y.extend(b.Text,{textDir:"",formatText:function(t,n){if(n&&t&&1<t.length){var u="ltr";if("auto"==n){if(b.isVml)return t;n=k.checkContextual(t)}if(b.isVml)return u=k.checkContextual(t),n!=u?"rtl"==n?k.hasBidiChar(t)?"\u200f\u200f"+t:k.bidiTransform(t,"IRNNN","ILNNN"):"\u200e"+t:t;if(b.isSvgWeb)return"rtl"==n?k.bidiTransform(t,"IRNNN","ILNNN"):t;if(b.isSilverlight)return"rtl"==n?k.bidiTransform(t,"IRNNN","VLYNN"):k.bidiTransform(t,
"ILNNN","VLYNN");if(b.isCanvas)return"rtl"==n?"\u202b"+t+"\u202c":"\u202a"+t+"\u202c";if(b.isSvg)return 4>q("ff")?"rtl"==n?k.bidiTransform(t,"IRYNN","VLNNN"):k.bidiTransform(t,"ILYNN","VLNNN"):"\u200e"+("rtl"==n?"\u202b":"\u202a")+t+"\u202c"}return t},bidiPreprocess:function(t){return t}});y.extend(b.TextPath,{textDir:"",formatText:function(t,n){if(n&&t&&1<t.length){var u="ltr";if("auto"==n){if(b.isVml)return t;n=k.checkContextual(t)}if(b.isVml)return u=k.checkContextual(t),n!=u?"rtl"==n?k.hasBidiChar(t)?
"\u200f\u200f"+t:k.bidiTransform(t,"IRNNN","ILNNN"):"\u200e"+t:t;if(b.isSvgWeb)return"rtl"==n?k.bidiTransform(t,"IRNNN","ILNNN"):t;b.isSvg&&(t=q("opera")||4<=q("ff")?"\u200e"+("rtl"==n?"\u202b":"\u202a")+t+"\u202c":"rtl"==n?k.bidiTransform(t,"IRYNN","VLNNN"):k.bidiTransform(t,"ILYNN","VLNNN"))}return t},bidiPreprocess:function(t){t&&"string"==typeof t&&(this.origText=t,t=this.formatText(t,this.textDir));return t}});g=function(t,n,u,x){var A=t.prototype[n];t.prototype[n]=function(){var z;u&&(z=u.apply(this,
arguments));z=A.call(this,z);x&&(z=x.call(this,z,arguments));return z}};f=function(t){t&&(t.textDir&&(t.textDir=c(t.textDir)),t.text&&t.text instanceof Array&&(t.text=t.text.join(",")));!t||void 0==t.text&&!t.textDir||this.textDir==t.textDir&&t.text==this.origText||(this.origText=void 0!=t.text?t.text:this.origText,t.textDir&&(this.textDir=t.textDir),t.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(t)};g(b.Text,"setShape",f,null);g(b.TextPath,"setText",f,null);f=function(t){(t=
y.clone(t))&&this.origText&&(t.text=this.origText);return t};g(b.Text,"getShape",null,f);g(b.TextPath,"getText",null,f);f=function(t,n){var u;n&&n[0]&&(u=c(n[0]));t.setTextDir(u?u:this.textDir);return t};g(b.Surface,"createGroup",null,f);g(b.Group,"createGroup",null,f);f=function(t){if(t){var n=t.textDir?c(t.textDir):this.textDir;n&&(t.textDir=n)}return t};g(b.Surface,"createText",f,null);g(b.Surface,"createTextPath",f,null);g(b.Group,"createText",f,null);g(b.Group,"createTextPath",f,null);b.createSurface=
function(t,n,u,x){n=b[b.renderer].createSurface(t,n,u);x=c(x);if(b.isSvgWeb)return n.textDir=x?x:h.style(a.byId(t),"direction"),n;if(b.isVml||b.isSvg||b.isCanvas)n.textDir=x?x:h.style(n.rawNode,"direction");b.isSilverlight&&(n.textDir=x?x:h.style(n._nodes[1],"direction"));return n};return b})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d){var c=q.utils={};y.mixin(c,{forEach:function(k,t,n){n=n||b.global;t.call(n,k);(k instanceof q.Surface||k instanceof q.Group)&&h.forEach(k.children,function(u){c.forEach(u,t,n)})},serialize:function(k){var t={},n;if((n=k instanceof q.Surface)||k instanceof q.Group){if(t.children=h.map(k.children,c.serialize),n)return t.children}else t.shape=k.getShape();k.getTransform&&(n=k.getTransform())&&(t.transform=n);k.getStroke&&(n=k.getStroke())&&(t.stroke=n);k.getFill&&(n=k.getFill())&&
(t.fill=n);k.getFont&&(n=k.getFont())&&(t.font=n);return t},toJson:function(k,t){return g.toJson(c.serialize(k),t)},deserialize:function(k,t){if(t instanceof Array)return h.map(t,y.hitch(null,c.deserialize,k));k="shape"in t?k.createShape(t.shape):k.createGroup();"transform"in t&&k.setTransform(t.transform);"stroke"in t&&k.setStroke(t.stroke);"fill"in t&&k.setFill(t.fill);"font"in t&&k.setFont(t.font);"children"in t&&h.forEach(t.children,y.hitch(null,c.deserialize,k));return k},fromJson:function(k,
t){return c.deserialize(k,g.fromJson(t))},toSvg:function(k){var t=new f;if("svg"===q.renderer)try{var n=c._cleanSvg(c._innerXML(k.rawNode));t.callback(n)}catch(x){t.errback(x)}else{c._initSvgSerializerDeferred||c._initSvgSerializer();var u=c.toJson(k);n=function(){try{var x=k.getDimensions(),A=x.width,z=x.height,E=c._gfxSvgProxy.document.createElement("div");c._gfxSvgProxy.document.body.appendChild(E);e.withDoc(c._gfxSvgProxy.document,function(){a.style(E,"width",A);a.style(E,"height",z)},this);c._gfxSvgProxy[dojox._scopeName].gfx.createSurface(E,
A,z).whenLoaded(null,function(w){try{c._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(w,u);var D=c._cleanSvg(E.innerHTML);w.clear();w.destroy();c._gfxSvgProxy.document.body.removeChild(E);t.callback(D)}catch(r){t.errback(r)}})}catch(w){t.errback(w)}};0<c._initSvgSerializerDeferred.fired?n():c._initSvgSerializerDeferred.addCallback(n)}return t},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){c._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!c._initSvgSerializerDeferred){c._initSvgSerializerDeferred=
new f;var k=e.doc.createElement("iframe");a.style(k,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var t;m("ie")?k.onreadystatechange=function(){"complete"==k.contentWindow.document.readyState&&(k.onreadystatechange=function(){},t=setInterval(function(){k.contentWindow[b.scopeMap.dojo[1]._scopeName]&&k.contentWindow[b.scopeMap.dojox[1]._scopeName].gfx&&k.contentWindow[b.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(t),k.contentWindow.parent[b.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
k.contentWindow,k.contentWindow.parent[b.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:k.onload=function(){k.onload=function(){};t=setInterval(function(){k.contentWindow[b.scopeMap.dojo[1]._scopeName]&&k.contentWindow[b.scopeMap.dojox[1]._scopeName].gfx&&k.contentWindow[b.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(t),k.contentWindow.parent[b.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=k.contentWindow,k.contentWindow.parent[b.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var n=d.dojoxGfxSvgProxyFrameUrl||l.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");k.setAttribute("src",n.toString());e.body().appendChild(k)}},_innerXML:function(k){return k.innerXML?k.innerXML:k.xml?k.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(k):null},_cleanSvg:function(k){k&&(-1==k.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(k=k.substring(4,k.length),k='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+k),-1==k.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&
(k=k.substring(4,k.length),k='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+k),-1===k.indexOf("xlink:href")&&(k=k.replace(/href\s*=/g,"xlink:href\x3d")),k=k.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),k=k.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),k=k.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),k=k.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),k=k.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return k}});return c})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/Stateful"],function(b,y,q){function a(ka,U,ha,na,qa){var ua=ka;void 0===U&&(U=qa.defInFormat);void 0===ha&&(ha=qa.defOutFormat);void 0===na&&(na=qa.defSwap);if(U!==ha){var za=U.substring(0,1);var Ea=U.substring(1,4);var Pa=ha.substring(0,1),Oa=ha.substring(1,4);"C"===Ea.charAt(0)&&(Ea=h(ua),Ea="ltr"===Ea||"rtl"===Ea?Ea.toUpperCase():"L"===U.charAt(2)?"LTR":"RTL",U=za+Ea);"C"===Oa.charAt(0)&&(Ea=h(ua),"rtl"===Ea?Oa="RTL":"ltr"===Ea?(ua=ua.split(""),ua.reverse(),Ea=h(ua.join("")),
Oa=Ea.toUpperCase()):Oa="L"===ha.charAt(2)?"LTR":"RTL",ha=Pa+Oa)}if(U===ha)return ka;Pa=U.substring(0,1);ua=U.substring(1,4);za=ha.substring(0,1);Oa=ha.substring(1,4);qa.inFormat=U;qa.outFormat=ha;qa.swap=na;if("L"===Pa&&"VLTR"===ha){if("LTR"===ua)return qa.dir=v,e(ka,qa);if("RTL"===ua)return qa.dir=B,e(ka,qa)}if("V"===Pa&&"V"===za)return qa.dir="RTL"===ua?B:v,f(ka,qa);if("L"===Pa&&"VRTL"===ha)return qa.dir="LTR"===ua?v:B,ka=e(ka,qa),f(ka);if("VLTR"===U&&"LLTR"===ha)return qa.dir=v,e(ka,qa);if("V"===
Pa&&"L"===za&&ua!==Oa)return ka=f(ka),"RTL"===ua?a(ka,"LLTR","VLTR",na,qa):a(ka,"LRTL","VRTL",na,qa);if("VRTL"===U&&"LRTL"===ha)return a(ka,"LRTL","VRTL",na,qa);if("L"===Pa&&"L"===za)return U=qa.swap,qa.swap=U.substr(0,1)+"N","RTL"===ua?(qa.dir=B,ka=e(ka,qa),qa.swap="N"+U.substr(1,2),qa.dir=v,ka=e(ka,qa)):(qa.dir=v,ka=e(ka,qa),qa.swap="N"+U.substr(1,2),ka=a(ka,"VLTR","LRTL",qa.swap,qa)),ka}function h(ka){return(ka=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(ka))?
"z">=ka[0]?"ltr":"rtl":""}function e(ka,U){ka=ka.split("");var ha=[];g(ka,ha,U);if(0!==U.hiLevel&&U.swap.substr(0,1)!==U.swap.substr(1,2))for(var na=0;na<ka.length;na++)if(1===ha[na]){var qa=na;b:{var ua=void 0;for(var za=ka[na],Ea=0,Pa=G.length-1;Ea<=Pa;)if(ua=Math.floor((Ea+Pa)/2),za<G[ua][0])Pa=ua-1;else if(za>G[ua][0])Ea=ua+1;else{ua=G[ua][1];break b}ua=za}ka[qa]=ua}d(2,ka,ha,U);d(1,ka,ha,U);E=ha;return ka.join("")}function g(ka,U,ha){var na=ka.length,qa=ha.dir?X:V,ua=null,za=null,Ea=null;ua=
0;za=za=null;var Pa=-1,Oa=za=null,Ha=[],Ua=[];ha.hiLevel=ha.dir;ha.lastArabic=!1;ha.hasUbatAl=!1;ha.hasUbatB=!1;ha.hasUbatS=!1;for(za=0;za<na;za++){Oa=za;Ea=ka[za].charCodeAt(0);var bb=T[Ea>>8];Ha[Oa]=bb<Aa?bb:ja[bb-Aa][Ea&255]}for(Oa=0;Oa<na;Oa++){Ua[Oa]=za=c(ka,Ha,Ua,Oa,ha);ua=qa[ua][za];za=ua&240;ua&=15;U[Oa]=Ea=qa[ua][D];if(0<za){if(16===za)for(za=Pa;za<Oa;za++)U[za]=1;Pa=-1}if(za=qa[ua][r])-1===Pa&&(Pa=Oa);else if(-1<Pa){for(za=Pa;za<Oa;za++)U[za]=Ea;Pa=-1}Ha[Oa]===Ba&&(U[Oa]=0);ha.hiLevel|=
Ea}if(ha.hasUbatS)for(ka=0;ka<na;ka++)if(Ha[ka]===Da)for(U[ka]=ha.dir,qa=ka-1;0<=qa;qa--)if(Ha[qa]===ra)U[qa]=ha.dir;else break}function f(ka,U){ka=ka.split("");if(U){var ha=[];g(ka,ha,U);E=ha}ka.reverse();A.reverse();return ka.join("")}function m(ka){for(var U=0;U<ba.length;U++)if(ka>=ba[U]&&ka<=O[U])return!0;return!1}function l(ka,U,ha,na){for(;U*ha<na&&t(ka[U]);)U+=ha;return U*ha<na&&m(ka[U])?!0:!1}function d(ka,U,ha,na){if(!(na.hiLevel<ka))if(1!==ka||na.dir!==B||na.hasUbatB){na=U.length;for(var qa=
0,ua,za,Ea;qa<na;){if(ha[qa]>=ka){for(ua=qa+1;ua<na&&ha[ua]>=ka;)ua++;for(za=ua-1;qa<za;qa++,za--)Ea=U[qa],U[qa]=U[za],U[za]=Ea,Ea=A[qa],A[qa]=A[za],A[za]=Ea;qa=ua}qa++}}else U.reverse(),A.reverse()}function c(ka,U,ha,na,qa){return{UBAT_L:function(){qa.lastArabic=!1;return N},UBAT_R:function(){qa.lastArabic=!1;return Y},UBAT_ON:function(){return sa},UBAT_AN:function(){return oa},UBAT_EN:function(){return qa.lastArabic?oa:ia},UBAT_AL:function(){qa.lastArabic=!0;qa.hasUbatAl=!0;return Y},UBAT_WS:function(){return sa},
UBAT_CS:function(){var ua,za;if(1>na||na+1>=U.length||(ua=ha[na-1])!==ia&&ua!==oa||(za=U[na+1])!==ia&&za!==oa)return sa;qa.lastArabic&&(za=oa);return za===ua?za:sa},UBAT_ES:function(){return(0<na?ha[na-1]:Ba)===ia&&na+1<U.length&&U[na+1]===ia?ia:sa},UBAT_ET:function(){if(0<na&&ha[na-1]===ia)return ia;if(qa.lastArabic)return sa;for(var ua=na+1,za=U.length;ua<za&&U[ua]===ya;)ua++;return ua<za&&U[ua]===ia?ia:sa},UBAT_NSM:function(){if("VLTR"===qa.inFormat){for(var ua=U.length,za=na+1;za<ua&&U[za]===
wa;)za++;if(za<ua&&(ua=ka[na],za=U[za],(1425<=ua&&2303>=ua||64286===ua)&&(za===Y||za===pa)))return Y}return 1>na||U[na-1]===Ba?sa:ha[na-1]},UBAT_B:function(){qa.lastArabic=!0;qa.hasUbatB=!0;return qa.dir},UBAT_S:function(){qa.hasUbatS=!0;return sa},UBAT_LRE:function(){qa.lastArabic=!1;return sa},UBAT_RLE:function(){qa.lastArabic=!1;return sa},UBAT_LRO:function(){qa.lastArabic=!1;return sa},UBAT_RLO:function(){qa.lastArabic=!1;return sa},UBAT_PDF:function(){qa.lastArabic=!1;return sa},UBAT_BN:function(){return sa}}[la[U[na]]]()}
function k(ka,U){for(var ha=0;ha<K.length;ha++)if(ka===K[ha])return U[ha];return ka}function t(ka){return"\u064b"<=ka&&"\u0655">=ka?!0:!1}function n(ka){if("L"===ka)return"LTR";if("R"===ka)return"RTL";if("C"===ka)return"CLR";if("D"===ka)return"CRL"}function u(ka,U){for(var ha=0;ha<H.length;ha++)if(ka===H[ha])return U[ha];return ka}function x(ka,U,ha,na){for(var qa=0;qa<ka.length;qa++)if(ka[qa]>U||!ha&&ka[qa]===U)ka[qa]+=na}b.getObject("string",!0,dojox);b=y("dojox.string.BidiEngine",q,{inputFormat:"ILYNN",
outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(ka,U,ha){this.sourceToTarget=[];this.targetToSource=[];if(!ka)return"";var na=this.sourceToTarget,qa=this.targetToSource,ua=ka.length;A=[];E=[];for(var za=0;za<ua;za++)na[za]=za,qa[za]=za,A[za]=za;if(!this.checkParameters(U,ha))return ka;U=this.inputFormat;ha=this.outputFormat;na=ka;na=w;za=n(U.charAt(1));qa=n(ha.charAt(1));var Ea="I"===U.charAt(0)?"L":U.charAt(0);ua="I"===ha.charAt(0)?"L":ha.charAt(0);za=Ea+
za;qa=ua+qa;ua=U.charAt(2)+ha.charAt(2);na.defInFormat=za;na.defOutFormat=qa;na.defSwap=ua;ka=a(ka,za,qa,ua,na);na=!1;if("R"===ha.charAt(1))na=!0;else if("C"===ha.charAt(1)||"D"===ha.charAt(1))na=this.checkContextual(ka);qa=this.sourceToTarget=A;ua=Array(qa.length);for(za=0;za<qa.length;za++)ua[qa[za]]=za;z=this.targetToSource=ua;if(U.charAt(3)===ha.charAt(3))na=ka;else if("S"===ha.charAt(3))if(U=na,ha=!0,0===ka.length)na=void 0;else{void 0===U&&(U=!0);void 0===ha&&(ha=!0);ka=String(ka);ka=ka.split("");
var Pa=0;qa=1;na=ka.length;U||(Pa=ka.length-1,qa=-1,na=1);ua=na;za=ha;var Oa=0;na=[];for(Ea=0;Pa*qa<ua;Pa+=qa)if(m(ka[Pa])||t(ka[Pa])){var Ha;if(Ha="\u0644"===ka[Pa])b:{for(var Ua=ka,bb=Pa+qa,ab=qa,gb=ua;bb*ab<gb&&t(Ua[bb]);)bb+=ab;Ha=" ";if(bb*ab<gb)for(Ha=Ua[bb],Ua=0;Ua<H.length;Ua++)if(H[Ua]===Ha){Ha=!0;break b}Ha=!1}if(Ha){ka[Pa]=0===Oa?u(ka[Pa+qa],J):u(ka[Pa+qa],I);Pa+=qa;Oa=ka;Ha=Pa;Ua=qa;for(bb=ua;Ha*Ua<bb&&t(Oa[Ha]);)Ha+=Ua;Ha*Ua<bb&&(Oa[Ha]=" ");za&&(na[Ea]=Pa,Ea++);Oa=0}else{Ha=ka[Pa];if(1===
Oa){Ua=Pa;if(l(ka,Pa+qa,qa,ua))b:for(bb=ka[Pa],ab=0;ab<K.length;ab++){if(bb===K[ab]){bb=P[ab];break b}}else bb=k(ka[Pa],W);ka[Ua]=bb}else!0===l(ka,Pa+qa,qa,ua)?ka[Pa]=k(ka[Pa],S):ka[Pa]=k(ka[Pa],R);t(Ha)||(Oa=1);b:{for(Ua=0;Ua<L.length;Ua++)if(L[Ua]===Ha){Ha=!0;break b}Ha=!1}!0===Ha&&(Oa=0)}}else Oa=0;qa="";for(ua=0;ua<ka.length;ua++){if(za=ha){b:{for(za=0;za<na.length;za++)if(na[za]===ua)break b;za=-1}za=-1<za}za?(x(z,ua,!U,-1),A.splice(ua,1)):qa+=ka[ua]}na=qa}else if(U=ka,ha=na,ka=!0,0===U.length)na=
void 0;else for(void 0===ka&&(ka=!0),void 0===ha&&(ha=!0),U=String(U),na="",qa=[],qa=U.split(""),ua=0;ua<U.length;ua++)za=!1,"\ufe70"<=qa[ua]&&"\ufeff">qa[ua]?(Ea=U.charCodeAt(ua),"\ufef5"<=qa[ua]&&"\ufefc">=qa[ua]?(ha?(0<ua&&ka&&" "===qa[ua-1]?na=na.substring(0,na.length-1)+"\u0644":(na+="\u0644",za=!0),na+=H[(Ea-65269)/2]):(na+=H[(Ea-65269)/2],na+="\u0644",ua+1<U.length&&ka&&" "===qa[ua+1]?ua++:za=!0),za&&(x(z,ua,!0,1),A.splice(ua,0,A[ua]))):na+=aa[Ea-65136]):na+=qa[ua];this.sourceToTarget=A;this.targetToSource=
z;this.levels=E;return na},_inputFormatSetter:function(ka){if(!C.test(ka))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=ka},_outputFormatSetter:function(ka){if(!C.test(ka))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=ka},checkParameters:function(ka,U){ka?this.set("inputFormat",ka):ka=this.inputFormat;U?this.set("outputFormat",U):U=this.outputFormat;return ka===U?!1:!0},checkContextual:function(ka){ka=h(ka);if("ltr"!==
ka&&"rtl"!==ka){try{ka=document.dir.toLowerCase()}catch(U){}"ltr"!==ka&&"rtl"!==ka&&(ka="ltr")}return ka},hasBidiChar:function(ka){return F.test(ka)}});var A=[],z=[],E=[],w={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},D=5,r=6,v=0,B=1,C=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,F=/[\u0591-\u06ff\ufb1d-\ufefc]/,G=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]",
"["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],H=["\u0622","\u0623","\u0625","\u0627"],J=["\ufef5","\ufef7","\ufef9","\ufefb"],
I=["\ufef6","\ufef8","\ufefa","\ufefc"],K="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),R="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
W="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),P="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
S="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),L="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),aa="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
ba=["\u0621","\u0641"],O=["\u063a","\u064a"],V=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],X=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N=0,Y=1,ia=2,oa=3,sa=4,Ba=5,Da=6,pa=7,ra=8,ya=11,wa=12,la="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),Aa=100;y=N;q=Y;var da=ia,fa=oa,Q=sa,xa=Ba,Fa=Da,ca=pa,Sa=ra,
Qa=ya,va=wa,T=[Aa+0,y,y,y,y,Aa+1,Aa+2,Aa+3,q,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Aa+4,Q,Q,Q,y,Q,y,Q,y,Q,Q,Q,y,y,Q,Q,y,y,y,y,y,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,y,y,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,y,y,Q,Q,y,y,Q,Q,y,y,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,
Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,y,y,y,Aa+5,ca,ca,Aa+6,Aa+7],ja=[[18,18,18,18,18,18,18,18,18,Fa,xa,Fa,Sa,xa,18,18,18,18,18,18,18,18,18,18,18,18,18,18,xa,xa,xa,Fa,Sa,Q,Q,Qa,Qa,Qa,Q,Q,Q,Q,Q,10,9,10,9,9,da,da,da,da,da,da,da,da,da,da,9,Q,Q,Q,Q,Q,Q,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,Q,Q,Q,Q,Q,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,Q,Q,Q,18,18,18,18,18,18,xa,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,Q,Qa,Qa,Qa,Qa,Q,Q,Q,Q,y,Q,Q,18,Q,Q,Qa,Qa,
da,da,Q,y,Q,Q,Q,da,y,Q,Q,Q,Q,Q,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,Q,Q,Q,Q,Q,Q,Q,Q,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,Q,y,y,y,y,y,y,y,Q,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,y,Q,Q,Q,Q,Q,Q,Q,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,
va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,q,va,q,va,va,q,va,va,q,va,Q,Q,Q,Q,Q,Q,Q,Q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,Q,Q,Q,Q,Q,q,q,q,q,q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q],[fa,fa,fa,fa,Q,Q,Q,Q,ca,Qa,Qa,ca,9,ca,Q,Q,va,va,va,va,va,va,va,va,va,va,va,ca,Q,Q,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,
fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,Qa,fa,fa,ca,ca,ca,va,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,va,va,va,va,va,va,va,fa,Q,va,va,va,va,va,va,ca,ca,va,va,Q,va,va,va,va,ca,ca,da,da,da,da,da,da,da,da,da,da,ca,ca,ca,ca,ca,ca],[ca,ca,ca,ca,ca,ca,ca,
ca,ca,ca,ca,ca,ca,ca,Q,ca,ca,va,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,Q,Q,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,va,va,va,va,va,va,va,va,va,
va,va,ca,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,va,va,va,va,va,va,va,va,va,q,q,Q,Q,Q,Q,q,Q,Q,Q,Q,Q],[Sa,Sa,Sa,Sa,Sa,Sa,Sa,Sa,Sa,Sa,Sa,18,18,18,y,q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Sa,xa,13,14,15,16,17,9,Qa,Qa,Qa,Qa,Qa,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,9,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Sa,18,18,18,18,18,Q,Q,Q,Q,Q,18,18,18,18,18,18,da,y,Q,Q,da,da,da,da,da,da,10,10,Q,Q,Q,y,da,da,da,da,da,da,da,da,
da,da,10,10,Q,Q,Q,Q,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,Q,Q,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q],[y,y,y,y,y,y,y,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,y,y,y,y,y,Q,Q,Q,Q,Q,q,va,q,q,q,q,q,q,q,q,q,q,10,q,q,q,q,q,q,q,q,q,q,q,q,q,Q,q,q,q,q,q,Q,q,Q,q,q,Q,q,q,Q,q,q,q,q,q,q,q,q,q,q,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,
ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca],[va,va,va,va,va,va,va,va,
va,va,va,va,va,va,va,va,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,va,va,va,va,va,va,va,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,9,Q,9,Q,Q,9,Q,Q,Q,Q,Q,Q,Q,Q,Q,Qa,Q,Q,10,10,Q,Q,Q,Q,Q,Qa,Qa,Q,Q,Q,Q,Q,ca,ca,ca,ca,ca,Q,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,
ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,Q,Q,18],[Q,Q,Q,Qa,Qa,Qa,Q,Q,Q,Q,Q,10,9,10,9,9,da,da,da,da,da,da,da,da,da,da,9,Q,Q,Q,Q,Q,Q,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,Q,Q,Q,Q,Q,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,
y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Q,Q,Q,y,y,y,y,y,y,Q,Q,y,y,y,y,y,y,Q,Q,y,y,y,y,y,y,Q,Q,y,y,y,Q,Q,Q,Qa,Qa,Q,Q,Q,Qa,Qa,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q]];return b})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(b,y,q,a,h,e){b=b(e,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(g){g&&y.isObject(g)&&(this.size="auto"===
this.size?this.size:a.pt2px(this.size),this.xoffset=a.pt2px(this.xoffset),this.yoffset=a.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(g){this.angle=g;return this},setSize:function(g){this.size=g;return this},setOffset:function(g,f){this.xoffset=g;this.yoffset=f;return this},toJson:function(){var g=a.px2pt(this.size);g=isNaN(g)?void 0:g;var f=a.px2pt(this.xoffset);f=isNaN(f)?void 0:f;var m=a.px2pt(this.yoffset);m=isNaN(m)?void 0:m;return y.mixin(this.inherited("toJson",arguments),
{size:"auto"===this.size?this.size:g,angle:this.angle&&-1*this.angle,xoffset:f,yoffset:m})}});y.setObject("symbol.MarkerSymbol",b,h);return b})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(b,y,q,a,h,e){b=b(null,{declaredClass:"esri.symbol.Symbol",color:new e([0,0,0,1]),type:null,constructor:function(g){g&&y.isObject(g)&&(y.mixin(this,g),this.color&&h.isDefined(this.color[0])&&(this.color=e.toDojoColor(this.color)),
(g=this.type)&&0===g.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[g]))},setColor:function(g){this.color=g;return this},toJson:function(){return{color:e.toJsonColor(this.color)}}});y.setObject("symbol.Symbol",b,a);return b})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color",
"dojo/has","./kernel"],function(b,y,q,a){var h=b([y],{declaredClass:"esri.Color"});h.toJsonColor=function(e){return e&&[e.r,e.g,e.b,1<e.a?e.a:Math.round(255*e.a)]};h.toDojoColor=function(e){return e&&new h([e[0],e[1],e[2],e[3]/255])};q="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(b=0;b<q.length;b++)h[q[b]]=y[q[b]];return a.Color=h})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),
function(b,y,q,a,h,e,g,f){var m={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},l={color:[0,0,0,1],style:m.STYLE_SOLID,width:1};b=b(f,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",
dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(d,c,k){d?y.isString(d)?(this.style=d,c&&(this.color=c),k&&(this.width=k)):(this.style=g.valueOf(this._styles,d.style)||m.STYLE_SOLID,this.marker=
d.marker):(y.mixin(this,l),this.color=new q(this.color),this.width=h.pt2px(this.width))},setStyle:function(d){this.style=d;return this},setMarker:function(d){this.marker=d},getStroke:function(){return this.style===m.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return g.fixJson(y.mixin(this.inherited("toJson",
arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?y.clone(this.marker):void 0}))}});y.mixin(b,m);b.defaultProps=l;y.setObject("symbol.SimpleLineSymbol",b,e);e.symbol.defaultSimpleLineSymbol=l;return b})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(b,y,q,a,h,e){b=b(e,{declaredClass:"esri.symbol.LineSymbol",constructor:function(g){y.isObject(g)?this.width=a.pt2px(this.width):
this.width=12},setWidth:function(g){this.width=g;return this},toJson:function(){var g=a.px2pt(this.width);g=isNaN(g)?void 0:g;return y.mixin(this.inherited("toJson",arguments),{width:g})}});y.setObject("symbol.LineSymbol",b,h);return b})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(b,y,q,a,h,e,g,f){var m={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};b=
b(f,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(l,d,c){l?y.isString(l)?(this.url=l,d&&(this.width=d),c&&(this.height=c)):(this.width=a.pt2px(null==l.width?m.width:l.width),this.height=a.pt2px(null==l.height?m.height:l.height),d=l.imageData,9>q("ie")||!d||(c=this.url,this.url="data:"+(l.contentType||"image")+";base64,"+d,this.imageData=c)):(y.mixin(this,m),this.width=a.pt2px(this.width),this.height=a.pt2px(this.height))},getStroke:function(){return null},
getFill:function(){return null},setWidth:function(l){this.width=l;return this},setHeight:function(l){this.height=l;return this},setUrl:function(l){l!==this.url&&(delete this.imageData,delete this.contentType);this.url=l;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var l=this.url,d=this.imageData;if(0===l.indexOf("data:")){var c=
l;l=d;d=c.indexOf(";base64,")+8;d=c.substr(d)}!y.isString(l)||0!==l.indexOf("/")&&0!==l.indexOf("//")&&0!==l.indexOf("./")&&0!==l.indexOf("../")||(l=g.getAbsoluteUrl(l));c=a.px2pt(this.width);c=isNaN(c)?void 0:c;var k=a.px2pt(this.height);k=isNaN(k)?void 0:k;l=e.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:l,imageData:d,contentType:this.contentType,width:c,height:k}));delete l.color;delete l.size;l.imageData||delete l.imageData;return l}});b.defaultProps=m;y.setObject("symbol.PictureMarkerSymbol",
b,h);h.symbol.defaultPictureMarkerSymbol=m;return b})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(b,y,q,a,h,e,g,f){var m={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},l={color:[0,0,0,1],style:m.STYLE_SOLID,width:1,cap:m.CAP_BUTT,join:m.JOIN_MITER,miterLimit:10};b=b(f,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(d,c,k,t,n,u){d?y.isString(d)?(this.style=d,c&&(this.color=c),void 0!==k&&(this.width=k),t&&(this.cap=t),n&&(this.join=n),void 0!==u&&(this.miterLimit=u)):(this.cap=g.valueOf(this._caps,d.cap),this.join=g.valueOf(this._joins,d.join),this.width=h.pt2px(d.width),this.miterLimit=h.pt2px(d.miterLimit)):(y.mixin(this,l),this.color=new q(this.color),this.width=h.pt2px(this.width),this.miterLimit=h.pt2px(this.miterLimit))},setCap:function(d){this.cap=d;return this},
setJoin:function(d){this.join=d;return this},setMiterLimit:function(d){this.miterLimit=d;return this},getStroke:function(){return y.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===m.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var d=h.px2pt(this.miterLimit);d=isNaN(d)?void 0:d;return g.fixJson(y.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:d}))}});y.mixin(b,m);b.defaultProps=l;y.setObject("symbol.CartographicLineSymbol",b,e);e.symbol.defaultCartographicLineSymbol=l;return b})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(b,y,q,a,h,e,g,f,m,l){var d={STYLE_SOLID:"solid",STYLE_NULL:"none",
STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},c={style:d.STYLE_SOLID,color:[0,0,0,.25]};b=b(f,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",
vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(k,t,n){k?y.isString(k)?(this.style=k,void 0!==t&&(this.outline=t),void 0!==n&&(this.color=n)):this.style=g.valueOf(this._styles,k.style):(y.mixin(this,c),this.outline=new m(this.outline),this.color=new q(this.color))},setStyle:function(k){this.style=k;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){var k=this.style;return k===d.STYLE_NULL?null:k===d.STYLE_SOLID?this.color:y.mixin({},h.defaultPattern,{src:l.toUrl("../images/symbol/sfs/"+k+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return g.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});y.mixin(b,d);b.defaultProps=
c;y.setObject("symbol.SimpleFillSymbol",b,e);e.symbol.defaultSimpleFillSymbol=c;return b})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(b,y,q,a,h,e){b=b(h,{declaredClass:"esri.symbol.FillSymbol",constructor:function(g){g&&y.isObject(g)&&g.outline&&(this.outline=new e(g.outline))},setOutline:function(g){this.outline=g;return this},toJson:function(){var g=this.inherited("toJson",arguments);this.outline&&
(g.outline=this.outline.toJson());return g}});y.setObject("symbol.FillSymbol",b,a);return b})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(b,y,q,a,h,e,g,f){var m={xoffset:0,yoffset:0,width:12,height:12};b=b(f,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(l,d,c,k){l?y.isString(l)?(this.url=
l,void 0!==d&&(this.outline=d),void 0!==c&&(this.width=c),void 0!==k&&(this.height=k)):(this.xoffset=a.pt2px(l.xoffset),this.yoffset=a.pt2px(l.yoffset),this.width=a.pt2px(l.width),this.height=a.pt2px(l.height),d=l.imageData,9>q("ie")||!d||(c=this.url,this.url="data:"+(l.contentType||"image")+";base64,"+d,this.imageData=c)):(y.mixin(this,m),this.width=a.pt2px(this.width),this.height=a.pt2px(this.height))},setWidth:function(l){this.width=l;return this},setHeight:function(l){this.height=l;return this},
setOffset:function(l,d){this.xoffset=l;this.yoffset=d;return this},setUrl:function(l){l!==this.url&&(delete this.imageData,delete this.contentType);this.url=l;return this},setXScale:function(l){this.xscale=l;return this},setYScale:function(l){this.yscale=l;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return y.mixin({},a.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var l=this.url,d=this.imageData;if(0===l.indexOf("data:")){var c=l;l=d;d=c.indexOf(";base64,")+8;d=c.substr(d)}!y.isString(l)||0!==l.indexOf("/")&&0!==l.indexOf("//")&&0!==l.indexOf("./")&&0!==l.indexOf("../")||(l=g.getAbsoluteUrl(l));c=a.px2pt(this.width);c=isNaN(c)?void 0:c;var k=a.px2pt(this.height);k=isNaN(k)?void 0:k;var t=a.px2pt(this.xoffset);t=isNaN(t)?void 0:t;var n=a.px2pt(this.yoffset);
n=isNaN(n)?void 0:n;l=e.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:l,imageData:d,contentType:this.contentType,width:c,height:k,xoffset:t,yoffset:n,xscale:this.xscale,yscale:this.yscale}));l.imageData||delete l.imageData;return l}});b.defaultProps=m;y.setObject("symbol.PictureFillSymbol",b,h);h.symbol.defaultPictureFillSymbol=m;return b})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(b,y,q,a,h,e,g,f,m){var l={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:a.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},d={start:"left",middle:"center",end:"right"},c={left:"start",center:"middle",right:"end",justify:"start"},k={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},t=document.createElement("canvas");b=b(f,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(n,
u,x){y.mixin(this,l);this.font=new m(this.font);this.color=new g(this.color);n&&(y.isObject(n)?(y.mixin(this,n),this.color&&e.isDefined(this.color[0])&&(this.color=g.toDojoColor(this.color)),this.type="textsymbol",this.font=new m(this.font),this.xoffset=a.pt2px(this.xoffset),this.yoffset=a.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=a.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=g.toDojoColor(this.haloColor))):(this.text=n,u&&(this.font=u),x&&(this.color=
x)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(n){this.font=n;return this},setSize:function(n){this.font.size=n;return this},setAngle:function(n){this.angle=n;return this},setOffset:function(n,u){this.xoffset=n;this.yoffset=u;return this},setHaloColor:function(n){this.haloColor=n;return this},setHaloSize:function(n){this.haloSize=n;return this},setAlign:function(n){this.align=n;this.setHorizontalAlignment(n&&d[n.toLowerCase()]||"center");return this},setHorizontalAlignment:function(n){this.horizontalAlignment=
n;return this},getSVGAlign:function(){var n=this.horizontalAlignment;return n=n&&c[n.toLowerCase()]||"middle"},setVerticalAlignment:function(n){this.verticalAlignment=n;return this},getSVGBaseline:function(){var n=this.verticalAlignment;return n&&k[n.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(n){this.decoration=n;this.font||this.setFont(new m);this.font.setDecoration(n);return this},setRotated:function(n){this.rotated=
n;return this},setKerning:function(n){this.kerning=n;return this},setText:function(n){this.text=n;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var n=t&&t.getContext&&t.getContext("2d");if(n){var u=this.font;n.font=(u.style?u.style:a.defaultFont.style)+" "+(u.weight?u.weight:a.defaultFont.weight)+" "+(u.size?u.size:a.defaultFont.size)+"px "+(u.family?u.family:a.defaultFont.family);return n.measureText(this.text).width}n=this.getHeight();u=
0;var x;for(x=0;x<this.text.length;x++){var A=this.text.charAt(x);u=A==A.toUpperCase()?u+.7*n:u+.5*n}return u},getHeight:function(){return a.normalizedLength(this.font.size)},getShapeDescriptors:function(){var n=this.font;if(n){var u={};n.size&&(u.size=n.size);n.style&&(u.style=n.style);n.variant&&(u.variant=n.variant);n.decoration&&(u.decoration=n.decoration);n.weight&&(u.weight=n.weight);n.family&&(u.family=n.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||n&&n.decoration,rotated:this.rotated,kerning:this.kerning},font:u,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var n=a.px2pt(this.xoffset),u=a.px2pt(this.yoffset),x=a.px2pt(this.haloSize);n=isNaN(n)?void 0:n;u=isNaN(u)?void 0:u;x=isNaN(x)?void 0:x;return e.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:x,haloColor:this.haloColor&&
g.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:n,yoffset:u,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});y.mixin(b,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});b.defaultProps=
l;y.setObject("symbol.TextSymbol",b,h);h.symbol.defaultTextSymbol=l;return b})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(b,y,q,a,h,e){b=b(null,{declaredClass:"esri.symbol.Font",constructor:function(g,f,m,l,d){g?y.isObject(g)?y.mixin(this,g):(this.size=g,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==f&&(this.style=f),void 0!==m&&(this.variant=m),void 0!==l&&(this.weight=l),void 0!==d&&
(this.family=d)):y.mixin(this,a.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>q("ie")&&this.size&&y.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=a.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(g){this.size=this._convert2PxSize(g);return this},_convert2PxSize:function(g){var f;parseFloat(g)==g?f=g:y.isString(g)&&(-1<g.indexOf("pt")?f=a.pt2px(parseFloat(g)):-1<g.indexOf("px")?f=parseFloat(g):-1<g.indexOf("em")?f=
a.pt2px(12*parseFloat(g)):-1<g.indexOf("%")&&(f=a.pt2px(.12*parseFloat(g))));return f},setStyle:function(g){this.style=g;return this},setVariant:function(g){this.variant=g;return this},setWeight:function(g){this.weight=g;return this},setFamily:function(g){this.family=g;return this},setDecoration:function(g){this.decoration=g;return this},toJson:function(){return e.fixJson({size:a.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});y.mixin(b,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});y.setObject("symbol.Font",b,h);return b})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(b,y,q,a,h){q={graphicsExtent:function(e){if(!e||!e.length)return null;var g=null,f,m=e.length;for(f=0;f<m;f++){var l=e[f].geometry;if(l){var d=
l.getExtent();d||"point"!==l.type||null==l.x||null==l.y||(d=new h(l.x,l.y,l.x,l.y,l.spatialReference));d&&(g=g?g.union(d):d)}}return 0>g.getWidth()&&0>g.getHeight()?null:g},getGeometries:function(e){return y.map(e,function(g){return g.geometry})},_encodeGraphics:function(e,g){return y.map(e,function(f,m){f=f.toJson();var l={};f.geometry&&(m=g&&g[m],l.geometry=m&&m.toJson()||f.geometry);f.attributes&&(l.attributes=f.attributes);return l})}};b.mixin(a,q);return q})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(b,y,q,a,h){b=b(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(e){this.messages=[];y.mixin(this,e);e=this.messages;var g,f=e.length;for(g=0;g<f;g++)e[g]=new h(e[g])},jobId:"",jobStatus:""});y.mixin(b,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",
STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});y.setObject("tasks.JobInfo",b,a);return b})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(h){y.mixin(this,h)}});y.mixin(b,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",
TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});y.setObject("tasks.GPMessage",b,a);return b})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(h){h&&
y.mixin(this,h)},distance:0,units:null,toJson:function(){var h={};this.distance&&(h.distance=this.distance);this.units&&(h.units=this.units);return h}});y.setObject("tasks.LinearUnit",b,a);return b})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.tasks.DataFile",constructor:function(h){h&&y.mixin(this,h)},url:null,itemID:null,toJson:function(){var h={};this.url&&(h.url=this.url);this.itemID&&
(h.itemID=this.itemID);return h}});y.setObject("tasks.DataFile",b,a);return b})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.tasks.RasterData",constructor:function(h){h&&y.mixin(this,h)},url:null,format:null,itemID:null,toJson:function(){var h={};this.url&&(h.url=this.url);this.format&&(h.format=this.format);this.itemID&&(h.itemID=this.itemID);return h}});y.setObject("tasks.RasterData",b,
a);return b})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(b,y,q,a,h){b=b(null,{declaredClass:"esri.tasks.Date",constructor:function(e){e&&(e.format&&(this.format=e.format),this.date=q.parse(e.date,{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return{date:q.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});y.setObject("tasks.Date",
b,h);return b})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(h){y.mixin(this,h)}});y.setObject("tasks.ParameterValue",b,a);return b})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),function(b,y,q,a,h,e,g){b=
b(g,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(f,m){m&&m.imageParameters&&m.imageParameters.extent&&(this.initialExtent=this.fullExtent=m.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=y.hitch(this,this.getImageUrl);this.loaded=!0;this.onLoad(this)},getImageUrl:function(f,m,l,d){var c=f.spatialReference.wkid;d(this._url.path+"?"+h.objectToQuery(y.mixin(this._params,{f:"image",bbox:q.toJson(f.toJson()),bboxSR:c,imageSR:c,
size:m+","+l})))}});y.setObject("tasks._GPResultImageLayer",b,e);return b})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../lang ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,
n,u,x,A,z,E){b=b([t,n],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(w,D,r){w=D&&D.imageParameters;var v=y.hitch;if(w){var B=w.layerDefinitions;B&&this.setLayerDefinitions(B);w.layerOption===A.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(w.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=v(this,this._setIsPNG32);this.dpi=w&&w.dpi||96;this.imageFormat=w&&w.format||"png8";this.imageTransparency=
w&&!1===w.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=D&&D.gdbVersion;this._params.gdbVersion=this.gdbVersion;B=w&&w.layerDefinitions;y.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},w?w.toJson():{});B&&(this._params.layerDefs=B);this.getImageUrl=v(this,this.getImageUrl);this._initLayer=v(this,this._initLayer);this._load=v(this,this._load);this.useMapImage=D?D.useMapImage:!1;this._loadCallback=D&&D.loadCallback;(D=D&&D.resourceInfo)?
this._initLayer(D):(void 0===r||!1===r)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(w,D){this.inherited(arguments);w.timeInfo&&(this.timeInfo=new u(w.timeInfo));this.loaded=!0;this.onLoad(this);var r=this._loadCallback;r&&(delete this._loadCallback,r(this))},getImageUrl:function(w,D,r,v){var B=this._url.path+"/export",C=this._params,F=C.token=this._getToken(),G=w.spatialReference.wkid||a.toJson(w.spatialReference.toJson()),H=this._errorHandler;
delete C._ts;y.mixin(C,{bbox:w.xmin+","+w.ymin+","+w.xmax+","+w.ymax,bboxSR:G,imageSR:G,size:D+","+r},this.disableClientCaching?{_ts:(new Date).getTime()}:{});C.layerDefs&&(w=c._serializeLayerDefinitions(C.layerDefs,10.5<=this.version),C=y.mixin({},C),delete C.layerDefs,C.layerDefs=w);w=d.addProxy(d.normalize(B)+"?"+e.objectToQuery(y.mixin({},C,{f:"image"})));w.length>f.defaults.io.postLength||this.useMapImage?this._jsonRequest=l({url:B,content:y.mixin(C,{f:"json"}),callbackParamName:"callback",load:function(J){J.imageData?
J="data:"+(J.contentType||"image")+";base64,"+J.imageData:(J=J.href,F&&(J+=-1===J.indexOf("?")?"?token\x3d"+F:"\x26token\x3d"+F),J=d.addProxy(J));v(J)},error:H}):v(w)},_setIsPNG32:function(){var w=this.imageFormat.toLowerCase(),D=h("ie");this.isPNG32=D&&6===D&&("png32"===w||"png24"===w)&&this.imageTransparency},_setTime:function(w){var D=this.timeInfo;w=this._params.time=w?w.toJson().join(","):null;if(10.02>this.version&&D)if(w)this._params.layerTimeOptions=c._serializeTimeOptions(this.layerTimeOptions);
else{var r=this.layerInfos;if(r){var v=this.layerTimeOptions,B=v?v.slice(0):[],C=[];q.forEach(r,function(F){F.subLayerIds||C.push(F.id)});C.length&&(q.forEach(C,function(F){if(!B[F]){var G=new x;G.useTime=!1;B[F]=G}}),this._params.layerTimeOptions=c._serializeTimeOptions(B,C))}}10.02<=this.version&&D&&!w&&!D.hasLiveData&&(this._params.time="null,null")},setDPI:function(w,D){this.dpi=this._params.dpi=w;D||this.refresh(!0)},setImageFormat:function(w,D){this.imageFormat=this._params.format=w;this._setIsPNG32();
D||this.refresh(!0)},setImageTransparency:function(w,D){this.imageTransparency=this._params.transparent=w;this._setIsPNG32();D||this.refresh(!0)},setVisibleLayers:function(w,D){this.visibleLayers=w;this._params.layers=A.LAYER_OPTION_SHOW+":"+(w.length?w.join():"-1");this._updateDynamicLayers();D||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(w){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;
this._updateDynamicLayers();w||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(w,D){this.layerDefinitions=w;this._params.layerDefs=w;this._updateDynamicLayers();D||this.refresh(!0)},setDefaultLayerDefinitions:function(w){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();w||this.refresh(!0)},setDisableClientCaching:function(w){this.disableClientCaching=w},setLayerTimeOptions:function(w,D){this.layerTimeOptions=w;this._params.layerTimeOptions=
c._serializeTimeOptions(w);this._updateDynamicLayers();D||this.refresh(!0)},refresh:function(w){if(w)this.inherited(arguments);else{var D=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=D}},setLayerDrawingOptions:function(w,D){this.layerDrawingOptions=w;this._updateDynamicLayers();D||this.refresh(!0)},setDynamicLayerInfos:function(w,D){w&&0<w.length?(this.dynamicLayerInfos=w,this.visibleLayers=c._getDefaultVisibleLayers(w),this.onVisibleLayersChange(this.visibleLayers)):
this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();D||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var w=[],D;q.forEach(this.layerInfos,function(r){D=new z(r.toJson());D.source=new E({mapLayerId:r.id});w.push(D)});return w},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){this.dynamicLayerInfos&&0!==this.dynamicLayerInfos.length||
(this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos());var w=this._map&&k.getScale(this._map);w=this._getDynLayerObjs(w);w=a.toJson(w);this._params.dynamicLayers&&this._params.dynamicLayers.length===w.length&&this._params.dynamicLayers===w||(this._params.dynamicLayers=w,this._onDynamicLayersChange(this._params.dynamicLayers))}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_getDynLayerObjs:function(w){var D=
this.dynamicLayerInfos,r=[],v=this.visibleLayers,B=w?c._getLayersForScale(w,D):v;q.forEach(D,function(C){if(!C.subLayerIds){var F=C.id;if(-1!==q.indexOf(v,F)&&-1!==q.indexOf(B,F)){var G={id:F,name:C.name};G.source=C.source&&C.source.toJson();var H;this.layerDefinitions&&this.layerDefinitions[F]&&(H=this.layerDefinitions[F]);H&&(G.definitionExpression=H);var J;this.layerDrawingOptions&&this.layerDrawingOptions[F]&&(J=this.layerDrawingOptions[F]);J&&(H=J.toJson(),this._fixMarkerColor(H.renderer),G.drawingInfo=
H);var I;this.layerTimeOptions&&this.layerTimeOptions[F]&&(I=this.layerTimeOptions[F]);I&&(G.layerTimeOptions=I.toJson());G.minScale=C.minScale||0;G.maxScale=C.maxScale||0;r.push(G)}}},this);return r},_fixMarkerColor:function(w){q.forEach(this._getAllSimpleMarkerSymbols(w),function(D){if(!D.color){var r=[0,0,0,0],v=D.outline&&D.outline.color;"esriSMSX"!==D.style&&"esriSMSCross"!==D.style||!v||(r=v.slice(0));D.color=r}})},_getAllSimpleMarkerSymbols:function(w){return q.filter(this._getAllSymbols(w),
function(D){return"esriSMS"===D.type})},_getAllSymbols:function(w){var D=[];w&&(D.push(w.symbol),D.push(w.defaultSymbol),q.forEach(w.uniqueValueInfos||w.classBreakInfos,function(r){D.push(r.symbol)}),D=q.filter(D,m.isDefined));return D},_onExtentChangeHandler:function(w,D,r){r&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(w,D,r){this._map=w;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(w,D){this.gdbVersion=
w;this._params.gdbVersion=w;this.onGDBVersionChange();D||this.refresh(!0)},exportMapImage:function(w,D){var r=y.hitch(this,function(){var v=f.defaults.map,B=w&&w.layerDefinitions;w=w?w.toJson(this.normalization):{};B&&(w.layerDefs=B);w=y.mixin({size:v.width+","+v.height},this._params,w,{f:"json"});delete w._ts;w.layerDefs&&(v=c._serializeLayerDefinitions(w.layerDefs,10.5<=this.version),delete w.layerDefs,w.layerDefs=v);this._exportMapImage(this._url.path+"/export",w,D)});if(this.loaded)r();else this.on("load",
r)}});y.setObject("layers.ArcGISDynamicMapServiceLayer",b,g);return b})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(b,y,q,a,h){a={_serializeLayerDefinitions:function(e,g){var f=[],m=/[:;]/;if(e&&(y.forEach(e,function(d,c){d&&(f.push([c,d]),!g&&m.test(d)&&(g=!0))}),0<f.length)){if(g){var l={};y.forEach(f,function(d){l[d[0]]=d[1]});l=q.toJson(l)}else l=[],y.forEach(f,function(d){l.push(d[0]+":"+d[1])}),l=l.join(";");return l}return null},
_serializeTimeOptions:function(e,g){if(e){var f=[];y.forEach(e,function(m,l){m&&(m=m.toJson(),g&&-1!==y.indexOf(g,l)&&(m.useTime=!1),f.push('"'+l+'":'+q.toJson(m)))});if(f.length)return"{"+f.join(",")+"}"}},_getVisibleLayers:function(e,g){var f=[],m;if(!e)return f;if(g)for(f=g.concat(),m=0;m<e.length;m++){g=e[m];var l=y.indexOf(e,g.id);g.subLayerIds&&-1<l&&(f.splice(l,1),f=f.concat(g.subLayerIds))}else f=this._getDefaultVisibleLayers(e);return f},_getDefaultVisibleLayers:function(e){var g=[],f;if(!e)return g;
for(f=0;f<e.length;f++)0<=e[f].parentLayerId&&-1===y.indexOf(g,e[f].parentLayerId)&&y.some(e,function(m){return m.id===e[f].parentLayerId})||e[f].defaultVisibility&&g.push(e[f].id);return g},_getLayersForScale:function(e,g){var f=[];if(0<e&&g){var m;for(m=0;m<g.length;m++)if(!(0<=g[m].parentLayerId&&-1===y.indexOf(f,g[m].parentLayerId)&&y.some(g,function(k){return k.id===g[m].parentLayerId}))&&0<=g[m].id){var l=!0,d=g[m].maxScale,c=g[m].minScale;if(0<d||0<c)0<d&&0<c?l=d<=e&&e<=c:0<d?l=d<=e:0<c&&(l=
e<=c);l&&f.push(g[m].id)}}return f}};b.mixin(h,a);return a})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(b,y,q,a,h){function e(c,k,t){return c&&k?c.getWidth()/k*(t||f)*39.37*m.screenDPI:0}function g(c,k,t,n,u){return c.expand(n*k/(39.37*((u?t:l.values[l[t]])||f)*m.screenDPI)/c.getWidth())}var f=6370997*Math.PI/180,m=a.defaults,l=h,d={getUnitValueForSR:function(c){return this.getUnitValue(c)||f},getUnitValue:function(c){if(c)if("object"===
typeof c){var k=c.wkid;var t=c.wkt}else"number"===typeof c?k=c:"string"===typeof c&&(t=c);if(k)var n=l.values[l[k]];else t&&-1!==t.search(/^PROJCS/i)&&(c=/UNIT\[([^\]]+)\]\]$/i.exec(t))&&c[1]&&(n=parseFloat(c[1].split(",")[1]));return n},getScale:function(c,k,t){if(1<arguments.length&&null!=k&&!k.declaredClass){var n=c;var u=k;k=null;var x=d.getUnitValue(t)}else n=k||c.extent,u=c.width,x=d.getUnitValue(n&&n.spatialReference);return e(n,u,x)},getExtentForScale:function(c,k,t){return g(t||c.extent,
c.width,d.getUnitValue(c.spatialReference),k,!0)}};b.mixin(b.getObject("geometry",!0,q),d);q.geometry._getScale=e;q.geometry._getExtentForScale=g;return d})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(b,y){var q={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9367:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,
24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,
31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,
102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,
103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,
103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,
103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(b=2E3;2045>=b;b++)q[b]=0;for(b=2056;2065>=b;b++)q[b]=0;for(b=2067;2135>=b;b++)q[b]=0;for(b=2137;2154>=
b;b++)q[b]=0;for(b=2161;2170>=b;b++)q[b]=0;for(b=2172;2193>=b;b++)q[b]=0;for(b=2195;2198>=b;b++)q[b]=0;for(b=2200;2203>=b;b++)q[b]=0;for(b=2205;2217>=b;b++)q[b]=0;for(b=2222;2224>=b;b++)q[b]=1;for(b=2225;2250>=b;b++)q[b]=2;for(b=2251;2253>=b;b++)q[b]=1;for(b=2257;2264>=b;b++)q[b]=2;for(b=2274;2279>=b;b++)q[b]=2;for(b=2280;2282>=b;b++)q[b]=1;for(b=2283;2289>=b;b++)q[b]=2;for(b=2290;2292>=b;b++)q[b]=0;for(b=2308;2313>=b;b++)q[b]=0;for(b=2315;2491>=b;b++)q[b]=0;for(b=2494;2866>=b;b++)q[b]=0;for(b=2867;2869>=
b;b++)q[b]=1;for(b=2870;2888>=b;b++)q[b]=2;for(b=2891;2895>=b;b++)q[b]=2;for(b=2896;2898>=b;b++)q[b]=1;for(b=2902;2908>=b;b++)q[b]=2;for(b=2915;2920>=b;b++)q[b]=2;for(b=2921;2923>=b;b++)q[b]=1;for(b=2924;2930>=b;b++)q[b]=2;for(b=2931;2962>=b;b++)q[b]=0;for(b=2964;2968>=b;b++)q[b]=2;for(b=2969;2973>=b;b++)q[b]=0;for(b=2975;2991>=b;b++)q[b]=0;for(b=2995;3051>=b;b++)q[b]=0;for(b=3054;3079>=b;b++)q[b]=0;for(b=3081;3088>=b;b++)q[b]=0;for(b=3092;3101>=b;b++)q[b]=0;for(b=3106;3138>=b;b++)q[b]=0;for(b=3146;3151>=
b;b++)q[b]=0;for(b=3153;3166>=b;b++)q[b]=0;for(b=3168;3172>=b;b++)q[b]=0;for(b=3174;3203>=b;b++)q[b]=0;for(b=3294;3358>=b;b++)q[b]=0;for(b=3367;3403>=b;b++)q[b]=0;for(b=3408;3416>=b;b++)q[b]=0;for(b=3417;3438>=b;b++)q[b]=2;for(b=3441;3446>=b;b++)q[b]=2;for(b=3447;3450>=b;b++)q[b]=0;for(b=3451;3459>=b;b++)q[b]=2;for(b=3460;3478>=b;b++)q[b]=0;for(b=3554;3559>=b;b++)q[b]=0;for(b=3560;3570>=b;b++)q[b]=2;for(b=3571;3581>=b;b++)q[b]=0;for(b=3594;3597>=b;b++)q[b]=0;for(b=3601;3604>=b;b++)q[b]=0;for(b=3637;3639>=
b;b++)q[b]=0;for(b=3665;3667>=b;b++)q[b]=0;for(b=3693;3695>=b;b++)q[b]=0;for(b=3701;3727>=b;b++)q[b]=0;for(b=3728;3739>=b;b++)q[b]=2;for(b=3740;3751>=b;b++)q[b]=0;for(b=3753;3760>=b;b++)q[b]=2;for(b=3761;3773>=b;b++)q[b]=0;for(b=3775;3777>=b;b++)q[b]=0;for(b=3779;3781>=b;b++)q[b]=0;for(b=3783;3785>=b;b++)q[b]=0;for(b=3788;3791>=b;b++)q[b]=0;for(b=3797;3802>=b;b++)q[b]=0;for(b=3814;3816>=b;b++)q[b]=0;for(b=3825;3829>=b;b++)q[b]=0;for(b=3832;3841>=b;b++)q[b]=0;for(b=3844;3852>=b;b++)q[b]=0;for(b=3873;3885>=
b;b++)q[b]=0;for(b=3890;3893>=b;b++)q[b]=0;for(b=3907;3912>=b;b++)q[b]=0;for(b=3942;3950>=b;b++)q[b]=0;for(b=3968;3970>=b;b++)q[b]=0;for(b=3973;3976>=b;b++)q[b]=0;for(b=3986;3989>=b;b++)q[b]=0;for(b=3994;3997>=b;b++)q[b]=0;for(b=4048;4051>=b;b++)q[b]=0;for(b=4056;4063>=b;b++)q[b]=0;for(b=4093;4096>=b;b++)q[b]=0;for(b=4390;4398>=b;b++)q[b]=0;for(b=4399;4413>=b;b++)q[b]=2;for(b=4418;4433>=b;b++)q[b]=2;for(b=4455;4457>=b;b++)q[b]=2;for(b=4484;4489>=b;b++)q[b]=0;for(b=4491;4554>=b;b++)q[b]=0;for(b=4568;4589>=
b;b++)q[b]=0;for(b=4652;4656>=b;b++)q[b]=0;for(b=4766;4800>=b;b++)q[b]=0;for(b=5014;5016>=b;b++)q[b]=0;for(b=5069;5072>=b;b++)q[b]=0;for(b=5105;5130>=b;b++)q[b]=0;for(b=5173;5188>=b;b++)q[b]=0;for(b=5253;5259>=b;b++)q[b]=0;for(b=5269;5275>=b;b++)q[b]=0;for(b=5292;5311>=b;b++)q[b]=0;for(b=5329;5331>=b;b++)q[b]=0;for(b=5343;5349>=b;b++)q[b]=0;for(b=5355;5357>=b;b++)q[b]=0;for(b=5387;5389>=b;b++)q[b]=0;for(b=5459;5463>=b;b++)q[b]=0;for(b=5479;5482>=b;b++)q[b]=0;for(b=5518;5520>=b;b++)q[b]=0;for(b=5530;5539>=
b;b++)q[b]=0;for(b=5550;5552>=b;b++)q[b]=0;for(b=5562;5583>=b;b++)q[b]=0;for(b=5623;5625>=b;b++)q[b]=2;for(b=5631;5639>=b;b++)q[b]=0;for(b=5649;5653>=b;b++)q[b]=0;for(b=5663;5680>=b;b++)q[b]=0;for(b=5682;5685>=b;b++)q[b]=0;for(b=5875;5877>=b;b++)q[b]=0;for(b=5896;5899>=b;b++)q[b]=0;for(b=5921;5940>=b;b++)q[b]=0;for(b=6050;6125>=b;b++)q[b]=0;for(b=6244;6275>=b;b++)q[b]=0;for(b=6328;6348>=b;b++)q[b]=0;for(b=6350;6356>=b;b++)q[b]=0;for(b=6366;6372>=b;b++)q[b]=0;for(b=6381;6387>=b;b++)q[b]=0;for(b=6393;6404>=
b;b++)q[b]=0;for(b=6480;6483>=b;b++)q[b]=0;for(b=6511;6514>=b;b++)q[b]=0;for(b=6579;6581>=b;b++)q[b]=0;for(b=6619;6624>=b;b++)q[b]=0;for(b=6625;6627>=b;b++)q[b]=2;for(b=6628;6632>=b;b++)q[b]=0;for(b=6634;6637>=b;b++)q[b]=0;for(b=6669;6692>=b;b++)q[b]=0;for(b=6707;6709>=b;b++)q[b]=0;for(b=6720;6723>=b;b++)q[b]=0;for(b=6732;6738>=b;b++)q[b]=0;for(b=6931;6933>=b;b++)q[b]=0;for(b=6956;6959>=b;b++)q[b]=0;for(b=7005;7007>=b;b++)q[b]=0;for(b=7057;7070>=b;b++)q[b]=2;for(b=7074;7082>=b;b++)q[b]=0;for(b=7109;7118>=
b;b++)q[b]=0;for(b=7119;7127>=b;b++)q[b]=1;for(b=7374;7376>=b;b++)q[b]=0;for(b=7528;7586>=b;b++)q[b]=0;for(b=7587;7645>=b;b++)q[b]=2;for(b=7692;7696>=b;b++)q[b]=0;for(b=7755;7787>=b;b++)q[b]=0;for(b=7791;7795>=b;b++)q[b]=0;for(b=7799;7801>=b;b++)q[b]=0;for(b=7803;7805>=b;b++)q[b]=0;for(b=7825;7831>=b;b++)q[b]=0;for(b=7845;7859>=b;b++)q[b]=0;for(b=8013;8032>=b;b++)q[b]=0;for(b=8065;8068>=b;b++)q[b]=1;for(b=8518;8529>=b;b++)q[b]=2;for(b=8533;8536>=b;b++)q[b]=2;for(b=8538;8540>=b;b++)q[b]=2;for(b=8677;8679>=
b;b++)q[b]=0;for(b=8836;8840>=b;b++)q[b]=0;for(b=8857;8859>=b;b++)q[b]=0;for(b=8908;8910>=b;b++)q[b]=0;for(b=9154;9159>=b;b++)q[b]=0;for(b=9205;9218>=b;b++)q[b]=0;for(b=9271;9273>=b;b++)q[b]=0;for(b=9295;9297>=b;b++)q[b]=0;for(b=20002;20032>=b;b++)q[b]=0;for(b=20062;20092>=b;b++)q[b]=0;for(b=20135;20138>=b;b++)q[b]=0;for(b=20248;20258>=b;b++)q[b]=0;for(b=20348;20358>=b;b++)q[b]=0;for(b=20436;20440>=b;b++)q[b]=0;for(b=20822;20824>=b;b++)q[b]=0;for(b=20934;20936>=b;b++)q[b]=0;for(b=21035;21037>=b;b++)q[b]=
0;for(b=21095;21097>=b;b++)q[b]=0;for(b=21148;21150>=b;b++)q[b]=0;for(b=21413;21423>=b;b++)q[b]=0;for(b=21453;21463>=b;b++)q[b]=0;for(b=21473;21483>=b;b++)q[b]=0;for(b=21780;21782>=b;b++)q[b]=0;for(b=21891;21894>=b;b++)q[b]=0;for(b=21896;21899>=b;b++)q[b]=0;for(b=22171;22177>=b;b++)q[b]=0;for(b=22181;22187>=b;b++)q[b]=0;for(b=22191;22197>=b;b++)q[b]=0;for(b=22234;22236>=b;b++)q[b]=0;for(b=22521;22525>=b;b++)q[b]=0;for(b=22991;22994>=b;b++)q[b]=0;for(b=23028;23038>=b;b++)q[b]=0;for(b=23830;23853>=
b;b++)q[b]=0;for(b=23866;23872>=b;b++)q[b]=0;for(b=23877;23884>=b;b++)q[b]=0;for(b=23886;23894>=b;b++)q[b]=0;for(b=23946;23948>=b;b++)q[b]=0;for(b=24311;24313>=b;b++)q[b]=0;for(b=24342;24347>=b;b++)q[b]=0;for(b=24370;24374>=b;b++)q[b]=10;for(b=24375;24381>=b;b++)q[b]=0;for(b=24718;24721>=b;b++)q[b]=0;for(b=24817;24821>=b;b++)q[b]=0;for(b=24877;24882>=b;b++)q[b]=0;for(b=24891;24893>=b;b++)q[b]=0;for(b=25391;25395>=b;b++)q[b]=0;for(b=25828;25838>=b;b++)q[b]=0;for(b=26191;26195>=b;b++)q[b]=0;for(b=26391;26393>=
b;b++)q[b]=0;for(b=26701;26722>=b;b++)q[b]=0;for(b=26729;26799>=b;b++)q[b]=2;for(b=26801;26803>=b;b++)q[b]=2;for(b=26811;26813>=b;b++)q[b]=2;for(b=26847;26870>=b;b++)q[b]=2;for(b=26891;26899>=b;b++)q[b]=0;for(b=26901;26923>=b;b++)q[b]=0;for(b=26929;26946>=b;b++)q[b]=0;for(b=26948;26998>=b;b++)q[b]=0;for(b=27037;27040>=b;b++)q[b]=0;for(b=27205;27232>=b;b++)q[b]=0;for(b=27258;27260>=b;b++)q[b]=0;for(b=27391;27398>=b;b++)q[b]=0;for(b=27561;27564>=b;b++)q[b]=0;for(b=27571;27574>=b;b++)q[b]=0;for(b=27581;27584>=
b;b++)q[b]=0;for(b=27591;27594>=b;b++)q[b]=0;for(b=28191;28193>=b;b++)q[b]=0;for(b=28348;28358>=b;b++)q[b]=0;for(b=28402;28432>=b;b++)q[b]=0;for(b=28462;28492>=b;b++)q[b]=0;for(b=29118;29122>=b;b++)q[b]=0;for(b=29168;29172>=b;b++)q[b]=0;for(b=29177;29185>=b;b++)q[b]=0;for(b=29187;29195>=b;b++)q[b]=0;for(b=29900;29903>=b;b++)q[b]=0;for(b=30161;30179>=b;b++)q[b]=0;for(b=30491;30494>=b;b++)q[b]=0;for(b=30729;30732>=b;b++)q[b]=0;for(b=31251;31259>=b;b++)q[b]=0;for(b=31265;31268>=b;b++)q[b]=0;for(b=31275;31279>=
b;b++)q[b]=0;for(b=31281;31297>=b;b++)q[b]=0;for(b=31461;31469>=b;b++)q[b]=0;for(b=31491;31495>=b;b++)q[b]=0;for(b=31917;31922>=b;b++)q[b]=0;for(b=31965;32E3>=b;b++)q[b]=0;for(b=32001;32003>=b;b++)q[b]=2;for(b=32005;32031>=b;b++)q[b]=2;for(b=32033;32060>=b;b++)q[b]=2;for(b=32064;32067>=b;b++)q[b]=2;for(b=32074;32077>=b;b++)q[b]=2;for(b=32081;32086>=b;b++)q[b]=0;for(b=32107;32130>=b;b++)q[b]=0;for(b=32133;32158>=b;b++)q[b]=0;for(b=32164;32167>=b;b++)q[b]=2;for(b=32180;32199>=b;b++)q[b]=0;for(b=32201;32260>=
b;b++)q[b]=0;for(b=32301;32360>=b;b++)q[b]=0;for(b=32601;32662>=b;b++)q[b]=0;for(b=32664;32667>=b;b++)q[b]=2;for(b=32701;32761>=b;b++)q[b]=0;for(b=53001;53004>=b;b++)q[b]=0;for(b=53008;53019>=b;b++)q[b]=0;for(b=53021;53032>=b;b++)q[b]=0;for(b=53034;53037>=b;b++)q[b]=0;for(b=53042;53046>=b;b++)q[b]=0;for(b=53074;53080>=b;b++)q[b]=0;for(b=54001;54004>=b;b++)q[b]=0;for(b=54008;54019>=b;b++)q[b]=0;for(b=54021;54032>=b;b++)q[b]=0;for(b=54034;54037>=b;b++)q[b]=0;for(b=54042;54046>=b;b++)q[b]=0;for(b=54048;54053>=
b;b++)q[b]=0;for(b=54074;54080>=b;b++)q[b]=0;for(b=54098;54101>=b;b++)q[b]=0;for(b=102001;102040>=b;b++)q[b]=0;for(b=102042;102063>=b;b++)q[b]=0;for(b=102065;102067>=b;b++)q[b]=0;for(b=102070;102117>=b;b++)q[b]=0;for(b=102122;102216>=b;b++)q[b]=0;for(b=102221;102377>=b;b++)q[b]=0;for(b=102382;102388>=b;b++)q[b]=0;for(b=102389;102398>=b;b++)q[b]=2;for(b=102399;102444>=b;b++)q[b]=0;for(b=102445;102447>=b;b++)q[b]=2;for(b=102448;102458>=b;b++)q[b]=0;for(b=102459;102468>=b;b++)q[b]=2;for(b=102469;102499>=
b;b++)q[b]=0;for(b=102500;102519>=b;b++)q[b]=1;for(b=102520;102524>=b;b++)q[b]=0;for(b=102525;102529>=b;b++)q[b]=2;for(b=102530;102588>=b;b++)q[b]=0;for(b=102590;102598>=b;b++)q[b]=0;for(b=102601;102603>=b;b++)q[b]=0;for(b=102605;102628>=b;b++)q[b]=0;for(b=102629;102646>=b;b++)q[b]=2;for(b=102648;102700>=b;b++)q[b]=2;for(b=102701;102703>=b;b++)q[b]=0;for(b=102707;102730>=b;b++)q[b]=2;for(b=102733;102758>=b;b++)q[b]=2;for(b=102767;102900>=b;b++)q[b]=0;for(b=102965;102969>=b;b++)q[b]=0;for(b=102971;102973>=
b;b++)q[b]=0;for(b=102975;102989>=b;b++)q[b]=0;for(b=102990;102992>=b;b++)q[b]=1;for(b=102997;103002>=b;b++)q[b]=0;for(b=103003;103008>=b;b++)q[b]=2;for(b=103009;103011>=b;b++)q[b]=0;for(b=103012;103014>=b;b++)q[b]=2;for(b=103019;103021>=b;b++)q[b]=0;for(b=103022;103024>=b;b++)q[b]=2;for(b=103029;103031>=b;b++)q[b]=0;for(b=103032;103034>=b;b++)q[b]=2;for(b=103065;103068>=b;b++)q[b]=0;for(b=103074;103076>=b;b++)q[b]=0;for(b=103077;103079>=b;b++)q[b]=1;for(b=103080;103082>=b;b++)q[b]=0;for(b=103083;103085>=
b;b++)q[b]=2;for(b=103090;103093>=b;b++)q[b]=0;for(b=103097;103099>=b;b++)q[b]=0;for(b=103100;103102>=b;b++)q[b]=2;for(b=103107;103109>=b;b++)q[b]=0;for(b=103110;103112>=b;b++)q[b]=2;for(b=103113;103116>=b;b++)q[b]=0;for(b=103117;103120>=b;b++)q[b]=2;for(b=103153;103157>=b;b++)q[b]=0;for(b=103158;103162>=b;b++)q[b]=2;for(b=103163;103165>=b;b++)q[b]=0;for(b=103166;103168>=b;b++)q[b]=1;for(b=103169;103171>=b;b++)q[b]=2;for(b=103186;103188>=b;b++)q[b]=0;for(b=103189;103191>=b;b++)q[b]=2;for(b=103192;103195>=
b;b++)q[b]=0;for(b=103196;103199>=b;b++)q[b]=2;for(b=103200;103224>=b;b++)q[b]=0;for(b=103225;103227>=b;b++)q[b]=1;for(b=103232;103237>=b;b++)q[b]=0;for(b=103238;103243>=b;b++)q[b]=2;for(b=103244;103246>=b;b++)q[b]=0;for(b=103247;103249>=b;b++)q[b]=2;for(b=103254;103256>=b;b++)q[b]=0;for(b=103257;103259>=b;b++)q[b]=2;for(b=103264;103266>=b;b++)q[b]=0;for(b=103267;103269>=b;b++)q[b]=2;for(b=103300;103375>=b;b++)q[b]=0;for(b=103381;103383>=b;b++)q[b]=0;for(b=103384;103386>=b;b++)q[b]=1;for(b=103387;103389>=
b;b++)q[b]=0;for(b=103390;103392>=b;b++)q[b]=2;for(b=103397;103399>=b;b++)q[b]=0;for(b=103400;103471>=b;b++)q[b]=2;for(b=103476;103478>=b;b++)q[b]=0;for(b=103479;103481>=b;b++)q[b]=2;for(b=103486;103488>=b;b++)q[b]=0;for(b=103489;103491>=b;b++)q[b]=2;for(b=103492;103495>=b;b++)q[b]=0;for(b=103496;103499>=b;b++)q[b]=2;for(b=103528;103543>=b;b++)q[b]=0;for(b=103544;103548>=b;b++)q[b]=2;for(b=103549;103551>=b;b++)q[b]=0;for(b=103552;103554>=b;b++)q[b]=1;for(b=103555;103557>=b;b++)q[b]=2;for(b=103558;103560>=
b;b++)q[b]=0;for(b=103571;103573>=b;b++)q[b]=0;for(b=103574;103576>=b;b++)q[b]=2;for(b=103577;103580>=b;b++)q[b]=0;for(b=103581;103583>=b;b++)q[b]=2;for(b=103595;103694>=b;b++)q[b]=0;for(b=103696;103699>=b;b++)q[b]=0;for(b=103700;103793>=b;b++)q[b]=2;for(b=103794;103872>=b;b++)q[b]=0;for(b=103900;103971>=b;b++)q[b]=2;return y.WKIDUnitConversion=q})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k){var t=f.defaults.map.zoomDuration;b=b(c,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},constructor:function(n,u){this.useMapTime=u&&u.hasOwnProperty("useMapTime")?!!u.useMapTime:!0;this.extentProcessor=u&&u.extentProcessor;n=q.hitch;this._exportMapImageHandler=n(this,this._exportMapImageHandler);this._imgSrcFunc=n(this,this._imgSrcFunc);this._divAlphaImageFunc=n(this,this._divAlphaImageFunc);this._tileLoadHandler=
n(this,this._tileLoadHandler);this._tileErrorHandler=n(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(n,u,x){this.inherited(arguments);this._map=n;var A=this._div=a.create("div",null,u),z=g._css.names,E={position:"absolute",width:n.width+"px",height:n.height+"px",overflow:"visible",opacity:this.opacity},w=m("ie"),D=y.connect,r=n.__visibleDelta;8===w&&delete E.opacity;"css-transforms"===n.navigationMode?(this._isChildLayer||(E[z.transform]=g._css.translate(r.x,
r.y),h.set(A,E)),this._left=r.x,this._top=r.y):(E.left="0px",E.top="0px",h.set(A,E),this._left=this._top=0);h.set(A,E);this._onResizeHandler_connect=D(n,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=D(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!n.loaded)var v=y.connect(n,"onLoad",this,function(){y.disconnect(v);v=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=
y.connect(n,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=y.connect(n,"onZoomEnd",this,this.evaluateSuspension));return A},_unsetMap:function(n,u){this._img&&this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);a.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var x=y.disconnect;x(this._onResizeHandler_connect);x(this._opacityChangeHandler_connect);x(this._panEndEvalHandle);x(this._zoomEndEvalHandle);this._panEndEvalHandle=
this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(n,u,x){h.set(this._div,{width:u+"px",height:x+"px"});this._onExtentChangeHandler(n)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();d.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=
null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var n=this._map;this._toggleTime();"css-transforms"===n.navigationMode&&(n=n.__visibleDelta,this._left=n.x,this._top=n.y,this._isChildLayer||h.set(this._div,g._css.names.transform,g._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(q.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var n=
this.inherited(arguments);if(n){var u=this._map.extent;this.extentProcessor&&u&&(n=!!this.extentProcessor({layer:this,extent:u,width:this._map.width}).extent)}return n},_enableDrawConnectors:function(){var n=y.connect,u=this._map;u&&(this._onPanHandler_connect=n(u,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=n(u,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===u.navigationMode?this._onScaleHandler_connect=n(u,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=
n(u,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var n=y.disconnect;n(this._onPanHandler_connect);n(this._onExtentChangeHandler_connect);n(this._onZoomHandler_connect);n(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var n=this._map;this.timeInfo&&this.useMapTime&&n&&!this.suspended?(this._timeConnect||(this._timeConnect=y.connect(n,"onTimeExtentChange",
this,this._onTimeExtentChangeHandler)),this._setTime(n.timeExtent)):(y.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(n){this._params&&(this._params.time=n?n.toJson().join(","):null)},_onPanHandler:function(n,u){this._panDx=u.x;this._panDy=u.y;n=this._dragOrigin;var x=this._map.__visibleDelta,A=this._img;A&&("css-transforms"===this._map.navigationMode?(this._left=x.x+u.x,this._top=x.y+u.y,this._isChildLayer||h.set(this._div,g._css.names.transform,g._css.translate(this._left,
this._top))):h.set(A,{left:n.x+u.x+"px",top:n.y+u.y+"px"}))},_onExtentChangeHandler:function(n,u,x){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var A=this._map,z=this._img,E=z&&z.style,w=this._dragOrigin;!u||x||!z||u.x===this._panDx&&u.y===this._panDy||("css-transforms"===A.navigationMode?(u=A.__visibleDelta,this._left=u.x,this._top=u.y,this._isChildLayer||h.set(this._div,g._css.names.transform,g._css.translate(this._left,this._top))):h.set(z,{left:w.x+u.x+"px",top:w.y+
u.y+"px"}));z?(w.x=parseInt(E.left,10),w.y=parseInt(E.top,10)):w.x=w.y=0;"css-transforms"===A.navigationMode&&x&&z&&(h.set(z,g._css.names.transition,"none"),z._multiply=z._multiply?e.multiply(z._matrix,z._multiply):z._matrix);this._fireUpdateStart();if(x=this._img_loading)if(this._clearEventListeners(x),a.destroy(x),this._img_loading=null,x=this._jsonRequest){try{x.cancel()}catch(G){}this._jsonRequest=null}var D=A.width;x=A.height;u=D;var r=0;10<=this.version&&A.wrapAround180&&(n=n._normalize(!0));
this.extentProcessor&&(r=this.extentProcessor({layer:this,extent:n,width:u}),n=r.extent,u=r.width,r=r.marginLeft||0);if(this.isPNG32)z=this._img_loading=a.create("div"),z.id=A.id+"_"+this.id+"_"+(new Date).getTime(),h.set(z,{position:"absolute",left:"0px",top:"0px",width:u+"px",height:x+"px"}),A=z.appendChild(a.create("div")),h.set(A,{opacity:0,width:u+"px",height:x+"px"}),this.getImageUrl(n,u,x,this._divAlphaImageFunc),z=null;else{var v=this._img_loading=a.create("img"),B=g._css.names,C=m("ie"),
F={position:"absolute",width:u+"px",height:x+"px"};v.setAttribute("decoding","sync");8===C&&(F.opacity=this.opacity);null!=r&&0!==r&&(F.marginLeft=r+"px");"css-transforms"===A.navigationMode?(F[B.transform]=g._css.translate(-this._left,-this._top),v._tdx=-this._left,v._tdy=-this._top,F[B.transition]=B.transformName+" "+t+"ms ease",this.extentProcessor&&(F[B.origin]=D/2-r+"px "+x/2+"px")):(F.left="0px",F.top="0px");v.id=A.id+"_"+this.id+"_"+(new Date).getTime();h.set(v,F);v._onload_connect=y.connect(v,
"onload",this,"_onLoadHandler");v._onerror_connect=y.connect(v,"onerror",this,"_onErrorHandler");v._onabort_connect=y.connect(v,"onabort",this,"_onErrorHandler");this._startRect={left:w.x,top:w.y,width:z?parseInt(E.width,10):u,height:z?parseInt(E.height,10):x,marginLeft:z?parseInt(E.marginLeft||"0",10):r,zoom:E&&E.zoom?parseFloat(E.zoom):1};this.getImageUrl(n,u,x,this._imgSrcFunc);v=null}}},_onTimeExtentChangeHandler:function(n){this.suspended||(this._setTime(n),this.refresh(!0))},getImageUrl:function(n,
u,x,A){},_imgSrcFunc:function(n){this._img_loading.src=n},_divAlphaImageFunc:function(n){h.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+n+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},_onLoadHandler:function(n){n=n.currentTarget;var u=this._map;this._clearEventListeners(n);!u||u.__panning||u.__zooming?a.destroy(n):(this._img&&this._div.removeChild(this._img),this._img=n,u=n.style,this._startRect={left:0,top:0,
width:parseInt(u.width,10),height:parseInt(u.height,10),marginLeft:parseInt(u.marginLeft||"0",10),zoom:1},this._div.appendChild(n),this.suspended||d.show(this._div),this._img_loading=null,n=this._dragOrigin,n.x=n.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(n){n=n.currentTarget;h.set(n,"visibility","hidden");this._clearEventListeners(n);n=Error("Unable to load image: "+n.src);this.onError(n);this._fireUpdateEnd(n)},_clearEventListeners:function(n){y.disconnect(n._onload_connect);
y.disconnect(n._onerror_connect);y.disconnect(n._onabort_connect);n._onload_connect=n._onerror_connect=n._onabort_connect=null},setUseMapTime:function(n,u){this.useMapTime=n;this._toggleTime();u||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},_onScaleHandler:function(n,u){var x={},A=g._css.names,z=this._img;if(z){h.set(z,A.transition,u?"none":A.transformName+" "+t+"ms ease");z._matrix=n;n=z._multiply?e.multiply(n,z._multiply):n;if(z._tdx||z._tdy)n=e.multiply(n,
{xx:1,xy:0,yx:0,yy:1,dx:z._tdx,dy:z._tdy});x[A.transform]=g._css.matrix(n);h.set(z,x)}},_onZoomHandler:function(n,u,x){n=this._startRect;var A=n.width*u,z=n.height*u,E=n.marginLeft*u,w=this._img,D=m("ie");w&&(D&&8>D?h.set(w,{left:n.left-(A-n.width)*(x.x-n.left)/n.width+"px",top:n.top-(z-n.height)*(x.y-n.top)/n.height+"px",zoom:u*n.zoom}):h.set(w,{left:n.left-(A-n.width)*(x.x-n.left)/n.width+"px",top:n.top-(z-n.height)*(x.y-n.top)/n.height+"px",width:A+"px",height:z+"px"}),null!=E&&0!==E&&h.set(w,
{marginLeft:E+"px"}))},_exportMapImage:function(n,u,x){var A=this._exportMapImageHandler;u.token=this._getToken();l({url:n,content:u,callbackParamName:"callback",load:function(z,E){A(z,E,x)},error:f.defaults.io.errorHandler})},_exportMapImageHandler:function(n,u,x){n=new k(n);this.onMapImageExport(n);x&&x(n)},onMapImageExport:function(){},setOpacity:function(n){if(this.opacity!=n)this.onOpacityChange(this.opacity=n)},onOpacityChange:function(){},_opacityChangeHandler:function(n){var u=8===m("ie")?
this._img:this._div;h.set(u,"opacity",n)}});q.setObject("layers.DynamicMapServiceLayer",b,g);return b})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n){var u=b([f],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],
"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(x,A){this._attrs={};x&&a.isString(x)?this._url=k.urlToObject(this.url=k.normalize(x)):(this.url=this._url=null,(A=A||x)&&(A.layerDefinition||A.query)&&(A=null));this.spatialReference=new t(4326);this.initialExtent=new n(-180,-90,180,90,new t(4326));this._map=this._div=null;this.normalization=!0;A&&(A.id&&(this.id=A.id),this.arcgisProps=A.arcgisProps,this.parentLayer=A.parentLayer,!1===A.visible&&
(this.visible=!1),l.isDefined(A.opacity)&&(this.opacity=A.opacity),l.isDefined(A.minScale)&&this.setMinScale(A.minScale),l.isDefined(A.maxScale)&&this.setMaxScale(A.maxScale),this.attributionDataUrl=A.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,l.isDefined(A.showAttribution)&&(this.showAttribution=A.showAttribution),this.className=A.className,this.refreshInterval=A.refreshInterval||0);this._errorHandler=a.hitch(this,this._errorHandler);this._scheduledRefresh=a.hitch(this,
this._scheduledRefresh);this.refresh=a.hitch(this,this.refresh);if(this.managedSuspension){var z=this._setMap;this._setMap=function(E){var w=z.apply(this,arguments);this._fireAttach(E);this.evaluateSuspension();if(this.suspended&&!E.loaded)var D=q.connect(E,"onLoad",this,function(){q.disconnect(D);D=null;this.evaluateSuspension()});return w}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",
hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(x){this.loaded||(this.loadError=x);this.onError(x)},_setMap:function(x,A,z,E){this._map=x;this._lyrZEHandle=q.connect(x,"onZoomEnd",this,this._processMapScale);if(x.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var w=q.connect(x,"onLoad",this,function(){q.disconnect(w);w=null;this._processMapScale()})},_unsetMap:function(x,A){q.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=
void 0;this.suspended=!0;this._fireDetach(x)},_fireAttach:function(x){this.attached=!0;this.onAttach({map:x})},_fireDetach:function(x){this.attached=!1;this.onDetach({map:x})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(x,A){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(x,A),this._map&&
this._map._decr())},_getToken:function(){var x=this._url,A=this.credential;return x&&x.query&&x.query.token||A&&A.token||void 0},_findCredential:function(){this.credential=m.id&&this._url&&m.id.findCredential(this._url.path)},_useSSL:function(){var x=this._url,A=/^http:/i;this.url&&(this.url=this.url.replace(A,"https:"));x&&x.path&&(x.path=x.path.replace(A,"https:"))},refresh:function(){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(x){this.setScaleRange(x)},
setMaxScale:function(x){this.setScaleRange(null,x)},setScaleRange:function(x,A){var z=l.isDefined(x),E=l.isDefined(A);this.loaded||(this._hasMin=this._hasMin||z,this._hasMax=this._hasMax||E);var w=this.minScale,D=this.maxScale;this.minScale=(z?x:this.minScale)||0;this.maxScale=(E?A:this.maxScale)||0;if(w!==this.minScale||D!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},
canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var x=void 0===this._resumedOnce,A=this.className,z=this._attrs,E=this.getNode(),
w;if(x){this._resumedOnce=!0;if(A&&E){var D=E.getAttribute("class")||"";(new RegExp("(^|\\s)"+A+"(\\s|$)","i")).test(D)||E.setAttribute("class",D+((D?" ":"")+A))}if(z&&E)for(w in z)z.hasOwnProperty(w)&&E.setAttribute(w,z[w])}this._refreshRT();this.onResume({firstOccurrence:x});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var x=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();x!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},
isVisibleAtScale:function(x){return x?u.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(x,A){if(!(x||this._map&&this._map.loaded))return!1;var z=this._map;x=x||z.getScale();var E=this.minScale,w=this.maxScale,D=!E,r=!w,v;A&&(v=z.width>z.height?z.width:z.height);D||(x<=E?D=!0:A&&(D=Math.abs(E-x)/E<1/v));r||(x>=w?r=!0:A&&(r=Math.abs(w-x)/w<1/v));return D&&r},getAttributionData:function(){var x=this.attributionDataUrl,A=new h(c._dfdCanceller);this.hasAttributionData&&
x?(A._pendingDfd=d({url:x,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),A._pendingDfd.then(function(z){A.callback(z)},function(z){A.errback(z)})):(x=Error("Layer does not have attribution data"),x.log=!!y.isDebug,A.errback(x));return A},getResourceInfo:function(){var x=this.resourceInfo;return a.isString(x)?e.fromJson(x):a.clone(x)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(x,A){var z=this.getNode();if("data-reference"===x&&11>g("ie"))return this;
z&&(null==A?z.removeAttribute(x):z.setAttribute(x,A));this._attrs&&(null==A?delete this._attrs[x]:this._attrs[x]=A);return this},setRefreshInterval:function(x){var A=this.refreshInterval;this.refreshInterval=x;this._toggleRT(!1);x&&this._toggleRT(!0);if(A!==x)this.onRefreshIntervalChange();return this},_toggleRT:function(x){x&&this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),
this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(x){var A=this._refreshTS;A&&(x=this._reCheckTS.test(x)?x.replace(this._reReplaceTS,"$$$1"+A):x+((-1===x.indexOf("?")?"?":"\x26")+"_ts\x3d"+A));return x},setNormalization:function(x){this.normalization=
x},setVisibility:function(x){this.visible!==x&&(this.visible=x,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",x?null:"")},onLoad:function(){},onAttach:function(x){},onDetach:function(x){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},
onError:function(){}});a.setObject("layers.Layer",u,m);return u})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(b,y,q,a,h,e,g){b=b(null,{declaredClass:"esri.layers.MapImage",constructor:function(f){y.mixin(this,f);this.extent=new g(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=
!0;var f=this._node,m=this._layer,l;if(f){if(l=m&&m._div)m.suspended||m._setPos(f,l._left,l._top),(m._active||l).appendChild(f);e.show(f)}}},hide:function(){if(this.visible){this.visible=!1;var f=this._node;f&&(e.hide(f),f.parentNode&&f.parentNode.removeChild(f))}},setOpacity:function(f){var m=this._node;this.opacity=f;m&&q.set(m,"opacity",f)}});y.setObject("layers.MapImage",b,h);return b})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),
function(b,y,q,a,h,e,g,f,m,l){b=b(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(d,c){this.layerInfos=[];c&&(this.infoTemplates=c.infoTemplates||null);d=this._params={};if(c=this._url.query?this._url.query.token:null)d.token=c},setInfoTemplates:function(d){this.infoTemplates=d},_load:function(){g({url:this._url.path,content:y.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,
initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(d,c){try{this._findCredential();(this.credential&&this.credential.ssl||d&&d._ssl)&&this._useSSL();this.description=d.description;this.copyright=d.copyrightText;this.spatialReference=d.spatialReference&&new f(d.spatialReference);this.initialExtent=d.initialExtent&&new m(d.initialExtent);this.fullExtent=d.fullExtent&&new m(d.fullExtent);this.units=d.units;this.maxRecordCount=d.maxRecordCount;this.maxImageHeight=d.maxImageHeight;
this.maxImageWidth=d.maxImageWidth;this.supportsDynamicLayers=d.supportsDynamicLayers;var k=this.layerInfos=[],t=d.layers,n=this._defaultVisibleLayers=[];q.forEach(t,function(u,x){k[x]=new l(u);u.defaultVisibility&&n.push(u.id)});this.visibleLayers||(this.visibleLayers=n);this.version=d.currentVersion;this.cimVersion=d.cimVersion;this.version||(this.version="capabilities"in d||"tables"in d?10:"supportedImageFormatTypes"in d?9.31:9.3);this.capabilities=d.capabilities;e.isDefined(d.minScale)&&!this._hasMin&&
this.setMinScale(d.minScale);e.isDefined(d.maxScale)&&!this._hasMax&&this.setMaxScale(d.maxScale)}catch(u){this._errorHandler(u)}}});y.setObject("layers.ArcGISMapServiceLayer",b,h);return b})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,y,q,a,h){b=b(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(e){y.mixin(this,e)},toJson:function(){return h.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,
maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});y.setObject("layers.LayerInfo",b,a);return b})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(b,y,q,a,h,e,g){b=b(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(f){null!==f&&(y.mixin(this,f),f.exportOptions&&(this.exportOptions=new g(f.exportOptions)),
this.timeExtent=null,f.timeExtent&&2===f.timeExtent.length&&(this.timeExtent=new h(f.timeExtent)),this.timeReference=new e(f.timeReference))}});y.mixin(b,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",
UNIT_YEARS:"esriTimeUnitsYears"});y.setObject("layers.TimeInfo",b,a);return b})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(b,y,q,a){var h=b(null,{declaredClass:"esri.TimeExtent",constructor:function(e){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(e)if(y.isArray(e)){var g=e[0],f=e[1];this.startTime=null===g||"null"===g?null:new Date(g);this.endTime=null===f||"null"===f?null:new Date(f)}else e instanceof Date&&
this._create(e,null)},offset:function(e,g){var f=new h,m=this.startTime,l=this.endTime;m&&(f.startTime=this._getOffsettedDate(m,e,g));l&&(f.endTime=this._getOffsettedDate(l,e,g));return f},intersection:function(e){return this._intersection(this,e)},toJson:function(){var e=[],g=this.startTime;e.push(g?g.getTime():"null");g=this.endTime;e.push(g?g.getTime():"null");return e},_create:function(e,g){this.startTime=e?new Date(e.getTime()):null;this.endTime=g?new Date(g.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",
setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},
esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(e,g){if(e&&g){var f=e.startTime;e=e.endTime;var m=g.startTime;g=g.endTime;f=f?f.getTime():-Infinity;m=m?m.getTime():-Infinity;e=e?e.getTime():Infinity;g=g?g.getTime():Infinity;var l,d;m>=f&&m<=e?l=m:f>=m&&f<=g&&(l=f);e>=m&&
e<=g?d=e:g>=f&&g<=e&&(d=g);if(isNaN(l)||isNaN(d))return null;f=new h;f.startTime=-Infinity===l?null:new Date(l);f.endTime=Infinity===d?null:new Date(d);return f}return null},_getOffsettedDate:function(e,g,f){var m=this._refData;e=new Date(e.getTime());g&&f&&(m=m[f],e[m.setter](e[m.getter]()+g*m.multiplier));return e}});return a.TimeExtent=h})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.layers.TimeReference",
constructor:function(h){h&&y.mixin(this,h)}});y.setObject("layers.TimeReference",b,a);return b})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,y,q,a,h){b=b(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(e){e&&y.mixin(this,e)},toJson:function(){return h.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});
y.setObject("layers.LayerTimeOptions",b,a);return b})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(b,y,q,a,h,e,g,f){y=y(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,
layerTimeOptions:null,toJson:function(m){this.bbox&&b.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var l=this.bbox||this.extent;l=l&&m&&l._normalize(!0);m=this.layerOption;var d=l?l.spatialReference.wkid||a.toJson(l.spatialReference.toJson()):null,c=this.imageSpatialReference;l={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:l?l.xmin+","+l.ymin+","+l.xmax+","+l.ymax:
null,bboxSR:d,layers:m?m+":"+this.layerIds.join(","):null,imageSR:c?c.wkid||a.toJson(c.toJson()):d};l.layerDefs=f._serializeLayerDefinitions(this.layerDefinitions);m=this.timeExtent;l.time=m?m.toJson().join(","):null;l.layerTimeOptions=f._serializeTimeOptions(this.layerTimeOptions);return g.filter(l,function(k){if(null!==k)return!0})}});q.mixin(y,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});q.setObject("layers.ImageParameters",
y,e);return y})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(b,y,q,a,h,e,g,f){b=b(e,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(m){m&&(m.source?m="mapLayer"===m.source.type?new g(m.source):new f(m.source):(m=new g,m.mapLayerId=this.id),this.source=m)},toJson:function(){var m=this.inherited(arguments);
m.source=this.source&&this.source.toJson();return h.fixJson(m)}});y.setObject("layers.DynamicLayerInfo",b,a);return b})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(b,y,q,a,h,e){b=b(e,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return h.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});y.setObject("layers.LayerMapSource",b,a);return b})},
"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(h){h&&y.mixin(this,h)},toJson:function(){}});y.setObject("layers.LayerSource",b,a);return b})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),
function(b,y,q,a,h,e,g,f,m,l){b=b(e,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(d){if(d&&d.dataSource){switch(d.dataSource.type){case "table":d=new g(d.dataSource);break;case "queryTable":d=new f(d.dataSource);break;case "joinTable":d=new m(d.dataSource);break;case "raster":d=new l(d.dataSource);break;default:d=d.dataSource}this.dataSource=d}},toJson:function(){var d={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return h.fixJson(d)}});
y.setObject("layers.LayerDataSource",b,a);return b})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(b,y,q,a,h,e){b=b(e,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return h.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});y.setObject("layers.TableDataSource",b,a);return b})},"esri/layers/DataSource":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.layers.DataSource",constructor:function(h){h&&y.mixin(this,h)},toJson:function(){}});y.setObject("layers.DataSource",b,a);return b})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(b,y,q,a,h,e,g){b=b(e,{declaredClass:"esri.layers.QueryDataSource",constructor:function(f){f&&(f.oidFields&&y.isString(f.oidFields)&&
(this.oidFields=f.oidFields.split(",")),f.spatialReference&&(this.spatialReference=new g(f.spatialReference)))},toJson:function(){var f={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var m="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?
"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;f.geometryType=m}return h.fixJson(f)}});y.setObject("layers.QueryDataSource",b,a);return b})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(b,y,q,a,h,e,g,f,m,l){var d=b(e,{declaredClass:"esri.layers.JoinDataSource",constructor:function(c){c&&
(c.leftTableSource&&(this.leftTableSource=this._createLayerSource(c.leftTableSource)),c.rightTableSource&&(this.rightTableSource=this._createLayerSource(c.rightTableSource)))},_createLayerSource:function(c){if("mapLayer"===c.type)var k=new g(c);else{k={type:"dataLayer"};switch(c.dataSource.type){case "table":var t=new f(c.dataSource);break;case "queryTable":t=new m(c.dataSource);break;case "joinTable":t=new d(c.dataSource);break;case "raster":t=new l(c.dataSource);break;default:t=c.dataSource}k.dataSource=
t;k.toJson=function(){var n={type:"dataLayer",dataSource:t.toJson()};return h.fixJson(n)}}return k},toJson:function(){var c={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var k="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;
c.joinType=k;return h.fixJson(c)}});y.setObject("layers.JoinDataSource",d,a);return d})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(b,y,q,a,h,e){b=b(e,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return h.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});y.setObject("layers.RasterDataSource",b,a);return b})},"arcgisonline/pages/getThumbnail":function(){define("require exports tslib dojo/Deferred dojo/_base/lang ../map/core/buildExportCall ../map/thumbnail/buildThumbnailURLFromKMLItem ../map/thumbnail/buildThumbnailURLFromFSItem ../map/thumbnail/createHiddenMap ../sharing/util ./utils/arrays".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d){function c(t,n,u){var x=new a.default;t=e.default(t,n,"4326",null,"800,532",null,"json",null,u||null);l.default.request({url:t},{addToken:!1}).then(function(A){x.resolve(A)},function(){x.resolve(l.default.getAbsoluteUrl("images/transparent.gif"))});return x}function k(t){return 2===(null===t||void 0===t?void 0:t.length)&&2===t[0].length&&2===t[1].length?Math.round(1E3*t[0][0])/1E3+","+Math.round(1E3*t[0][1])/1E3+","+Math.round(1E3*t[1][0])/1E3+","+Math.round(1E3*t[1][1])/
1E3:null}Object.defineProperty(y,"__esModule",{value:!0});a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);y.default=function(t,n){var u,x,A=new a.default,z=t.portal,E=z.getPortalUser();E=(null===E||void 0===E?0:E.token)?"?token\x3d"+E.token:"";var w=l.default.getAbsoluteUrl("images/transparent.gif"),D=l.default.getAbsoluteUrl("images/arcgis-transparent-background-div.png"),
r=l.default.getStaticImagesUrl(),v=t.itemUrl||t.url,B=t.itemDataUrl,C=t.serviceInfo||{},F=t.itemData||{},G=t.type.toLowerCase(),H=t.typeKeywords||[],J=-1===(null===(u=t.thumbnail)||void 0===u?void 0:u.indexOf("thumbnail/ago_downloaded."));u=d.default.includes(H,"Tiled Imagery");var I="image service"===G&&!u;n=n&&("Feature Service"===t.type&&!J||"Vector Tile Service"===t.type&&!J);J=h.default.isArray(t.extent)?k(t.extent):t.extent||"-180,-90,180,90";var K;t||A.resolve(D);t.thumbnail&&!n||"Image"===
t.type||t.thumbnailUrl&&!n?A.resolve(t.thumbnail?v+"/info/"+t.thumbnail+E:t.thumbnailUrl):t.isAdmin&&("image service"===G&&!u||"map service"===G)?"image service"!==G&&t.isHostedService?t.getSourceData().then(function(R){(K=null===R||void 0===R?void 0:R.thumbnailUrl)?(t.thumbnail=K,A.resolve(K)):(t.thumbnail=r+"/desktopapp.png",A.resolve(t.thumbnail))},function(){t.thumbnail=r+"/desktopapp.png";A.resolve(t.thumbnail)}):c(v,J,C).then(function(R){A.resolve(R&&R.href||D)}):t.isLocationTrackingService?
(t.thumbnail=r+"/locationtrackingservice.png",A.resolve(t.thumbnail)):t.isAdmin&&"feature service"===G?t.isTable?(t.thumbnail=r+"/desktopapp.png",A.resolve(t.thumbnail)):f.default(t,null,F.layers).then(function(R){A.resolve(R)},function(){A.resolve(w)}):"vector tile service"===G?(z=[[-180,-90],[180,90]],E=void 0,"string"===typeof t.extent?(E=t.extent.split(","),z=[[parseFloat(E[0]),parseFloat(E[1])],[parseFloat(E[2]),parseFloat(E[3])]]):0<(null===(x=t.extent)||void 0===x?void 0:x.length)&&(z=t.extent),
m.default({operationalLayers:[],baseMap:{baseMapLayers:[{id:t.id,type:"VectorTileLayer",layerType:"VectorTileLayer",title:t.title,styleUrl:t.itemUrl+"/resources/styles/root.json",visibility:!0,opacity:1}],title:"Topographic"},spatialReference:{wkid:102100,latestWkid:3857},authoringApp:"WebMapViewer",authoringAppVersion:"5.3",version:"2.10"},z,function(R){(R=R.layerIds.map(R.getLayer.bind(R)).shift())?R.takeScreenshot({format:"png",width:800,height:532}).then(function(W){(null===W||void 0===W?0:W.dataURL)?
A.resolve(W):A.resolve(w)},function(){A.resolve(w)}):A.resolve(w)},function(){return A.resolve(w)})):t.isAdmin&&"kml"===G?g.default(t).then(function(R){return A.resolve(R)}):"web mapping application"===G?A.resolve(r+"/webapp.png"):"mobile application"===G?A.resolve(r+"/mobileapp.png"):"image"===G?(x=2097134<t.size?l.default.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):B,A.resolve(x)):"workforce project"===G?A.resolve(r+"/workforceproject.png"):"hub initiative"===
G?A.resolve(r+"/hubinitiative.png"):"hub page"===G?A.resolve(r+"/hubpage.png"):"hub site application"===G?A.resolve(r+"/hubsite.png"):"hub event"===G?A.resolve(r+"/hubevent.png"):"dashboard"===G?(x=d.default.includes(H,"ArcGIS Dashboards"),A.resolve(r+(x?"/dashboards.png":"/opsdashboard.png"))):"geoprocessing service"===G&&(null===z||void 0===z?0:z.isPortal)?A.resolve(r+"/webtool.png"):"web scene"===G||"scene service"===G?A.resolve(r+"/scene.png"):"ortho mapping project"===G?A.resolve(r+"/orthomappingproject.png"):
"ortho mapping template"===G?A.resolve(r+"/orthomappingtemplate.png"):"insights theme"===G?A.resolve(r+"/insightstheme.png"):"solution"===G?A.resolve(r+"/solution.png"):"mobile scene package"===G?A.resolve(r+"/mobilescenepackage.png"):"deep learning package"===G?A.resolve(r+"/deeplearningpackage.png"):"big data analytic"===G?A.resolve(r+"/bigdataanalytic.png"):"real time analytic"===G?A.resolve(r+"/realtimeanalytic.png"):"feed"===G?A.resolve(r+"/feed.png"):"excalibur imagery project"===G?A.resolve(r+
"/excaliburimageryproject.png"):"notebook"===G?A.resolve(l.default.relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png")):"storymap"===G?A.resolve(r+"/storymap.png"):"survey123 add in"===G?A.resolve(r+"/survey123addin.png"):"mission"===G?A.resolve(r+"/mission.png"):"quickcapture project"===G?A.resolve(r+"/quickcaptureproject.png"):"pro report"===G?A.resolve(r+"/proreport.png"):"urban model"===G?A.resolve(r+"/urbanmodel.png"):"web experience"===G?A.resolve(r+"/webexperience.png"):
"web experience template"===G?A.resolve(r+"/webexperiencetemplate.png"):"workflow"===G?A.resolve(r+"/workflow.png"):"insights script"===G?A.resolve(r+"/insightsscript.png"):"kernel gateway connection"===G?A.resolve(r+"/kernelgatewayconnection.png"):"hub initiative template"===G?A.resolve(r+"/hubinitiativetemplate.png"):u?A.resolve(r+"/tiledimagerylayer.png"):I?A.resolve(r+"/imagerylayer.png"):"mission report"===G?A.resolve(r+"/missionreport.png"):"administrative report"===G?A.resolve(r+"/administrativereport.png"):
"storymap theme"===G?A.resolve(r+"/storymaptheme.png"):"knowledge graph service"===G?A.resolve(r+"/knowledgegraph.png"):A.resolve(r+"/desktopapp.png");return A}})},"arcgisonline/map/core/buildExportCall":function(){define([],function(){return function(b,y,q,a,h,e,g,f,m){if(!f&&-1<b.indexOf("/MapServer/")){e=b.indexOf("/MapServer/");var l=b.indexOf("?");-1<l?(f=b.substring(e+11,l),b=b.substring(0,e+10)+b.substring(l)):(f=b.substring(e+11),b=b.substring(0,e+10))}l=-1<b.indexOf("/MapServer");!l&&m&&
(l=m.capabilities?-1<m.capabilities.toLowerCase().indexOf("map"):m.supportedImageFormatTypes);e=b.indexOf("?");if(-1==e)if(l)b+="/export?";else{if("undefined"!==typeof m.currentVersion&&10.1<=m.currentVersion)return b+"/info/thumbnail";b+="/exportImage?"}else if(l)b=b.substring(0,e)+"/export"+b.substring(e,b.length)+"\x26";else{if("undefined"!==typeof m.currentVersion&&10.1<=m.currentVersion)return b=b.substring(0,e)+"/info/thumbnail"+b.substring(e,b.length);b=b.substring(0,e)+"/exportImage"+b.substring(e,
b.length)+"\x26"}b+="size\x3d"+h+"\x26bbox\x3d"+y;null!==q&&0<q.length&&(b+="\x26bboxSR\x3d"+q);null!==a&&0<a.length&&(b+="\x26imageSR\x3d"+a);b=l&&m&&m.supportedImageFormatTypes&&-1<m.supportedImageFormatTypes.indexOf("PNG32")?b+("\x26format\x3dpng32\x26f\x3d"+g):l?b+("\x26format\x3dpng24\x26f\x3d"+g):b+("\x26format\x3djpgpng\x26f\x3d"+g);l?null!==f&&0<f.length&&(b+="\x26layers\x3dshow:"+f):b+="\x26interpolation\x3dRSP_NearestNeighbor\x26bandIds\x3dnull";return b}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromKMLItem":function(){define("dojo/Deferred dojo/_base/url dojo/_base/lang arcgisonline/sharing/util esri/SpatialReference arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap".split(" "),
function(b,y,q,a,h,e){var g=window.esriGeowConfig;return function(f,m){var l={};l.baseMap=g.defaultBasemap||g.self.defaultBasemap;l.baseMap.title="basemap";l.operationalLayers=[];var d=f.url;d||"KML"!==f.type||(d=g.restBaseUrl+"content/items/"+f.id+"/data");var c=(new y(g.restBaseUrl)).authority;-1<d.indexOf(c)&&(c=a.getToken())&&(d+="?token\x3d"+c);l.operationalLayers.push({url:d,id:"KML_"+Math.random(),opacity:1,title:f.title,visibility:!0,type:"KML"});var k=new b;m||("string"==typeof f.extent?
(f=f.extent.split(","),m=[[parseFloat(f[0]),parseFloat(f[1])],[parseFloat(f[2]),parseFloat(f[3])]]):m=f.extent&&0<f.extent.length?f.extent:[[-180,-90],[180,90]]);e(l,m,new h({wkid:4326}),q.hitch(this,function(t){k.resolve(t)}),q.hitch(this,function(t){k.reject(t)}));return k}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap":function(){define(["dojo/json","dojo/_base/lang","dojo/_base/array","esri/tasks/Geoprocessor"],function(b,y,q,a){var h=window.esriGeowConfig;return function(e,g,
f,m,l){e=y.clone(e);q.forEach(e.baseMap.baseMapLayers,function(d){delete d.resourceInfo});e.mapOptions={showAttribution:!1,extent:{xmin:g[0][0],ymin:g[0][1],xmax:g[1][0],ymax:g[1][1],spatialReference:{wkid:4326}},spatialReference:f};e.exportOptions={dpi:96,outputSize:[600,400]};e.layoutOptions={};g=new a(h.self.helperServices.printTask.url);f={Web_Map_as_JSON:b.stringify(e),Format:"PNG32",Layout_Template:"MAP_ONLY"};g.execute(f).then(y.hitch(this,function(d){if(d){for(var c=!1,k=0;k<d.length;k++)if("Output_File"==
d[k].paramName){m(d[k].value.url);c=!0;break}!c&&l&&l()}else l&&l()}),y.hitch(this,function(d){l&&l()}))}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromFSItem":function(){define("dojo/on dojo/Deferred dojo/DeferredList dojo/_base/connect dojo/_base/array dojo/_base/lang esri/kernel esri/layers/FeatureLayer esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap arcgisonline/map/thumbnail/getExtentWithFeatures arcgisonline/map/thumbnail/getItemData arcgisonline/map/layer/getServiceInfo".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t){return function(n,u,x){var A={};A.baseMap=e.clone(esriGeowConfig.defaultBasemap||esriGeowConfig.self.defaultBasemap);A.baseMap.title="basemap";for(var z=A.baseMap.baseMapLayers.length,E=!1===n.itemData?{}:n.itemData,w=0;w<z;w++){var D=A.baseMap.baseMapLayers[w];if(!D.isReference){!esriGeowConfig.allSSL&&"https:"!=location.protocol||!l.isHostedService(D.url)&&!l.supportsHttps(D.url)||(D.url=D.url.replace("http:","https:"));D.visibility=!1;A.baseMap.baseMapLayers=
[D];break}}A.operationalLayers=[];var r=new y;z=function(v,B){B?v&&h.forEach(v,function(F){h.forEach(B,function(G,H){G.id===F.id&&(G[H]=F)})}):B=[];v=function(F,G){G=F&&F.layers||[];for(F=G.length-1;0<=F;F--){var H=G[F],J=g.id.findCredential(l.urlToObject(n.url).path);J={url:n.url+"/"+H.id+(J?"?token\x3d"+J.token:""),id:(n.id||Math.random())+"_"+H.id,opacity:1,title:(n.title||"title")+"_"+H.id,visibility:!0};for(var I=!1,K=0;K<G.length;K++)if(G[K].id===H.id){I=!0;J.layerDefinition=G[K].layerDefinition;
break}(!G.length||G.length&&I)&&A.operationalLayers.push(J)}var R=function(aa){r.resolve(aa)},W=function(aa){r.reject(aa)},P=[[-180,-90],[180,90]];"string"==typeof n.extent?(F=n.extent.split(","),P=[[parseFloat(F[0]),parseFloat(F[1])],[parseFloat(F[2]),parseFloat(F[3])]]):n.extent&&0<n.extent.length&&(P=n.extent);if(1===A.operationalLayers.length)J=new f(A.operationalLayers[0].url),b(J,"load",e.hitch(this,function(aa){aa.layer&&(aa=aa.layer);c({layer:aa},u||P).then(e.hitch(this,function(ba,O){d(ba,
O,e.hitch(this,R),e.hitch(this,W))},A))}));else{F=u||n.extent;P=new m(F[0][0],F[0][1],F[1][0],F[1][1]);var S=function(aa,ba){var O=20015077/180,V=g.config.defaults,X=g.WKIDUnitConversion,N=aa.spatialReference;if(N){var Y=N.wkid;var ia=N.wkt}N=null;Y?N=X.values[X[Y]]:ia&&-1!==ia.search(/^PROJCS/i)&&(X=/UNIT\[([^\]]+)\]\]$/i.exec(ia))&&X[1]&&(N=parseFloat(X[1].split(",")[1]));return aa.getWidth()/ba*(N||O)*39.37*V.screenDPI}(P,200),L=[];G=[];for(F=0;F<A.operationalLayers.length;F++)J=A.operationalLayers[F],
H=new y,G.push(H),J=new f(J.url),L.push(J),a.connect(J,"onLoad",e.hitch(this,function(aa,ba){ba.minScale<=S&&ba.maxScale>S?aa.resolve(!0):aa.resolve(!1)},H));(new q(G)).addCallback(function(aa){for(var ba=!1,O=0;O<aa.length;O++)if(!0===aa[O][1]){ba=!0;break}ba?d(A,u||n.extent,e.hitch(this,R),e.hitch(this,W)):c({layer:L[L.length-1]},u||n.extent).then(e.hitch(this,function(V,X){d(V,X,e.hitch(this,R),e.hitch(this,W))},A))})}};var C=function(F){r.reject(F)};n.serviceInfo?v(n.serviceInfo):t(n.url,"",e.hitch(this,
v),e.hitch(this,C))};x?E?z(x,E):k(n.id,e.hitch(this,z,x),e.hitch(this,z)):n.id?E?z(null,E):k(n.id,e.hitch(this,z,null),e.hitch(this,z)):z();return r}})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(b,y,q){b.DeferredList=function(a,h,e,g,f){var m=[];y.call(this);var l=this;0!==a.length||h||this.resolve([0,[]]);var d=0;q.forEach(a,function(c,k){function t(n,u){m[k]=[n,u];d++;d===a.length&&l.resolve(m)}c.then(function(n){h?l.resolve([k,n]):t(!0,
n)},function(n){e?l.reject(n):t(!1,n);if(g)return null;throw n;})})};b.DeferredList.prototype=new y;b.DeferredList.prototype.gatherResults=function(a){a=new b.DeferredList(a,!1,!0,!1);a.addCallback(function(h){var e=[];q.forEach(h,function(g){e.push(g[1])});return e});return a};return b.DeferredList})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureSubtype ./FeatureEditResult ./LabelClass ./support/domainUtils ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi ./agscommon".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B,C,F,G,H,J,I,K,R,W,P,S,L,aa,ba,O,V,X,N,Y,ia,oa,sa,Ba,Da,pa,ra,ya,wa,la,Aa,da,fa,Q,xa,Fa){var ca=E.defaults,Sa=!!u("esri-pbf"),Qa=!!u("esri-featurelayer-pbf"),va=q(X,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reSQLCurrentTimestamp:/current_timestamp|current_date|current_time/i,reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,
maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error",
"info"]},constructor:function(T,ja){this._preventInit||this._initFeatureLayer(T,ja)},_initFeatureLayer:function(T,ja){ja=ja||{};this._tileWidth=ja.tileWidth||512;this._tileHeight=ja.tileHeight||512;this.i18n=Fa;this._featureReduction=this._featureReduction||ja.featureReduction;this._featureReductionEnabled=null!=ja.featureReductionEnabled?ja.featureReductionEnabled:!0;this._featureUpdatesCheckEnabled=null!=ja.featureUpdatesCheckEnabled?ja.featureUpdatesCheckEnabled:!0;this.showLabels=null!=ja.showLabels?
ja.showLabels:!0;this._outFields=ja.outFields;this._defnExpr=ja.definitionExpression;this._loadCallback=ja.loadCallback;this._trackIdField=ja.trackIdField;this.objectIdField=ja.objectIdField;var ka=null!=ja.resolution,U=null!=ja.maxAllowableOffset;this._maxOffset=this._optMaxOffset=ka||U?ka?ja.resolution:ja.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=ja.quantize?ja.quantize:!0;this._optEditable=ja.editable;this._optAutoGen=ja.autoGeneralize;this.editSummaryCallback=ja.editSummaryCallback;
this.userId=ja.userId;this.userIsAdmin=ja.userIsAdmin;this.useMapTime=ja.hasOwnProperty("useMapTime")?!!ja.useMapTime:!0;this.source=ja.source;this.gdbVersion=ja.gdbVersion;this.orderByFields=ja.orderByFields;this.maxPointCountForAuto=null!=ja.maxPointCountForAuto?ja.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=ja.maxRecordCountForAuto?ja.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=ja.maxVertexCountForAuto?ja.maxVertexCountForAuto:
this.maxVertexCountForAuto;this.generalizeForScale=null!=ja.generalizeForScale?ja.generalizeForScale:this.generalizeForScale;this.queryPagination=this._optQueryPagination=null!=ja.queryPagination?ja.queryPagination:!0;this.multipatchOption=ja.multipatchOption;this.subtypeSublayerInfo=ja.subtypeSublayerInfo;this._selectedFeatures={};this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();ka=A.isDefined(ja.mode)?ja.mode:va.MODE_ONDEMAND;this._isStream&&(ka=va.MODE_STREAM);this.mode=
ka;switch(ka){case va.MODE_SNAPSHOT:this.currentMode=va.MODE_SNAPSHOT;this._mode=new ya(this);break;case va.MODE_ONDEMAND:case va.MODE_AUTO:this.currentMode=va.MODE_ONDEMAND;this._mode=new wa(this);this.latticeTiling=ja.latticeTiling;break;case va.MODE_SELECTION:this.currentMode=va.MODE_SELECTION;this._mode=new la(this);this._isSelOnly=!0;break;case va.MODE_STREAM:this.currentMode=va.MODE_STREAM,this._mode=new Aa(this),this._isStream=!0}this._initLayer=h.hitch(this,this._initLayer);this._selectHandler=
h.hitch(this,this._selectHandler);this._editable=!1;if(h.isObject(T)&&T.layerDefinition)return this._collection=!0,this.mode=this._isStream?va.MODE_STREAM:va.MODE_SNAPSHOT,this._isStream||this._outFields||(this._outFields=["*"]),this._initLayer(T),this;this.source&&(T={source:this.source.toJson()},this._url.query=h.mixin(this._url.query,{layer:g.toJson(T)}));this.gdbVersion&&(this._url.query=h.mixin(this._url.query,{gdbVersion:this.gdbVersion}));this._task=new W(this.url,{source:this.source,gdbVersion:this.gdbVersion});
T=this._url.path;this._fserver=!1;-1!==T.search(/\/FeatureServer\//i)&&(this._fserver=!0);this._checkFeatureLimit();(ja=ja.resourceInfo)?this._initLayer(ja):z({url:T,content:h.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},_initLayer:function(T,ja){if(T||ja){this._json=T;ja=this.subtypeSublayerInfo;this._findCredential();if(this.credential&&this.credential.ssl||T&&T._ssl)this._useSSL(),this._task._useSSL();
this._collection&&(this._isStream||(this.currentMode=va.MODE_SNAPSHOT,this._mode=new ya(this)),this._featureSet=T.featureSet,this._nextId=T.nextObjectId,T=T.layerDefinition);this.version=T.currentVersion;this.version||(this.version="capabilities"in T||"drawingInfo"in T||"hasAttachments"in T||"htmlPopupType"in T||"relationships"in T||"timeInfo"in T||"typeIdField"in T||"types"in T?10:9.3);this.geometryType=T.geometryType;T.bandCount&&T.fields&&1<T.fields.length&&(this.geometryType="esriGeometryPolygon",
this._isImageService=!0);"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption="xyFootprint");if(T.hasOwnProperty("capabilities")){var ka=this.capabilities=T.capabilities;ka&&-1!==ka.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);A.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=
!1);this._isImageService&&(this._editable=!1);this._json=g.toJson(this._json);this.isEditable()?this._setMaxOffset(null):this._canAutoGeneralize()&&(this._autoGeneralize=A.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===va.MODE_ONDEMAND||this.mode===va.MODE_AUTO,delete this._optAutoGen);ka=T.effectiveMinScale||T.minScale;var U=T.effectiveMaxScale||T.maxScale;!this._hasMin&&ka&&this.setMinScale(ka);!this._hasMax&&U&&this.setMaxScale(U);this.layerId=T.id;this.name=ja&&ja.title||T.name;this.description=
T.description;this.copyright=T.copyrightText;this.type=T.type;this.displayField=T.displayField;this.defaultDefinitionExpression=T.definitionExpression||(T.isView?T.viewDefinitionQuery:T.definitionQuery);this.fullExtent=new aa(T.extent);this.initialExtent=new aa(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new r(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=T.defaultVisibility;this.editingInfo=T.editingInfo;this.supportsLastEditDate=!(!this.editingInfo||
null==this.editingInfo.lastEditDate);if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=T.hasM||!1;this.hasZ=T.hasZ||!1;this.indexedFields=T.indexedFields;this.indexes=T.indexes;this.maxRecordCount=T.maxRecordCount;this.canModifyLayer=T.canModifyLayer;this.supportsStatistics=T.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:T.supportsAdvancedQueries;this.supportsCalculate=T.supportsCalculate;this.supportsASyncCalculate=
T.supportsASyncCalculate;this.supportsAttachmentsByUploadId=T.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=T.supportsCoordinatesQuantization;this.supportsQuantizationEditMode=T.supportsQuantizationEditMode;this.supportsFieldDescription=T.supportsFieldDescriptionProperty;this.supportsFormatPBF=T.supportedQueryFormats?-1!==e.map(T.supportedQueryFormats.toLowerCase().split(","),h.trim).indexOf("pbf"):!1;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=
T.hasLabels;this.canScaleSymbols=T.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=T.supportsRollbackOnFailure;this.syncCanReturnChanges=T.syncCanReturnChanges;this.isDataVersioned=T.isDataVersioned;this.editFieldsInfo=T.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=T.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=T.relationships;
this.allowGeometryUpdates=A.isDefined(T.allowGeometryUpdates)?T.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!T.allowUpdateWithoutMValues;this.enableZDefaults=!!T.enableZDefaults;this.zDefault=A.isDefined(T.zDefault)?T.zDefault:null;this.advancedQueryCapabilities=T.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.geometryProperties=T.hasGeometryProperties&&T.geometryProperties||
null;this.url&&(this.advancedQueryCapabilities.supportsPagination=this.advancedQueryCapabilities.supportsPagination&&(this.reHostedFS.test(this.url)||10.3<this.version));this.queryPagination=this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination;this.useStandardizedQueries=T.useStandardizedQueries;this.tileMaxRecordCount=T.tileMaxRecordCount;this.standardMaxRecordCount=T.standardMaxRecordCount;if(ka=T.dateFieldsTimeReference)this.dateFieldsTimeReference=new ia(ka);this._setMaxOffset(this._maxOffset,
!0);this._isTable="Table"===this.type;U=T.fields;this._createFields(U);if(!this.objectIdField&&(this.objectIdField=T.objectIdField,!this.objectIdField))for(U=T.fields,ka=0;ka<U.length;ka++){var ha=U[ka];if("esriFieldTypeOID"===ha.type){this.objectIdField=ha.name;break}}if(!A.isDefined(this._nextId)){U=this.objectIdField;ha=-1;if(this._collection&&U){var na=(ka=this._featureSet)&&ka.features,qa=na?na.length:0;for(ka=0;ka<qa;ka++){var ua=(ua=na[ka].attributes)&&ua[U];ua>ha&&(ha=ua)}}this._nextId=ha+
1}this.globalIdField=T.globalIdField;if(ka=this.typeIdField=T.typeIdField)if(ka=!this._getField(ka)&&this._getField(ka,!0))this.typeIdField=ka.name;this.visibilityField=T.visibilityField;if(U=T.defaultSymbol)this.defaultSymbol=G.fromJson(U);var za=this.types=[],Ea=T.types;ha=(ka=this.editFieldsInfo)&&ka.creatorField;na=ka&&ka.editorField;ua=ha||na;qa=[];if(Ea)for(ka=0;ka<Ea.length;ka++){var Pa=new oa(Ea[ka]);var Oa=Pa.templates;ua&&Oa&&Oa.length&&(qa=qa.concat(Oa));za.push(Pa)}Ea=T.templates;Pa=this.templates=
[];if(Ea)for(ka=0;ka<Ea.length;ka++)za=new sa(Ea[ka]),ua&&qa.push(za),Pa.push(za);for(ka=0;ka<qa.length;ka++)if(ua=h.getObject("prototype.attributes",!1,qa[ka]))ha&&delete ua[ha],na&&delete ua[na];if(ka=T.subtypeField)this.subtypeField=(ka=this.getField(ka))?ka.name:null;this.defaultSubtypeCode=T.defaultSubtypeCode;this.subtypes=e.map(T.subtypes,function(fb){return new Ba(fb)});this._applySTSublayerInfo(ja);if(ja=T.timeInfo)this.timeInfo=new Y(ja),this._startTimeField=ja.startTimeField,this._endTimeField=
ja.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?ja.trackIdField=this._trackIdField:this._trackIdField=ja.trackIdField;this.hasAttachments=!this._collection&&T.hasAttachments?!0:!1;this.htmlPopupType=T.htmlPopupType;ja=T.drawingInfo;(ka=ja&&ja.labelingInfo)&&!this.labelingInfo&&(this.labelingInfo=e.map(ka,function(fb){return new pa(fb)}),this._fixLabelExpr());if(!this.renderer)if(ja&&ja.renderer){var Ha=ja.renderer;this.setRenderer(I.fromJson(Ha,
{geometryType:this.geometryType}));"classBreaks"===Ha.type&&this.renderer.setMaxInclusive(!0);if(!this._collection){var Ua=Ha.type;ka=[];Ha=this.renderer;switch(Ua){case "simple":ka.push(Ha.symbol);break;case "uniqueValue":case "classBreaks":ka.push(Ha.defaultSymbol),ka=ka.concat(e.map(Ha.infos,function(fb){return fb.symbol}))}ka=e.filter(ka,A.isDefined);var bb=this._url.path+"/images/",ab=this._getToken();e.forEach(ka,function(fb){var kb=fb.url;kb&&(-1===kb.search(/https?:/)&&-1===kb.indexOf("data:")&&
(fb.url=bb+kb),ab&&-1!==fb.url.search(/https?:/)&&(fb.url+="?token\x3d"+ab))})}}else if(U)Ea=this.types,0<Ea.length?(Ha=new J(this.defaultSymbol,this.typeIdField),e.forEach(Ea,function(fb){Ha.addValue(fb.id,fb.symbol)})):Ha=new H(this.defaultSymbol),this.setRenderer(Ha);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":Ua=new B;break;case "esriGeometryPolyline":Ua=new C;break;case "esriGeometryPolygon":Ua=new F;break;default:this.hasXYFootprint()&&
(Ua=new F)}this.setRenderer(Ua?new H(Ua):null)}Ua=ja&&ja.transparency||0;!this.hasOwnProperty("opacity")&&0<Ua&&(this.opacity=1-Ua/100);(u("ie")||7<=u("trident")||u("safari"))&&this.isEditable()&&10.02>this.version&&(this._ts=!0);this.statistics=T.statistics;this._fixRendererFields();this._updateRequiredFieldsFromLabelingInfo();this._checkFields();this._updateCaps();var gb=function(){null==this._maxOffset||this._isFractionalOffsetAllowed()||this._setMaxOffset(this._maxOffset);this.loaded=!0;this.setFeatureReduction(this.getFeatureReduction());
this.currentMode!==va.MODE_SNAPSHOT&&(this.queryPagination=!1);this.onLoad(this);var fb=this._loadCallback;fb&&(delete this._loadCallback,fb(this))};T=[];this._collection?(Ua=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new S(Ua)),this._fcAdded=!0):(T.push(this._forceIdentity()),this._limitPromise&&T.push(this._limitPromise));T.push(this._evalArcadeSupport());T.length?D(T).then(h.hitch(this,function(){gb.call(this)})):gb.call(this)}},_applySTSublayerInfo:function(T){T&&this.subtypeField&&
(this.subtypeCode=T.subtypeCode,this._applySTSublayerDefinitionExpression(T),this._filterSubtypes(T),this._applySTTemplates(T),this._applySTFieldOverrides(T))},_applySTSublayerDefinitionExpression:function(T){var ja=[],ka=this.getDefinitionExpression();ka&&ja.push(ka);ja.push(this.subtypeField+" \x3d "+this.subtypeCode);(T=T.layerDefinition&&T.layerDefinition.definitionExpression)&&ja.push(T);ja=e.map(ja,function(U){return"("+U+")"});this.setDefinitionExpression(ja.join(" AND "))},_applySTTemplates:function(T){if(T=
T.layerDefinition&&T.layerDefinition.templates)this.templates=e.map(T,function(ja){return new sa(ja)})},_filterSubtypes:function(){this.subtypes&&(this.subtypes=e.filter(this.subtypes,function(T){return T.code===this.subtypeCode},this))},_applySTFieldOverrides:function(T){var ja=T.layerDefinition&&T.layerDefinition.fieldOverrides;if(ja){this.fields=e.filter(this.fields,function(U){return e.some(ja,function(ha){return ha.name===U.name})});var ka=this.getSubtypeByCode(this.subtypeCode).domains;this.fields.forEach(function(U){var ha=
e.filter(ja,function(na){return na.name===U.name})[0];ha.alias&&(U.alias=ha.alias);if(!1===ha.editable||U.name===this.subtypeField)U.editable=!1;ka&&(ha=ka[U.name])&&"inherited"!==ha.type&&(U.domain=ra.fromJson(ha.toJson()))},this)}},setShowLabels:function(T){var ja=this.showLabels;this.showLabels=T;ja!==this.showLabels&&(this._evalSurfaceType(),this.onShowLabelsChange())},onShowLabelsChange:function(){},onRendererChange:function(T){this.inherited(arguments);var ja=this._map;this._ager=!!(T&&T.observationAger&&
T.observationRenderer);T&&"colors"in T&&"blurRadius"in T&&"maxPixelIntensity"in T?(this._evalSurfaceType(!0),"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&ja&&(this._heatmapManager=new Q(this),this._heatmapManager.initialize(ja))):this.renderer&&this.renderer.getRendererInfo?e.some(this.renderer.rendererInfos,function(ha){return ha.renderer&&"colors"in ha.renderer&&"blurRadius"in ha.renderer})||(this._heatmapManager=null):this._heatmapManager=null;this.timeInfo&&ja&&(T&&(T.latestObservationRenderer||
T.trackRenderer)?this._trackManager||(this._trackManager=new fa(this),this._trackManager.initialize(ja),this._childLayer=this._trackManager.container,this._mode._applyTimeFilter()):this._trackManager&&!this._isStream&&(this._trackManager.destroy(),this._trackManager=null));if(T){var ka=[];ja=e.filter([T,T.observationRenderer,T.latestObservationRenderer,T.trackRenderer],A.isDefined);var U=function(ha){return null!=ha&&"function"!=typeof ha&&ha};e.forEach(ja,function(ha){var na=U(ha.attributeField),
qa=U(ha.attributeField2);ha=U(ha.attributeField3);!1!==na&&ka.push(na);!1!==qa&&ka.push(qa);!1!==ha&&ka.push(ha)});this._requiredFields=ka}else this._requiredFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._requiredFields),this._collection&&(this._typesDirty=!0))},setFeatureReduction:function(T){T&&(T=h.mixin({},T),null!=T.clusterSize&&null==T.clusterRadius&&(T.clusterRadius=T.clusterSize),delete T.clusterSize);this.loaded?this._isFeatureReductionSupported(T)?this._featureReduction=
T:this._featureReduction=null:this._featureReduction=T;this._evalFeatureReduction(this._featureReduction)},hasFeatureReduction:function(){return!!this._featureReduction},getFeatureReduction:function(){var T=this._featureReduction;if(T){T=h.mixin({},T);var ja=this._clusterManager;if(ja=ja&&ja.aggregationInfo)T.clusterRadius=ja.clusterRadius,T.infoTemplate=ja.infoTemplate}return T},isFeatureReductionActive:function(){var T=this._clusterManager;return!!(T&&T.isClusteringEnabled()&&T.isClusteringActive())},
isFeatureReductionEnabled:function(){return this._featureReductionEnabled},enableFeatureReduction:function(){this._featureReductionEnabled||(this._featureReductionEnabled=!0,this._evalFeatureReduction(this._featureReduction))},disableFeatureReduction:function(){this._featureReductionEnabled&&(this._featureReductionEnabled=!1,this._evalFeatureReduction(this._featureReduction))},isFeatureReductionApplied:function(){return this.hasFeatureReduction()&&this.isFeatureReductionEnabled()&&this._canCluster(this.getFeatureReduction())},
getAggregateGraphics:function(){return this._clusterManager?this._clusterManager.getAggregateGraphics():[]},getChildGraphics:function(T){return this._clusterManager?this._clusterManager.getFeaturesInCluster(T):[]},getSingleGraphics:function(){return this._clusterManager?this._clusterManager.getSingleGraphics():[]},getFeatureReductionRenderer:function(){return this.isFeatureReductionActive()?this._clusterManager.getClusterRenderer():null},getFeatureReductionLayer:function(){return this._clusterManager?
this._clusterManager.container:null},getFeatureReductionField:function(T){var ja,ka=this._clusterManager?this._clusterManager.getClusterFields():null;T=T?T.toLowerCase():"";e.some(ka,function(U){T===U.name.toLowerCase()&&(ja=U);return!!ja});return ja},_isFeatureReductionSupported:function(T){return T&&"cluster"===T.type&&"esriGeometryPoint"===this.geometryType&&(this._collection||this._isStream||this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination)},_isReductionCompatibleRenderer:function(T){T=
T&&T.declaredClass||"";T=T.toLowerCase();return-1<T.indexOf("simplerenderer")||-1<T.indexOf("classbreaksrenderer")||-1<T.indexOf("uniquevaluerenderer")},_evalFeatureReduction:function(T){this.loaded&&this.getMap()&&(T=T||this.getFeatureReduction(),this._evalModeFromFReduction(T),T&&this.isFeatureReductionEnabled()?this._canCluster(T)?this._clusterManager?this._updateClusterManager(T):(this._clusterManager=this._createClusterManager(T),this.onFeatureReductionChange()):this._destroyClusterManager():
this._destroyClusterManager())},_canCluster:function(T){var ja=this._map;if(!ja)return!1;ja=ja.spatialReference;return this._isFeatureReductionSupported(T)&&this._isReductionCompatibleRenderer(this.renderer)&&(ja.isWebMercator()||4326===ja.wkid)},_createClusterManager:function(T){T=new xa({layer:this,aggregationInfo:T});this._clusterHandles=[T.on("renderer-change",h.hitch(this,function(){this.onFeatureReductionRendererChange()}))];T.initialize(this._map);return T},_updateClusterManager:function(T){var ja=
this._clusterManager;ja&&ja.setAggregationInfo(T)},_destroyClusterManager:function(T){e.forEach(this._clusterHandles,function(ja){ja.remove()});this._clusterHandles=null;this._clusterManager&&(this._clusterManager.destroy(T),this._clusterManager=null,this.onFeatureReductionChange())},redraw:function(){this.inherited(arguments);this._clusterManager&&this._clusterManager.redraw();this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(T){this.inherited(arguments);
var ja=this._getRenderer();this._ager=!!(ja&&ja.observationAger&&ja.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(ja&&ja.trackRenderer);T&&this._evalFeatureReduction()},_graphicVisibilityChanged:function(T){this._clusterManager?this._clusterManager.toggleFeatureVisibility(T):this._heatmapManager&&this._heatmapManager.redraw()},setWebGLFetchOptions:function(T){this._hasOnDemandDrillMode()&&(T=T||{},null!=T.maxDrillLevel&&(this._mode.maxDrillLevel=
T.maxDrillLevel),null!=T.maxRecordCountFactor&&(this._mode.maxRecordCountFactor=T.maxRecordCountFactor),null!=T.enablePBFQuery&&(this._mode.enablePBFQuery=T.enablePBFQuery))},_isWebGLCompatible:function(){return this.loaded&&!this.isEditable()&&!this.isFeatureReductionApplied()&&(!this.labelingInfo||!1===this.showLabels)&&!this._isGeometryOperationsUsed()&&this._isRendererSupportedInWebGL()&&this.supportsCoordinatesQuantization&&("esriGeometryPolygon"!==this.geometryType||this.advancedQueryCapabilities.supportsReturningGeometryCentroid)&&
this.currentMode===va.MODE_ONDEMAND&&(!this._preSurfaceChangeState||this._preSurfaceChangeState.currentMode===va.MODE_ONDEMAND)},_isRendererSupportedInWebGL:function(){if(!this.renderer)return!1;var T=this.renderer,ja=T.declaredClass?T.declaredClass.toLowerCase():"";return(-1<ja.indexOf("simplerenderer")||-1<ja.indexOf("classbreaksrenderer")||-1<ja.indexOf("uniquevaluerenderer"))&&this._hasWebGLCompatibleSymbols(T)&&this._hasWebGLCompatibleVVs(T)},_hasWebGLCompatibleSymbols:function(T){T=this._getAllSymbolsInRenderer(T);
return!(this._hasSLSWithMarker(T)||this._hasIncompatibleSMSStyles(T)||this._hasGIFMarker(T))},_hasWebGLCompatibleVVs:function(T){return!e.some(T&&T.visualVariables,function(ja){var ka=ja.type;return("colorInfo"===ka||"opacityInfo"===ka)&&ja.stops&&8<ja.stops.length||"sizeInfo"===ka&&(ja.field||ja.valueExpression&&"$view.scale"!==ja.valueExpression||ja.expression&&"view.scale"!==ja.expression)&&ja.stops&&6<ja.stops.length?!0:!1})},_hasSLSWithMarker:function(T){return e.some(T,function(ja){return ja&&
"simplelinesymbol"===ja.type&&!!ja.marker})},_hasIncompatibleSMSStyles:function(T){var ja=void 0===u("ie")&&7==u("trident");return e.some(T,function(ka){return ka&&"simplemarkersymbol"===ka.type&&("triangle"===ka.style||"path"===ka.style&&ja)})},_hasGIFMarker:function(T){var ja=/\.gif$/,ka=/^image\/gif$/;return e.some(T,function(U){return U&&"picturemarkersymbol"===U.type?ja.test(U.url)||ka.test(U.contentType):!1})},_getAllSymbolsInRenderer:function(T){var ja=[];T&&(ja.push(T.symbol),ja.push(T.defaultSymbol),
e.forEach(T.infos,function(ka){ja.push(ka.symbol)}),ja=e.filter(ja,function(ka){return!!ka}));return ja},_setMap:function(T){var ja=this.inherited(arguments),ka=this._mode,U=this;ka&&T.loaded&&ka.initialize(T);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(ha){ha=ha.graphic.attributes;(ha=U._selectedFeatures[ha&&ha[U.objectIdField]])&&ha.attr("data-selected","")});return ja},_unsetMap:function(T){this._suspendImpl(!0);
this._destroyClusterManager(!1);this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);a.disconnect(this._zoomConnect);a.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this.inherited("_unsetMap",arguments)},onAttach:function(){this._evalModeFromSurface()},onRefreshTick:function(){this.isFeatureUpdatesCheckActive()&&this._evalFeatureUpdates()},refresh:function(T){!this._needsRefresh&&T&&T.scheduled&&this.isFeatureUpdatesCheckActive()||(this._needsRefresh=!1,
(T=this._mode)&&T.refresh())},setFeatureUpdatesCheckEnabled:function(T){this._featureUpdatesCheckEnabled=T},isFeatureUpdatesCheckEnabled:function(){return!!this._featureUpdatesCheckEnabled},isFeatureUpdatesCheckActive:function(){return this.supportsLastEditDate&&this.isFeatureUpdatesCheckEnabled()&&!!this.refreshInterval&&!!h.getObject("onFeatureUpdatesResult.after",!1,this)},hasFeatureUpdates:function(){var T=new f;if(!this.supportsLastEditDate)return T.reject(Error("FeatureLayer does not support supportsLastEditDate")),
T.promise;if(!this._fetchMetadataPromise||this._fetchMetadataPromise.isFulfilled())this._fetchMetadataPromise=z({url:this._url.path,content:h.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(h.hitch(this,function(ja){ja=ja.editingInfo.lastEditDate;var ka=this.editingInfo.lastEditDate!==ja;this.editingInfo.lastEditDate=ja;return ka}));this._fetchMetadataPromise.then(function(ja){T.isFulfilled()||T.resolve(ja)}).otherwise(function(ja){T.isFulfilled()||T.reject(ja)});return T.promise},
hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return e.filter(this._getOutFields(),function(T){return"*"===T||!!this._getField(T)},this)},getField:function(T){return this._getField(T,!0)},isOutField:function(T){T=this.getField(T);if(!T)return!1;var ja=this.getOutFields();return-1<e.indexOf(ja,"*")||-1<e.indexOf(ja,T.name)},getFieldLabel:function(T){var ja=this.infoTemplate;ja=ja&&ja.getFieldInfo&&ja.getFieldInfo(T);
T=h.isFunction(T)?null:this.getField(T);var ka=ja||T,U="";ka&&(U=ja&&ja.label||T&&T.alias||ka.name||ka.fieldName);return U},getDomain:function(T,ja){var ka,U,ha=(ja=ja&&ja.feature)&&this.typeIdField&&ja.attributes&&ja.attributes[this.typeIdField];null!=ha&&e.some(this.types,function(na){return na.id==ha?((ka=na.domains&&na.domains[T])&&"inherited"===ka.type&&(ka=this._getLayerDomain(T),U=!0),!0):!1},this);U||ka||(ka=this._getLayerDomain(T));return ka},_getLayerDomain:function(T){this._createFieldsIndex();
var ja=this._fieldsIndex;if(ja)return ja=ja.caseSensitive,(ja=ja.get(T))?ja.domain:null;var ka;e.some(this.fields,function(U){U.name===T&&(ka=U.domain);return!!ka});return ka},getType:function(T){return this.getTypeById(T&&this.typeIdField&&T.attributes&&T.attributes[this.typeIdField])},getTypeById:function(T){var ja;e.some(this.types,function(ka){ka.id==T&&(ja=ka);return!!ja});return ja},getSubtypeByCode:function(T){var ja;e.some(this.subtypes,function(ka){ka.code==T&&(ja=ka);return!!ja});return ja},
setEditable:function(T){if(!this._collection||this._isImageService)return this;if(!this.loaded)return this._optEditable=T,this;var ja=this._editable;this._editable=T;this._updateCaps();if(ja!==T)this.onCapabilitiesChange();return this},getEditCapabilities:function(T){var ja={canCreate:!1,canUpdate:!1,canDelete:!1,canUpdateGeometry:!1};if(!this.loaded||!this.isEditable())return ja;var ka=T&&T.feature;T=T&&T.userId||this.getUserId();var U=e.map(this.capabilities?this.capabilities.toLowerCase().split(","):
[],h.trim),ha=(ja=-1<e.indexOf(U,"editing"))&&-1<e.indexOf(U,"create"),na=ja&&-1<e.indexOf(U,"update");U=ja&&-1<e.indexOf(U,"delete");var qa=this.ownershipBasedAccessControlForFeatures,ua=this.editFieldsInfo,za=ua&&ua.creatorField;ua=ua&&ua.realm;ka=(ka=ka&&ka.attributes)&&za?ka[za]:void 0;var Ea=!!this.userIsAdmin;za=!qa||Ea||!(!qa.allowOthersToUpdate&&!qa.allowUpdateToOthers);var Pa=!qa||Ea||!(!qa.allowOthersToDelete&&!qa.allowDeleteToOthers),Oa=!qa||Ea||!qa.hasOwnProperty("allowAnonymousToUpdate")||
qa.allowAnonymousToUpdate;qa=!qa||Ea||!qa.hasOwnProperty("allowAnonymousToDelete")||qa.allowAnonymousToDelete;T&&ua&&(T=T+"@"+ua);if(Ea||ja&&!(ha||na||U))ha=na=U=!0;ja={canCreate:ha,canUpdate:na,canDelete:U,canUpdateGeometry:Ea||this.allowGeometryUpdates};T||(ja.canUpdate=ja.canUpdate&&Oa,ja.canDelete=ja.canDelete&&qa);null===ka?(ja.canUpdate=ja.canUpdate&&za,ja.canDelete=ja.canDelete&&Pa):""!==ka&&ka&&T.toLowerCase()!==ka.toLowerCase()&&(ja.canUpdate=ja.canUpdate&&za,ja.canDelete=ja.canDelete&&Pa);
return ja},getUserId:function(){var T;this.loaded&&(T=this.credential&&this.credential.userId||this.userId||"");return T},setUserIsAdmin:function(T){this.userIsAdmin=T},setEditSummaryCallback:function(T){this.editSummaryCallback=T},getEditSummary:function(T,ja,ka){ka=A.isDefined(ka)?ka:(new Date).getTime();var U="";ka=this.getEditInfo(T,ja,ka);(ja=ja&&ja.callback||this.editSummaryCallback)&&(ka=ja(T,ka)||"");if(h.isString(ka))U=ka;else{if(ka){T=ka.action;ja=ka.userId;var ha=ka.timeValue,na=0;T&&na++;
ja&&na++;A.isDefined(ha)&&na++;1<na&&(U=("edit"===T?"edit":"create")+(ja?"User":"")+(A.isDefined(ha)?ka.displayPattern:""))}U=U&&A.substitute(ka,this.i18n.layers.FeatureLayer[U])}return U},getEditInfo:function(T,ja,ka){if(this.loaded){ka=A.isDefined(ka)?ka:(new Date).getTime();ja=ja&&ja.action||"last";var U=this.editFieldsInfo,ha=U&&U.creatorField,na=U&&U.creationDateField,qa=U&&U.editorField;U=U&&U.editDateField;qa=(T=T&&T.attributes)&&qa?T[qa]:void 0;U=T&&U?T[U]:null;ha=this._getEditData(T&&ha?
T[ha]:void 0,T&&na?T[na]:null,ka);ka=this._getEditData(qa,U,ka);switch(ja){case "creation":var ua=ha;break;case "edit":ua=ka;break;case "last":ua=ka||ha}ua&&(ua.action=ua===ka?"edit":"creation");return ua}},_getEditData:function(T,ja,ka){if(A.isDefined(ja)){var U=ka-ja;var ha=0>U?"Full":6E4>U?"Seconds":12E4>U?"Minute":36E5>U?"Minutes":72E5>U?"Hour":864E5>U?"Hours":6048E5>U?"WeekDay":"Full"}if(void 0!==T||ha){var na=na||{};na.userId=T;ha&&(T=m.format,ka=new Date(ja),na.minutes=Math.floor(U/6E4),na.hours=
Math.floor(U/36E5),na.weekDay=T(ka,{datePattern:"EEEE",selector:"date"}),na.formattedDate=T(ka,{selector:"date"}),na.formattedTime=T(ka,{selector:"time"}),na.displayPattern=ha,na.timeValue=ja)}return na},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},isQueryable:function(){var T=e.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],h.trim);return this._isStream||this.userIsAdmin||this._collection||-1!==e.indexOf(T,"query")||-1!==e.indexOf(T,"catalog")},setResolution:function(T){return this.setMaxAllowableOffset(T)},
setMaxAllowableOffset:function(T){this.isEditable()||(this._optMaxOffset=T,this._setMaxOffset(T,!0));return this},_resetMaxAllowableOffset:function(){this.setMaxAllowableOffset(this._optMaxOffset);this._prevScale=null;this._refreshMaxAllowableOffset()},_refreshMaxAllowableOffset:function(){this._calcMaxOffsetForAutoSnapshot();this._updateMaxOffset();this._needsRefresh=!1},getResolution:function(){return this.getMaxAllowableOffset()},getMaxAllowableOffset:function(){var T=this._quantizationParameters?
this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:T},_setMaxOffset:function(T,ja){if(null==T)return delete this._maxOffset,delete this._quantizationParameters,this;this.quantize&&this.supportsCoordinatesQuantization?("esriGeometryPolyline"===this.geometryType?this._maxOffset=T:delete this._maxOffset,this._quantizationParameters=T?{mode:"view",originPosition:"upperLeft",tolerance:T,extent:this.fullExtent}:null):(this._isFractionalOffsetAllowed()&&ja||(T=Math.floor(T)),
isNaN(T)||0===T?delete this._maxOffset:this._maxOffset=T,delete this._quantizationParameters);return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(T){T=(T=T&&T.split("-"))&&T[0]&&T[0].toLowerCase();return-1!==e.indexOf(this._langsWithDot,T)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(T){this.loaded?this._canAutoGeneralize()&&
((this._autoGeneralize=T)?(this._isAutoSnapshotMode()&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)):this._optAutoGen=T;return this},_canAutoGeneralize:function(){return!this.isEditable()&&this.mode!==va.MODE_SNAPSHOT},setGDBVersion:function(T){this._collection||T===this.gdbVersion||!T&&!this.gdbVersion||(this.gdbVersion=T,this._task.gdbVersion=T,this._url.query=h.mixin(this._url.query,{gdbVersion:T}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange());
return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():!0},hasUpdateError:function(){return this._mode?this._mode.hasUpdateError():!1},setDefinitionExpression:function(T){this._defnExpr=T;this._hasPendingLimitQuery()||((T=this._checkFeatureLimit())?this._evalModeAndApplyDefnExpr(T):this._applyDefnExpr());return this},_applyDefnExpr:function(){var T=this._mode;T&&T.propertyChangeHandler(1)},_evalModeAndApplyDefnExpr:function(T){T.then(h.hitch(this,function(ja){ja&&(ja instanceof
Error||!ja.modeChanged)&&this._applyDefnExpr()}))},getDefinitionExpression:function(){return this._defnExpr},hasDefinitionExpressionWithCurrentTimestamp:function(){return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())},setTimeDefinition:function(T){this._isSnapshotMode()&&(this._timeDefn=T,(T=this._mode)&&T.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(T,ja){this._timeOffset=T;this._timeOffsetUnits=ja;(T=this._mode)&&
T.propertyChangeHandler(0);return this},setUseMapTime:function(T){this.useMapTime=T;this._toggleTime(!this.suspended);(T=this._mode)&&T.propertyChangeHandler(0)},selectFeatures:function(T,ja,ka,U){ja=ja||va.SELECTION_NEW;this._hasSelectionError=this._hasPartialSelectedFeatures=!1;T=this._getShallowClone(T);var ha=this._map,na=this,qa=w._fixDfd(new f(w._dfdCanceller));T.outFields=this.getOutFields();T.returnGeometry=!0;T.multipatchOption=this.multipatchOption;ha&&(T.outSpatialReference=new r(ha.spatialReference.toJson()));
if(!this._applyQueryFilters(T,!0)){var ua={features:[]};this._selectHandler(ua,ja,ka,U,qa);return qa}if(ha=this._canDoClientSideQuery(T))qa._pendingDfd=k(this._doQuery(T,ha)),qa._pendingDfd.then(function(Ea){ua={features:Ea};na._selectHandler(ua,ja,ka,U,qa)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,U,qa,!0),qa;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,U,
qa,!0),qa;var za=this;this._ts&&(T._ts=(new Date).getTime());ha=this._canFetchPBFForQuery(T);this._enableEditModeQuantization(T,ha);(qa._pendingDfd=this._task.execute(T,null,null,ha?{format:"pbf"}:null)).addCallbacks(function(Ea){za._selectHandler(Ea,ja,ka,U,qa)},function(Ea){za._hasPartialSelectedFeatures=!0;za._hasSelectionError=!0;za._resolve([Ea],null,U,qa,!0)})}return qa},getSelectedFeatures:function(){var T=this._selectedFeatures,ja=[],ka;for(ka in T)T.hasOwnProperty(ka)&&ja.push(T[ka]);return ja},
clearSelection:function(T){var ja=this._selectedFeatures,ka=this._mode,U;for(U in ja)ja.hasOwnProperty(U)&&(this._unSelectFeatureIIf(U,ka),ka._removeFeatureIIf(U));this._selectedFeatures={};this._isSelOnly&&ka._applyTimeFilter(!0);if(!T)this.onSelectionClear();return this},setSelectionSymbol:function(T){if(this._selectionSymbol=T){var ja=this._selectedFeatures,ka;for(ka in ja)ja.hasOwnProperty(ka)&&ja[ka].setSymbol(T)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(T){T?
(this.labelingInfo=T,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this._evalSurfaceType();this.onLabelingInfoChange()},_fixLabelExpr:function(){var T=/\[([^\[\]]+)\]/ig,ja,ka=this,U=function(ha,na){ha=ka._getField(na,!0);return"["+(ha&&ha.name||na)+"]"};e.forEach(this.labelingInfo,function(ha){if(ja=ha.labelExpression)ha.labelExpression=ja.replace(T,U)})},_updateRequiredFieldsFromLabelingInfo:function(){var T=[];e.forEach(this.labelingInfo,function(ja){var ka=
ja.labelExpressionInfo;if(ja.labelExpression){var U=/[\[\]]/ig;ja=ja.labelExpression.match(/\[[^\[\]]+\]/ig);(ja=e.map(ja,function(na){return na.replace(U,"")}))&&(T=T.concat(ja))}if(ka){if(ka.value){var ha=/[\{\}]/ig;ja=ka.value.match(/\{[^\{\}]+\}/ig);(ja=e.map(ja,function(na){return na.replace(ha,"")}))&&(T=T.concat(ja))}ka.expression&&(T=T.concat(K.extractFieldNames(ka.expression)))}});T=e.map(T,function(ja){var ka=this.getField(ja);return ka?ka.name:ja},this);this._requiredFields&&(this._requiredFields=
this._requiredFields.concat(T))},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(T,ja,ka,U,ha,na){var qa=na.assembly,ua=na.dfd;this._applyNormalized(T,qa&&qa[0]);this._applyNormalized(ja,qa&&qa[1]);this.onBeforeApplyEdits(T,ja,ka);var za={},Ea=this.objectIdField;qa={f:"json"};var Pa=!1;if(this._collection)na={},na.addResults=T?e.map(T,function(){Pa=!0;return{objectId:this._nextId++,success:!0}},this):null,na.updateResults=ja?e.map(ja,function(Ua){Pa=!0;var bb=Ua.attributes[Ea];
za[bb]=Ua;return{objectId:bb,success:!0}},this):null,na.deleteResults=ka?e.map(ka,function(Ua){Pa=!0;return{objectId:Ua.attributes[Ea],success:!0}},this):null,Pa?this._editHandler(na,T,za,U,ha,ua):this._resolve([na.addResults,na.updateResults,na.deleteResults],null,U,ua);else{T&&0<T.length&&(qa.adds=this._convertFeaturesToJson(T,0,1),Pa=!0);if(ja&&0<ja.length){for(na=0;na<ja.length;na++){var Oa=ja[na];za[Oa.attributes[Ea]]=Oa}qa.updates=this._convertFeaturesToJson(ja,0,0,1);Pa=!0}if(ka&&0<ka.length){ja=
[];for(na=0;na<ka.length;na++)ja.push(ka[na].attributes[Ea]);qa.deletes=ja.join(",");Pa=!0}if(Pa){var Ha=this;return z({url:this._url.path+"/applyEdits",content:h.mixin(qa,this._url.query),callbackParamName:"callback",load:function(Ua){Ha._editHandler(Ua,T,za,U,ha,ua)},error:function(Ua){Ha._resolve([Ua],null,ha,ua,!0)}},{usePost:!0})}this._resolve([],null,U,ua)}},queryFeatures:function(T,ja,ka,U){return this._query("execute","onQueryFeaturesComplete",T,ja,ka,U)},queryRelatedFeatures:function(T,ja,
ka){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",T,ja,ka)},queryIds:function(T,ja,ka,U){return this._query("executeForIds","onQueryIdsComplete",T,ja,ka,U)},queryCount:function(T,ja,ka,U){return this._query("executeForCount","onQueryCountComplete",T,ja,ka,U)},queryExtent:function(T,ja,ka,U){return this._query("executeForExtent","onQueryExtentComplete",T,ja,ka,U)},queryAttachmentInfos:function(T,ja,ka){var U=this._url.path+"/"+T+"/attachments",ha=new f(w._dfdCanceller),
na=this;U=v.normalize(U);ha._pendingDfd=z({url:U,content:h.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(qa){qa=qa.attachmentInfos;var ua;e.forEach(qa,function(za){ua=l.objectToQuery({gdbVersion:na._url.query&&na._url.query.gdbVersion,layer:na._url.query&&na._url.query.layer,token:na._getToken()});za.url=U+"/"+za.id+(ua?"?"+ua:"");za.objectId=T});na._resolve([qa],"onQueryAttachmentInfosComplete",ja,ha)},error:function(qa){na._resolve([qa],null,ka,ha,!0)}});return ha},
addAttachment:function(T,ja,ka,U){return this._sendAttachment("add",T,ja,ka,U)},updateAttachment:function(T,ja,ka,U,ha){ka.appendChild(d.create("input",{type:"hidden",name:"attachmentId",value:ja}));return this._sendAttachment("update",T,ka,U,ha)},deleteAttachments:function(T,ja,ka,U){var ha=this._url.path+"/"+T+"/deleteAttachments",na=new f(w._dfdCanceller),qa=this;ja={f:"json",attachmentIds:ja.join(",")};na._pendingDfd=z({url:ha,content:h.mixin(ja,this._url.query),callbackParamName:"callback",load:h.hitch(this,
function(ua){ua=ua.deleteAttachmentResults;ua=e.map(ua,function(za){za=new Da(za);za.attachmentId=za.objectId;za.objectId=T;return za});qa._resolve([ua],"onDeleteAttachmentsComplete",ka,na)}),error:function(ua){qa._resolve([ua],null,U,na,!0)}},{usePost:!0});return na},addType:function(T){var ja=this.types;if(ja){if(e.some(ja,function(ka){return ka.id==T.id?!0:!1}))return!1;ja.push(T)}else this.types=[T];return this._typesDirty=!0},deleteType:function(T){if(this._collection){var ja=this.types;if(ja){var ka=
-1;e.some(ja,function(U,ha){return U.id==T?(ka=ha,!0):!1});if(-1<ka)return this._typesDirty=!0,ja.splice(ka,1)[0]}}},toJson:function(){var T=this._json;if(T=h.isString(T)?g.fromJson(T):h.clone(T)){T=T.layerDefinition?T:{layerDefinition:T};var ja=T.layerDefinition,ka=this._collection;if(ka&&this._typesDirty){ja.types=e.map(this.types||[],function(qa){return qa.toJson()});var U=this.renderer,ha=this.labelingInfo,na=ja.drawingInfo;!U&&!ha||na||(na=ja.drawingInfo={});na&&U&&-1===U.declaredClass.indexOf("TemporalRenderer")&&
(na.renderer=U.toJson());ha&&(na.labelingInfo=e.map(ha,function(qa){return qa.toJson()}))}U=null;if(!ka||this._fcAdded)U={geometryType:ja.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};T.featureSet=h.mixin({},T.featureSet||{},U);T.featureSet.transform&&(ha=T.featureSet.transform,delete T.featureSet.transform,U=new S(T.featureSet),U.quantize(ha),T.featureSet=U.toJson());ka&&(T.nextObjectId=this._nextId,ja.capabilities=this.capabilities);return T}},onSelectionComplete:function(){},
onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},
onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},onFeatureReductionRendererChange:function(){},onFeatureReductionChange:function(){},onFeatureUpdatesResult:function(){},_evalFeatureUpdates:function(){if(!this._featureUpdatesPromise||this._featureUpdatesPromise.isFulfilled())this._featureUpdatesPromise=this.hasFeatureUpdates().otherwise(function(T){return!(T&&"cancel"===T.dojoType)}).always(h.hitch(this,function(T){this._featureUpdatesPromise=null;this.onFeatureUpdatesResult({hasUpdates:T})}))},
_evalRefresh:function(T){(T.hasUpdates||this.hasDefinitionExpressionWithCurrentTimestamp())&&this.refresh()},_evalArcadeSupport:function(){var T=new f;setTimeout(h.hitch(this,function(){this._initializeArcadeEngine().always(function(){T.resolve()})}),0);return T.promise},_initializeArcadeEngine:function(){var T=[],ja=this.infoTemplate;ja&&ja.initializeArcadeEngine&&T.push(ja.initializeArcadeEngine());(ja=this.renderer)&&ja.initializeArcadeEngine&&T.push(ja.initializeArcadeEngine());var ka=[];e.forEach(this.labelingInfo,
function(U){(U=U.labelExpressionInfo)&&U.expression&&ka.push(U.expression)});T.push(R.initialize(ka));return D(T)},_isGeometryOperationsUsed:function(){var T=this.infoTemplate,ja=this.renderer,ka=this.labelingInfo;return T&&T.hasGeometryOperations&&T.hasGeometryOperations()||ja&&ja.hasGeometryOperations&&ja.hasGeometryOperations()||e.some(ka,function(U){return K.hasGeometryOperations(U.labelExpressionInfo&&U.labelExpressionInfo.expression)})?!0:!1},_forceIdentity:function(){var T=new f,ja=this,ka=
this._url&&this._url.path;var U=ka&&ka.toLowerCase().indexOf("/rest/services");var ha=this.editFieldsInfo;ha=ha&&(ha.creatorField||ha.editorField);(this.userIsAdmin||ha)&&!this._getToken()&&-1<U&&x.id?(U=ka.substring(0,U)+"/rest/info",z({url:U,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(na){if(na.owningSystemUrl)return x.id.checkSignInStatus(na.owningSystemUrl+"/sharing")}).then(function(na){if(na)return x.id.getCredential(ka)}).then(function(na){na&&ja._findCredential()}).always(function(){T.resolve()})):
T.resolve();return T.promise},_isSnapshotMode:function(){return this._mode?this._mode.isInstanceOf(ya):!1},_isOnDemandMode:function(){return this._mode?this._mode.isInstanceOf(wa):!1},_isAutoSnapshotMode:function(){return this._isAutoModeEnabled()&&this.currentMode===va.MODE_SNAPSHOT},_getMaxFeaturesForAutoSnapshotMode:function(){var T=this.geometryType;if("esriGeometryPolyline"===T||"esriGeometryPolygon"===T||"esriGeometryMultipoint"===T||this.hasXYFootprint())var ja=this.maxRecordCountForAuto;else"esriGeometryPoint"===
T&&(ja=this.maxPointCountForAuto);return ja},getLastExceedsLimitResult:function(){return this._lastExceedsLimitResult},_canUseSnapshotMode:function(T){this._lastExceedsLimitResult=T=(T=T&&T.features&&T.features[0])&&T.attributes&&T.attributes.exceedslimit;return!(this.mode!==va.MODE_AUTO||this.isEditable()||0!==T||!(this._isPaginationAllowed()||this.maxRecordCount>=this._getMaxFeaturesForAutoSnapshotMode()))},_evalModeFromFLimit:function(T){this._canUseSnapshotMode(T)?this._enableAutoSnapshotMode():
this._enableAutoOnDemandMode()},_enableAutoSnapshotMode:function(){var T=va.MODE_SNAPSHOT;this.isFeatureReductionApplied()?this._updatePreFReductionState(T):this._preSurfaceChangeState?(this._updatePreSurfaceChangeState(T),this._evalSurfaceType(!0)):this.currentMode!==T&&this._setFetchMode(va.MODE_AUTO,T)},_enableAutoOnDemandMode:function(){var T=va.MODE_ONDEMAND;this.isFeatureReductionApplied()?this._updatePreFReductionState(T):this._preSurfaceChangeState?this._updatePreSurfaceChangeState(T):this.currentMode!==
T&&(this._setFetchMode(va.MODE_AUTO,T),this._evalSurfaceType())},_evalModeFromFReduction:function(T){this.loaded&&(T&&this.isFeatureReductionEnabled()&&this._canCluster(T)?this._enableFReductionMode():this._disableFReductionMode())},_enableFReductionMode:function(){this._evalSurfaceType(!0);if(!this._preFReductionState){var T=this.currentMode;T!==va.MODE_SNAPSHOT&&T!==va.MODE_STREAM&&T!==va.MODE_SELECTION&&(this._preFReductionState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===
va.MODE_AUTO?va.MODE_AUTO:va.MODE_SNAPSHOT,va.MODE_SNAPSHOT))}},_disableFReductionMode:function(){var T=this._preFReductionState;this._preFReductionState=null;!T||T.mode===this.mode&&T.currentMode===this.currentMode||(this._setFetchMode(T.mode,T.currentMode),this._evalSurfaceType())},_updatePreFReductionState:function(T){this._preFReductionState=this._preFReductionState||{};this._preFReductionState.mode=va.MODE_AUTO;this._preFReductionState.currentMode=T},_evalModeFromSurface:function(){this.hasWebGLSurface()?
this._enableWebGLSurfaceMode():this._disableWebGLSurfaceMode()},_enableWebGLSurfaceMode:function(){this._preSurfaceChangeState||(this._preSurfaceChangeState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===va.MODE_AUTO?va.MODE_AUTO:va.MODE_ONDEMAND,va.MODE_ONDEMAND,this.webglDeps.OnDemandDrillMode))},_disableWebGLSurfaceMode:function(){var T=this._preSurfaceChangeState;T&&(this._preSurfaceChangeState=null,this._setFetchMode(T.mode,T.currentMode))},_updatePreSurfaceChangeState:function(T){this._preSurfaceChangeState=
this._preSurfaceChangeState||{};this._preSurfaceChangeState.mode=va.MODE_AUTO;this._preSurfaceChangeState.currentMode=T},_setFetchMode:function(T,ja,ka){this.clearSelection();this._mode.suspend();this._mode.destroy();this.mode=T;this.currentMode=ja;ka=ka||this._getModeConstructor(ja);this._mode=new ka(this);this.queryPagination=ja===va.MODE_ONDEMAND&&-1===ka.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode")?!1:this._isPaginationAllowed();(T=this.getMap())&&T.loaded&&(this._resetMaxAllowableOffset(),
this._mode.initialize(T),this._mode.startup())},_isPaginationAllowed:function(){return!(!this._optQueryPagination||this.loaded&&!this.advancedQueryCapabilities.supportsPagination)},_getModeConstructor:function(T){var ja;T===va.MODE_SNAPSHOT?ja=ya:T===va.MODE_ONDEMAND&&(ja=wa);return ja},_hasOnDemandDrillMode:function(){var T=this._mode;T=T&&T.declaredClass;return!!(T&&-1<T.toLowerCase().indexOf("ondemanddrillmode"))},_checkFeatureLimit:function(){this._limitPromise&&(this._limitPromise.cancel(),this._limitPromise=
null);var T=this._queryLimit();T&&(this._lastExceedsLimitResult=null,this._limitPromise=T.then(h.hitch(this,function(ja){var ka=this.currentMode;this._evalModeFromFLimit(ja);return{modeChanged:this.currentMode!==ka}})).always(h.hitch(this,function(ja){this._limitPromise=null;return ja})));return this._limitPromise},_hasPendingLimitQuery:function(){return!!this._exceedsLimitTimer},_queryLimit:function(){if(this._isAutoModeEnabled()){var T,ja,ka=new f(function(){clearTimeout(T);T=null;ja&&!ja.isFulfilled()&&
ja.cancel();ja=null});this._exceedsLimitTimer=T=setTimeout(h.hitch(this,function(){this._exceedsLimitTimer=null;var U=new P,ha=new L;ha.statisticType="exceedslimit";ha.maxPointCount=this.maxPointCountForAuto;ha.maxRecordCount=this.maxRecordCountForAuto;ha.maxVertexCount=this.maxVertexCountForAuto;ha.outStatisticFieldName="exceedslimit";U.outStatistics=[ha];ja=this.queryFeatures(U).promise.then(function(na){ka.resolve(na)}).otherwise(function(na){ka.reject(na)})}),0);return ka.promise}},_isAutoModeEnabled:function(){return this.mode===
va.MODE_AUTO&&this.reHostedFS.test(this.url)},_updateCaps:function(){var T=this._editable,ja=h.trim(this.capabilities||""),ka=e.map(ja?ja.split(","):[],h.trim),U=e.map(ja?ja.toLowerCase().split(","):[],h.trim);ja=e.indexOf(U,"editing");var ha;U={Create:e.indexOf(U,"create"),Update:e.indexOf(U,"update"),Delete:e.indexOf(U,"delete")};if(T&&-1===ja)ka.push("Editing");else if(!T&&-1<ja){T=[ja];for(ha in U)-1<U[ha]&&T.push(U[ha]);T.sort();for(ha=T.length-1;0<=ha;ha--)ka.splice(T[ha],1)}this.capabilities=
ka.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(T){this._toggleTime(!1);this._refreshHandle&&(this._refreshHandle.remove(),this._refreshHandle=null);var ja=this._mode;ja&&(ja.suspend(),T&&ja.destroy())},onResume:function(T){this.inherited(arguments);this._toggleTime(!0);this._refreshHandle=this.on("feature-updates-result",h.hitch(this,this._evalRefresh));var ja=this._map,
ka=this._getRenderer();if(T.firstOccurrence){if(this._fixRendererFields(),this._updateRequiredFieldsFromLabelingInfo(),this._checkFields(),this.clearSelection(),this._evalFeatureReduction(),this.timeInfo&&!this._trackManager&&(this._trackIdField||ka&&(ka.latestObservationRenderer||ka.trackRenderer))&&(this._trackManager=new fa(this),this._trackManager.initialize(ja),this._childLayer=this._trackManager.container),ka&&"colors"in ka&&"blurRadius"in ka&&"maxPixelIntensity"in ka&&"esriGeometryPoint"==
this.geometryType&&!this._heatmapManager&&(this._heatmapManager=new Q(this),this._heatmapManager.initialize(ja)),this._zoomConnect=a.connect(ja,"onZoomEnd",this,this._zoomEndHandler),this._refreshMaxAllowableOffset(),ka=this._mode)ka._init||ka.initialize(ja),ka.startup()}else this._zoomEndHandler(),this._mode&&this._mode.resume()},_zoomEndHandler:function(){var T=this._map;this._updateMaxOffset();this._prevScale=T.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var T=
this._map;T&&T.loaded&&this._autoGeneralize&&(this._isAutoSnapshotMode()?(T=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=T!=this.getMaxAllowableOffset())):this._setMaxOffset(T.extent.getWidth()/T.width,!T.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var T=this._map.getScale(),ja=this._calculatedScale,ka=this._calcMaxOffset,U=this._prevScale;return T>=ja&&(null==U||U<ja)?ka:T<ja&&
(null==U||U>=ja)?null:this.getMaxAllowableOffset()}},_calcMaxOffsetForAutoSnapshot:function(){var T=this._map;if(T&&this._canAutoGeneralize()&&this._isAutoSnapshotMode()&&this._autoGeneralize&&null==this.getMaxAllowableOffset()){var ja=this.generalizeForScale;this._calculatedScale=ja=this.maxScale?this.maxScale:this.minScale?Math.min(ja,this.minScale):Math.min(ja,V.getScale(T,this.initialExtent));this._calcMaxOffset=T.extent.getWidth()/T.width/T.getScale()*ja}else this._calculatedScale=this._calcMaxOffset=
void 0},_toggleTime:function(T){var ja=this._map;T&&this.timeInfo&&this.useMapTime&&ja?(this._mapTimeExtent=ja.timeExtent,this._timeConnect||(this._timeConnect=a.connect(ja,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,a.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(T){this._mapTimeExtent=T;(T=this._mode)&&T.propertyChangeHandler(0)},_getOffsettedTE:function(T){var ja=this._timeOffset,ka=this._timeOffsetUnits;return T&&ja&&ka?T.offset(-1*
ja,ka):T},_getTimeOverlap:function(T,ja){return T&&ja?T.intersection(ja):T||ja},_getTimeFilter:function(T){var ja=this.getTimeDefinition();if(ja){var ka=this._getTimeOverlap(ja,null);if(!ka)return[!1]}if(T){if(T=ka?this._getTimeOverlap(T,ka):T,!T)return[!1]}else T=ka;return[!0,T]},_getAttributeFilter:function(T){var ja=this.getDefinitionExpression();return T?ja?"("+ja+") AND ("+T+")":T:ja},_applyQueryFilters:function(T,ja){T.where=this._getAttributeFilter(T.where);T.returnGeometry&&null==T.maxAllowableOffset&&
!T.quantizationParameters&&(T.maxAllowableOffset=this._maxOffset,T.quantizationParameters=this._quantizationParameters);ja&&this.supportsAdvancedQueries&&(T.orderByFields=T.orderByFields||this.getOrderByFields());if(this.timeInfo)if(ja=this._getTimeFilter(T.timeExtent),ja[0])T.timeExtent=ja[1];else return!1;return!0},_add:function(T){var ja=this._selectionSymbol,ka=T.attributes,U=this.visibilityField;ja&&this._isSelOnly&&T.setSymbol(ja);if(U&&ka&&ka.hasOwnProperty(U))T[ka[U]?"show":"hide"]();return this.add.apply(this,
arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(T,ja){var ka=[],U=this._map,ha;if((this._collection||!this._isTable&&U)&&!(T.text||T.where&&T.where!==this.getDefinitionExpression()||T.orderByFields&&T.orderByFields.length&&(ha=this.getOrderByFields()||[])&&T.orderByFields.join()!==ha.join()||T.outStatistics||T.returnDistinctValues)){ha=this._isSnapshotMode();var na=this._isSelOnly;ja=ha?null:ja?this._getExtentOfTiles(U.extent):U.extent;if(U=
T.geometry){if(na||T.spatialRelationship!==P.SPATIAL_REL_INTERSECTS||"extent"!==U.type||!ha&&!ja.contains(U))return;ka.push(1)}if(ja=T.objectIds)if(ha)ka.push(2);else{U=ja.length;var qa=this._mode,ua=0,za;for(za=0;za<U;za++)qa._getFeature(ja[za])&&ua++;if(ua===U)ka.push(2);else return}if(this.timeInfo)if(T=T.timeExtent,ja=this._mapTimeExtent,ha)T&&ka.push(3);else if(na){if(T)return}else if(ja)if(-1!==e.indexOf(ka,2))T&&ka.push(3);else if(-1!==e.indexOf(ka,1))T==ja&&ka.push(3);else return;else if(0<
ka.length)T&&ka.push(3);else if(T)return;return 0<ka.length?ka:null}},_getAbsMid:function(T){return b.toAbsMid?b.toAbsMid(T):y.id.replace(/\/[^\/]*$/ig,"/")+T},_doQuery:function(T,ja,ka){var U=[],ha=this.objectIdField,na=this,qa=new f,ua=new f,za=this.graphics;if(-1!==e.indexOf(ja,1)){var Ea=this.spatialIndex||this._map&&this._map.spatialIndex,Pa,Oa=T.geometry._normalize(null,!0);null==Ea&&ca.autoSpatialIndexing?Pa=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(h.hitch(this,
h.partial(this._getFromIndex,Oa,Ea)),function(Ha){ua.resolve(h.hitch(this,h.partial(this._filterByExtent,za,Oa)))}):Ea&&(Pa=this._getFromIndex(Oa,Ea));Pa?Pa.then(function(Ha){for(var Ua=0;Ua<Ha.length;Ua++)Ha[Ua].results&&(U=U.concat(Ha[Ua].results));ua.resolve(U)}).otherwise(function(Ha){ua.reject(Ha)}):ua.resolve(this._filterByExtent(za,Oa))}else ua.resolve(za);ua.then(function(Ha){U=Ha;if(-1!==e.indexOf(ja,2)){var Ua=T.objectIds;U=e.filter(U,function(bb){return-1<e.indexOf(Ua,bb.attributes[ha])})}-1!==
e.indexOf(ja,3)&&na.timeInfo&&(Ha=T.timeExtent,U=na._filterByTime(U,Ha.startTime,Ha.endTime).match);ka&&(U=e.map(U,function(bb){return bb.attributes[ha]},this));qa.resolve(U)});return qa},_getFromIndex:function(T,ja){ja=ja||this.spatialIndex||this._map.spatialIndex;T instanceof Array||(T=[T]);var ka=this.id;return n(e.map(T,function(U){return ja.intersects(U,ka)}))},_filterByExtent:function(T,ja){for(var ka=[],U=0,ha=T.length;U<ha;U++){var na=T[U],qa=na.geometry;qa&&(this.normalization&&ja.length?
(ja[0].intersects(qa)||ja[1].intersects(qa))&&ka.push(na):ja.intersects(qa)&&ka.push(na))}return ka},_filterByTime:function(T,ja,ka){var U=this._startTimeField,ha=this._endTimeField,na;this._twoTimeFields||(na=U||ha);var qa=A.isDefined,ua=[],za=[],Ea,Pa=T.length;ja=ja?ja.getTime():-Infinity;ka=ka?ka.getTime():Infinity;if(na)for(Ea=0;Ea<Pa;Ea++){var Oa=T[Ea];var Ha=Oa.attributes;U=Ha[na];U>=ja&&U<=ka?ua.push(Oa):za.push(Oa)}else for(Ea=0;Ea<Pa;Ea++)Oa=T[Ea],Ha=Oa.attributes,na=Ha[U],Ha=Ha[ha],na=qa(na)?
na:-Infinity,Ha=qa(Ha)?Ha:Infinity,na>=ja&&na<=ka||Ha>=ja&&Ha<=ka||ja>=na&&ka<=Ha?ua.push(Oa):za.push(Oa);return{match:ua,noMatch:za}},_getSizeVariables:function(T){return T&&e.filter(T.getVisualVariablesForType("sizeInfo",!1),function(ja){return!(!ja.field&&!ja.valueExpression)})},_needClientSideSorting:function(T){return this._collection?!(!T||!T.length):e.some(T,function(ja){return!!ja.valueExpression})},_sortFeatures:function(T){var ja=this.renderer,ka=this._getSizeVariables(ja);if(T&&1<T.length&&
this._needClientSideSorting(ka)){var U=ka[0],ha=this;T.sort(function(na,qa){na._layer||(na._layer=ha);qa._layer||(qa._layer=ha);na=ja._getDataValue(na,U,"sizeInfo");qa=ja._getDataValue(qa,U,"sizeInfo");return null==na?-1:null==qa?1:qa-na})}return T},_resolve:function(T,ja,ka,U,ha){ja&&this[ja].apply(this,T);ka&&ka.apply(null,T);U&&w._resDfd(U,T,ha)},_getShallowClone:function(T){var ja=new P,ka;for(ka in T)T.hasOwnProperty(ka)&&(ja[ka]=T[ka]);return ja},_canFetchPBF:function(){return!!(Sa&&Qa&&this.supportsFormatPBF)},
_canFetchPBFForQuery:function(T){return!(!this._canFetchPBF()||!this._isCacheHintEnabled(T)&&this._isAutoSnapshotMode()||!(T.quantizationParameters||!this.isEditable()&&this.supportsQuantizationEditMode)||T.outStatistics)},_enableEditModeQuantization:function(T,ja){T&&ja&&!T.quantizationParameters&&(T.quantizationParameters={mode:"edit"})},_enableCacheHint:function(T,ja){var ka=this.advancedQueryCapabilities;ka&&ka.supportsQueryWithCacheHint?null==T.cacheHint&&(T.cacheHint=!0):ka&&ka.supportsQueryWithResultType&&
this.reHostedFS.test(this.url)&&!T.resultType&&(T.resultType=ja||"coherent")},_isCacheHintSupported:function(){var T=this.advancedQueryCapabilities;return T?!!(T.supportsQueryWithCacheHint||T.supportsQueryWithResultType&&this.reHostedFS.test(this.url)):!1},_isCacheHintEnabled:function(T){var ja=this.advancedQueryCapabilities;return T&&ja?!!(ja.supportsQueryWithCacheHint&&T.cacheHint||ja.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&("coherent"===T.resultType||"tile"===T.resultType)):
!1},_query:function(T,ja,ka,U,ha,na){var qa=this,ua=this._map;na=na&&na.snapToTiles;var za=new f(w._dfdCanceller),Ea=ka,Pa,Oa,Ha;if("executeRelationshipQuery"!==T){Ea=this._getShallowClone(ka);var Ua=this.getOutFields();Ea.outFields||(Ea.outFields=Ua);Ea.outFields&&Ea.outFields.length&&(Oa=-1<e.indexOf(Ua,"*")?!1:!e.every(Ea.outFields,function(ab){return-1<e.indexOf(Ua,ab)}));Ea.returnGeometry=ka.hasOwnProperty("returnGeometry")?ka.returnGeometry:!ka.outStatistics;Ea.returnGeometry&&(Ea.multipatchOption=
this.multipatchOption,null!=Ea.maxAllowableOffset||Ea.quantizationParameters)&&(ka=null!=Ea.maxAllowableOffset?Ea.maxAllowableOffset:Ea.quantizationParameters.tolerance,null!=ka&&ka!==this.getMaxAllowableOffset()&&(Ha=!0));ua&&(ua=ua&&ua.spatialReference,(ka=Ea.outSpatialReference)?Pa=!ka.equals(ua):Ea.outSpatialReference=new r(ua.toJson()));na&&(ua=Ea.geometry)&&"extent"===ua.type&&(Ea.geometry=this._getExtentOfTiles(ua),ua!==Ea.geometry&&this._enableCacheHint(Ea));if(!this._applyQueryFilters(Ea,
"execute"===T&&!Ea.outStatistics)){switch(T){case "execute":var bb=new S({features:[]});break;case "executeForIds":bb=[];break;case "executeForCount":bb=0;break;case "executeForExtent":bb={}}this._resolve([bb],ja,U,za);return za}if(na="executeForExtent"!==T&&!Pa&&!Oa&&!Ha&&this._canDoClientSideQuery(Ea,na))return za._pendingDfd=k(this._doQuery(Ea,na,"executeForIds"===T||"executeForCount"===T)),za._pendingDfd.then(function(ab){switch(T){case "execute":bb=new S;bb.features=ab;break;case "executeForIds":bb=
ab;break;case "executeForCount":bb=ab.length}qa._resolve([bb],ja,U,za)}),za}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,ha,za,!0),za;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,ha,za,!0),za;this._ts&&(Ea._ts=(new Date).getTime());na="execute"===T&&this._canFetchPBFForQuery(Ea);this._enableEditModeQuantization(Ea,na);(za._pendingDfd=this._task[T](Ea,null,null,na?{format:"pbf"}:
null)).addCallbacks(function(ab){var gb=!!Ea.outStatistics||Pa||Oa||Ha;if("execute"===T||"executeRelationshipQuery"===T)if("execute"===T){var fb=ab.features;var kb=fb.length;for(--kb;0<=kb;kb--)if(fb[kb]._layer=qa,!gb&&!qa._isTable){var ub=qa._mode._getFeature(fb[kb].attributes[qa.objectIdField]);ub&&fb.splice(kb,1,ub)}}else for(ub in ab)if(ab.hasOwnProperty(ub))for(fb=ab[ub].features,kb=fb.length,--kb;0<=kb;kb--)fb[kb]._layer=qa;qa._resolve([ab],ja,U,za)},function(ab){qa._resolve([ab],null,ha,za,
!0)});return za},_getExtentOfTiles:function(T){var ja=this._isOnDemandMode()&&this._mode._gridLayer||da.createFromFeatureLayer({layer:this}),ka=this.getMap();ka=ka&&ka.getTargetExtent(T);return ja&&ka&&ja.getExtentOfIntersectingCells(ka)||T},_convertFeaturesToJson:function(T,ja,ka,U){var ha=[],na=this._selectionSymbol,qa=this.visibilityField,ua,za=this.objectIdField;this.loaded&&(ka||U)&&(ua=e.filter(this.fields,function(bb){return!1===bb.editable&&(!U||bb.name!==za)}));for(ka=0;ka<T.length;ka++){var Ea=
T[ka],Pa={},Oa=Ea.geometry,Ha=Ea.attributes,Ua=Ea.symbol;!Oa||U&&this.loaded&&!this.allowGeometryUpdates||(Pa.geometry=Oa.toJson());qa?(Pa.attributes=Ha=h.mixin({},Ha),Ha[qa]=Ea.visible?1:0):Ha&&(Pa.attributes=h.mixin({},Ha));Pa.attributes&&ua&&ua.length&&e.forEach(ua,function(bb){delete Pa.attributes[bb.name]});Ua&&Ua!==na&&(Pa.symbol=Ua.toJson());ha.push(Pa)}return ja?ha:g.toJson(ha)},_selectHandler:function(T,ja,ka,U,ha){switch(ja){case va.SELECTION_NEW:this.clearSelection(!0);var na=!0;break;
case va.SELECTION_ADD:na=!0;break;case va.SELECTION_SUBTRACT:na=!1}U=T.features;var qa=this._mode,ua=[],za=this.objectIdField;if(na)for(na=0;na<U.length;na++){var Ea=U[na];var Pa=Ea.attributes[za];Ea=qa._addFeatureIIf(Pa,Ea);ua.push(Ea);this._selectFeatureIIf(Pa,Ea,qa)}else for(na=0;na<U.length;na++)Ea=U[na],Pa=Ea.attributes[za],this._unSelectFeatureIIf(Pa,qa),Pa=qa._removeFeatureIIf(Pa),ua.push(Pa||Ea);this._isSelOnly&&qa._applyTimeFilter(!0);this._isImageService&&10.7>this.version&&void 0===T.exceededTransferLimit&&
(T.exceededTransferLimit=U.length===this.maxRecordCount);this._hasPartialSelectedFeatures=!!T.exceededTransferLimit;this._resolve([ua,ja,T.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",ka,ha);if(T.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(T,ja,ka){var U=this._selectedFeatures,ha=U[T];ha||(ka._incRefCount(T),U[T]=ja,this._isTable||(this._setSelectSymbol(ja),ja.attr("data-selected","")));return ha||ja},_unSelectFeatureIIf:function(T,ja){var ka=
this._selectedFeatures[T];ka&&(ja._decRefCount(T),delete this._selectedFeatures[T],this._isTable||(this._setUnSelectSymbol(ka),ka.attr("data-selected")));return ka},_setSelectSymbol:function(T){var ja=this._selectionSymbol;ja&&!this._isSelOnly&&T.setSymbol(ja)},_setUnSelectSymbol:function(T){var ja=this._selectionSymbol;ja&&!this._isSelOnly&&ja===T.symbol&&T.setSymbol(null,!0)},_getOutFields:function(){var T=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,
this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes);T=e.filter(T,function(ka,U,ha){return!!ka&&e.indexOf(ha,ka)===U});var ja=h.clone(this._outFields);if(ja){if(-1!==e.indexOf(ja,"*"))return ja;e.forEach(T,function(ka){-1===e.indexOf(ja,ka)&&ja.push(ka)});return ja}return T},_checkFields:function(T){var ja=T||this._getOutFields();e.forEach(ja,function(ka){"*"!==ka&&this._getField(ka)},this);T||this._isTable||this._fserver||this._collection||this._isStream||e.some(this.fields,
function(ka){return ka&&"esriFieldTypeGeometry"===ka.type?!0:!1})},_fixFieldCase:function(T,ja,ka){var U=T&&T[ja],ha;if(U&&!h.isFunction(U)){if(ha=!this._getField(U)&&this._getField(U,!0))U=T[ja]=ha.name;ka&&ka.push(U)}return U},_fixRendererFields:function(){var T=this.renderer;this._orderBy=null;this._requiredFields=[];if(T&&0<this.fields.length){var ja=[],ka;T=e.filter([T,T.observationRenderer,T.latestObservationRenderer,T.trackRenderer],A.isDefined);var U=[].concat(T);e.forEach(T,function(ha){e.forEach(ha.rendererInfos,
function(na){na.renderer&&U.push(na.renderer)})});e.forEach(U,function(ha){this._fixFieldCase(ha,"attributeField",ja);this._fixFieldCase(ha,"attributeField2",ja);this._fixFieldCase(ha,"attributeField3",ja);this._fixFieldCase(ha.rotationInfo,"field",ja);(ka=this._fixFieldCase(ha.sizeInfo,"field",ja))&&!this._orderBy&&(this._orderBy=[ka+" DESC"]);this._fixFieldCase(ha.sizeInfo,"normalizationField",ja);this._fixFieldCase(ha.colorInfo,"field",ja);this._fixFieldCase(ha.colorInfo,"normalizationField",ja);
this._fixFieldCase(ha.field,"field",ja);this._fixFieldCase(ha.opacityInfo,"field",ja);this._fixFieldCase(ha.opacityInfo,"normalizationField",ja);e.forEach(ha.visualVariables,function(qa){ka=this._fixFieldCase(qa,"field",ja);"sizeInfo"===qa.type&&ka&&!this._orderBy&&(this._orderBy=[ka+" DESC"]);this._fixFieldCase(qa,"normalizationField",ja)},this);var na=e.map(ha.getFieldsUsedInExpressions(),function(qa){var ua=this.getField(qa);return ua?ua.name:qa},this);ja=ja.concat(na);this._orderBy||!ha.addBreak||
h.isFunction(ha.attributeField)||!ha.backgroundFillSymbol&&!this._hasSizeDiff(ha)||(this._orderBy=[ha.attributeField+" DESC"])},this);this._requiredFields=e.filter(ja,A.isDefined)}},_hasSizeDiff:function(T){var ja=Number.MAX_VALUE,ka=-Number.MAX_VALUE,U,ha;e.forEach(T.infos,function(na){if(ha=na.symbol){U=0;switch(ha.type){case "simplemarkersymbol":U=ha.size;break;case "picturemarkersymbol":U=(ha.width+ha.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":U=ha.width;break;case "simplefillsymbol":case "picturefillsymbol":U=
ha.outline&&ha.outline.width}U&&(ja=Math.min(ja,U),ka=Math.max(ka,U))}});return ja!==Number.MAX_VALUE&&ka!==-Number.MAX_VALUE&&1<Math.abs(ka-ja)},getOrderByFields:function(){var T=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&T?e.filter(T,function(ja){ja=ja.split(" ")[0];return!!this._getField(ja,!0)},this):null},_createFields:function(T){var ja=T?T.length:0,ka,U=[];for(ka=0;ka<ja;ka++)U.push(new N(T[ka]));this.fields=U},_createFieldsIndex:function(){if(this._fieldsIndexDirty){var T=
this.fields,ja=T?T.length:0;if(50<ja&&this._canUseFieldsIndex()){var ka=new Map;for(var U=new Map,ha=0;ha<ja;ha++){var na=T[ha];ka.set(na.name,na);U.set(na.name.toLowerCase(),na)}ka={caseSensitive:ka,caseInsensitive:U}}this._fieldsIndex=ka;this._fieldsIndexDirty=!1}},_canUseFieldsIndex:function(){var T=t.Map;return!("function"!==typeof t.Proxy||"function"!==typeof t.Proxy.revocable||"function"!==typeof T||!T.prototype||"function"!==typeof T.prototype.set)},_getField:function(T,ja){var ka=this.fields;
if(!ka||0===ka.length)return null;ja&&(T=T.toLowerCase());this._createFieldsIndex();var U=this._fieldsIndex;if(U)return U=ja?U.caseInsensitive:U.caseSensitive,U.get(T);var ha;e.some(ka,function(na){var qa=!1;(qa=ja?na&&na.name.toLowerCase()===T?!0:!1:na&&na.name===T?!0:!1)&&(ha=na);return qa});return ha},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:e.map(e.filter(this.fields,function(T){return!(!T||"esriFieldTypeDate"!==T.type)}),function(T){return T.name})});return this._dtOpts},
_applyNormalized:function(T,ja){T&&ja&&e.forEach(T,function(ka,U){ka&&ja[U]&&ka.setGeometry(ja[U])})},_editHandler:function(T,ja,ka,U,ha,na){ha=T.addResults;var qa=T.updateResults;T=T.deleteResults;var ua,za=this.objectIdField,Ea=this._mode,Pa=this._isTable;var Oa=this.editFieldsInfo;var Ha=this.getOutFields()||[];var Ua=Oa&&Oa.creatorField,bb=Oa&&Oa.creationDateField,ab=Oa&&Oa.editorField,gb=Oa&&Oa.editDateField;Oa=Oa&&Oa.realm;-1===e.indexOf(Ha,"*")&&(Ua&&-1===e.indexOf(Ha,Ua)&&(Ua=null),bb&&-1===
e.indexOf(Ha,bb)&&(bb=null),ab&&-1===e.indexOf(Ha,ab)&&(ab=null),gb&&-1===e.indexOf(Ha,gb)&&(gb=null));var fb=bb||gb?(new Date).getTime():null,kb=Ua||ab?this.getUserId():void 0;kb&&Oa&&(kb=kb+"@"+Oa);if(ha){var ub=this.globalIdField;for(Oa=0;Oa<ha.length;Oa++)if(ha[Oa]=new Da(ha[Oa]),!Pa){var ob=ha[Oa];if(ob.success){var eb=ob.objectId;Ha=ja[Oa];(ua=Ha._graphicsLayer)&&ua!==this&&ua.remove(Ha);ua=Ha.attributes||{};ua[za]=eb;eb=ob.globalId;ub&&eb&&(ua[ub]=eb);Ua&&(ua[Ua]=kb);ab&&(ua[ab]=kb);bb&&(ua[bb]=
fb);gb&&(ua[gb]=fb);Ha.setAttributes(ua);Ea._init&&Ea.drawFeature(Ha)}}}if(qa)for(Oa=0;Oa<qa.length;Oa++)if(qa[Oa]=new Da(qa[Oa]),!Pa&&(ob=qa[Oa],ob.success)){eb=ob.objectId;Ha=ka[eb];if(ja=Ea._getFeature(eb))ja.geometry!==Ha.geometry&&Ha.geometry&&ja.setGeometry(ba.fromJson(Ha.geometry.toJson())),ja.attributes!==Ha.attributes&&Ha.attributes&&ja.setAttributes(h.mixin(ja.attributes,Ha.attributes)),this._repaint(ja,eb);Ha=ja||Ha;ua=Ha.attributes||{};ab&&(ua[ab]=kb);gb&&(ua[gb]=fb);Ha.setAttributes(ua)}if(T){ka=
[];for(Oa=0;Oa<T.length;Oa++)if(T[Oa]=new Da(T[Oa]),!Pa&&(ob=T[Oa],ob.success&&(eb=ob.objectId,Ha=Ea._getFeature(eb))))this._unSelectFeatureIIf(eb,Ea)&&ka.push(Ha),Ha._count=0,Ea._removeFeatureIIf(eb);if(0<ka.length)this.onSelectionComplete(ka,va.SELECTION_SUBTRACT)}this._resolve([ha,qa,T],"onEditsComplete",U,na)},_sendAttachment:function(T,ja,ka,U,ha){var na=this;return z({url:this._url.path+"/"+ja+"/"+("add"===T?"addAttachment":"updateAttachment"),form:ka,content:h.mixin(this._url.query,{f:"json",
token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(qa){var ua="add"===T?"onAddAttachmentComplete":"onUpdateAttachmentComplete";qa=new Da(qa["add"===T?"addAttachmentResult":"updateAttachmentResult"]);qa.attachmentId=qa.objectId;qa.objectId=ja;na._resolve([qa],ua,U);return qa}).addErrback(function(qa){na._resolve([qa],null,ha,null,!0)})},_repaint:function(T,ja,ka){ja=A.isDefined(ja)?ja:T.attributes[this.objectIdField];ja in this._selectedFeatures&&
this._selectionSymbol||T.setSymbol(T.symbol,ka)},_getKind:function(T){var ja=this._trackManager;return ja?ja.isLatestObservation(T)?1:0:0}});h.mixin(va,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});O._createWrappers(va);Object.defineProperty(va.prototype,"graphics",{get:function(){return this._hasOnDemandDrillMode()?
this._mode.graphics:this._graphicsVal},set:function(T){this._graphicsVal=T}});Object.defineProperty(va.prototype,"name",{get:function(){return this.arcgisProps&&this.arcgisProps.title?this.arcgisProps.title:this._name},set:function(T){this._name=T;this.loaded&&this.arcgisProps&&(this.arcgisProps.title=null)}});Object.defineProperty(va.prototype,"fields",{get:function(){return this._fields},set:function(T){T&&this._canUseFieldsIndex()&&(T=new Proxy(T,{set:h.hitch(this,function(ja,ka,U){if(ka)if("length"===
ka)this._fieldsIndexDirty=!0;else{var ha=Number(ka);"number"!==typeof ha||isNaN(ha)||(this._fieldsIndexDirty=!0)}ja[ka]=U;return!0})}));this._fields=T;this._fieldsIndexDirty=!0}});h.setObject("layers.FeatureLayer",va,x);return va})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(b,y,q){var a=b.forEach;return function(h){function e(t,n){d[n]=t;c.progress([t,n]);0===--k&&c.resolve(d)}var g,f;h instanceof Array?f=h:h&&"object"===typeof h&&(g=h);var m=[];
if(g){f=[];for(var l in g)Object.hasOwnProperty.call(g,l)&&(m.push(l),f.push(g[l]));var d={}}else f&&(d=[]);if(!f||!f.length)return(new y).resolve(d);var c=new y;c.promise.always(function(){d=m=null});var k=f.length;a(f,function(t,n){g||m.push(n);q(t,function(u){c.isFulfilled()||e(u,m[n])},function(u){c.isFulfilled()||e(u,m[n])})});return c.promise}})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),
function(b,y,q,a,h,e,g){b=b(g,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(f,m){if(f&&!f.declaredClass){var l=f;this.symbol=(f=l.symbol)&&(f.declaredClass?f:e.fromJson(f,m));this.label=l.label;this.description=l.description}else this.symbol=f},getSymbol:function(f){return this.symbol},toJson:function(){var f=y.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return h.fixJson(f)}});y.setObject("renderer.SimpleRenderer",
b,a);return b})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),function(b,y,q,a,h,e,g,f,m,l){var d=Math.PI;b=b(null,{declaredClass:"esri.renderer.Renderer",constructor:function(c){this._cache={};if(c&&!c.declaredClass){this.rotationInfo=c.rotationInfo;if(!this.rotationInfo){var k=c.rotationType,
t=c.rotationExpression;if(k||t)this.rotationInfo={type:k,expression:t}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(c.sizeInfo));this.setColorInfo(this._readColorInfo(c.colorInfo));this.setOpacityInfo(this._readOpacityInfo(c.transparencyInfo));this.setVisualVariables(this._readVariables(c.visualVariables));this.setAuthoringInfo(c.authoringInfo)}this.getSymbol=y.hitch(this,this.getSymbol)},getSymbol:function(c){},_readSizeInfo:function(c){if(c){var k=c.minSize,t=c.maxSize;
k&&(c.minSize="number"===typeof k?h.pt2px(k):this._readSizeInfo(k));t&&(c.maxSize="number"===typeof t?h.pt2px(t):this._readSizeInfo(t));c.stops&&q.forEach(c.stops,function(n){n.size&&"number"===typeof n.size&&(n.size=h.pt2px(n.size))})}return c},_readColorInfo:function(c){c&&(q.forEach(c.colors,function(k,t){y.isArray(k)&&(c.colors[t]=g.toDojoColor(k))}),q.forEach(c.stops,function(k,t){k.color&&y.isArray(k.color)&&(c.stops[t].color=g.toDojoColor(k.color))}));return c},_readOpacityInfo:function(c){if(c){var k=
y.mixin({},c);k.transparencyValues&&(k.opacityValues=q.map(k.transparencyValues,function(t){return 1-t/100}),delete k.transparencyValues);k.stops&&(k.stops=q.map(k.stops,function(t){t=y.mixin({},t);t.opacity=1-t.transparency/100;delete t.transparency;return t}))}return k},_readVariables:function(c){c&&(c=q.map(c,function(k){"sizeInfo"===k.type?k=this._readSizeInfo(k):"colorInfo"===k.type?k=this._readColorInfo(k):"transparencyInfo"===k.type&&(k=this._readOpacityInfo(k),k.type="opacityInfo");return k},
this));return c},setAuthoringInfo:function(c){this.authoringInfo=c},setRotationInfo:function(c){if(c=this.rotationInfo="string"===typeof c?{field:c}:c){if(c.expression&&!y.isFunction(c.expression)&&!c.field){var k=c.expression.match(this.rotationRE);k&&k[1]&&(c.field=k[1])}c.rotationType=c.type}this._cache.rotationInfo=this._processRotationInfo(c);return this},rotationRE:/^\[([^\]]+)\]$/i,_processRotationInfo:function(c){c&&!c.rotationType&&(c.rotationType="geographic");return this._createCache(c)},
getRotationAngle:function(c,k){var t=this._getVarInfo(k&&k.rotationInfo,"rotationInfo");k=t.variable;t=this._cache[t.cacheKey];var n="arithmetic"===this._getRotationType(k),u=t&&t.hasExpr,x=null;if(k.field||u)x=this._getDataValue(c,k,null,t),null!=x&&(x=(x+(n?-90:0))*(n?-1:1));return x},_getRotationType:function(c){return c&&("rotationInfo"===c.type?c.rotationType:c.type)},_getDataValue:function(c,k,t,n,u){n||(n=this._getVarInfo(k,t),k=n.variable,n=this._cache[n.cacheKey],"sizeInfo"===t&&(n=n.root));
return c._getDataValue(k,n,m,u)},setVisualVariables:function(c){var k=this._cache;q.forEach(this.visualVariables,function(t,n){k.hasOwnProperty(n)&&(k[n]=null)},this);this.visualVariables=c;q.some(c,function(t){return!!t.target})&&c.sort(function(t,n){return t.target===n.target?0:t.target?1:-1});q.forEach(c,function(t,n){"colorInfo"===t.type?k[n]=this._processColorInfo(t):"opacityInfo"===t.type?k[n]=this._processOpacityInfo(t):"sizeInfo"===t.type?k[n]=this._processSizeInfo(t):"rotationInfo"===t.type&&
(k[n]=this._processRotationInfo(t))},this);return this},getVisualVariableValues:function(c){var k=this.visualVariables,t;k&&(t=q.map(k,function(n){switch(n.type){case "sizeInfo":var u=this.getSize(c,{sizeInfo:n});break;case "colorInfo":u=this.getColor(c,{colorInfo:n});break;case "opacityInfo":u=this.getOpacity(c,{opacityInfo:n});break;case "rotationInfo":u=this.getRotationAngle(c,{rotationInfo:n})}return{variable:n,value:u}},this));return t},getFieldsUsedInExpressions:function(){var c=[];q.forEach(this._getCacheObjects(),
function(k){k.syntaxTree&&(c=c.concat(m.extractFieldNames(k.syntaxTree)))});c.sort();return q.filter(c,function(k,t){return 0===t||c[t-1]!==k})},hasGeometryOperations:function(){return q.some(this._getCacheObjects(),function(c){return c.syntaxTree?m.hasGeometryOperations(c.syntaxTree):!1})},initializeArcadeEngine:function(){var c=[];q.forEach(this._getCacheObjects(),function(k){k.syntaxTree&&c.push(k.syntaxTree)});return l.initialize(c)},hasVisualVariables:function(c,k){return c?!!this.getVisualVariablesForType(c,
k):!!(this.getVisualVariablesForType("sizeInfo",k)||this.getVisualVariablesForType("colorInfo",k)||this.getVisualVariablesForType("opacityInfo",k)||this.getVisualVariablesForType("rotationInfo",k))},getVisualVariablesForType:function(c,k){var t=this.visualVariables;if(!k&&this[c]){"rotationInfo"===c&&(this[c].rotationType=this[c].type);var n=[this[c]]}else t&&(n=q.filter(t,function(u){return u.type===c&&("string"===typeof k?u.target===k:!1===k?!u.target:!0)}))&&0===n.length&&(n=void 0);return n},
setSizeInfo:function(c){this.sizeInfo=this.proportionalSymbolInfo=c;this._cache.sizeInfo=this._processSizeInfo(c);return this},_processSizeInfo:function(c){return c&&{root:this._createCache(c),minSize:this._createCache(c.minSize),maxSize:this._createCache(c.maxSize)}},_convertExpressionToArcade:function(c){c&&c.expression&&(c.valueExpression="$view.scale")},_getVarInfo:function(c,k){if(c&&c.type===k){var t=q.indexOf(this.visualVariables,c);c=this.visualVariables[t]}else t=k,c=this[k];return{variable:c,
cacheKey:t}},setProportionalSymbolInfo:function(c){this.setSizeInfo(c);return this},getSize:function(c,k){var t=this._getVarInfo(k&&k.sizeInfo,"sizeInfo"),n=t.variable;t=this._cache[t.cacheKey];var u=null;if(n){var x=n.minSize;u=n.maxSize;x="object"===typeof x&&x?this._getSize(c,x,t&&t.minSize,k):x;u="object"===typeof u&&u?this._getSize(c,u,t&&t.maxSize,k):u;u=this._getSize(c,n,t&&t.root,k,[x,u])}return u},_getSize:function(c,k,t,n,u){var x=k.stops,A=0,z=t&&t.hasExpr,E=t&&t.ipData,w=t&&t.isScaleDriven,
D="object"===typeof c&&!!c,r="number"===typeof c?c:null;if(k.field||w||z){var v=n&&n.scale;z=u?u[0]:k.minSize;u=u?u[1]:k.maxSize;var B=k.minDataValue,C=k.maxDataValue,F=k.valueUnit||"unknown",G=k.valueRepresentation,H=k.scaleBy,J=n&&n.shape;w?r=v:"number"!==typeof r&&D&&(r=this._getDataValue(c,k,null,t));if(!this._isValidNumber(r))return null;if(x)z=this._lookupData(r,E),r=z[0],u=z[1],r===u?A=x[r].size:(r=x[r].size,x=x[u].size,A=r+(x-r)*z[2]);else if(null!=z&&null!=u&&null!=B&&null!=C)r<=B?A=z:r>=
C?A=u:(x=(r-B)/(C-B),"area"===H&&J?(z=(r="circle"===J)?d*Math.pow(z/2,2):z*z,x=z+x*((r?d*Math.pow(u/2,2):u*u)-z),A=r?2*Math.sqrt(x/d):Math.sqrt(x)):A=z+x*(u-z));else if("unknown"===F)null!=z&&null!=B&&(z&&B?(x=r/B,A="circle"===J?2*Math.sqrt(x*Math.pow(z/2,2)):"square"===J||"diamond"===J||"image"===J?Math.sqrt(x*Math.pow(z,2)):x*z):A=r+(z||B),A=A<z?z:A,null!=u&&A>u&&(A=u));else{x=(n&&n.resolution?n.resolution:1)*this._meterIn[F];if("area"===G)A=Math.sqrt(r/d)/x,A*=2;else if(A=r/x,"radius"===G||"distance"===
G)A*=2;null!=z&&A<z&&(A=z);null!=u&&A>u&&(A=u)}}else A=x&&x[0]&&x[0].size,null==A&&(A=k.minSize);return A=isNaN(A)?0:A},getSizeRangeAtScale:function(c,k){c=this._getVarInfo(c,"sizeInfo");var t=this._cache[c.cacheKey],n={scale:k};if((c=c.variable)&&k){var u=c.minSize;k=c.maxSize;var x=c.stops;x&&x.length?(c=x[0].size,t=x[x.length-1].size):(c="object"===typeof u&&u?this._getSize({},u,t&&t.minSize,n):u,t="object"===typeof k&&k?this._getSize({},k,t&&t.maxSize,n):k);if(null!=c||null!=t){if(c>t){var A=
t;t=c;c=A}A={minSize:c,maxSize:t}}}return A},setColorInfo:function(c){this.colorInfo=c;this._cache.colorInfo=this._processColorInfo(c);return this},_createCache:function(c,k){if(k=f.createAttributeCache(c,k))k.ipData=this._interpolateData(c);return k},_getCacheObjects:function(c){var k;c=c||this._cache;var t=[];for(k in c){var n=c[k];c.hasOwnProperty(k)&&n&&"object"===typeof n&&(n.hasOwnProperty("idSource")?t.push(n):t=t.concat(this._getCacheObjects(n)))}return t},_processColorInfo:function(c){c&&
(q.forEach(c.colors,function(k,t){y.isArray(k)&&(c.colors[t]=new g(k))}),q.forEach(c.stops,function(k,t){k.color&&y.isArray(k.color)&&(c.stops[t].color=new g(k.color))}));return this._createCache(c)},getColor:function(c,k){k=this._getVarInfo(k&&k.colorInfo,"colorInfo");return this._getColorComponent(c,k.variable,this._cache[k.cacheKey])},setOpacityInfo:function(c){this.opacityInfo=c;this._cache.opacityInfo=this._processOpacityInfo(c);return this},_processOpacityInfo:function(c){return this._createCache(c)},
getOpacity:function(c,k){k=this._getVarInfo(k&&k.opacityInfo,"opacityInfo");return this._getColorComponent(c,k.variable,this._cache[k.cacheKey],!0)},_getColorComponent:function(c,k,t,n,u){var x="number"===typeof c?c:null,A=t&&t.hasExpr,z=t&&t.ipData,E;k&&k.field||A?("number"!==typeof x&&"object"===typeof c&&c&&(x=this._getDataValue(c,k,null,t)),this._isValidNumber(x)||(x=null),null!=x&&(E=n?this._getOpacity(x,k,z):this._getColor(x,k,z))):k&&(c=k.stops,n?(E=c&&c[0]&&c[0].opacity,null==E&&(E=k.opacityValues&&
k.opacityValues[0])):E=c&&c[0]&&c[0].color||k.colors&&k.colors[0]);u&&(u.data=x,u.value=E);return u||E},_isValidNumber:function(c){return"number"===typeof c&&!isNaN(c)&&Infinity!==c&&-Infinity!==c},_interpolateData:function(c){if(c)if(c.colors||c.opacityValues){var k=(c.colors||c.opacityValues).length,t=c.minDataValue,n=(c.maxDataValue-t)/(k-1);var u=[];for(c=0;c<k;c++)u[c]=t+c*n}else c.stops&&(u=q.map(c.stops,function(x){return x.value}));return u},_getOpacity:function(c,k,t){c=this._lookupData(c,
t);k=k||this.opacityInfo;if(c){t=c[0];var n=c[1];t===n?n=this._getOpacValue(k,t):(t=this._getOpacValue(k,t),k=this._getOpacValue(k,n),n=t+(k-t)*c[2])}return n},_getOpacValue:function(c,k){return c.opacityValues?c.opacityValues[k]:c.stops[k].opacity},_getColor:function(c,k,t){c=this._lookupData(c,t);k=k||this.colorInfo;if(c){var n=c[0];t=c[1];n=n===t?this._getColorObj(k,n):g.blendColors(this._getColorObj(k,n),this._getColorObj(k,t),c[2])}return n},_getColorObj:function(c,k){return c.colors?c.colors[k]:
c.stops[k].color},_lookupData:function(c,k){if(k){var t=0,n=k.length-1;q.some(k,function(x,A){if(c<x)return n=A,!0;t=A;return!1});var u=[t,n,(c-k[t])/(k[n]-k[t])]}return u},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},_writeSizeInfo:function(c){if(c){c=y.mixin({},c);this._convertExpressionToArcade(c);var k=c.minSize,t=c.maxSize;k&&(c.minSize="number"===
typeof k?h.px2pt(k):this._writeSizeInfo(k));t&&(c.maxSize="number"===typeof t?h.px2pt(t):this._writeSizeInfo(t));if(k=c.legendOptions)if(c.legendOptions=y.mixin({},k),k=k.customValues)c.legendOptions.customValues=k.slice(0);c.stops&&(c.stops=q.map(c.stops,function(n){n=y.mixin({},n);n.size&&"number"===typeof n.size&&(n.size=h.px2pt(n.size));return n}))}return c},_writeColorInfo:function(c){c&&(c=y.mixin({},c),c.colors&&(c.colors=q.map(c.colors,function(k){return g.toJsonColor(k)})),c.stops&&(c.stops=
q.map(c.stops,function(k){k=y.mixin({},k);k.color&&(k.color=g.toJsonColor(k.color));return k})),c.legendOptions&&(c.legendOptions=y.mixin({},c.legendOptions)));return c},_writeOpacityInfo:function(c){if(c){var k=y.mixin({},c);k.opacityValues&&(k.transparencyValues=q.map(k.opacityValues,function(t){return 100*(1-t)}),delete k.opacityValues);k.stops&&(k.stops=q.map(k.stops,function(t){t=y.mixin({},t);t.transparency=100*(1-t.opacity);delete t.opacity;return t}));k.legendOptions&&(k.legendOptions=y.mixin({},
k.legendOptions))}return k},toJson:function(c){var k=this.visualVariables,t=y.clone(this.authoringInfo),n=c&&c.useLegacyRotationProperties,u=(c=(c=this.getVisualVariablesForType("rotationInfo",!1))&&c[0])&&c.field,x;c&&(c===this.rotationInfo||n)&&(x=c.expression||u&&(y.isFunction(u)?u:"["+u+"]"));k&&(k=q.map(k,function(A){"sizeInfo"===A.type?A=this._writeSizeInfo(A):"colorInfo"===A.type?A=this._writeColorInfo(A):"opacityInfo"===A.type?(A=this._writeOpacityInfo(A),A.type="transparencyInfo"):"rotationInfo"===
A.type&&(A=n?null:y.mixin({},A));return A},this),k=q.filter(k,function(A){return null!=A}));t&&q.forEach(t.visualVariables,function(A){"opacityInfo"===A.type&&(A.type="transparencyInfo")});return{rotationType:x&&(this._getRotationType(c)||"geographic"),rotationExpression:x,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:k,authoringInfo:t}}});y.setObject("renderer.Renderer",b,e);return b})},
"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(b,y,q,a,h,e){var g={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(f){return"string"===typeof f?a(f,q.outputTypes.Hex):null},getAttributeIdSource:function(f){if(!f)return null;var m=f.field,l=f.valueExpression,d=null;if(l)d=l;else if(b.isFunction(m))d=m.toString();else if(m){var c=
(l=f.normalizationField)?"field":f.normalizationType;f=parseFloat(f.normalizationTotal);c&&(c=c.toLowerCase(),d=m.toLowerCase()+",norm:"+c,l?d+=","+l.toLowerCase():"percent-of-total"===c&&(m=f,"number"===typeof m&&!isNaN(m)&&Infinity!==m&&-Infinity!==m&&0!==f||(f=null),d+=","+f))}return d},createAttributeCache:function(f,m){if(!f)return null;var l=f.valueExpression,d=e.createSyntaxTree(l),c=g.getAttributeIdSource(f);return{attributeInfo:f,isNumeric:!m,idSource:c,id:g.getAttributeId(c),hasExpr:!!l,
compiledFunc:e.createFunction(d),syntaxTree:d,isScaleDriven:!!f.expression||g.viewScaleRE.test(l),dependsOnView:d?e.dependsOnView(d):!1,dependsOnGeometry:d?e.hasGeometryOperations(d):!1,isJSFunc:b.isFunction(f.field)}}};b.setObject("layers.support.attributeUtils",g,h);return g})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(b){b=b.getObject("dojox.encoding.digests",!0);b.outputTypes={Base64:0,Hex:1,String:2,Raw:3};b.addWords=function(y,q){var a=(y&65535)+(q&65535);
return(y>>16)+(q>>16)+(a>>16)<<16|a&65535};b.stringToWord=function(y){for(var q=[],a=0,h=8*y.length;a<h;a+=8)q[a>>5]|=(y.charCodeAt(a/8)&255)<<a%32;return q};b.wordToString=function(y){for(var q=[],a=0,h=32*y.length;a<h;a+=8)q.push(String.fromCharCode(y[a>>5]>>>a%32&255));return q.join("")};b.wordToHex=function(y){for(var q=[],a=0,h=4*y.length;a<h;a++)q.push("0123456789abcdef".charAt(y[a>>2]>>a%4*8+4&15)+"0123456789abcdef".charAt(y[a>>2]>>a%4*8&15));return q.join("")};b.wordToBase64=function(y){for(var q=
[],a=0,h=4*y.length;a<h;a+=3)for(var e=(y[a>>2]>>a%4*8&255)<<16|(y[a+1>>2]>>(a+1)%4*8&255)<<8|y[a+2>>2]>>(a+2)%4*8&255,g=0;4>g;g++)8*a+6*g>32*y.length?q.push("\x3d"):q.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>6*(3-g)&63));return q.join("")};b.stringToUtf8=function(y){for(var q="",a=-1,h,e;++a<y.length;)h=y.charCodeAt(a),e=a+1<y.length?y.charCodeAt(a+1):0,55296<=h&&56319>=h&&56320<=e&&57343>=e&&(h=65536+((h&1023)<<10)+(e&1023),a++),127>=h?q+=String.fromCharCode(h):
2047>=h?q+=String.fromCharCode(192|h>>>6&31,128|h&63):65535>=h?q+=String.fromCharCode(224|h>>>12&15,128|h>>>6&63,128|h&63):2097151>=h&&(q+=String.fromCharCode(240|h>>>18&7,128|h>>>12&63,128|h>>>6&63,128|h&63));return q};return b})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(b){function y(f,m){return f<<m|f>>>32-m}function q(f,m,l,d,c,k){return b.addWords(y(b.addWords(b.addWords(m,f),b.addWords(d,k)),c),l)}function a(f,m,l,d,c,k,t){return q(m&l|~m&d,f,m,c,k,t)}function h(f,
m,l,d,c,k,t){return q(m&d|l&~d,f,m,c,k,t)}function e(f,m,l,d,c,k,t){return q(l^(m|~d),f,m,c,k,t)}function g(f,m){f[m>>5]|=128<<m%32;f[(m+64>>>9<<4)+14]=m;m=1732584193;for(var l=-271733879,d=-1732584194,c=271733878,k=0;k<f.length;k+=16){var t=m,n=l,u=d,x=c;m=a(m,l,d,c,f[k+0],7,-680876936);c=a(c,m,l,d,f[k+1],12,-389564586);d=a(d,c,m,l,f[k+2],17,606105819);l=a(l,d,c,m,f[k+3],22,-1044525330);m=a(m,l,d,c,f[k+4],7,-176418897);c=a(c,m,l,d,f[k+5],12,1200080426);d=a(d,c,m,l,f[k+6],17,-1473231341);l=a(l,d,
c,m,f[k+7],22,-45705983);m=a(m,l,d,c,f[k+8],7,1770035416);c=a(c,m,l,d,f[k+9],12,-1958414417);d=a(d,c,m,l,f[k+10],17,-42063);l=a(l,d,c,m,f[k+11],22,-1990404162);m=a(m,l,d,c,f[k+12],7,1804603682);c=a(c,m,l,d,f[k+13],12,-40341101);d=a(d,c,m,l,f[k+14],17,-1502002290);l=a(l,d,c,m,f[k+15],22,1236535329);m=h(m,l,d,c,f[k+1],5,-165796510);c=h(c,m,l,d,f[k+6],9,-1069501632);d=h(d,c,m,l,f[k+11],14,643717713);l=h(l,d,c,m,f[k+0],20,-373897302);m=h(m,l,d,c,f[k+5],5,-701558691);c=h(c,m,l,d,f[k+10],9,38016083);d=
h(d,c,m,l,f[k+15],14,-660478335);l=h(l,d,c,m,f[k+4],20,-405537848);m=h(m,l,d,c,f[k+9],5,568446438);c=h(c,m,l,d,f[k+14],9,-1019803690);d=h(d,c,m,l,f[k+3],14,-187363961);l=h(l,d,c,m,f[k+8],20,1163531501);m=h(m,l,d,c,f[k+13],5,-1444681467);c=h(c,m,l,d,f[k+2],9,-51403784);d=h(d,c,m,l,f[k+7],14,1735328473);l=h(l,d,c,m,f[k+12],20,-1926607734);m=q(l^d^c,m,l,f[k+5],4,-378558);c=q(m^l^d,c,m,f[k+8],11,-2022574463);d=q(c^m^l,d,c,f[k+11],16,1839030562);l=q(d^c^m,l,d,f[k+14],23,-35309556);m=q(l^d^c,m,l,f[k+1],
4,-1530992060);c=q(m^l^d,c,m,f[k+4],11,1272893353);d=q(c^m^l,d,c,f[k+7],16,-155497632);l=q(d^c^m,l,d,f[k+10],23,-1094730640);m=q(l^d^c,m,l,f[k+13],4,681279174);c=q(m^l^d,c,m,f[k+0],11,-358537222);d=q(c^m^l,d,c,f[k+3],16,-722521979);l=q(d^c^m,l,d,f[k+6],23,76029189);m=q(l^d^c,m,l,f[k+9],4,-640364487);c=q(m^l^d,c,m,f[k+12],11,-421815835);d=q(c^m^l,d,c,f[k+15],16,530742520);l=q(d^c^m,l,d,f[k+2],23,-995338651);m=e(m,l,d,c,f[k+0],6,-198630844);c=e(c,m,l,d,f[k+7],10,1126891415);d=e(d,c,m,l,f[k+14],15,-1416354905);
l=e(l,d,c,m,f[k+5],21,-57434055);m=e(m,l,d,c,f[k+12],6,1700485571);c=e(c,m,l,d,f[k+3],10,-1894986606);d=e(d,c,m,l,f[k+10],15,-1051523);l=e(l,d,c,m,f[k+1],21,-2054922799);m=e(m,l,d,c,f[k+8],6,1873313359);c=e(c,m,l,d,f[k+15],10,-30611744);d=e(d,c,m,l,f[k+6],15,-1560198380);l=e(l,d,c,m,f[k+13],21,1309151649);m=e(m,l,d,c,f[k+4],6,-145523070);c=e(c,m,l,d,f[k+11],10,-1120210379);d=e(d,c,m,l,f[k+2],15,718787259);l=e(l,d,c,m,f[k+9],21,-343485551);m=b.addWords(m,t);l=b.addWords(l,n);d=b.addWords(d,u);c=b.addWords(c,
x)}return[m,l,d,c]}b.MD5=function(f,m){m=m||b.outputTypes.Base64;f=g(b.stringToWord(f),8*f.length);switch(m){case b.outputTypes.Raw:return f;case b.outputTypes.Hex:return b.wordToHex(f);case b.outputTypes.String:return b.wordToString(f);default:return b.wordToBase64(f)}};b.MD5._hmac=function(f,m,l){l=l||b.outputTypes.Base64;var d=b.stringToWord(m);16<d.length&&(d=g(d,8*m.length));var c=[];m=[];for(var k=0;16>k;k++)c[k]=d[k]^909522486,m[k]=d[k]^1549556828;f=g(c.concat(b.stringToWord(f)),512+8*f.length);
f=g(m.concat(f),640);switch(l){case b.outputTypes.Raw:return f;case b.outputTypes.Hex:return b.wordToHex(f);case b.outputTypes.String:return b.wordToString(f);default:return b.wordToBase64(f)}};return b.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(b,y,q,a,h,e,g){var f={vars:{$feature:"any",$view:"any"}},m=/^\$feature\./i,l={_getSyntaxTree:function(d){return"string"===
typeof d?l.createSyntaxTree(d):d},createSyntaxTree:function(d){try{var c=d?e.parseScript(d):null}catch(k){c=null}return c},createFunction:function(d,c){c=c||b.clone(f);d=l._getSyntaxTree(d);try{var k=d?e.compileScript(d,c):null}catch(t){k=null}return k},createExecContext:function(d,c){return{vars:{$feature:d?g.createFromGraphic(d):new g,$view:c&&c.view},spatialReference:c&&c.sr}},evalSyntaxTree:function(d,c){try{var k=e.executeScript(d,c)}catch(t){k=null}return k},executeFunction:function(d,c){try{var k=
d?d(c):null}catch(t){k=null}return k},executeAsyncFunction:function(d,c){try{var k=d?d(c):(new a).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(t){k=(new a).reject(t)}return k},extractFieldNames:function(d){d=l._getSyntaxTree(d);d=e.extractFieldLiterals(d);var c=[];y.forEach(d,function(k){m.test(k)&&(k=k.replace(m,""),c.push(k))});c.sort();return y.filter(c,function(k,t){return 0===t||c[t-1]!==k})},dependsOnView:function(d){return l.hasVariable(d,
"$view")},hasGeometryOperations:function(d){return(d=l._getSyntaxTree(d))?e.scriptUsesGeometryEngine(d):!1},enableGeometryOperations:function(){return e.enableGeometrySupport()},hasVariable:function(d,c){return(d=l._getSyntaxTree(d))?e.referencesMember(d,c):!1},hasFunction:function(d,c){return(d=l._getSyntaxTree(d))?e.referencesFunction(d,c):!1},createFeatureSetFromLayer:function(d,c){c=c||{};var k=e.featureSetUtils();return k?k.constructFeatureSet(d,c.spatialReference,c.outFields,c.returnGeometry,
c.cache):null},createFeatureSetFromLayerUrl:function(d,c){c=c||{};var k=e.featureSetUtils();return k?k.constructFeatureSetFromUrlRaw(d,c.spatialReference,c.outFields,c.returnGeometry,c.cache):null},createFeatureSetCollectionFromMap:function(d,c){var k=e.featureSetUtils();return k?k.createFeatureSetCollectionFromMap(d,d.spatialReference,c&&c.cache):null},createFeatureSetCollectionFromServiceUrl:function(d,c){c=c||{};var k=e.featureSetUtils();return k?k.createFeatureSetCollectionFromService(d,c.spatialReference,
c.cache):null},hasFeatureSetOperations:function(d){return(d=l._getSyntaxTree(d))?e.scriptUsesFeatureSet(d):!1},enableFeatureSetOperations:function(){return e.enableFeatureSetSupport().then(function(){var d=e.featureSetUtils();d&&d.initialiseMetaDataCache()})},enableAsyncOperations:function(){return e.enableAsyncSupport()}};b.setObject("support.expressionUtils",l,h);return l})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils ../moment".split(" "),
function(b,y,q,a,h,e,g,f,m,l){function d(I,K){if(null===B)throw Error("Async Arcade must be enabled for this script");return f("csp-restrictions")||!1===D?function(R){return B.executeScript(I,R)}:q.compileScript(I,K,!0)}function c(I,K){void 0===K&&(K=[]);return e.parseScript(I,K)}function k(I,K){if(!0===K.useAsync||!0===I.isAsync){if(null===B)throw Error("Async Arcade must be enabled for this script");return B.executeScript(I,K)}return a.executeScript(I,K)}function t(I,K){return a.referencesMember(I,
K)}function n(I,K){void 0===K&&(K=[]);void 0===I.usesGeometry&&g.findScriptDependencies(I,K);return!0===I.usesGeometry}function u(){return F?F:F=m.create(function(I,K){b(["../geometry/geometryEngine","./functions/geomsync"],function(R,W){v=!0;W.setGeometryEngine(R);I(!0)},function(R){K(R)})})}function x(){return null!==G?G:G=q.enableAsyncSupport().then(function(){return m.create(function(I,K){b(["./arcadeAsyncRuntime"],function(R){try{B=R;R=0;for(var W=C;R<W.length;R++){var P=W[R];B.extend(P);q.extend(P,
"async")}C=null;I(!0)}catch(S){K(S)}},K)})})}function A(){return B?!0:!1}function z(){return H?H:H=x().then(function(){return m.create(function(I,K){b(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(R,W,P,S,L){try{J=R,B.extend([W,P,S,L]),q.extend([W,P,S,L],"async"),r=!0,I(!0)}catch(aa){K(aa)}},K)})})}function E(I,K){void 0===K&&(K=[]);void 0===I.usesFeatureSet&&g.findScriptDependencies(I,K);return!0===
I.usesFeatureSet}function w(I,K){if(K)for(var R=0;R<K.length;R++)if(t(I,K[R]))return!0;return!1}Object.defineProperty(y,"__esModule",{value:!0});y.featureSetUtils=y.scriptTouchesGeometry=y.loadScriptDependencies=y.scriptIsAsync=y.scriptUsesFeatureSet=y.enableFeatureSetSupport=y.isGeometryEnabled=y.isAsyncEnabled=y.isFeatureSetSupportEnabled=y.enableAsyncSupport=y.enableGeometrySupport=y.scriptUsesGeometryEngine=y.extractFieldLiterals=y.referencesFunction=y.referencesMember=y.executeScript=y.parseAndExecuteScript=
y.scriptCheck=y.validateScript=y.parseScript=y.extend=y.compileScript=void 0;var D=function(){if(f("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(I){return!1}}(),r=!1,v=!1,B=null,C=[];y.compileScript=function(I,K){return!0===K.useAsync||!0===I.isAsync?d(I,K):f("csp-restrictions")?function(R){return a.executeScript(I,R)}:q.compileScript(I,K)};y.extend=function(I){a.extend(I);q.extend(I,"sync");null===B?C.push(I):(q.extend(I,"async"),B.extend(I))};
y.parseScript=c;y.validateScript=function(I,K,R){void 0===R&&(R="");return e.validateScript(I,K,R)};y.scriptCheck=function(I,K,R,W){void 0===W&&(W="");return e.scriptCheck(I,K,R,W)};y.parseAndExecuteScript=function(I,K,R){void 0===R&&(R=[]);I=e.parseScript(I,R);return k(I,K)};y.executeScript=k;y.referencesMember=t;y.referencesFunction=function(I,K){return a.referencesFunction(I,K)};y.extractFieldLiterals=function(I,K){void 0===K&&(K=!1);return e.extractFieldLiterals(I,K)};y.scriptUsesGeometryEngine=
n;var F=null;y.enableGeometrySupport=u;var G=null;y.enableAsyncSupport=x;y.isFeatureSetSupportEnabled=function(){return r};y.isAsyncEnabled=A;y.isGeometryEnabled=function(){return v};var H=null;y.enableFeatureSetSupport=z;y.scriptUsesFeatureSet=E;y.scriptIsAsync=function(I,K){void 0===K&&(K=[]);void 0===I.isAsync&&g.findScriptDependencies(I,K);return!0===I.isAsync};y.loadScriptDependencies=function(I,K,R,W){void 0===R&&(R=[]);void 0===W&&(W=!1);return m.create(function(P,S){var L="string"===typeof I?
c(I):I,aa=[];L&&(!1===v&&(n(L)||W)&&aa.push(u()),!1===A()&&(!0===L.isAsync||K)&&aa.push(x()),!1===r&&(E(L)||w(L,R))&&aa.push(z()));aa?m.all(aa).then(function(){P(!0)},S):P(!0)})};y.scriptTouchesGeometry=function(I){if(n(I))return!0;I=g.findFunctionCalls(I);return-1<I.indexOf("geometry")||-1<I.indexOf("feature")?!0:!1};var J=null;y.featureSetUtils=function(){return J};h.MomentLibrary.Moment=l})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B){function C(da,fa,Q){try{return Q(da,null,fa)}catch(xa){throw xa;}}function F(da){return da instanceof Error?A.reject(da):A.reject(Error(da))}function G(da,fa){try{switch(fa.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return R(da,fa);case "VariableDeclaration":for(var Q=[],xa=0;xa<fa.declarations.length;xa++)Q.push(G(da,fa.declarations[xa]));return Q.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";
case "BlockStatement":return K(da,fa);case "FunctionDeclaration":var Fa=fa.id.name.toLowerCase(),ca={isAsync:da.isAsync,spatialReference:da.spatialReference,console:da.console,lrucache:da.lrucache,services:da.services,symbols:da.symbols,mangleMap:da.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:da.depthCounter+1,globalScope:da.globalScope};if(64<ca.depthCounter)throw Error("Exceeded maximum function depth");Q="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(xa=0;xa<fa.params.length;xa++){var Sa=fa.params[xa].name.toLowerCase(),Qa=X(da);ca.localScope._SymbolsMap[Sa]=Qa;ca.mangleMap[Sa]=Qa;Q+="lscope['"+Qa+"']\x3darguments["+xa.toString()+"];\n"}!0===da.isAsync?(Q=Q+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(K(ca,fa.body)+"\n return lastStatement; "),Q+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(Q+=K(ca,fa.body)+"\n return lastStatement; }, runtimeCtx))",Q+="\n lastStatement \x3d lc.voidOperation; \n");
if(void 0!==da.globalScope[Fa])var va="gscope['"+Fa+"']\x3d"+Q;else void 0!==da.globalScope._SymbolsMap[Fa]?va="gscope['"+da.globalScope._SymbolsMap[Fa]+"']\x3d"+Q:(Qa=X(da),da.globalScope._SymbolsMap[Fa]=Qa,da.mangleMap[Fa]=Qa,va="gscope['"+Qa+"']\x3d"+Q);return va;case "ReturnStatement":var T=null===fa.argument?"return lc.voidOperation":"return "+G(da,fa.argument);return T;case "IfStatement":if("AssignmentExpression"===fa.test.type||"UpdateExpression"===fa.test.type)throw Error(l.nodeErrorMessage(fa.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ja=G(da,fa.test),ka=N(da),U="var "+ka+" \x3d "+ja+";\n if ("+ka+" \x3d\x3d\x3d true) {\n"+I(da,fa.consequent)+"\n }\n";U=null!==fa.alternate?U+("else if ("+ka+"\x3d\x3d\x3dfalse)   { \n"+I(da,fa.alternate)+"}\n"):U+("else if ("+ka+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return U+="else { lang.error({type: '"+fa.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var ha="AssignmentExpression"===
fa.expression.type?"lastStatement \x3d lc.voidOperation; "+G(da,fa.expression)+"; \n ":"lastStatement \x3d "+G(da,fa.expression)+"; ";return ha;case "AssignmentExpression":return J(da,fa);case "UpdateExpression":return H(da,fa);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var na=[];Fa=va=0;for(xa=fa.quasis;Fa<xa.length;Fa++){var qa=xa[Fa];na.push(qa.value?JSON.stringify(qa.value.cooked):JSON.stringify(""));!1===qa.tail&&(na.push(fa.expressions[va]?
"lang.castString(lang.aCheck("+G(da,fa.expressions[va])+", 'TemplateLiteral'))":""),va++)}Q="(["+na.join(",")+"]).join('')"}catch(rb){throw rb;}return Q;case "TemplateElement":return JSON.stringify(fa.value?fa.value.cooked:"");case "ForStatement":Q="lastStatement \x3d lc.voidOperation; \n";null!==fa.init&&(Q+=G(da,fa.init)+"; ");var ua=N(da),za=N(da);Q+="var "+ua+" \x3d true; \n do { ";null!==fa.update&&(Q+=" if ("+ua+"\x3d\x3d\x3dfalse) {\n "+G(da,fa.update)+"  \n}\n "+ua+"\x3dfalse; \n");null!==
fa.test&&(Q+="var "+za+" \x3d "+G(da,fa.test)+"; ",Q+="if ("+za+"\x3d\x3d\x3dfalse) { break; } else if ("+za+"!\x3d\x3dtrue) { lang.error({type: '"+fa.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");Q+=G(da,fa.body);null!==fa.update&&(Q+="\n "+G(da,fa.update));return Q+("\n"+ua+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Ea=N(da),Pa=N(da),Oa=N(da),Ha="var "+Ea+" \x3d "+G(da,fa.right)+";\n";"VariableDeclaration"===fa.left.type&&
(Ha+=G(da,fa.left));var Ua="VariableDeclaration"===fa.left.type?fa.left.declarations[0].id.name:fa.left.name;Ua=Ua.toLowerCase();Q="";null!==da.localScope&&(void 0!==da.localScope[Ua]?Q="lscope['"+Ua+"']":void 0!==da.localScope._SymbolsMap[Ua]&&(Q="lscope['"+da.localScope._SymbolsMap[Ua]+"']"));""===Q&&(void 0!==da.globalScope[Ua]?Q="gscope['"+Ua+"']":void 0!==da.globalScope._SymbolsMap[Ua]&&(Q="gscope['"+da.globalScope._SymbolsMap[Ua]+"']"));Ha=Ha+("if ("+Ea+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Ea+") || lc.isString("+Ea+")) {var ")+(Pa+"\x3d"+Ea+".length; \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+Pa+"; "+Oa+"++) {\n");Ha+=Q+"\x3d"+Oa+";\n";Ha+=G(da,fa.body);Ha+="\n}\n";Ha+=" lastStatement \x3d lc.voidOperation; \n";Ha+=" \n}\n";Ha+="else if (lc.isImmutableArray("+Ea+")) {";Ha=Ha+("var "+Pa+"\x3d"+Ea+".length(); \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+Pa+"; "+Oa+"++) {\n");Ha+=Q+"\x3d"+Oa+";\n";Ha+=G(da,fa.body);Ha+="\n}\n";Ha+=" lastStatement \x3d lc.voidOperation; \n";Ha+=" \n}\n";Ha+="else if (( "+
Ea+" instanceof lang.Dictionary) || ( "+Ea+" instanceof lang.Feature)) {";Ha=Ha+("var "+Pa+"\x3d"+Ea+".keys(); \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+Pa+".length; "+Oa+"++) {\n");Ha+=Q+"\x3d"+Pa+"["+Oa+"];\n";Ha+=G(da,fa.body);Ha+="\n}\n";Ha+=" lastStatement \x3d lc.voidOperation; \n";Ha+=" \n}\n";da.isAsync&&(Ha+="else if (lc.isFeatureSet("+Ea+")) {",Ha=Ha+("var "+Pa+"\x3d"+Ea+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Oa+"\x3dlang. graphicToFeature( yield "+Pa+".next(),"+Ea+"); "+Oa+"!\x3dnull; "+
Oa+"\x3dlang. graphicToFeature( yield "+Pa+".next(),"+Ea+")) {\n")+(Q+"\x3d"+Oa+";\n"),Ha+=G(da,fa.body),Ha+="\n}\n",Ha+=" lastStatement \x3d lc.voidOperation; \n",Ha+=" \n}\n");return Ha+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return P(da,fa);case "MemberExpression":try{Q=void 0;Q=!0===fa.computed?G(da,fa.property):"'"+fa.property.name+"'";var bb="lang.member("+G(da,fa.object)+","+Q+")"}catch(rb){throw rb;}return bb;case "Literal":return null===fa.value||void 0===fa.value?
"null":JSON.stringify(fa.value);case "ThisExpression":throw Error(l.nodeErrorMessage(fa,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==fa.callee.type)throw Error(l.nodeErrorMessage(fa,"RUNTIME","ONLYNODESSUPPORTED"));var ab=fa.callee.name.toLowerCase();Q="";null!==da.localScope&&(void 0!==da.localScope[ab]?Q="lscope['"+ab+"']":void 0!==da.localScope._SymbolsMap[ab]&&(Q="lscope['"+da.localScope._SymbolsMap[ab]+"']"));""===Q&&(void 0!==da.globalScope[ab]?Q="gscope['"+ab+"']":
void 0!==da.globalScope._SymbolsMap[ab]&&(Q="gscope['"+da.globalScope._SymbolsMap[ab]+"']"));if(""!==Q){xa="[";for(qa=0;qa<fa.arguments.length;qa++)0<qa&&(xa+=", "),xa+=G(da,fa.arguments[qa]);xa+="]";na=da.isAsync?"(yield lang.callfunc("+Q+","+xa+",runtimeCtx) )":"lang.callfunc("+Q+","+xa+",runtimeCtx)"}else throw Error(l.nodeErrorMessage(fa,"RUNTIME","NOTFOUND"));}catch(rb){throw rb;}return na;case "UnaryExpression":try{var gb="lang.unary("+G(da,fa.argument)+",'"+fa.operator+"')"}catch(rb){throw rb;
}return gb;case "BinaryExpression":try{var fb="lang.binary("+G(da,fa.left)+","+G(da,fa.right)+",'"+fa.operator+"')"}catch(rb){throw rb;}return fb;case "LogicalExpression":try{if("AssignmentExpression"===fa.left.type||"UpdateExpression"===fa.left.type)throw Error(l.nodeErrorMessage(fa.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===fa.right.type||"UpdateExpression"===fa.right.type)throw Error(l.nodeErrorMessage(fa.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
if("\x26\x26"===fa.operator||"||"===fa.operator)var kb="(lang.logicalCheck("+G(da,fa.left)+") "+fa.operator+" lang.logicalCheck("+G(da,fa.right)+"))";else throw Error(l.nodeErrorMessage(fa,"RUNTIME","ONLYORORAND"));}catch(rb){throw rb;}return kb;case "ConditionalExpression":throw Error(l.nodeErrorMessage(fa,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{Q=[];for(xa=0;xa<fa.elements.length;xa++)"Literal"===fa.elements[xa].type?Q.push(G(da,fa.elements[xa])):Q.push("lang.aCheck("+G(da,fa.elements[xa])+
",'ArrayExpression')");var ub="["+Q.join(",")+"]"}catch(rb){throw rb;}return ub;case "ObjectExpression":Q="lang.dictionary([";for(xa=0;xa<fa.properties.length;xa++){var ob=fa.properties[xa],eb="Identifier"===ob.key.type?"'"+ob.key.name+"'":G(da,ob.key),nb=G(da,ob.value);0<xa&&(Q+=",");Q+="lang.strCheck("+eb+",'ObjectExpression'),lang.aCheck("+nb+", 'ObjectExpression')"}return Q+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(l.nodeErrorMessage(fa,"RUNTIME","NOTSUPPORTED"));
default:throw Error(l.nodeErrorMessage(fa,"RUNTIME","UNREOGNISED"));}}catch(rb){throw rb;}}function H(da,fa){var Q=null,xa="";if("MemberExpression"===fa.argument.type)return Q=G(da,fa.argument.object),xa=!0===fa.argument.computed?G(da,fa.argument.property):"'"+fa.argument.property.name+"'","lang.memberupdate("+Q+","+xa+",'"+fa.operator+"',"+fa.prefix+")";Q=fa.argument.name.toLowerCase();if(null!==da.localScope){if(void 0!==da.localScope[Q])return"lang.update(lscope, '"+Q+"','"+fa.operator+"',"+fa.prefix+
")";if(void 0!==da.localScope._SymbolsMap[Q])return"lang.update(lscope, '"+da.localScope._SymbolsMap[Q]+"','"+fa.operator+"',"+fa.prefix+")"}if(void 0!==da.globalScope[Q])return"lang.update(gscope, '"+Q+"','"+fa.operator+"',"+fa.prefix+")";if(void 0!==da.globalScope._SymbolsMap[Q])return"lang.update(gscope, '"+da.globalScope._SymbolsMap[Q]+"','"+fa.operator+"',"+fa.prefix+")";throw Error("Variable not recognised");}function J(da,fa){var Q=G(da,fa.right),xa=null,Fa="";if("MemberExpression"===fa.left.type)return xa=
G(da,fa.left.object),Fa=!0===fa.left.computed?G(da,fa.left.property):"'"+fa.left.property.name+"'","lang.assignmember("+xa+","+Fa+",'"+fa.operator+"',"+Q+")";xa=fa.left.name.toLowerCase();if(null!==da.localScope){if(void 0!==da.localScope[xa])return"lscope['"+xa+"']\x3dlang.assign("+Q+",'"+fa.operator+"', lscope['"+xa+"'])";if(void 0!==da.localScope._SymbolsMap[xa])return"lscope['"+da.localScope._SymbolsMap[xa]+"']\x3dlang.assign("+Q+",'"+fa.operator+"', lscope['"+da.localScope._SymbolsMap[xa]+"'])"}if(void 0!==
da.globalScope[xa])return"gscope['"+xa+"']\x3dlang.assign("+Q+",'"+fa.operator+"', gscope['"+xa+"'])";if(void 0!==da.globalScope._SymbolsMap[xa])return"gscope['"+da.globalScope._SymbolsMap[xa]+"']\x3dlang.assign("+Q+",'"+fa.operator+"', gscope['"+da.globalScope._SymbolsMap[xa]+"'])";throw Error("Variable not recognised");}function I(da,fa){return"BlockStatement"===fa.type?G(da,fa):"ReturnStatement"===fa.type||"BreakStatement"===fa.type||"ContinueStatement"===fa.type?G(da,fa)+"; ":"UpdateExpression"===
fa.type?"lastStatement \x3d "+G(da,fa)+"; ":"ExpressionStatement"===fa.type?G(da,fa):"ObjectExpression"===fa.type?"lastStatement \x3d "+G(da,fa)+"; ":G(da,fa)+"; "}function K(da,fa){for(var Q="",xa=0;xa<fa.body.length;xa++)Q="ReturnStatement"===fa.body[xa].type?Q+(G(da,fa.body[xa])+"; \n"):"BreakStatement"===fa.body[xa].type?Q+(G(da,fa.body[xa])+"; \n"):"ContinueStatement"===fa.body[xa].type?Q+(G(da,fa.body[xa])+"; \n"):"UpdateExpression"===fa.body[xa].type?Q+("lastStatement \x3d "+G(da,fa.body[xa])+
"; \n"):"ObjectExpression"===fa.body[xa].type?Q+("lastStatement \x3d "+G(da,fa.body[xa])+"; \n"):Q+(G(da,fa.body[xa])+" \n");return Q}function R(da,fa){var Q=null===fa.init?null:G(da,fa.init);Q===m.voidOperation&&(Q=null);fa=fa.id.name.toLowerCase();if(null!==da.localScope){if(void 0!==da.localScope[fa])return"lscope['"+fa+"']\x3d"+Q+"; ";if(void 0!==da.localScope._SymbolsMap[fa])return"lscope['"+da.localScope._SymbolsMap[fa]+"']\x3d"+Q+"; ";var xa=X(da);da.localScope._SymbolsMap[fa]=xa;da.mangleMap[fa]=
xa;return"lscope['"+xa+"']\x3d"+Q+"; "}if(void 0!==da.globalScope[fa])return"gscope['"+fa+"']\x3d"+Q+"; ";if(void 0!==da.globalScope._SymbolsMap[fa])return"gscope['"+da.globalScope._SymbolsMap[fa]+"']\x3d"+Q+"; ";xa=X(da);da.globalScope._SymbolsMap[fa]=xa;da.mangleMap[fa]=xa;return"gscope['"+xa+"']\x3d"+Q+"; "}function W(da,fa,Q){fa=fa.toLowerCase();switch(fa){case "hasz":return da=da.hasZ,void 0===da?!1:da;case "hasm":return da=da.hasM,void 0===da?!1:da;case "spatialreference":return fa=da.spatialReference._arcadeCacheId,
void 0===fa&&(Q=!0,Object.freeze&&Object.isFrozen(da.spatialReference)&&(Q=!1),Q&&(Ba++,fa=da.spatialReference._arcadeCacheId=Ba)),da=new h({wkt:da.spatialReference.wkt,wkid:da.spatialReference.wkid}),void 0!==fa&&(da._arcadeCacheId="SPREF"+fa.toString()),da}switch(da.type){case "extent":switch(fa){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return da=da[fa],void 0!==da?da:null;case "type":return"Extent"}break;case "polygon":switch(fa){case "rings":return fa=
da.getCacheValue("_arcadeCacheId"),void 0===fa&&(Ba++,fa=Ba,da.setCacheValue("_arcadeCacheId",fa)),da=new g(da.rings,da.spatialReference,!0===da.hasZ,!0===da.hasM,fa);case "type":return"Polygon"}break;case "point":switch(fa){case "x":case "y":case "z":case "m":return void 0!==da[fa]?da[fa]:null;case "type":return"Point"}break;case "polyline":switch(fa){case "paths":return fa=da.getCacheValue("_arcadeCacheId"),void 0===fa&&(Ba++,fa=Ba,da.setCacheValue("_arcadeCacheId",fa)),da=new g(da.paths,da.spatialReference,
!0===da.hasZ,!0===da.hasM,fa);case "type":return"Polyline"}break;case "multipoint":switch(fa){case "points":return fa=da.getCacheValue("_arcadeCacheId"),void 0===fa&&(Ba++,fa=Ba,da.setCacheValue("_arcadeCacheId",fa)),da=new f(da.points,da.spatialReference,!0===da.hasZ,!0===da.hasM,fa,1);case "type":return"Multipoint"}}throw Error(l.nodeErrorMessage(Q,"RUNTIME","PROPERTYNOTFOUND"));}function P(da,fa){try{var Q=fa.name.toLowerCase();if(null!==da.localScope){if(void 0!==da.localScope[Q])return"lscope['"+
Q+"']";if(void 0!==da.localScope._SymbolsMap[Q])return"lscope['"+da.localScope._SymbolsMap[Q]+"']"}if(void 0!==da.globalScope[Q])return"gscope['"+Q+"']";if(void 0!==da.globalScope._SymbolsMap[Q])return"gscope['"+da.globalScope._SymbolsMap[Q]+"']";throw Error(l.nodeErrorMessage(fa,"RUNTIME","VARIABLENOTFOUND"));}catch(xa){throw xa;}}function S(da){return null===da?"":m.isArray(da)||m.isImmutableArray(da)?"Array":m.isDate(da)?"Date":m.isString(da)?"String":m.isBoolean(da)?"Boolean":m.isNumber(da)?"Number":
da instanceof a?"Attachment":da instanceof q?"Portal":da instanceof h?"Dictionary":da instanceof e?"Feature":da instanceof D?"Point":da instanceof r?"Polygon":da instanceof v?"Polyline":da instanceof w?"Multipoint":da instanceof z?"Extent":m.isFunctionParameter(da)?"Function":m.isFeatureSet(da)?"FeatureSet":m.isFeatureSetCollection(da)?"FeatureSetCollection":da===m.voidOperation?"":"number"===typeof da&&isNaN(da)?"Number":"Unrecognised Type"}function L(da,fa,Q,xa){try{if(m.equalityTest(fa[Q],xa))return fa[Q+
1];var Fa=fa.length-Q;return 1===Fa?fa[Q]:2===Fa?null:3===Fa?fa[Q+2]:L(da,fa,Q+2,xa)}catch(ca){throw ca;}}function aa(da,fa,Q,xa){try{if(!0===xa)return fa[Q+1];if(3===fa.length-Q)return fa[Q+2];var Fa=fa[Q+2];if(!1===m.isBoolean(Fa))throw Error("WHEN needs boolean test conditions");return aa(da,fa,Q+2,Fa)}catch(ca){throw ca;}}function ba(da,fa){var Q=da.length,xa=Math.floor(Q/2);if(0===Q)return[];if(1===Q)return[da[0]];var Fa=ba(da.slice(0,xa),fa);da=ba(da.slice(xa,Q),fa);for(Q=[];0<Fa.length||0<
da.length;)0<Fa.length&&0<da.length?(xa=fa(Fa[0],da[0]),isNaN(xa)&&(xa=0),0>=xa?(Q.push(Fa[0]),Fa=Fa.slice(1)):(Q.push(da[0]),da=da.slice(1))):0<Fa.length?(Q.push(Fa[0]),Fa=Fa.slice(1)):0<da.length&&(Q.push(da[0]),da=da.slice(1));return Q}function O(da,fa){try{var Q=da.length,xa=Math.floor(Q/2);if(0===Q)return A.resolve([]);if(1===Q)return A.resolve([da[0]]);var Fa=[O(da.slice(0,xa),fa),O(da.slice(xa,Q),fa)];return A.all(Fa).then(function(ca){return V(ca[0],ca[1],fa,[])})}catch(ca){return A.reject(ca)}}
function V(da,fa,Q,xa){return A.create(function(Fa,ca){0<da.length||0<fa.length?0<da.length&&0<fa.length?Q(da[0],fa[0]).then(function(Sa){try{isNaN(Sa)&&(Sa=1),0>=Sa?(xa.push(da[0]),da=da.slice(1)):(xa.push(fa[0]),fa=fa.slice(1)),V(da,fa,Q,xa).then(function(Qa){Fa(Qa)},ca)}catch(Qa){ca(Qa)}},ca):0<da.length?(xa.push(da[0]),da=da.slice(1),V(da,fa,Q,xa).then(function(Sa){Fa(Sa)},ca)):0<fa.length&&(xa.push(fa[0]),fa=fa.slice(1),V(da,fa,Q,xa).then(function(Sa){Fa(Sa)},ca)):Fa(xa)})}function X(da){da.symbols.symbolCounter++;
return"_T"+da.symbols.symbolCounter.toString()}function N(da){da.symbols.symbolCounter++;return"_Tvar"+da.symbols.symbolCounter.toString()}function Y(da,fa,Q){var xa={};da||(da={});Q||(Q={});xa._SymbolsMap={};xa.textformatting=1;xa.infinity=1;xa.pi=1;for(var Fa in fa)xa[Fa]=1;for(Fa in Q)xa[Fa]=1;for(Fa in da)xa[Fa]=1;return xa}function ia(da,fa){for(var Q={mode:fa,compiled:!0,functions:{},signatures:[],failDefferred:F,standardFunction:C,standardFunctionAsync:C,evaluateIdentifier:oa},xa=0;xa<da.length;xa++)da[xa].registerFunctions(Q);
if("sync"===fa){for(var Fa in Q.functions)Da[Fa]=new m.NativeFunction(Q.functions[Fa]),ya.prototype[Fa]=Da[Fa];for(xa=0;xa<Q.signatures.length;xa++)l.addFunctionDeclaration(Q.signatures[xa],"sync")}else{for(Fa in Q.functions)pa[Fa]=new m.NativeFunction(Q.functions[Fa]),wa.prototype[Fa]=pa[Fa];for(xa=0;xa<Q.signatures.length;xa++)l.addFunctionDeclaration(Q.signatures[xa],"async")}}function oa(da,fa){fa=fa.name;if("_SymbolsMap"===fa)throw"Illegal";if(0<da.localStack.length){if("_t"!==fa.substr(0,2).toLowerCase()&&
void 0!==da.localStack[da.localStack.length-1][fa])return da.localStack[da.localStack.length-1][fa];var Q=da.mangleMap[fa];if(void 0!==Q&&void 0!==da.localStack[da.localStack.length-1][Q])return da.localStack[da.localStack.length-1][Q]}if("_t"!==fa.substr(0,2).toLowerCase()&&void 0!==da.globalScope[fa]||1===da.globalScope._SymbolsMap[fa])return da.globalScope[fa];fa=da.mangleMap[fa];if(void 0!==fa)return da.globalScope[fa]}function sa(da){}Object.defineProperty(y,"__esModule",{value:!0});y.enableAsyncSupport=
y.compileScript=y.referencesFunction=y.referencesMember=y.validateScript=y.extractFieldLiterals=y.executeScript=y.extend=y.functionHelper=void 0;var Ba=0,Da={};d.registerFunctions(Da,C);c.registerFunctions(Da,C);x.registerFunctions(Da,C);n.registerFunctions(Da,C);k.registerFunctions(Da,C);u.registerFunctions(Da,C);Da["typeof"]=function(da,fa){return C(da,fa,function(Q,xa,Fa){m.pcCheck(Fa,1,1);Q=S(Fa[0]);if("Unrecognised Type"===Q)throw Error("Unrecognised Type");return Q})};Da.iif=function(da,fa){try{return C(da,
fa,function(Q,xa,Fa){m.pcCheck(Fa,3,3);if(!1===m.isBoolean(Fa[0]))throw Error("IF Function must have a boolean test condition");return Fa[0]?Fa[1]:Fa[2]})}catch(Q){throw Q;}};Da.decode=function(da,fa){try{return C(da,fa,function(Q,xa,Fa){if(2>Fa.length)throw Error("Missing Parameters");if(2===Fa.length)return Fa[1];if(0===(Fa.length-1)%2)throw Error("Must have a default value result.");return L(da,Fa,1,Fa[0])})}catch(Q){throw Q;}};Da.when=function(da,fa){try{return C(da,fa,function(Q,xa,Fa){if(3>
Fa.length)throw Error("Missing Parameters");if(0===Fa.length%2)throw Error("Must have a default value result.");Q=Fa[0];if(!1===m.isBoolean(Q))throw Error("WHEN needs boolean test conditions");return aa(da,Fa,0,Q)})}catch(Q){throw Q;}};Da.top=function(da,fa){return C(da,fa,function(Q,xa,Fa){m.pcCheck(Fa,2,2);if(m.isArray(Fa[0]))return m.toNumber(Fa[1])>=Fa[0].length?Fa[0].slice(0):Fa[0].slice(0,m.toNumber(Fa[1]));if(m.isImmutableArray(Fa[0]))return m.toNumber(Fa[1])>=Fa[0].length()?Fa[0].slice(0):
Fa[0].slice(0,m.toNumber(Fa[1]));throw Error("Top cannot accept this parameter type");})};Da.first=function(da,fa){return C(da,fa,function(Q,xa,Fa){m.pcCheck(Fa,1,1);return m.isArray(Fa[0])?0===Fa[0].length?null:Fa[0][0]:m.isImmutableArray(Fa[0])?0===Fa[0].length()?null:Fa[0].get(0):null})};Da.sort=function(da,fa){return C(da,fa,function(Q,xa,Fa){m.pcCheck(Fa,1,2);xa=Fa[0];m.isImmutableArray(xa)&&(xa=xa.toArray());if(!1===m.isArray(xa))throw Error("Illegal Argument");if(1<Fa.length){if(!1===m.isFunctionParameter(Fa[1]))throw Error("Illegal Argument");
var ca=function(ja,ka){return Aa.callfunc(Fa[1],[ja,ka],Q)};return da.isAsync?O(xa,ca):xa=ba(xa,function(ja,ka){return ca(ja,ka)})}if(0===xa.length)return[];for(var Sa={},Qa=0;Qa<xa.length;Qa++){var va=S(xa[Qa]);""!==va&&(Sa[va]=!0)}if(!0===Sa.Array||!0===Sa.Dictionary||!0===Sa.Feature||!0===Sa.Point||!0===Sa.Polygon||!0===Sa.Polyline||!0===Sa.Multipoint||!0===Sa.Extent||!0===Sa.Function)return xa.slice(0);Qa=0;va="";for(var T in Sa)Qa++,va=T;return xa=1<Qa||"String"===va?ba(xa,function(ja,ka){if(null===
ja||void 0===ja||ja===m.voidOperation)return null===ka||void 0===ka||ka===m.voidOperation?0:1;if(null===ka||void 0===ka||ka===m.voidOperation)return-1;ja=m.toString(ja);ka=m.toString(ka);return ja<ka?-1:ja===ka?0:1}):"Number"===va?ba(xa,function(ja,ka){return ja-ka}):"Boolean"===va?ba(xa,function(ja,ka){return ja===ka?0:ka?-1:1}):"Date"===va?ba(xa,function(ja,ka){return ka-ja}):xa.slice(0)})};var pa={},ra;for(ra in Da)pa[ra]=new m.NativeFunction(Da[ra]);t.registerFunctions(Da,C);for(ra in Da)Da[ra]=
new m.NativeFunction(Da[ra]);var ya=function(){};ya.prototype=Da;var wa=function(){};wa.prototype=pa;y.functionHelper={fixSpatialReference:m.fixSpatialReference,parseArguments:function(da,fa){for(var Q=[],xa=0;xa<fa.arguments.length;xa++)Q.push(G(da,fa.arguments[xa]));return Q},standardFunction:C};y.extend=ia;y.executeScript=function(da,fa){return da(fa)};y.extractFieldLiterals=function(da,fa){void 0===fa&&(fa=!1);return l.findFieldLiterals(da)};y.validateScript=function(da,fa){return l.validateScript(da,
fa,"sync")};y.referencesMember=function(da,fa){return l.referencesMember(da,fa)};y.referencesFunction=function(da,fa){return l.referencesFunction(da,fa)};var la=0,Aa={error:function(da,fa,Q){throw Error(l.nodeErrorMessage(da,fa,Q));},__awaiter:function(da,fa,Q,xa){return A.create(function(Fa,ca){function Sa(T){try{va(xa.next(T))}catch(ja){ca(ja)}}function Qa(T){try{va(xa["throw"](T))}catch(ja){ca(ja)}}function va(T){T.done?Fa(T.value):T.value&&T.value.then?T.value.then(Sa,Qa):(la++,0===la%100?setTimeout(function(){la=
0;Sa(T.value)},0):Sa(T.value))}va((xa=xa.apply(da,fa||[])).next())})},functionDepthchecker:function(da,fa){return function(){fa.depthCounter++;fa.localStack.push([]);if(64<fa.depthCounter)throw Error("Exceeded maximum function depth");var Q=da.apply(this,arguments);if(A.isPromiseLike(Q))return Q.then(function(xa){fa.depthCounter--;--fa.localStack.length;return xa});fa.depthCounter--;--fa.localStack.length;return Q}},castString:function(da){return m.toString(da)},aCheck:function(da,fa){if(m.isFunctionParameter(da))throw Error(l.nodeErrorMessage({type:fa},
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return da===m.voidOperation?null:da},Dictionary:h,Feature:e,dictionary:function(da){for(var fa={},Q=0;Q<da.length;Q+=2){if(m.isFunctionParameter(da[Q+1]))throw Error("Illegal Argument");if(!1===m.isString(da[Q]))throw Error("Illegal Argument");fa[da[Q].toString()]=da[Q+1]===m.voidOperation?null:da[Q+1]}da=new h(fa);da.immutable=!1;return da},strCheck:function(da){if(!1===m.isString(da))throw Error("Illegal Argument");return da},unary:function(da,fa){if(m.isBoolean(da)){if("!"===
fa)return!da;if("-"===fa)return-1*m.toNumber(da);if("+"===fa)return 1*m.toNumber(da);if("~"===fa)return~m.toNumber(da);throw Error(l.nodeErrorMessage({type:"UnaryExpression",operator:fa,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===fa)return-1*m.toNumber(da);if("+"===fa)return 1*m.toNumber(da);if("~"===fa)return~m.toNumber(da);throw Error(l.nodeErrorMessage({type:"UnaryExpression",operator:fa,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(da){if(!1===
m.isBoolean(da))throw Error(l.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return da},logical:function(da,fa,Q){if(m.isBoolean(da)&&m.isBoolean(fa))switch(Q){case "||":return da||fa;case "\x26\x26":return da&&fa}throw Error(l.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(da,fa,Q){switch(Q){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return m.binaryOperator(m.toNumber(da),
m.toNumber(fa),Q);case "\x3d\x3d":return m.equalityTest(da,fa);case "\x3d":return m.equalityTest(da,fa);case "!\x3d":return!m.equalityTest(da,fa);case "\x3c":return m.greaterThanLessThan(da,fa,Q);case "\x3e":return m.greaterThanLessThan(da,fa,Q);case "\x3c\x3d":return m.greaterThanLessThan(da,fa,Q);case "\x3e\x3d":return m.greaterThanLessThan(da,fa,Q);case "+":return m.isString(da)||m.isString(fa)?m.toString(da)+m.toString(fa):m.toNumber(da)+m.toNumber(fa);case "-":return m.toNumber(da)-m.toNumber(fa);
case "*":return m.toNumber(da)*m.toNumber(fa);case "/":return m.toNumber(da)/m.toNumber(fa);case "%":return m.toNumber(da)%m.toNumber(fa);default:throw Error(l.nodeErrorMessage({type:"BinaryExpression",operator:Q,left:da,right:fa},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(da,fa,Q){switch(fa){case "\x3d":return da===m.voidOperation?null:da;case "/\x3d":return m.toNumber(Q)/m.toNumber(da);case "*\x3d":return m.toNumber(Q)*m.toNumber(da);case "-\x3d":return m.toNumber(Q)-m.toNumber(da);
case "+\x3d":return m.isString(Q)||m.isString(da)?m.toString(Q)+m.toString(da):m.toNumber(Q)+m.toNumber(da);case "%\x3d":return m.toNumber(Q)%m.toNumber(da);default:throw Error(l.nodeErrorMessage({type:"AssignmentExpression",operator:fa,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(da,fa,Q,xa){var Fa=m.toNumber(da[fa]);da[fa]="++"===Q?Fa+1:Fa-1;return!1===xa?Fa:"++"===Q?Fa+1:Fa-1},graphicToFeature:function(da,fa){return null===da?null:e.createFromGraphicLikeObject(da.geometry,
da.attributes,fa)},memberupdate:function(da,fa,Q,xa){if(m.isArray(da))if(m.isNumber(fa)){0>fa&&(fa=da.length+fa);if(0>fa||fa>=da.length)throw Error("Assignment outside of array bounds");var Fa=m.toNumber(da[fa]);da[fa]="++"===Q?Fa+1:Fa-1}else throw Error("Invalid Parameter");else if(da instanceof h){if(!1===m.isString(fa))throw Error("Dictionary accessor must be a string");if(!0===da.hasField(fa))Fa=m.toNumber(da.field(fa)),da.setField(fa,"++"===Q?Fa+1:Fa-1);else throw Error("Invalid Parameter");
}else if(da instanceof e){if(!1===m.isString(fa))throw Error("Feature accessor must be a string");if(!0===da.hasField(fa))Fa=m.toNumber(da.field(fa)),da.setField(fa,"++"===Q?Fa+1:Fa-1);else throw Error("Invalid Parameter");}else{if(m.isImmutableArray(da))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===xa?Fa:"++"===Q?Fa+1:Fa-1},assignmember:function(da,fa,Q,xa){if(m.isArray(da))if(m.isNumber(fa)){0>fa&&(fa=da.length+fa);if(0>fa||fa>da.length)throw Error("Assignment outside of array bounds");
if(fa===da.length&&"\x3d"!==Q)throw Error("Invalid Parameter");da[fa]=this.assign(xa,Q,da[fa])}else throw Error("Invalid Parameter");else if(da instanceof h){if(!1===m.isString(fa))throw Error("Dictionary accessor must be a string");if(!0===da.hasField(fa))da.setField(fa,this.assign(xa,Q,da.field(fa)));else{if("\x3d"!==Q)throw Error("Invalid Parameter");da.setField(fa,this.assign(xa,Q,null))}}else if(da instanceof e){if(!1===m.isString(fa))throw Error("Feature accessor must be a string");if(!0===
da.hasField(fa))da.setField(fa,this.assign(xa,Q,da.field(fa)));else{if("\x3d"!==Q)throw Error("Invalid Parameter");da.setField(fa,this.assign(xa,Q,null))}}else{if(m.isImmutableArray(da))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(da,fa){if(null===da)throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(da instanceof h||da instanceof e){if(m.isString(fa))return da.field(fa);throw Error(l.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(da instanceof E){if(m.isString(fa))return W(da,fa,"MemberExpression");throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(m.isArray(da)){if(m.isNumber(fa)&&isFinite(fa)&&Math.floor(fa)===fa){0>fa&&(fa=da.length+fa);if(fa>=da.length||0>fa)throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));
return da[fa]}throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(m.isString(da)){if(m.isNumber(fa)&&isFinite(fa)&&Math.floor(fa)===fa){0>fa&&(fa=da.length+fa);if(fa>=da.length||0>fa)throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return da[fa]}throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME",
"INVALIDTYPE"));}if(m.isImmutableArray(da)&&m.isNumber(fa)&&isFinite(fa)&&Math.floor(fa)===fa){0>fa&&(fa=da.length()+fa);if(fa>=da.length()||0>fa)throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return da.get(fa)}throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(da,fa,Q){return da instanceof m.NativeFunction?da.fn(Q,fa):da instanceof
m.SizzleFunction?da.fn.apply(this,fa):da.apply(this,fa)}};y.compileScript=function(da,fa,Q){void 0===fa&&(fa=null);void 0===Q&&(Q=!1);null===fa&&(fa={vars:{},customfunctions:{}});fa={isAsync:Q,globalScope:Y(fa.vars,Q?pa:Da,fa.customfunctions),localScope:null,mangleMap:{},console:sa,lrucache:fa.lrucache,services:fa.services,symbols:{symbolCounter:0}};da=G(fa,da.body[0].body);""===da&&(da="lc.voidOperation; ");fa={lc:m,lang:Aa,mangles:fa.mangleMap,postProcess:function(xa){xa instanceof m.ReturnResult&&
(xa=xa.value);xa instanceof m.ImplicitResult&&(xa=xa.value);xa===m.voidOperation&&(xa=null);if(xa===m.breakResult)throw Error("Cannot return BREAK");if(xa===m.continueResult)throw Error("Cannot return CONTINUE");if(m.isFunctionParameter(xa))throw Error("Cannot return FUNCTION");return xa},prepare:function(xa,Fa){var ca=xa.spatialReference;if(null===ca||void 0===ca)ca=new B({wkid:102100});var Sa=xa.vars,Qa=xa.customfunctions,va=Fa?new wa:new ya;Sa||(Sa={});Qa||(Qa={});var T=new h({newline:"\n",tab:"\t",
singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});T.immutable=!1;va._SymbolsMap={textformatting:1,infinity:1,pi:1};va.textformatting=T;va.infinity=Number.POSITIVE_INFINITY;va.pi=Math.PI;for(var ja in Qa)va[ja]=Qa[ja],va._SymbolsMap[ja]=1;for(ja in Sa)va._SymbolsMap[ja]=1,va[ja]=Sa[ja]&&"esri.Graphic"===Sa[ja].declaredClass?e.createFromGraphic(Sa[ja]):Sa[ja];return{localStack:[],isAsync:Fa,mangleMap:this.mangles,spatialReference:ca,globalScope:va,abortSignal:void 0===xa.abortSignal||
null===xa.abortSignal?{aborted:!1}:xa.abortSignal,localScope:null,services:xa.services,console:xa.console?xa.console:sa,lrucache:xa.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",Q?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
da+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+da+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(fa)};y.enableAsyncSupport=function(){return A.create(function(da,fa){b(["./functions/geomasync"],function(Q){ia([Q],"async");da(!0)},
function(Q){fa(Q)})})}})},"esri/arcade/ArcadePortal":function(){var b=this&&this.__extends||function(){var y=function(q,a){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,e){h.__proto__=e}||function(h,e){for(var g in e)e.hasOwnProperty(g)&&(h[g]=e[g])};return y(q,a)};return function(q,a){function h(){this.constructor=q}y(q,a);q.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}();define(["require","exports","./Dictionary"],function(y,q,a){return function(h){function e(g){var f=
h.call(this)||this;f.immutable=!1;f.setField("url",g);f.immutable=!0;return f}b(e,h);return e}(a)})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(b,y,q,a,h){function e(f){var m=null;if(null!==f)if(a.isNumber(f))m=a.toNumber(f);else if(a.isBoolean(f))m=a.toBoolean(f);else if(a.isString(f))m=a.toString(f);else if(a.isDate(f))m=a.toDate(f);else if(a.isArray(f)){m=[];for(var l=0;l<f.length;l++)m.push(e(f[l]))}else{if(0===
Object.keys(f).length)return null;m=new g;m.immutable=!1;l=0;for(var d=Object.keys(f);l<d.length;l++){var c=d[l],k=f[c];void 0!==k&&m.setField(c,e(k))}m.immutable=!0}return m}var g=function(){function f(m){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=m instanceof f?m.attributes:void 0===m?{}:null===m?{}:m}f.prototype.field=function(m){var l=m.toLowerCase(),d=this.attributes[m];if(void 0!==d)return d;for(var c in this.attributes)if(c.toLowerCase()===
l)return this.attributes[c];throw Error("Field not Found : "+m);};f.prototype.setField=function(m,l){if(this.immutable)throw Error("Dictionary is Immutable");var d=m.toLowerCase();if(void 0===this.attributes[m])for(var c in this.attributes)if(c.toLowerCase()===d){this.attributes[c]=l;return}this.attributes[m]=l};f.prototype.hasField=function(m){var l=m.toLowerCase();if(void 0!==this.attributes[m])return!0;for(var d in this.attributes)if(d.toLowerCase()===l)return!0;return!1};f.prototype.keys=function(){var m=
[],l;for(l in this.attributes)m.push(l);return m=m.sort()};f.prototype.castToText=function(){var m="",l;for(l in this.attributes){""!==m&&(m+=",");var d=this.attributes[l];null==d?m+=JSON.stringify(l)+":null":a.isBoolean(d)||a.isNumber(d)||a.isString(d)?m+=JSON.stringify(l)+":"+JSON.stringify(d):d instanceof h?m+=JSON.stringify(l)+":"+a.toStringExplicit(d):d instanceof q?m+=JSON.stringify(l)+":"+a.toStringExplicit(d):d instanceof Array?m+=JSON.stringify(l)+":"+a.toStringExplicit(d):d instanceof Date?
m+=JSON.stringify(l)+":"+JSON.stringify(d):null!==d&&"object"===typeof d&&void 0!==d.castToText&&(m+=JSON.stringify(l)+":"+d.castToText())}return"{"+m+"}"};f.convertObjectToArcadeDictionary=function(m){var l=new f;l.immutable=!1;for(var d in m){var c=m[d];void 0!==c&&l.setField(d.toString(),e(c))}l.immutable=!0;return l};return f}();return g})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(b,y){return function(){function q(a){void 0===a&&(a=[]);this._elements=a}q.prototype.length=
function(){return this._elements.length};q.prototype.get=function(a){return this._elements[a]};q.prototype.toArray=function(){for(var a=[],h=0;h<this.length();h++)a.push(this.get(h));return a};return q}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline dojo/number".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t){function n(O,V,X){return""===V||null===V||void 0===V||V===X||V===X?O:O=O.split(V).join(X)}function u(O){return O instanceof L||O instanceof q||O instanceof aa}function x(O){return A(O)||E(O)||r(O)||z(O)||null===O||O===y.voidOperation||"number"===typeof O?!0:!1}function A(O){return"string"===typeof O||O instanceof String}function z(O){return"boolean"===typeof O}function E(O){return"number"===typeof O}function w(O){return O instanceof Array}function D(O){return O instanceof
a}function r(O){return O instanceof Date}function v(O,V){if(!1===isNaN(O)){if(void 0===V||null===V||""===V)return O.toString();V=n(V,"\u2030","");V=n(V,"\u00a4","");return t.format(O,{pattern:V})}return O.toString()}function B(O,V){O=y.MomentLibrary.Moment(O);return void 0===V||null===V||""===V?O.format():O.format(C(V))}function C(O){return O.replace(/(LTS)|L|l/g,function(V){return"["+V+"]"})}function F(O,V,X){switch(X){case "\x3e":return O>V;case "\x3c":return O<V;case "\x3e\x3d":return O>=V;case "\x3c\x3d":return O<=
V}return!1}function G(O,V){if(O===V||null===O&&V===y.voidOperation||null===V&&O===y.voidOperation)return!0;if(r(O)&&r(V))return O.getTime()===V.getTime();if(O instanceof h||O instanceof e)return O.equalityTest(V);if(O instanceof d&&V instanceof d){var X=void 0,N=void 0;X=O.getCacheValue("_arcadeCacheId");N=V.getCacheValue("_arcadeCacheId");if(void 0!==X&&null!==X)return X===N}return void 0!==O&&void 0!==V&&null!==O&&null!==V&&"object"===typeof O&&"object"===typeof V&&(O._arcadeCacheId===V._arcadeCacheId&&
void 0!==O._arcadeCacheId&&null!==O._arcadeCacheId||O._underlyingGraphic===V._underlyingGraphic&&void 0!==O._underlyingGraphic&&null!==O._underlyingGraphic)?!0:!1}function H(O,V){if(A(O))return O;if(null===O)return"";if(E(O))return v(O,V);if(z(O))return O.toString();if(r(O))return B(O,V);if(O instanceof m)return JSON.stringify(O.toJson());if(w(O)){V=[];for(var X=0;X<O.length;X++)V[X]=I(O[X]);return"["+V.join(",")+"]"}if(O instanceof a){V=[];for(X=0;X<O.length();X++)V[X]=I(O.get(X));return"["+V.join(",")+
"]"}return null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText():u(O)?"object, Function":""}function J(O,V){if(A(O))return O;if(null===O)return"";if(E(O))return v(O,V);if(z(O))return O.toString();if(r(O))return B(O,V);if(O instanceof m)return O instanceof f?'{"xmin":'+O.xmin.toString()+',"ymin":'+O.ymin.toString()+","+(O.hasZ?'"zmin":'+O.zmin.toString()+",":"")+(O.hasM?'"mmin":'+O.mmin.toString()+",":"")+'"xmax":'+O.xmax.toString()+',"ymax":'+O.ymax.toString()+","+(O.hasZ?'"zmax":'+
O.zmax.toString()+",":"")+(O.hasM?'"mmax":'+O.mmax.toString()+",":"")+'"spatialReference":'+W(O.spatialReference)+"}":W(O.toJson(),function(N,Y){return N.key===Y.key?0:"spatialReference"===N.key?1:"spatialReference"===Y.key||N.key<Y.key?-1:N.key>Y.key?1:0});if(w(O)){V=[];for(var X=0;X<O.length;X++)V[X]=I(O[X]);return"["+V.join(",")+"]"}if(O instanceof a){V=[];for(X=0;X<O.length();X++)V[X]=I(O.get(X));return"["+V.join(",")+"]"}return null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText():
u(O)?"object, Function":""}function I(O){return null===O?"null":z(O)||E(O)||A(O)?JSON.stringify(O):O instanceof m||O instanceof a||O instanceof Array?J(O):O instanceof Date?JSON.stringify(B(O,"")):null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText():"null"}function K(O,V){return E(O)?O:null===O||""===O?0:r(O)?NaN:z(O)?O?1:0:w(O)||""===O||void 0===O?NaN:void 0!==V&&A(O)?(V=n(V,"\u2030",""),V=n(V,"\u00a4",""),t.parse(O,{pattern:V})):O===y.voidOperation?0:Number(O)}function R(O,V){var X;
V.fields.some(function(N){N.name===O&&(X=N.domain);return!!X});return X}function W(O,V){V||(V={});"function"===typeof V&&(V={cmp:V});var X="boolean"===typeof V.cycles?V.cycles:!1,N=V.cmp&&function(ia){return function(oa){return function(sa,Ba){return ia({key:sa,value:oa[sa]},{key:Ba,value:oa[Ba]})}}}(V.cmp),Y=[];return function sa(oa){oa&&oa.toJson&&"function"===typeof oa.toJson&&(oa=oa.toJson());if(void 0!==oa){if("number"===typeof oa)return isFinite(oa)?""+oa:"null";if("object"!==typeof oa)return JSON.stringify(oa);
var Ba;if(Array.isArray(oa)){var Da="[";for(Ba=0;Ba<oa.length;Ba++)Ba&&(Da+=","),Da+=sa(oa[Ba])||"null";return Da+"]"}if(null===oa)return"null";if(-1!==Y.indexOf(oa)){if(X)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var pa=Y.push(oa)-1,ra=Object.keys(oa).sort(N&&N(oa));Da="";for(Ba=0;Ba<ra.length;Ba++){var ya=ra[Ba],wa=sa(oa[ya]);wa&&(Da&&(Da+=","),Da+=JSON.stringify(ya)+":"+wa)}Y.splice(pa,1);return"{"+Da+"}"}}(O)}function P(O,V){if(V instanceof
d)O.push([V.x,V.y]);else throw Error("Invalid Argument");}Object.defineProperty(y,"__esModule",{value:!0});y.binaryOperator=y.MomentLibrary=y.tick=y.toStringArray=y.autoCastArrayOfPointsToMultiPoint=y.autoCastArrayOfPointsToPolyline=y.autoCastArrayOfPointsToPolygon=y.autoCastFeatureToGeometry=y.stableStringify=y.getDomain=y.getDomainCode=y.getDomainValue=y.fixNullGeometry=y.fixSpatialReference=y.toBoolean=y.toDateM=y.toDate=y.toNumber=y.toStringExplicit=y.toNumberArray=y.toString=y.equalityTest=y.greaterThanLessThan=
y.standardiseDateFormat=y.formatDate=y.formatNumber=y.generateUUID=y.pcCheck=y.isDate=y.isImmutableArray=y.isFeatureSetCollection=y.isFeatureSet=y.isArray=y.isInteger=y.isNumber=y.isBoolean=y.isString=y.defaultUndefined=y.isSimpleType=y.isFunctionParameter=y.multiReplace=y.continueResult=y.breakResult=y.voidOperation=y.SizzleFunction=y.ReturnResult=y.ImplicitResult=y.NativeFunction=y.SizzleFunctionE=y.NativeFunctionE=y.ImplicitResultE=y.ReturnResultE=void 0;b=function(){return function(O){this.value=
O}}();y.ReturnResultE=b;var S=function(){return function(O){this.value=O}}();y.ImplicitResultE=S;var L=function(){return function(O){this.fn=O}}();y.NativeFunctionE=L;var aa=function(){return function(O){this.fn=O}}();y.SizzleFunctionE=aa;y.NativeFunction=L;y.ImplicitResult=S;y.ReturnResult=b;y.SizzleFunction=aa;y.voidOperation={type:"VOID"};y.breakResult={type:"BREAK"};y.continueResult={type:"CONTINUE"};y.multiReplace=n;y.isFunctionParameter=u;y.isSimpleType=x;y.defaultUndefined=function(O,V){return void 0===
O?V:O};y.isString=A;y.isBoolean=z;y.isNumber=E;y.isInteger=function(O){return"number"===typeof O&&isFinite(O)&&Math.floor(O)===O};y.isArray=w;y.isFeatureSet=function(O){return!0===(O&&O.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===O.declaredRootClass)};y.isFeatureSetCollection=function(O){return!0===(O&&O.declaredRootClass&&"esri.arcade.featureSetCollection"===O.declaredRootClass)};y.isImmutableArray=D;y.isDate=r;y.pcCheck=function(O,V,X){if(O.length<V||O.length>X)throw Error("Function called with wrong number of Parameters");
};y.generateUUID=function(){var O=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(V){var X=(O+16*Math.random())%16|0;O=Math.floor(O/16);return("x"===V?X:X&3|8).toString(16)})};y.formatNumber=v;y.formatDate=B;y.standardiseDateFormat=C;y.greaterThanLessThan=function(O,V,X){if(null===O){if(null===V||V===y.voidOperation)return F(null,null,X);if(E(V))return F(0,V,X);if(A(V)||z(V))return F(0,K(V),X);if(r(V))return F(0,V.getTime(),X)}if(O===y.voidOperation){if(null===
V||V===y.voidOperation)return F(null,null,X);if(E(V))return F(0,V,X);if(A(V)||z(V))return F(0,K(V),X);if(r(V))return F(0,V.getTime(),X)}else if(E(O)){if(E(V))return F(O,V,X);if(z(V))return F(O,K(V),X);if(null===V||V===y.voidOperation)return F(O,0,X);if(A(V))return F(O,K(V),X);if(r(V))return F(O,V.getTime(),X)}else if(A(O)){if(A(V))return F(H(O),H(V),X);if(r(V))return F(K(O),V.getTime(),X);if(E(V))return F(K(O),V,X);if(null===V||V===y.voidOperation)return F(K(O),0,X);if(z(V))return F(K(O),K(V),X)}else if(r(O)){if(r(V))return F(O,
V,X);if(null===V||V===y.voidOperation)return F(O.getTime(),0,X);if(E(V))return F(O.getTime(),V,X);if(z(V)||A(V))return F(O.getTime(),K(V),X)}else if(z(O)){if(z(V))return F(O,V,X);if(E(V))return F(K(O),K(V),X);if(r(V))return F(K(O),V.getTime(),X);if(null===V||V===y.voidOperation)return F(K(O),0,X);if(A(V))return F(K(O),K(V),X)}return!G(O,V)||"\x3c\x3d"!==X&&"\x3e\x3d"!==X?!1:!0};y.equalityTest=G;y.toString=H;y.toNumberArray=function(O){var V=[];if(!1===w(O))return null;if(O instanceof a){for(var X=
0;X<O.length();X++)V[X]=K(O.get(X));return V}for(X=0;X<O.length;X++)V[X]=K(O[X]);return V};y.toStringExplicit=J;y.toNumber=K;y.toDate=function(O,V){return r(O)?O:A(O)&&(O=y.MomentLibrary.Moment(O,[void 0===V||null===V||""===V?y.MomentLibrary.Moment.ISO_8601:V]),O.isValid())?O.toDate():null};y.toDateM=function(O,V){return r(O)?y.MomentLibrary.Moment(O):A(O)&&(O=y.MomentLibrary.Moment(O,[void 0===V||null===V||""===V?y.MomentLibrary.Moment.ISO_8601:V]),O.isValid())?O:null};y.toBoolean=function(O){return z(O)?
O:A(O)?(O=O.toLowerCase(),"true"===O?!0:!1):E(O)?0===O||isNaN(O)?!1:!0:!1};y.fixSpatialReference=function(O,V){if(null===O||void 0===O)return null;if(null===O.spatialReference||void 0===O.spatialReference)O.spatialReference=V;return O};y.fixNullGeometry=function(O){if(null===O)return null;if(O instanceof d)return"NaN"===O.x||null===O.x||isNaN(O.x)?null:O;if(O instanceof c){if(0===O.rings.length)return null;for(var V=0,X=O.rings;V<X.length;V++){var N=X[V];if(0<N.length)return O}return null}if(O instanceof
k){if(0===O.paths.length)return null;V=0;for(X=O.paths;V<X.length;V++)if(N=X[V],0<N.length)return O;return null}return O instanceof l?0===O.points.length?null:O:O instanceof f?"NaN"===O.xmin||null===O.xmin||isNaN(O.xmin)?null:O:null};y.getDomainValue=function(O,V){if(!O||!O.domain)return V;var X=null;if("string"===O.field.type||"esriFieldTypeString"===O.field.type)V=H(V);else{if(null===V||void 0===V)return null;if(""===V)return V;V=K(V)}for(var N=0;N<O.domain.codedValues.length;N++){var Y=O.domain.codedValues[N];
Y.code===V&&(X=Y)}return null===X?V:X.name};y.getDomainCode=function(O,V){if(!O||!O.domain)return V;var X=null;V=H(V);for(var N=0;N<O.domain.codedValues.length;N++){var Y=O.domain.codedValues[N];Y.name===V&&(X=Y)}return null===X?V:X.code};y.getDomain=function(O,V,X,N){void 0===X&&(X=null);if(!V||!V.fields)return null;for(var Y=null,ia=0;ia<V.fields.length;ia++){var oa=V.fields[ia];oa.name.toLowerCase()===O.toString().toLowerCase()&&(Y=oa)}if(null===Y)throw Error("Field not found");var sa,Ba;N||(N=
X&&V.typeIdField&&X._field(V.typeIdField));null!=N&&V.types.some(function(Da){return Da.id===N?((sa=Da.domains&&Da.domains[Y.name])&&"inherited"===sa.type&&(sa=R(Y.name,V),Ba=!0),!0):!1});Ba||sa||(sa=R(O,V));return{field:Y,domain:sa}};y.stableStringify=W;y.autoCastFeatureToGeometry=function(O){if(null===O)return null;for(var V=[],X=0;X<O.length;X++){var N=O[X];N&&(N.declaredClass&&"esri.arcade.Feature"===N.declaredClass||"FeatureSetReader"===N.type)?V.push(N.geometry()):V.push(N)}return V};y.autoCastArrayOfPointsToPolygon=
function(O,V){if(w(O)||D(O)){var X=!1,N=!1,Y=[];if(w(O)){for(var ia=0;ia<O.length;ia++){var oa=O[ia];P(Y,oa)}0<Y.length&&(V=O[0].spatialReference,X=O[0].hasZ,N=O[0].hasM)}else if(O instanceof e)Y=O._elements,0<Y.length&&(X=O._hasZ,N=O._hasM,V=O.get(0).spatialReference);else if(D(O)){ia=0;for(var sa=O.toArray();ia<sa.length;ia++)oa=sa[ia],P(Y,oa);0<Y.length&&(V=O.get(0).spatialReference,X=!0===O.get(0).hasZ,N=!0===O.get(0).hasM)}else throw Error("Invalid Argument");if(0===Y.length)return null;!1===
(new c({rings:[],spatialReference:{wkid:4326}})).isClockwise(Y)&&(Y=Y.slice(0).reverse());return new c({rings:[Y],spatialReference:V,hasZ:X,hasM:N})}return O};y.autoCastArrayOfPointsToPolyline=function(O,V){if(w(O)||D(O)){var X=!1,N=!1,Y=[];if(w(O)){for(var ia=0;ia<O.length;ia++){var oa=O[ia];P(Y,oa)}0<Y.length&&(V=O[0].spatialReference,X=!0===O[0].hasZ,N=!0===O[0].hasM)}else if(O instanceof e)Y=O._elements,0<Y.length&&(X=O._hasZ,N=O._hasM,V=O.get(0).spatialReference);else if(D(O)){ia=0;for(var sa=
O.toArray();ia<sa.length;ia++)oa=sa[ia],P(Y,oa);0<Y.length&&(V=O.get(0).spatialReference,X=!0===O.get(0).hasZ,N=!0===O.get(0).hasM)}return 0===Y.length?null:new k({paths:[Y],spatialReference:V,hasZ:X,hasM:N})}return O};y.autoCastArrayOfPointsToMultiPoint=function(O,V){if(w(O)||D(O)){var X=!1,N=!1,Y=[];if(w(O)){for(var ia=0;ia<O.length;ia++){var oa=O[ia];P(Y,oa)}0<Y.length&&(V=O[0].spatialReference,X=!0===O[0].hasZ,N=!0===O[0].hasM)}else if(O instanceof e)Y=O._elements,0<Y.length&&(X=O._hasZ,N=O._hasM,
V=O.get(0).spatialReference);else if(D(O)){ia=0;for(var sa=O.toArray();ia<sa.length;ia++)oa=sa[ia],P(Y,oa);0<Y.length&&(V=O.get(0).spatialReference,X=!0===O.get(0).hasZ,N=!0===O.get(0).hasM)}return 0===Y.length?null:new l({points:Y,spatialReference:V,hasZ:X,hasM:N})}return O};y.toStringArray=function(O,V){void 0===V&&(V=!1);var X=[];if(null===O)return X;if(!0===w(O)){for(var N=0;N<O.length;N++){var Y=H(O[N]);""===Y&&!0!==V||X.push(Y)}return X}if(O instanceof a){for(N=0;N<O.length();N++)Y=H(O.get(N)),
""===Y&&!0!==V||X.push(Y);return X}return x(O)?(Y=H(O),""===Y&&!0!==V||X.push(Y),X):[]};var ba=0;y.tick=function(O){ba++;return 0===ba%100?(ba=0,g.create(function(V){setTimeout(function(){V(O)},0)})):O};y.MomentLibrary={Moment:null};y.binaryOperator=function(O,V,X){switch(X){case "\x26":return O&V;case "|":return O|V;case "^":return O^V;case "\x3c\x3c":return O<<V;case "\x3e\x3e":return O>>V;case "\x3e\x3e\x3e":return O>>>V}}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],
function(b,y){return function(){return function(q,a){this.context=this.definition=null;this.definition=q;this.context=a}}()})},"esri/arcade/ImmutablePathArray":function(){var b=this&&this.__extends||function(){var y=function(q,a){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,e){h.__proto__=e}||function(h,e){for(var g in e)e.hasOwnProperty(g)&&(h[g]=e[g])};return y(q,a)};return function(q,a){function h(){this.constructor=q}y(q,a);q.prototype=null===a?Object.create(a):(h.prototype=
a.prototype,new h)}}();define(["require","exports","./ImmutableArray","./ImmutablePointArray"],function(y,q,a,h){return function(e){function g(f,m,l,d,c){f=e.call(this,f)||this;f._lazyPath=[];f._hasZ=!1;f._hasM=!1;f._hasZ=l;f._hasM=d;f._spRef=m;f._cacheId=c;return f}b(g,e);g.prototype.get=function(f){if(void 0===this._lazyPath[f]){var m=this._elements[f];if(void 0===m)return;this._lazyPath[f]=new h(m,this._spRef,this._hasZ,this._hasM,this._cacheId,f)}return this._lazyPath[f]};g.prototype.equalityTest=
function(f){return f===this?!0:null===f||!1===f instanceof g?!1:f.getUniqueHash()===this.getUniqueHash()};g.prototype.getUniqueHash=function(){return this._cacheId.toString()};return g}(a)})},"esri/arcade/ImmutablePointArray":function(){var b=this&&this.__extends||function(){var y=function(q,a){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,e){h.__proto__=e}||function(h,e){for(var g in e)e.hasOwnProperty(g)&&(h[g]=e[g])};return y(q,a)};return function(q,a){function h(){this.constructor=
q}y(q,a);q.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}();define(["require","exports","./ImmutableArray","../geometry/Point"],function(y,q,a,h){return function(e){function g(f,m,l,d,c,k){f=e.call(this,f)||this;f._lazyPt=[];f._hasZ=!1;f._hasM=!1;f._spRef=m;f._hasZ=l;f._hasM=d;f._cacheId=c;f._partId=k;return f}b(g,e);g.prototype.get=function(f){if(void 0===this._lazyPt[f]){var m=this._elements[f];if(void 0===m)return;var l=this._hasZ,d=this._hasM,c=null;c=l&&!d?new h(m[0],m[1],
m[2],void 0,this._spRef):d&&!l?new h(m[0],m[1],void 0,m[2],this._spRef):l&&d?new h(m[0],m[1],m[2],m[3],this._spRef):new h(m[0],m[1],this._spRef);c.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+f.toString());this._lazyPt[f]=c}return this._lazyPt[f]};g.prototype.equalityTest=function(f){return f===this?!0:null===f||!1===f instanceof g?!1:f.getUniqueHash()===this.getUniqueHash()};g.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};
return g}(a)})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(b,y,q,a){function h(m,l){var d=new q(l);m(function(c){return f(c).then(d.resolve)},d.reject);return d.promise}function e(m){if(m){if("function"!==typeof m.forEach){var l=Object.keys(m),d=l.map(function(k){return m[k]});return e(d).then(function(k){var t={};l.forEach(function(n,u){return t[n]=k[u]});return t})}var c=null;return h(function(k,t){var n=[],u=m.length;
0===u&&k(n);m.forEach(function(x){var A={promise:x};n.push(A);x.then(function(z){A.value=z}).catch(function(z){A.error=z}).then(function(){--u;0===u&&(c?t(Error("AbortError")):k(n))})})},function(k){c=k||"Invocation cancellation";m.forEach(function(t){return t.cancel(k)})})}}function g(m){void 0===m&&(m=void 0);var l=new q;l.resolve(m);return l.promise}function f(m){return m&&"function"===typeof m.then?m:g(m)}Object.defineProperty(y,"__esModule",{value:!0});y.createResolver=y.when=y.isPromiseLike=
y.wrapCallback=y.timeout=y.after=y.resolve=y.reject=y.first=y.eachAlwaysValues=y.eachAlways=y.createDeferred=y.create=y.filter=y.all=void 0;y.all=function(m){return a(m)};y.filter=function(m,l){var d=m.slice();return a(m.map(function(c,k){return l(c,k)})).then(function(c){return d.filter(function(k,t){return c[t]})})};y.create=h;y.createDeferred=function(m){var l=null;m=h(function(d,c){l={resolve:d,reject:c}},m);l.promise=m;l.cancel=function(){l.reject(Error("AbortError"))};return l};y.eachAlways=
e;y.eachAlwaysValues=function(m){return e(m).then(function(l){return l.filter(function(d){return!!d.value}).map(function(d){return d.value})})};y.first=function(m){return m&&m.length?h(function(l,d){for(var c=0;c<m.length;c++)m[c].then(l,d)}):g()};y.reject=function(m){var l=new q;l.reject(m);return l.promise};y.resolve=g;y.after=function(m,l){void 0===l&&(l=void 0);var d=0;return h(function(c){d=setTimeout(function(){c(l)},m)},function(){d&&(clearTimeout(d),d=0)})};y.timeout=function(m,l,d){var c=
0,k=new q(m.cancel);m.then(function(t){k.isFulfilled()||(k.resolve(t),c&&(clearTimeout(c),c=0))});m.catch(function(t){k.isFulfilled()||(k.reject(t),c&&(clearTimeout(c),c=0))});c=setTimeout(function(){k.reject(d||Error("promiseUtils:timeout"))},l);return k.promise};y.wrapCallback=function(m){var l=!1;return h(function(){m(function(d){l||g(d)})},function(){return l=!0})};y.isPromiseLike=function(m){return m&&"function"===typeof m.then};y.when=f;y.createResolver=function(m){var l,d;m=h(function(k,t){l=
k;d=t},m);var c=function(k){l(k)};c.resolve=function(k){return l(k)};c.reject=function(k){return d(k)};c.promise=m;return c}})},"esri/arcade/Attachment":function(){var b=this&&this.__extends||function(){var y=function(q,a){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,e){h.__proto__=e}||function(h,e){for(var g in e)e.hasOwnProperty(g)&&(h[g]=e[g])};return y(q,a)};return function(q,a){function h(){this.constructor=q}y(q,a);q.prototype=null===a?Object.create(a):(h.prototype=a.prototype,
new h)}}();define(["require","exports","./Dictionary"],function(y,q,a){return function(h){function e(g,f,m,l,d){var c=h.call(this)||this;c.attachmentUrl=d;c.immutable=!1;c.setField("id",g);c.setField("name",f);c.setField("contenttype",m);c.setField("size",l);c.immutable=!0;return c}b(e,h);return e}(a)})},"esri/arcade/Feature":function(){var b=this&&this.__assign||function(){b=Object.assign||function(y){for(var q,a=1,h=arguments.length;a<h;a++){q=arguments[a];for(var e in q)Object.prototype.hasOwnProperty.call(q,
e)&&(y[e]=q[e])}return y};return b.apply(this,arguments)};define("require exports ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),function(y,q,a,h,e,g,f,m,l){return function(){function d(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._adapter=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}d.createFromGraphic=function(c){var k=
new d;k._geometry=c.geometry?c.geometry:null;k.attributes=void 0===c.attributes?{}:null===c.attributes?{}:c.attributes;c._sourceLayer?(k._layer=c._sourceLayer,k._datesfixed=!1):c._layer?(k._layer=c._layer,k._datesfixed=!1):c.layer?(k._layer=c.layer,k._datesfixed=!1):c.sourceLayer&&(k._layer=c.sourceLayer,k._datesfixed=!1);return k};d.createFromArcadeFeature=function(c){var k=new d;k._datesfixed=c._datesfixed;k.attributes=c.attributes;k._geometry=c._geometry;c._layer&&(k._layer=c._layer);return k};
d.createFromArcadeDictionary=function(c){var k=new d;k.attributes=c.field("attributes");null!==k.attributes?k.attributes instanceof a?(k.attributes=k.attributes.attributes,null===k.attributes&&(k.attributes={})):k.attributes={}:k.attributes={};k._geometry=c.field("geometry");null!==k._geometry&&(k._geometry instanceof a?k._geometry=d.parseGeometryFromDictionary(k._geometry):k._geometry instanceof g||(k._geometry=null));return k};d.createFromGraphicLikeObject=function(c,k,t){void 0===t&&(t=null);var n=
new d;null===k&&(k={});n.attributes=k;n._geometry=c?c:null;n._layer=t;n._layer&&(n._datesfixed=!1);n._adapter=null;return n};d.prototype.repurposeFromGraphicLikeObject=function(c,k,t){void 0===t&&(t=null);null===k&&(k={});this.attributes=k;this._geometry=c?c:null;this._datesfixed=(this._layer=t)?!1:!0};d.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();var c="";!1===this._datesfixed&&this._fixDates();for(var k in this.attributes){""!==c&&(c+=",");var t=this.attributes[k];
null==t?c+=JSON.stringify(k)+":null":e.isBoolean(t)||e.isNumber(t)||e.isString(t)?c+=JSON.stringify(k)+":"+JSON.stringify(t):t instanceof g?c+=JSON.stringify(k)+":"+e.toStringExplicit(t):t instanceof h?c+=JSON.stringify(k)+":"+e.toStringExplicit(t):t instanceof Array?c+=JSON.stringify(k)+":"+e.toStringExplicit(t):t instanceof Date?c+=JSON.stringify(k)+":"+JSON.stringify(t):null!==t&&"object"===typeof t&&void 0!==t.castToText&&(c+=JSON.stringify(k)+":"+t.castToText())}return'{"geometry":'+(null===
this.geometry()?"null":e.toStringExplicit(this.geometry()))+',"attributes":{'+c+"}}"};d.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var c=[],k=0;k<this._layer.fields.length;k++){var t=this._layer.fields[k];"date"!==t.type&&"esriFieldTypeDate"!==t.type||c.push(t.name)}this._datefields=c;0<c.length&&this._fixDateFields(c)}this._datesfixed=!0};d.prototype._fixDateFields=function(c){this.attributes=b({},this.attributes);
for(var k=0;k<c.length;k++){var t=this.attributes[c[k]];if(null!==t)if(void 0===t)for(var n in this.attributes){if(n.toLowerCase()===c[k].toLowerCase()){t=this.attributes[n];null===t||t instanceof Date||(this.attributes[n]=new Date(t));break}}else t instanceof Date||(this.attributes[c[k]]=new Date(t))}};d.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();if(null===this._geometry)return this._geometry;this._geometry instanceof g||(this._geometry=m.fromJson(this._geometry));
return this._geometry};d.prototype.field=function(c){if(this._adapter)return this._adapter.field(c);!1===this._datesfixed&&this._fixDates();var k=this.attributes[c];if(void 0!==k)return k;k=c.toLowerCase();for(var t in this.attributes)if(t.toLowerCase()===k)return this.attributes[t];if(this._hasFieldDefinition(k))return null;throw Error("Field not Found : "+c);};d.prototype._hasFieldDefinition=function(c){if(null===this._layer)return!1;for(var k=0;k<this._layer.fields.length;k++)if(this._layer.fields[k].name.toLowerCase()===
c)return!0;return!1};d.prototype._field=function(c){var k;if(this._adapter)return null!==(k=this._adapter.field(c))&&void 0!==k?k:null;!1===this._datesfixed&&this._fixDates();k=c.toLowerCase();c=this.attributes[c];if(void 0!==c)return c;for(var t in this.attributes)if(t.toLowerCase()===k)return this.attributes[t];return null};d.prototype.setField=function(c,k){if(this.immutable)throw Error("Feature is Immutable");if(!1===e.isSimpleType(k))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(c,
k);else{var t=c.toLowerCase();if(void 0===this.attributes[c])for(var n in this.attributes)if(n.toLowerCase()===t){this.attributes[n]=k;return}this.attributes[c]=k}};d.prototype.hasField=function(c){if(this._adapter)return this._adapter.hasField(c);var k=c.toLowerCase();if(void 0!==this.attributes[c])return!0;for(var t in this.attributes)if(t.toLowerCase()===k)return!0;return this._hasFieldDefinition(k)?!0:!1};d.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var c=[],k={},t;
for(t in this.attributes)c.push(t),k[t.toLowerCase()]=1;if(null!==this._layer)for(t=0;t<this._layer.fields.length;t++){var n=this._layer.fields[t];1!==k[n.name.toLowerCase()]&&c.push(n.name)}return c=c.sort()};d.parseGeometryFromDictionary=function(c){c=d.convertDictionaryToJson(c,!0);void 0!==c.hasm&&(c.hasM=c.hasm,delete c.hasm);void 0!==c.hasz&&(c.hasZ=c.hasz,delete c.hasz);void 0!==c.spatialreference&&(c.spatialReference=c.spatialreference,delete c.spatialreference);void 0!==c.rings&&(c.rings=
this.fixPathArrays(c.rings,!0===c.hasZ,!0===c.hasZ));void 0!==c.paths&&(c.paths=this.fixPathArrays(c.paths,!0===c.hasZ,!0===c.hasM));void 0!==c.points&&(c.points=this.fixPointArrays(c.points,!0===c.hasZ,!0===c.hasM));return m.fromJson(c)};d.fixPathArrays=function(c,k,t){var n=[];if(c instanceof Array)for(var u=0;u<c.length;u++)n.push(this.fixPointArrays(c[u],k,t));else if(c instanceof h)for(u=0;u<c.length();u++)n.push(this.fixPointArrays(c.get(u),k,t));return n};d.fixPointArrays=function(c,k,t){var n=
[];if(c instanceof Array)for(var u=0;u<c.length;u++){var x=c[u];x instanceof f?k&&t?n.push([x.x,x.y,x.z,x.m]):k?n.push([x.x,x.y,x.z]):t?n.push([x.x,x.y,x.m]):n.push([x.x,x.y]):x instanceof h?n.push(x.toArray()):n.push(x)}else if(c instanceof h)for(u=0;u<c.length();u++)x=c.get(u),x instanceof f?k&&t?n.push([x.x,x.y,x.z,x.m]):k?n.push([x.x,x.y,x.z]):t?n.push([x.x,x.y,x.m]):n.push([x.x,x.y]):x instanceof h?n.push(x.toArray()):n.push(x);return n};d.convertDictionaryToJson=function(c,k){void 0===k&&(k=
!1);var t={},n;for(n in c.attributes){var u=c.attributes[n];u instanceof a&&(u=d.convertDictionaryToJson(u));k?t[n.toLowerCase()]=u:t[n]=u}return t};d.parseAttributesFromDictionary=function(c){var k={},t;for(t in c.attributes){var n=c.attributes[t];if(e.isSimpleType(n))k[t]=n;else throw Error("Illegal Argument");}return k};d.fromJson=function(c){var k=null;null!==c.geometry&&void 0!==c.geometry&&(k=m.fromJson(c.geometry));var t={};if(null!==c.attributes&&void 0!==c.attributes)for(var n in c.attributes){var u=
c.attributes[n];if(null===u)t[n]=u;else if(e.isString(u)||e.isNumber(u)||e.isBoolean(u)||e.isDate(u))t[n]=u;else throw Error("Illegal Argument");}return d.createFromGraphicLikeObject(k,t,null)};d.prototype.fullDomain=function(c,k){return null!==this._layer&&this._layer.fields?e.getDomain(c,this._layer,this,k):null};d.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(c){return{name:c.name,
code:c.id}}):[]}:null:null};d.prototype.domainValueLookup=function(c,k,t){if(null===this._layer||!this._layer.fields)return null;t=e.getDomain(c,this._layer,this,t);if(void 0===k)try{k=this.field(c)}catch(n){return null}return e.getDomainValue(t,k)};d.prototype.gdbVersion=function(){if(null===this._layer)return"";var c=this._layer.gdbVersion;return void 0===c?"":""===c&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":c};d.prototype.domainCodeLookup=function(c,k,t){if(null===
this._layer||!this._layer.fields)return null;if(void 0===k){try{k=this.field(c)}catch(n){return null}return k}c=e.getDomain(c,this._layer,this,t);return e.getDomainCode(c,k)};d.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;for(var c=[],k=0,t=this._layer.fields;k<t.length;k++)c.push(l.esriFieldToJson(t[k]));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===l.layerGeometryEsriRestConstants[this._layer.geometryType]?
"":l.layerGeometryEsriRestConstants[this._layer.geometryType],fields:c}};return d}()})},"esri/arcade/featureset/support/shared":function(){var b=this&&this.__assign||function(){b=Object.assign||function(y){for(var q,a=1,h=arguments.length;a<h;a++){q=arguments[a];for(var e in q)Object.prototype.hasOwnProperty.call(q,e)&&(y[e]=q[e])}return y};return b.apply(this,arguments)};define(["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(y,q,a,h,
e){function g(m){var l=null;m.domain&&(l="range"===m.domain.type?{type:"range",range:[m.domain.minValue,m.domain.maxValue]}:{type:"codedValue",codedValues:m.domain.toJson().codedValues});return b(b({name:m.name,type:m.type,alias:m.alias},void 0!==m.length?{length:m.length}:{}),{editable:!0===m.editable,nullable:!0===m.nullable,domain:l})}function f(m){return m instanceof Date}Object.defineProperty(q,"__esModule",{value:!0});q.stableStringify=q.extractServiceUrl=q.reduceArrayWithPromises=q.toEsriGeometryType=
q.layerFieldEsriConstants=q.layerGeometryEsriRestConstants=q.layerGeometryEsriConstants=q.callback=q.errback=q.defaultMaxRecords=q.sameGeomType=q.convertLinearUnitsToCode=q.shapeExtent=q.convertSquareUnitsToCode=q.cloneAttributes=q.equalityTest=q.isDate=q.isArray=q.isNumber=q.isBoolean=q.isString=q.IdState=q.esriFieldToJson=q.cloneField=q.FeatureServiceDatabaseType=void 0;(function(m){m[m.Standardised=0]="Standardised";m[m.StandardisedNoInterval=1]="StandardisedNoInterval";m[m.SqlServer=2]="SqlServer";
m[m.Oracle=3]="Oracle";m[m.Postgres=4]="Postgres";m[m.PGDB=5]="PGDB";m[m.FILEGDB=6]="FILEGDB";m[m.NotEvaluated=7]="NotEvaluated"})(q.FeatureServiceDatabaseType||(q.FeatureServiceDatabaseType={}));q.cloneField=function(m){return new e(g(m))};q.esriFieldToJson=g;(function(m){m[m.InFeatureSet=0]="InFeatureSet";m[m.NotInFeatureSet=1]="NotInFeatureSet";m[m.Unknown=2]="Unknown"})(q.IdState||(q.IdState={}));q.isString=function(m){return"string"===typeof m||m instanceof String};q.isBoolean=function(m){return"boolean"===
typeof m};q.isNumber=function(m){return"number"===typeof m};q.isArray=function(m){return m instanceof Array};q.isDate=f;q.equalityTest=function(m,l){return m===l?!0:f(m)&&f(l)?m.getTime()===l.getTime():!1};q.cloneAttributes=function(m){var l={},d;for(d in m)l[d]=m[d];return l};q.convertSquareUnitsToCode=function(m){if(void 0===m)return null;if("number"===typeof m)return m;switch(m.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};
q.shapeExtent=function(m){if(null===m)return null;switch(m.type){case "polygon":case "multipoint":case "polyline":return m.getExtent();case "point":return new h({xmin:m.x,ymin:m.y,xmax:m.x,ymax:m.y,spatialReference:m.spatialReference});case "extent":return m}return null};q.convertLinearUnitsToCode=function(m){if(void 0===m)return null;if("number"===typeof m||"number"===typeof m)return m;switch(m.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};
q.sameGeomType=function(m,l){return m===l||"point"===m&&"esriGeometryPoint"===l||"polyline"===m&&"esriGeometryPolyline"===l||"polygon"===m&&"esriGeometryPolygon"===l||"extent"===m&&"esriGeometryEnvelope"===l||"multipoint"===m&&"esriGeometryMultipoint"===l||"point"===l&&"esriGeometryPoint"===m||"polyline"===l&&"esriGeometryPolyline"===m||"polygon"===l&&"esriGeometryPolygon"===m||"extent"===l&&"esriGeometryEnvelope"===m||"multipoint"===l&&"esriGeometryMultipoint"===m?!0:!1};q.defaultMaxRecords=1E3;
q.errback=function(m){return function(l){m.reject(l)}};q.callback=function(m,l){return function(){try{m.apply(null,arguments)}catch(d){l.reject(d)}}};q.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};q.layerGeometryEsriRestConstants={point:"esriGeometryPoint",
polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};q.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",
single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",
esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};q.toEsriGeometryType=function(m){switch(m){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";
case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};q.reduceArrayWithPromises=function(m,l){return a.create(function(d,c){var k=a.resolve(!0);m.reduce(function(t,n,u,x){return t.then(function(A){try{return l(A,n,u,x)}catch(z){return a.reject(z)}},function(A){return a.reject(A)})},k).then(d,c)})};q.extractServiceUrl=function(m){if(void 0===m)return"";m=m.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");m=m.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return m=m.split("?")[0]};
q.stableStringify=function(m,l){l||(l={});"function"===typeof l&&(l={cmp:l});var d="boolean"===typeof l.cycles?l.cycles:!1,c=l.cmp&&function(t){return function(n){return function(u,x){return t({key:u,value:n[u]},{key:x,value:n[x]})}}}(l.cmp),k=[];return function u(n){n&&n.toJson&&"function"===typeof n.toJson&&(n=n.toJson());if(void 0!==n){if("number"===typeof n)return isFinite(n)?""+n:"null";if("object"!==typeof n)return JSON.stringify(n);var x;if(Array.isArray(n)){var A="[";for(x=0;x<n.length;x++)x&&
(A+=","),A+=u(n[x])||"null";return A+"]"}if(null===n)return"null";if(-1!==k.indexOf(n)){if(d)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var z=k.push(n)-1,E=Object.keys(n).sort(c&&c(n));A="";for(x=0;x<E.length;x++){var w=E[x],D=u(n[w]);D&&(A&&(A+=","),A+=JSON.stringify(w)+":"+D)}k.splice(z,1);return"{"+A+"}"}}(m)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),
function(b,y,q,a,h,e,g){b=b(null,{declaredClass:"esri.layers.Field",constructor:function(f){if(f&&y.isObject(f)&&(this.name=f.name,this.type=f.type,this.alias=f.alias,this.length=f.length,this.editable=f.editable,this.nullable=f.nullable,this.defaultValue=f.defaultValue,this.description=f.description?JSON.parse(f.description):null,this.isViewOverride=!!f.isViewOverride,(f=f.domain)&&y.isObject(f)))switch(f.type){case "range":this.domain=new e(f);break;case "codedValue":this.domain=new g(f)}},toJson:function(){return h.fixJson({name:this.name,
type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});y.setObject("layers.Field",b,a);return b})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(b,
y,q,a,h,e){b=b([e],{declaredClass:"esri.layers.RangeDomain",constructor:function(g){g&&y.isObject(g)&&(this.minValue=g.range[0],this.maxValue=g.range[1])},toJson:function(){var g=this.inherited(arguments);g.range=[this.minValue,this.maxValue];return h.fixJson(g)}});y.setObject("layers.RangeDomain",b,a);return b})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,y,q,a,h){b=b(null,{declaredClass:"esri.layers.Domain",constructor:function(e){e&&
y.isObject(e)&&(this.name=e.name,this.type=e.type)},toJson:function(){return h.fixJson({name:this.name,type:this.type})}});y.setObject("layers.Domain",b,a);return b})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(b,y,q,a,h,e,g){b=b([g],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(f){f&&y.isObject(f)&&(this.codedValues=f.codedValues)},getName:function(f){var m;q.some(this.codedValues,
function(l){l.code==f&&(m=l.name);return!!m});return m},toJson:function(){var f=this.inherited(arguments);f.codedValues=y.clone(this.codedValues);return e.fixJson(f)}});y.setObject("layers.CodedValueDomain",b,h);return b})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(b,y){function q(w,D){return"0"!==w.min&&D.length<Number(w.min)||"*"!==w.max&&D.length>Number(w.max)?-2:1}function a(w,D,r){if(null!==r.localScope&&void 0!==r.localScope[w.toLowerCase()]){var v=r.localScope[w.toLowerCase()];
if("FormulaFunction"===v.type||"any"===v.type)return void 0===v.signature&&(v.signature={min:"0",max:"*"}),q(v.signature,D)}return void 0!==r.globalScope[w.toLowerCase()]&&(v=r.globalScope[w.toLowerCase()],"FormulaFunction"===v.type||"any"===v.type)?(void 0===v.signature&&(v.signature={min:"0",max:"*"}),q(v.signature,D)):-1}function h(w,D){if(w)for(var r=0;r<w.length;r++)e(w[r],D)}function e(w,D){if(w&&!1!==D(w))switch(w.type){case "ArrayExpression":h(w.elements,D);break;case "AssignmentExpression":case "BinaryExpression":e(w.left,
D);e(w.right,D);break;case "BlockStatement":h(w.body,D);break;case "CallExpression":e(w.callee,D);h(w.arguments,D);break;case "ConditionalExpression":e(w.test,D);e(w.alternate,D);e(w.consequent,D);break;case "ExpressionStatement":e(w.expression,D);break;case "ForInStatement":e(w.left,D);e(w.right,D);e(w.body,D);break;case "ForStatement":e(w.init,D);e(w.test,D);e(w.update,D);e(w.body,D);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":e(w.id,D);h(w.params,D);e(w.body,
D);break;case "IfStatement":e(w.test,D);e(w.consequent,D);e(w.alternate,D);break;case "LogicalExpression":e(w.left,D);e(w.right,D);break;case "MemberExpression":e(w.object,D);e(w.property,D);break;case "ObjectExpression":h(w.properties,D);break;case "Program":h(w.body,D);break;case "Property":e(w.key,D);e(w.value,D);break;case "ReturnStatement":e(w.argument,D);break;case "UnaryExpression":e(w.argument,D);break;case "UpdateExpression":e(w.argument,D);break;case "VariableDeclaration":h(w.declarations,
D);break;case "VariableDeclarator":e(w.id,D);e(w.init,D);break;case "TemplateLiteral":h(w.expressions,D),h(w.quasis,D)}}function g(w,D){void 0===D&&(D=!0);var r=k(w,"SYNTAX","UNREOGNISED");try{switch(w.type){case "VariableDeclarator":return null!==w.init&&"FunctionExpression"===w.init.type?k(w,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==w.id.type?k(w,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==w.init?g(w.init,!1):"";case "VariableDeclaration":for(var v=0;v<w.declarations.length;v++)if(r=
g(w.declarations[v],D),""!==r)return r;return"";case "ForInStatement":r=g(w.left,D);if(""!==r)break;if("VariableDeclaration"===w.left.type){if(1<w.left.declarations.length)return k(w,"SYNTAX","ONLY1VAR");if(null!==w.left.declarations[0].init)return k(w,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==w.left.type)return k(w,"SYNTAX","LEFTNOTVAR");r=g(w.right,D);if(""!==r)break;r=g(w.body,D);if(""!==r)break;return"";case "ForStatement":if(null!==w.test&&(r=g(w.test,D),""!==r))break;if(null!==w.init&&
(r=g(w.init,D),""!==r))break;if(null!==w.update&&(r=g(w.update,D),""!==r))break;if(null!==w.body&&(r=g(w.body,D),""!==r))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":r=g(w.test,D);if(""!==r)break;if(null!==w.consequent&&(r=g(w.consequent,!1),""!==r))break;if(null!==w.alternate&&(r=g(w.alternate,!1),""!==r))break;return"";case "BlockStatement":var B=[];for(v=0;v<w.body.length;v++)"EmptyStatement"!==w.body[v].type&&
B.push(w.body[v]);w.body=B;for(v=0;v<w.body.length;v++)if(r=g(w.body[v],D),""!==r)return r;return"";case "FunctionDeclaration":return!1===D?k(w,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==w.id.type?k(w,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):g(w.body,!1);case "ReturnStatement":return null!==w.argument?g(w.argument,D):"";case "UpdateExpression":return"Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type?k(w,"SYNTAX","ASSIGNMENTTOVARSONLY"):g(w.argument,D);case "AssignmentExpression":if("Identifier"!==
w.left.type&&"MemberExpression"!==w.left.type)return k(w,"SYNTAX","ASSIGNMENTTOVARSONLY");r=g(w.left,D);if(""!==r)break;switch(w.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return k(w,"SYNTAX","OPERATORNOTRECOGNISED")}return g(w.right,!1);case "ExpressionStatement":return g(w.expression,!1);case "Identifier":r="";break;case "MemberExpression":r=g(w.object,D);if(""!==r)break;return!0===w.computed?g(w.property,D):"";case "Literal":return"";case "TemplateElement":return"";
case "CallExpression":if("Identifier"!==w.callee.type)return k(w,"SYNTAX","ONLYNODESSUPPORTED");r="";for(v=0;v<w.arguments.length;v++)if(r=g(w.arguments[v],D),""!==r)return r;return"";case "UnaryExpression":r=g(w.argument,D);break;case "BinaryExpression":r=g(w.left,D);if(""!==r)break;r=g(w.right,D);if(""!==r)break;switch(w.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return k(w,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":r=g(w.left,D);if(""!==r)break;r=g(w.right);if(""!==r)break;switch(w.operator){case "\x26\x26":case "||":break;default:return k(w,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return k(w,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":r="";for(v=0;v<w.elements.length&&(r=g(w.elements[v],D),""===r);v++);break;case "TemplateLiteral":r="";for(v=0;v<w.quasis.length;v++)if(r=g(w.quasis[v],D),
""!==r)return r;for(v=0;v<w.expressions.length&&(r=g(w.expressions[v],D),""===r);v++);break;case "ObjectExpression":r="";for(v=0;v<w.properties.length;v++){r="";if(null!==w.properties[v].key&&("Literal"!==w.properties[v].key.type&&"Identifier"!==w.properties[v].key.type&&(r=k(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===w.properties[v].key.type)){B=w.properties[v].key;var C="value"in B?B.value:null;"string"===typeof C||C instanceof String||(r=k(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===
r&&(r=g(w.properties[v],D));if(""!==r)break}break;case "Property":if("Literal"!==w.key.type&&"Identifier"!==w.key.type)return k(w,"SYNTAX","ONLYLITERAL");if("Identifier"!==w.key.type&&(r=g(w.key,D),""!==r))break;r=g(w.value,D)}return r}catch(F){throw F;}}function f(w,D){var r=k(w,"SYNTAX","UNREOGNISED"),v=null,B="";try{switch(w.type){case "VariableDeclarator":if(null!==w.init&&"FunctionExpression"===w.init.type)return k(w,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var C=null===w.init?"":f(w.init,D);if(""!==
C)return C;"Identifier"===w.id.type&&(null===D.localScope?D.globalScope[w.id.name.toLowerCase()]={type:"any"}:D.localScope[w.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":v=l(w.id.name.toLowerCase(),w);B=d(w,D);if(""!==B)return B;if(null!==D.localScope)return k(w,"SYNTAX","GLOBALFUNCTIONSONLY");v.isnative=!1;D.globalScope[w.id.name.toLowerCase()]={type:"FormulaFunction",signature:[v]};return"";case "VariableDeclaration":r="";for(var F=0;F<w.declarations.length&&(r=f(w.declarations[F],
D),""===r);F++);break;case "IfStatement":r=f(w.test,D);if(""!==r)break;if("AssignmentExpression"===w.test.type||"UpdateExpression"===w.test.type)return k(w.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==w.consequent&&(r=f(w.consequent,D),""!==r))break;if(null!==w.alternate&&(r=f(w.alternate,D),""!==r))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(F=0;F<w.body.length;F++)if(r=f(w.body[F],D),""!==r)return r;return"";case "ReturnStatement":return null!==w.argument?
f(w.argument,D):"";case "ForInStatement":if("VariableDeclaration"===w.left.type){if(1<w.left.declarations.length)return k(w,"SYNTAX","ONLY1VAR");if(null!==w.left.declarations[0].init)return k(w,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==w.left.type)return k(w,"SYNTAX","LEFTNOTVAR");r=f(w.left,D);if(""!==r)break;r=f(w.right,D);if(""!==r)break;r=f(w.body,D);if(""!==r)break;return"";case "ForStatement":if(null!==w.init&&(r=f(w.init,D),""!==r))break;if(null!==w.test&&(r=f(w.test,D),""!==r))break;
if(null!==w.body&&(r=f(w.body,D),""!==r))break;if(null!==w.update&&(r=f(w.update,D),""!==r))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type)return k(w,"SYNTAX","ASSIGNMENTTOVARSONLY");var G=!1;if("MemberExpression"===w.argument.type)return f(w.argument,D);null!==D.localScope&&void 0!==D.localScope[w.argument.name.toLowerCase()]&&(G=!0);void 0!==D.globalScope[w.argument.name.toLowerCase()]&&
(G=!0);return!1===G?"Identifier "+w.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==w.left.type&&"MemberExpression"!==w.left.type)return k(w,"SYNTAX","ASSIGNMENTTOVARSONLY");var H=f(w.right,D);if(""!==H)return H;G=!1;if("MemberExpression"===w.left.type)return H=f(w.left,D),""!==H?H:"";null!==D.localScope&&void 0!==D.localScope[w.left.name.toLowerCase()]&&(G=!0);void 0!==D.globalScope[w.left.name.toLowerCase()]&&(G=!0);return!1===G?"Identifier "+w.left.name+
" has not been declared.":"";case "ExpressionStatement":return f(w.expression,D);case "Identifier":var J=w.name.toLowerCase();if(null!==D.localScope&&void 0!==D.localScope[J])return"";r=void 0!==D.globalScope[J]?"":k(w,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":r=f(w.object,D);if(""!==r)break;return!0===w.computed?f(w.property,D):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==w.callee.type)return k(w,"SYNTAX","ONLYNODESSUPPORTED");
r="";for(F=0;F<w.arguments.length;F++)if(r=f(w.arguments[F],D),""!==r)return r;var I=a(w.callee.name,w.arguments,D);-1===I&&(r=k(w,"SYNTAX","NOTFOUND"));-2===I&&(r=k(w,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":r=f(w.argument,D);break;case "BinaryExpression":r=f(w.left,D);if(""!==r)break;r=f(w.right,D);if(""!==r)break;return"";case "LogicalExpression":r=f(w.left,D);if(""!==r)break;if("AssignmentExpression"===w.left.type||"UpdateExpression"===w.left.type)return k(w.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
r=f(w.right,D);if(""!==r)break;return"AssignmentExpression"===w.right.type||"UpdateExpression"===w.right.type?k(w.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return k(w,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":r="";for(F=0;F<w.elements.length&&(r=f(w.elements[F],D),""===r);F++);break;case "TemplateLiteral":r="";for(F=0;F<w.quasis.length;F++)if(r=f(w.quasis[F],D),""!==r)return r;for(F=0;F<w.expressions.length&&(r=f(w.expressions[F],D),""===r);F++);break;
case "ObjectExpression":r="";for(F=0;F<w.properties.length;F++){r="";if(null!==w.properties[F].key&&("Literal"!==w.properties[F].key.type&&"Identifier"!==w.properties[F].key.type&&(r=k(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===w.properties[F].key.type)){var K=w.properties[F].key,R="value"in K?K.value:null;"string"===typeof R||R instanceof String||(r=k(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===r&&(r=f(w.properties[F],D));if(""!==r)break}break;case "Property":if("Literal"!==w.key.type&&
"Identifier"!==w.key.type)return k(w,"SYNTAX","ONLYLITERAL");if("Identifier"!==w.key.type&&(r=f(w.key,D),""!==r))break;r=f(w.value,D)}return r}catch(W){throw W;}}function m(w,D){var r=!1,v=D.toLowerCase();e(w,function(B){if(r)return!1;"Identifier"===B.type&&B.name&&B.name.toLowerCase()===v&&(r=!0);return!0});return r}function l(w,D){var r=[];if(void 0!==D.params&&null!==D.params)for(var v=0;v<D.params.length;v++)r.push("any");return{name:w,return:"any",params:r}}function d(w,D){D={globalScope:D.globalScope,
localScope:{}};for(var r=0;r<w.params.length;r++)D.localScope[w.params[r].name.toLowerCase()]={type:"any"};return f(w.body,D)}function c(w,D,r,v){var B={};if(void 0===w||null===w)w={};if(void 0===r||null===r)r={};B.infinity={type:"any"};B.textformatting={type:"any"};B.pi={type:"any"};for(var C in D)"sync"===v&&void 0!==D[C].min?B[C]={type:"FormulaFunction",signature:{min:D[C].min,max:D[C].max}}:"sync"!==v&&void 0!==D[C].fmin&&(B[C]={type:"FormulaFunction",signature:{min:D[C].fmin,max:D[C].fmax}});
for(D=0;D<r.length;D++)C=r[D],B[C.name]={type:"FormulaFunction",signature:C};for(C in w)B[C]=w[C],B[C].type="any";return B}function k(w,D,r){var v="";switch(D){case "SYNTAX":v="Syntax Error: ";break;case "RUNTIME":v="Runtime Error: ";break;default:v="Syntax Error: "}try{switch(w.type){case "IfStatement":switch(r){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":v+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":v+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(r){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":v+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":v+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":v+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(r){case "GLOBALFUNCTIONSONLY":v+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":v+=" Function Definition must have an identifier"}break;case "VariableDeclaration":v+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(r){case "FUNCTIONVARIABLEDECLARATOR":v+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":v+=" Variable Definition must have an identifier"}break;case "Identifier":v+=" Identifier Not Found. ";v+=w.name;break;case "ObjectExpression":switch(r){case "OBJECTPROPERTYMUSTBESTRING":v+=" Property name must be a string"}break;case "ForStatement":switch(r){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":v+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(r){case "ONLY1VAR":v+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":v+=" Can only declare value for use with IN";break;case "LEFTNOVAR":v+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":v+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":v+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(r){case "PROPERTYNOTFOUND":v+="Cannot find member property. ";v+=
!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "OUTOFBOUNDS":v+="Out of Bounds. ";v+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "NOTFOUND":v+="Cannot call member method on null. ";v+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "INVALIDTYPE":v+="Cannot call member property on object of this type. ",v+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":""}break;case "Property":switch(r){case "ONLYLITERAL":v+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(r){case "WRONGSIGNATURE":v+="Function signature does not match: ";v+="Identifier"===w.callee.type?w.callee.name:"";break;case "ONLYNODESUPPORTED":v+="Functions must be declared.";v+="Identifier"===w.callee.type?w.callee.name:"";break;case "NOTAFUNCTION":v+="Not a Function: ";v+="Identifier"===w.callee.type?w.callee.name:"";break;case "NOTFOUND":v+="Function Not Found: "+("Identifier"===w.callee.type?
w.callee.name:"")}break;case "UnaryExpression":switch(r){case "NOTSUPPORTEDUNARYOPERATOR":v+="Operator "+w.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":v+="Unary operator "+w.operator+" cannot be used with this argument."}case "BinaryExpression":switch(r){case "OPERATORNOTRECOGNISED":v+="Binary Operator not recognised "+w.operator}break;case "LogicalExpression":switch(r){case "ONLYBOOLEAN":v+="Operator "+w.operator+" cannot be used. Only || or \x26\x26 are allowed values";
break;case "ONLYORORAND":v+="Logical Expression "+w.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":v+="Conditional statements not supported.";break;case "ArrayExpression":switch(r){case "FUNCTIONCONTEXTILLEGAL":v+=" Cannot Put Function inside Array."}break;default:v+="Expression contains unrecognised code structures."}}catch(B){throw B;}return v}function t(w,D,r){return{line:w.loc.start.line,character:w.loc.start.column,reason:k(w,D,r)}}function n(w,
D,r,v){D={globalScope:D.globalScope,localScope:{}};for(var B=0;B<w.params.length;B++)D.localScope[w.params[B].name.toLowerCase()]={type:"any"};u(w.body,D,r,v,!1)}function u(w,D,r,v,B){void 0===B&&(B=!0);if(null===w)throw Error("Unnexpexted Expression Syntax");var C=null;try{switch(w.type){case "VariableDeclarator":if(null!==w.init&&"FunctionExpression"===w.init.type){v.push(t(w,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==w.id.type?v.push(t(w,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):
(w.id.name.toLowerCase(),null===D.localScope?D.globalScope[w.id.name.toLowerCase()]={type:"any"}:D.localScope[w.id.name.toLowerCase()]={type:"any"});null!==w.init&&u(w.init,D,r,v,B);break;case "FunctionDeclaration":!1===B&&v.push(t(w,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==w.id.type&&v.push(t(w,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));C=l("",w);n(w,D,r,v);null!==D.localScope&&v.push(t(w,"SYNTAX","GLOBALFUNCTIONSONLY"));C.isnative=!1;"Identifier"===w.id.type&&(D.globalScope[w.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[C]});break;case "VariableDeclaration":for(var F=0;F<w.declarations.length;F++)u(w.declarations[F],D,r,v,B);break;case "IfStatement":null!==w.test&&(u(w.test,D,r,v,B),"AssignmentExpression"!==w.test.type&&"UpdateExpression"!==w.test.type||v.push(t(w.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==w.consequent&&u(w.consequent,D,r,v,B);null!==w.alternate&&u(w.alternate,D,r,v,B);break;case "EmptyStatement":break;case "BlockStatement":if(null!==w.body)for(F=
0;F<w.body.length;F++)u(w.body[F],D,r,v,B);break;case "ReturnStatement":null!==w.argument&&u(w.argument,D,r,v,B);break;case "ForInStatement":"VariableDeclaration"===w.left.type?(1<w.left.declarations.length&&v.push(t(w,"SYNTAX","ONLY1VAR")),null!==w.left.declarations[0].init&&v.push(t(w,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==w.left.type&&v.push(t(w,"SYNTAX","LEFTNOTVAR"));u(w.left,D,r,v,B);u(w.right,D,r,v,B);u(w.body,D,r,v,B);break;case "ForStatement":null!==w.init&&u(w.init,D,r,v,B);null!==
w.test&&u(w.test,D,r,v,B);null!==w.body&&u(w.body,D,r,v,B);null!==w.update&&u(w.update,D,r,v,B);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type)v.push(t(w,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===w.argument.type){var G=!1;!1===r&&(null!==D.localScope&&void 0!==D.localScope[w.argument.name.toLowerCase()]&&(G=!0),void 0!==D.globalScope[w.argument.name.toLowerCase()]&&(G=!0),
!1===G&&v.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,reason:"Identifier "+w.argument.name+" has not been declared."}))}"MemberExpression"===w.argument.type&&u(w.argument,D,r,v,B)}break;case "AssignmentExpression":"Identifier"!==w.left.type&&"MemberExpression"!==w.left.type&&v.push(t(w,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(w.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:v.push(t(w,"SYNTAX","OPERATORNOTRECOGNISED"))}u(w.right,
D,r,v,B);G=!1;"Identifier"===w.left.type&&(null!==D.localScope&&void 0!==D.localScope[w.left.name.toLowerCase()]&&(G=!0),void 0!==D.globalScope[w.left.name.toLowerCase()]&&(G=!0),!1===r&&!1===G&&v.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,reason:"Identifier "+w.left.name+" has not been declared."}));"MemberExpression"===w.left.type&&u(w.left,D,r,v,B);break;case "ExpressionStatement":u(w.expression,D,r,v,B);break;case "Identifier":var H=w.name.toLowerCase();if(null!==
D.localScope&&void 0!==D.localScope[H]||void 0!==D.globalScope[H])break;!1===r&&v.push(t(w,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":u(w.object,D,r,v,B);!0===w.computed&&u(w.property,D,r,v,B);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==w.callee.type&&v.push(t(w,"SYNTAX","ONLYNODESSUPPORTED"));for(F=0;F<w.arguments.length;F++)u(w.arguments[F],D,r,v,B);if("Identifier"===w.callee.type){var J=a(w.callee.name,w.arguments,D);!1===r&&-1===
J&&v.push(t(w,"SYNTAX","NOTFOUND"));-2===J&&v.push(t(w,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":u(w.argument,D,r,v,B);break;case "BinaryExpression":u(w.left,D,r,v,B);u(w.right,D,r,v,B);switch(w.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:v.push(t(w,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(w.operator){case "\x26\x26":case "||":break;
default:v.push(t(w,"SYNTAX","OPERATORNOTRECOGNISED"))}u(w.left,D,r,v,B);"AssignmentExpression"!==w.left.type&&"UpdateExpression"!==w.left.type||v.push(t(w,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));u(w.right,D,r,v,B);"AssignmentExpression"!==w.right.type&&"UpdateExpression"!==w.right.type||v.push(t(w,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":v.push(t(w,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(F=0;F<w.elements.length;F++)u(w.elements[F],
D,r,v,B);break;case "TemplateLiteral":for(F=0;F<w.quasis.length;F++)u(w.quasis[F],D,r,v,B);for(F=0;F<w.expressions.length;F++)u(w.expressions[F],D,r,v,B);break;case "ObjectExpression":for(F=0;F<w.properties.length;F++)u(w.properties[F],D,r,v,B);break;case "Property":"Literal"!==w.key.type&&"Identifier"!==w.key.type&&v.push(t(w,"SYNTAX","ONLYLITERAL"));"Literal"===w.key.type&&u(w.key,D,r,v,B);u(w.value,D,r,v,B);break;default:v.push(t(w,"SYNTAX","UNRECOGNISED"))}}catch(I){v.push({line:null===w?0:w.loc.start.line,
character:null===w?0:w.loc.start.column,reason:"Unnexpected Syntax"})}}function x(w){var D=[];e(w,function(r){"CallExpression"===r.type&&"Identifier"===r.callee.type&&D.push(r.callee.name.toLowerCase());return!0});return D}Object.defineProperty(y,"__esModule",{value:!0});y.scriptUsesFeatureSet=y.findScriptDependencies=y.findFunctionCalls=y.checkScript=y.extractAllIssues=y.extractAllIssuesInFunction=y.makeError=y.nodeErrorMessage=y.validateLanguage=y.validateScript=y.constructGlobalScope=y.validateFunction=
y.extractFunctionDeclaration=y.findFieldLiterals=y.referencesFunction=y.referencesMember=y.testValidityOfExpression=y.validateLanguageNode=y.walk=y.findFunction=y.checkFunctionSignature=y.addFunctionDeclaration=y.functionDecls=void 0;y.functionDecls={concatenate:{min:"0",max:"*"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",
max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",
max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",
max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",
max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},
boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",
max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",
max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},schema:{min:"1",max:"1"}};for(var A in y.functionDecls)y.functionDecls[A].fmin=y.functionDecls[A].min,y.functionDecls[A].fmax=y.functionDecls[A].max;var z="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" "),
E="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");y.addFunctionDeclaration=function(w,D){var r=y.functionDecls[w.name.toLowerCase()];void 0===r?"sync"===D?y.functionDecls[w.name.toLowerCase()]={min:w.min,max:w.max}:y.functionDecls[w.name.toLowerCase()]=
{fmin:w.min,fmax:w.max}:"sync"===D?(r.min=w.min,r.max=w.max):(r.fmin=w.min,r.fmax=w.max)};y.checkFunctionSignature=q;y.findFunction=a;y.walk=e;y.validateLanguageNode=g;y.testValidityOfExpression=f;y.referencesMember=m;y.referencesFunction=function(w,D){var r=!1,v=D.toLowerCase();e(w,function(B){return r?!1:"CallExpression"===B.type&&"Identifier"===B.callee.type&&B.callee.name&&B.callee.name.toLowerCase()===v?(r=!0,!1):!0});return r};y.findFieldLiterals=function(w){var D=[];e(w,function(r){if("MemberExpression"!==
r.type||"Identifier"!==r.object.type)return!0;!1===r.computed&&r.object&&r.object.name&&r.property&&"Identifier"===r.property.type&&r.property.name?D.push(r.object.name.toLowerCase()+"."+r.property.name.toLowerCase()):r.object&&r.object.name&&r.property&&"Literal"===r.property.type&&"string"===typeof r.property.value&&D.push(r.object.name.toLowerCase()+"."+r.property.value.toString().toLowerCase());return!1});return D};y.extractFunctionDeclaration=l;y.validateFunction=d;y.constructGlobalScope=c;y.validateScript=
function(w,D,r,v){void 0===r&&(r="async");void 0===v&&(v=y.functionDecls);D={globalScope:c(D.vars,v,D.customFunctions,r),localScope:null};return f(w.body[0].body,D)};y.validateLanguage=function(w){return"BlockStatement"!==w.body[0].body.type?"Invalid formula content.":g(w.body[0].body)};y.nodeErrorMessage=k;y.makeError=t;y.extractAllIssuesInFunction=n;y.extractAllIssues=u;y.checkScript=function(w,D,r,v,B){void 0===v&&(v="async");void 0===B&&(B=y.functionDecls);var C=[];if("BlockStatement"!==w.body[0].body.type)return[{line:0,
character:0,reason:"Invalid Body"}];if(null===D||void 0===D)D={vars:{},customFunctions:[]};D={globalScope:c(D.vars,B,D.customFunctions,v),localScope:null};try{u(w.body[0].body,D,r,C)}catch(F){}return C};y.findFunctionCalls=x;y.findScriptDependencies=function(w,D){void 0===D&&(D=[]);var r=null;if(void 0===w.usesFeatureSet){null===r&&(r=x(w));w.usesFeatureSet=!1;for(var v=0;v<r.length;v++)-1<z.indexOf(r[v])&&(w.usesFeatureSet=!0,w.isAsync=!0);if(!1===w.usesFeatureSet&&D&&0<D.length)for(v=0;v<D.length;v++)if(m(w,
D[v])){w.usesFeatureSet=!0;w.isAsync=!0;break}}if(void 0===w.usesGeometry)for(w.usesGeometry=!1,null===r&&(r=x(w)),v=0;v<r.length;v++)-1<E.indexOf(r[v])&&(w.usesGeometry=!0)};y.scriptUsesFeatureSet=function(w){w=x(w);for(var D=0;D<w.length;D++)if(-1<z.indexOf(w[D]))return!0;return!1}})},"esri/arcade/functions/array":function(){define(["require","exports","../languageUtils"],function(b,y,q){Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(a,h){a.array=
function(e,g){return h(e,g,function(f,m,l){q.pcCheck(l,1,2);f=q.toNumber(l[0]);if(isNaN(f)||!1===q.isInteger(f))throw Error("Invalid Parameter");l=q.defaultUndefined(l[1],null);f=Array(f);f.fill(l);return f})};a.front=function(e,g){return h(e,g,function(f,m,l){q.pcCheck(l,1,1);if(q.isImmutableArray(l[0])){if(0>=l[0].length())throw Error("Array is empty");return l[0].get(0)}if(q.isArray(l[0])){if(0>=l[0].length)throw Error("Array is empty");return l[0][0]}throw Error("Invalid Parameter");})};a.back=
function(e,g){return h(e,g,function(f,m,l){q.pcCheck(l,1,1);if(q.isImmutableArray(l[0])){if(0>=l[0].length())throw Error("Array is empty");return l[0].get(l[0].length()-1)}if(q.isArray(l[0])){if(0>=l[0].length)throw Error("Array is empty");return l[0][l[0].length-1]}throw Error("Invalid Parameter");})};a.push=function(e,g){return h(e,g,function(f,m,l){q.pcCheck(l,1,2);if(q.isArray(l[0]))return l[0][l[0].length]=l[1],l[0].length;throw Error("Invalid Parameter");})};a.pop=function(e,g){return h(e,g,
function(f,m,l){q.pcCheck(l,1,1);if(q.isArray(l[0])){if(0>=l[0].length)throw Error("Array is empty");f=l[0][l[0].length-1];--l[0].length;return f}throw Error("Invalid Parameter");})};a.erase=function(e,g){return h(e,g,function(f,m,l){q.pcCheck(l,2,2);if(q.isArray(l[0])){f=q.toNumber(l[1]);if(isNaN(f)||!1===q.isInteger(f))throw Error("Invalid Parameter");l=l[0];if(0>=l.length)throw Error("Array is empty");0>f&&(f=l.length+f);if(0>f)throw Error("Element not found");if(f>=l.length)throw Error("Index is greater than array");
l.splice(f,1);return q.voidOperation}throw Error("Invalid Parameter");})};a.insert=function(e,g){return h(e,g,function(f,m,l){q.pcCheck(l,3,3);if(q.isArray(l[0])){f=q.toNumber(l[1]);if(isNaN(f)||!1===q.isInteger(f))throw Error("Invalid Parameter");m=l[2];l=l[0];if(f>l.length)throw Error("Index is greater than array");if(0>f&&f<-1*l.length)throw Error("Index is greater than array");if(f===l.length)return l[f]=m,q.voidOperation;l.splice(f,0,m);return q.voidOperation}throw Error("Invalid Parameter");
})};a.resize=function(e,g){return h(e,g,function(f,m,l){q.pcCheck(l,2,3);if(q.isArray(l[0])){m=q.toNumber(l[1]);if(isNaN(m)||!1===q.isInteger(m))throw Error("Invalid Parameter");if(0>m)throw Error("Size cannot be negative");f=q.defaultUndefined(l[2],null);l=l[0];if(l.length>=m)return l.length=m,q.voidOperation;var d=l.length;l.length=m;for(m=d;m<l.length;m++)l[m]=f;return q.voidOperation}throw Error("Invalid Parameter");})};a.includes=function(e,g){return h(e,g,function(f,m,l){q.pcCheck(l,2,2);if(q.isArray(l[0])){var d=
l[1];f=l[0];return-1<f.findIndex(function(k){return q.equalityTest(k,d)})?!0:!1}if(q.isImmutableArray(l[0])){var c=l[1];f=l[0].toArray();return-1<f.findIndex(function(k){return q.equalityTest(k,c)})?!0:!1}throw Error("Invalid Parameter");})};a.slice=function(e,g){return h(e,g,function(f,m,l){q.pcCheck(l,1,3);if(q.isArray(l[0])){f=q.toNumber(q.defaultUndefined(l[1],0));m=q.toNumber(q.defaultUndefined(l[2],l[0].length));if(isNaN(f)||!1===q.isInteger(f))throw Error("Invalid Parameter");if(isNaN(m)||
!1===q.isInteger(m))throw Error("Invalid Parameter");var d=l[0];return d.slice(f,m)}if(q.isImmutableArray(l[0])){d=l[0];f=q.toNumber(q.defaultUndefined(l[1],0));m=q.toNumber(q.defaultUndefined(l[2],d.length()));if(isNaN(f)||!1===q.isInteger(f))throw Error("Invalid Parameter");if(isNaN(m)||!1===q.isInteger(m))throw Error("Invalid Parameter");return d.toArray().slice(f,m)}throw Error("Invalid Parameter");})};a.splice=function(e,g){return h(e,g,function(f,m,l){f=[];for(m=0;m<l.length;m++)q.isArray(l[m])?
f.push.apply(f,l[m]):q.isImmutableArray(l[m])?f.push.apply(f,l[m].toArray()):f.push(l[m]);return f})}}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils"],function(b,y,q){function a(g){g=new Date(g.getTime());var f=g.getFullYear(),m=new Date(0);m.setFullYear(f+1,0,4);m.setHours(0,0,0,0);m=h(m);var l=new Date(0);l.setFullYear(f,0,4);l.setHours(0,0,0,0);l=h(l);return g.getTime()>=m.getTime()?f+1:g.getTime()>=l.getTime()?f:f-1}function h(g){g=new Date(g.getTime());
var f=g.getDay();f=(1>f?7:0)+f-1;g.setDate(g.getDate()-f);g.setHours(0,0,0,0);return g}function e(g){return null===g?g:isNaN(g.getTime())?null:g}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(g,f){g.today=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,0,0);d=new Date;d.setHours(0,0,0,0);return d})};g.now=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,0,0);return new Date})};g.timestamp=function(m,l){return f(m,l,function(d,
c,k){q.pcCheck(k,0,0);d=new Date;return d=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())})};g.toutc=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);return null===d?null:new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())})};g.tolocal=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);
return null===d?null:q.MomentLibrary.Moment.utc([d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()]).toDate()})};g.day=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);return null===d?NaN:d.getDate()})};g.month=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);return null===d?NaN:d.getMonth()})};g.year=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);return null===
d?NaN:d.getFullYear()})};g.hour=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);return null===d?NaN:d.getHours()})};g.second=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);return null===d?NaN:d.getSeconds()})};g.millisecond=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);return null===d?NaN:d.getMilliseconds()})};g.minute=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);return null===
d?NaN:d.getMinutes()})};g.weekday=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);return null===d?NaN:d.getDay()})};g.isoweekday=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);if(null===d)return NaN;d=d.getDay();0===d&&(d=7);return d})};g.isomonth=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);return null===d?NaN:d.getMonth()+1})};g.isoweek=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);c=q.toDate(k[0]);
if(null===c)return NaN;d=h(c).getTime();c=a(c);k=new Date(0);k.setFullYear(c,0,4);k.setHours(0,0,0,0);c=h(k);d-=c.getTime();return Math.round(d/6048E5)+1})};g.isoyear=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,1,1);d=q.toDate(k[0]);return null===d?NaN:a(d)})};g.date=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,0,7);if(3===k.length)return e(new Date(q.toNumber(k[0]),q.toNumber(k[1]),q.toNumber(k[2]),0,0,0,0));if(4===k.length)return e(new Date(q.toNumber(k[0]),q.toNumber(k[1]),
q.toNumber(k[2]),q.toNumber(k[3]),0,0,0));if(5===k.length)return e(new Date(q.toNumber(k[0]),q.toNumber(k[1]),q.toNumber(k[2]),q.toNumber(k[3]),q.toNumber(k[4]),0,0));if(6===k.length)return e(new Date(q.toNumber(k[0]),q.toNumber(k[1]),q.toNumber(k[2]),q.toNumber(k[3]),q.toNumber(k[4]),q.toNumber(k[5]),0));if(7===k.length)return e(new Date(q.toNumber(k[0]),q.toNumber(k[1]),q.toNumber(k[2]),q.toNumber(k[3]),q.toNumber(k[4]),q.toNumber(k[5]),q.toNumber(k[6])));if(2===k.length){d=q.toString(k[1]);if(""===
d)return null;d=q.standardiseDateFormat(d);k=q.MomentLibrary.Moment(q.toString(k[0]),d,!0);return!0===k.isValid()?k.toDate():null}if(1===k.length){if(q.isString(k[0])){if(""===k[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(k[0]))return q.toDate(k[0]+"-01-01")}d=q.toNumber(k[0]);return!1===isNaN(d)?e(new Date(d)):q.toDate(k[0])}if(0===k.length)return new Date})};g.datediff=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,2,3);d=q.toDateM(k[0]);
c=q.toDateM(k[1]);if(null===d||null===c)return NaN;switch(q.toString(k[2]).toLowerCase()){case "days":case "day":case "d":return d.diff(c,"days",!0);case "months":case "month":return d.diff(c,"months",!0);case "minutes":case "minute":case "m":return"M"===k[2]?d.diff(c,"months",!0):d.diff(c,"minutes",!0);case "seconds":case "second":case "s":return d.diff(c,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return d.diff(c);case "hours":case "hour":case "h":return d.diff(c,"hours",!0);
case "years":case "year":case "y":return d.diff(c,"years",!0);default:return d.diff(c)}})};g.dateadd=function(m,l){return f(m,l,function(d,c,k){q.pcCheck(k,2,3);d=q.toDateM(k[0]);if(null===d)return null;c="milliseconds";switch(q.toString(k[2]).toLowerCase()){case "days":case "day":case "d":c="days";break;case "months":case "month":c="months";break;case "minutes":case "minute":case "m":c="M"===k[2]?"months":"minutes";break;case "seconds":case "second":case "s":c="seconds";break;case "milliseconds":case "millisecond":case "ms":c=
"milliseconds";break;case "hours":case "hour":case "h":c="hours";break;case "years":case "year":case "y":c="years"}d.add(q.toNumber(k[1]),c);return d.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(b,y,q,
a,h,e,g,f,m,l,d,c,k,t){Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(n,u){n.ringisclockwise=function(x,A){return u(x,A,function(z,E,w){e.pcCheck(w,1,1);z=[];if(null===w[0])return!1;if(e.isArray(w[0])){var D=0;for(w=w[0];D<w.length;D++)if(E=w[D],E instanceof l)z.push([E.x,E.y]);else throw Error("Invalid Argument");}else if(w[0]instanceof h)z=w[0]._elements;else if(e.isImmutableArray(w[0])){D=0;for(var r=w[0].toArray();D<r.length;D++)if(E=r[D],
E instanceof l)z.push([E.x,E.y]);else throw Error("Invalid Argument");0<z.length&&(w[0].get(0),w[0].get(0))}else throw Error("Invalid Argument");return 3>z.length?!1:(new d({rings:[],spatialReference:{wkid:4326}})).isClockwise(z)})};n.polygon=function(x,A){return u(x,A,function(z,E,w){e.pcCheck(w,1,1);z=null;if(w[0]instanceof q){if(z=e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),x.spatialReference),!1===z instanceof d)throw Error("Illegal Parameter");}else z=w[0]instanceof d?t.fromJson(w[0].toJson()):
e.fixSpatialReference(new d(JSON.parse(w[0])),x.spatialReference);if(null!==z&&!1===z.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(z)})};n.polyline=function(x,A){return u(x,A,function(z,E,w){e.pcCheck(w,1,1);z=null;if(w[0]instanceof q){if(z=e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),x.spatialReference),!1===z instanceof c)throw Error("Illegal Parameter");
}else z=w[0]instanceof c?t.fromJson(w[0].toJson()):e.fixSpatialReference(new c(JSON.parse(w[0])),x.spatialReference);if(null!==z&&!1===z.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(z)})};n.point=function(x,A){return u(x,A,function(z,E,w){e.pcCheck(w,1,1);z=null;if(w[0]instanceof q){if(z=e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),x.spatialReference),
!1===z instanceof l)throw Error("Illegal Parameter");}else z=w[0]instanceof l?t.fromJson(w[0].toJson()):e.fixSpatialReference(new l(JSON.parse(w[0])),x.spatialReference);if(null!==z&&!1===z.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(z)})};n.multipoint=function(x,A){return u(x,A,function(z,E,w){e.pcCheck(w,1,1);z=null;if(w[0]instanceof q){if(z=e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),
x.spatialReference),!1===z instanceof m)throw Error("Illegal Parameter");}else z=w[0]instanceof m?t.fromJson(w[0].toJson()):e.fixSpatialReference(new m(JSON.parse(w[0])),x.spatialReference);if(null!==z&&!1===z.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(z)})};n.extent=function(x,A){return u(x,A,function(z,E,w){w=e.autoCastFeatureToGeometry(w);e.pcCheck(w,1,1);z=null;
w[0]instanceof q?z=e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),x.spatialReference):w[0]instanceof l?(z={xmin:w[0].x,ymin:w[0].y,xmax:w[0].x,ymax:w[0].y,spatialReference:w[0].spatialReference.toJson()},w=w[0],w.hasZ?(z.zmin=w.z,z.zmax=w.z):w.hasM&&(z.mmin=w.m,z.mmax=w.m),z=t.fromJson(z)):z=w[0]instanceof d?t.fromJson(w[0].getExtent().toJson()):w[0]instanceof c?t.fromJson(w[0].getExtent().toJson()):w[0]instanceof m?t.fromJson(w[0].getExtent().toJson()):w[0]instanceof g?t.fromJson(w[0].toJson()):
e.fixSpatialReference(new g(JSON.parse(w[0])),x.spatialReference);if(null!==z&&!1===z.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(z)})};n.geometry=function(x,A){return u(x,A,function(z,E,w){e.pcCheck(w,1,1);z=null;z=w[0]instanceof a?e.fixSpatialReference(w[0].geometry(),x.spatialReference):w[0]instanceof q?e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),
x.spatialReference):e.fixSpatialReference(t.fromJson(JSON.parse(w[0])),x.spatialReference);if(null!==z&&!1===z.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(z)})};n.setgeometry=function(x,A){return u(x,A,function(z,E,w){e.pcCheck(w,2,2);if(w[0]instanceof a){if(!0===w[0].immutable)throw Error("Feature is Immutable");if(w[1]instanceof f||null===w[1])w[0]._geometry=w[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return e.voidOperation})};n.feature=function(x,A){return u(x,A,function(z,E,w){if(0===w.length)throw Error("Missing Parameters");z=null;if(1===w.length)if(e.isString(w[0]))z=a.fromJson(JSON.parse(w[0]));else if(w[0]instanceof a)z=a.createFromArcadeFeature(w[0]);else if(w[0]instanceof f)z=a.createFromGraphicLikeObject(w[0],null,null);else if(w[0]instanceof q)z=w[0].hasField("geometry")?w[0].field("geometry"):null,E=w[0].hasField("attributes")?
w[0].field("attributes"):null,null!==z&&z instanceof q&&(z=a.parseGeometryFromDictionary(z)),null!==E&&(E=a.parseAttributesFromDictionary(E)),z=a.createFromGraphicLikeObject(z,E,null);else throw Error("Illegal Argument");else{if(2===w.length){E=z=null;if(null!==w[0])if(w[0]instanceof f)z=w[0];else if(z instanceof q)z=a.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");if(null!==w[1])if(w[1]instanceof q)E=a.parseAttributesFromDictionary(w[1]);else throw Error("Illegal Argument");
}else{z=null;E={};if(null!==w[0])if(w[0]instanceof f)z=w[0];else if(z instanceof q)z=a.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");for(var D=1;D<w.length;D+=2){var r=e.toString(w[D]),v=w[D+1];if(null===v||void 0===v||e.isString(v)||isNaN(v)||e.isDate(v)||e.isNumber(v)||e.isBoolean(v)){if(e.isFunctionParameter(v)||!1===e.isSimpleType(v))throw Error("Illegal Argument");E[r]=v===e.voidOperation?null:v}else throw Error("Illegal Argument");}}z=a.createFromGraphicLikeObject(z,
E,null)}z._geometry=e.fixSpatialReference(z.geometry(),x.spatialReference);z.immutable=!1;return z})};n.dictionary=function(x,A){return u(x,A,function(z,E,w){if(0===w.length)return w=new q,w.immutable=!1,w;if(1===w.length&&e.isString(w[0]))try{var D=JSON.parse(w[0]),r=q.convertObjectToArcadeDictionary(D);r.immutable=!1;return r}catch(v){throw Error("Missing Parameters or Illegal Json");}if(0!==w.length%2)throw Error("Missing Parameters");z={};for(E=0;E<w.length;E+=2)if(D=e.toString(w[E]),r=w[E+1],
null===r||void 0===r||e.isString(r)||isNaN(r)||e.isDate(r)||e.isNumber(r)||e.isBoolean(r)||e.isArray(r)||e.isImmutableArray(r)){if(e.isFunctionParameter(r))throw Error("Illegal Argument");z[D]=r===e.voidOperation?null:r}else throw Error("Illegal Argument");w=new q(z);w.immutable=!1;return w})};n.haskey=function(x,A){return u(x,A,function(z,E,w){e.pcCheck(w,2,2);z=e.toString(w[1]);if(w[0]instanceof a||w[0]instanceof q)return w[0].hasField(z);throw Error("Illegal Argument");})};n.indexof=function(x,
A){return u(x,A,function(z,E,w){e.pcCheck(w,2,2);z=w[1];if(e.isArray(w[0])){for(E=0;E<w[0].length;E++)if(e.equalityTest(z,w[0][E]))return E;return-1}if(e.isImmutableArray(w[0])){var D=w[0].length();for(E=0;E<D;E++)if(e.equalityTest(z,w[0].get(E)))return E;return-1}throw Error("Illegal Argument");})};n.angle=function(x,A){return u(x,A,function(z,E,w){w=e.autoCastFeatureToGeometry(w);e.pcCheck(w,2,3);if(!(w[0]instanceof l))throw Error("Illegal Argument");if(!(w[1]instanceof l))throw Error("Illegal Argument");
if(2<w.length&&!(w[2]instanceof l))throw Error("Illegal Argument");return 2===w.length?k.angle2D(w[0],w[1]):k.angleBetween2D(w[0],w[1],w[2])})};n.bearing=function(x,A){return u(x,A,function(z,E,w){w=e.autoCastFeatureToGeometry(w);e.pcCheck(w,2,3);if(!(w[0]instanceof l))throw Error("Illegal Argument");if(!(w[1]instanceof l))throw Error("Illegal Argument");if(2<w.length&&!(w[2]instanceof l))throw Error("Illegal Argument");return 2===w.length?k.bearing2D(w[0],w[1]):k.bearingBetween2D(w[0],w[1],w[2])})};
n.isselfintersecting=function(x,A){return u(x,A,function(z,E,w){w=e.autoCastFeatureToGeometry(w);e.pcCheck(w,1,1);z=w[0];if(z instanceof d)return z.isSelfIntersecting(z);if(z instanceof c)return z=z.paths,k.pathsSelfIntersecting(z);if(z instanceof m)for(E=z.points,w=0;w<E.length;w++)for(var D=0;D<E.length;D++)if(D!==w){for(var r=!0,v=0;v<E[w].length;v++)if(E[w][v]!==E[D][v]){r=!1;break}if(!0===r)return!0}return e.isArray(z)||e.isImmutableArray(z)?(z=e.autoCastArrayOfPointsToPolyline(z,x.spatialReference),
null!==z&&(z=z.paths),k.pathsSelfIntersecting(z)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(b,y,q){function a(d,c,k){var t={x:0,y:0};c&&(t.z=0);k&&(t.m=0);for(var n=0,u=d[0],x=0;x<d.length;x++){var A=d[x];a:if(A.length!==u.length)var z=!1;else{for(z=0;z<A.length;z++)if(A[z]!==u[z]){z=!1;break a}z=!0}if(!1===z){z=h(u,A,c);var E=A,w=c,D=k,r={x:(u[0]+E[0])/2,y:(u[1]+E[1])/2};w&&(r.z=(u[2]+E[2])/2);w&&D?r.m=(u[3]+E[3])/2:D&&(r.m=
(u[2]+E[2])/2);u=r;u.x*=z;u.y*=z;t.x+=u.x;t.y+=u.y;c&&(u.z*=z,t.z+=u.z);k&&(u.m*=z,t.m+=u.m);n+=z;u=A}}0<n?(t.x/=n,t.y/=n,c&&(t.z/=n),k&&(t.m/=n)):(t.x=d[0][0],t.y=d[0][1],c&&(t.z=d[0][2]),k&&c?t.m=d[0][3]:k&&(t.m=d[0][2]));return t}function h(d,c,k){var t=c[0]-d[0];d=c[1]-d[1];return k?(c=c[2]-c[2],Math.sqrt(t*t+d*d+c*c)):Math.sqrt(t*t+d*d)}function e(d,c,k){for(void 0===k&&(k=0);d<k;)d+=c;for(k+=c;d>=k;)d-=c;return d}function g(d,c){return Math.atan2(c.y-d.y,c.x-d.x)}function f(d,c,k){var t=d.x-
c.x;d=d.y-c.y;var n=k.x-c.x;c=k.y-c.y;return Math.atan2(t*c-n*d,t*n+d*c)}function m(d,c,k,t,n){var u=d[0];d=d[1];var x=c[0];c=c[1];var A=k[0],z=k[1];k=t[0]-A;A=u-A;var E=x-u;t=t[1]-z;z=d-z;var w=c-d,D=t*E-k*w;if(0===D)return!1;k=(k*z-t*A)/D;A=(E*z-w*A)/D;return 0<=k&&1>=k&&0<=A&&1>=A?(n&&(n[0]=u+k*(x-u),n[1]=d+k*(c-d)),!0):!1}Object.defineProperty(y,"__esModule",{value:!0});y.pathsSelfIntersecting=y.bearingBetween2D=y.angleBetween2D=y.angleBetweenRad=y.bearing2D=y.angle2D=y.angleRad=y.centroidMultiPoint=
y.centroidPolyline=void 0;y.centroidPolyline=function(d){for(var c={x:0,y:0,spatialReference:d.spatialReference.toJson()},k={x:0,y:0,spatialReference:d.spatialReference.toJson()},t=0,n=0,u=0;u<d.paths.length;u++)if(0!==d.paths[u].length){var x=d.paths[u];var A=!0===d.hasZ;if(1>=x.length)x=0;else{for(var z=0,E=1;E<x.length;E++)z+=h(x[E-1],x[E],A);x=z}0===x?(A=a(d.paths[u],!0===d.hasZ,!0===d.hasM),c.x+=A.x,c.y+=A.y,!0===d.hasZ&&(c.z+=A.z),!0===d.hasM&&(c.m+=A.m),++t):(A=a(d.paths[u],!0===d.hasZ,!0===
d.hasM),k.x+=A.x*x,k.y+=A.y*x,!0===d.hasZ&&(k.z+=A.z*x),!0===d.hasM&&(k.m+=A.m*x),n+=x)}return 0<n?(k.x/=n,k.y/=n,!0===d.hasZ&&(k.z/=n),!0===d.hasM&&(k.m/=n),new q(k)):0<t?(c.x/=t,c.y/=t,!0===d.hasZ&&(k.z/=t),!0===d.hasM&&(c.m/=t),new q(c)):null};y.centroidMultiPoint=function(d){if(0===d.points.length)return null;for(var c=0,k=0,t=0,n=0,u=0;u<d.points.length;u++){var x=d.getPoint(u);!0===x.hasZ&&(t+=x.z);!0===x.hasM&&(n+=x.m);c+=x.x;k+=x.y;n+=x.m}c={x:c/d.points.length,y:k/d.points.length,spatialReference:null};
c.spatialReference=d.spatialReference.toJson();!0===d.hasZ&&(c.z=t/d.points.length);!0===d.hasM&&(c.m=n/d.points.length);return new q(c)};y.angleRad=g;y.angle2D=function(d,c){return e(g(d,c),2*Math.PI)*(180/Math.PI)};y.bearing2D=function(d,c){return e(Math.PI/2-g(d,c),2*Math.PI)*(180/Math.PI)};y.angleBetweenRad=f;y.angleBetween2D=function(d,c,k){return e(f(d,c,k),2*Math.PI)*(180/Math.PI)};y.bearingBetween2D=function(d,c,k){return e(-1*f(d,c,k),2*Math.PI)*(180/Math.PI)};var l=[0,0];y.pathsSelfIntersecting=
function(d){for(var c=0;c<d.length;c++){for(var k=d[c],t=0;t<k.length-1;t++)for(var n=k[t],u=k[t+1],x=c+1;x<d.length;x++)for(var A=0;A<d[x].length-1;A++){var z=d[x][A],E=d[x][A+1],w=m(n,u,z,E,l);if(w&&!(l[0]===n[0]&&l[1]===n[1]||l[0]===z[0]&&l[1]===z[1]||l[0]===u[0]&&l[1]===u[1]||l[0]===E[0]&&l[1]===E[1]))return!0}A=k.length;if(!(3>A))for(t=0;t<=A-2;t++)for(n=k[t],u=k[t+1],x=t+2;x<=A-2;x++)if(z=k[x],E=k[x+1],(w=m(n,u,z,E,l))&&!(l[0]===n[0]&&l[1]===n[1]||l[0]===z[0]&&l[1]===z[1]||l[0]===u[0]&&l[1]===
u[1]||l[0]===E[0]&&l[1]===E[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k){function t(u){return 0===q.version.indexOf("4.")?d.fromExtent(u):new d({spatialReference:u.spatialReference,rings:[[[u.xmin,
u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]]]})}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=y.setGeometryEngine=void 0;var n=null;y.setGeometryEngine=function(u){n=u};y.registerFunctions=function(u,x){function A(z){h.pcCheck(z,2,2);if(!(z[0]instanceof f&&z[1]instanceof f||z[0]instanceof f&&null===z[1]||z[1]instanceof f&&null===z[0]||null===z[0]&&null===z[1]))throw Error("Illegal Argument");}u.disjoint=function(z,E){return x(z,E,function(w,D,r){r=
h.autoCastFeatureToGeometry(r);A(r);return null===r[0]||null===r[1]?!0:n.disjoint(r[0],r[1])})};u.intersects=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);A(r);return null===r[0]||null===r[1]?!1:n.intersects(r[0],r[1])})};u.touches=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);A(r);return null===r[0]||null===r[1]?!1:n.touches(r[0],r[1])})};u.crosses=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);A(r);return null===
r[0]||null===r[1]?!1:n.crosses(r[0],r[1])})};u.within=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);A(r);return null===r[0]||null===r[1]?!1:n.within(r[0],r[1])})};u.contains=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);A(r);return null===r[0]||null===r[1]?!1:n.contains(r[0],r[1])})};u.overlaps=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);A(r);return null===r[0]||null===r[1]?!1:n.overlaps(r[0],r[1])})};u.equals=
function(z,E){return x(z,E,function(w,D,r){h.pcCheck(r,2,2);return r[0]===r[1]?!0:r[0]instanceof f&&r[1]instanceof f?n.equals(r[0],r[1]):h.isDate(r[0])&&h.isDate(r[1])?r[0].getTime()===r[1].getTime():!1})};u.relate=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,3,3);if(r[0]instanceof f&&r[1]instanceof f)return n.relate(r[0],r[1],h.toString(r[2]));if(r[0]instanceof f&&null===r[1]||r[1]instanceof f&&null===r[0]||null===r[0]&&null===r[1])return!1;throw Error("Illegal Argument");
})};u.intersection=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);A(r);return null===r[0]||null===r[1]?null:n.intersect(r[0],r[1])})};u.union=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);w=[];if(0===r.length)throw Error("Function called with wrong number of Parameters");if(1===r.length)if(h.isArray(r[0]))for(r=h.autoCastFeatureToGeometry(r[0]),D=0;D<r.length;D++){if(null!==r[D]){if(!(r[D]instanceof f))throw Error("Illegal Argument");w.push(r[D])}}else if(h.isImmutableArray(r[0]))for(r=
h.autoCastFeatureToGeometry(r[0].toArray()),D=0;D<r.length;D++){if(null!==r[D]){if(!(r[D]instanceof f))throw Error("Illegal Argument");w.push(r[D])}}else{if(r[0]instanceof f)return h.fixSpatialReference(a.cloneGeometry(r[0]),z.spatialReference);if(null===r[0])return null;throw Error("Illegal Argument");}else for(D=0;D<r.length;D++)if(null!==r[D]){if(!(r[D]instanceof f))throw Error("Illegal Argument");w.push(r[D])}return 0===w.length?null:n.union(w)})};u.difference=function(z,E){return x(z,E,function(w,
D,r){r=h.autoCastFeatureToGeometry(r);A(r);return null!==r[0]&&null===r[1]?a.cloneGeometry(r[0]):null===r[0]?null:n.difference(r[0],r[1])})};u.symmetricdifference=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);A(r);return null===r[0]&&null===r[1]?null:null===r[0]?a.cloneGeometry(r[1]):null===r[1]?a.cloneGeometry(r[0]):n.symmetricDifference(r[0],r[1])})};u.clip=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,2,2);if(!(r[1]instanceof
g)&&null!==r[1])throw Error("Illegal Argument");if(null===r[0])return null;if(!(r[0]instanceof f))throw Error("Illegal Argument");return null===r[1]?null:n.clip(r[0],r[1])})};u.cut=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,2,2);if(!(r[1]instanceof c)&&null!==r[1])throw Error("Illegal Argument");if(null===r[0])return[];if(!(r[0]instanceof f))throw Error("Illegal Argument");return null===r[1]?[a.cloneGeometry(r[0])]:n.cut(r[0],r[1])})};u.area=function(z,
E){return x(z,E,function(w,D,r){h.pcCheck(r,1,2);r=h.autoCastFeatureToGeometry(r);if(null===r[0])return 0;if(h.isArray(r[0])||h.isImmutableArray(r[0]))return w=h.autoCastArrayOfPointsToPolygon(r[0],z.spatialReference),null===w?0:n.planarArea(w,a.convertSquareUnitsToCode(h.defaultUndefined(r[1],-1)));if(!(r[0]instanceof f))throw Error("Illegal Argument");return n.planarArea(r[0],a.convertSquareUnitsToCode(h.defaultUndefined(r[1],-1)))})};u.areageodetic=function(z,E){return x(z,E,function(w,D,r){h.pcCheck(r,
1,2);r=h.autoCastFeatureToGeometry(r);if(null===r[0])return 0;if(h.isArray(r[0])||h.isImmutableArray(r[0]))return w=h.autoCastArrayOfPointsToPolygon(r[0],z.spatialReference),null===w?0:n.geodesicArea(w,a.convertSquareUnitsToCode(h.defaultUndefined(r[1],-1)));if(!(r[0]instanceof f))throw Error("Illegal Argument");return n.geodesicArea(r[0],a.convertSquareUnitsToCode(h.defaultUndefined(r[1],-1)))})};u.length=function(z,E){return x(z,E,function(w,D,r){h.pcCheck(r,1,2);r=h.autoCastFeatureToGeometry(r);
if(null===r[0])return 0;if(h.isArray(r[0])||h.isImmutableArray(r[0]))return w=h.autoCastArrayOfPointsToPolyline(r[0],z.spatialReference),null===w?0:n.planarLength(w,a.convertLinearUnitsToCode(h.defaultUndefined(r[1],-1)));if(!(r[0]instanceof f))throw Error("Illegal Argument");return n.planarLength(r[0],a.convertLinearUnitsToCode(h.defaultUndefined(r[1],-1)))})};u.lengthgeodetic=function(z,E){return x(z,E,function(w,D,r){h.pcCheck(r,1,2);r=h.autoCastFeatureToGeometry(r);if(null===r[0])return 0;if(h.isArray(r[0])||
h.isImmutableArray(r[0]))return w=h.autoCastArrayOfPointsToPolyline(r[0],z.spatialReference),null===w?0:n.geodesicLength(w,a.convertLinearUnitsToCode(h.defaultUndefined(r[1],-1)));if(!(r[0]instanceof f))throw Error("Illegal Argument");return n.geodesicLength(r[0],a.convertLinearUnitsToCode(h.defaultUndefined(r[1],-1)))})};u.distance=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,2,3);w=r[0];if(h.isArray(r[0])||h.isImmutableArray(r[0]))w=h.autoCastArrayOfPointsToMultiPoint(r[0],
z.spatialReference);D=r[1];if(h.isArray(r[1])||h.isImmutableArray(r[1]))D=h.autoCastArrayOfPointsToMultiPoint(r[1],z.spatialReference);if(!(w instanceof f))throw Error("Illegal Argument");if(!(D instanceof f))throw Error("Illegal Argument");return n.distance(w,D,a.convertLinearUnitsToCode(h.defaultUndefined(r[2],-1)))})};u.distancegeodetic=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,2,3);w=r[0];D=r[1];if(!(w instanceof l))throw Error("Illegal Argument");
if(!(D instanceof l))throw Error("Illegal Argument");var v=new c({paths:[],spatialReference:w.spatialReference});v.addPath([w,D]);return n.geodesicLength(v,a.convertLinearUnitsToCode(h.defaultUndefined(r[2],-1)))})};u.densify=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,2,3);if(null===r[0])return null;if(!(r[0]instanceof f))throw Error("Illegal Argument");w=h.toNumber(r[1]);if(isNaN(w))throw Error("Illegal Argument");if(0>=w)throw Error("Illegal Argument");
return r[0]instanceof d||r[0]instanceof c?n.densify(r[0],w,a.convertLinearUnitsToCode(h.defaultUndefined(r[2],-1))):r[0]instanceof g?n.densify(t(r[0]),w,a.convertLinearUnitsToCode(h.defaultUndefined(r[2],-1))):r[0]})};u.densifygeodetic=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,2,3);if(null===r[0])return null;if(!(r[0]instanceof f))throw Error("Illegal Argument");w=h.toNumber(r[1]);if(isNaN(w))throw Error("Illegal Argument");if(0>=w)throw Error("Illegal Argument");
return r[0]instanceof d||r[0]instanceof c?n.geodesicDensify(r[0],w,a.convertLinearUnitsToCode(h.defaultUndefined(r[2],-1))):r[0]instanceof g?n.geodesicDensify(t(r[0]),w,a.convertLinearUnitsToCode(h.defaultUndefined(r[2],-1))):r[0]})};u.generalize=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,2,4);if(null===r[0])return null;if(!(r[0]instanceof f))throw Error("Illegal Argument");w=h.toNumber(r[1]);if(isNaN(w))throw Error("Illegal Argument");return n.generalize(r[0],
w,h.toBoolean(h.defaultUndefined(r[2],!0)),a.convertLinearUnitsToCode(h.defaultUndefined(r[3],-1)))})};u.buffer=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,2,3);if(null===r[0])return null;if(!(r[0]instanceof f))throw Error("Illegal Argument");w=h.toNumber(r[1]);if(isNaN(w))throw Error("Illegal Argument");return 0===w?a.cloneGeometry(r[0]):n.buffer(r[0],w,a.convertLinearUnitsToCode(h.defaultUndefined(r[2],-1)))})};u.buffergeodetic=function(z,E){return x(z,
E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,2,3);if(null===r[0])return null;if(!(r[0]instanceof f))throw Error("Illegal Argument");w=h.toNumber(r[1]);if(isNaN(w))throw Error("Illegal Argument");return 0===w?a.cloneGeometry(r[0]):n.geodesicBuffer(r[0],w,a.convertLinearUnitsToCode(h.defaultUndefined(r[2],-1)))})};u.offset=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,2,6);if(null===r[0])return null;if(!(r[0]instanceof d||r[0]instanceof c))throw Error("Illegal Argument");
w=h.toNumber(r[1]);if(isNaN(w))throw Error("Illegal Argument");D=h.toNumber(h.defaultUndefined(r[4],10));if(isNaN(D))throw Error("Illegal Argument");var v=h.toNumber(h.defaultUndefined(r[5],0));if(isNaN(v))throw Error("Illegal Argument");return n.offset(r[0],w,a.convertLinearUnitsToCode(h.defaultUndefined(r[2],-1)),h.toString(h.defaultUndefined(r[3],"round")).toLowerCase(),D,v)})};u.rotate=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,2,3);w=r[0];if(null===
w)return null;if(!(w instanceof f))throw Error("Illegal Argument");w instanceof g&&(w=d.fromExtent(w));D=h.toNumber(r[1]);if(isNaN(D))throw Error("Illegal Argument");r=h.defaultUndefined(r[2],null);if(null===r)return n.rotate(w,D);if(r instanceof l)return n.rotate(w,D,r);throw Error("Illegal Argument");})};u.centroid=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,1,1);if(null===r[0])return null;w=r[0];if(h.isArray(r[0])||h.isImmutableArray(r[0]))w=h.autoCastArrayOfPointsToMultiPoint(r[0],
z.spatialReference);if(null===w)return null;if(!(w instanceof f))throw Error("Illegal Argument");return w instanceof l?h.fixSpatialReference(a.cloneGeometry(r[0]),z.spatialReference):w instanceof d?w.getCentroid():w instanceof c?e.centroidPolyline(w):w instanceof m?e.centroidMultiPoint(w):w instanceof g?w.getCenter():null})};u.multiparttosinglepart=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,1,1);D=[];if(null===r[0])return null;if(!(r[0]instanceof f))throw Error("Illegal Argument");
if(r[0]instanceof l||r[0]instanceof g)return[h.fixSpatialReference(a.cloneGeometry(r[0]),z.spatialReference)];w=n.simplify(r[0]);if(w instanceof d){D=[];var v=[];for(r=0;r<w.rings.length;r++)if(w.isClockwise(w.rings[r])){var B=k.fromJson({rings:[w.rings[r]],hasZ:!0===w.hasZ,hasM:!0===w.hasM,spatialReference:w.spatialReference.toJson()});D.push(B)}else v.push({ring:w.rings[r],pt:w.getPoint(r,0)});for(w=0;w<v.length;w++)for(r=0;r<D.length;r++)if(D[r].contains(v[w].pt)){D[r].addRing(v[w].ring);break}return D}if(w instanceof
c){D=[];for(r=0;r<w.paths.length;r++)v=k.fromJson({paths:[w.paths[r]],hasZ:!0===w.hasZ,hasM:!0===w.hasM,spatialReference:w.spatialReference.toJson()}),D.push(v);return D}if(r[0]instanceof m){w=h.fixSpatialReference(a.cloneGeometry(r[0]),z.spatialReference);for(r=0;r<w.points.length;r++)D.push(w.getPoint(r));return D}return null})};u.issimple=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,1,1);if(null===r[0])return!0;if(!(r[0]instanceof f))throw Error("Illegal Argument");
return n.isSimple(r[0])})};u.simplify=function(z,E){return x(z,E,function(w,D,r){r=h.autoCastFeatureToGeometry(r);h.pcCheck(r,1,1);if(null===r[0])return null;if(!(r[0]instanceof f))throw Error("Illegal Argument");return n.simplify(r[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(b,y,q,a){Object.defineProperty(y,"__esModule",{value:!0});y.cloneGeometry=y.sameGeomType=y.convertLinearUnitsToCode=y.shapeExtent=y.convertSquareUnitsToCode=
void 0;y.convertSquareUnitsToCode=function(h){if(void 0===h)return null;if("number"===typeof h)return h;switch(h.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};y.shapeExtent=function(h){if(null===h)return null;switch(h.type){case "polygon":case "multipoint":case "polyline":return h.extent;case "point":return new q({xmin:h.x,
ymin:h.y,xmax:h.x,ymax:h.y,spatialReference:h.spatialReference});case "extent":return h}return null};y.convertLinearUnitsToCode=function(h){if(void 0===h)return null;if("number"===typeof h||"number"===typeof h)return h;switch(h.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};y.sameGeomType=function(h,e){return h===e||"point"===h&&"esriGeometryPoint"===e||"polyline"===h&&"esriGeometryPolyline"===e||"polygon"===h&&"esriGeometryPolygon"===e||"extent"===h&&"esriGeometryEnvelope"===e||"multipoint"===h&&"esriGeometryMultipoint"===
e||"point"===e&&"esriGeometryPoint"===h||"polyline"===e&&"esriGeometryPolyline"===h||"polygon"===e&&"esriGeometryPolygon"===h||"extent"===e&&"esriGeometryEnvelope"===h||"multipoint"===e&&"esriGeometryMultipoint"===h?!0:!1};y.cloneGeometry=function(h){if(null===h)return null;var e=a.fromJson(h.toJson());h.getCacheValue("_geVersion")&&e.setCacheValue("_geVersion",h.getCacheValue("_geVersion"));return e}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],
function(b,y,q,a){function h(e,g,f){if("undefined"===typeof f||0===+f)return Math[e](g);g=+g;f=+f;if(isNaN(g)||"number"!==typeof f||0!==f%1)return NaN;g=g.toString().split("e");g=Math[e](+(g[0]+"e"+(g[1]?+g[1]-f:-f)));g=g.toString().split("e");return+(g[0]+"e"+(g[1]?+g[1]+f:f))}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(e,g){function f(m,l,d){m=q.toNumber(m);return isNaN(m)?m:isNaN(l)||isNaN(d)||l>d?NaN:m<l?l:m>d?d:m}e.number=function(m,
l){return g(m,l,function(d,c,k){q.pcCheck(k,1,2);d=k[0];return q.isNumber(d)?d:null===d?0:q.isDate(d)||q.isBoolean(d)?Number(d):q.isArray(d)?NaN:""===d||void 0===d?Number(d):q.isString(d)?void 0!==k[1]?(k=q.multiReplace(k[1],"\u2030",""),k=q.multiReplace(k,"\u00a4",""),a.parse(d,{pattern:k})):Number(d.trim()):Number(d)})};e.abs=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return Math.abs(q.toNumber(k[0]))})};e.acos=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return Math.acos(q.toNumber(k[0]))})};
e.asin=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return Math.asin(q.toNumber(k[0]))})};e.atan=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return Math.atan(q.toNumber(k[0]))})};e.atan2=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,2,2);return Math.atan2(q.toNumber(k[0]),q.toNumber(k[1]))})};e.ceil=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,2);return 2===k.length?(d=q.toNumber(k[1]),isNaN(d)&&(d=0),h("ceil",q.toNumber(k[0]),-1*d)):Math.ceil(q.toNumber(k[0]))})};
e.round=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,2);return 2===k.length?(d=q.toNumber(k[1]),isNaN(d)&&(d=0),h("round",q.toNumber(k[0]),-1*d)):Math.round(q.toNumber(k[0]))})};e.floor=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,2);return 2===k.length?(d=q.toNumber(k[1]),isNaN(d)&&(d=0),h("floor",q.toNumber(k[0]),-1*d)):Math.floor(q.toNumber(k[0]))})};e.cos=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return Math.cos(q.toNumber(k[0]))})};e.isnan=function(m,
l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return"number"===typeof k[0]&&isNaN(k[0])})};e.exp=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return Math.exp(q.toNumber(k[0]))})};e.log=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return Math.log(q.toNumber(k[0]))})};e.pow=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,2,2);return Math.pow(q.toNumber(k[0]),q.toNumber(k[1]))})};e.random=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,0,0);return Math.random()})};
e.sin=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return Math.sin(q.toNumber(k[0]))})};e.sqrt=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return Math.sqrt(q.toNumber(k[0]))})};e.tan=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return Math.tan(q.toNumber(k[0]))})};e.defaultvalue=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,2,2);return null===k[0]||""===k[0]||void 0===k[0]?k[1]:k[0]})};e.isempty=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,
1,1);return null===k[0]||""===k[0]||void 0===k[0]?!0:!1})};e["boolean"]=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,1,1);return q.toBoolean(k[0])})};e.constrain=function(m,l){return g(m,l,function(d,c,k){q.pcCheck(k,3,3);d=q.toNumber(k[1]);c=q.toNumber(k[2]);if(q.isArray(k[0])){var t=[],n=0;for(k=k[0];n<k.length;n++)t.push(f(k[n],d,c));return t}if(q.isImmutableArray(k[0])){t=[];for(n=0;n<k[0].length();n++)t.push(f(k[0].get(n),d,c));return t}return f(k[0],d,c)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(b,y,q,a){function h(e,g,f,m){if(1===m.length){if(q.isArray(m[0]))return a.calculateStat(e,m[0],-1);if(q.isImmutableArray(m[0]))return a.calculateStat(e,m[0].toArray(),-1)}return a.calculateStat(e,m,-1)}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(e,g){e.stdev=function(f,m){return g(f,m,function(l,d,c){return h("stdev",l,d,c)})};e.variance=function(f,m){return g(f,m,function(l,d,c){return h("variance",
l,d,c)})};e.average=function(f,m){return g(f,m,function(l,d,c){return h("mean",l,d,c)})};e.mean=function(f,m){return g(f,m,function(l,d,c){return h("mean",l,d,c)})};e.sum=function(f,m){return g(f,m,function(l,d,c){return h("sum",l,d,c)})};e.min=function(f,m){return g(f,m,function(l,d,c){return h("min",l,d,c)})};e.max=function(f,m){return g(f,m,function(l,d,c){return h("max",l,d,c)})};e.distinct=function(f,m){return g(f,m,function(l,d,c){return h("distinct",l,d,c)})};e.count=function(f,m){return g(f,
m,function(l,d,c){q.pcCheck(c,1,1);if(q.isArray(c[0])||q.isString(c[0]))return c[0].length;if(q.isImmutableArray(c[0]))return c[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(b,y,q){function a(e){for(var g=0,f=0;f<e.length;f++)g+=e[f];return g/e.length}function h(e){for(var g=a(e),f=0,m=0;m<e.length;m++)f+=Math.pow(g-e[m],2);return f/e.length}Object.defineProperty(y,"__esModule",
{value:!0});y.calculateStat=y.decodeStatType=void 0;y.decodeStatType=function(e){switch(e.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};y.calculateStat=function(e,g,f){void 0===f&&(f=1E3);switch(e.toLowerCase()){case "distinct":a:{e=f;f=[];for(var m={},l=[],d=0;d<g.length;d++){if(void 0!==
g[d]&&null!==g[d]&&g[d]!==q.voidOperation){var c=g[d];if(q.isNumber(c)||q.isString(c))void 0===m[c]&&(f.push(c),m[c]=1);else{for(var k=!1,t=0;t<l.length;t++)!0===q.equalityTest(l[t],c)&&(k=!0);!1===k&&(l.push(c),f.push(c))}}if(f.length>=e&&-1!==e){g=f;break a}}g=f}return g;case "avg":case "mean":return a(q.toNumberArray(g));case "min":return Math.min.apply(Math,q.toNumberArray(g));case "sum":g=q.toNumberArray(g);for(f=e=0;f<g.length;f++)e+=g[f];return e;case "max":return Math.max.apply(Math,q.toNumberArray(g));
case "stdev":case "stddev":return Math.sqrt(h(q.toNumberArray(g)));case "var":case "variance":return h(q.toNumberArray(g));case "count":return g.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),function(b,
y,q,a,h,e,g,f,m,l,d,c,k,t,n){function u(x,A,z){if(null===x)A.updateUint8Array([0,139]);else if(g.isArray(x)){A.updateUint8Array([61]);if(z.map.has(x))x=z.map.get(x),A.updateIntArray([x^61237541]);else{z.map.set(x,z.currentLength++);for(var E=0;E<x.length;E++){var w=x[E];u(w,A,z)}z.map.delete(x);z.currentLength--}A.updateUint8Array([199])}else if(g.isImmutableArray(x)){A.updateUint8Array([61]);if(z.map.has(x))x=z.map.get(x),A.updateIntArray([x^61237541]);else{z.map.set(x,z.currentLength++);E=0;for(var D=
x.toArray();E<D.length;E++)w=D[E],u(w,A,z);z.map.delete(x);z.currentLength--}A.updateUint8Array([199])}else if(g.isDate(x))A.updateIntArray([x.getTime()]),A.updateUint8Array([241]);else if(g.isString(x))A.updateIntArray([x.length]),A.updateWithString(x),A.updateUint8Array([41]);else if(g.isBoolean(x))A.updateUint8Array([!0===x?1:0,113]);else if(g.isNumber(x))A.updateFloatArray([x]),A.updateUint8Array([173]);else{if(x instanceof a)throw Error("Type not supported in Hash");if(x instanceof q)throw Error("Type not supported in Hash");
if(x instanceof h){A.updateUint8Array([223]);if(z.map.has(x))x=z.map.get(x),A.updateIntArray([x^61237541]);else{z.map.set(x,z.currentLength++);E=0;for(D=x.keys();E<D.length;E++)w=D[E],A.updateIntArray([w.length]),A.updateWithString(w),A.updateUint8Array([251]),w=x.field(w),u(w,A,z),A.updateUint8Array([239]);z.map.delete(x);z.currentLength--}A.updateUint8Array([73])}else{if(x instanceof e)throw Error("Type not supported in Hash");if(x instanceof c)A.updateIntArray([3833836621]),A.updateIntArray([0]),
A.updateFloatArray([x.x]),A.updateIntArray([1]),A.updateFloatArray([x.y]),A.updateIntArray([3765347959]),u(x.spatialReference.wkid,A,z);else if(x instanceof k){A.updateIntArray([1266616829]);for(E=0;E<x.rings.length;E++){D=x.rings[E];var r=[],v=null,B=null;for(w=0;w<D.length;w++){var C=x.getPoint(E,w);if(0===w)v=C;else if(B.x===C.x&&B.y===C.y)continue;B=C;w===D.length-1&&v.x===C.x&&v.y===C.y||r.push(C)}A.updateIntArray([1397116793,r.length]);for(w=0;w<r.length;w++)C=r[w],A.updateIntArray([3962308117,
w]),u(C,A,z),A.updateIntArray([2716288009]);A.updateIntArray([2278822459])}A.updateIntArray([3878477243]);u(x.spatialReference.wkid,A,z)}else if(x instanceof t){A.updateIntArray([4106883559]);for(E=0;E<x.paths.length;E++){D=x.paths[E];A.updateIntArray([1397116793,D.length]);for(w=0;w<D.length;w++)A.updateIntArray([3962308117,w]),u(x.getPoint(E,w),A,z),A.updateIntArray([2716288009]);A.updateIntArray([2278822459])}A.updateIntArray([2568784753]);u(x.spatialReference.wkid,A,z)}else if(x instanceof d){A.updateIntArray([588535921,
x.points.length]);for(w=0;w<x.points.length;w++)E=x.getPoint(w),A.updateIntArray([w]),u(E,A,z);A.updateIntArray([1700171621]);u(x.spatialReference.wkid,A,z)}else if(x instanceof l)A.updateIntArray([3483648373]),A.updateIntArray([0]),A.updateFloatArray([x.xmax]),A.updateIntArray([1]),A.updateFloatArray([x.xmin]),A.updateIntArray([2]),A.updateFloatArray([x.ymax]),A.updateIntArray([3]),A.updateFloatArray([x.ymin]),A.updateIntArray([3622027469]),u(x.spatialReference.wkid,A,z);else if(x instanceof n)A.updateIntArray([14]),
void 0!==x.wkid&&null!==x.wkid&&A.updateIntArray([x.wkid]),x.wkt&&A.updateWithString(x.wkt);else{if(g.isFunctionParameter(x))throw Error("Type not supported in Hash");if(g.isFeatureSet(x))throw Error("Type not supported in Hash");g.isFeatureSetCollection(x);throw Error("Type not supported in Hash");}}}}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(x,A){x.portal=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,1);return new q(g.toString(r[0]))})};
x.trim=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,1);return g.toString(r[0]).trim()})};x.tohex=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,1);w=g.toNumber(r[0]);return isNaN(w)?w:w.toString(16)})};x.upper=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,1);return g.toString(r[0]).toUpperCase()})};x.proper=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,2);w=1;2===r.length&&"firstword"===g.toString(r[1]).toLowerCase()&&(w=2);D=/\s/;r=g.toString(r[0]);for(var v=
"",B=!0,C=0;C<r.length;C++){var F=r[C];D.test(F)?1===w&&(B=!0):F.toUpperCase()!==F.toLowerCase()&&(B?(F=F.toUpperCase(),B=!1):F=F.toLowerCase());v+=F}return v})};x.lower=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,1);return g.toString(r[0]).toLowerCase()})};x.guid=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,0,1);if(0<r.length)switch(g.toString(r[0]).toLowerCase()){case "digits":return g.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return g.generateUUID();
case "digits-hyphen-parentheses":return"("+g.generateUUID()+")"}return"{"+g.generateUUID()+"}"})};x.console=function(z,E){return A(z,E,function(w,D,r){0!==r.length&&(1===r.length?z.console(g.toString(r[0])):z.console(g.toString(r)));return g.voidOperation})};x.mid=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,2,3);w=g.toNumber(r[1]);if(isNaN(w))return"";0>w&&(w=0);if(2===r.length)return g.toString(r[0]).substr(w);D=g.toNumber(r[2]);if(isNaN(D))return"";0>D&&(D=0);return g.toString(r[0]).substr(w,
D)})};x.find=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,2,3);w=0;if(2<r.length){w=g.toNumber(g.defaultUndefined(r[2],0));if(isNaN(w))return-1;0>w&&(w=0)}return g.toString(r[1]).indexOf(g.toString(r[0]),w)})};x.left=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,2,2);w=g.toNumber(r[1]);if(isNaN(w))return"";0>w&&(w=0);return g.toString(r[0]).substr(0,w)})};x.right=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,2,2);w=g.toNumber(r[1]);if(isNaN(w))return"";0>w&&(w=0);return g.toString(r[0]).substr(-1*
w,w)})};x.split=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,2,4);w=g.toNumber(g.defaultUndefined(r[2],-1));D=g.toBoolean(g.defaultUndefined(r[3],!1));-1===w||null===w||!0===D?r=g.toString(r[0]).split(g.toString(r[1])):(isNaN(w)&&(w=-1),-1>w&&(w=-1),r=g.toString(r[0]).split(g.toString(r[1]),w));if(!1===D)return r;D=[];for(var v=0;v<r.length&&!(-1!==w&&D.length>=w);v++)""!==r[v]&&void 0!==r[v]&&D.push(r[v]);return D})};x.text=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,2);return g.toStringExplicit(r[0],
r[1])})};x.concatenate=function(z,E){return A(z,E,function(w,D,r){w=[];if(1>r.length)return"";if(g.isArray(r[0])){D=g.defaultUndefined(r[2],"");for(var v=0;v<r[0].length;v++)w[v]=g.toStringExplicit(r[0][v],D);return 1<r.length?w.join(r[1]):w.join("")}if(g.isImmutableArray(r[0])){D=g.defaultUndefined(r[2],"");for(v=0;v<r[0].length();v++)w[v]=g.toStringExplicit(r[0].get(v),D);return 1<r.length?w.join(r[1]):w.join("")}for(v=0;v<r.length;v++)w[v]=g.toStringExplicit(r[v]);return w.join("")})};x.reverse=
function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,1);if(g.isArray(r[0]))return w=r[0].slice(0),w.reverse(),w;if(g.isImmutableArray(r[0]))return w=r[0].toArray().slice(0),w.reverse(),w;throw Error("Invalid Parameter");})};x.replace=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,3,4);w=g.toString(r[0]);D=g.toString(r[1]);var v=g.toString(r[2]);return(4===r.length?g.toBoolean(r[3]):1)?g.multiReplace(w,D,v):w.replace(D,v)})};x.schema=function(z,E){return A(z,E,function(w,D,r){if(r[0]instanceof
e)return(w=r[0].schema())?h.convertObjectToArcadeDictionary(w):null;throw Error("Invalid Parameter");})};x.subtypes=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,1);if(r[0]instanceof e)return(w=r[0].subtypes())?h.convertObjectToArcadeDictionary(w):null;throw Error("Invalid Parameter");})};x.subtypecode=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,1);if(r[0]instanceof e){D=r[0].subtypes();if(!D)return null;if(D.subtypeField&&r[0].hasField(D.subtypeField))for(r=r[0].field(D.subtypeField),
w=0,D=D.subtypes;w<D.length;w++){var v=D[w];if(v.code===r)return v.code}return null}throw Error("Invalid Parameter");})};x.subtypename=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,1);if(r[0]instanceof e){D=r[0].subtypes();if(!D)return"";if(D.subtypeField&&r[0].hasField(D.subtypeField))for(r=r[0].field(D.subtypeField),w=0,D=D.subtypes;w<D.length;w++){var v=D[w];if(v.code===r)return v.name}return""}throw Error("Invalid Parameter");})};x.gdbversion=function(z,E){return A(z,E,function(w,D,
r){g.pcCheck(r,1,1);if(r[0]instanceof e)return r[0].gdbVersion();throw Error("Invalid Parameter");})};x.domain=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,2,3);if(r[0]instanceof e)return(w=r[0].fullDomain(g.toString(r[1]),void 0===r[2]?void 0:g.toNumber(r[2])))&&w.domain?"coded-value"===w.domain.type||"codedValue"===w.domain.type?h.convertObjectToArcadeDictionary({type:"codedValue",name:w.domain.name,dataType:f.layerFieldEsriConstants[w.field.type],codedValues:w.domain.codedValues.map(function(v){return{name:v.name,
code:v.code}})}):h.convertObjectToArcadeDictionary({type:"range",name:w.domain.name,dataType:f.layerFieldEsriConstants[w.field.type],min:w.domain.min,max:w.domain.max}):null;throw Error("Invalid Parameter");})};x.domainname=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,2,4);if(r[0]instanceof e)return r[0].domainValueLookup(g.toString(r[1]),r[2],void 0===r[3]?void 0:g.toNumber(r[3]));throw Error("Invalid Parameter");})};x.domaincode=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,2,
4);if(r[0]instanceof e)return r[0].domainCodeLookup(g.toString(r[1]),r[2],void 0===r[3]?void 0:g.toNumber(r[3]));throw Error("Invalid Parameter");})};x.urlencode=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,1);if(null===r[0])return"";if(r[0]instanceof h){w="";D=0;for(var v=r[0].keys();D<v.length;D++){var B=v[D],C=r[0].field(B);""!==w&&(w+="\x26");w=null===C?w+(encodeURIComponent(B)+"\x3d"):w+(encodeURIComponent(B)+"\x3d"+encodeURIComponent(C))}return w}return encodeURIComponent(g.toString(r[0]))})};
x.hash=function(z,E){return A(z,E,function(w,D,r){g.pcCheck(r,1,1);w=new m.XXH(0);u(r[0],w,{map:new Map,currentLength:0});return w.digest()})}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(b,y){function q(a){for(var h=[],e=0,g=a.length;e<g;e++){var f=a.charCodeAt(e);128>f?h.push(f):2048>f?h.push(192|f>>6,128|f&63):55296>f||57344<=f?h.push(224|f>>12,128|f>>6&63,128|f&63):(e++,f=65536+((f&1023)<<10|a.charCodeAt(e)&1023),h.push(240|f>>18,128|f>>12&63,128|f>>6&63,128|
f&63))}return new Uint8Array(h)}Object.defineProperty(y,"__esModule",{value:!0});y.XXH=void 0;b=function(){function a(h){this.seed=h;this.totallen=0;this.bufs=[];this.init()}a.prototype.init=function(){this.bufs=[];this.totallen=0;return this};a.prototype.updateFloatArray=function(h){for(var e=[],g=0;g<h.length;g++){var f=h[g];isNaN(f)?e.push("NaN"):Infinity===f?e.push("Infinity"):-Infinity===f?e.push("-Infinity"):0===f?e.push("0"):e.push(f.toString(16))}this.update(q(e.join("")))};a.prototype.updateIntArray=
function(h){h=Int32Array.from(h);this.update(new Uint8Array(h.buffer))};a.prototype.updateUint8Array=function(h){this.update(Uint8Array.from(h))};a.prototype.updateWithString=function(h){return this.update(q(h))};a.prototype.update=function(h){this.bufs.push(h);this.totallen+=h.length;return this};a.prototype.digest=function(){for(var h=new Uint8Array(this.totallen),e=0,g=0,f=this.bufs;g<f.length;g++){var m=f[g];h.set(m,e);e+=m.length}this.init();return this.xxHash32(h,this.seed)};a.prototype.xxHash32=
function(h,e){void 0===e&&(e=0);var g=e+374761393&4294967295,f=0;if(16<=h.length){g=[e+2654435761+2246822519&4294967295,e+2246822519&4294967295,e+0&4294967295,e-2654435761&4294967295];var m=h.length-16;for(f=e=0;(f&4294967280)<=m;f+=4){var l=f,d=h[l+0]+(h[l+1]<<8);l=h[l+2]+(h[l+3]<<8);d=g[e]+(2246822519*d+(2246822519*l<<16))&4294967295;d=d<<13|d>>>19;g[e]=2654435761*(d&65535)+(2654435761*(d>>>16)<<16)&4294967295;e=e+1&3}g=(g[0]<<1|g[0]>>>31)+(g[1]<<7|g[1]>>>25)+(g[2]<<12|g[2]>>>20)+(g[3]<<18|g[3]>>>
14)&4294967295}g=g+h.length&4294967295;for(e=h.length-4;f<=e;f+=4)l=f,d=h[l+0]+(h[l+1]<<8),l=h[l+2]+(h[l+3]<<8),g=g+(3266489917*d+(3266489917*l<<16))&4294967295,g=g<<17|g>>>15,g=668265263*(g&65535)+(668265263*(g>>>16)<<16)&4294967295;for(;f<h.length;++f)e=h[f],g+=374761393*e,g=g<<11|g>>>21,g=2654435761*(g&65535)+(2654435761*(g>>>16)<<16)&4294967295;g^=g>>>15;g=(2246822519*(g&65535)&4294967295)+(2246822519*(g>>>16)<<16);g^=g>>>13;g=(3266489917*(g&65535)&4294967295)+(3266489917*(g>>>16)<<16);g^=g>>>
16;return 0>g?g+4294967296:g};return a}();y.XXH=b})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B){function C(pa,ra){for(var ya=[],wa=0;wa<ra.arguments.length;wa++)ya.push(G(pa,ra.arguments[wa]));return ya}function F(pa,ra,ya){try{return ya(pa,ra,C(pa,ra))}catch(wa){throw wa;}}function G(pa,ra){try{switch(ra.type){case "EmptyStatement":return l.voidOperation;case "VariableDeclarator":var ya=null===ra.init?null:G(pa,ra.init);ya===l.voidOperation&&(ya=null);if("Identifier"!==ra.id.type)throw Error("Can only assign a regular variable");var wa=
ra.id.name.toLowerCase();null!==pa.localScope?pa.localScope[wa]={value:ya,valueset:!0,node:ra.init}:pa.globalScope[wa]={value:ya,valueset:!0,node:ra.init};return l.voidOperation;case "VariableDeclaration":for(var la=0;la<ra.declarations.length;la++)G(pa,ra.declarations[la]);return l.voidOperation;case "BlockStatement":a:{var Aa=l.voidOperation;for(la=0;la<ra.body.length;la++)if(Aa=G(pa,ra.body[la]),Aa instanceof l.ReturnResult||Aa===l.breakResult||Aa===l.continueResult){var da=Aa;break a}da=Aa}return da;
case "FunctionDeclaration":var fa=ra.id.name.toLowerCase();pa.globalScope[fa]={valueset:!0,node:null,value:new g(ra,pa)};return l.voidOperation;case "ReturnStatement":if(null===ra.argument)var Q=new l.ReturnResult(l.voidOperation);else{var xa=G(pa,ra.argument);Q=new l.ReturnResult(xa)}return Q;case "IfStatement":if("AssignmentExpression"===ra.test.type||"UpdateExpression"===ra.test.type)throw Error(d.nodeErrorMessage(ra.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Fa=G(pa,ra.test);if(!0===
Fa)var ca=G(pa,ra.consequent);else if(!1===Fa)ca=null!==ra.alternate?G(pa,ra.alternate):l.voidOperation;else throw Error(d.nodeErrorMessage(ra,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return ca;case "ExpressionStatement":if("AssignmentExpression"===ra.expression.type||"UpdateExpression"===ra.expression.type)var Sa=G(pa,ra.expression);else{var Qa=G(pa,ra.expression);Sa=Qa===l.voidOperation?l.voidOperation:new l.ImplicitResult(Qa)}return Sa;case "AssignmentExpression":var va=G(pa,ra.right);
la=null;var T="";if("MemberExpression"===ra.left.type){la=G(pa,ra.left.object);!0===ra.left.computed?T=G(pa,ra.left.property):"Identifier"===ra.left.property.type&&(T=ra.left.property.name);if(l.isArray(la))if(l.isNumber(T)){0>T&&(T=la.length+T);if(0>T||T>la.length)throw Error("Assignment outside of array bounds");if(T===la.length&&"\x3d"!==ra.operator)throw Error("Invalid Parameter");la[T]=J(va,ra.operator,la[T],ra)}else throw Error("Invalid Parameter");else if(la instanceof h){if(!1===l.isString(T))throw Error("Dictionary accessor must be a string");
if(!0===la.hasField(T))la.setField(T,J(va,ra.operator,la.field(T),ra));else{if("\x3d"!==ra.operator)throw Error("Invalid Parameter");la.setField(T,J(va,ra.operator,null,ra))}}else if(la instanceof e){if(!1===l.isString(T))throw Error("Feature accessor must be a string");if(!0===la.hasField(T))la.setField(T,J(va,ra.operator,la.field(T),ra));else{if("\x3d"!==ra.operator)throw Error("Invalid Parameter");la.setField(T,J(va,ra.operator,null,ra))}}else{if(l.isImmutableArray(la))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var ja=l.voidOperation}else if(la=ra.left.name.toLowerCase(),null!==pa.localScope&&void 0!==pa.localScope[la])pa.localScope[la]={value:J(va,ra.operator,pa.localScope[la].value,ra),valueset:!0,node:ra.right},ja=l.voidOperation;else if(void 0!==pa.globalScope[la])pa.globalScope[la]={value:J(va,ra.operator,pa.globalScope[la].value,ra),valueset:!0,node:ra.right},ja=l.voidOperation;else throw Error("Variable not recognised");return ja;case "UpdateExpression":la=null;T=
"";if("MemberExpression"===ra.argument.type){la=G(pa,ra.argument.object);!0===ra.argument.computed?T=G(pa,ra.argument.property):"Identifier"===ra.argument.property.type&&(T=ra.argument.property.name);if(l.isArray(la))if(l.isNumber(T)){0>T&&(T=la.length+T);if(0>T||T>=la.length)throw Error("Assignment outside of array bounds");var ka=l.toNumber(la[T]);la[T]="++"===ra.operator?ka+1:ka-1}else throw Error("Invalid Parameter");else if(la instanceof h){if(!1===l.isString(T))throw Error("Dictionary accessor must be a string");
if(!0===la.hasField(T))ka=l.toNumber(la.field(T)),la.setField(T,"++"===ra.operator?ka+1:ka-1);else throw Error("Invalid Parameter");}else if(la instanceof e){if(!1===l.isString(T))throw Error("Feature accessor must be a string");if(!0===la.hasField(T))ka=l.toNumber(la.field(T)),la.setField(T,"++"===ra.operator?ka+1:ka-1);else throw Error("Invalid Parameter");}else{if(l.isImmutableArray(la))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var U=!1===ra.prefix?ka:"++"===ra.operator?
ka+1:ka-1}else{la="Identifier"===ra.argument.type?ra.argument.name.toLowerCase():"";if(!la)throw Error("Invalid identifier");if(null!==pa.localScope&&void 0!==pa.localScope[la])ka=l.toNumber(pa.localScope[la].value),pa.localScope[la]={value:"++"===ra.operator?ka+1:ka-1,valueset:!0,node:ra},U=!1===ra.prefix?ka:"++"===ra.operator?ka+1:ka-1;else if(void 0!==pa.globalScope[la])ka=l.toNumber(pa.globalScope[la].value),pa.globalScope[la]={value:"++"===ra.operator?ka+1:ka-1,valueset:!0,node:ra},U=!1===ra.prefix?
ka:"++"===ra.operator?ka+1:ka-1;else throw Error("Variable not recognised");}return U;case "BreakStatement":return l.breakResult;case "ContinueStatement":return l.continueResult;case "TemplateElement":return ra.value?ra.value.cooked:"";case "TemplateLiteral":var ha="",na=0;ja=0;for(la=ra.quasis;ja<la.length;ja++)if(T=la[ja],ha+=T.value?T.value.cooked:"",!1===T.tail){var qa=ra.expressions[na]?l.toString(G(pa,ra.expressions[na])):"";ha+=qa;na++}return ha;case "ForStatement":null!==ra.init&&G(pa,ra.init);
na={testResult:!0,lastAction:l.voidOperation};do b:{la=pa;T=ra;qa=na;if(null!==T.test){qa.testResult=G(la,T.test);if(!1===qa.testResult)break b;if(!0!==qa.testResult)throw Error(d.nodeErrorMessage(T,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}qa.lastAction=G(la,T.body);qa.lastAction===l.breakResult?qa.testResult=!1:qa.lastAction instanceof l.ReturnResult?qa.testResult=!1:null!==T.update&&G(la,T.update)}while(!0===na.testResult);ha=na.lastAction instanceof l.ReturnResult?na.lastAction:l.voidOperation;
return ha;case "ForInStatement":return H(pa,ra);case "Identifier":return S(pa,ra);case "MemberExpression":return K(pa,ra);case "Literal":return ra.value;case "CallExpression":return L(pa,ra);case "UnaryExpression":return R(pa,ra);case "BinaryExpression":return W(pa,ra);case "LogicalExpression":return P(pa,ra);case "ConditionalExpression":throw Error(d.nodeErrorMessage(ra,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(la=[],T=0;T<ra.elements.length;T++){var ua=G(pa,ra.elements[T]);if(l.isFunctionParameter(ua))throw Error(d.nodeErrorMessage(ra,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));ua===l.voidOperation?la.push(null):la.push(ua)}}catch(Pa){throw Pa;}return la;case "ObjectExpression":la={};for(T=0;T<ra.properties.length;T++){var za=G(pa,ra.properties[T]);if(l.isFunctionParameter(za.value))throw Error("Illegal Argument");if(!1===l.isString(za.key))throw Error("Illegal Argument");la[za.key.toString()]=za.value===l.voidOperation?null:za.value}var Ea=new h(la);Ea.immutable=!1;return Ea;case "Property":return{key:"Identifier"===ra.key.type?ra.key.name:
G(pa,ra.key),value:G(pa,ra.value)};default:throw Error(d.nodeErrorMessage(ra,"RUNTIME","UNREOGNISED"));}}catch(Pa){throw Pa;}}function H(pa,ra){var ya=G(pa,ra.right);"VariableDeclaration"===ra.left.type&&G(pa,ra.left);var wa=null,la="";if("VariableDeclaration"===ra.left.type){var Aa=ra.left.declarations[0].id;"Identifier"===Aa.type&&(la=Aa.name)}else"Identifier"===ra.left.type&&(la=ra.left.name);if(!la)throw Error(d.nodeErrorMessage(ra,"RUNTIME","INVALIDVARIABLE"));la=la.toLowerCase();null!==pa.localScope&&
void 0!==pa.localScope[la]&&(wa=pa.localScope[la]);null===wa&&void 0!==pa.globalScope[la]&&(wa=pa.globalScope[la]);if(null===wa)throw Error(d.nodeErrorMessage(ra,"RUNTIME","VARIABLENOTDECLARED"));if(l.isArray(ya)||l.isString(ya)){ya=ya.length;for(Aa=0;Aa<ya;Aa++){wa.value=Aa;la=G(pa,ra.body);if(la===l.breakResult)break;if(la instanceof l.ReturnResult)return la}return l.voidOperation}if(l.isImmutableArray(ya)){for(Aa=0;Aa<ya.length();Aa++){wa.value=Aa;la=G(pa,ra.body);if(la===l.breakResult)break;if(la instanceof
l.ReturnResult)return la}return l.voidOperation}if(ya instanceof h||ya instanceof e)for(ya=ya.keys(),Aa=0;Aa<ya.length;Aa++){wa.value=ya[Aa];la=G(pa,ra.body);if(la===l.breakResult)break;if(la instanceof l.ReturnResult)return la}else return l.voidOperation}function J(pa,ra,ya,wa){switch(ra){case "\x3d":return pa===l.voidOperation?null:pa;case "/\x3d":return l.toNumber(ya)/l.toNumber(pa);case "*\x3d":return l.toNumber(ya)*l.toNumber(pa);case "-\x3d":return l.toNumber(ya)-l.toNumber(pa);case "+\x3d":return l.isString(ya)||
l.isString(pa)?l.toString(ya)+l.toString(pa):l.toNumber(ya)+l.toNumber(pa);case "%\x3d":return l.toNumber(ya)%l.toNumber(pa);default:throw Error(d.nodeErrorMessage(wa,"RUNTIME","OPERATORNOTRECOGNISED"));}}function I(pa,ra,ya){ra=ra.toLowerCase();switch(ra){case "hasz":return pa=pa.hasZ,void 0===pa?!1:pa;case "hasm":return pa=pa.hasM,void 0===pa?!1:pa;case "spatialreference":return ra=pa.spatialReference._arcadeCacheId,void 0===ra&&(ya=!0,Object.freeze&&Object.isFrozen(pa.spatialReference)&&(ya=!1),
ya&&(oa++,ra=pa.spatialReference._arcadeCacheId=oa)),pa=new h({wkt:pa.spatialReference.wkt,wkid:pa.spatialReference.wkid}),void 0!==ra&&(pa._arcadeCacheId="SPREF"+ra.toString()),pa}switch(pa.type){case "extent":switch(ra){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return pa=pa[ra],void 0!==pa?pa:null;case "type":return"Extent"}break;case "polygon":switch(ra){case "rings":return ra=pa.getCacheValue("_arcadeCacheId"),void 0===ra&&(oa++,ra=oa,pa.setCacheValue("_arcadeCacheId",
ra)),pa=new f(pa.rings,pa.spatialReference,!0===pa.hasZ,!0===pa.hasM,ra);case "type":return"Polygon"}break;case "point":switch(ra){case "x":case "y":case "z":case "m":return void 0!==pa[ra]?pa[ra]:null;case "type":return"Point"}break;case "polyline":switch(ra){case "paths":return ra=pa.getCacheValue("_arcadeCacheId"),void 0===ra&&(oa++,ra=oa,pa.setCacheValue("_arcadeCacheId",ra)),pa=new f(pa.paths,pa.spatialReference,!0===pa.hasZ,!0===pa.hasM,ra);case "type":return"Polyline"}break;case "multipoint":switch(ra){case "points":return ra=
pa.getCacheValue("_arcadeCacheId"),void 0===ra&&(oa++,ra=oa,pa.setCacheValue("_arcadeCacheId",ra)),pa=new m(pa.points,pa.spatialReference,!0===pa.hasZ,!0===pa.hasM,ra,1);case "type":return"Multipoint"}}throw Error(d.nodeErrorMessage(ya,"RUNTIME","PROPERTYNOTFOUND"));}function K(pa,ra){try{var ya=G(pa,ra.object);if(null===ya)throw Error(d.nodeErrorMessage(ra,"RUNTIME","NOTFOUND"));if(!1===ra.computed){if("Identifier"===ra.property.type){if(ya instanceof h||ya instanceof e)return ya.field(ra.property.name);
if(ya instanceof E)return I(ya,ra.property.name,ra)}throw Error(d.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}var wa=G(pa,ra.property);if(ya instanceof h||ya instanceof e){if(l.isString(wa))return ya.field(wa);throw Error(d.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}if(ya instanceof E){if(l.isString(wa))return I(ya,wa,ra);throw Error(d.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}if(l.isArray(ya)){if(l.isNumber(wa)&&isFinite(wa)&&Math.floor(wa)===wa){0>wa&&(wa=ya.length+wa);if(wa>=ya.length||
0>wa)throw Error(d.nodeErrorMessage(ra,"RUNTIME","OUTOFBOUNDS"));return ya[wa]}throw Error(d.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}if(l.isString(ya)){if(l.isNumber(wa)&&isFinite(wa)&&Math.floor(wa)===wa){0>wa&&(wa=ya.length+wa);if(wa>=ya.length||0>wa)throw Error(d.nodeErrorMessage(ra,"RUNTIME","OUTOFBOUNDS"));return ya[wa]}throw Error(d.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}if(l.isImmutableArray(ya)&&l.isNumber(wa)&&isFinite(wa)&&Math.floor(wa)===wa){0>wa&&(wa=ya.length()+wa);if(wa>=
ya.length()||0>wa)throw Error(d.nodeErrorMessage(ra,"RUNTIME","OUTOFBOUNDS"));return ya.get(wa)}throw Error(d.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}catch(la){throw la;}}function R(pa,ra){try{var ya=G(pa,ra.argument);if(l.isBoolean(ya)){if("!"===ra.operator)return!ya;if("-"===ra.operator)return-1*l.toNumber(ya);if("+"===ra.operator)return 1*l.toNumber(ya);if("~"===ra.operator)return~l.toNumber(ya);throw Error(d.nodeErrorMessage(ra,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===ra.operator)return~l.toNumber(ya);
if("-"===ra.operator)return-1*l.toNumber(ya);if("+"===ra.operator)return 1*l.toNumber(ya);throw Error(d.nodeErrorMessage(ra,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(wa){throw wa;}}function W(pa,ra){try{var ya=[G(pa,ra.left),G(pa,ra.right)],wa=ya[0],la=ya[1];switch(ra.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return l.binaryOperator(l.toNumber(wa),l.toNumber(la),ra.operator);case "\x3d\x3d":return l.equalityTest(wa,la);case "!\x3d":return!l.equalityTest(wa,
la);case "\x3c":return l.greaterThanLessThan(wa,la,ra.operator);case "\x3e":return l.greaterThanLessThan(wa,la,ra.operator);case "\x3c\x3d":return l.greaterThanLessThan(wa,la,ra.operator);case "\x3e\x3d":return l.greaterThanLessThan(wa,la,ra.operator);case "+":return l.isString(wa)||l.isString(la)?l.toString(wa)+l.toString(la):l.toNumber(wa)+l.toNumber(la);case "-":return l.toNumber(wa)-l.toNumber(la);case "*":return l.toNumber(wa)*l.toNumber(la);case "/":return l.toNumber(wa)/l.toNumber(la);case "%":return l.toNumber(wa)%
l.toNumber(la);default:throw Error(d.nodeErrorMessage(ra,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(Aa){throw Aa;}}function P(pa,ra){try{if("AssignmentExpression"===ra.left.type||"UpdateExpression"===ra.left.type)throw Error(d.nodeErrorMessage(ra.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===ra.right.type||"UpdateExpression"===ra.right.type)throw Error(d.nodeErrorMessage(ra.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ya=G(pa,ra.left);if(l.isBoolean(ya))switch(ra.operator){case "||":if(!0===
ya)return ya;var wa=G(pa,ra.right);if(l.isBoolean(wa))return wa;throw Error(d.nodeErrorMessage(ra,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===ya)return ya;wa=G(pa,ra.right);if(l.isBoolean(wa))return wa;throw Error(d.nodeErrorMessage(ra,"RUNTIME","ONLYORORAND"));default:throw Error(d.nodeErrorMessage(ra,"RUNTIME","ONLYORORAND"));}throw Error(d.nodeErrorMessage(ra,"RUNTIME","ONLYBOOLEAN"));}catch(la){throw la;}}function S(pa,ra){try{var ya=ra.name.toLowerCase();if(null!==pa.localScope&&void 0!==
pa.localScope[ya]){var wa=pa.localScope[ya];if(!0===wa.valueset)return wa.value;wa.value=G(pa,wa.node);wa.valueset=!0;return wa.value}if(void 0!==pa.globalScope[ya]){wa=pa.globalScope[ya];if(!0===wa.valueset)return wa.value;wa.value=G(pa,wa.node);wa.valueset=!0;return wa.value}throw Error(d.nodeErrorMessage(ra,"RUNTIME","VARIABLENOTFOUND"));}catch(la){throw la;}}function L(pa,ra){try{if("Identifier"!==ra.callee.type)throw Error(d.nodeErrorMessage(ra,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==pa.localScope&&
void 0!==pa.localScope[ra.callee.name.toLowerCase()]){var ya=pa.localScope[ra.callee.name.toLowerCase()];if(ya.value instanceof l.NativeFunction)return ya.value.fn(pa,ra);if(ya.value instanceof g)return N(pa,ra,ya.value.definition);throw Error(d.nodeErrorMessage(ra,"RUNTIME","NOTAFUNCTION"));}if(void 0!==pa.globalScope[ra.callee.name.toLowerCase()]){ya=pa.globalScope[ra.callee.name.toLowerCase()];if(ya.value instanceof l.NativeFunction)return ya.value.fn(pa,ra);if(ya.value instanceof g)return N(pa,
ra,ya.value.definition);throw Error(d.nodeErrorMessage(ra,"RUNTIME","NOTAFUNCTION"));}throw Error(d.nodeErrorMessage(ra,"RUNTIME","NOTFOUND"));}catch(wa){throw wa;}}function aa(pa){return null==pa?"":l.isArray(pa)||l.isImmutableArray(pa)?"Array":l.isDate(pa)?"Date":l.isString(pa)?"String":l.isBoolean(pa)?"Boolean":l.isNumber(pa)?"Number":pa instanceof a?"Attachment":pa instanceof q?"Portal":pa instanceof h?"Dictionary":pa instanceof e?"Feature":pa instanceof D?"Point":pa instanceof r?"Polygon":pa instanceof
v?"Polyline":pa instanceof w?"Multipoint":pa instanceof z?"Extent":l.isFunctionParameter(pa)?"Function":l.isFeatureSet(pa)?"FeatureSet":l.isFeatureSetCollection(pa)?"FeatureSetCollection":pa===l.voidOperation?"":"number"===typeof pa&&isNaN(pa)?"Number":"Unrecognised Type"}function ba(pa,ra,ya,wa){try{var la=G(pa,ra.arguments[ya]);if(l.equalityTest(la,wa))return G(pa,ra.arguments[ya+1]);var Aa=ra.arguments.length-ya;return 1===Aa?G(pa,ra.arguments[ya]):2===Aa?null:3===Aa?G(pa,ra.arguments[ya+2]):ba(pa,
ra,ya+2,wa)}catch(da){throw da;}}function O(pa,ra,ya,wa){try{if(!0===wa)return G(pa,ra.arguments[ya+1]);if(3===ra.arguments.length-ya)return G(pa,ra.arguments[ya+2]);var la=G(pa,ra.arguments[ya+2]);if(!1===l.isBoolean(la))throw Error("WHEN needs boolean test conditions");return O(pa,ra,ya+2,la)}catch(Aa){throw Aa;}}function V(pa,ra){var ya=pa.length,wa=Math.floor(ya/2);if(0===ya)return[];if(1===ya)return[pa[0]];var la=V(pa.slice(0,wa),ra);pa=V(pa.slice(wa,ya),ra);for(ya=[];0<la.length||0<pa.length;)0<
la.length&&0<pa.length?(wa=ra(la[0],pa[0]),isNaN(wa)&&(wa=0),0>=wa?(ya.push(la[0]),la=la.slice(1)):(ya.push(pa[0]),pa=pa.slice(1))):0<la.length?(ya.push(la[0]),la=la.slice(1)):0<pa.length&&(ya.push(pa[0]),pa=pa.slice(1));return ya}function X(pa,ra,ya){try{var wa=pa.body;if(ya.length!==pa.params.length)throw Error("Invalid Parameter calls to function.");for(var la=0;la<ya.length;la++)ra.localScope[pa.params[la].name.toLowerCase()]={value:ya[la],valueset:!0,node:null};var Aa=G(ra,wa);if(Aa instanceof
l.ReturnResult)return Aa.value;if(Aa===l.breakResult)throw Error("Cannot Break from a Function");if(Aa===l.continueResult)throw Error("Cannot Continue from a Function");return Aa instanceof l.ImplicitResult?Aa.value:Aa}catch(da){throw da;}}function N(pa,ra,ya){return F(pa,ra,function(wa,la,Aa){wa={spatialReference:pa.spatialReference,globalScope:pa.globalScope,depthCounter:pa.depthCounter+1,console:pa.console,lrucache:pa.lrucache,localScope:{}};if(64<wa.depthCounter)throw Error("Exceeded maximum function depth");
return X(ya,wa,Aa)})}function Y(pa){return function(){var ra={spatialReference:pa.context.spatialReference,console:pa.context.console,lrucache:pa.context.lrucache,localScope:{},depthCounter:pa.context.depthCounter+1,globalScope:pa.context.globalScope};if(64<ra.depthCounter)throw Error("Exceeded maximum function depth");return X(pa.definition,ra,arguments)}}function ia(pa){}Object.defineProperty(y,"__esModule",{value:!0});y.findFunctionCalls=y.referencesFunction=y.referencesMember=y.validateScript=
y.extractFieldLiterals=y.executeScript=y.extend=y.functionHelper=void 0;var oa=0,sa={};c.registerFunctions(sa,F);k.registerFunctions(sa,F);A.registerFunctions(sa,F);u.registerFunctions(sa,F);t.registerFunctions(sa,F);x.registerFunctions(sa,F);n.registerFunctions(sa,F);sa["typeof"]=function(pa,ra){return F(pa,ra,function(ya,wa,la){l.pcCheck(la,1,1);ya=aa(la[0]);if("Unrecognised Type"===ya)throw Error("Unrecognised Type");return ya})};sa.iif=function(pa,ra){try{l.pcCheck(null===ra.arguments?[]:ra.arguments,
3,3);var ya=G(pa,ra.arguments[0]);if(!1===l.isBoolean(ya))throw Error("IF Function must have a boolean test condition");var wa=G(pa,ra.arguments[1]),la=G(pa,ra.arguments[2]);return!0===ya?wa:la}catch(Aa){throw Aa;}};sa.decode=function(pa,ra){try{if(2>ra.arguments.length)throw Error("Missing Parameters");if(2===ra.arguments.length)return G(pa,ra.arguments[1]);if(0===(ra.arguments.length-1)%2)throw Error("Must have a default value result.");var ya=G(pa,ra.arguments[0]);return ba(pa,ra,1,ya)}catch(wa){throw wa;
}};sa.when=function(pa,ra){try{if(3>ra.arguments.length)throw Error("Missing Parameters");if(0===ra.arguments.length%2)throw Error("Must have a default value result.");var ya=G(pa,ra.arguments[0]);if(!1===l.isBoolean(ya))throw Error("WHEN needs boolean test conditions");return O(pa,ra,0,ya)}catch(wa){throw wa;}};sa.top=function(pa,ra){return F(pa,ra,function(ya,wa,la){l.pcCheck(la,2,2);if(l.isArray(la[0]))return l.toNumber(la[1])>=la[0].length?la[0].slice(0):la[0].slice(0,l.toNumber(la[1]));if(l.isImmutableArray(la[0]))return l.toNumber(la[1])>=
la[0].length()?la[0].slice(0):la[0].slice(0,l.toNumber(la[1]));throw Error("Top cannot accept this parameter type");})};sa.first=function(pa,ra){return F(pa,ra,function(ya,wa,la){l.pcCheck(la,1,1);return l.isArray(la[0])?0===la[0].length?null:la[0][0]:l.isImmutableArray(la[0])?0===la[0].length()?null:la[0].get(0):null})};sa.sort=function(pa,ra){return F(pa,ra,function(ya,wa,la){l.pcCheck(la,1,2);ya=la[0];l.isImmutableArray(ya)&&(ya=ya.toArray());if(!1===l.isArray(ya))throw Error("Illegal Argument");
if(1<la.length){if(!1===l.isFunctionParameter(la[1]))throw Error("Illegal Argument");var Aa=Y(la[1]);return ya=V(ya,function(Q,xa){return Aa(Q,xa)})}if(0===ya.length)return[];la={};for(wa=0;wa<ya.length;wa++){var da=aa(ya[wa]);""!==da&&(la[da]=!0)}if(!0===la.Array||!0===la.Dictionary||!0===la.Feature||!0===la.Point||!0===la.Polygon||!0===la.Polyline||!0===la.Multipoint||!0===la.Extent||!0===la.Function)return ya.slice(0);wa=0;da="";for(var fa in la)wa++,da=fa;return ya=1<wa||"String"===da?V(ya,function(Q,
xa){if(null===Q||void 0===Q||Q===l.voidOperation)return null===xa||void 0===xa||xa===l.voidOperation?0:1;if(null===xa||void 0===xa||xa===l.voidOperation)return-1;Q=l.toString(Q);xa=l.toString(xa);return Q<xa?-1:Q===xa?0:1}):"Number"===da?V(ya,function(Q,xa){return Q-xa}):"Boolean"===da?V(ya,function(Q,xa){return Q===xa?0:xa?-1:1}):"Date"===da?V(ya,function(Q,xa){return xa-Q}):ya.slice(0)})};for(var Ba in sa)sa[Ba]={value:new l.NativeFunction(sa[Ba]),valueset:!0,node:null};var Da=function(){};Da.prototype=
sa;Da.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};Da.prototype.pi={value:Math.PI,valueset:!0,node:null};y.functionHelper={fixSpatialReference:l.fixSpatialReference,parseArguments:C,standardFunction:F};y.extend=function(pa){for(var ra={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:F,evaluateIdentifier:S,arcadeCustomFunctionHandler:Y},ya=0;ya<pa.length;ya++)pa[ya].registerFunctions(ra);for(var wa in ra.functions)sa[wa]={value:new l.NativeFunction(ra.functions[wa]),
valueset:!0,node:null},Da.prototype[wa]=sa[wa];for(ya=0;ya<ra.signatures.length;ya++)d.addFunctionDeclaration(ra.signatures[ya],"async")};y.executeScript=function(pa,ra){var ya=ra.spatialReference;if(null===ya||void 0===ya)ya=new B({wkid:102100});var wa=ra.vars,la=ra.customfunctions,Aa=new Da;wa||(wa={});la||(la={});var da=new h({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});da.immutable=!1;Aa.textformatting={value:da,valueset:!0,node:null};for(var fa in la)Aa[fa]=
{value:new l.NativeFunction(la[fa]),native:!0,valueset:!0,node:null};for(fa in wa)Aa[fa]=wa[fa]&&"esri.Graphic"===wa[fa].declaredClass?{value:e.createFromGraphic(wa[fa]),valueset:!0,node:null}:{value:wa[fa],valueset:!0,node:null};pa=G({spatialReference:ya,globalScope:Aa,localScope:null,console:ra.console?ra.console:ia,lrucache:ra.lrucache,depthCounter:1},pa.body[0].body);pa instanceof l.ReturnResult&&(pa=pa.value);pa instanceof l.ImplicitResult&&(pa=pa.value);pa===l.voidOperation&&(pa=null);if(pa===
l.breakResult)throw Error("Cannot return BREAK");if(pa===l.continueResult)throw Error("Cannot return CONTINUE");if(pa instanceof g)throw Error("Cannot return FUNCTION");if(pa instanceof l.NativeFunction)throw Error("Cannot return FUNCTION");return pa};y.extractFieldLiterals=function(pa,ra){void 0===ra&&(ra=!1);return d.findFieldLiterals(pa)};y.validateScript=function(pa,ra){return d.validateScript(pa,ra,"simple")};y.referencesMember=function(pa,ra){return d.referencesMember(pa,ra)};y.referencesFunction=
function(pa,ra){return d.referencesFunction(pa,ra)};y.findFunctionCalls=function(pa){return d.findFunctionCalls(pa)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(b,y,q,a){Object.defineProperty(y,"__esModule",{value:!0});y.referencesFunction=y.referencesMember=y.validateScript=y.extractFieldLiterals=y.scriptCheck=y.parseScript=void 0;y.parseScript=function(h,e){void 0===e&&(e=[]);h=a.parse("function _() { "+h+"\n}");if(null===h.body||void 0===
h.body)throw Error("No formula provided.");if(0===h.body.length)throw Error("No formula provided.");if(0===h.body.length)throw Error("No formula provided.");if("BlockStatement"!==h.body[0].body.type)throw Error("Invalid formula content.");var g=q.validateLanguage(h);if(""!==g)throw Error(g);q.findScriptDependencies(h,e);return h};y.scriptCheck=function(h,e,g,f,m){var l=[];h="function _() { \n"+h+"\n}";try{var d=a.parse(h,{tolerant:!0,loc:!0,range:!0}),c=d.errors;if(0<c.length)for(var k=0;k<c.length;k++)l.push({line:c[k].lineNumber-
2,character:c[k].column,reason:c[k].description});var t=q.checkScript(d,e,g,f,m);for(e=0;e<t.length;e++)t[e].line-=2,t[e].range&&(t[e].range=[t[e][0]-15,t[e][1]-15]),t[e].loc&&(t[e].loc.start.line-=2,t[e].loc.end.line-=2),l.push(t[e])}catch(u){try{if("Unexpected token }"===u.description){var n=h.split("\n").length;u.lineNumber===n?(u.index=h.length-1,l.push({line:u.lineNumber-4,character:u.column,reason:"Unexpected end of script"})):(u.index=h.length-1,l.push({line:u.lineNumber-2,character:u.column,
reason:"Unexpected end of script"}))}else l.push({line:u.lineNumber-2,character:u.column,reason:u.description})}catch(x){}}return l};y.extractFieldLiterals=function(h,e){void 0===e&&(e=!1);return q.findFieldLiterals(h)};y.validateScript=function(h,e,g){return q.validateScript(h,e,g)};y.referencesMember=function(h,e){return q.referencesMember(h,e)};y.referencesFunction=function(h,e){return q.referencesFunction(h,e)}})},"esri/arcade/lib/esprima":function(){define("require exports ./comment-handler ./parser ./tokenizer ./syntax".split(" "),
function(b,y,q,a,h,e){function g(f,m,l){var d=null,c=function(u,x){l&&l(u,x);d&&d.visit(u,x)},k="function"===typeof l?c:null,t=!1;if(m){t="boolean"===typeof m.comment&&m.comment;var n="boolean"===typeof m.attachComment&&m.attachComment;if(t||n)d=new q.CommentHandler,d.attach=n,m.comment=!0,k=c}f=new a.Parser(f,m,k);m=f.parseScript();t&&d&&(m.comments=d.comments);f.config.tokens&&(m.tokens=f.tokens);f.config.tolerant&&(m.errors=f.errorHandler.errors);return m}Object.defineProperty(y,"__esModule",{value:!0});
y.version=y.tokenize=y.parseScript=y.parse=void 0;y.parse=g;y.parseScript=function(f,m,l){m=m||{};m.sourceType="script";return g(f,m,l)};y.tokenize=function(f,m,l){f=new h.Tokenizer(f,m);m=[];try{for(;;){var d=f.getNextToken();if(!d)break;l&&(d=l(d));m.push(d)}}catch(c){f.errorHandler.tolerate(c)}f.errorHandler.tolerant&&(m.errors=f.errors());return m};Object.defineProperty(y,"Syntax",{enumerable:!0,get:function(){return e.Syntax}});y.version="4.0.0-dev"})},"esri/arcade/lib/comment-handler":function(){define(["require",
"exports","./syntax"],function(b,y,q){Object.defineProperty(y,"__esModule",{value:!0});y.CommentHandler=void 0;b=function(){function a(){this.attach=!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}a.prototype.insertInnerComments=function(h,e){if(h.type===q.Syntax.BlockStatement&&0===h.body.length){for(var g=[],f=this.leading.length-1;0<=f;--f){var m=this.leading[f];e.end.offset>=m.start&&(g.unshift(m.comment),this.leading.splice(f,1),this.trailing.splice(f,1))}g.length&&(h.innerComments=
g)}};a.prototype.findTrailingComments=function(h){var e=[];if(0<this.trailing.length){for(var g=this.trailing.length-1;0<=g;--g){var f=this.trailing[g];f.start>=h.end.offset&&e.unshift(f.comment)}this.trailing.length=0;return e}(g=this.stack[this.stack.length-1])&&g.node.trailingComments&&(f=g.node.trailingComments[0])&&f.range[0]>=h.end.offset&&(e=g.node.trailingComments,delete g.node.trailingComments);return e};a.prototype.findLeadingComments=function(h){for(var e=[],g;0<this.stack.length;){var f=
this.stack[this.stack.length-1];if(f&&f.start>=h.start.offset)g=f.node,this.stack.pop();else break}if(g){for(var m=(g.leadingComments?g.leadingComments.length:0)-1;0<=m;--m)f=g.leadingComments[m],f.range[1]<=h.start.offset&&(e.unshift(f),g.leadingComments.splice(m,1));g.leadingComments&&0===g.leadingComments.length&&delete g.leadingComments;return e}for(m=this.leading.length-1;0<=m;--m)f=this.leading[m],f.start<=h.start.offset&&(e.unshift(f.comment),this.leading.splice(m,1));return e};a.prototype.visitNode=
function(h,e){if(!(h.type===q.Syntax.Program&&0<h.body.length)){this.insertInnerComments(h,e);var g=this.findTrailingComments(e),f=this.findLeadingComments(e);0<f.length&&(h.leadingComments=f);0<g.length&&(h.trailingComments=g);this.stack.push({node:h,start:e.start.offset})}};a.prototype.visitComment=function(h,e){var g="L"===h.type[0]?"Line":"Block",f={type:g,value:h.value};h.range&&(f.range=h.range);h.loc&&(f.loc=h.loc);this.comments.push(f);this.attach&&(e={comment:{type:g,value:h.value,range:[e.start.offset,
e.end.offset]},start:e.start.offset},h.loc&&(e.comment.loc=h.loc),h.type=g,this.leading.push(e),this.trailing.push(e))};a.prototype.visit=function(h,e){"LineComment"===h.type?this.visitComment(h,e):"BlockComment"===h.type?this.visitComment(h,e):this.attach&&this.visitNode(h,e)};return a}();y.CommentHandler=b})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.Syntax=void 0;y.Syntax={AssignmentExpression:"AssignmentExpression",
AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",
Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",
VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement"}})},"esri/arcade/lib/parser":function(){define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(b,y,q,a,h,e,g,f,m){Object.defineProperty(y,"__esModule",{value:!0});y.Parser=void 0;b=function(){function l(d,c,k){void 0===c&&(c={});this.config={range:"boolean"===typeof c.range&&c.range,loc:"boolean"===typeof c.loc&&c.loc,source:null,tokens:"boolean"===typeof c.tokens&&
c.tokens,comment:"boolean"===typeof c.comment&&c.comment,tolerant:"boolean"===typeof c.tolerant&&c.tolerant};this.config.loc&&c.source&&null!==c.source&&(this.config.source=String(c.source));this.delegate=k;this.errorHandler=new a.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new g.Scanner(d,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,
"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={isModule:!1,allowIn:!0,allowStrictDirective:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1};this.tokens=[];this.startMarker=
{index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}l.prototype.throwError=function(d){for(var c=[],k=1;k<arguments.length;k++)c[k-1]=arguments[k];var t=c.slice();c=d.replace(/%(\d)/g,function(n,u){q.assert(u<t.length,"Message reference must be in range");return t[u]});throw this.errorHandler.createError(this.lastMarker.index,
this.lastMarker.line,this.lastMarker.column+1,c);};l.prototype.tolerateError=function(d){for(var c=[],k=1;k<arguments.length;k++)c[k-1]=arguments[k];var t=c.slice();c=d.replace(/%(\d)/g,function(n,u){q.assert(u<t.length,"Message reference must be in range");return t[u]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,c)};l.prototype.unexpectedTokenError=function(d,c){var k=c||h.Messages.UnexpectedToken;d?(c||(k=2===d.type?h.Messages.UnexpectedEOS:
3===d.type?h.Messages.UnexpectedIdentifier:6===d.type?h.Messages.UnexpectedNumber:8===d.type?h.Messages.UnexpectedString:10===d.type?h.Messages.UnexpectedTemplate:h.Messages.UnexpectedToken,4===d.type&&(this.scanner.isFutureReservedWord(d.value)?k=h.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(d.value)&&(k=h.Messages.StrictReservedWord))),c=d.value):c="ILLEGAL";k=k.replace("%0",c);if(d&&"number"===typeof d.lineNumber){c=d.start;var t=d.lineNumber;d=d.start-
(this.lastMarker.index-this.lastMarker.column)+1;return this.errorHandler.createError(c,t,d,k)}c=this.lastMarker.index;t=this.lastMarker.line;d=this.lastMarker.column+1;return this.errorHandler.createError(c,t,d,k)};l.prototype.throwUnexpectedToken=function(d,c){throw this.unexpectedTokenError(d,c);};l.prototype.tolerateUnexpectedToken=function(d,c){this.errorHandler.tolerate(this.unexpectedTokenError(d,c))};l.prototype.collectComments=function(){if(this.config.comment){var d=this.scanner.scanComments();
if(0<d.length&&this.delegate)for(var c=0;c<d.length;++c){var k=d[c],t={type:k.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(k.slice[0],k.slice[1])};this.config.range&&(t.range=k.range);this.config.loc&&(t.loc=k.loc);this.delegate(t,{start:{line:k.loc.start.line,column:k.loc.start.column,offset:k.range[0]},end:{line:k.loc.end.line,column:k.loc.end.column,offset:k.range[1]}})}}else this.scanner.scanComments()};l.prototype.getTokenRaw=function(d){return this.scanner.source.slice(d.start,
d.end)};l.prototype.convertToken=function(d){var c={type:m.TokenName[d.type],value:this.getTokenRaw(d)};this.config.range&&(c.range=[d.start,d.end]);this.config.loc&&(c.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});9===d.type&&(c.regex={pattern:d.pattern,flags:d.flags});return c};l.prototype.nextToken=function(){var d=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=
this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var c=this.scanner.lex();this.hasLineTerminator=d.lineNumber!==c.lineNumber;c&&this.context.strict&&3===c.type&&this.scanner.isStrictModeReservedWord(c.value)&&(c.type=4);this.lookahead=c;
this.config.tokens&&2!==c.type&&this.tokens.push(this.convertToken(c));return d};l.prototype.nextRegexToken=function(){this.collectComments();var d=this.scanner.scanRegExp();this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(d)));this.lookahead=d;this.nextToken();return d};l.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};l.prototype.startNode=function(d,c){void 0===c&&(c=0);var k=d.start-d.lineStart,
t=d.lineNumber;0>k&&(k+=c,t--);return{index:d.start,line:t,column:k}};l.prototype.finalize=function(d,c){this.config.range&&(c.range=[d.index,this.lastMarker.index]);this.config.loc&&(c.loc={start:{line:d.line,column:d.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(c.loc.source=this.config.source));this.delegate&&this.delegate(c,{start:{line:d.line,column:d.column,offset:d.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});
return c};l.prototype.expect=function(d){var c=this.nextToken();7===c.type&&c.value===d||this.throwUnexpectedToken(c)};l.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var d=this.lookahead;7===d.type&&","===d.value?this.nextToken():7===d.type&&";"===d.value?(this.nextToken(),this.tolerateUnexpectedToken(d)):this.tolerateUnexpectedToken(d,h.Messages.UnexpectedToken)}else this.expect(",")};l.prototype.expectKeyword=function(d){var c=this.nextToken();4===c.type&&c.value.toLowerCase()===
d.toLowerCase()||this.throwUnexpectedToken(c)};l.prototype.match=function(d){return 7===this.lookahead.type&&this.lookahead.value===d};l.prototype.matchKeyword=function(d){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===d.toLowerCase()};l.prototype.matchContextualKeyword=function(d){return 3===this.lookahead.type&&this.lookahead.value===d};l.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var d=this.lookahead.value;return"\x3d"===d||"*\x3d"===d||"**\x3d"===
d||"/\x3d"===d||"%\x3d"===d||"+\x3d"===d||"-\x3d"===d||"\x3c\x3c\x3d"===d||"\x3e\x3e\x3d"===d||"\x3e\x3e\x3e\x3d"===d||"\x26\x3d"===d||"^\x3d"===d||"|\x3d"===d};l.prototype.isolateCoverGrammar=function(d){var c=this.context.isBindingElement,k=this.context.isAssignmentTarget,t=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;d=d.call(this);null!==this.context.firstCoverInitializedNameError&&
this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=c;this.context.isAssignmentTarget=k;this.context.firstCoverInitializedNameError=t;return d};l.prototype.inheritCoverGrammar=function(d){var c=this.context.isBindingElement,k=this.context.isAssignmentTarget,t=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;d=d.call(this);this.context.isBindingElement=
this.context.isBindingElement&&c;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&k;this.context.firstCoverInitializedNameError=t||this.context.firstCoverInitializedNameError;return d};l.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)};
l.prototype.parsePrimaryExpression=function(){var d=this.createNode();switch(this.lookahead.type){case 3:d=this.finalize(d,new e.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,h.Messages.StrictOctalLiteral);this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var c=this.nextToken();var k=this.getTokenRaw(c);d=this.finalize(d,new e.Literal(c.value,k));break;case 1:this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;c=this.nextToken();k=this.getTokenRaw(c);d=this.finalize(d,new e.Literal("true"===c.value.toLowerCase(),k));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;c=this.nextToken();k=this.getTokenRaw(c);d=this.finalize(d,new e.Literal(null,k));break;case 10:d=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;d=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":d=
this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":d=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:d=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;d=this.matchKeyword("function")?this.parseFunctionExpression():this.throwUnexpectedToken(this.nextToken());break;default:d=this.throwUnexpectedToken(this.nextToken())}return d};l.prototype.parseArrayInitializer=function(){var d=this.createNode(),
c=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),c.push(null)):(c.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(d,new e.ArrayExpression(c))};l.prototype.parsePropertyMethod=function(d){this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var c=this.context.strict,k=this.context.allowStrictDirective;this.context.allowStrictDirective=d.simple;var t=this.isolateCoverGrammar(this.parseFunctionSourceElements);
this.context.strict&&d.firstRestricted&&this.tolerateUnexpectedToken(d.firstRestricted,d.message);this.context.strict&&d.stricted&&this.tolerateUnexpectedToken(d.stricted,d.message);this.context.strict=c;this.context.allowStrictDirective=k;return t};l.prototype.parsePropertyMethodFunction=function(){var d=this.createNode(),c=this.parseFormalParameters(),k=this.parsePropertyMethod(c);return this.finalize(d,new e.FunctionExpression(null,c.params,k,!1))};l.prototype.parseObjectPropertyKey=function(){var d=
this.createNode(),c=this.nextToken();switch(c.type){case 8:case 6:this.context.strict&&c.octal&&this.tolerateUnexpectedToken(c,h.Messages.StrictOctalLiteral);var k=this.getTokenRaw(c);d=this.finalize(d,new e.Literal(c.value,k));break;case 3:case 1:case 5:case 4:d=this.finalize(d,new e.Identifier(c.value));break;case 7:"["===c.value?(d=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):d=this.throwUnexpectedToken(c);break;default:d=this.throwUnexpectedToken(c)}return d};l.prototype.isPropertyKey=
function(d,c){return d.type===f.Syntax.Identifier&&d.name===c||d.type===f.Syntax.Literal&&d.value===c};l.prototype.parseObjectProperty=function(d){var c=this.createNode(),k=this.lookahead,t=null,n=null,u=!1,x=!1,A=!1,z=!1;if(3===k.type){var E=k.value;this.nextToken();u=this.match("[");t=(z=!this.hasLineTerminator&&"async"===E&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","))?this.parseObjectPropertyKey():this.finalize(c,new e.Identifier(E))}else this.match("*")?this.nextToken():
(u=this.match("["),t=this.parseObjectPropertyKey());t||this.throwUnexpectedToken(this.lookahead);this.match(":")&&!z?(!u&&this.isPropertyKey(t,"__proto__")&&(d.value&&this.tolerateError(h.Messages.DuplicateProtoProperty),d.value=!0),this.nextToken(),n=this.inheritCoverGrammar(this.parseAssignmentExpression)):this.match("(")?(n=this.parsePropertyMethodFunction(),x=!0):3===k.type?(E=this.finalize(c,new e.Identifier(k.value)),this.match("\x3d")?(this.context.firstCoverInitializedNameError=this.lookahead,
this.nextToken(),A=!0,d=this.isolateCoverGrammar(this.parseAssignmentExpression),n=this.finalize(c,new e.AssignmentPattern(E,d))):(A=!0,n=E)):this.throwUnexpectedToken(this.nextToken());return this.finalize(c,new e.Property("init",t,u,n,x,A))};l.prototype.parseObjectInitializer=function(){var d=this.createNode();this.expect("{");for(var c=[],k={value:!1};!this.match("}");)c.push(this.parseObjectProperty(k)),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(d,new e.ObjectExpression(c))};
l.prototype.parseTemplateHead=function(){q.assert(this.lookahead.head,"Template literal must start with a template head");var d=this.createNode(),c=this.nextToken();return this.finalize(d,new e.TemplateElement({raw:c.value,cooked:c.cooked},c.tail))};l.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var d=this.createNode(),c=this.nextToken();return this.finalize(d,new e.TemplateElement({raw:c.value,cooked:c.cooked},c.tail))};l.prototype.parseTemplateLiteral=
function(){var d=this.createNode(),c=[],k=[],t=this.parseTemplateHead();for(k.push(t);!t.tail;)c.push(this.parseExpression()),t=this.parseTemplateElement(),k.push(t);return this.finalize(d,new e.TemplateLiteral(k,c))};l.prototype.reinterpretExpressionAsPattern=function(d){switch(d.type){case f.Syntax.ArrayExpression:d.type=f.Syntax.ArrayPattern;for(var c=0;c<d.elements.length;c++)null!==d.elements[c]&&this.reinterpretExpressionAsPattern(d.elements[c]);break;case f.Syntax.ObjectExpression:d.type=f.Syntax.ObjectPattern;
for(c=0;c<d.properties.length;c++)this.reinterpretExpressionAsPattern(d.properties[c].value);break;case f.Syntax.AssignmentExpression:d.type=f.Syntax.AssignmentPattern,delete d.operator,this.reinterpretExpressionAsPattern(d.left)}};l.prototype.parseGroupExpression=function(){this.expect("(");if(this.match(")")){this.nextToken();this.match("\x3d\x3e")||this.expect("\x3d\x3e");var d={type:"ArrowParameterPlaceHolder",params:[],async:!1}}else{var c=this.lookahead,k=!1;this.context.isBindingElement=!0;
d=this.inheritCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var t=[];this.context.isAssignmentTarget=!1;for(t.push(d);2!==this.lookahead.type&&this.match(",");){this.nextToken();if(this.match(")")){this.nextToken();for(k=0;k<t.length;k++)this.reinterpretExpressionAsPattern(t[k]);k=!0;d={type:"ArrowParameterPlaceHolder",params:t,async:!1}}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(k)break}k||(d=this.finalize(this.startNode(c),new e.SequenceExpression(t)))}if(!k){this.expect(")");
if(this.match("\x3d\x3e")&&(d.type===f.Syntax.Identifier&&"yield"===d.name&&(k=!0,d={type:"ArrowParameterPlaceHolder",params:[d],async:!1}),!k)){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead);if(d.type===f.Syntax.SequenceExpression)for(k=0;k<d.expressions.length;k++)this.reinterpretExpressionAsPattern(d.expressions[k]);else this.reinterpretExpressionAsPattern(d);d={type:"ArrowParameterPlaceHolder",params:d.type===f.Syntax.SequenceExpression?d.expressions:[d],async:!1}}this.context.isBindingElement=
!1}}return d};l.prototype.parseArguments=function(){this.expect("(");var d=[];if(!this.match(")"))for(;;){var c=this.isolateCoverGrammar(this.parseAssignmentExpression);d.push(c);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return d};l.prototype.isIdentifierName=function(d){return 3===d.type||4===d.type||1===d.type||5===d.type};l.prototype.parseIdentifierName=function(){var d=this.createNode(),c=this.nextToken();this.isIdentifierName(c)||this.throwUnexpectedToken(c);
return this.finalize(d,new e.Identifier(c.value))};l.prototype.parseLeftHandSideExpressionAllowCall=function(){var d=this.lookahead,c=this.context.allowIn;this.context.allowIn=!0;var k;for(k=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect(".");var t=this.parseIdentifierName();k=this.finalize(this.startNode(d),new e.StaticMemberExpression(k,t))}else if(this.match("("))this.context.isBindingElement=
!1,this.context.isAssignmentTarget=!1,t=this.parseArguments(),k=this.finalize(this.startNode(d),new e.CallExpression(k,t));else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),t=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),k=this.finalize(this.startNode(d),new e.ComputedMemberExpression(k,t));else break;this.context.allowIn=c;return k};l.prototype.parseLeftHandSideExpression=function(){q.assert(this.context.allowIn,"callee of new expression always allow in keyword.");
for(var d=this.startNode(this.lookahead),c=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var k=this.isolateCoverGrammar(this.parseExpression);this.expect("]");c=this.finalize(d,new e.ComputedMemberExpression(c,k))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),k=this.parseIdentifierName(),c=this.finalize(d,new e.StaticMemberExpression(c,
k));else break;return c};l.prototype.parseUpdateExpression=function(){var d=this.lookahead;if(this.match("++")||this.match("--")){d=this.startNode(d);var c=this.nextToken();var k=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.strict&&k.type===f.Syntax.Identifier&&this.scanner.isRestrictedWord(k.name)&&this.tolerateError(h.Messages.StrictLHSPrefix);this.context.isAssignmentTarget||this.tolerateError(h.Messages.InvalidLHSInAssignment);k=this.finalize(d,new e.UpdateExpression(c.value,
k,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else k=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.strict&&k.type===f.Syntax.Identifier&&this.scanner.isRestrictedWord(k.name)&&this.tolerateError(h.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(h.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=
!1,c=this.nextToken().value,k=this.finalize(this.startNode(d),new e.UpdateExpression(c,k,!1)));return k};l.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var d=this.startNode(this.lookahead),c=this.nextToken();var k=this.inheritCoverGrammar(this.parseUnaryExpression);k=this.finalize(d,new e.UnaryExpression(c.value,k));this.context.strict&&"delete"===
k.operator&&k.argument.type===f.Syntax.Identifier&&this.tolerateError(h.Messages.StrictDelete);this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else k=this.parseUpdateExpression();return k};l.prototype.parseExponentiationExpression=function(){var d=this.lookahead,c=this.inheritCoverGrammar(this.parseUnaryExpression);if(c.type!==f.Syntax.UnaryExpression&&this.match("**")){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var k=this.isolateCoverGrammar(this.parseExponentiationExpression);
c=this.finalize(this.startNode(d),new e.BinaryExpression("**",c,k))}return c};l.prototype.binaryPrecedence=function(d){var c=d.value;return 7===d.type?this.operatorPrecedence[c]||0:4===d.type?"instanceof"===c||this.context.allowIn&&"in"===c?7:0:0};l.prototype.parseBinaryExpression=function(){var d=this.lookahead,c=this.inheritCoverGrammar(this.parseExponentiationExpression),k=this.lookahead,t=this.binaryPrecedence(k);if(0<t){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=
!1;d=[d,this.lookahead];var n=this.isolateCoverGrammar(this.parseExponentiationExpression);k=[c,k.value,n];for(var u=[t];;){t=this.binaryPrecedence(this.lookahead);if(0>=t)break;for(;2<k.length&&t<=u[u.length-1];){n=k.pop();var x=k.pop();u.pop();c=k.pop();d.pop();var A=d[d.length-1],z=this.startNode(A,A.lineStart);k.push(this.finalize(z,new e.BinaryExpression(x,c,n)))}k.push(this.nextToken().value);u.push(t);d.push(this.lookahead);k.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}t=
k.length-1;c=k[t];for(x=d.pop();1<t;)A=d.pop(),z=this.startNode(A,x&&x.lineStart),x=k[t-1],c=this.finalize(z,new e.BinaryExpression(x,k[t-2],c)),t-=2,x=A}return c};l.prototype.parseConditionalExpression=function(){var d=this.lookahead,c=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var k=this.context.allowIn;this.context.allowIn=!0;var t=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=k;this.expect(":");k=this.isolateCoverGrammar(this.parseAssignmentExpression);
c=this.finalize(this.startNode(d),new e.ConditionalExpression(c,t,k));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}return c};l.prototype.checkPatternParam=function(d,c){switch(c.type){case f.Syntax.Identifier:this.validateParam(d,c,c.name);break;case f.Syntax.AssignmentPattern:this.checkPatternParam(d,c.left);break;case f.Syntax.ArrayPattern:for(var k=0;k<c.elements.length;k++)null!==c.elements[k]&&this.checkPatternParam(d,c.elements[k]);break;case f.Syntax.ObjectPattern:for(k=
0;k<c.properties.length;k++)this.checkPatternParam(d,c.properties[k].value)}d.simple=d.simple&&c instanceof e.Identifier};l.prototype.reinterpretAsCoverFormalsList=function(d){var c=[d],k={simple:!0,paramSet:{}};switch(d.type){case f.Syntax.Identifier:break;default:return null}for(d=0;d<c.length;++d){var t=c[d];this.checkPatternParam(k,t);c[d]=t}k.message===h.Messages.StrictParamDupe&&this.throwUnexpectedToken(this.context.strict?k.stricted:k.firstRestricted,k.message);return{simple:k.simple,params:c,
stricted:k.stricted,firstRestricted:k.firstRestricted,message:k.message}};l.prototype.parseAssignmentExpression=function(){var d=this.lookahead,c=d;var k=this.parseConditionalExpression();if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(h.Messages.InvalidLHSInAssignment);if(this.context.strict&&k.type===f.Syntax.Identifier){var t=k;this.scanner.isRestrictedWord(t.name)&&this.tolerateUnexpectedToken(c,h.Messages.StrictLHSAssignment);this.scanner.isStrictModeReservedWord(t.name)&&
this.tolerateUnexpectedToken(c,h.Messages.StrictReservedWord)}this.match("\x3d")?this.reinterpretExpressionAsPattern(k):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);c=this.nextToken();c=c.value;t=this.isolateCoverGrammar(this.parseAssignmentExpression);k=this.finalize(this.startNode(d),new e.AssignmentExpression(c,k,t));this.context.firstCoverInitializedNameError=null}return k};l.prototype.parseExpression=function(){var d=this.lookahead,c=this.isolateCoverGrammar(this.parseAssignmentExpression);
if(this.match(",")){var k=[];for(k.push(c);2!==this.lookahead.type&&this.match(",");)this.nextToken(),k.push(this.isolateCoverGrammar(this.parseAssignmentExpression));c=this.finalize(this.startNode(d),new e.SequenceExpression(k))}return c};l.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var d=this.parseFunctionDeclaration();break;default:d=this.parseStatement()}else d=
this.parseStatement();return d};l.prototype.parseBlock=function(){var d=this.createNode();this.expect("{");for(var c=[];!this.match("}");)c.push(this.parseStatementListItem());this.expect("}");return this.finalize(d,new e.BlockStatement(c))};l.prototype.parseBlockOrObjectInitialiser=function(){var d=this.createNode();this.expect("{");if(3===this.lookahead.type||8===this.lookahead.type){var c=this.scanner.saveState();this.scanner.scanComments();var k=this.scanner.lex();this.scanner.restoreState(c);
if(7===k.type&&":"===k.value){c=[];for(k={value:!1};!this.match("}");)c.push(this.parseObjectProperty(k)),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(d,new e.ObjectExpression(c))}}for(c=[];!this.match("}");)c.push(this.parseStatementListItem());this.expect("}");return this.finalize(d,new e.BlockStatement(c))};l.prototype.parseLexicalBinding=function(d,c){var k=this.createNode();d=this.parsePattern([],d);this.context.strict&&d.type===f.Syntax.Identifier&&this.scanner.isRestrictedWord(d.name)&&
this.tolerateError(h.Messages.StrictVarName);var t=null;if(!c.inFor&&d.type!==f.Syntax.Identifier||this.match("\x3d"))this.expect("\x3d"),t=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize(k,new e.VariableDeclarator(d,t))};l.prototype.parseBindingList=function(d,c){for(var k=[this.parseLexicalBinding(d,c)];this.match(",");)this.nextToken(),k.push(this.parseLexicalBinding(d,c));return k};l.prototype.parseArrayPattern=function(d,c){var k=this.createNode();this.expect("[");
for(var t=[];!this.match("]");)this.match(",")?(this.nextToken(),t.push(null)):(t.push(this.parsePatternWithDefault(d,c)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(k,new e.ArrayPattern(t))};l.prototype.parsePropertyPattern=function(d,c){var k=this.createNode(),t=!1,n=!1;if(3===this.lookahead.type){var u=this.lookahead;var x=this.parseVariableIdentifier();var A=this.finalize(k,new e.Identifier(u.value));this.match("\x3d")?(d.push(u),n=!0,this.nextToken(),d=this.parseAssignmentExpression(),
u=this.finalize(this.startNode(u),new e.AssignmentPattern(A,d))):this.match(":")?(this.expect(":"),u=this.parsePatternWithDefault(d,c)):(d.push(u),n=!0,u=A)}else t=this.match("["),x=this.parseObjectPropertyKey(),this.expect(":"),u=this.parsePatternWithDefault(d,c);return this.finalize(k,new e.Property("init",x,t,u,!1,n))};l.prototype.parseObjectPattern=function(d,c){var k=this.createNode(),t=[];for(this.expect("{");!this.match("}");)t.push(this.parsePropertyPattern(d,c)),this.match("}")||this.expect(",");
this.expect("}");return this.finalize(k,new e.ObjectPattern(t))};l.prototype.parsePattern=function(d,c){this.match("[")?d=this.parseArrayPattern(d,c):this.match("{")?d=this.parseObjectPattern(d,c):(!this.matchKeyword("let")||"const"!==c&&"let"!==c||this.tolerateUnexpectedToken(this.lookahead,h.Messages.LetInLexicalBinding),d.push(this.lookahead),d=this.parseVariableIdentifier(c));return d};l.prototype.parsePatternWithDefault=function(d,c){var k=this.lookahead;d=this.parsePattern(d,c);this.match("\x3d")&&
(this.nextToken(),c=this.isolateCoverGrammar(this.parseAssignmentExpression),d=this.finalize(this.startNode(k),new e.AssignmentPattern(d,c)));return d};l.prototype.parseVariableIdentifier=function(d){var c=this.createNode(),k=this.nextToken();3!==k.type&&(this.context.strict&&4===k.type&&this.scanner.isStrictModeReservedWord(k.value)?this.tolerateUnexpectedToken(k,h.Messages.StrictReservedWord):(this.context.strict||"let"!==k.value||"var"!==d)&&this.throwUnexpectedToken(k));return this.finalize(c,
new e.Identifier(k.value))};l.prototype.parseVariableDeclaration=function(d){var c=this.createNode(),k=this.parsePattern([],"var");this.context.strict&&k.type===f.Syntax.Identifier&&this.scanner.isRestrictedWord(k.name)&&this.tolerateError(h.Messages.StrictVarName);var t=null;this.match("\x3d")?(this.nextToken(),t=this.isolateCoverGrammar(this.parseAssignmentExpression)):k.type===f.Syntax.Identifier||d.inFor||this.expect("\x3d");return this.finalize(c,new e.VariableDeclarator(k,t))};l.prototype.parseVariableDeclarationList=
function(d){d={inFor:d.inFor};var c=[];for(c.push(this.parseVariableDeclaration(d));this.match(",");)this.nextToken(),c.push(this.parseVariableDeclaration(d));return c};l.prototype.parseVariableStatement=function(){var d=this.createNode();this.expectKeyword("var");var c=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(d,new e.VariableDeclaration(c,"var"))};l.prototype.parseEmptyStatement=function(){var d=this.createNode();this.expect(";");return this.finalize(d,
new e.EmptyStatement)};l.prototype.parseExpressionStatement=function(){var d=this.createNode(),c=this.parseExpression();this.consumeSemicolon();return this.finalize(d,new e.ExpressionStatement(c))};l.prototype.parseIfClause=function(){this.context.strict&&this.matchKeyword("function")&&this.tolerateError(h.Messages.StrictFunction);return this.parseStatement(!0)};l.prototype.parseIfStatement=function(){var d=this.createNode(),c=null;this.expectKeyword("if");this.expect("(");var k=this.parseExpression();
if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var t=this.finalize(this.createNode(),new e.EmptyStatement)}else this.expect(")"),t=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),c=this.parseIfClause());return this.finalize(d,new e.IfStatement(k,t,c))};l.prototype.parseForStatement=function(){var d=null,c=null,k=null,t=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){d=
this.createNode();this.nextToken();var n=this.context.allowIn;this.context.allowIn=!1;var u=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=n;if(1===u.length&&this.matchKeyword("in")){var x=u[0];x.init&&(x.id.type===f.Syntax.ArrayPattern||x.id.type===f.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(h.Messages.ForInOfLoopInitializer,"for-in");d=this.finalize(d,new e.VariableDeclaration(u,"var"));this.nextToken();x=d;var A=this.parseExpression();d=null}else 1===u.length&&
null===u[0].init&&this.matchContextualKeyword("of")?(d=this.finalize(d,new e.VariableDeclaration(u,"var")),this.nextToken(),x=d,A=this.parseAssignmentExpression(),d=null):(d=this.finalize(d,new e.VariableDeclaration(u,"var")),this.expect(";"))}else{u=this.lookahead;var z=this.context.isBindingElement,E=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;n=this.context.allowIn;this.context.allowIn=!1;d=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=
n;if(this.matchKeyword("in"))this.context.isAssignmentTarget&&d.type!==f.Syntax.AssignmentExpression||this.tolerateError(h.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(d),x=d,A=this.parseExpression(),d=null;else{this.context.isBindingElement=z;this.context.isAssignmentTarget=E;this.context.firstCoverInitializedNameError=w;if(this.match(",")){for(d=[d];this.match(",");)this.nextToken(),d.push(this.isolateCoverGrammar(this.parseAssignmentExpression));d=this.finalize(this.startNode(u),
new e.SequenceExpression(d))}this.expect(";")}}"undefined"===typeof x&&(this.match(";")||(c=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(k=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),n=this.finalize(this.createNode(),new e.EmptyStatement)):(this.expect(")"),u=this.context.inIteration,this.context.inIteration=!0,n=this.isolateCoverGrammar(this.parseStatementBlockAllowed),
this.context.inIteration=u);return"undefined"===typeof x?this.finalize(t,new e.ForStatement(d,c,k,n)):this.finalize(t,new e.ForInStatement(x,A,n))};l.prototype.parseContinueStatement=function(){var d=this.createNode();this.expectKeyword("continue");var c=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var k=this.parseVariableIdentifier();c=k;Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+k.name)||this.throwError(h.Messages.UnknownLabel,k.name)}this.consumeSemicolon();null!==
c||this.context.inIteration||this.throwError(h.Messages.IllegalContinue);return this.finalize(d,new e.ContinueStatement(c))};l.prototype.parseBreakStatement=function(){var d=this.createNode();this.expectKeyword("break");var c=null;3!==this.lookahead.type||this.hasLineTerminator||(c=this.parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+c.name)||this.throwError(h.Messages.UnknownLabel,c.name));this.consumeSemicolon();null!==c||this.context.inIteration||this.context.inSwitch||
this.throwError(h.Messages.IllegalBreak);return this.finalize(d,new e.BreakStatement(c))};l.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(h.Messages.IllegalReturn);var d=this.createNode();this.expectKeyword("return");var c=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();return this.finalize(d,new e.ReturnStatement(c))};
l.prototype.parseLabelledStatement=function(){var d=this.createNode(),c=this.parseExpression();this.consumeSemicolon();c=new e.ExpressionStatement(c);return this.finalize(d,c)};l.prototype.parseStatementBlockAllowed=function(){return this.parseStatement(!0)};l.prototype.parseStatement=function(d){void 0===d&&(d=!1);switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:d=this.parseExpressionStatement();break;case 7:var c=this.lookahead.value;d="{"===c?d?this.parseBlockOrObjectInitialiser():
this.parseObjectInitializer():"("===c?this.parseExpressionStatement():";"===c?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:d=this.parseLabelledStatement();break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":d=this.parseBreakStatement();break;case "continue":d=this.parseContinueStatement();break;case "for":d=this.parseForStatement();break;case "function":d=this.parseFunctionDeclaration();break;case "if":d=this.parseIfStatement();break;case "return":d=this.parseReturnStatement();
break;case "var":d=this.parseVariableStatement();break;default:d=this.parseExpressionStatement()}break;default:d=this.throwUnexpectedToken(this.lookahead)}return d};l.prototype.parseFunctionSourceElements=function(){var d=this.createNode();this.expect("{");var c=[],k=this.context.labelSet,t=this.context.inIteration,n=this.context.inSwitch,u=this.context.inFunctionBody;this.context.labelSet={};this.context.inIteration=!1;this.context.inSwitch=!1;for(this.context.inFunctionBody=!0;2!==this.lookahead.type&&
!this.match("}");)c.push(this.parseStatementListItem());this.expect("}");this.context.labelSet=k;this.context.inIteration=t;this.context.inSwitch=n;this.context.inFunctionBody=u;return this.finalize(d,new e.BlockStatement(c))};l.prototype.validateParam=function(d,c,k){var t="$"+k;this.context.strict?(this.scanner.isRestrictedWord(k)&&(d.stricted=c,d.message=h.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(d.paramSet,t)&&(d.stricted=c,d.message=h.Messages.StrictParamDupe)):d.firstRestricted||
(this.scanner.isRestrictedWord(k)?(d.firstRestricted=c,d.message=h.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(k)?(d.firstRestricted=c,d.message=h.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(d.paramSet,t)&&(d.stricted=c,d.message=h.Messages.StrictParamDupe));"function"===typeof Object.defineProperty?Object.defineProperty(d.paramSet,t,{value:!0,enumerable:!0,writable:!0,configurable:!0}):d.paramSet[t]=!0};l.prototype.parseFormalParameter=function(d){for(var c=
[],k=this.parsePatternWithDefault(c),t=0;t<c.length;t++)this.validateParam(d,c[t],c[t].value);d.simple=d.simple&&k instanceof e.Identifier;d.params.push(k)};l.prototype.parseFormalParameters=function(d){d={simple:!0,params:[],firstRestricted:d};this.expect("(");if(!this.match(")"))for(d.paramSet={};2!==this.lookahead.type;){this.parseFormalParameter(d);if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return{simple:d.simple,params:d.params,stricted:d.stricted,firstRestricted:d.firstRestricted,
message:d.message}};l.prototype.parseFunctionDeclaration=function(d){var c=this.createNode();this.expectKeyword("function");var k=null,t=null;if(!d||!this.match("("))if(d=this.lookahead,k=this.parseVariableIdentifier(),this.context.strict)this.scanner.isRestrictedWord(d.value)&&this.tolerateUnexpectedToken(d,h.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(d.value)){t=d;var n=h.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(d.value)&&(t=d,n=h.Messages.StrictReservedWord);
var u=this.parseFormalParameters(t);d=u.params;var x=u.stricted;t=u.firstRestricted;u.message&&(n=u.message);var A=this.context.strict,z=this.context.allowStrictDirective;this.context.allowStrictDirective=u.simple;u=this.parseFunctionSourceElements();this.context.strict&&t&&this.throwUnexpectedToken(t,n);this.context.strict&&x&&this.tolerateUnexpectedToken(x,n);this.context.strict=A;this.context.allowStrictDirective=z;return this.finalize(c,new e.FunctionDeclaration(k,d,u,!1))};l.prototype.parseFunctionExpression=
function(){var d=this.createNode();this.expectKeyword("function");var c=null;if(!this.match("(")){var k=this.lookahead;c=this.parseVariableIdentifier();if(this.context.strict)this.scanner.isRestrictedWord(k.value)&&this.tolerateUnexpectedToken(k,h.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(k.value)){var t=k;var n=h.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(k.value)&&(t=k,n=h.Messages.StrictReservedWord)}var u=this.parseFormalParameters(t);k=u.params;
var x=u.stricted;t=u.firstRestricted;u.message&&(n=u.message);var A=this.context.strict,z=this.context.allowStrictDirective;this.context.allowStrictDirective=u.simple;u=this.parseFunctionSourceElements();this.context.strict&&t&&this.throwUnexpectedToken(t,n);this.context.strict&&x&&this.tolerateUnexpectedToken(x,n);this.context.strict=A;this.context.allowStrictDirective=z;return this.finalize(d,new e.FunctionExpression(c,k,u,!1))};l.prototype.qualifiedPropertyName=function(d){switch(d.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;
case 7:return"["===d.value}return!1};l.prototype.isStartOfExpression=function(){var d=!0,c=this.lookahead.value;switch(this.lookahead.type){case 7:d="["===c||"("===c||"{"===c||"+"===c||"-"===c||"!"===c||"~"===c||"++"===c||"--"===c||"/"===c||"/\x3d"===c;break;case 4:d="class"===c||"delete"===c||"function"===c||"let"===c||"new"===c||"super"===c||"this"===c||"typeof"===c||"void"===c||"yield"===c}return d};l.prototype.parseScript=function(){for(var d=this.createNode(),c=[];2!==this.lookahead.type;)c.push(this.parseStatementListItem());
return this.finalize(d,new e.Script(c))};return l}();y.Parser=b})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.assert=void 0;y.assert=function(q,a){if(!q)throw Error("ASSERT: "+a);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.ErrorHandler=void 0;b=function(){function q(){this.errors=[];this.tolerant=!1}q.prototype.recordError=
function(a){this.errors.push(a)};q.prototype.tolerate=function(a){if(this.tolerant)this.recordError(a);else throw a;};q.prototype.constructError=function(a,h){a=Error(a);try{throw a;}catch(e){Object.create&&Object.defineProperty&&(a=Object.create(e),Object.defineProperty(a,"column",{value:h}))}return a};q.prototype.createError=function(a,h,e,g){e=this.constructError("Line "+h+": "+g,e);e.index=a;e.lineNumber=h;e.description=g;return e};q.prototype.throwError=function(a,h,e,g){throw this.createError(a,
h,e,g);};q.prototype.tolerateError=function(a,h,e,g){a=this.createError(a,h,e,g);if(this.tolerant)this.recordError(a);else throw a;};return q}();y.ErrorHandler=b})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.Messages=void 0;y.Messages={BadImportCallArity:"Unexpected token",BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",
ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token \x3d",DefaultRestProperty:"Unexpected token \x3d",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",
GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",
InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",
NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",PropertyAfterRestProperty:"Unexpected token",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",
StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",
UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}})},"esri/arcade/lib/nodes":function(){define(["require","exports","./syntax"],function(b,y,q){Object.defineProperty(y,"__esModule",{value:!0});y.VariableDeclarator=y.VariableDeclaration=y.UpdateExpression=y.UnaryExpression=y.TemplateLiteral=y.TemplateElement=y.StaticMemberExpression=y.SequenceExpression=y.Script=y.ReturnStatement=
y.Property=y.ObjectPattern=y.ObjectExpression=y.Module=y.MethodDefinition=y.Literal=y.IfStatement=y.Identifier=y.FunctionExpression=y.FunctionDeclaration=y.ForStatement=y.ForInStatement=y.ExpressionStatement=y.EmptyStatement=y.ContinueStatement=y.ConditionalExpression=y.ComputedMemberExpression=y.CallExpression=y.BreakStatement=y.BlockStatement=y.BinaryExpression=y.AssignmentPattern=y.AssignmentExpression=y.ArrayPattern=y.ArrayExpression=void 0;b=function(){return function(a){this.type=q.Syntax.ArrayExpression;
this.elements=a}}();y.ArrayExpression=b;b=function(){return function(a){this.type=q.Syntax.ArrayPattern;this.elements=a}}();y.ArrayPattern=b;b=function(){return function(a,h,e){this.type=q.Syntax.AssignmentExpression;this.operator=a;this.left=h;this.right=e}}();y.AssignmentExpression=b;b=function(){return function(a,h){this.type=q.Syntax.AssignmentPattern;this.left=a;this.right=h}}();y.AssignmentPattern=b;b=function(){return function(a,h,e){this.type="||"===a||"\x26\x26"===a?q.Syntax.LogicalExpression:
q.Syntax.BinaryExpression;this.operator=a;this.left=h;this.right=e}}();y.BinaryExpression=b;b=function(){return function(a){this.type=q.Syntax.BlockStatement;this.body=a}}();y.BlockStatement=b;b=function(){return function(a){this.type=q.Syntax.BreakStatement;this.label=a}}();y.BreakStatement=b;b=function(){return function(a,h){this.type=q.Syntax.CallExpression;this.callee=a;this.arguments=h}}();y.CallExpression=b;b=function(){return function(a,h){this.type=q.Syntax.MemberExpression;this.computed=
!0;this.object=a;this.property=h}}();y.ComputedMemberExpression=b;b=function(){return function(a,h,e){this.type=q.Syntax.ConditionalExpression;this.test=a;this.consequent=h;this.alternate=e}}();y.ConditionalExpression=b;b=function(){return function(a){this.type=q.Syntax.ContinueStatement;this.label=a}}();y.ContinueStatement=b;b=function(){return function(){this.type=q.Syntax.EmptyStatement}}();y.EmptyStatement=b;b=function(){return function(a){this.type=q.Syntax.ExpressionStatement;this.expression=
a}}();y.ExpressionStatement=b;b=function(){return function(a,h,e){this.type=q.Syntax.ForInStatement;this.left=a;this.right=h;this.body=e;this.each=!1}}();y.ForInStatement=b;b=function(){return function(a,h,e,g){this.type=q.Syntax.ForStatement;this.init=a;this.test=h;this.update=e;this.body=g}}();y.ForStatement=b;b=function(){return function(a,h,e,g){this.type=q.Syntax.FunctionDeclaration;this.id=a;this.params=h;this.body=e;this.generator=g;this.async=this.expression=!1}}();y.FunctionDeclaration=b;
b=function(){return function(a,h,e,g){this.type=q.Syntax.FunctionExpression;this.id=a;this.params=h;this.body=e;this.generator=g;this.async=this.expression=!1}}();y.FunctionExpression=b;b=function(){return function(a){this.type=q.Syntax.Identifier;this.name=a}}();y.Identifier=b;b=function(){return function(a,h,e){this.type=q.Syntax.IfStatement;this.test=a;this.consequent=h;this.alternate=e}}();y.IfStatement=b;b=function(){return function(a,h){this.type=q.Syntax.Literal;this.value=a;this.raw=h}}();
y.Literal=b;b=function(){return function(a,h,e,g,f){this.type=q.Syntax.MethodDefinition;this.key=a;this.computed=h;this.value=e;this.kind=g;this.static=f}}();y.MethodDefinition=b;b=function(){return function(a){this.type=q.Syntax.Program;this.body=a;this.sourceType="module"}}();y.Module=b;b=function(){return function(a){this.type=q.Syntax.ObjectExpression;this.properties=a}}();y.ObjectExpression=b;b=function(){return function(a){this.type=q.Syntax.ObjectPattern;this.properties=a}}();y.ObjectPattern=
b;b=function(){return function(a,h,e,g,f,m){this.type=q.Syntax.Property;this.key=h;this.computed=e;this.value=g;this.kind=a;this.method=f;this.shorthand=m}}();y.Property=b;b=function(){return function(a){this.type=q.Syntax.ReturnStatement;this.argument=a}}();y.ReturnStatement=b;b=function(){return function(a){this.type=q.Syntax.Program;this.body=a;this.sourceType="script"}}();y.Script=b;b=function(){return function(a){this.type=q.Syntax.SequenceExpression;this.expressions=a}}();y.SequenceExpression=
b;b=function(){return function(a,h){this.type=q.Syntax.MemberExpression;this.computed=!1;this.object=a;this.property=h}}();y.StaticMemberExpression=b;b=function(){return function(a,h){this.type=q.Syntax.TemplateElement;this.value=a;this.tail=h}}();y.TemplateElement=b;b=function(){return function(a,h){this.type=q.Syntax.TemplateLiteral;this.quasis=a;this.expressions=h}}();y.TemplateLiteral=b;b=function(){return function(a,h){this.type=q.Syntax.UnaryExpression;this.operator=a;this.argument=h;this.prefix=
!0}}();y.UnaryExpression=b;b=function(){return function(a,h,e){this.type=q.Syntax.UpdateExpression;this.operator=a;this.argument=h;this.prefix=e}}();y.UpdateExpression=b;b=function(){return function(a,h){this.type=q.Syntax.VariableDeclaration;this.declarations=a;this.kind=h}}();y.VariableDeclaration=b;b=function(){return function(a,h){this.type=q.Syntax.VariableDeclarator;this.id=a;this.init=h}}();y.VariableDeclarator=b})},"esri/arcade/lib/scanner":function(){define(["require","exports","./assert",
"./character","./messages"],function(b,y,q,a,h){Object.defineProperty(y,"__esModule",{value:!0});y.Scanner=void 0;b=function(){function e(g,f){this.source=g;this.errorHandler=f;this.isModule=this.trackComment=!1;this.length=g.length;this.index=0;this.lineNumber=0<g.length?1:0;this.lineStart=0;this.curlyStack=[]}e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};e.prototype.restoreState=function(g){this.index=
g.index;this.lineNumber=g.lineNumber;this.lineStart=g.lineStart;this.curlyStack=g.curlyStack};e.prototype.eof=function(){return this.index>=this.length};e.prototype.throwUnexpectedToken=function(g){void 0===g&&(g=h.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,g)};e.prototype.tolerateUnexpectedToken=function(g){void 0===g&&(g=h.Messages.UnexpectedTokenIllegal);this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-
this.lineStart+1,g)};e.prototype.skipSingleLineComment=function(g){var f=[];if(this.trackComment){f=[];var m=this.index-g;var l={start:{line:this.lineNumber,column:this.index-this.lineStart-g},end:{}}}for(;!this.eof();){var d=this.source.charCodeAt(this.index);++this.index;if(a.Character.isLineTerminator(d))return this.trackComment&&(l.end={line:this.lineNumber,column:this.index-this.lineStart-1},g={multiLine:!1,slice:[m+g,this.index-1],range:[m,this.index-1],loc:l},f.push(g)),13===d&&10===this.source.charCodeAt(this.index)&&
++this.index,++this.lineNumber,this.lineStart=this.index,f}this.trackComment&&(l.end={line:this.lineNumber,column:this.index-this.lineStart},g={multiLine:!1,slice:[m+g,this.index],range:[m,this.index],loc:l},f.push(g));return f};e.prototype.skipMultiLineComment=function(){var g=[];if(this.trackComment){g=[];var f=this.index-2;var m={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}}}for(;!this.eof();){var l=this.source.charCodeAt(this.index);if(a.Character.isLineTerminator(l))13===
l&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===l&&47===this.source.charCodeAt(this.index+1))return this.index+=2,this.trackComment&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},f={multiLine:!0,slice:[f+2,this.index-2],range:[f,this.index],loc:m},g.push(f)),g;++this.index}}this.trackComment&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},f={multiLine:!0,slice:[f+2,this.index],range:[f,
this.index],loc:m},g.push(f));this.tolerateUnexpectedToken();return g};e.prototype.scanComments=function(){var g;this.trackComment&&(g=[]);for(var f=0===this.index;!this.eof();){var m=this.source.charCodeAt(this.index);if(a.Character.isWhiteSpace(m))++this.index;else if(a.Character.isLineTerminator(m))++this.index,13===m&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,f=!0;else if(47===m)if(m=this.source.charCodeAt(this.index+1),47===m)this.index+=
2,m=this.skipSingleLineComment(2),this.trackComment&&(g=g.concat(m)),f=!0;else if(42===m)this.index+=2,m=this.skipMultiLineComment(),this.trackComment&&(g=g.concat(m));else break;else if(f&&45===m)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,m=this.skipSingleLineComment(3),this.trackComment&&(g=g.concat(m));else break;else if(60!==m||this.isModule)break;else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,m=this.skipSingleLineComment(4),
this.trackComment&&(g=g.concat(m));else break}return g};e.prototype.isFutureReservedWord=function(g){return!1};e.prototype.isStrictModeReservedWord=function(g){return!1};e.prototype.isRestrictedWord=function(g){return!1};e.prototype.isKeyword=function(g){g=g.toLowerCase();switch(g.length){case 2:return"if"===g||"in"===g;case 3:return"var"===g||"for"===g;case 4:return"else"===g;case 5:return"break"===g;case 6:return"return"===g;case 8:return"function"===g||"continue"===g;default:return!1}};e.prototype.codePointAt=
function(g){var f=this.source.charCodeAt(g);55296<=f&&56319>=f&&(g=this.source.charCodeAt(g+1),56320<=g&&57343>=g&&(f=1024*(f-55296)+g-56320+65536));return f};e.prototype.scanHexEscape=function(g){g="u"===g?4:2;for(var f=0,m=0;m<g;++m)if(!this.eof()&&a.Character.isHexDigit(this.source.charCodeAt(this.index)))f=16*f+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(f)};e.prototype.scanUnicodeCodePointEscape=function(){var g=this.source[this.index],
f=0;for("}"===g&&this.throwUnexpectedToken();!this.eof();){g=this.source[this.index++];if(!a.Character.isHexDigit(g.charCodeAt(0)))break;f=16*f+"0123456789abcdef".indexOf(g.toLowerCase())}(1114111<f||"}"!==g)&&this.throwUnexpectedToken();return a.Character.fromCodePoint(f)};e.prototype.getIdentifier=function(){for(var g=this.index++;!this.eof();){var f=this.source.charCodeAt(this.index);if(92===f||55296<=f&&57343>f)return this.index=g,this.getComplexIdentifier();if(a.Character.isIdentifierPart(f))++this.index;
else break}return this.source.slice(g,this.index)};e.prototype.getComplexIdentifier=function(){var g=this.codePointAt(this.index),f=a.Character.fromCodePoint(g);this.index+=f.length;if(92===g){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var m=this.scanUnicodeCodePointEscape()}else m=this.scanHexEscape("u"),null!==m&&"\\"!==m&&a.Character.isIdentifierStart(m.charCodeAt(0))||this.throwUnexpectedToken();f=m}for(;!this.eof();){g=
this.codePointAt(this.index);if(!a.Character.isIdentifierPart(g))break;m=a.Character.fromCodePoint(g);f+=m;this.index+=m.length;92===g&&(f=f.substr(0,f.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,m=this.scanUnicodeCodePointEscape()):(m=this.scanHexEscape("u"),null!==m&&"\\"!==m&&a.Character.isIdentifierPart(m.charCodeAt(0))||this.throwUnexpectedToken()),f+=m)}return f};e.prototype.octalToDecimal=function(g){var f=
"0"!==g,m="01234567".indexOf(g);!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(f=!0,m=8*m+"01234567".indexOf(this.source[this.index++]),0<="0123".indexOf(g)&&!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(m=8*m+"01234567".indexOf(this.source[this.index++])));return{code:m,octal:f}};e.prototype.scanIdentifier=function(){var g=this.index,f=92===this.source.charCodeAt(g)?this.getComplexIdentifier():this.getIdentifier();var m=1===f.length?3:this.isKeyword(f)?
4:"null"===f.toLowerCase()?5:"true"===f.toLowerCase()||"false"===f.toLowerCase()?1:3;if(3!==m&&g+f.length!==this.index){var l=this.index;this.index=g;this.tolerateUnexpectedToken(h.Messages.InvalidEscapedReservedWord);this.index=l}return{type:m,value:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanPunctuator=function(){var g=this.index,f=this.source[this.index];switch(f){case "(":case "{":"{"===f&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;
"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,f="...");break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:f=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===f?this.index+=4:(f=f.substr(0,3),"\x3d\x3d\x3d"===f||"!\x3d\x3d"===f||"\x3e\x3e\x3e"===f||"\x3c\x3c\x3d"===f||"\x3e\x3e\x3d"===f||"**\x3d"===f?this.index+=3:(f=f.substr(0,2),"\x26\x26"===f||"||"===f||"\x3d\x3d"===
f||"!\x3d"===f||"+\x3d"===f||"-\x3d"===f||"*\x3d"===f||"/\x3d"===f||"++"===f||"--"===f||"\x3c\x3c"===f||"\x3e\x3e"===f||"\x26\x3d"===f||"|\x3d"===f||"^\x3d"===f||"%\x3d"===f||"\x3c\x3d"===f||"\x3e\x3d"===f||"\x3d\x3e"===f||"**"===f?this.index+=2:(f=this.source[this.index],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(f)&&++this.index)))}this.index===g&&this.throwUnexpectedToken();return{type:7,value:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanHexLiteral=
function(g){for(var f="";!this.eof()&&a.Character.isHexDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];0===f.length&&this.throwUnexpectedToken();a.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseInt("0x"+f,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanBinaryLiteral=function(g){for(var f="",m;!this.eof();){m=this.source[this.index];if("0"!==m&&"1"!==m)break;
f+=this.source[this.index++]}0===f.length&&this.throwUnexpectedToken();this.eof()||(m=this.source.charCodeAt(this.index),(a.Character.isIdentifierStart(m)||a.Character.isDecimalDigit(m))&&this.throwUnexpectedToken());return{type:6,value:parseInt(f,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanOctalLiteral=function(g,f){var m="",l=!1;a.Character.isOctalDigit(g.charCodeAt(0))?(l=!0,m="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index));)m+=
this.source[this.index++];l||0!==m.length||this.throwUnexpectedToken();(a.Character.isIdentifierStart(this.source.charCodeAt(this.index))||a.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:6,value:parseInt(m,8),octal:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};e.prototype.scanNumericLiteral=function(){var g=this.index,f=this.source[g];q.assert(a.Character.isDecimalDigit(f.charCodeAt(0))||"."===f,"Numeric literal must start with a decimal digit or a decimal point");
var m="";if("."!==f){m=this.source[this.index++];f=this.source[this.index];if("0"===m){if("x"===f||"X"===f)return++this.index,this.scanHexLiteral(g);if("b"===f||"B"===f)return++this.index,this.scanBinaryLiteral(g);if("o"===f||"O"===f)return this.scanOctalLiteral(f,g)}for(;a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];f=this.source[this.index]}if("."===f){for(m+=this.source[this.index++];a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)m+=
this.source[this.index++];f=this.source[this.index]}if("e"===f||"E"===f){m+=this.source[this.index++];f=this.source[this.index];if("+"===f||"-"===f)m+=this.source[this.index++];if(a.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];else this.throwUnexpectedToken()}a.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(m),
lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanStringLiteral=function(){var g=this.index,f=this.source[g];q.assert("'"===f||'"'===f,"String literal must starts with a quote");++this.index;for(var m=!1,l="";!this.eof();){var d=this.source[this.index++];if(d===f){f="";break}if("\\"===d)if((d=this.source[this.index++])&&a.Character.isLineTerminator(d.charCodeAt(0)))++this.lineNumber,"\r"===d&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;
else switch(d){case "u":"{"===this.source[this.index]?(++this.index,l+=this.scanUnicodeCodePointEscape()):(d=this.scanHexEscape(d),null===d&&this.throwUnexpectedToken(),l+=d);break;case "x":d=this.scanHexEscape(d);null===d&&this.throwUnexpectedToken(h.Messages.InvalidHexEscapeSequence);l+=d;break;case "n":l+="\n";break;case "r":l+="\r";break;case "t":l+="\t";break;case "b":l+="\b";break;case "f":l+="\f";break;case "v":l+="\x0B";break;case "8":case "9":l+=d;this.tolerateUnexpectedToken();break;default:d&&
a.Character.isOctalDigit(d.charCodeAt(0))?(d=this.octalToDecimal(d),m=d.octal||m,l+=String.fromCharCode(d.code)):l+=d}else if(a.Character.isLineTerminator(d.charCodeAt(0)))break;else l+=d}""!==f&&(this.index=g,this.throwUnexpectedToken());return{type:8,value:l,octal:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanTemplate=function(){var g="",f=!1,m=this.index,l="`"===this.source[m],d=!1,c=2;for(++this.index;!this.eof();){var k=this.source[this.index++];
if("`"===k){c=1;f=d=!0;break}if("$"===k){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;f=!0;break}g+=k}else if("\\"===k)if(k=this.source[this.index++],a.Character.isLineTerminator(k.charCodeAt(0)))++this.lineNumber,"\r"===k&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(k){case "n":g+="\n";break;case "r":g+="\r";break;case "t":g+="\t";break;case "u":if("{"===this.source[this.index])++this.index,g+=this.scanUnicodeCodePointEscape();else{var t=
this.index,n=this.scanHexEscape(k);null!==n?g+=n:(this.index=t,g+=k)}break;case "x":k=this.scanHexEscape(k);null===k&&this.throwUnexpectedToken(h.Messages.InvalidHexEscapeSequence);g+=k;break;case "b":g+="\b";break;case "f":g+="\f";break;case "v":g+="\v";break;default:"0"===k?(a.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(h.Messages.TemplateOctalLiteral),g+="\x00"):a.Character.isOctalDigit(k.charCodeAt(0))?this.throwUnexpectedToken(h.Messages.TemplateOctalLiteral):
g+=k}else a.Character.isLineTerminator(k.charCodeAt(0))?(++this.lineNumber,"\r"===k&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,g+="\n"):g+=k}f||this.throwUnexpectedToken();l||this.curlyStack.pop();return{type:10,value:this.source.slice(m+1,this.index-c),cooked:g,head:l,tail:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};e.prototype.testRegExp=function(g,f){var m=this,l=g;0<=f.indexOf("u")&&(l=l.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,
function(d,c,k){d=parseInt(c||k,16);1114111<d&&m.throwUnexpectedToken(h.Messages.InvalidRegExp);return 65535>=d?String.fromCharCode(d):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(l)}catch(d){this.throwUnexpectedToken(h.Messages.InvalidRegExp)}try{return new RegExp(g,f)}catch(d){return null}};e.prototype.scanRegExpBody=function(){var g=this.source[this.index];q.assert("/"===g,"Regular expression literal must start with a slash");for(var f=this.source[this.index++],m=
!1,l=!1;!this.eof();)if(g=this.source[this.index++],f+=g,"\\"===g)g=this.source[this.index++],a.Character.isLineTerminator(g.charCodeAt(0))&&this.throwUnexpectedToken(h.Messages.UnterminatedRegExp),f+=g;else if(a.Character.isLineTerminator(g.charCodeAt(0)))this.throwUnexpectedToken(h.Messages.UnterminatedRegExp);else if(m)"]"===g&&(m=!1);else{if("/"===g){l=!0;break}"["===g&&(m=!0)}l||this.throwUnexpectedToken(h.Messages.UnterminatedRegExp);return f.substr(1,f.length-2)};e.prototype.scanRegExpFlags=
function(){for(var g="";!this.eof();){var f=this.source[this.index];if(!a.Character.isIdentifierPart(f.charCodeAt(0)))break;++this.index;if("\\"!==f||this.eof())g+=f;else{f=this.source[this.index];if("u"===f){++this.index;f=this.index;var m=this.scanHexEscape("u");if(null!==m)for(g+=m;f<this.index;++f);else this.index=f,g+="u"}this.tolerateUnexpectedToken()}}return g};e.prototype.scanRegExp=function(){var g=this.index,f=this.scanRegExpBody(),m=this.scanRegExpFlags(),l=this.testRegExp(f,m);return{type:9,
value:"",pattern:f,flags:m,regex:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var g=this.source.charCodeAt(this.index);return a.Character.isIdentifierStart(g)?this.scanIdentifier():40===g||41===g||59===g?this.scanPunctuator():39===g||34===g?this.scanStringLiteral():46===g?a.Character.isDecimalDigit(this.source.charCodeAt(this.index+
1))?this.scanNumericLiteral():this.scanPunctuator():a.Character.isDecimalDigit(g)?this.scanNumericLiteral():96===g||125===g&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=g&&57343>g&&a.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return e}();y.Scanner=b})},"esri/arcade/lib/character":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.Character=void 0;var q=
/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
a=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
y.Character={fromCodePoint:function(h){return 65536>h?String.fromCharCode(h):String.fromCharCode(55296+(h-65536>>10))+String.fromCharCode(56320+(h-65536&1023))},isWhiteSpace:function(h){return 32===h||9===h||11===h||12===h||160===h||5760<=h&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(h)},isLineTerminator:function(h){return 10===h||13===h||8232===h||8233===h},isIdentifierStart:function(h){return 36===h||95===h||65<=h&&90>=h||97<=h&&122>=h||92===h||
128<=h&&q.test(y.Character.fromCodePoint(h))},isIdentifierPart:function(h){return 36===h||95===h||65<=h&&90>=h||97<=h&&122>=h||48<=h&&57>=h||92===h||128<=h&&a.test(y.Character.fromCodePoint(h))},isDecimalDigit:function(h){return 48<=h&&57>=h},isHexDigit:function(h){return 48<=h&&57>=h||65<=h&&70>=h||97<=h&&102>=h},isOctalDigit:function(h){return 48<=h&&55>=h}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.TokenName=
y.Token=void 0;b=y.Token||(y.Token={});b[b.BooleanLiteral=1]="BooleanLiteral";b[b.EOF=2]="EOF";b[b.Identifier=3]="Identifier";b[b.Keyword=4]="Keyword";b[b.NullLiteral=5]="NullLiteral";b[b.NumericLiteral=6]="NumericLiteral";b[b.Punctuator=7]="Punctuator";b[b.StringLiteral=8]="StringLiteral";b[b.RegularExpression=9]="RegularExpression";b[b.Template=10]="Template";y.TokenName={};y.TokenName[1]="Boolean";y.TokenName[2]="\x3cend\x3e";y.TokenName[3]="Identifier";y.TokenName[4]="Keyword";y.TokenName[5]=
"Null";y.TokenName[6]="Numeric";y.TokenName[7]="Punctuator";y.TokenName[8]="String";y.TokenName[9]="RegularExpression";y.TokenName[10]="Template"})},"esri/arcade/lib/tokenizer":function(){define(["require","exports","./error-handler","./scanner","./token"],function(b,y,q,a,h){Object.defineProperty(y,"__esModule",{value:!0});y.Tokenizer=void 0;var e=function(){function g(){this.values=[];this.curly=this.paren=-1}g.prototype.beforeFunctionExpression=function(f){return 0<="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d **\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * ** / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ").indexOf(f)};
g.prototype.isRegexStart=function(){var f=this.values[this.values.length-1],m=null!==f;switch(f){case "this":case "]":m=!1;break;case ")":f=this.values[this.paren-1];m="if"===f||"while"===f||"for"===f||"with"===f;break;case "}":m=!0,"function"===this.values[this.curly-3]?m=(f=this.values[this.curly-4])?!this.beforeFunctionExpression(f):!1:"function"===this.values[this.curly-4]&&(m=(f=this.values[this.curly-5])?!this.beforeFunctionExpression(f):!0)}return m};g.prototype.push=function(f){7===f.type||
4===f.type?("{"===f.value?this.curly=this.values.length:"("===f.value&&(this.paren=this.values.length),this.values.push(f.value)):this.values.push(null)};return g}();b=function(){function g(f,m){this.errorHandler=new q.ErrorHandler;this.errorHandler.tolerant=m?"boolean"===typeof m.tolerant&&m.tolerant:!1;this.scanner=new a.Scanner(f,this.errorHandler);this.scanner.trackComment=m?"boolean"===typeof m.comment&&m.comment:!1;this.trackRange=m?"boolean"===typeof m.range&&m.range:!1;this.trackLoc=m?"boolean"===
typeof m.loc&&m.loc:!1;this.buffer=[];this.reader=new e}g.prototype.errors=function(){return this.errorHandler.errors};g.prototype.getNextToken=function(){if(0===this.buffer.length){var f=this.scanner.scanComments();if(this.scanner.trackComment)for(var m=0;m<f.length;++m){var l=f[m],d=this.scanner.source.slice(l.slice[0],l.slice[1]);d={type:l.multiLine?"BlockComment":"LineComment",value:d};this.trackRange&&(d.range=l.range);this.trackLoc&&(d.loc=l.loc);this.buffer.push(d)}if(!this.scanner.eof()){f=
void 0;this.trackLoc&&(f={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});m=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){l=this.scanner.saveState();try{m=this.scanner.scanRegExp()}catch(c){this.scanner.restoreState(l),m=this.scanner.lex()}}else m=this.scanner.lex();this.reader.push(m);l={type:h.TokenName[m.type],value:this.scanner.source.slice(m.start,m.end)};this.trackRange&&(l.range=[m.start,m.end]);this.trackLoc&&
(f.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},l.loc=f);9===m.type&&(l.regex={pattern:m.pattern,flags:m.flags});this.buffer.push(l)}}return this.buffer.shift()};return g}();y.Tokenizer=b})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(b,y,q){return q})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(b,y,q,a){Object.defineProperty(y,"__esModule",{value:!0});var h=
{ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-in":1,"en-nz":1,"en-sg":1,es:1,"es-do":1,"es-mx":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,hu:1,id:1,it:1,"it-ch":1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-mo":1,"zh-tw":1};y.load=function(e,g,f){e=q.locale;var m=
e in h;if(!m){var l=e.split("-");1<l.length&&l[0]in h&&(e=l[0],m=!0)}m?g(["moment/locale/"+e],function(){f(a)}):f(a)}})},"moment/moment":function(){(function(b,y){"object"===typeof exports&&"undefined"!==typeof module?module.exports=y():"function"===typeof define&&define.amd?define(y):b.moment=y()})(this,function(){function b(){return Gc.apply(null,arguments)}function y(M){return M instanceof Array||"[object Array]"===Object.prototype.toString.call(M)}function q(M){return null!=M&&"[object Object]"===
Object.prototype.toString.call(M)}function a(M,Z){return Object.prototype.hasOwnProperty.call(M,Z)}function h(M){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(M).length;for(var Z in M)if(a(M,Z))return!1;return!0}function e(M){return void 0===M}function g(M){return"number"===typeof M||"[object Number]"===Object.prototype.toString.call(M)}function f(M){return M instanceof Date||"[object Date]"===Object.prototype.toString.call(M)}function m(M,Z){var ma=[],ta;for(ta=0;ta<M.length;++ta)ma.push(Z(M[ta],
ta));return ma}function l(M,Z){for(var ma in Z)a(Z,ma)&&(M[ma]=Z[ma]);a(Z,"toString")&&(M.toString=Z.toString);a(Z,"valueOf")&&(M.valueOf=Z.valueOf);return M}function d(M,Z,ma,ta){return Oa(M,Z,ma,ta,!0).utc()}function c(M){null==M._pf&&(M._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return M._pf}function k(M){if(null==
M._isValid){var Z=c(M),ma=Ia.call(Z.parsedDateParts,function(ta){return null!=ta});ma=!isNaN(M._d.getTime())&&0>Z.overflow&&!Z.empty&&!Z.invalidEra&&!Z.invalidMonth&&!Z.invalidWeekday&&!Z.weekdayMismatch&&!Z.nullInput&&!Z.invalidFormat&&!Z.userInvalidated&&(!Z.meridiem||Z.meridiem&&ma);M._strict&&(ma=ma&&0===Z.charsLeftOver&&0===Z.unusedTokens.length&&void 0===Z.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(M))return ma;M._isValid=ma}return M._isValid}function t(M){var Z=d(NaN);null!=M?l(c(Z),
M):c(Z).userInvalidated=!0;return Z}function n(M,Z){var ma;e(Z._isAMomentObject)||(M._isAMomentObject=Z._isAMomentObject);e(Z._i)||(M._i=Z._i);e(Z._f)||(M._f=Z._f);e(Z._l)||(M._l=Z._l);e(Z._strict)||(M._strict=Z._strict);e(Z._tzm)||(M._tzm=Z._tzm);e(Z._isUTC)||(M._isUTC=Z._isUTC);e(Z._offset)||(M._offset=Z._offset);e(Z._pf)||(M._pf=c(Z));e(Z._locale)||(M._locale=Z._locale);if(0<Ca.length)for(ma=0;ma<Ca.length;ma++){var ta=Ca[ma];var La=Z[ta];e(La)||(M[ta]=La)}return M}function u(M){n(this,M);this._d=
new Date(null!=M._d?M._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Ga&&(Ga=!0,b.updateOffset(this),Ga=!1)}function x(M){return M instanceof u||null!=M&&null!=M._isAMomentObject}function A(M,Z){var ma=!0;return l(function(){null!=b.deprecationHandler&&b.deprecationHandler(null,M);if(ma){var ta=[],La,Va;for(La=0;La<arguments.length;La++){var Xa="";if("object"===typeof arguments[La]){Xa+="\n["+La+"] ";for(Va in arguments[0])a(arguments[0],Va)&&(Xa+=Va+": "+arguments[0][Va]+", ");Xa=
Xa.slice(0,-2)}else Xa=arguments[La];ta.push(Xa)}Array.prototype.slice.call(ta).join("");ma=!1}return Z.apply(this,arguments)},Z)}function z(M,Z){null!=b.deprecationHandler&&b.deprecationHandler(M,Z);Na[M]||(Na[M]=!0)}function E(M){return"undefined"!==typeof Function&&M instanceof Function||"[object Function]"===Object.prototype.toString.call(M)}function w(M,Z){var ma=l({},M),ta;for(ta in Z)a(Z,ta)&&(q(M[ta])&&q(Z[ta])?(ma[ta]={},l(ma[ta],M[ta]),l(ma[ta],Z[ta])):null!=Z[ta]?ma[ta]=Z[ta]:delete ma[ta]);
for(ta in M)a(M,ta)&&!a(Z,ta)&&q(M[ta])&&(ma[ta]=l({},ma[ta]));return ma}function D(M){null!=M&&this.set(M)}function r(M,Z,ma){var ta=""+Math.abs(M);return(0<=M?ma?"+":"":"-")+Math.pow(10,Math.max(0,Z-ta.length)).toString().substr(1)+ta}function v(M,Z,ma,ta){var La=ta;"string"===typeof ta&&(La=function(){return this[ta]()});M&&(Ya[M]=La);Z&&(Ya[Z[0]]=function(){return r(La.apply(this,arguments),Z[1],Z[2])});ma&&(Ya[ma]=function(){return this.localeData().ordinal(La.apply(this,arguments),M)})}function B(M){return M.match(/\[[\s\S]/)?
M.replace(/^\[|\]$/g,""):M.replace(/\\/g,"")}function C(M){var Z=M.match(Ka),ma;var ta=0;for(ma=Z.length;ta<ma;ta++)Z[ta]=Ya[Z[ta]]?Ya[Z[ta]]:B(Z[ta]);return function(La){var Va="",Xa;for(Xa=0;Xa<ma;Xa++)Va+=E(Z[Xa])?Z[Xa].call(La,M):Z[Xa];return Va}}function F(M,Z){if(!M.isValid())return M.localeData().invalidDate();Z=G(Z,M.localeData());Wa[Z]=Wa[Z]||C(Z);return Wa[Z](M)}function G(M,Z){function ma(La){return Z.longDateFormat(La)||La}var ta=5;for(Ra.lastIndex=0;0<=ta&&Ra.test(M);)M=M.replace(Ra,
ma),Ra.lastIndex=0,--ta;return M}function H(M,Z){var ma=M.toLowerCase();cb[ma]=cb[ma+"s"]=cb[Z]=M}function J(M){return"string"===typeof M?cb[M]||cb[M.toLowerCase()]:void 0}function I(M){var Z={},ma,ta;for(ta in M)a(M,ta)&&(ma=J(ta))&&(Z[ma]=M[ta]);return Z}function K(M){var Z=[],ma;for(ma in M)a(M,ma)&&Z.push({unit:ma,priority:Ta[ma]});Z.sort(function(ta,La){return ta.priority-La.priority});return Z}function R(M){return 0===M%4&&0!==M%100||0===M%400}function W(M){return 0>M?Math.ceil(M)||0:Math.floor(M)}
function P(M){M=+M;var Z=0;0!==M&&isFinite(M)&&(Z=W(M));return Z}function S(M,Z){return function(ma){return null!=ma?(aa(this,M,ma),b.updateOffset(this,Z),this):L(this,M)}}function L(M,Z){return M.isValid()?M._d["get"+(M._isUTC?"UTC":"")+Z]():NaN}function aa(M,Z,ma){if(M.isValid()&&!isNaN(ma))if("FullYear"===Z&&R(M.year())&&1===M.month()&&29===M.date())ma=P(ma),M._d["set"+(M._isUTC?"UTC":"")+Z](ma,M.month(),ia(ma,M.month()));else M._d["set"+(M._isUTC?"UTC":"")+Z](ma)}function ba(M,Z,ma){tc[M]=E(Z)?
Z:function(ta,La){return ta&&ma?ma:Z}}function O(M,Z){return a(tc,M)?tc[M](Z._strict,Z._locale):new RegExp(V(M))}function V(M){return X(M.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(Z,ma,ta,La,Va){return ma||ta||La||Va}))}function X(M){return M.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function N(M,Z){var ma,ta=Z;"string"===typeof M&&(M=[M]);g(Z)&&(ta=function(La,Va){Va[Z]=P(La)});for(ma=0;ma<M.length;ma++)uc[M[ma]]=ta}function Y(M,Z){N(M,function(ma,ta,La,Va){La._w=
La._w||{};Z(ma,La._w,La,Va)})}function ia(M,Z){if(isNaN(M)||isNaN(Z))return NaN;var ma=(Z%12+12)%12;return 1===ma?R(M+(Z-ma)/12)?29:28:31-ma%7%2}function oa(M,Z){if(!M.isValid())return M;if("string"===typeof Z)if(/^\d+$/.test(Z))Z=P(Z);else if(Z=M.localeData().monthsParse(Z),!g(Z))return M;var ma=Math.min(M.date(),ia(M.year(),Z));M._d["set"+(M._isUTC?"UTC":"")+"Month"](Z,ma);return M}function sa(M){return null!=M?(oa(this,M),b.updateOffset(this,!0),this):L(this,"Month")}function Ba(){function M(Xa,
hb){return hb.length-Xa.length}var Z=[],ma=[],ta=[],La;for(La=0;12>La;La++){var Va=d([2E3,La]);Z.push(this.monthsShort(Va,""));ma.push(this.months(Va,""));ta.push(this.months(Va,""));ta.push(this.monthsShort(Va,""))}Z.sort(M);ma.sort(M);ta.sort(M);for(La=0;12>La;La++)Z[La]=X(Z[La]),ma[La]=X(ma[La]);for(La=0;24>La;La++)ta[La]=X(ta[La]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+ta.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+ma.join("|")+")","i");this._monthsShortStrictRegex=
new RegExp("^("+Z.join("|")+")","i")}function Da(M,Z,ma,ta,La,Va,Xa){100>M&&0<=M?(Z=new Date(M+400,Z,ma,ta,La,Va,Xa),isFinite(Z.getFullYear())&&Z.setFullYear(M)):Z=new Date(M,Z,ma,ta,La,Va,Xa);return Z}function pa(M){if(100>M&&0<=M){var Z=Array.prototype.slice.call(arguments);Z[0]=M+400;Z=new Date(Date.UTC.apply(null,Z));isFinite(Z.getUTCFullYear())&&Z.setUTCFullYear(M)}else Z=new Date(Date.UTC.apply(null,arguments));return Z}function ra(M,Z,ma){ma=7+Z-ma;return-((7+pa(M,0,ma).getUTCDay()-Z)%7)+ma-
1}function ya(M,Z,ma,ta,La){ma=(7+ma-ta)%7;ta=ra(M,ta,La);ta=1+7*(Z-1)+ma+ta;0>=ta?(Z=M-1,M=(R(Z)?366:365)+ta):ta>(R(M)?366:365)?(Z=M+1,M=ta-(R(M)?366:365)):(Z=M,M=ta);return{year:Z,dayOfYear:M}}function wa(M,Z,ma){var ta=ra(M.year(),Z,ma);ta=Math.floor((M.dayOfYear()-ta-1)/7)+1;1>ta?(M=M.year()-1,Z=ta+la(M,Z,ma)):ta>la(M.year(),Z,ma)?(Z=ta-la(M.year(),Z,ma),M=M.year()+1):(M=M.year(),Z=ta);return{week:Z,year:M}}function la(M,Z,ma){var ta=ra(M,Z,ma);Z=ra(M+1,Z,ma);return((R(M)?366:365)-ta+Z)/7}function Aa(M,
Z){return M.slice(Z,7).concat(M.slice(0,Z))}function da(M,Z,ma){var ta;M=M.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],ta=0;7>ta;++ta){var La=d([2E3,1]).day(ta);this._minWeekdaysParse[ta]=this.weekdaysMin(La,"").toLocaleLowerCase();this._shortWeekdaysParse[ta]=this.weekdaysShort(La,"").toLocaleLowerCase();this._weekdaysParse[ta]=this.weekdays(La,"").toLocaleLowerCase()}if(ma)Z="dddd"===Z?wb.call(this._weekdaysParse,M):
"ddd"===Z?wb.call(this._shortWeekdaysParse,M):wb.call(this._minWeekdaysParse,M);else if("dddd"===Z){Z=wb.call(this._weekdaysParse,M);if(-1!==Z)return Z;Z=wb.call(this._shortWeekdaysParse,M);if(-1!==Z)return Z;Z=wb.call(this._minWeekdaysParse,M)}else if("ddd"===Z){Z=wb.call(this._shortWeekdaysParse,M);if(-1!==Z)return Z;Z=wb.call(this._weekdaysParse,M);if(-1!==Z)return Z;Z=wb.call(this._minWeekdaysParse,M)}else{Z=wb.call(this._minWeekdaysParse,M);if(-1!==Z)return Z;Z=wb.call(this._weekdaysParse,M);
if(-1!==Z)return Z;Z=wb.call(this._shortWeekdaysParse,M)}return-1!==Z?Z:null}function fa(){function M(jb,xb){return xb.length-jb.length}var Z=[],ma=[],ta=[],La=[],Va;for(Va=0;7>Va;Va++){var Xa=d([2E3,1]).day(Va);var hb=X(this.weekdaysMin(Xa,""));var pb=X(this.weekdaysShort(Xa,""));Xa=X(this.weekdays(Xa,""));Z.push(hb);ma.push(pb);ta.push(Xa);La.push(hb);La.push(pb);La.push(Xa)}Z.sort(M);ma.sort(M);ta.sort(M);La.sort(M);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+
La.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+ta.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+ma.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+Z.join("|")+")","i")}function Q(){return this.hours()%12||12}function xa(M,Z){v(M,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),Z)})}function Fa(M,Z){return Z._meridiemParse}function ca(M){return M?M.toLowerCase().replace("_","-"):M}function Sa(M){var Z=null;if(void 0===
sb[M]&&"undefined"!==typeof module&&module&&module.exports)try{Z=gc._abbr;var ma=require;ma("./locale/"+M);Qa(Z)}catch(ta){sb[M]=null}return sb[M]}function Qa(M,Z){M&&(M=e(Z)?T(M):va(M,Z))&&(gc=M);return gc._abbr}function va(M,Z){if(null!==Z){var ma=xc;Z.abbr=M;if(null!=sb[M])z("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
ma=sb[M]._config;else if(null!=Z.parentLocale)if(null!=sb[Z.parentLocale])ma=sb[Z.parentLocale]._config;else if(ma=Sa(Z.parentLocale),null!=ma)ma=ma._config;else return hc[Z.parentLocale]||(hc[Z.parentLocale]=[]),hc[Z.parentLocale].push({name:M,config:Z}),null;sb[M]=new D(w(ma,Z));hc[M]&&hc[M].forEach(function(ta){va(ta.name,ta.config)});Qa(M);return sb[M]}delete sb[M];return null}function T(M){var Z;M&&M._locale&&M._locale._abbr&&(M=M._locale._abbr);if(!M)return gc;if(!y(M)){if(Z=Sa(M))return Z;
M=[M]}a:{Z=0;for(var ma,ta,La,Va;Z<M.length;){Va=ca(M[Z]).split("-");ma=Va.length;for(ta=(ta=ca(M[Z+1]))?ta.split("-"):null;0<ma;){if(La=Sa(Va.slice(0,ma).join("-"))){M=La;break a}if(La=ta&&ta.length>=ma){b:{La=void 0;var Xa=Math.min(Va.length,ta.length);for(La=0;La<Xa;La+=1)if(Va[La]!==ta[La])break b;La=Xa}La=La>=ma-1}if(La)break;ma--}Z++}M=gc}return M}function ja(M){var Z;(Z=M._a)&&-2===c(M).overflow&&(Z=0>Z[Nb]||11<Z[Nb]?Nb:1>Z[Kb]||Z[Kb]>ia(Z[Db],Z[Nb])?Kb:0>Z[yb]||24<Z[yb]||24===Z[yb]&&(0!==
Z[Gb]||0!==Z[Ob]||0!==Z[Vb])?yb:0>Z[Gb]||59<Z[Gb]?Gb:0>Z[Ob]||59<Z[Ob]?Ob:0>Z[Vb]||999<Z[Vb]?Vb:-1,c(M)._overflowDayOfYear&&(Z<Db||Z>Kb)&&(Z=Kb),c(M)._overflowWeeks&&-1===Z&&(Z=Hc),c(M)._overflowWeekday&&-1===Z&&(Z=Ic),c(M).overflow=Z);return M}function ka(M){var Z;var ma=M._i;var ta=Jc.exec(ma)||Kc.exec(ma);if(ta){c(M).iso=!0;ma=0;for(Z=pc.length;ma<Z;ma++)if(pc[ma][1].exec(ta[1])){var La=pc[ma][0];var Va=!1!==pc[ma][2];break}if(null==La)M._isValid=!1;else{if(ta[3]){ma=0;for(Z=vc.length;ma<Z;ma++)if(vc[ma][1].exec(ta[3])){var Xa=
(ta[2]||" ")+vc[ma][0];break}if(null==Xa){M._isValid=!1;return}}if(Va||null==Xa){if(ta[4])if(Lc.exec(ta[4]))var hb="Z";else{M._isValid=!1;return}M._f=La+(Xa||"")+(hb||"");ua(M)}else M._isValid=!1}}else M._isValid=!1}function U(M){var Z=Mc.exec(M._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(Z){var ma=Z[3],ta=Z[2],La=Z[5],Va=Z[6],Xa=Z[7],hb=parseInt(Z[4],10);ma=[49>=hb?2E3+hb:999>=hb?1900+hb:hb,yc.indexOf(ma),parseInt(ta,10),parseInt(La,10),
parseInt(Va,10)];Xa&&ma.push(parseInt(Xa,10));a:{if(Xa=Z[1])if(Xa=zc.indexOf(Xa),ta=(new Date(ma[0],ma[1],ma[2])).getDay(),Xa!==ta){c(M).weekdayMismatch=!0;Xa=M._isValid=!1;break a}Xa=!0}Xa&&(M._a=ma,(Xa=Z[8])?Z=Nc[Xa]:Z[9]?Z=0:(Z=parseInt(Z[10],10),Xa=Z%100,Z=(Z-Xa)/100*60+Xa),M._tzm=Z,M._d=pa.apply(null,M._a),M._d.setUTCMinutes(M._d.getUTCMinutes()-M._tzm),c(M).rfc2822=!0)}else M._isValid=!1}function ha(M){var Z=Oc.exec(M._i);null!==Z?M._d=new Date(+Z[1]):(ka(M),!1===M._isValid&&(delete M._isValid,
U(M),!1===M._isValid&&(delete M._isValid,M._strict?M._isValid=!1:b.createFromInputFallback(M))))}function na(M,Z,ma){return null!=M?M:null!=Z?Z:ma}function qa(M){var Z=[];if(!M._d){var ma=new Date(b.now());ma=M._useUTC?[ma.getUTCFullYear(),ma.getUTCMonth(),ma.getUTCDate()]:[ma.getFullYear(),ma.getMonth(),ma.getDate()];if(M._w&&null==M._a[Kb]&&null==M._a[Nb]){var ta=M._w;if(null!=ta.GG||null!=ta.W||null!=ta.E){var La=1;var Va=4;var Xa=na(ta.GG,M._a[Db],wa(Ha(),1,4).year);var hb=na(ta.W,1);var pb=na(ta.E,
1);if(1>pb||7<pb)var jb=!0}else if(La=M._locale._week.dow,Va=M._locale._week.doy,hb=wa(Ha(),La,Va),Xa=na(ta.gg,M._a[Db],hb.year),hb=na(ta.w,hb.week),null!=ta.d){if(pb=ta.d,0>pb||6<pb)jb=!0}else if(null!=ta.e){if(pb=ta.e+La,0>ta.e||6<ta.e)jb=!0}else pb=La;1>hb||hb>la(Xa,La,Va)?c(M)._overflowWeeks=!0:null!=jb?c(M)._overflowWeekday=!0:(jb=ya(Xa,hb,pb,La,Va),M._a[Db]=jb.year,M._dayOfYear=jb.dayOfYear)}if(null!=M._dayOfYear){jb=na(M._a[Db],ma[Db]);if(M._dayOfYear>(R(jb)?366:365)||0===M._dayOfYear)c(M)._overflowDayOfYear=
!0;jb=pa(jb,0,M._dayOfYear);M._a[Nb]=jb.getUTCMonth();M._a[Kb]=jb.getUTCDate()}for(jb=0;3>jb&&null==M._a[jb];++jb)M._a[jb]=Z[jb]=ma[jb];for(;7>jb;jb++)M._a[jb]=Z[jb]=null==M._a[jb]?2===jb?1:0:M._a[jb];24===M._a[yb]&&0===M._a[Gb]&&0===M._a[Ob]&&0===M._a[Vb]&&(M._nextDay=!0,M._a[yb]=0);M._d=(M._useUTC?pa:Da).apply(null,Z);Z=M._useUTC?M._d.getUTCDay():M._d.getDay();null!=M._tzm&&M._d.setUTCMinutes(M._d.getUTCMinutes()-M._tzm);M._nextDay&&(M._a[yb]=24);M._w&&"undefined"!==typeof M._w.d&&M._w.d!==Z&&(c(M).weekdayMismatch=
!0)}}function ua(M){if(M._f===b.ISO_8601)ka(M);else if(M._f===b.RFC_2822)U(M);else{M._a=[];c(M).empty=!0;var Z=""+M._i,ma,ta,La=Z.length,Va=0;var Xa=G(M._f,M._locale).match(Ka)||[];for(ma=0;ma<Xa.length;ma++){var hb=Xa[ma];if(ta=(Z.match(O(hb,M))||[])[0]){var pb=Z.substr(0,Z.indexOf(ta));0<pb.length&&c(M).unusedInput.push(pb);Z=Z.slice(Z.indexOf(ta)+ta.length);Va+=ta.length}if(Ya[hb]){if(ta?c(M).empty=!1:c(M).unusedTokens.push(hb),pb=M,null!=ta&&a(uc,hb))uc[hb](ta,pb._a,pb,hb)}else M._strict&&!ta&&
c(M).unusedTokens.push(hb)}c(M).charsLeftOver=La-Va;0<Z.length&&c(M).unusedInput.push(Z);12>=M._a[yb]&&!0===c(M).bigHour&&0<M._a[yb]&&(c(M).bigHour=void 0);c(M).parsedDateParts=M._a.slice(0);c(M).meridiem=M._meridiem;Z=M._a;ma=yb;La=M._locale;Xa=M._a[yb];Va=M._meridiem;null!=Va&&(null!=La.meridiemHour?Xa=La.meridiemHour(Xa,Va):null!=La.isPM&&((La=La.isPM(Va))&&12>Xa&&(Xa+=12),La||12!==Xa||(Xa=0)));Z[ma]=Xa;Z=c(M).era;null!==Z&&(M._a[Db]=M._locale.erasConvertYear(Z,M._a[Db]));qa(M);ja(M)}}function za(M){if(!M._d){var Z=
I(M._i);M._a=m([Z.year,Z.month,void 0===Z.day?Z.date:Z.day,Z.hour,Z.minute,Z.second,Z.millisecond],function(ma){return ma&&parseInt(ma,10)});qa(M)}}function Ea(M){var Z=M._i,ma=M._f;M._locale=M._locale||T(M._l);if(null===Z||void 0===ma&&""===Z)return t({nullInput:!0});"string"===typeof Z&&(M._i=Z=M._locale.preparse(Z));if(x(Z))return new u(ja(Z));if(f(Z))M._d=Z;else if(y(ma)){var ta=!1;if(0===M._f.length)c(M).invalidFormat=!0,M._d=new Date(NaN);else{for(Z=0;Z<M._f.length;Z++){ma=0;var La=!1;var Va=
n({},M);null!=M._useUTC&&(Va._useUTC=M._useUTC);Va._f=M._f[Z];ua(Va);k(Va)&&(La=!0);ma+=c(Va).charsLeftOver;ma+=10*c(Va).unusedTokens.length;c(Va).score=ma;if(ta)ma<Xa&&(Xa=ma,hb=Va);else if(null==Xa||ma<Xa||La){var Xa=ma;var hb=Va;La&&(ta=!0)}}l(M,hb||Va)}}else ma?ua(M):Pa(M);k(M)||(M._d=null);return M}function Pa(M){var Z=M._i;e(Z)?M._d=new Date(b.now()):f(Z)?M._d=new Date(Z.valueOf()):"string"===typeof Z?ha(M):y(Z)?(M._a=m(Z.slice(0),function(ma){return parseInt(ma,10)}),qa(M)):q(Z)?za(M):g(Z)?
M._d=new Date(Z):b.createFromInputFallback(M)}function Oa(M,Z,ma,ta,La){var Va={};if(!0===Z||!1===Z)ta=Z,Z=void 0;if(!0===ma||!1===ma)ta=ma,ma=void 0;if(q(M)&&h(M)||y(M)&&0===M.length)M=void 0;Va._isAMomentObject=!0;Va._useUTC=Va._isUTC=La;Va._l=ma;Va._i=M;Va._f=Z;Va._strict=ta;M=new u(ja(Ea(Va)));M._nextDay&&(M.add(1,"d"),M._nextDay=void 0);return M}function Ha(M,Z,ma,ta){return Oa(M,Z,ma,ta,!1)}function Ua(M,Z){var ma;1===Z.length&&y(Z[0])&&(Z=Z[0]);if(!Z.length)return Ha();var ta=Z[0];for(ma=1;ma<
Z.length;++ma)if(!Z[ma].isValid()||Z[ma][M](ta))ta=Z[ma];return ta}function bb(M){var Z=I(M);M=Z.year||0;var ma=Z.quarter||0,ta=Z.month||0,La=Z.week||Z.isoWeek||0,Va=Z.day||0,Xa=Z.hour||0,hb=Z.minute||0,pb=Z.second||0,jb=Z.millisecond||0;a:{var xb,Ac=!1;for(xb in Z)if(a(Z,xb)&&(-1===wb.call(ic,xb)||null!=Z[xb]&&isNaN(Z[xb]))){Z=!1;break a}for(xb=0;xb<ic.length;++xb)if(Z[ic[xb]]){if(Ac){Z=!1;break a}parseFloat(Z[ic[xb]])!==P(Z[ic[xb]])&&(Ac=!0)}Z=!0}this._isValid=Z;this._milliseconds=+jb+1E3*pb+6E4*
hb+36E5*Xa;this._days=+Va+7*La;this._months=+ta+3*ma+12*M;this._data={};this._locale=T();this._bubble()}function ab(M){return M instanceof bb}function gb(M){return 0>M?-1*Math.round(-1*M):Math.round(M)}function fb(M,Z){v(M,0,0,function(){var ma=this.utcOffset(),ta="+";0>ma&&(ma=-ma,ta="-");return ta+r(~~(ma/60),2)+Z+r(~~ma%60,2)})}function kb(M,Z){M=(Z||"").match(M);if(null===M)return null;M=((M[M.length-1]||[])+"").match(Pc)||["-",0,0];Z=+(60*M[1])+P(M[2]);return 0===Z?0:"+"===M[0]?Z:-Z}function ub(M,
Z){return Z._isUTC?(Z=Z.clone(),M=(x(M)||f(M)?M.valueOf():Ha(M).valueOf())-Z.valueOf(),Z._d.setTime(Z._d.valueOf()+M),b.updateOffset(Z,!1),Z):Ha(M).local()}function ob(){return this.isValid()?this._isUTC&&0===this._offset:!1}function eb(M,Z){var ma=M,ta=null;ab(M)?ma={ms:M._milliseconds,d:M._days,M:M._months}:g(M)||!isNaN(+M)?(ma={},Z?ma[Z]=+M:ma.milliseconds=+M):(ta=Qc.exec(M))?(ma="-"===ta[1]?-1:1,ma={y:0,d:P(ta[Kb])*ma,h:P(ta[yb])*ma,m:P(ta[Gb])*ma,s:P(ta[Ob])*ma,ms:P(gb(1E3*ta[Vb]))*ma}):(ta=
Rc.exec(M))?(ma="-"===ta[1]?-1:1,ma={y:nb(ta[2],ma),M:nb(ta[3],ma),w:nb(ta[4],ma),d:nb(ta[5],ma),h:nb(ta[6],ma),m:nb(ta[7],ma),s:nb(ta[8],ma)}):null==ma?ma={}:"object"===typeof ma&&("from"in ma||"to"in ma)&&(ta=Ha(ma.from),ma=Ha(ma.to),ta.isValid()&&ma.isValid()?(ma=ub(ma,ta),ta.isBefore(ma)?ma=rb(ta,ma):(ma=rb(ma,ta),ma.milliseconds=-ma.milliseconds,ma.months=-ma.months),ta=ma):ta={milliseconds:0,months:0},ma={},ma.ms=ta.milliseconds,ma.M=ta.months);ma=new bb(ma);ab(M)&&a(M,"_locale")&&(ma._locale=
M._locale);ab(M)&&a(M,"_isValid")&&(ma._isValid=M._isValid);return ma}function nb(M,Z){M=M&&parseFloat(M.replace(",","."));return(isNaN(M)?0:M)*Z}function rb(M,Z){var ma={};ma.months=Z.month()-M.month()+12*(Z.year()-M.year());M.clone().add(ma.months,"M").isAfter(Z)&&--ma.months;ma.milliseconds=+Z-+M.clone().add(ma.months,"M");return ma}function Lb(M,Z){return function(ma,ta){if(null!==ta&&!isNaN(+ta)){z(Z,"moment()."+Z+"(period, number) is deprecated. Please use moment()."+Z+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");
var La=ma;ma=ta;ta=La}ma=eb(ma,ta);Bb(this,ma,M);return this}}function Bb(M,Z,ma,ta){var La=Z._milliseconds,Va=gb(Z._days);Z=gb(Z._months);M.isValid()&&(ta=null==ta?!0:ta,Z&&oa(M,L(M,"Month")+Z*ma),Va&&aa(M,"Date",L(M,"Date")+Va*ma),La&&M._d.setTime(M._d.valueOf()+La*ma),ta&&b.updateOffset(M,Va||Z))}function zb(M){return"string"===typeof M||M instanceof String}function $b(M){var Z=y(M),ma=!1;Z&&(ma=0===M.filter(function(ta){return!g(ta)&&zb(M)}).length);return Z&&ma}function vb(M,Z){if(M.date()<Z.date())return-vb(Z,
M);var ma=12*(Z.year()-M.year())+(Z.month()-M.month()),ta=M.clone().add(ma,"months");0>Z-ta?(M=M.clone().add(ma-1,"months"),Z=(Z-ta)/(ta-M)):(M=M.clone().add(ma+1,"months"),Z=(Z-ta)/(M-ta));return-(ma+Z)||0}function Hb(M){if(void 0===M)return this._locale._abbr;M=T(M);null!=M&&(this._locale=M);return this}function Mb(){return this._locale}function Fb(M,Z){return(M%Z+Z)%Z}function Wb(M,Z,ma){return 100>M&&0<=M?new Date(M+400,Z,ma)-Bc:(new Date(M,Z,ma)).valueOf()}function ac(M,Z,ma){return 100>M&&0<=
M?Date.UTC(M+400,Z,ma)-Bc:Date.UTC(M,Z,ma)}function bc(M,Z){return Z.erasAbbrRegex(M)}function cc(){var M=[],Z=[],ma=[],ta=[],La,Va=this.eras();var Xa=0;for(La=Va.length;Xa<La;++Xa)Z.push(X(Va[Xa].name)),M.push(X(Va[Xa].abbr)),ma.push(X(Va[Xa].narrow)),ta.push(X(Va[Xa].name)),ta.push(X(Va[Xa].abbr)),ta.push(X(Va[Xa].narrow));this._erasRegex=new RegExp("^("+ta.join("|")+")","i");this._erasNameRegex=new RegExp("^("+Z.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+M.join("|")+")","i");this._erasNarrowRegex=
new RegExp("^("+ma.join("|")+")","i")}function Xb(M,Z){v(0,[M,M.length],0,Z)}function jc(M,Z,ma,ta,La){if(null==M)return wa(this,ta,La).year;var Va=la(M,ta,La);Z>Va&&(Z=Va);M=ya(M,Z,ma,ta,La);M=pa(M.year,0,M.dayOfYear);this.year(M.getUTCFullYear());this.month(M.getUTCMonth());this.date(M.getUTCDate());return this}function qc(M,Z){Z[Vb]=P(1E3*("0."+M))}function Yb(M){return M}function Eb(M,Z,ma,ta){var La=T();Z=d().set(ta,Z);return La[ma](Z,M)}function kc(M,Z,ma){g(M)&&(Z=M,M=void 0);M=M||"";if(null!=
Z)return Eb(M,Z,ma,"month");var ta=[];for(Z=0;12>Z;Z++)ta[Z]=Eb(M,Z,ma,"month");return ta}function dc(M,Z,ma,ta){"boolean"!==typeof M&&(ma=Z=M,M=!1);g(Z)&&(ma=Z,Z=void 0);Z=Z||"";var La=T();M=M?La._week.dow:0;La=[];if(null!=ma)return Eb(Z,(ma+M)%7,ta,"day");for(ma=0;7>ma;ma++)La[ma]=Eb(Z,(ma+M)%7,ta,"day");return La}function lc(M,Z,ma,ta){Z=eb(Z,ma);M._milliseconds+=ta*Z._milliseconds;M._days+=ta*Z._days;M._months+=ta*Z._months;return M._bubble()}function mc(M){return 0>M?Math.floor(M):Math.ceil(M)}
function Ib(M){return function(){return this.as(M)}}function Pb(M){return function(){return this.isValid()?this._data[M]:NaN}}function Ab(M,Z,ma,ta,La){return La.relativeTime(Z||1,!!ma,M,ta)}function ea(M){return(0<M)-(0>M)||+M}function Ja(){if(!this.isValid())return this.localeData().invalidDate();var M=wc(this._milliseconds)/1E3,Z=wc(this._days),ma=wc(this._months),ta=this.asSeconds();if(!ta)return"P0D";var La=W(M/60);var Va=W(La/60);M%=60;La%=60;var Xa=W(ma/12);ma%=12;var hb=M?M.toFixed(3).replace(/\.?0+$/,
""):"";var pb=0>ta?"-":"";var jb=ea(this._months)!==ea(ta)?"-":"";var xb=ea(this._days)!==ea(ta)?"-":"";ta=ea(this._milliseconds)!==ea(ta)?"-":"";return pb+"P"+(Xa?jb+Xa+"Y":"")+(ma?jb+ma+"M":"")+(Z?xb+Z+"D":"")+(Va||La||M?"T":"")+(Va?ta+Va+"H":"")+(La?ta+La+"M":"")+(M?ta+hb+"S":"")}var Ia=Array.prototype.some?Array.prototype.some:function(M){var Z=Object(this),ma=Z.length>>>0,ta;for(ta=0;ta<ma;ta++)if(ta in Z&&M.call(this,Z[ta],ta,Z))return!0;return!1};var Ca=b.momentProperties=[],Ga=!1,Na={};b.suppressDeprecationWarnings=
!1;b.deprecationHandler=null;var Ma=Object.keys?Object.keys:function(M){var Z,ma=[];for(Z in M)a(M,Z)&&ma.push(Z);return ma};var Ka=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ra=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Wa={},Ya={},cb={},Ta={},db=/\d/,$a=/\d\d/,ib=/\d{3}/,Cb=/\d{4}/,Zb=/[+-]?\d{6}/,qb=/\d\d?/,nc=/\d\d\d\d?/,tb=/\d\d\d\d\d\d?/,
Qb=/\d{1,3}/,Jb=/\d{1,4}/,Tb=/[+-]?\d{1,6}/,ec=/\d+/,rc=/[+-]?\d+/,Sc=/Z|[+-]\d\d:?\d\d/gi,sc=/Z|[+-]\d\d(?::?\d\d)?/gi,oc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var tc={};var uc={},Db=0,Nb=1,Kb=2,yb=3,Gb=4,Ob=5,Vb=6,Hc=7,Ic=8;var wb=Array.prototype.indexOf?Array.prototype.indexOf:function(M){var Z;for(Z=0;Z<this.length;++Z)if(this[Z]===M)return Z;return-1};v("M",["MM",2],"Mo",function(){return this.month()+
1});v("MMM",0,0,function(M){return this.localeData().monthsShort(this,M)});v("MMMM",0,0,function(M){return this.localeData().months(this,M)});H("month","M");Ta.month=8;ba("M",qb);ba("MM",qb,$a);ba("MMM",function(M,Z){return Z.monthsShortRegex(M)});ba("MMMM",function(M,Z){return Z.monthsRegex(M)});N(["M","MM"],function(M,Z){Z[Nb]=P(M)-1});N(["MMM","MMMM"],function(M,Z,ma,ta){ta=ma._locale.monthsParse(M,ta,ma._strict);null!=ta?Z[Nb]=ta:c(ma).invalidMonth=M});var yc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
Cc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;v("Y",0,0,function(){var M=this.year();return 9999>=M?r(M,4):"+"+M});v(0,["YY",2],0,function(){return this.year()%100});v(0,["YYYY",4],0,"year");v(0,["YYYYY",5],0,"year");v(0,["YYYYYY",6,!0],0,"year");H("year","y");Ta.year=1;ba("Y",rc);ba("YY",qb,$a);ba("YYYY",Jb,Cb);ba("YYYYY",Tb,Zb);ba("YYYYYY",Tb,Zb);N(["YYYYY","YYYYYY"],Db);N("YYYY",function(M,Z){Z[Db]=2===M.length?b.parseTwoDigitYear(M):P(M)});N("YY",function(M,Z){Z[Db]=b.parseTwoDigitYear(M)});N("Y",function(M,
Z){Z[Db]=parseInt(M,10)});b.parseTwoDigitYear=function(M){return P(M)+(68<P(M)?1900:2E3)};var Dc=S("FullYear",!0);v("w",["ww",2],"wo","week");v("W",["WW",2],"Wo","isoWeek");H("week","w");H("isoWeek","W");Ta.week=5;Ta.isoWeek=5;ba("w",qb);ba("ww",qb,$a);ba("W",qb);ba("WW",qb,$a);Y(["w","ww","W","WW"],function(M,Z,ma,ta){Z[ta.substr(0,1)]=P(M)});v("d",0,"do","day");v("dd",0,0,function(M){return this.localeData().weekdaysMin(this,M)});v("ddd",0,0,function(M){return this.localeData().weekdaysShort(this,
M)});v("dddd",0,0,function(M){return this.localeData().weekdays(this,M)});v("e",0,0,"weekday");v("E",0,0,"isoWeekday");H("day","d");H("weekday","e");H("isoWeekday","E");Ta.day=11;Ta.weekday=11;Ta.isoWeekday=11;ba("d",qb);ba("e",qb);ba("E",qb);ba("dd",function(M,Z){return Z.weekdaysMinRegex(M)});ba("ddd",function(M,Z){return Z.weekdaysShortRegex(M)});ba("dddd",function(M,Z){return Z.weekdaysRegex(M)});Y(["dd","ddd","dddd"],function(M,Z,ma,ta){ta=ma._locale.weekdaysParse(M,ta,ma._strict);null!=ta?Z.d=
ta:c(ma).invalidWeekday=M});Y(["d","e","E"],function(M,Z,ma,ta){Z[ta]=P(M)});var zc="Sun Mon Tue Wed Thu Fri Sat".split(" ");v("H",["HH",2],0,"hour");v("h",["hh",2],0,Q);v("k",["kk",2],0,function(){return this.hours()||24});v("hmm",0,0,function(){return""+Q.apply(this)+r(this.minutes(),2)});v("hmmss",0,0,function(){return""+Q.apply(this)+r(this.minutes(),2)+r(this.seconds(),2)});v("Hmm",0,0,function(){return""+this.hours()+r(this.minutes(),2)});v("Hmmss",0,0,function(){return""+this.hours()+r(this.minutes(),
2)+r(this.seconds(),2)});xa("a",!0);xa("A",!1);H("hour","h");Ta.hour=13;ba("a",Fa);ba("A",Fa);ba("H",qb);ba("h",qb);ba("k",qb);ba("HH",qb,$a);ba("hh",qb,$a);ba("kk",qb,$a);ba("hmm",nc);ba("hmmss",tb);ba("Hmm",nc);ba("Hmmss",tb);N(["H","HH"],yb);N(["k","kk"],function(M,Z,ma){M=P(M);Z[yb]=24===M?0:M});N(["a","A"],function(M,Z,ma){ma._isPm=ma._locale.isPM(M);ma._meridiem=M});N(["h","hh"],function(M,Z,ma){Z[yb]=P(M);c(ma).bigHour=!0});N("hmm",function(M,Z,ma){var ta=M.length-2;Z[yb]=P(M.substr(0,ta));
Z[Gb]=P(M.substr(ta));c(ma).bigHour=!0});N("hmmss",function(M,Z,ma){var ta=M.length-4,La=M.length-2;Z[yb]=P(M.substr(0,ta));Z[Gb]=P(M.substr(ta,2));Z[Ob]=P(M.substr(La));c(ma).bigHour=!0});N("Hmm",function(M,Z,ma){ma=M.length-2;Z[yb]=P(M.substr(0,ma));Z[Gb]=P(M.substr(ma))});N("Hmmss",function(M,Z,ma){ma=M.length-4;var ta=M.length-2;Z[yb]=P(M.substr(0,ma));Z[Gb]=P(M.substr(ma,2));Z[Ob]=P(M.substr(ta))});var Tc=S("Hours",!0),xc={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",
lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",
yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:yc,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:zc,meridiemParse:/[ap]\.?m?\.?/i},sb={},hc={},gc,Jc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
Lc=/Z|[+-]\d\d(?::?\d\d)?/,pc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],vc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],
["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Oc=/^\/?Date\((-?\d+)/i,Mc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Nc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};b.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(M){M._d=new Date(M._i+(M._useUTC?" UTC":""))});b.ISO_8601=function(){};b.RFC_2822=function(){};var Uc=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var M=Ha.apply(null,arguments);return this.isValid()&&M.isValid()?M<this?this:M:t()}),Vc=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var M=Ha.apply(null,arguments);return this.isValid()&&M.isValid()?M>this?
this:M:t()}),ic="year quarter month week day hour minute second millisecond".split(" ");fb("Z",":");fb("ZZ","");ba("Z",sc);ba("ZZ",sc);N(["Z","ZZ"],function(M,Z,ma){ma._useUTC=!0;ma._tzm=kb(sc,M)});var Pc=/([\+\-]|\d\d)/gi;b.updateOffset=function(){};var Qc=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Rc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;eb.fn=bb.prototype;
eb.invalid=function(){return eb(NaN)};var Wc=Lb(1,"add"),Xc=Lb(-1,"subtract");b.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";b.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ec=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(M){return void 0===M?this.localeData():this.locale(M)}),Bc=126227808E5;v("N",0,0,"eraAbbr");v("NN",0,0,"eraAbbr");v("NNN",0,0,"eraAbbr");v("NNNN",0,0,"eraName");v("NNNNN",0,0,"eraNarrow");
v("y",["y",1],"yo","eraYear");v("y",["yy",2],0,"eraYear");v("y",["yyy",3],0,"eraYear");v("y",["yyyy",4],0,"eraYear");ba("N",bc);ba("NN",bc);ba("NNN",bc);ba("NNNN",function(M,Z){return Z.erasNameRegex(M)});ba("NNNNN",function(M,Z){return Z.erasNarrowRegex(M)});N(["N","NN","NNN","NNNN","NNNNN"],function(M,Z,ma,ta){(Z=ma._locale.erasParse(M,ta,ma._strict))?c(ma).era=Z:c(ma).invalidEra=M});ba("y",ec);ba("yy",ec);ba("yyy",ec);ba("yyyy",ec);ba("yo",function(M,Z){return Z._eraYearOrdinalRegex||ec});N(["y",
"yy","yyy","yyyy"],Db);N(["yo"],function(M,Z,ma,ta){var La;ma._locale._eraYearOrdinalRegex&&(La=M.match(ma._locale._eraYearOrdinalRegex));Z[Db]=ma._locale.eraYearOrdinalParse?ma._locale.eraYearOrdinalParse(M,La):parseInt(M,10)});v(0,["gg",2],0,function(){return this.weekYear()%100});v(0,["GG",2],0,function(){return this.isoWeekYear()%100});Xb("gggg","weekYear");Xb("ggggg","weekYear");Xb("GGGG","isoWeekYear");Xb("GGGGG","isoWeekYear");H("weekYear","gg");H("isoWeekYear","GG");Ta.weekYear=1;Ta.isoWeekYear=
1;ba("G",rc);ba("g",rc);ba("GG",qb,$a);ba("gg",qb,$a);ba("GGGG",Jb,Cb);ba("gggg",Jb,Cb);ba("GGGGG",Tb,Zb);ba("ggggg",Tb,Zb);Y(["gggg","ggggg","GGGG","GGGGG"],function(M,Z,ma,ta){Z[ta.substr(0,2)]=P(M)});Y(["gg","GG"],function(M,Z,ma,ta){Z[ta]=b.parseTwoDigitYear(M)});v("Q",0,"Qo","quarter");H("quarter","Q");Ta.quarter=7;ba("Q",db);N("Q",function(M,Z){Z[Nb]=3*(P(M)-1)});v("D",["DD",2],"Do","date");H("date","D");Ta.date=9;ba("D",qb);ba("DD",qb,$a);ba("Do",function(M,Z){return M?Z._dayOfMonthOrdinalParse||
Z._ordinalParse:Z._dayOfMonthOrdinalParseLenient});N(["D","DD"],Kb);N("Do",function(M,Z){Z[Kb]=P(M.match(qb)[0])});var Fc=S("Date",!0);v("DDD",["DDDD",3],"DDDo","dayOfYear");H("dayOfYear","DDD");Ta.dayOfYear=4;ba("DDD",Qb);ba("DDDD",ib);N(["DDD","DDDD"],function(M,Z,ma){ma._dayOfYear=P(M)});v("m",["mm",2],0,"minute");H("minute","m");Ta.minute=14;ba("m",qb);ba("mm",qb,$a);N(["m","mm"],Gb);var Yc=S("Minutes",!1);v("s",["ss",2],0,"second");H("second","s");Ta.second=15;ba("s",qb);ba("ss",qb,$a);N(["s",
"ss"],Ob);var Zc=S("Seconds",!1);v("S",0,0,function(){return~~(this.millisecond()/100)});v(0,["SS",2],0,function(){return~~(this.millisecond()/10)});v(0,["SSS",3],0,"millisecond");v(0,["SSSS",4],0,function(){return 10*this.millisecond()});v(0,["SSSSS",5],0,function(){return 100*this.millisecond()});v(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});v(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});v(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});v(0,["SSSSSSSSS",
9],0,function(){return 1E6*this.millisecond()});H("millisecond","ms");Ta.millisecond=16;ba("S",Qb,db);ba("SS",Qb,$a);ba("SSS",Qb,ib);var Ub;for(Ub="SSSS";9>=Ub.length;Ub+="S")ba(Ub,ec);for(Ub="S";9>=Ub.length;Ub+="S")N(Ub,qc);var $c=S("Milliseconds",!1);v("z",0,0,"zoneAbbr");v("zz",0,0,"zoneName");var Za=u.prototype;Za.add=Wc;Za.calendar=function(M,Z){if(1===arguments.length)if(arguments[0]){var ma=arguments[0],ta;if(!(ta=x(ma)||f(ma)||zb(ma)||g(ma)||$b(ma))){ta=q(ma)&&!h(ma);var La=!1,Va="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),
Xa;for(Xa=0;Xa<Va.length;Xa+=1){var hb=Va[Xa];La=La||a(ma,hb)}ta=ta&&La}if(ta||null===ma||void 0===ma)M=arguments[0],Z=void 0;else{ma=arguments[0];ta=q(ma)&&!h(ma);La=!1;Va="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(Xa=0;Xa<Va.length;Xa+=1)hb=Va[Xa],La=La||a(ma,hb);ta&&La&&(Z=arguments[0],M=void 0)}}else Z=M=void 0;ma=M||Ha();ta=ub(ma,this).startOf("day");ta=b.calendarFormat(this,ta)||"sameElse";La=Z&&(E(Z[ta])?Z[ta].call(this,ma):Z[ta]);return this.format(La||this.localeData().calendar(ta,
this,Ha(ma)))};Za.clone=function(){return new u(this)};Za.diff=function(M,Z,ma){if(!this.isValid())return NaN;M=ub(M,this);if(!M.isValid())return NaN;var ta=6E4*(M.utcOffset()-this.utcOffset());Z=J(Z);switch(Z){case "year":Z=vb(this,M)/12;break;case "month":Z=vb(this,M);break;case "quarter":Z=vb(this,M)/3;break;case "second":Z=(this-M)/1E3;break;case "minute":Z=(this-M)/6E4;break;case "hour":Z=(this-M)/36E5;break;case "day":Z=(this-M-ta)/864E5;break;case "week":Z=(this-M-ta)/6048E5;break;default:Z=
this-M}return ma?Z:W(Z)};Za.endOf=function(M){M=J(M);if(void 0===M||"millisecond"===M||!this.isValid())return this;var Z=this._isUTC?ac:Wb;switch(M){case "year":var ma=Z(this.year()+1,0,1)-1;break;case "quarter":ma=Z(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":ma=Z(this.year(),this.month()+1,1)-1;break;case "week":ma=Z(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":ma=Z(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":ma=
Z(this.year(),this.month(),this.date()+1)-1;break;case "hour":ma=this._d.valueOf();ma+=36E5-Fb(ma+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":ma=this._d.valueOf();ma+=6E4-Fb(ma,6E4)-1;break;case "second":ma=this._d.valueOf(),ma+=1E3-Fb(ma,1E3)-1}this._d.setTime(ma);b.updateOffset(this,!0);return this};Za.format=function(M){M||(M=this.isUtc()?b.defaultFormatUtc:b.defaultFormat);M=F(this,M);return this.localeData().postformat(M)};Za.from=function(M,Z){return this.isValid()&&(x(M)&&
M.isValid()||Ha(M).isValid())?eb({to:this,from:M}).locale(this.locale()).humanize(!Z):this.localeData().invalidDate()};Za.fromNow=function(M){return this.from(Ha(),M)};Za.to=function(M,Z){return this.isValid()&&(x(M)&&M.isValid()||Ha(M).isValid())?eb({from:this,to:M}).locale(this.locale()).humanize(!Z):this.localeData().invalidDate()};Za.toNow=function(M){return this.to(Ha(),M)};Za.get=function(M){M=J(M);return E(this[M])?this[M]():this};Za.invalidAt=function(){return c(this).overflow};Za.isAfter=
function(M,Z){M=x(M)?M:Ha(M);if(!this.isValid()||!M.isValid())return!1;Z=J(Z)||"millisecond";return"millisecond"===Z?this.valueOf()>M.valueOf():M.valueOf()<this.clone().startOf(Z).valueOf()};Za.isBefore=function(M,Z){M=x(M)?M:Ha(M);if(!this.isValid()||!M.isValid())return!1;Z=J(Z)||"millisecond";return"millisecond"===Z?this.valueOf()<M.valueOf():this.clone().endOf(Z).valueOf()<M.valueOf()};Za.isBetween=function(M,Z,ma,ta){M=x(M)?M:Ha(M);Z=x(Z)?Z:Ha(Z);if(!(this.isValid()&&M.isValid()&&Z.isValid()))return!1;
ta=ta||"()";return("("===ta[0]?this.isAfter(M,ma):!this.isBefore(M,ma))&&(")"===ta[1]?this.isBefore(Z,ma):!this.isAfter(Z,ma))};Za.isSame=function(M,Z){M=x(M)?M:Ha(M);if(!this.isValid()||!M.isValid())return!1;Z=J(Z)||"millisecond";if("millisecond"===Z)return this.valueOf()===M.valueOf();M=M.valueOf();return this.clone().startOf(Z).valueOf()<=M&&M<=this.clone().endOf(Z).valueOf()};Za.isSameOrAfter=function(M,Z){return this.isSame(M,Z)||this.isAfter(M,Z)};Za.isSameOrBefore=function(M,Z){return this.isSame(M,
Z)||this.isBefore(M,Z)};Za.isValid=function(){return k(this)};Za.lang=Ec;Za.locale=Hb;Za.localeData=Mb;Za.max=Vc;Za.min=Uc;Za.parsingFlags=function(){return l({},c(this))};Za.set=function(M,Z){if("object"===typeof M){M=I(M);Z=K(M);var ma;for(ma=0;ma<Z.length;ma++)this[Z[ma].unit](M[Z[ma].unit])}else if(M=J(M),E(this[M]))return this[M](Z);return this};Za.startOf=function(M){M=J(M);if(void 0===M||"millisecond"===M||!this.isValid())return this;var Z=this._isUTC?ac:Wb;switch(M){case "year":var ma=Z(this.year(),
0,1);break;case "quarter":ma=Z(this.year(),this.month()-this.month()%3,1);break;case "month":ma=Z(this.year(),this.month(),1);break;case "week":ma=Z(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":ma=Z(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":ma=Z(this.year(),this.month(),this.date());break;case "hour":ma=this._d.valueOf();ma-=Fb(ma+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":ma=this._d.valueOf();ma-=Fb(ma,
6E4);break;case "second":ma=this._d.valueOf(),ma-=Fb(ma,1E3)}this._d.setTime(ma);b.updateOffset(this,!0);return this};Za.subtract=Xc;Za.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};Za.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};Za.toDate=function(){return new Date(this.valueOf())};Za.toISOString=
function(M){if(!this.isValid())return null;var Z=(M=!0!==M)?this.clone().utc():this;return 0>Z.year()||9999<Z.year()?F(Z,M?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):E(Date.prototype.toISOString)?M?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",F(Z,"Z")):F(Z,M?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};Za.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var M="moment",Z="";
this.isLocal()||(M=0===this.utcOffset()?"moment.utc":"moment.parseZone",Z="Z");M="["+M+'("]';var ma=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(M+ma+"-MM-DD[T]HH:mm:ss.SSS"+(Z+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol.for&&(Za[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});Za.toJSON=function(){return this.isValid()?this.toISOString():null};Za.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};
Za.unix=function(){return Math.floor(this.valueOf()/1E3)};Za.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};Za.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};Za.eraName=function(){var M,Z=this.localeData().eras();var ma=0;for(M=Z.length;ma<M;++ma){var ta=this.clone().startOf("day").valueOf();if(Z[ma].since<=ta&&ta<=Z[ma].until||Z[ma].until<=ta&&ta<=Z[ma].since)return Z[ma].name}return""};Za.eraNarrow=function(){var M,
Z=this.localeData().eras();var ma=0;for(M=Z.length;ma<M;++ma){var ta=this.clone().startOf("day").valueOf();if(Z[ma].since<=ta&&ta<=Z[ma].until||Z[ma].until<=ta&&ta<=Z[ma].since)return Z[ma].narrow}return""};Za.eraAbbr=function(){var M,Z=this.localeData().eras();var ma=0;for(M=Z.length;ma<M;++ma){var ta=this.clone().startOf("day").valueOf();if(Z[ma].since<=ta&&ta<=Z[ma].until||Z[ma].until<=ta&&ta<=Z[ma].since)return Z[ma].abbr}return""};Za.eraYear=function(){var M,Z=this.localeData().eras();var ma=
0;for(M=Z.length;ma<M;++ma){var ta=Z[ma].since<=Z[ma].until?1:-1;var La=this.clone().startOf("day").valueOf();if(Z[ma].since<=La&&La<=Z[ma].until||Z[ma].until<=La&&La<=Z[ma].since)return(this.year()-b(Z[ma].since).year())*ta+Z[ma].offset}return this.year()};Za.year=Dc;Za.isLeapYear=function(){return R(this.year())};Za.weekYear=function(M){return jc.call(this,M,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};Za.isoWeekYear=function(M){return jc.call(this,M,this.isoWeek(),
this.isoWeekday(),1,4)};Za.quarter=Za.quarters=function(M){return null==M?Math.ceil((this.month()+1)/3):this.month(3*(M-1)+this.month()%3)};Za.month=sa;Za.daysInMonth=function(){return ia(this.year(),this.month())};Za.week=Za.weeks=function(M){var Z=this.localeData().week(this);return null==M?Z:this.add(7*(M-Z),"d")};Za.isoWeek=Za.isoWeeks=function(M){var Z=wa(this,1,4).week;return null==M?Z:this.add(7*(M-Z),"d")};Za.weeksInYear=function(){var M=this.localeData()._week;return la(this.year(),M.dow,
M.doy)};Za.weeksInWeekYear=function(){var M=this.localeData()._week;return la(this.weekYear(),M.dow,M.doy)};Za.isoWeeksInYear=function(){return la(this.year(),1,4)};Za.isoWeeksInISOWeekYear=function(){return la(this.isoWeekYear(),1,4)};Za.date=Fc;Za.day=Za.days=function(M){if(!this.isValid())return null!=M?this:NaN;var Z=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=M){var ma=this.localeData();"string"===typeof M&&(isNaN(M)?(M=ma.weekdaysParse(M),M="number"===typeof M?M:null):M=parseInt(M,
10));return this.add(M-Z,"d")}return Z};Za.weekday=function(M){if(!this.isValid())return null!=M?this:NaN;var Z=(this.day()+7-this.localeData()._week.dow)%7;return null==M?Z:this.add(M-Z,"d")};Za.isoWeekday=function(M){if(!this.isValid())return null!=M?this:NaN;if(null!=M){var Z=this.localeData();M="string"===typeof M?Z.weekdaysParse(M)%7||7:isNaN(M)?null:M;return this.day(this.day()%7?M:M-7)}return this.day()||7};Za.dayOfYear=function(M){var Z=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/
864E5)+1;return null==M?Z:this.add(M-Z,"d")};Za.hour=Za.hours=Tc;Za.minute=Za.minutes=Yc;Za.second=Za.seconds=Zc;Za.millisecond=Za.milliseconds=$c;Za.utcOffset=function(M,Z,ma){var ta=this._offset||0,La;if(!this.isValid())return null!=M?this:NaN;if(null!=M){if("string"===typeof M){if(M=kb(sc,M),null===M)return this}else 16>Math.abs(M)&&!ma&&(M*=60);!this._isUTC&&Z&&(La=-Math.round(this._d.getTimezoneOffset()));this._offset=M;this._isUTC=!0;null!=La&&this.add(La,"m");ta!==M&&(!Z||this._changeInProgress?
Bb(this,eb(M-ta,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,b.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?ta:-Math.round(this._d.getTimezoneOffset())};Za.utc=function(M){return this.utcOffset(0,M)};Za.local=function(M){this._isUTC&&(this.utcOffset(0,M),this._isUTC=!1,M&&this.subtract(-Math.round(this._d.getTimezoneOffset()),"m"));return this};Za.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var M=
kb(Sc,this._i);null!=M?this.utcOffset(M):this.utcOffset(0,!0)}return this};Za.hasAlignedHourOffset=function(M){if(!this.isValid())return!1;M=M?Ha(M).utcOffset():0;return 0===(this.utcOffset()-M)%60};Za.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};Za.isLocal=function(){return this.isValid()?!this._isUTC:!1};Za.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};Za.isUtc=ob;Za.isUTC=ob;Za.zoneAbbr=function(){return this._isUTC?
"UTC":""};Za.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};Za.dates=A("dates accessor is deprecated. Use date instead.",Fc);Za.months=A("months accessor is deprecated. Use month instead",sa);Za.years=A("years accessor is deprecated. Use year instead",Dc);Za.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(M,Z){return null!=M?("string"!==typeof M&&(M=-M),this.utcOffset(M,Z),this):-this.utcOffset()});
Za.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!e(this._isDSTShifted))return this._isDSTShifted;var M={};n(M,this);M=Ea(M);if(M._a){var Z=M._isUTC?d(M._a):Ha(M._a);var ma;if(ma=this.isValid()){M=M._a;Z=Z.toArray();ma=Math.min(M.length,Z.length);var ta=Math.abs(M.length-Z.length),La=0,Va;for(Va=0;Va<ma;Va++)P(M[Va])!==P(Z[Va])&&La++;ma=0<La+ta}this._isDSTShifted=ma}else this._isDSTShifted=!1;return this._isDSTShifted});
var mb=D.prototype;mb.calendar=function(M,Z,ma){M=this._calendar[M]||this._calendar.sameElse;return E(M)?M.call(Z,ma):M};mb.longDateFormat=function(M){var Z=this._longDateFormat[M],ma=this._longDateFormat[M.toUpperCase()];if(Z||!ma)return Z;this._longDateFormat[M]=ma.match(Ka).map(function(ta){return"MMMM"===ta||"MM"===ta||"DD"===ta||"dddd"===ta?ta.slice(1):ta}).join("");return this._longDateFormat[M]};mb.invalidDate=function(){return this._invalidDate};mb.ordinal=function(M){return this._ordinal.replace("%d",
M)};mb.preparse=Yb;mb.postformat=Yb;mb.relativeTime=function(M,Z,ma,ta){var La=this._relativeTime[ma];return E(La)?La(M,Z,ma,ta):La.replace(/%d/i,M)};mb.pastFuture=function(M,Z){M=this._relativeTime[0<M?"future":"past"];return E(M)?M(Z):M.replace(/%s/i,Z)};mb.set=function(M){var Z;for(Z in M)if(a(M,Z)){var ma=M[Z];E(ma)?this[Z]=ma:this["_"+Z]=ma}this._config=M;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};mb.eras=
function(M,Z){var ma=this._eras||T("en")._eras;M=0;for(Z=ma.length;M<Z;++M){switch(typeof ma[M].since){case "string":var ta=b(ma[M].since).startOf("day");ma[M].since=ta.valueOf()}switch(typeof ma[M].until){case "undefined":ma[M].until=Infinity;break;case "string":ta=b(ma[M].until).startOf("day").valueOf(),ma[M].until=ta.valueOf()}}return ma};mb.erasParse=function(M,Z,ma){var ta,La=this.eras();M=M.toUpperCase();var Va=0;for(ta=La.length;Va<ta;++Va){var Xa=La[Va].name.toUpperCase();var hb=La[Va].abbr.toUpperCase();
var pb=La[Va].narrow.toUpperCase();if(ma)switch(Z){case "N":case "NN":case "NNN":if(hb===M)return La[Va];break;case "NNNN":if(Xa===M)return La[Va];break;case "NNNNN":if(pb===M)return La[Va]}else if(0<=[Xa,hb,pb].indexOf(M))return La[Va]}};mb.erasConvertYear=function(M,Z){var ma=M.since<=M.until?1:-1;return void 0===Z?b(M.since).year():b(M.since).year()+(Z-M.offset)*ma};mb.erasAbbrRegex=function(M){a(this,"_erasAbbrRegex")||cc.call(this);return M?this._erasAbbrRegex:this._erasRegex};mb.erasNameRegex=
function(M){a(this,"_erasNameRegex")||cc.call(this);return M?this._erasNameRegex:this._erasRegex};mb.erasNarrowRegex=function(M){a(this,"_erasNarrowRegex")||cc.call(this);return M?this._erasNarrowRegex:this._erasRegex};mb.months=function(M,Z){return M?y(this._months)?this._months[M.month()]:this._months[(this._months.isFormat||Cc).test(Z)?"format":"standalone"][M.month()]:y(this._months)?this._months:this._months.standalone};mb.monthsShort=function(M,Z){return M?y(this._monthsShort)?this._monthsShort[M.month()]:
this._monthsShort[Cc.test(Z)?"format":"standalone"][M.month()]:y(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};mb.monthsParse=function(M,Z,ma){var ta;if(this._monthsParseExact){a:{M=M.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],ta=0;12>ta;++ta){var La=d([2E3,ta]);this._shortMonthsParse[ta]=this.monthsShort(La,"").toLocaleLowerCase();this._longMonthsParse[ta]=this.months(La,"").toLocaleLowerCase()}if(ma)Z=
"MMM"===Z?wb.call(this._shortMonthsParse,M):wb.call(this._longMonthsParse,M);else if("MMM"===Z){Z=wb.call(this._shortMonthsParse,M);if(-1!==Z)break a;Z=wb.call(this._longMonthsParse,M)}else{Z=wb.call(this._longMonthsParse,M);if(-1!==Z)break a;Z=wb.call(this._shortMonthsParse,M)}Z=-1!==Z?Z:null}return Z}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(ta=0;12>ta;ta++)if(La=d([2E3,ta]),ma&&!this._longMonthsParse[ta]&&(this._longMonthsParse[ta]=new RegExp("^"+
this.months(La,"").replace(".","")+"$","i"),this._shortMonthsParse[ta]=new RegExp("^"+this.monthsShort(La,"").replace(".","")+"$","i")),ma||this._monthsParse[ta]||(La="^"+this.months(La,"")+"|^"+this.monthsShort(La,""),this._monthsParse[ta]=new RegExp(La.replace(".",""),"i")),ma&&"MMMM"===Z&&this._longMonthsParse[ta].test(M)||ma&&"MMM"===Z&&this._shortMonthsParse[ta].test(M)||!ma&&this._monthsParse[ta].test(M))return ta};mb.monthsRegex=function(M){if(this._monthsParseExact)return a(this,"_monthsRegex")||
Ba.call(this),M?this._monthsStrictRegex:this._monthsRegex;a(this,"_monthsRegex")||(this._monthsRegex=oc);return this._monthsStrictRegex&&M?this._monthsStrictRegex:this._monthsRegex};mb.monthsShortRegex=function(M){if(this._monthsParseExact)return a(this,"_monthsRegex")||Ba.call(this),M?this._monthsShortStrictRegex:this._monthsShortRegex;a(this,"_monthsShortRegex")||(this._monthsShortRegex=oc);return this._monthsShortStrictRegex&&M?this._monthsShortStrictRegex:this._monthsShortRegex};mb.week=function(M){return wa(M,
this._week.dow,this._week.doy).week};mb.firstDayOfYear=function(){return this._week.doy};mb.firstDayOfWeek=function(){return this._week.dow};mb.weekdays=function(M,Z){Z=y(this._weekdays)?this._weekdays:this._weekdays[M&&!0!==M&&this._weekdays.isFormat.test(Z)?"format":"standalone"];return!0===M?Aa(Z,this._week.dow):M?Z[M.day()]:Z};mb.weekdaysMin=function(M){return!0===M?Aa(this._weekdaysMin,this._week.dow):M?this._weekdaysMin[M.day()]:this._weekdaysMin};mb.weekdaysShort=function(M){return!0===M?Aa(this._weekdaysShort,
this._week.dow):M?this._weekdaysShort[M.day()]:this._weekdaysShort};mb.weekdaysParse=function(M,Z,ma){var ta;if(this._weekdaysParseExact)return da.call(this,M,Z,ma);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(ta=0;7>ta;ta++){var La=d([2E3,1]).day(ta);ma&&!this._fullWeekdaysParse[ta]&&(this._fullWeekdaysParse[ta]=new RegExp("^"+this.weekdays(La,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[ta]=new RegExp("^"+
this.weekdaysShort(La,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[ta]=new RegExp("^"+this.weekdaysMin(La,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[ta]||(La="^"+this.weekdays(La,"")+"|^"+this.weekdaysShort(La,"")+"|^"+this.weekdaysMin(La,""),this._weekdaysParse[ta]=new RegExp(La.replace(".",""),"i"));if(ma&&"dddd"===Z&&this._fullWeekdaysParse[ta].test(M)||ma&&"ddd"===Z&&this._shortWeekdaysParse[ta].test(M)||ma&&"dd"===Z&&this._minWeekdaysParse[ta].test(M)||!ma&&this._weekdaysParse[ta].test(M))return ta}};
mb.weekdaysRegex=function(M){if(this._weekdaysParseExact)return a(this,"_weekdaysRegex")||fa.call(this),M?this._weekdaysStrictRegex:this._weekdaysRegex;a(this,"_weekdaysRegex")||(this._weekdaysRegex=oc);return this._weekdaysStrictRegex&&M?this._weekdaysStrictRegex:this._weekdaysRegex};mb.weekdaysShortRegex=function(M){if(this._weekdaysParseExact)return a(this,"_weekdaysRegex")||fa.call(this),M?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=
oc);return this._weekdaysShortStrictRegex&&M?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};mb.weekdaysMinRegex=function(M){if(this._weekdaysParseExact)return a(this,"_weekdaysRegex")||fa.call(this),M?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=oc);return this._weekdaysMinStrictRegex&&M?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};mb.isPM=function(M){return"p"===(M+"").toLowerCase().charAt(0)};mb.meridiem=function(M,Z,
ma){return 11<M?ma?"pm":"PM":ma?"am":"AM"};Qa("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(M){var Z=M%10;Z=1===P(M%100/10)?"th":1===Z?"st":2===Z?"nd":3===Z?"rd":"th";return M+Z}});b.lang=A("moment.lang is deprecated. Use moment.locale instead.",Qa);b.langData=A("moment.langData is deprecated. Use moment.localeData instead.",
T);var Rb=Math.abs,ad=Ib("ms"),bd=Ib("s"),cd=Ib("m"),dd=Ib("h"),ed=Ib("d"),fd=Ib("w"),gd=Ib("M"),hd=Ib("Q"),id=Ib("y"),jd=Pb("milliseconds"),kd=Pb("seconds"),ld=Pb("minutes"),md=Pb("hours"),nd=Pb("days"),od=Pb("months"),pd=Pb("years"),Sb=Math.round,fc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},wc=Math.abs,lb=bb.prototype;lb.isValid=function(){return this._isValid};lb.abs=function(){var M=this._data;this._milliseconds=Rb(this._milliseconds);this._days=Rb(this._days);this._months=Rb(this._months);M.milliseconds=
Rb(M.milliseconds);M.seconds=Rb(M.seconds);M.minutes=Rb(M.minutes);M.hours=Rb(M.hours);M.months=Rb(M.months);M.years=Rb(M.years);return this};lb.add=function(M,Z){return lc(this,M,Z,1)};lb.subtract=function(M,Z){return lc(this,M,Z,-1)};lb.as=function(M){if(!this.isValid())return NaN;var Z=this._milliseconds;M=J(M);if("month"===M||"quarter"===M||"year"===M){var ma=this._days+Z/864E5;ma=this._months+4800*ma/146097;switch(M){case "month":return ma;case "quarter":return ma/3;case "year":return ma/12}}else switch(ma=
this._days+Math.round(146097*this._months/4800),M){case "week":return ma/7+Z/6048E5;case "day":return ma+Z/864E5;case "hour":return 24*ma+Z/36E5;case "minute":return 1440*ma+Z/6E4;case "second":return 86400*ma+Z/1E3;case "millisecond":return Math.floor(864E5*ma)+Z;default:throw Error("Unknown unit "+M);}};lb.asMilliseconds=ad;lb.asSeconds=bd;lb.asMinutes=cd;lb.asHours=dd;lb.asDays=ed;lb.asWeeks=fd;lb.asMonths=gd;lb.asQuarters=hd;lb.asYears=id;lb.valueOf=function(){return this.isValid()?this._milliseconds+
864E5*this._days+this._months%12*2592E6+31536E6*P(this._months/12):NaN};lb._bubble=function(){var M=this._milliseconds,Z=this._days,ma=this._months,ta=this._data;0<=M&&0<=Z&&0<=ma||0>=M&&0>=Z&&0>=ma||(M+=864E5*mc(146097*ma/4800+Z),ma=Z=0);ta.milliseconds=M%1E3;M=W(M/1E3);ta.seconds=M%60;M=W(M/60);ta.minutes=M%60;M=W(M/60);ta.hours=M%24;Z+=W(M/24);M=W(4800*Z/146097);ma+=M;Z-=mc(146097*M/4800);M=W(ma/12);ta.days=Z;ta.months=ma%12;ta.years=M;return this};lb.clone=function(){return eb(this)};lb.get=function(M){M=
J(M);return this.isValid()?this[M+"s"]():NaN};lb.milliseconds=jd;lb.seconds=kd;lb.minutes=ld;lb.hours=md;lb.days=nd;lb.weeks=function(){return W(this.days()/7)};lb.months=od;lb.years=pd;lb.humanize=function(M,Z){if(!this.isValid())return this.localeData().invalidDate();var ma=!1,ta=fc;"object"===typeof M&&(Z=M,M=!1);"boolean"===typeof M&&(ma=M);"object"===typeof Z&&(ta=Object.assign({},fc,Z),null!=Z.s&&null==Z.ss&&(ta.ss=Z.s-1));M=this.localeData();Z=!ma;var La=eb(this).abs(),Va=Sb(La.as("s")),Xa=
Sb(La.as("m")),hb=Sb(La.as("h")),pb=Sb(La.as("d")),jb=Sb(La.as("M")),xb=Sb(La.as("w"));La=Sb(La.as("y"));Va=Va<=ta.ss&&["s",Va]||Va<ta.s&&["ss",Va]||1>=Xa&&["m"]||Xa<ta.m&&["mm",Xa]||1>=hb&&["h"]||hb<ta.h&&["hh",hb]||1>=pb&&["d"]||pb<ta.d&&["dd",pb];null!=ta.w&&(Va=Va||1>=xb&&["w"]||xb<ta.w&&["ww",xb]);Va=Va||1>=jb&&["M"]||jb<ta.M&&["MM",jb]||1>=La&&["y"]||["yy",La];Va[2]=Z;Va[3]=0<+this;Va[4]=M;Z=Ab.apply(null,Va);ma&&(Z=M.pastFuture(+this,Z));return M.postformat(Z)};lb.toISOString=Ja;lb.toString=
Ja;lb.toJSON=Ja;lb.locale=Hb;lb.localeData=Mb;lb.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ja);lb.lang=Ec;v("X",0,0,"unix");v("x",0,0,"valueOf");ba("x",rc);ba("X",/[+-]?\d+(\.\d{1,3})?/);N("X",function(M,Z,ma){ma._d=new Date(1E3*parseFloat(M))});N("x",function(M,Z,ma){ma._d=new Date(P(M))});b.version="2.29.1";var Gc=Ha;b.fn=Za;b.min=function(){var M=[].slice.call(arguments,0);return Ua("isBefore",M)};b.max=function(){var M=[].slice.call(arguments,
0);return Ua("isAfter",M)};b.now=function(){return Date.now?Date.now():+new Date};b.utc=d;b.unix=function(M){return Ha(1E3*M)};b.months=function(M,Z){return kc(M,Z,"months")};b.isDate=f;b.locale=Qa;b.invalid=t;b.duration=eb;b.isMoment=x;b.weekdays=function(M,Z,ma){return dc(M,Z,ma,"weekdays")};b.parseZone=function(){return Ha.apply(null,arguments).parseZone()};b.localeData=T;b.isDuration=ab;b.monthsShort=function(M,Z){return kc(M,Z,"monthsShort")};b.weekdaysMin=function(M,Z,ma){return dc(M,Z,ma,"weekdaysMin")};
b.defineLocale=va;b.updateLocale=function(M,Z){if(null!=Z){var ma=xc;if(null!=sb[M]&&null!=sb[M].parentLocale)sb[M].set(w(sb[M]._config,Z));else{var ta=Sa(M);null!=ta&&(ma=ta._config);Z=w(ma,Z);null==ta&&(Z.abbr=M);Z=new D(Z);Z.parentLocale=sb[M];sb[M]=Z}Qa(M)}else null!=sb[M]&&(null!=sb[M].parentLocale?(sb[M]=sb[M].parentLocale,M===Qa()&&Qa(M)):null!=sb[M]&&delete sb[M]);return sb[M]};b.locales=function(){return Ma(sb)};b.weekdaysShort=function(M,Z,ma){return dc(M,Z,ma,"weekdaysShort")};b.normalizeUnits=
J;b.relativeTimeRounding=function(M){return void 0===M?Sb:"function"===typeof M?(Sb=M,!0):!1};b.relativeTimeThreshold=function(M,Z){if(void 0===fc[M])return!1;if(void 0===Z)return fc[M];fc[M]=Z;"s"===M&&(fc.ss=Z-1);return!0};b.calendarFormat=function(M,Z){M=M.diff(Z,"days",!0);return-6>M?"sameElse":-1>M?"lastWeek":0>M?"lastDay":1>M?"sameDay":2>M?"nextDay":7>M?"nextWeek":"sameElse"};b.prototype=Za;b.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",
DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return b})},"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),function(b,y,q,a,h,e,g){b=new (b(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(f){var m=[];g.hasGeometryOperations(f)&&m.push(e.enableGeometryOperations());return h(m)}}));
y.setObject("arcadeProfiles.visualizationProfile",b,a);return b})},"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(b,y,q,a,h){var e=/(\/(MapServer|FeatureServer)).*/ig;q={hasGeometryOperations:function(g){return y.some(g,function(f){return f.hasGeometryOperations?f.hasGeometryOperations():h.hasGeometryOperations(f)})},hasFeatureSetOperations:function(g){return y.some(g,function(f){return f.hasFeatureSetOperations?
f.hasFeatureSetOperations():h.hasFeatureSetOperations(f)})},hasVariables:function(g,f){return y.some(g,function(m){return y.some(f,function(l){return m.hasVariable?m.hasVariable(l):h.hasVariable(m,l)})})},isAsync:function(g){return y.some(g,function(f){return f.async})},getServiceUrl:function(g){return e.test(g)?g.replace(e,"$1"):null}};b.setObject("arcadeProfiles.utils",q,a);return q})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(b,y,q,a,h,e,g,f,m){b=b(f,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(l,d,c,k,t,n){this.values=[];this._symbols={};this.infos=[];l&&!l.declaredClass?(d=l,c=n&&n.geometryType,this.defaultSymbol=(l=d.defaultSymbol)&&(l.declaredClass?l:g.fromJson(l,n)),this.attributeField=d.field1,this.attributeField2=d.field2,this.attributeField3=d.field3,this.fieldDelimiter=d.fieldDelimiter,this.defaultLabel=d.defaultLabel,this.setValueExpression(d.valueExpression),this.valueExpressionTitle=
d.valueExpressionTitle,this.legendOptions=d.legendOptions,d.backgroundFillSymbol&&(this.backgroundFillSymbol=g.fromJson(d.backgroundFillSymbol,c?{geometryType:"esriGeometryPolygon"}:null)),"esriGeometryPolygon"===c&&this.hasVisualVariables("sizeInfo",!1)&&(n={geometryType:"esriGeometryPoint"}),y.forEach(d.uniqueValueInfos,function(u){this._addValueInfo(u,n)},this)):(this.defaultSymbol=l,this.attributeField=d,this.attributeField2=c,this.attributeField3=k,this.fieldDelimiter=t);this._multiple=!!this.attributeField2},
addValue:function(l,d){l=q.isObject(l)?l:{value:l,symbol:d};this._addValueInfo(l)},removeValue:function(l){var d=y.indexOf(this.values,l);-1!==d&&(this.values.splice(d,1),this._hasNullKeyword=this._evalNullKeyword(this.values),delete this._symbols[l],this.infos.splice(d,1))},getUniqueValueInfo:function(l){var d=this.attributeField,c=l.attributes;if(this.valueExpression)d=this._getDataValue(l,this._uvInfo,null,this._cache.uvInfo),d=this._normalizeNullValue(d);else if(this._multiple){l=this.attributeField2;
var k=this.attributeField3,t=[];d&&t.push(this._normalizeNullValue(c[d]));l&&t.push(this._normalizeNullValue(c[l]));k&&t.push(this._normalizeNullValue(c[k]));d=t.join(this.fieldDelimiter||"")}else d=q.isFunction(d)?d(l):c[d],d=this._normalizeNullValue(d);return this._symbols[d]},setValueExpression:function(l){this.valueExpression=l;this._uvInfo={valueExpression:l};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(){var l=this.inherited(arguments);this.valueExpression&&
(l=l.concat(m.extractFieldNames(this.valueExpression)));l.sort();return y.filter(l,function(d,c){return 0===c||l[c-1]!==d})},getSymbol:function(l){return(l=this.getUniqueValueInfo(l))&&l.symbol||this.defaultSymbol},_addValueInfo:function(l,d){var c=l.value;this.values.push(c);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(l);var k=l.symbol;k&&!k.declaredClass&&(l.symbol=g.fromJson(k,d));this._symbols[c]=l},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(l){return this._hasNullKeyword&&
null==l?this._nullCode:l},_evalNullKeyword:function(l){var d=this.fieldDelimiter||"",c=new RegExp("(^|"+d+")("+this._nullCode+")("+d+"|$)");return y.some(l,function(k){return c.test(k)})},toJson:function(){var l=e.fixJson;var d={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:q.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&
this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:y.map(this.infos||[],function(c){c=q.mixin({},c);c.symbol=c.symbol&&c.symbol.toJson();c.value+="";return l(c)})};this.backgroundFillSymbol&&(d.backgroundFillSymbol=this.backgroundFillSymbol.toJson());d=q.mixin(this.inherited(arguments),d);return l(d)}});q.setObject("renderer.UniqueValueRenderer",b,h);return b})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E){var w={createDefaultRenderer:function(D){D=g.createDefaultSymbol(D);return new f(D)},fromJson:function(D,r){switch(D.type||""){case "simple":D=new f(D,r);break;case "uniqueValue":D=new m(D,null,null,null,null,r);break;case "classBreaks":D=new l(D,null,r);break;case "vectorField":D=new d(D);break;case "scaleDependent":D=this._scaleDependentFromJson(D);break;case "dotDensity":D=D.attributes?w.createDefaultRenderer("esriGeometryPolygon"):this._dotDensityFromJson(D);
break;case "temporal":D=this._temporalFromJson(D,r);break;case "heatmap":D=this._heatmapFromJson(D);break;case "rasterStretch":D=new A(D);break;case "rasterShadedRelief":D=new z(D);break;case "rasterColormap":D=new E(D);break;default:D=(D=r&&r.geometryType)?w.createDefaultRenderer(D):null}return D},_scaleDependentFromJson:function(D){var r={},v=D.minScale;r.rendererInfos=b.map(D.rendererInfos,function(B){var C=B.maxScale;B={minScale:v,maxScale:C,renderer:B.renderer&&this.fromJson(B.renderer)};v=C;
return B},this);return new k(r)},_dotDensityFromJson:function(D){D.backgroundColor&&y.isArray(D.backgroundColor)&&(D.backgroundColor=e.toDojoColor(D.backgroundColor));0<D.dotSize&&(D.dotSize=a.pt2px(D.dotSize));D.fields&&b.forEach(D.fields,function(r){r&&y.isArray(r.color)&&(r.color=e.toDojoColor(r.color))});D.legendOptions&&(D.legendOptions.backgroundColor&&y.isArray(D.legendOptions.backgroundColor)&&(D.legendOptions.backgroundColor=e.toDojoColor(D.legendOptions.backgroundColor)),D.legendOptions.outline&&
(D.legendOptions.outline=g.fromJson(D.legendOptions.outline)));D.outline&&(D.outline=g.fromJson(D.outline));return new c(D)},_temporalFromJson:function(D,r){var v=r&&r.geometryType;D=D||{};var B=this.fromJson(D.observationRenderer,r);r=D.latestObservationRenderer?this.fromJson(D.latestObservationRenderer,r):null;v=D.trackRenderer?this.fromJson(D.trackRenderer,v?{geometryType:"esriGeometryPolyline"}:null):null;D=this._agerFromJson(D.observationAger);return new u(B,r,v,D)},_agerFromJson:function(D){var r;
D=D||{};D.colorRange||D.sizeRange||D.alphaRange?r=this._timeRampFromJson(D):D.agerClassBreakInfos&&(r=this._timeClassBreaksFromJson(D));return r},_timeRampFromJson:function(D){var r,v,B;D.colorRange&&1<D.colorRange.length&&(r=[e.toDojoColor(D.colorRange[0]),e.toDojoColor(D.colorRange[1])]);D.sizeRange&&1<D.sizeRange.length&&(v=[D.sizeRange[0],D.sizeRange[1]]);D.alphaRange&&1<D.alphaRange.length&&(B=[D.alphaRange[0]/255,D.alphaRange[1]/255]);return new n(r,v,B)},_timeClassBreaksFromJson:function(D){var r=
D.agerClassBreakInfos,v=[],B;var C=t.UNIT_DAYS;switch(D.timeUnits){case "esriTimeUnitsSeconds":C=t.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":C=t.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":C=t.UNIT_HOURS;break;case "esriTimeUnitsMinutes":C=t.UNIT_MINUTES;break;case "esriTimeUnitsMonths":C=t.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":C=t.UNIT_WEEKS;break;case "esriTimeUnitsYears":C=t.UNIT_YEARS}for(B=0;B<r.length;B+=1){D=r[B];var F={minAge:0,maxAge:D.oldestAge||Infinity};D.color&&
(F.color=e.toDojoColor(D.color));D.alpha&&(F.alpha=D.alpha/255);F.size=D.size;v[B]=F}return new t(v,C)},_heatmapFromJson:function(D){var r=D.colorStops;r&&r instanceof Array&&b.forEach(r,function(v){v.color=e.toDojoColor(v.color)});return new x(D)}};y.mixin(y.getObject("renderer",!0,h),w);return w})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(b,y,q,a,h,e,g,f,m){b=b(f,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(l,d,c){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(l&&!l.declaredClass){var k=l;d=c&&c.geometryType;this.attributeField=k.field;this.setValueExpression(k.valueExpression);this.valueExpressionTitle=k.valueExpressionTitle;this.legendOptions=k.legendOptions;this.defaultSymbol=(l=k.defaultSymbol)&&(l.declaredClass?l:g.fromJson(l,c));this.backgroundFillSymbol=(l=k.backgroundFillSymbol)&&
(l.declaredClass?l:g.fromJson(l,d?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],k,this);var t=k.minValue;(l=k.classBreakInfos)&&l[0]&&e.isDefined(l[0].classMaxValue)&&y.forEach(l,function(n){var u=n.classMaxValue;n.minValue=t;t=n.maxValue=u},this);"esriGeometryPolygon"===d&&(this.hasVisualVariables("sizeInfo",!1)||g.isPointSymbol(g.getFirstSupportedSymbol(y.map(l,function(n){return n.symbol}))))&&
(c={geometryType:"esriGeometryPoint"});y.forEach(l,function(n){this._addBreakInfo(n,c)},this)}else this.defaultSymbol=l,this.attributeField=d},addBreak:function(l,d,c){l=q.isObject(l)?l:{minValue:l,maxValue:d,symbol:c};this._addBreakInfo(l)},removeBreak:function(l,d){var c=this.breaks,k,t=c.length,n=this._symbols;for(k=0;k<t;k++){var u=c[k];if(u[0]==l&&u[1]==d){c.splice(k,1);delete n[l+"-"+d];this.infos.splice(k,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(l){var d=
this.attributeField,c=l.attributes,k=this.breaks,t=k.length,n=this.isMaxInclusive;if(this.valueExpression)l=this._getDataValue(l,this._cbInfo,null,this._cache.cbInfo);else if(q.isFunction(d))l=d(l);else if(l=parseFloat(c[d]),d=this.normalizationType,d){var u=parseFloat(this.normalizationTotal);c=parseFloat(c[this.normalizationField]);if("log"===d)l=Math.log(l)*Math.LOG10E;else if("percent-of-total"===d&&!isNaN(u))l=l/u*100;else if("field"===d){if(isNaN(l)||isNaN(c))return-1;l/=c}}if(null!=l&&!isNaN(l)&&
"number"===typeof l)for(c=0;c<t;c++)if(d=k[c],d[0]<=l&&(n?l<=d[1]:l<d[1]))return c;return-1},getBreakInfo:function(l){l=this.getBreakIndex(l);return-1!==l?this.infos[l]:null},getSymbol:function(l){return(l=this.breaks[this.getBreakIndex(l)])?this._symbols[l[0]+"-"+l[1]]:this.defaultSymbol},setMaxInclusive:function(l){this.isMaxInclusive=l},setValueExpression:function(l){this.valueExpression=l;this._cbInfo={valueExpression:l};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(){var l=
this.inherited(arguments);this.valueExpression&&(l=l.concat(m.extractFieldNames(this.valueExpression)));l.sort();return y.filter(l,function(d,c){return 0===c||l[c-1]!==d})},isContinuousRenderer:function(){var l=!1;if(this.infos&&1===this.infos.length){var d=this.attributeField,c=this.normalizationField,k=this.valueExpression;l=this.getVisualVariablesForType("colorInfo",!1)||[];var t=this.getVisualVariablesForType("sizeInfo",!1)||[],n=this.getVisualVariablesForType("opacityInfo",!1)||[];l=l.concat(t).concat(n);
l=y.some(l,function(u){return(u.field===d||u.valueExpression===k)&&u.normalizationField==c})}return l},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],
["defined-interval","esriClassifyDefinedInterval"]],_copy:function(l,d,c){y.forEach(l,function(k){var t=k.split(":");if(1<t.length){k=t[0];var n=this["_"+k+"Enums"];if("rest"===t[1]){var u="1";var x="0"}else"sdk"===t[1]&&(u="0",x="1")}t=d[k];if(void 0!==t&&(c[k]=t,n&&u)){var A,z=n.length;for(A=0;A<z;A++)if(n[A][u]===t){c[k]=n[A][x];break}}},this)},_addBreakInfo:function(l,d){var c=l.minValue,k=l.maxValue;this.breaks.push([c,k]);this.infos.push(l);var t=l.symbol;t&&!t.declaredClass&&(l.symbol=g.fromJson(t,
d));this._symbols[c+"-"+k]=l.symbol},toJson:function(){var l=this.infos||[],d=e.fixJson,c=l[0]&&l[0].minValue,k=this.backgroundFillSymbol;l=q.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:q.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:k&&k.toJson(),minValue:-Infinity===c?-Number.MAX_VALUE:c,classBreakInfos:y.map(l,
function(t){t=q.mixin({},t);t.symbol=t.symbol&&t.symbol.toJson();t.classMaxValue=Infinity===t.maxValue?Number.MAX_VALUE:t.maxValue;delete t.minValue;delete t.maxValue;return d(t)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,l);l.hasOwnProperty("normalizationType")&&!l.normalizationType&&delete l.normalizationType;l.hasOwnProperty("classificationMethod")&&!l.classificationMethod&&delete l.classificationMethod;return d(l)}});
q.setObject("renderer.ClassBreaksRenderer",b,h);return b})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k,t){var n=b(f,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",
constructor:function(u){e.isDefined(u)||(u={});u.attributeField=u.attributeField||"Magnitude";u.rotationInfo=u.rotationInfo||this._getRotationInfo(u);b.safeMixin(this,u);this.setRotationInfo(this.rotationInfo);this.style=this.style||n.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:k.fromJson(this.singleArrowSymbol));this.renderer=new m(this._getDefaultSymbol(),u.attributeField);this._updateRenderer(this.style);this.flowRepresentation=
this.flowRepresentation||this.FLOW_FROM},getSymbol:function(u){return this.renderer&&this.renderer.getSymbol(u)},setVisualVariables:function(u){u=a.filter(u,function(x){if("sizeInfo"===x.type)return e.isDefined(this._updateSizeInfo(x))},this);this.inherited(arguments);return this},setSizeInfo:function(u){this._updateSizeInfo(u);this.inherited(arguments);return this},setProportionalSymbolInfo:function(u){this.setSizeInfo(u);return this},setColorInfo:function(u){return this},_updateRenderer:function(u){return e.isDefined(this.renderer)?
u===n.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():u===n.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():u===n.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():u===n.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():u===n.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():u===n.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():u===n.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():u===n.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():u===
n.STYLE_SCALAR?this._createSimpleScalarRenderer():u===n.STYLE_WIND_BARBS?this._createWindBarbsRenderer():this._createClassifiedArrowRenderer():Error("Invalid Renderer!")},_updateSizeInfo:function(u){return u&&e.isDefined(u.minSize)&&e.isDefined(u.maxSize)&&e.isDefined(u.minDataValue)&&e.isDefined(u.maxDataValue)?(this.style===n.STYLE_WIND_BARBS&&(u.minSize=u.maxSize),u.field=u.field||"Magnitude",u.type="sizeInfo",this.minDataValue=u.minDataValue,this.maxDataValue=u.maxDataValue,u):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=
this._getDefaultSymbol(new g([56,168,0]));var u=[0,1E-6,3.5,7,10.5,14];if(e.isDefined(this.minDataValue)&&e.isDefined(this.maxDataValue)){var x=(this.maxDataValue-this.minDataValue)/5;u=[];var A;var z=this.minDataValue;for(A=0;6>A;A++)u[A]=z,z+=x}this._addBreaks(u,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=
this._getDefaultSymbol(new g([214,47,39]));this._addBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new g([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],
[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var u=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];a.forEach(u,function(x,A){u[A]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new g([214,47,39]));this._addBreaks(u,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,
21]])},_createBeaufortMilesRenderer:function(){var u=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];a.forEach(u,function(x,A){u[A]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new g([214,47,39]));this._addBreaks(u,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var u=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,
28.6,32.7];a.forEach(u,function(x,A){u[A]*=3.6});this.renderer.defaultSymbol=this._getDefaultSymbol(new g([214,47,39]));this._addBreaks(u,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new g([177,177,177]));this._addBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},
_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new g([177,177,177]));this._addBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new d({url:t.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var u=[],x;for(x=0;150>=x;x+=5)u.push(x);
var A="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var z=new d({url:t.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=z;for(x=0;x<u.length-1;x++)0===x?this.renderer.addBreak({minValue:u[x],maxValue:u[x+1],symbol:z}):this.renderer.addBreak({minValue:u[x],maxValue:u[x+1],symbol:(new l).setPath(A[x]).setOutline((new c).setWidth(1.5)).setSize(20).setColor(new g([0,0,0,255]))})},_getDefaultSymbol:function(u){return(new l).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new c).setWidth(0)).setSize(20).setColor(u||
new g([0,92,230]))},_getRotationInfo:function(u){var x=u&&u.flowRepresentation||n.FLOW_FROM,A=u&&u.rotationField||"Direction",z=n.FLOW_FROM;return{field:function(E){E=E.attributes[A];return x===z?E:E+180},type:"geographic"}},_addBreaks:function(u,x){if(!e.isDefined(this.renderer))return Error("Invalid Renderer!");if(!(u&&x&&u.length&&x.length&&u.length>=x.length))return Error("AddBreaks: Input arguments break values and colors not valid");var A;for(A=0;A<x.length;A++)this.renderer.addBreak({minValue:u[A],
maxValue:u[A+1],symbol:this._getDefaultSymbol(new g(x[A]))})},toJson:function(){var u=y.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,inputUnit:this.inputUnit,outputUnit:this.outputUnit});this.renderer&&this.renderer.defaultSymbol&&this.style===n.STYLE_SINGLE_ARROW&&(u.singleArrowSymbol=this.renderer.defaultSymbol.toJson());return e.fixJson(u)}});y.mixin(n,{STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",
STYLE_CLASSIFIED_ARROW:"classified_arrow",STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});y.setObject("renderer.VectorFieldRenderer",n,h);return n})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k){b=b(l,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(t){this.dotSize=t.dotSize||3;this.dotValue=t.dotValue;this.fields=t.fields;this.outline=t.outline;this.backgroundColor=t.backgroundColor;this.exactCount=t.exactCount||!0;this.dotShape=t.dotShape||"square";this.legendOptions=t.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=
null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(t){this._currentGraphic=t;if(!this._supportsCanvas)return null;this._map||(this._map=t.getLayer()._map,this._objectIdField=t.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",y.hitch(this,function(x){this._currentMapScale=this._map.getScale();this._currentResolution=x.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]=
{}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][t.attributes[this._objectIdField]]){var n=this._symbolMap[this._currentMapScale][t.attributes[this._objectIdField]];var u=this._getShapeProperties(t);n.setOffset(u.dx,u.dy);return n}n=this._generateFieldsCount(this.fields,t.attributes,this.dotValue);u=this._getShapeProperties(t);if(!u.width||!u.height)return null;n=new d(this._generateImageSrc(u.width,u.height,n,u.minXY,u.maxXY),this.outline,u.width,u.height);
n.setOffset(u.dx,u.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][t.attributes[this._objectIdField]]=n},_generateFieldsCount:function(t,n,u){var x;for(x=t.length-1;0<=x;x--){var A=n[t[x].name]/u;t[x].numPoints=Math.round(A)}return t},_getShapeProperties:function(t){var n=t.geometry.getExtent();n.contains(this._map.extent)&&(n=this._map.extent);var u=Math.ceil(n.getWidth()/this._currentResolution);var x=Math.ceil(n.getHeight()/
this._currentResolution);var A=this._map.toScreen(new k(n.xmin,n.ymin,n.spatialReference));n=this._map.toScreen(new k(n.xmax,n.ymax,n.spatialReference));t=t.getLayer().getNavigationTransform();return{minXY:A,maxXY:n,dx:(A.x-t.dx)%u,dy:(n.y-t.dy)%x,width:u,height:x}},_generateImageSrc:function(t,n,u,x,A,z){var E=this.dotSize,w;this._canvas?(this._canvas.width=t,this._canvas.height=n):this._canvas=this._initCanvas(t,n);var D=this._canvas.getContext("2d");if(z=z||this.backgroundColor)D.fillStyle=z.toCss(!0),
D.fillRect(0,0,t,n),D.fill();for(z=u.length-1;0<=z;z--)for(D.fillStyle=u[z].color.toCss(!0),w=u[z].numPoints-1;0<=w;w--){var r=this._getRandomPoint(t,n,x,A);"square"===this.dotShape?D.fillRect(r.x,r.y,E,E):"circle"===this.dotShape&&(D.beginPath(),D.arc(r.x,r.y,E/2,0,2*Math.PI,!0));D.fill()}return this._canvas.toDataURL()},_initCanvas:function(t,n){t=a.create("canvas",{id:"canvas",width:t+"px",height:n+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(t);return t},
_getRandomInt:function(t,n){return Math.floor(Math.random()*(n-t+1)+t)},_getRandomPoint:function(t,n,u,x){var A={},z=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&t*n>this._exactCountMinArea){t=!1;do A.x=this._getRandomInt(u.x,x.x),A.y=this._getRandomInt(x.y,u.y),t=new c(A.x,A.y),t=this._checkPointShapeBounds(t,this.dotSize+z,this._currentGraphic.geometry),!0===t&&(A.x-=u.x,A.y-=x.y);while(!1===t)}else A.x=this._getRandomInt(0,t),A.y=this._getRandomInt(0,n);return A},
_checkPointShapeBounds:function(t,n,u){var x=null;x=!1;var A=!0,z=0;do{switch(z){case 1:t.x+=n;break;case 2:t.y+=n;break;case 3:t.x-=n}x=this._map.toMap(t);x=u.contains(x);!1===x&&(A=!1);z+=1}while(3>=z&&!0===A);return x},setDotSize:function(t){0<t&&(this.dotSize=t)},setDotValue:function(t){0<t&&(this.dotValue=t)},setOutline:function(t){this.outline=t},setBackgroundColor:function(t){this.backgroundColor=t},toJson:function(){var t=y.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:m.toJsonColor(this.backgroundColor),
dotShape:this.dotShape,dotSize:0<this.dotSize?e.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:q.map(this.fields,function(n){return f.fixJson({color:m.toJsonColor(n.color),name:n.name})}),legendOptions:this.legendOptions&&f.fixJson({backgroundColor:m.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});
return f.fixJson(t)}});y.setObject("renderer.DotDensityRenderer",b,g);return b})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(b,y,q,a,h){b=b(h,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});y.setObject("geometry.ScreenPoint",b,a);return b})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),
function(b,y,q,a,h,e,g){b=b(g,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(f){this.setRendererInfos(f&&f.rendererInfos||[])},setRendererInfos:function(f){this.rendererInfos=f;this._setRangeType();return this},getSymbol:function(f){var m=this.getRendererInfo(f);return m&&m.renderer&&m.renderer.getSymbol(f)},getRendererInfo:function(f){f=f.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(f.getZoom()):this.getRendererInfoByScale(f.getScale())},
getRendererInfoByZoom:function(f){var m=this.rendererInfos,l,d=0;do{var c=m[d];f>=c.minZoom&&f<=c.maxZoom&&(l=c);d++}while(!l&&d<m.length);return l},getRendererInfoByScale:function(f){var m=this.rendererInfos,l,d=0;do{var c=m[d];var k=c.minScale;var t=c.maxScale;var n=!k;var u=!t;!n&&f<=k&&(n=!0);!u&&f>=t&&(u=!0);n&&u&&(l=c);d++}while(!l&&d<m.length);return l},addRendererInfo:function(f){var m=0,l=this.rendererInfos,d=f.hasOwnProperty("minZoom")?"minZoom":"minScale",c=l.length;do{var k=l[m];if(c===
m||f[d]<k[d]){l.splice(m,0,f);this._setRangeType();var t=!0}m++}while(!t&&m<c);return this},_setRangeType:function(){var f=this.rendererInfos;if(f=f&&f[0])this.rangeType=f.hasOwnProperty("minZoom")?"zoom":f.hasOwnProperty("minScale")?"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var f=this.rendererInfos||[],m=f[0]&&f[0].minScale;f=q.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<m?m:0,rendererInfos:y.map(f,function(l){return e.fixJson({maxScale:0<l.maxScale?
l.maxScale:0,renderer:l.renderer&&l.renderer.toJson()})})});return e.fixJson(f)}});q.setObject("renderer.ScaleDependentRenderer",b,h);return b})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(b,y,q,a,h,e,g,f,m,l){var d=b(l,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(c,k){this.infos=c;this.timeUnits=k||"day";c.sort(function(t,
n){return t.minAge<n.minAge?-1:t.minAge>n.minAge?1:0})},getAgedSymbol:function(c,k){var t=k.getLayer();k=k.attributes;var n=g.isDefined;c=f.fromJson(c.toJson());var u=t._map.timeExtent.endTime;if(!u)return c;var x=h.difference(new Date(k[t._startTimeField]),u,this.timeUnits);y.some(this.infos,function(A){if(x>=A.minAge&&x<=A.maxAge){var z=A.color,E=A.size;A=A.alpha;z&&c.setColor(z);n(E)&&this._setSymbolSize(c,E);n(A)&&c.color&&(c.color.a=A);return!0}},this);return c},toJson:function(){var c={agerClassBreakInfos:[]},
k;c.timeUnits=this._getRestUnits(this.timeUnits);for(k=0;k<this.infos.length;k+=1){var t=this.infos[k];var n={};n.oldestAge=Infinity===t.maxAge?null:t.maxAge;n.size=t.size;t.color&&(n.color=m.toJsonColor(t.color));t.alpha&&(n.alpha=Math.round(255*t.alpha));c.agerClassBreakInfos[k]=n}return c},_getRestUnits:function(c){var k="esriTimeUnitsDays";switch(c){case d.UNIT_SECONDS:k="esriTimeUnitsSeconds";break;case d.UNIT_MILLISECONDS:k="esriTimeUnitsMilliseconds";break;case d.UNIT_HOURS:k="esriTimeUnitsHours";
break;case d.UNIT_MINUTES:k="esriTimeUnitsMinutes";break;case d.UNIT_MONTHS:k="esriTimeUnitsMonths";break;case d.UNIT_WEEKS:k="esriTimeUnitsWeeks";break;case d.UNIT_YEARS:k="esriTimeUnitsYears"}return k}});q.mixin(d,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});q.setObject("renderer.TimeClassBreaksAger",d,e);return d})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(h,e){},_setSymbolSize:function(h,e){switch(h.type){case "simplemarkersymbol":h.setSize(e);break;case "picturemarkersymbol":h.setWidth(e);h.setHeight(e);break;case "simplelinesymbol":case "cartographiclinesymbol":h.setWidth(e);break;case "simplefillsymbol":case "picturefillsymbol":h.outline&&h.outline.setWidth(e)}}});y.setObject("renderer.SymbolAger",b,a);return b})},
"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(b,y,q,a,h,e,g,f){b=b(f,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(m,l,d){this.colorRange=m;this.sizeRange=l;this.alphaRange=d},getAgedSymbol:function(m,l){var d=l.getLayer(),c=l.attributes;m=e.fromJson(m.toJson());var k=d._map.timeExtent;l=k.startTime;k=k.endTime;if(!l||!k)return m;l=l.getTime();
k=k.getTime();d=new Date(c[d._startTimeField]);d=d.getTime();d<l&&(d=l);d=k===l?1:(d-l)/(k-l);if(l=this.sizeRange)c=l[0],k=l[1],l=Math.abs(k-c)*d,this._setSymbolSize(m,c<k?c+l:c-l);if(l=this.colorRange){k=l[0];var t=l[1],n=Math.round;c=new q;var u=k.r,x=t.r;l=Math.abs(x-u)*d;c.r=n(u<x?u+l:u-l);u=k.g;x=t.g;l=Math.abs(x-u)*d;c.g=n(u<x?u+l:u-l);u=k.b;x=t.b;l=Math.abs(x-u)*d;c.b=n(u<x?u+l:u-l);k=k.a;t=t.a;l=Math.abs(t-k)*d;c.a=k<t?k+l:k-l;m.setColor(c)}c=m.color;(l=this.alphaRange)&&c&&(k=l[0],t=l[1],
l=Math.abs(t-k)*d,c.a=k<t?k+l:k-l);return m},toJson:function(){var m={};this.sizeRange&&(m.sizeRange=this.sizeRange);this.colorRange&&(m.colorRange=[g.toJsonColor(this.colorRange[0]),g.toJsonColor(this.colorRange[1])]);this.alphaRange&&(m.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return m}});y.setObject("renderer.TimeRampAger",b,h);return b})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel",
"./Renderer"],function(b,y,q,a,h){b=b(h,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(e,g,f,m){this.observationRenderer=e;this.latestObservationRenderer=g;this.trackRenderer=f;this.observationAger=m},getSymbol:function(e){var g=e.getLayer(),f=this.getObservationRenderer(e),m=f&&f.getSymbol(e),l=this.observationAger;g.timeInfo&&g._map.timeExtent&&f===this.observationRenderer&&l&&m&&(m=l.getAgedSymbol(m,e));return m},getObservationRenderer:function(e){return 0===e.getLayer()._getKind(e)?
this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var e={type:"temporal"};e.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(e.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(e.trackRenderer=this.trackRenderer.toJson());this.observationAger&&(e.observationAger=this.observationAger.toJson());return e}});y.setObject("renderer.TemporalRenderer",b,a);return b})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),
function(b,y,q,a,h,e,g,f,m,l){b=b([l],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,colorStops:null,constructor:function(d){if(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)"string"==typeof d&&(d=JSON.parse(d)),y.mixin(this,d),this._canvas=null,this.colors||this.colorStops||(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:.75,color:"rgba(255, 140, 0, 1)"},{ratio:.9,color:"rgba(255, 0,   0, 1)"}]),
this.gradient=this._generateGradient(this.colorStops||this.colors)},getSymbol:function(d){if(!this._supportsCanvas)return!1;var c=d.attributes.imageData;d=d.attributes.size;if(!d)return null;var k=this._getContext(d[0],d[1]),t=k.getImageData(0,0,d[0],d[1]);window.ArrayBuffer&&c instanceof ArrayBuffer?c=window.Uint8ClampedArray?new Uint8ClampedArray(c):new Uint8Array(c):c.BYTES_PER_ELEMENT&&1!==c.BYTES_PER_ELEMENT&&(c=window.Uint8ClampedArray?new Uint8ClampedArray(c.buffer):new Uint8Array(c.buffer));
if(window.CanvasPixelArray&&t.data instanceof window.CanvasPixelArray)for(var n=t.data,u=n.length;u--;)n[u]=c[u];else t.data.set(c);k.putImageData(t,0,0);return new f(k.canvas.toDataURL(),d[0],d[1])},setColors:function(d){d&&(d instanceof Array||d.colors)&&(this.gradient=this._generateGradient(d.colors||d),this.colors=d);return this},setColorStops:function(d){d&&(d instanceof Array||d.colorStops)&&(this.gradient=this._generateGradient(d.colorStops||d),this.colorStops=d);return this},setMaxPixelIntensity:function(d){this.maxPixelIntensity=
d;return this},setMinPixelIntensity:function(d){this.minPixelIntensity=d;return this},setField:function(d){this.field=d;return this},setFieldOffset:function(d){this.fieldOffset=d;return this},setBlurRadius:function(d){this.blurRadius=d;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var d=y.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,
minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(d.fieldOffset=this.fieldOffset);q.forEach(d.colorStops,function(c){c.color=m.toJsonColor(c.color)});return g.fixJson(d)},_getContext:function(d,c){this._canvas?(this._canvas.width=d,this._canvas.height=c):this._canvas=this._initCanvas(d,c);return this._canvas.getContext("2d")},_initCanvas:function(d,c){var k=a.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: 0px; top: -10000px;"},
null);k.width=d;k.height=c;document.body.appendChild(k);return k},_generateGradient:function(d,c){c||(c=512);d=this._colorsToStops(d);for(var k=this._getContext(1,c||512),t=k.createLinearGradient(0,0,0,c),n=0,u;n<d.length;n++)u=d[n],t.addColorStop(u.ratio,u.color.toCss(!0));k.fillStyle=t;k.fillRect(0,0,1,c);return k.getImageData(0,0,1,c).data},_colorsToStops:function(d){var c=[];if(!d[0])return c;if(null!=d[0].ratio)c=q.map(d,function(A){return{ratio:A.ratio,color:this._toColor(A.color)}},this);else if(null!=
d[0].value){var k=Infinity;c=-Infinity;var t=0,n;for(n=0;n<d.length;n++){var u=d[n].value;u<k&&(k=u);u>c&&(c=u)}t=c-k;this.maxPixelIntensity=c;this.minPixelIntensity=k;c=q.map(d,function(A){var z=A.value;A=this._toColor(A.color);return{value:z,ratio:(z-k)/t,color:A}},this)}else{var x=d.length-1;c=q.map(d,function(A,z){return{color:this._toColor(A),ratio:z/x}},this)}return c},_toColor:function(d){d.toRgba||d.declaredClass||(d=new m(d));return d}});y.setObject("renderer.HeatmapRenderer",b,e);return b})},
"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(b,y,q,a,h,e,g,f){var m={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};b=b(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(l){l=l||{};this.stretchType=
m.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=this.min=this.max=null;q.mixin(this,l);this.colorRamp=f.fromJson(l.colorRamp)},toJson:function(){var l={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:q.clone(this.statistics),
dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:q.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};return e.fixJson(l)},toRenderingRule:function(l){l=l||{};var d=new g;d.functionName="Stretch";var c=this._convertStretchTypeEnumToIndex(this.stretchType),k={StretchType:c,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};e.isDefined(this.min)&&
(k.Min=this.min);e.isDefined(this.min)&&(k.Max=this.max);3===c?(k.NumberOfStandardDeviations=this.numberOfStandardDeviations,d.outputPixelType="U8"):6===c?(k.MinPercent=parseFloat(this.minPercent),k.MaxPercent=parseFloat(this.maxPercent),d.outputPixelType="U8"):5===c?d.outputPixelType="U8":9===c&&(k.SigmoidStrengthLevel=this.sigmoidStrengthLevel);d.functionArguments=k;d.variableName="Raster";return this.colorRamp?(c=new g,c.functionArguments=l.convertToColormap?{Colormap:f.convertColorRampToColormap(this.colorRamp,
256)}:{colorRamp:this.colorRamp.toJson()},c.variableName="Raster",c.functionName="Colormap",c.functionArguments.Raster=d,c):d},_convertStretchTypeEnumToIndex:function(l){var d=0;l===m.TYPE_STANDARDDEVIATION?d=3:l===m.TYPE_HISTOGRAMEQUALIZATION?d=4:l===m.TYPE_MINMAX?d=5:l===m.TYPE_PERCENTCLIP?d=6:l===m.TYPE_SIGMOID&&(d=9);return d},_convertStretchTypeIndexToEnum:function(l){var d=m.TYPE_NONE;3===l?d=m.TYPE_STANDARDDEVIATION:4===l?d=m.TYPE_HISTOGRAMEQUALIZATION:5===l?d=m.TYPE_MINMAX:6===l?d=m.TYPE_PERCENTCLIP:
9===l&&(d=m.TYPE_SIGMOID);return d}});q.mixin(b,m);q.setObject("renderer.StretchRenderer",b,h);return b})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,y,q,a,h){var e=b(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(g){if(y.isObject(g)){this._isRFTJson(g)&&(this._isTemplate=
!0,this._templateJson=g);var f=0;this.functionName=g.rasterFunction||g.name;this.functionArguments=y.clone(g.rasterFunctionArguments||g.arguments);y.mixin(this,g);if(g=this.functionArguments)if(g.Raster=this._toRasterFunction(g.Raster),g.Raster2=this._toRasterFunction(g.Raster2),g.DEM=this._toRasterFunction(g.DEM),g.FillRaster=this._toRasterFunction(g.FillRaster),g.Rasters&&g.Rasters.length)for(f=0;f<g.Rasters.length;f++)g.Rasters[f]=this._toRasterFunction(g.Rasters[f])}},_isRFTJson:function(g){return g.name&&
g.arguments&&g.function&&g.hasOwnProperty("functionType")},_toRasterFunction:function(g){return g&&(g.rasterFunction||g.functionName)?new e(g):g},_rfToJson:function(g){g&&"esri.layers.RasterFunction"===g.declaredClass&&(g=g.toJson());return g},toJson:function(){if(this._isTemplate)return this._templateJson;var g=y.clone(this.functionArguments||this.arguments);if(g&&(g.Raster=this._rfToJson(g.Raster),g.Raster2=this._rfToJson(g.Raster2),g.DEM=this._rfToJson(g.DEM),g.FillRaster=this._rfToJson(g.FillRaster),
g.Rasters&&g.Rasters.length)){var f,m=[];for(f=0;f<g.Rasters.length;f++)m.push(this._rfToJson(g.Rasters[f]));g.Rasters=m}return h.filter({rasterFunction:this.functionName,rasterFunctionArguments:g,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(l){if(null!==l&&void 0!==l)return!0})}});y.setObject("layers.RasterFunction",e,a);return e})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),
function(b,y,q,a,h,e,g){function f(u,x,A){if(u){x=x||k;A=A||t;var z=null,E=u.declaredClass,w,D;if((w="string"===typeof u?u:u.name)&&y.some(A,function(r){if(r.name===w)return z=r.id,!0})&&z)return z;"esri.tasks.AlgorithmicColorRamp"===E?y.some(x,function(r){if(l(u.fromColor.toRgb(),r.fromColor)&&l(u.toColor.toRgb(),r.toColor))return z=r.id,!0},this):"esri.tasks.MultipartColorRamp"===E&&y.some(x,function(r){if(u.colorRamps&&r.colorRamps&&u.colorRamps.length===r.colorRamps.length&&(D=u.colorRamps,!y.some(r.colorRamps,
function(v,B){if(!l(D[B].fromColor.toRgb(),v.fromColor)||!l(D[B].toColor.toRgb(),v.toColor))return!0},this))){if(z)return!0;z=r.id}},this);return z}}function m(u){var x=new a,A=u.algorithm;x.fromColor=e.toDojoColor(u.fromColor);x.toColor=e.toDojoColor(u.toColor);A?"esriCIELabAlgorithm"===A?x.algorithm="cie-lab":"esriHSVAlgorithm"===A?x.algorithm="hsv":"esriLabLChAlgorithm"===A&&(x.algorithm="lab-lch"):x.algorithm="hsv";return x}function l(u,x){return u&&x&&u.length&&x.length&&u.length===x.length?
!y.some(u,function(A,z){if(A>x[z]+2||A<x[z]-2)return!0}):!1}function d(u,x,A){u=g.toLAB(u);x=g.toLAB(x);return g.toRGB({l:u.l*(1-A)+A*x.l,a:u.a*(1-A)+A*x.a,b:u.b*(1-A)+A*x.b})}var c={},k=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,
253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",
fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,
214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",
type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,
171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,
10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,
233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],
toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",
colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,
250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,
12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],
toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],
toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,
128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,
245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],t=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},
{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",
id:"cyanLightToBlueDark_predefined"},{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Orange Bright",id:"orangeBright_predefined"},{name:"Orange Light to Dark",
id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},
{id:"prediction_predefined",name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},
{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},
{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},
{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],n=new q({data:t});b.mixin(c,{predefinedColorRamps:k,predefinedColorRampNameMap:t,getColorRampName:function(u){return(u=f(u))?(u=n.query({id:u}),u[0]?u[0].name:null):null},fromJson:function(u){var x=null;if(!u)return x;"multipart"===u.type?(x=new h,x.colorRamps=y.map(u.colorRamps,function(A){return m(A)},this)):"algorithmic"===u.type&&(x=m(u));return x},colorsEqual:l,
getColorRampId:f,convertColorRampToColormap:function(u,x){if(u&&x){var A=u.colorRamps?u.colorRamps.length:1,z=[],E=[],w,D,r,v,B=0,C=0;for(B=0;B<A;B++)z[B]={},z[B].start=C,z[B].end=C+1/A,C=z[B].end;for(B=0;B<x;B++){var F=(B+.5)/x;y.forEach(z,function(G,H){F>=G.start&&F<G.end&&(v=(F-G.start)/(G.end-G.start),1<z.length?(w=g.getDojoColor(u.colorRamps[H].fromColor),D=g.getDojoColor(u.colorRamps[H].toColor)):(w=g.getDojoColor(u.fromColor),D=g.getDojoColor(u.toColor)),r=d(w,D,v),E.push([B,r.r,r.g,r.b]))},
this)}return E}},interpolateLabColor:d});return c})},"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),function(b,y,q,a,h,e){b=b(e,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var g="esriCIELabAlgorithm";break;case "hsv":g="esriHSVAlgorithm";break;case "lab-lch":g=
"esriLabLChAlgorithm"}g={type:"algorithmic",algorithm:g};g.fromColor=h.toJsonColor(this.fromColor);g.toColor=h.toJsonColor(this.toColor);return g}});y.setObject("tasks.AlgorithmicColorRamp",b,a);return b})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.tasks.ColorRamp",type:null});y.setObject("tasks.ColorRamp",b,a);return b})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),
function(b,y,q,a,h,e){b=b(e,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",constructor:function(){this.colorRamps=[]},addColorRamp:function(g){this.colorRamps.push(g)},toJson:function(){return{type:"multipart",colorRamps:q.map(this.colorRamps,function(g){return g.toJson()})}}});y.setObject("tasks.MultipartColorRamp",b,h);return b})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(b,y){var q={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,
.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],matrixProduct:function(h,e){var g=[],f,m;if(h[0].length!==e.length)throw"dimensions do not match";var l=h.length,d=h[0].length,c=0;for(f=0;f<l;f++){for(m=c=0;m<d;m++)c+=h[f][m]*e[m];g.push(c)}return g},rgb2xyz:function(h){h=[h.r/255,h.g/255,h.b/255].map(function(e){return.04045>=e?e/12.92:Math.pow((e+.055)/1.055,2.4)});h=this.matrixProduct(this.COEF_RGB2XYZ,h);return{x:100*h[0],y:100*h[1],
z:100*h[2]}},xyz2rgb:function(h){h=this.matrixProduct(this.COEF_XYZ2RGB,[h.x/100,h.y/100,h.z/100]).map(function(e){return Math.min(1,Math.max(.0031308>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055,0))});return{r:Math.round(255*h[0]),g:Math.round(255*h[1]),b:Math.round(255*h[2])}},xyz2lab:function(h){h=[h.x/95.047,h.y/100,h.z/108.883].map(function(e){return e>Math.pow(6/29,3)?Math.pow(e,1/3):1/3*Math.pow(29/6,2)*e+4/29});return{l:116*h[1]-16,a:500*(h[0]-h[1]),b:200*(h[1]-h[2])}},lab2xyz:function(h){var e=
h.l;h=[(e+16)/116+h.a/500,(e+16)/116,(e+16)/116-h.b/200].map(function(g){return g>6/29?Math.pow(g,3):3*Math.pow(6/29,2)*(g-4/29)});return{x:95.047*h[0],y:100*h[1],z:108.883*h[2]}},lab2lch:function(h){var e=h.l,g=h.a,f=h.b;h=Math.sqrt(g*g+f*f);g=Math.atan2(f,g);g=0<g?g:g+2*Math.PI;return{l:e,c:h,h:g}},lch2lab:function(h){var e=h.c,g=h.h;return{l:h.l,a:e*Math.cos(g),b:e*Math.sin(g)}},rgb2lab:function(h){return this.xyz2lab(this.rgb2xyz(h))},lab2rgb:function(h){return this.xyz2rgb(this.lab2xyz(h))},
rgb2lch:function(h){return this.lab2lch(this.xyz2lab(this.rgb2xyz(h)))},lch2rgb:function(h){return this.xyz2rgb(this.lab2xyz(this.lch2lab(h)))}},a={rgb2hsv:function(h){var e=h.r,g=h.g;h=h.b;var f=Math.max(e,g,h),m=f-Math.min(e,g,h),l;0===m?l=0:f===e?l=(g-h)/m%6:f===g?l=(h-e)/m+2:f===h&&(l=(e-g)/m+4);0>l&&(l+=6);return{h:60*l,s:100*(0===m?0:m/f),v:100/255*f}},hsv2rgb:function(h){var e=(h.h+360)%360/60,g=h.v/100*255;h=h.s/100*g;var f=h*(1-Math.abs(e%2-1));switch(Math.floor(e)){case 0:e={r:h,g:f,b:0};
break;case 1:e={r:f,g:h,b:0};break;case 2:e={r:0,g:h,b:f};break;case 3:e={r:0,g:f,b:h};break;case 4:e={r:f,g:0,b:h};break;case 5:case 6:e={r:h,g:0,b:f};break;default:e={r:0,g:0,b:0}}e.r=Math.round(e.r+g-h);e.g=Math.round(e.g+g-h);e.b=Math.round(e.b+g-h);return e}};return{toRGB:function(h){var e;void 0!==h.r&&void 0!==h.g&&void 0!==h.b?e=h:void 0!==h.l&&void 0!==h.c&&void 0!==h.h?e=q.lch2rgb(h):void 0!==h.l&&void 0!==h.a&&void 0!==h.b?e=q.lab2rgb(h):void 0!==h.x&&void 0!==h.y&&void 0!==h.z?e=q.xyz2rgb(h):
void 0!==h.h&&void 0!==h.s&&void 0!==h.v&&(e=a.hsv2rgb(h));return e},toHSV:function(h){if(void 0!==h.h&&void 0!==h.s&&void 0!==h.v)return h;h=this.toRGB(h);return a.rgb2hsv(h)},toLAB:function(h){return void 0!==h.l&&void 0!==h.a&&void 0!==h.b?h:q.rgb2lab(this.toRGB(h))},toLCH:function(h){return void 0!==h.l&&void 0!==h.c&&void 0!==h.h?h:q.rgb2lch(this.toRGB(h))},toXYZ:function(h){return void 0!==h.x&&void 0!==h.y&&void 0!==h.z?h:q.rgb2xyz(this.toRGB(h))},getDojoColor:function(h){if(h){if(Array.isArray(h))return b.fromArray(h);
if(void 0!==h.r&&void 0!==h.g&&void 0!==h.b)return h}},correctRGBLimits:function(h){var e=[h.r,h.g,h.b];y.forEach(e,function(g,f){0>e[f]?e[f]=0:255<e[f]&&(e[f]=255);e[f]=Math.floor(e[f])});return{r:e[0],g:e[1],b:e[2],a:1}}}})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(b,y,q,a,h,e,g,f){b=b(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",
constructor:function(m){m=m||{};this.hillshadeType=m.hillshadeType||"traditional";this.azimuth=null!=m.azimuth?m.azimuth:315;this.altitude=null!=m.altitude?m.altitude:45;this.zFactor=m.zFactor||1;this.scalingType=m.scalingType||"none";this.pixelSizePower=null!=m.pixelSizePower?m.pixelSizePower:.664;this.pixelSizeFactor=null!=m.pixelSizeFactor?m.pixelSizeFactor:.024;this.removeEdgeEffect=m.removeEdgeEffect||!1;this.colorRamp=f.fromJson(m.colorRamp)},toJson:function(){var m={type:"rasterShadedRelief",
hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return e.fixJson(m)},toRenderingRule:function(m){}});q.setObject("renderer.ShadedReliefRenderer",b,h);return b})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),
function(b,y,q,a,h,e,g,f,m){b=b(f,{declaredClass:"esri.renderer.ColormapRenderer",constructor:function(l){this.colormapInfos=l&&l.colormapInfos},toJson:function(){var l=e.fixJson;var d={type:"rasterColormap",colormapInfos:y.map(this.colormapInfos||[],function(c,k){var t={};c.color&&null!==c.color&&3<=c.color.length&&(t.color=c.color,t.value=c.value||k,t.label=(c.label||k)+"");return l(t)})};d=q.mixin(this.inherited(arguments),d);return l(d)}});q.setObject("renderer.ColormapRenderer",b,h);return b})},
"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(b,y,q,a){b.setObject("renderer.arcadeUtils",a,q);return a})},"esri/arcadeProfiles/labelingProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(b,y,q,a,h,e,g,f){b=new (b(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},
initialize:function(m){var l=[];f.hasGeometryOperations(m)&&l.push(g.enableGeometryOperations());return h(l)},isAsync:function(m){return!1},parse:function(m){return g.createSyntaxTree(m.expression)},compile:function(m){var l=y.clone(this.defaults.context);return m.syntaxTree?g.createFunction(m.syntaxTree,l):null},getEvalOptions:function(m){var l=m.feature;return{context:{vars:{$feature:l&&m.expression.hasVariable("$feature")?e.createFromGraphicLikeObject(l.geometry,l.attributes,m.layer):null},spatialReference:m.spatialReference}}}}));
y.setObject("arcadeProfiles.labelingProfile",b,a);return b})},"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n){var u=m("esri-pbf"),x=y(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,
_result:null,constructor:function(z){this._handleSuccess=q.hitch(this,this._handleSuccess);this._handleError=q.hitch(this,this._handleError);q.mixin(this,z);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var z=new h(this._canceler);this._fetchDfd=z;this._result=null;this._sendRequest();return z.promise},_canceler:function(z){var E=z._pendingRequest;if(!z.isFulfilled()&&E&&!E.isFulfilled()){E.cancel();var w=E.results&&E.results[1]}z._pendingRequest=
null;return w},_sendRequest:function(z){var E=this.query;this.pagination&&(this._startPage=E.resultOffset=null==z?0:z,E.resultRecordCount=this.pageSize);z=this.requestOptions;this._fetchDfd._pendingRequest=l({url:this.url,content:E,handleAs:"pbf"===E.f?"arraybuffer":"json",callbackParamName:"callback",timeout:z&&z.timeout},z);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(z){this.pagination?(z.exceededTransferLimit&&this._sendRequest(this._startPage+
this.pageSize),this._result?this._result.features=this._result.features.concat(z.features):this._result=z,this._fetchDfd.progress(z),z.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(z),this._fetchDfd.resolve(z))},_handleError:function(z){this._fetchDfd.reject(z)}}),A=y(t,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},
constructor:function(z,E){this._handler=q.hitch(this,this._handler);this._relationshipQueryHandler=q.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=q.hitch(this,this._executeForIdsHandler);this._countHandler=q.hitch(this,this._countHandler);this._extentHandler=q.hitch(this,this._extentHandler);this.source=E&&E.source;this.gdbVersion=E&&E.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],
e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(z,E,w,D,r){var v=r.assembly;z=this._encode(q.mixin({},this._url.query,{f:D&&D.format||"json"},
z.toJson(v&&v[0])));var B=this._handler,C=this._errorHandler;this.source&&(D={source:this.source.toJson()},z.layer=e.toJson(D));this.gdbVersion&&(z.gdbVersion=this.gdbVersion);var F="pbf"===z.f;if(F){var G;u||(G="QueryTask.execute: 'pbf' format is not supported in your browser.");if(G)return z=new h,z.addErrback(function(H){C(H,w,r.dfd)}),z.reject(Error(G)),z}G=this.requestOptions;G=l({url:this._url.path+"/query",content:z,callbackParamName:"callback",handleAs:F?"arraybuffer":"json",timeout:G&&G.timeout},
G);z=[G];F&&z.push(A.loadPBFReader());(new g(z)).then(function(H){r.dfd.isFulfilled()||(H=H[0],H[0]?B(H[1],F,E,w,r.dfd):C(H[1],w,r.dfd))});return G},rawExecute:function(z,E,w){E=E||{};z=this._encode(q.mixin({},this._url.query,{f:E.format||"json"},z.toJson(w.assembly&&w.assembly[0])));this.source&&(z.layer=e.toJson({source:this.source.toJson()}));this.gdbVersion&&(z.gdbVersion=this.gdbVersion);return(new x({url:this._url.path+"/query",query:z,requestOptions:this.requestOptions,pagination:E.pagination,
pageSize:E.pageSize})).execute().then(null,null,function(D){w.dfd.progress(D)}).then(q.hitch(this,function(D){this._successHandler([D],"onRawExecuteComplete",null,w.dfd)})).otherwise(q.hitch(this,function(D){this._errorHandler(D,null,w.dfd)}))},executeRelationshipQuery:function(z,E,w){z=this._encode(q.mixin({},this._url.query,{f:"json"},z.toJson()));var D=this._relationshipQueryHandler,r=this._errorHandler;this.gdbVersion&&(z.gdbVersion=this.gdbVersion);var v=new h(d._dfdCanceller),B=this.requestOptions,
C=this._url.path;this.source&&void 0!==this.source.mapLayerId&&null!==this.source.mapLayerId&&C.endsWith("/dynamicLayer")&&(C=C.slice(0,-13),C=C+"/"+this.source.mapLayerId);v._pendingDfd=l({url:C+"/queryRelatedRecords",content:z,callbackParamName:"callback",timeout:B&&B.timeout,load:function(F,G){D(F,G,E,w,v)},error:function(F){r(F,w,v)}},B);return v},executeForIds:function(z,E,w,D){var r=D.assembly;z=this._encode(q.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},z.toJson(r&&r[0])));var v=this._executeForIdsHandler,
B=this._errorHandler;this.source&&(r={source:this.source.toJson()},z.layer=e.toJson(r));this.gdbVersion&&(z.gdbVersion=this.gdbVersion);r=this.requestOptions;return l({url:this._url.path+"/query",content:z,callbackParamName:"callback",timeout:r&&r.timeout,load:function(C,F){v(C,F,E,w,D.dfd)},error:function(C){B(C,w,D.dfd)}},r)},executeForCount:function(z,E,w,D){var r=D.assembly;z=this._encode(q.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},z.toJson(r&&r[0])));var v=this._countHandler,
B=this._errorHandler;this.source&&(r={source:this.source.toJson()},z.layer=e.toJson(r));this.gdbVersion&&(z.gdbVersion=this.gdbVersion);r=this.requestOptions;return l({url:this._url.path+"/query",content:z,callbackParamName:"callback",timeout:r&&r.timeout,load:function(C,F){v(C,F,E,w,D.dfd)},error:function(C){B(C,w,D.dfd)}},r)},executeForExtent:function(z,E,w,D){var r=D.assembly;z=this._encode(q.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},z.toJson(r&&r[0])));var v=this._extentHandler,
B=this._errorHandler;this.source&&(r={source:this.source.toJson()},z.layer=e.toJson(r));this.gdbVersion&&(z.gdbVersion=this.gdbVersion);r=this.requestOptions;return l({url:this._url.path+"/query",content:z,callbackParamName:"callback",timeout:r&&r.timeout,load:function(C,F){v(C,F,E,w,D.dfd)},error:function(C){B(C,w,D.dfd)}},r)},_handler:function(z,E,w,D,r){try{z&&E&&(z=A.pbfDeps.optimizedFeatures.convertToFeatureSet(A.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(z)));var v=new n(z);this._successHandler([v],
"onComplete",w,r)}catch(B){this._errorHandler(B,D,r)}},_relationshipQueryHandler:function(z,E,w,D,r){try{var v=z.geometryType,B=z.spatialReference,C={};a.forEach(z.relatedRecordGroups,function(F){var G={};G.geometryType=v;G.spatialReference=B;G.features=F.relatedRecords;G=new n(G);if(null!=F.objectId)C[F.objectId]=G;else for(var H in F)F.hasOwnProperty(H)&&"relatedRecords"!==H&&(C[F[H]]=G)});this._successHandler([C],"onExecuteRelationshipQueryComplete",w,r)}catch(F){this._errorHandler(F,D,r)}},_executeForIdsHandler:function(z,
E,w,D,r){try{this._successHandler([z.objectIds],"onExecuteForIdsComplete",w,r)}catch(v){this._errorHandler(v,D,r)}},_countHandler:function(z,E,w,D,r){try{var v=z.features,B=z.objectIds;if(B)var C=B.length;else{if(v)throw Error("Unable to perform query. Please check your parameters.");C=z.count}this._successHandler([C],"onExecuteForCountComplete",w,r)}catch(F){this._errorHandler(F,D,r)}},_extentHandler:function(z,E,w,D,r){try{z.extent&&(z.extent=new c(z.extent)),this._successHandler([z],"onExecuteForExtentComplete",
w,r)}catch(v){this._errorHandler(v,D,r)}}});A.loadPBFReader=function(){var z=new h;A.pbfDeps?z.resolve():b(["./support/pbfDeps"],function(E){A.pbfDeps=E;z.isFulfilled()||z.resolve()});return z.promise};k._createWrappers(A);q.setObject("tasks.QueryTask",A,f);return A})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship ./QueryTask ./RelationshipQuery ./StatisticDefinition".split(" "),
function(b,y,q,a,h,e,g,f){var m=b(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=m.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,
resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(l){var d={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},c=l&&l.geometry||this.geometry,k=this.objectIds,t=this.outFields,n=this.outSpatialReference,u=this.groupByFieldsForStatistics,x=this.orderByFields,A=this.outStatistics;l=this.distance;c&&(d.geometry=c,d.geometryType=g.getJsonType(c),d.inSR=c.spatialReference.wkid||a.toJson(c.spatialReference.toJson()));k&&(d.objectIds=k.join(","));t&&(d.outFields=t.join(","));null!=this.returnCentroid&&(d.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(d.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(d.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(d.maxRecordCountFactor=this.maxRecordCountFactor);u&&(d.groupByFieldsForStatistics=u.join(","));x&&(d.orderByFields=x.join(","));if(A){var z=[];q.forEach(A,function(E){z.push(E.toJson())});d.outStatistics=a.toJson(z)}n?d.outSR=n.wkid||a.toJson(n.toJson()):c&&(d.outSR=c.spatialReference.wkid||a.toJson(c.spatialReference.toJson()));c=
this.timeExtent;d.time=c?c.toJson().join(","):null;(c=this.relationParam)&&this.spatialRelationship===m.SPATIAL_REL_RELATION&&(d.relationParam=c);l&&(d.distance=this.distance,this.hasOwnProperty("units")?d.units=this._units[this.units]||this._units.meters:d.units=this._units.meters);this.hasOwnProperty("start")&&(d.resultOffset=this.start,d.resultRecordCount=10,""===d.where&&(d.where="1\x3d1"));this.hasOwnProperty("num")&&(d.resultRecordCount=this.num);d.resultType=this.resultType;null!=this.cacheHint&&
(d.cacheHint=this.cacheHint);d.pixelSize=this.pixelSize?a.toJson(this.pixelSize.toJson()):null;d.multipatchOption=this.multipatchOption;this.quantizationParameters&&(d.quantizationParameters=a.toJson(this.quantizationParameters));d._ts=this._ts;return d}});y.mixin(m,f);y.setObject("tasks.Query",m,e);return m})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(b,y,q){y={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",
SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};b.setObject("tasks._SpatialRelationship",y,q);return y})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json",
"dojo/has","../kernel"],function(b,y,q,a,h){b=b(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var e={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=this.objectIds,f=this.outFields,m=this.outSpatialReference,
l=this.orderByFields;g&&(e.objectIds=g.join(","));f&&(e.outFields=f.join(","));m&&(e.outSR=m.wkid||q.toJson(m.toJson()));l&&(e.orderByFields=l.join(","));e._ts=this._ts;return e}});y.setObject("tasks.RelationshipQuery",b,h);return b})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,
outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});y.setObject("tasks.StatisticDefinition",b,a);return b})},"esri/layers/GraphicsLayer":function(){define("require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B,C,F,G,H,J,I){var K=-1!==c.renderer.toLowerCase().indexOf("svg"),R=-1!==c.renderer.toLowerCase().indexOf("canvas"),W=R?"canvas-2d":c.renderer,P=9>E("ie");g=10===E("ie");var S=void 0===E("ie")&&7==E("trident"),L=g||S,aa=E("esri-touch"),ba=!!E("chrome"),O=u.isWebGLEnabled(),V=K&&E("esri-will-change"),X=O||R;u=y(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(N,Y){var ia=this._connects=[];this._map=N;this._useWillChange=
this._useGlobalTransform="css-transforms"===N.navigationMode&&V;if(X){var oa=m.create("div",{style:{position:"absolute",overflow:"visible"}},Y);this._surface={getEventSource:function(){return oa}};R&&(ia.push(a.connect(oa,"onmousedown",this,this._canvasDownHandler)),ia.push(a.connect(oa,"onmouseup",this,this._canvasUpHandler)),ia.push(a.connect(oa,"onclick",this,this._canvasClickHandler)));O&&(this._webglSurface=new x({map:N,node:oa}))}else oa=(this._surface=c.createSurface(Y,N.width,N.height)).getEventSource(),
this._useWillChange&&l.set(oa,"will-change","transform"),l.set(oa=P?oa.parentNode:oa,{overflow:"visible",position:"absolute"});ia.push(a.connect(N,"onResize",this,"_onResizeHandler"));this._useGlobalTransform&&(ia.push(a.connect(N,"onPan",this,"_onPanHandler")),ia.push(a.connect(N,"onPanEnd",this,"_onPanEndHandler")),ia.push(a.connect(N,"onExtentChange",this,"_onExtentChangeHandler")));return oa},_reorderLayer:function(N,Y,ia){Y=Y.getEventSource();X&&"svg"===N.surfaceType&&(Y=Y.parentNode);m.place(Y,
this._surface.getEventSource(),ia)},_onPanHandler:function(N,Y){var ia=this._map.__visibleRect;N=ia.x+Y.x;Y=ia.y+Y.y;this._panDx=N;this._panDy=Y;X||l.set(this._surface.getEventSource(),A._css.names.transform,A._css.translate(N,Y))},_onPanEndHandler:function(N,Y){Y=this._map.__visibleRect;N=Y.x;Y=Y.y;this._panDx=N;this._panDy=Y;X||l.set(this._surface.getEventSource(),A._css.names.transform,A._css.translate(N,Y))},_onExtentChangeHandler:function(N,Y,ia,oa){ia&&(this._panDy=this._panDx=0,X||l.set(this._surface.getEventSource(),
A._css.names.transform,A._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(N,Y,ia){N=this._surface.getEventSource();var oa=this._map,sa;P&&l.set(N=N.parentNode,{width:Y+"px",height:ia+"px",clip:"rect(0px "+Y+"px "+ia+"px 0px)"});f.set(N,"width",Y);f.set(N,"height",ia);this._surface.declaredClass||e.forEach(N.childNodes,function(Ba){f.set(Ba,"width",Y);f.set(Ba,"height",ia)});oa.loaded&&(oa.graphics.suspended||(oa.graphics._resized=
!0),e.forEach(oa.graphicsLayerIds,function(Ba){sa=oa.getLayer(Ba);sa.suspended||(sa._resized=!0,sa._childLayer&&(sa._childLayer._resized=!0));sa._updateSVGFilters(null,null,Y,ia)}),oa.graphics._updateSVGFilters(null,null,Y,ia),oa._labels&&oa._labels._updateSVGFilters(null,null,Y,ia))},_cleanUp:function(){e.forEach(this._connects,a.disconnect,a);this._map=this._surface=null},_processEvent:function(N){var Y=this._map;N.screenPoint=new F(N.pageX-Y.position.x,N.pageY-Y.position.y);N.mapPoint=Y.toMap(N.screenPoint)},
_canvasDownHandler:function(N){this._processEvent(N);this._downPt=N.screenPoint.x+","+N.screenPoint.y},_canvasUpHandler:function(N){this._processEvent(N);this._upPt=N.screenPoint.x+","+N.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(N,Y,ia,oa){if(!N.visible||!Y)return!1;var sa=Y.getTransformedBoundingBox();if(sa){var Ba=new G(sa[0].x,sa[0].y,sa[2].x,sa[2].y);delete Ba.spatialReference;return aa?Ba.intersects(ia):Ba.contains(oa)}return e.some(Y.children||[],function(Da){sa=Da.getTransformedBoundingBox();
Ba=new G(sa[0].x,sa[0].y,sa[2].x,sa[2].y);delete Ba.spatialReference;return aa?Ba.intersects(ia):Ba.contains(oa)})},_canvasClickHandler:function(N){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(N);var Y=this._map,ia=e.map(Y.graphicsLayerIds,function(la){return Y.getLayer(la)});ia.push(Y.graphics);ia.reverse();ia=e.filter(ia,function(la){return la.loaded&&!la.hasWebGLSurface()&&la._mouseEvents&&!la.suspended&&(!z.isDefined(la.opacity)||0<la.opacity)});var oa=N.screenPoint,
sa=this._tolerance,Ba=oa.x-sa,Da=oa.y+sa,pa=oa.x+sa;sa=oa.y-sa;var ra=new G(Ba,sa,pa,Da);Ba=Y.toMap(new F(Ba,Da));pa=Y.toMap(new F(pa,sa));Da=Ba.spatialReference._getInfo();var ya=new G(G.prototype._normalizeX(Ba.x,Da).x,Ba.y,G.prototype._normalizeX(pa.x,Da).x,pa.y,Ba.spatialReference),wa;delete ra.spatialReference;e.some(ia,function(la){la=e.filter(la.graphics,function(da){return this._isPrimaryMatch(da,da.getDojoShape(),ra,oa)||!(!da._bgShape||!this._isPrimaryMatch(da,da._bgShape,ra,oa))},this);
la.reverse();if(0<la.length){var Aa;e.some(la,function(da){return da.geometry&&ya.intersects(da.geometry)?(Aa=da,!0):!1});if(Aa)return wa=Aa,!0}return!1},this);wa&&(ia=wa.getLayer())&&(N.graphic=wa,ia.onClick(N))}}});n=y(n,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:W,webglEnabled:O,renderer:null,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},_suspendGraphics:!1,constructor:function(N,Y){N=N||{};if(h.isString(N)||
h.isObject(N)&&(N.layerDefinition||N.query))N=Y;this._params=h.mixin({displayOnPan:!0,drawMode:!0,styling:!0},N);Y=this._params.dataAttributes;"string"===typeof Y&&(Y=[Y]);this.styling=K?this._params.styling:!0;this.dataAttributes=Y;this.infoTemplate=N&&N.infoTemplate;this.graphics=[];this._draw=h.hitch(this,this._draw);this._refresh=h.hitch(this,this._refresh);this._acquireSVGMarker=h.hitch(this,this._acquireSVGMarker);this._evalSurfaceType=h.hitch(this,this._evalSurfaceType);this._setSurfaceType=
h.hitch(this,this._setSurfaceType);this.setWebGLEnabled(null!=this._params.webglEnabled?this._params.webglEnabled:this.webglEnabled);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(N){this._params.drawMode=N},suspendGraphics:function(N){this._suspendGraphics=N;e.forEach(this.graphics,function(Y){Y._suspended=N})},setWebGLEnabled:function(N){var Y=this.webglEnabled;this.webglEnabled=(N||!1)&&O;Y!==this.webglEnabled&&(this._evalSurfaceType(),
this.onWebGLEnabledChange())},hasWebGLSurface:function(){return"webgl"===this.surfaceType},_getSurfaceType:function(N){return N&&"webgl"===N.surfaceType?"webgl":W},_evalSurfaceType:function(N){O&&(N?this._setSurfaceType():null==this._evalSurfaceTimerHandle&&(this._evalSurfaceTimerHandle=setTimeout(this._setSurfaceType,0)))},_hasPendingSurfaceEval:function(){return!!this._evalSurfaceTimerHandle},_setSurfaceType:function(){clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=null;
var N=this._canUseWebGLSurface()?"webgl":W;this.surfaceType!==N?(this.surfaceType=N,this._handleSurfaceChange(),this.onSurfaceChange()):this._pendingRedraw&&this._redraw()},_handleSurfaceChange:function(){this._cancelWebGLDepsLoad();this._webglDepsPromise=this._prepareToAttach(this._map);this._webglDepsPromise.always(h.hitch(this,function(N){this._webglDepsPromise=null;N&&"cancel"===N.dojoType||this._evalSurface()}))},_cancelWebGLDepsLoad:function(){this._webglDepsPromise&&!this._webglDepsPromise.isFulfilled()&&
this._webglDepsPromise.cancel();this._webglDepsPromise=null},_evalSurface:function(){var N=this._map,Y=this._div;N&&Y&&this._getSurfaceType(Y)!==this.surfaceType&&(N._detachGraphicsLayer(this),N._attachGraphicsLayer(this))},_canUseWebGLSurface:function(N){N=N||this._map;return this.webglEnabled&&(!N||N.webglEnabled&&(N.ownsWebGLContext(this)||N.isWebGLContextAvailable()))&&this._params.drawMode&&this._isWebGLCompatible()},_isWebGLCompatible:function(){return!1},_prepareToAttach:function(N){var Y=
new q;!this.webglDeps&&this._canUseWebGLSurface(N)?b(["./support/webglDeps"],h.hitch(this,function(ia){this.webglDeps=ia;Y.isFulfilled()||Y.resolve()})):Y.resolve();return Y.promise},_setMap:function(N,Y){this.inherited(arguments);this._map=N;this._evalSurfaceType(!0);this._webglChangeMapHandle=N.on("webgl-enabled-change",h.hitch(this,function(){this._evalSurfaceType()}));this._wrap=N.wrapAround180;this._srInfo=N.spatialReference._getInfo();this._svgFilters={};this._lineMarkers={};if(this.hasWebGLSurface())N.acquireWebGLContext(this),
this._div=N._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer,N.width,N.height,this);else{if("svg"===this.surfaceType)if(X){Y=c.createSurface(Y.getEventSource(),N.width,N.height);var ia=Y.getEventSource();l.set(ia,{position:"absolute",overflow:"visible",pointerEvents:"none"});N._gc._useWillChange&&l.set(ia,"will-change","transform");this._div=Y.createGroup();l.set(this._div.getEventSource(),"pointer-events","auto")}else this._div=Y.createGroup();else Y=c.createSurface(Y.getEventSource(),
N.width,N.height),l.set(Y.rawNode,"position","absolute"),this._div=Y.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=h.hitch(this,this._canvasRender);this._bgGroup=this._div.createGroup()}this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(N,Y){N.releaseWebGLContext(this);"webgl"===this._div.surfaceType?N._gc._webglSurface.destroyRenderer(this._div):(e.forEach(this.graphics,function(ia){ia._shape=null}),
"svg"===this.surfaceType?X?(Y=this._div.parent,this._div.clear(),Y.remove(this._div),m.destroy(this._div.getEventSource()),m.destroy(Y.getEventSource())):(this._div.clear(),Y.remove(this._div),m.destroy(this._div.getEventSource())):(Y=this._div.getParent(),Y._parent={},m.destroy(Y.rawNode),Y.destroy()));this._map=this._div=this._svgFilters=this._lineMarkers=null;this._pendingRedraw=!1;clearTimeout(this._wakeTimer);this._wakeTimer=null;clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;this._webglChangeMapHandle&&this._webglChangeMapHandle.remove();this._cancelWebGLDepsLoad();this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var N=this.opacity;z.isDefined(N)&&1>N&&this.setOpacity(N,!0)},_onZoomStartHandler:function(){this.hasWebGLSurface()||D.hide(this._div.getEventSource())},_onExtentChangeHandler:function(N,Y,ia,oa){clearTimeout(this._wakeTimer);this._wakeTimer=null;ia?(N=this._map.__visibleRect,Y=this._div,this._evalSDRenderer(),this._refresh(!0),
this._params._child||this._updateTransform(Y,N.x,N.y,!0),this._renderProto&&Y.surface.pendingRender?this._dirty=!0:this.suspended||D.show(Y.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var N=this._div;this._dirty&&(delete this._dirty,this.suspended||D.show(N.getEventSource()));return this._renderProto.apply(N,arguments)},_refresh:function(N){if(!this.hasWebGLSurface()){var Y=this.graphics,ia=Y.length,oa,
sa=this._draw;for(oa=0;oa<ia;oa++)sa(Y[oa],N)}},refresh:function(){this._refresh(!0)},_redraw:function(){this._pendingRedraw=!1;this.hasWebGLSurface()?this._div&&this._div.redraw():this._refresh(!0)},redraw:function(){this._hasPendingSurfaceEval()?this._pendingRedraw=!0:this._redraw()},hasLocalNavigationTransform:function(){return!(this._map&&this._map._gc._useGlobalTransform)},getNavigationTransform:function(){var N={dx:0,dy:0};this._map&&(this.hasLocalNavigationTransform()?this._div&&!this.hasWebGLSurface()&&
(N=this._div.getTransform()):N=this._map._gc._getTransform());return N},_onPanHandler:function(N,Y){this._panDx=Y.x;this._panDy=Y.y;N=this._map.__visibleRect;this._updateTransform(this._div,N.x+Y.x,N.y+Y.y);S&&this._updateSVGMarkers()},_onPanEndUpdateHandler:function(N,Y){N=this._map.__visibleRect;this._params._child||Y.x===this._panDx&&Y.y===this._panDy?(this._updateSVGFilters(-N.x,-N.y),this._updateSVGMarkers()):this._updateTransform(this._div,N.x,N.y,!0);this._refresh(!1);if(this.graphics.length)this.onUpdate()},
_onPanStartHandler:function(){D.hide(this._div.getEventSource())},_onPanEndHandler:function(){var N=this._map.__visibleRect,Y=this._div;this._updateTransform(Y,N.x,N.y,!0);this._refresh(!1);this._renderProto&&Y.surface.pendingRender?this._dirty=!0:D.show(Y.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(N,Y,ia,oa){this.hasWebGLSurface()||(this.hasLocalNavigationTransform()?N.setTransform(k.translate({x:Y,y:ia})):X&&l.set(this._div.parent.getEventSource(),A._css.names.transform,
A._css.translate(Y,ia)),oa&&(this._updateSVGFilters(-Y,-ia),this._updateSVGMarkers()))},onSuspend:function(){this.inherited(arguments);D.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(N){this.inherited(arguments);N.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(h.hitch(this,function(){this.suspended||this._map.__zooming||this._onExtentChangeHandler(null,
null,!0)}),0)},_enableDrawConnectors:function(){var N=this._map,Y=a.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=Y(N,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=Y(N,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=Y(N,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=Y(N,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=Y(N,"onZoomStart",this,"_onZoomStartHandler");
this._onExtentChangeHandler_connect=Y(N,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var N=a.disconnect;N(this._onExtentChangeHandler_connect);N(this._onZoomStartHandler_connect);N(this._onPanHandler_connect);N(this._onPanStartHandler_connect);N(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(N){var Y=
N.geometry;if(!Y)N._extent=null;else if(!(N._extent=Y.getExtent())){if("esri.geometry.Point"===Y.declaredClass){var ia=Y.x;var oa=Y.y}else if("esri.geometry.Multipoint"===Y.declaredClass)ia=Y.points[0][0],oa=Y.points[0][1];else{N._extent=null;return}N._extent=new G(ia,oa,ia,oa,Y.spatialReference)}},_intersects:function(N,Y,ia){var oa=N.spatialReference,sa=Y.spatialReference,Ba=oa&&sa&&!oa.equals(sa)&&oa._canProject(sa)&&4326===sa.wkid;if(this._wrap&&!ia){ia=[];oa=N._getFrameWidth();var Da=this._srInfo,
pa=N._clip?N._getAvailExtent():N.extent,ra,ya=[];var wa=Y._partwise;Ba&&(pa=N.geographicExtent,Da=sa._getInfo());N=pa._getParts(Da);if(wa&&wa.length)for(Y=[],sa=0,Ba=wa.length;sa<Ba;sa++)Y=Y.concat(wa[sa]._getParts(Da));else Y=Y._getParts(Da);sa=0;for(Ba=Y.length;sa<Ba;sa++){var la=Y[sa];Da=0;for(pa=N.length;Da<pa;Da++){var Aa=N[Da];if(Aa.extent.intersects(la.extent))for(wa=0,ra=la.frameIds.length;wa<ra;wa++)ia.push((Aa.frameIds[0]-la.frameIds[wa])*oa)}}sa=0;for(Ba=ia.length;sa<Ba;sa++)wa=ia[sa],
e.indexOf(ia,wa)===sa&&ya.push(wa);return ya.length?ya:null}return(Ba?N.geographicExtent:N.extent).intersects(Y)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(N,Y){if(!this.hasWebGLSurface()&&this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var ia=N._extent,oa,sa,Ba=!K||this.styling,Da=K&&this.dataAttributes,pa=N.getDojoShape(),ra;if(!N._suspended&&N.visible&&ia&&(oa=this._intersects(this._map,
ia,N.geometry._originOnly))&&(sa=Ba?this._getSymbol(N):this._defaultMarker)){if(N._offsets&&N._offsets.join(",")===oa.join(",")?ra=!0:N._offsets=oa,!pa||Y||!ra){var ya=N.geometry.type;Y={graphic:N};var wa=N._bgShape,la=Ba&&!N.symbol?this._getRenderer(N):null,Aa=la&&la.backgroundFillSymbol;if("point"===ya)this._isInvalidShape(sa,pa)&&this._removeShape(N),N._shape=this._drawPoint(this._div,N.geometry,sa,N.getDojoShape(),oa,la,N),Ba&&this._symbolizePoint(N.getDojoShape(),sa,la,N);else if("multipoint"===
ya)this._drawMarkers(N,sa,oa,la),Ba&&this._symbolizeMarkers(N,sa,la);else{var da;ya=sa;var fa;Ba&&(ya=(da="simplemarkersymbol"===sa.type||"picturemarkersymbol"===sa.type||"textsymbol"===sa.type?sa:null)?Aa:sa);if(Ba&&ya&&-1<ya.type.indexOf("fillsymbol")){var Q=this._bgGroup;var xa=!(!Q||!da)}wa&&!xa&&this._removeBgShape(N);if(ya){!xa&&(this._isInvalidShape(ya,N._shape)||N._shape&&N._shape._isCentroidMarker)&&this._removeShape(N,!1);if(fa=this._drawShape(N,oa,Q||this._div,xa?wa:N.getDojoShape()))fa._isCentroidMarker=
!1;Ba&&this._symbolizeShape(fa,ya,la,ya===Aa,N);N[xa?"_bgShape":"_shape"]=fa}if(da){(this._isInvalidShape(da,N._shape)||N._shape&&!N._shape._isCentroidMarker)&&this._removeShape(N,!1);var Fa=N.geometry.getCentroid();if(fa=Fa&&this._drawPoint(this._div,Fa,da,N._shape,oa,la,N))fa._isCentroidMarker=!0,this._symbolizePoint(fa,da,la,N);N._shape=fa}}R||(N._bgShape&&this._initNode(N,N._bgShape,N._bgShape!==wa,Y,Da),N._shape&&this._initNode(N,N._shape,N._shape!==pa,Y,Da));N._applyDataAttrs();Y.node=N.getNode();
this.onGraphicDraw(Y)}}else pa&&this._removeShape(N)}catch(ca){this._errorHandler(ca,N)}},_initNode:function(N,Y,ia,oa,sa){if(Y=Y&&Y.getNode())Y.e_graphic=N,this._addDataAttrs(N,sa,Y),ia&&(oa.node=Y,this.onGraphicNodeAdd(oa))},_removeShape:function(N,Y,ia){var oa=N.getDojoShape(),sa=oa&&oa.getNode();oa&&!ia&&(oa.removeShape(),oa.destroy());N._shape=N._offsets=null;!1!==Y&&this._removeBgShape(N,ia);if(sa&&(sa.e_graphic=null,!R))this.onGraphicNodeRemove({graphic:N,node:sa})},_removeBgShape:function(N,
Y){var ia=N._bgShape,oa=ia&&ia.getNode();ia&&!Y&&(ia.removeShape(),ia.destroy());N._bgShape=null;if(oa&&(oa.e_graphic=null,!R))this.onGraphicNodeRemove({graphic:N,node:oa})},_addDataAttrs:function(N,Y,ia){var oa=N.attributes,sa,Ba=Y?Y.length:0,Da=this._getRenderer(N);if(ia&&oa){for(sa=0;sa<Ba;sa++)(ia=Y[sa])&&N.attr("data-"+ia,oa[ia]);!this.styling&&Da&&(Da.getBreakIndex?(Y=Da.getBreakIndex(N),N.attr("data-class-break",-1!==Y?Y:null)):Da.getUniqueValueInfo&&(Y=Da.getUniqueValueInfo(N),N.attr("data-unique-value",
Y?Y.value:null)))}},_drawShape:function(N,Y,ia,oa){N=N.geometry;var sa=N.type,Ba=this._map,Da=Ba.extent,pa=Ba.width,ra=Ba.height;Ba=Ba.__visibleRect;var ya=[],wa;var la="extent"===sa;if("rect"===sa||la)ya={x:0,y:0,spatialReference:N.spatialReference},ya.x=la?N.xmin:N.x,ya.y=la?N.ymax:N.y,sa=J.toScreenPoint(Da,pa,ra,ya),ya.x=la?N.xmax:N.x+N.width,ya.y=la?N.ymin:N.y+N.height,N=J.toScreenPoint(Da,pa,ra,ya),Y={x:sa.x-Ba.x+Y[0],y:sa.y-Ba.y,width:Math.abs(N.x-sa.x),height:Math.abs(N.y-sa.y)},0===Y.width&&
(Y.width=1),0===Y.height&&(Y.height=1),oa=this._drawRect(ia,oa,Y);else if("polyline"===sa||"polygon"===sa){la=0;for(wa=Y.length;la<wa;la++)ya=ya.concat(J._toScreenPath(Da,pa,ra,N,-Ba.x+Y[la],-Ba.y));oa=this._drawPath(ia,oa,ya);this._rendererLimits&&("polyline"===sa?this._clipPolyline(oa,N):this._clipPolygon(oa,N))}return oa},_drawRect:function(N,Y,ia){return Y?Y.setShape(ia):N.createRect(ia)},_drawImage:function(N,Y,ia){return Y?Y.setShape(ia):N.createImage(ia)},_drawCircle:function(N,Y,ia){return Y?
Y.setShape(ia):N.createCircle(ia)},_drawPath:function(){return P?function(N,Y,ia,oa){ia=oa?ia:ia.join(" ");if(Y)return Y.setShape(ia);Y=N.createObject(oa?c.Path:c.EsriPath,ia);N._overrideSize(Y.getEventSource());return Y}:function(N,Y,ia,oa){ia=oa?ia:ia.join(" ");return Y?Y.setShape(ia):N.createPath(ia)}}(),_drawText:function(N,Y,ia){return Y?Y.setShape(ia):N.createText(ia)},_evalSDRenderer:function(N){var Y=this._map,ia=this.renderer,oa,sa=this._rndForScale;Y&&Y.loaded&&ia&&ia.getRendererInfo&&(oa=
"zoom"===ia.rangeType?ia.getRendererInfoByZoom(Y.getZoom()):ia.getRendererInfoByScale(Y.getScale()));this._rndForScale=oa&&oa.renderer;N||this._rndForScale==sa||this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(N){var Y=this._rndForScale||this.renderer;N&&Y&&Y.getObservationRenderer&&(Y=Y.getObservationRenderer(N));return Y},_getSymbol:function(N){var Y=this._getRenderer();return N.symbol||Y&&Y.getSymbol(N)},_getVariable:function(N,Y,ia){if(N)var oa=(N=N.getVisualVariablesForType(Y,
ia))&&N[0];return oa},_applyOpacity:function(N,Y,ia,oa){Y=Y.getOpacity(oa,{opacityInfo:ia});null!=Y&&(N=new w(N),N.a=Y);return N},_symbolizeShape:function(N,Y,ia,oa,sa){var Ba=Y.getStroke(),Da=Y.getFill(),pa=Y.type,ra=-1!==pa.indexOf("linesymbol"),ya=-1!==pa.indexOf("fillsymbol")?null:this._getVariable(ia,"sizeInfo",!1),wa=this._getVariable(ia,"colorInfo",!1),la=this._getVariable(ia,"opacityInfo",!1),Aa=ra?"none"!==Y.style:Y.outline&&"none"!==Y.outline.style,da=ra?null:this._getVariable(ia,"sizeInfo",
"outline");ya=(ya=oa?da:da||ya)?ia.getSize(sa,{sizeInfo:ya,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;oa&&(wa=la=null);if((wa||la)&&"picturefillsymbol"!==pa)if(ra){var fa=Ba&&Ba.color;wa&&(fa=ia.getColor(sa,{colorInfo:wa})||fa);fa&&la&&(fa=this._applyOpacity(fa,ia,la,sa))}else if(Da&&Da.toCss){var Q=Da;wa&&(Q=ia.getColor(sa,{colorInfo:wa})||Q);Q&&la&&(Q=this._applyOpacity(Q,ia,la,sa))}N.setStroke(!Aa||null==ya&&!fa?Ba:h.mixin({},Ba,null!=ya?{width:ya}:null,fa&&
{color:fa})).setFill(Q||Da);ra&&B.applyLineMarker(N,Y,fa,this._acquireSVGMarker)},_smsToPath:function(){return P?function(N,Y,ia,oa,sa,Ba,Da,pa,ra){switch(Y){case N.STYLE_SQUARE:return["M",sa+","+Da,"L",Ba+","+Da,Ba+","+pa,sa+","+pa,"X","E"];case N.STYLE_CROSS:return["M",ia+","+Da,"L",ia+","+pa,"M",sa+","+oa,"L",Ba+","+oa,"E"];case N.STYLE_X:return["M",sa+","+Da,"L",Ba+","+pa,"M",sa+","+pa,"L",Ba+","+Da,"E"];case N.STYLE_DIAMOND:return["M",ia+","+Da,"L",Ba+","+oa,ia+","+pa,sa+","+oa,"X","E"];case N.STYLE_TARGET:return["M",
sa+","+Da,"L",Ba+","+Da,Ba+","+pa,sa+","+pa,sa+","+Da,"M",sa-ra+","+oa,"L",sa+","+oa,"M",ia+","+(Da-ra),"L",ia+","+Da,"M",Ba+ra+","+oa,"L",Ba+","+oa,"M",ia+","+(pa+ra),"L",ia+","+pa,"E"]}}:function(N,Y,ia,oa,sa,Ba,Da,pa,ra){switch(Y){case N.STYLE_SQUARE:return["M",sa+","+Da,Ba+","+Da,Ba+","+pa,sa+","+pa,"Z"];case N.STYLE_TRIANGLE:return["M",ia+","+Da,Ba+","+pa,sa+","+pa,"Z"];case N.STYLE_CROSS:return["M",ia+","+Da,ia+","+pa,"M",sa+","+oa,Ba+","+oa];case N.STYLE_X:return["M",sa+","+Da,Ba+","+pa,"M",
sa+","+pa,Ba+","+Da];case N.STYLE_DIAMOND:return["M",ia+","+Da,Ba+","+oa,ia+","+pa,sa+","+oa,"Z"];case N.STYLE_TARGET:return N=["M",sa+","+Da,Ba+","+Da,Ba+","+pa,sa+","+pa,sa+","+Da],ra&&N.push("M",sa-ra+","+oa,sa+","+oa,"M",ia+","+(Da-ra),ia+","+Da,"M",Ba+ra+","+oa,Ba+","+oa,"M",ia+","+(pa+ra),ia+","+pa),N}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",
textsymbol:"text"},_isInvalidShape:function(N,Y){Y=Y&&Y.shape&&Y.shape.type;var ia=N&&N.type;N=N&&N.style;"rect"===Y&&(Y="path");ia&&(N=this._typeMaps[ia]||N);this._pathStyles[N]&&(N="path");return"shieldlabelsymbol"===ia?!0:!(!Y||!N||Y===N)},_reArialFont:/\s*(^|,)\s*arial\s*(,|$)\s*/i,_fallbackFont:"Arial",_drawPoint:function(N,Y,ia,oa,sa,Ba,Da){var pa=ia.type,ra=this._map,ya=ra.__visibleRect,wa=J.toScreenPoint(ra.extent,ra.width,ra.height,Y).offset(-ya.x+sa[0],-ya.y);ya=wa.x;var la=wa.y;Y=[];var Aa=
this._getVariable(Ba,"rotationInfo",!1);Aa=Aa?Ba.getRotationAngle(Da,{rotationInfo:Aa}):null;var da=this._getVariable(Ba,"sizeInfo",!1);ra=null!=Da.size?Da.size:da&&Ba.getSize(Da,{sizeInfo:da,shape:ia.style,resolution:ra.getResolutionInMeters(),scale:ra.getScale()});Aa&&Y.push(k.rotategAt(Aa,wa));if(0!==ia.xoffset||0!==ia.yoffset){var fa=k.translate(ia.xoffset,-ia.yoffset);Y.push(fa)}0!==ia.angle&&Y.push(k.rotategAt(ia.angle,wa));if("simplemarkersymbol"===pa){var Q=ia.style;Ba=Math.round;null!=ra?
fa&&(null!=fa.dx&&(fa.dx=fa.dx/ia.size*ra),null!=fa.dy&&(fa.dy=fa.dy/ia.size*ra)):ra=ia.size;switch(Q){case v.STYLE_SQUARE:case v.STYLE_TRIANGLE:case v.STYLE_CROSS:case v.STYLE_X:case v.STYLE_DIAMOND:ia=isNaN(ra)?16:ra/2;Q=this._drawPath(N,oa,this._smsToPath(v,Q,ya,la,Ba(ya-ia),Ba(ya+ia),Ba(la-ia),Ba(la+ia)));break;case v.STYLE_TARGET:Da=ia._targetWidth/2;fa=ia._targetHeight/2;Q=this._drawPath(N,oa,this._smsToPath(v,Q,ya,la,Ba(ya-Da),Ba(ya+Da),Ba(la-fa),Ba(la+fa),ia._spikeSize));break;case v.STYLE_PATH:Q=
this._drawPath(N,oa,ia.path,!0);ia=Q.getBoundingBox();N=this._getScaleMatrix(ia,ra);1===N.xx&&1===N.yy||Y.push(k.scaleAt(N.xx,N.yy,wa));Y.push(k.translate(-(ia.x+ia.width/2)+ya,-(ia.y+ia.height/2)+la));break;default:ia=isNaN(ra)?16:ra/2,Q=this._drawCircle(N,oa,{cx:ya,cy:la,r:ia})}}else if("shieldlabelsymbol"===pa)Q=ia.width,wa=ia.height,oa=N.createGroup(),Q=N.createImage({x:ya-Q/2,y:la-wa/2,width:Q,height:wa,src:ia.url}),oa.add(Q),null!=ia.font&&(la+=.2*ia.getHeight(),N=N.createText({type:"text",
text:ia.text,x:ya,y:la,align:"middle",decoration:ia.decoration,rotated:ia.rotated,kerning:ia.kerning}),N.setFont(ia.font),N.setFill(ia.color),oa.add(N)),Q=oa;else if("picturemarkersymbol"===pa){if(null==ra?(Q=ia.width,wa=ia.height):(wa=ra,Q=ia.width/ia.height*wa,fa&&(null!=fa.dx&&(fa.dx=fa.dx/ia.width*Q),null!=fa.dy&&(fa.dy=fa.dy/ia.height*wa))),Q=this._drawImage(N,oa,{x:ya-Q/2,y:la-wa/2,width:Q,height:wa,src:ia.url}),K&&(N=Q.getNode()))ia=(ia=this._getVariable(Ba,"opacityInfo",!1))?Ba.getOpacity(Da,
{opacityInfo:ia}):null,null!=ia?N.setAttribute("opacity",ia):N.setAttribute("opacity",1)}else if("textsymbol"===pa){if(Ba=ia.font){Q=null!=ra;Da=Ba.family&&!this._reArialFont.test(Ba.family);if(Q||Da||R)Ba=new Ba.constructor(Ba.toJson());Q&&Ba.setSize(ra);R&&(Ba.size+="px");Da&&Ba.setFamily(Ba.family+","+this._fallbackFont)}Q=this._drawText(N,oa,{type:"text",text:ia.text,x:ya,y:la,align:ia.getSVGAlign(),decoration:ia.decoration||Ba&&Ba.decoration,rotated:ia.rotated,kerning:ia.kerning});Ba&&Q.setFont(Ba);
K&&(N=Q.getNode(),ya=ia.getSVGBaseline(),la=ia.getSVGBaselineShift(),N&&(N.setAttribute("dominant-baseline",ya),la&&N.setAttribute("baseline-shift",la),this._applyHalo(Q,ia.haloColor,ia.haloSize)))}Q.setTransform(k.multiply(Y));Q._wrapOffsets=sa;return Q},_acquireSVGMarker:function(N,Y,ia,oa){N=this._getSVGMarkerId(Y,oa);var sa=this._getSVGMarker(N);sa||(sa=B.createSVGMarker(Y,N,ia,oa),this._div.getParent().defNode.appendChild(sa),this._lineMarkers[N]=sa);return sa},_getSVGMarkerId:function(N,Y){return"marker_"+
this._map.id+"_"+N.r+"_"+N.g+"_"+N.b+"_"+Y},_getSVGMarker:function(N){return this._lineMarkers[N]},_updateSVGMarkers:function(){if(K&&L){var N=this._lineMarkers,Y;for(Y in N){var ia=N[Y];ia.setAttribute("id",Y+"_temp");ia.setAttribute("id",Y)}}},_applyHalo:function(N,Y,ia){var oa=Y&&ia?this._getHaloId(Y,ia):null;N.setFilter(Y&&ia?E("webkit")||E("ff")?this._getDilateFilter(Y,ia,oa):this._getOffsetFilter(Y,ia,oa):null)},_getDilateFilter:function(N,Y,ia){var oa=this._getSVGFilter(ia);oa||(oa=this._createSVGFilter({id:ia},
[t.feMorphology({operator:"dilate",radius:Y,result:"dilated"}),t.feFlood({"flood-color":N.toCss(!0)}),t.feComposite({in2:"dilated",operator:"in",result:"composite"}),t.feMerge("composite","SourceGraphic")]));return oa},_getOffsetFilter:function(N,Y,ia){var oa=this._getSVGFilter(ia);if(!oa){N=N.toCss(!0);oa=this._offsetPrimitives;var sa,Ba=oa.length,Da=[],pa=[];for(sa=0;sa<Ba;sa++){var ra=oa[sa],ya="offset"+ra.dir,wa="composite"+ra.dir;pa.push(wa);Da.push(t.feOffset({dx:ra.dx*Y,dy:ra.dy*Y,"in":"SourceAlpha",
result:ya}),t.feFlood({"flood-color":N}),t.feComposite({in2:ya,operator:"in",result:wa}))}pa.push("SourceGraphic");Da.push(t.feMerge.apply(t.feMerge,pa));oa=this._createSVGFilter({id:ia},Da)}return oa},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(N,Y){return"halo_"+this._map.id+"_"+this.id+"_"+N.r+"_"+N.g+"_"+N.b+"_"+N.a+"_"+Y},_getSVGFilter:function(N){return this._svgFilters[N]},
_createSVGFilter:function(N,Y){Y=t.createFilter(N,Y);var ia=this._map,oa=ia.__visibleRect;Y.x=-oa.x;Y.y=-oa.y;Y.width=ia.width;Y.height=ia.height;return this._svgFilters[N.id]=Y},_updateSVGFilters:function(N,Y,ia,oa){var sa=this._svgFilters,Ba,Da,pa;for(Da in sa)if(Ba=sa[Da]){if(pa=d.byId(Da))null!=N&&pa.setAttribute("x",N),null!=Y&&pa.setAttribute("y",Y),null!=ia&&pa.setAttribute("width",ia),null!=oa&&pa.setAttribute("height",oa);null!=N&&(Ba.x=N);null!=Y&&(Ba.y=Y);null!=ia&&(Ba.width=ia);null!=
oa&&(Ba.height=oa)}},_getScaleMatrix:function(N,Y){var ia=N.width/N.height,oa=1,sa=1;isNaN(Y)||(1<ia?(oa=Y/N.width,sa=Y/ia/N.height):(sa=Y/N.height,oa=Y*ia/N.width));return{xx:oa,yy:sa}},_symbolizePoint:function(N,Y,ia,oa){var sa=Y.type,Ba=Y.style;if("shieldlabelsymbol"!==sa&&"picturemarkersymbol"!==sa){var Da=Y.getStroke();Y=Y.getFill();Ba=Ba===v.STYLE_X||Ba===v.STYLE_CROSS;var pa=Da&&Da.color,ra=Ba?pa:Y;if(ia){var ya=this._getVariable(ia,"colorInfo",!1),wa=this._getVariable(ia,"opacityInfo",!1);
ya&&(ra=ia.getColor(oa,{colorInfo:ya})||ra);ra&&wa&&(ra=this._applyOpacity(ra,ia,wa,oa));ra&&(Ba?ra!==pa&&(Da=Da?h.mixin({},Da):{},Da.color=ra):ra!==Y&&(Y=ra))}"textsymbol"===sa?N.setFill(Y):"simplemarkersymbol"===sa&&N.setFill(Y).setStroke(Da)}},_drawMarkers:function(N,Y,ia,oa){var sa=N.geometry,Ba=sa.points,Da=N.getDojoShape()||this._div.createGroup(),pa,ra=Ba.length,ya=[],wa=0,la,Aa=ia?ia.length:0;Da.children[0]&&this._isInvalidShape(Y,Da.children[0])&&Da.clear();for(pa=0;pa<ra;pa++){var da=Ba[pa];
for(la=0;la<Aa;la++)ya[0]=ia[la],this._drawPoint(Da,{x:da[0],y:da[1],spatialReference:sa.spatialReference},Y,Da.children[wa++],ya,oa,N)}Y=Da.children.length;if(ra*ia.length<Y)for(pa=Y-1;pa>=ra*ia.length;pa--)Da.children[pa].removeShape();N._shape=Da},_symbolizeMarkers:function(N,Y,ia){var oa=N.getDojoShape().children,sa,Ba=oa.length;for(sa=0;sa<Ba;sa++)this._symbolizePoint(oa[sa],Y,ia,N)},_errorHandler:function(N,Y){Y&&(N.message="Unable to draw graphic (geometry:"+(Y.geometry?Y.geometry.declaredClass:
null)+", symbol:"+(Y.symbol?Y.symbol.declaredClass:null)+"): "+N.message);this.inherited(arguments)},_rendererLimits:function(){if(P){var N=1E5;var Y=-1E5;var ia=1E5}else E("chrome")&&6>E("chrome")&&(N=8150,Y=-1E4,ia=1E4);if(N)return{clipLimit:N,rangeMin:Y,rangeMax:ia,clipBBox:[-N,-N,N,N],clipSegments:[[[-N,-N],[N,-N]],[[N,-N],[N,N]],[[N,N],[-N,N]],[[-N,N],[-N,-N]]]}}(),_clipPolyline:function(N,Y){Y=this._getCorners(N,Y);var ia=Y.br,oa=this._rendererLimits,sa=oa.rangeMin,Ba=oa.rangeMax,Da=oa.clipBBox,
pa=oa.clipSegments;oa=this._isPointWithinRange;var ra=this._isPointWithinBBox,ya=this._getClipperIntersection,wa=this._getPlaneIndex;if(!oa(Y.tl,sa,Ba)||!oa(ia,sa,Ba)){P&&this._createSegments(N);var la=[];e.forEach(N.segments,function(Aa){Aa=Aa.args;var da=Aa.length,fa=[],Q;for(Q=0;Q<da;Q+=2){var xa=[Aa[Q],Aa[Q+1]],Fa=[Aa[Q+2],Aa[Q+3]],ca=ra(xa,Da),Sa=ra(Fa,Da);if(ca^Sa){if(Sa=ya([xa,Fa],pa))ca?(Q?fa.push(Sa[1]):fa.push(xa,Sa[1]),la.push(fa),fa=[]):fa.push(Sa[1],Fa)}else ca?Q?fa.push(Fa):fa.push(xa,
Fa):(Sa=wa(xa,Da),ca=wa(Fa,Da),-1!==Sa&&-1!==ca&&Sa!==ca&&(xa=ya([xa,Fa],pa,!0),0<xa.length&&(xa[Sa]||(Sa=xa[Sa[0]]?Sa[0]:Sa[1]),xa[ca]||(ca=xa[ca[0]]?ca[0]:ca[1]),Fa=xa[Sa],xa=xa[ca],Fa&&fa.push(Fa),xa&&(fa.push(xa),la.push(fa),fa=[]))))}la.push(fa)});N.setShape(this._getPathStringFromPaths(la))}},_clipPolygon:function(N,Y){Y=this._getCorners(N,Y);var ia=Y.br,oa=this._rendererLimits,sa=oa.clipLimit,Ba=oa.rangeMin,Da=oa.rangeMax,pa=oa.clipBBox,ra=oa.clipSegments;oa=this._isPointWithinRange;var ya=
this._isPointWithinBBox,wa=this._getClipperIntersection,la=this._getPlaneIndex,Aa=H._pointLineDistance;oa(Y.tl,Ba,Da)&&oa(ia,Ba,Da)||(P&&this._createSegments(N),Y=e.filter(N.segments,function(da){return da.args&&da.args.length}),Y=e.map(Y,function(da){var fa=da.args,Q=fa.length,xa=[];da=[];var Fa;for(Fa=0;Fa<Q;Fa+=2){var ca=[fa[Fa],fa[Fa+1]],Sa=[fa[Fa+2],fa[Fa+3]];if(Fa===Q-2){xa.push(ca);break}var Qa=ya(ca,pa),va=ya(Sa,pa);xa.push(ca);if(Qa^va){if(va=wa([ca,Sa],ra))ca=va[1],ca[Qa?"inOut":"outIn"]=
!0,xa.push(ca),da.push([Qa?"INOUT":"OUTIN",xa.length-1,va[0]])}else if(!Qa){Qa=la(ca,pa);var T=la(Sa,pa);-1!==Qa&&-1!==T&&Qa!==T&&(va=wa([ca,Sa],ra,!0),0<va.length?(va[Qa]||(Qa=va[Qa[0]]?Qa[0]:Qa[1]),va[T]||(T=va[T[0]]?T[0]:T[1]),ca=va[Qa],Sa=va[T],ca&&(ca.outIn=!0,xa.push(ca),da.push(["OUTIN",xa.length-1,Qa])),Sa&&(Sa.inOut=!0,xa.push(Sa),da.push(["INOUT",xa.length-1,T]))):h.isArray(Qa)&&h.isArray(T)&&(va=Qa.concat(T),va.sort(),"0123"===va.join("")&&(va=[],3===Qa[0]+Qa[1]?va.push([sa,-sa],[-sa,sa]):
va.push([-sa,-sa],[sa,sa]),Qa=Aa(va[0],[ca,Sa]),ca=Aa(va[1],[ca,Sa]),xa.push(Qa<ca?va[0]:va[1]))))}}var ja=pa[0],ka=pa[1],U=pa[2],ha=pa[3];e.forEach(xa,function(ua){ua[0]<ja&&(ua[1]>=ka&&ua[1]<=ha?ua[0]=ja:(ua[0]=ja,ua[1]=ua[1]<ka?ka:ha))});e.forEach(xa,function(ua){ua[1]<ka&&(ua[0]>=ja&&ua[0]<=U?ua[1]=ka:(ua[1]=ka,ua[0]=ua[0]<ja?ja:U))});e.forEach(xa,function(ua){ua[0]>U&&(ua[1]>=ka&&ua[1]<=ha?ua[0]=U:(ua[0]=U,ua[1]=ua[1]<ka?ka:ha))});e.forEach(xa,function(ua){ua[1]>ha&&(ua[0]>=ja&&ua[0]<=U?ua[1]=
ha:(ua[1]=ha,ua[0]=ua[0]<ja?ja:U))});fa=0;Q=da.length;if(0<Q){do{Sa=da[fa];Fa=da[(fa+1)%Q];if(Sa[2]===Fa[2]&&"INOUT"===Sa[0]&&"OUTIN"===Fa[0])if(ca=Sa[1],Fa=Fa[1],ca<Fa)for(ca+=1;ca<Fa;ca++)xa[ca][2]=!0;else if(ca>Fa){for(ca+=1;ca<xa.length;ca++)xa[ca][2]=!0;for(ca=0;ca<Fa;ca++)xa[ca][2]=!0}fa=(fa+1)%Q}while(0!==fa)}Q=xa[0];fa=xa[xa.length-1];Q[2]&&(fa[2]=!0,e.some(da,function(ua){return 1===ua[1]?(xa.splice(xa.length-1,0,h.clone(xa[1])),!0):!1}));xa=e.filter(xa,function(ua){return ua[2]?!1:!0});
for(fa=0;fa<xa.length-1;fa++)Q=xa[fa],(Fa=xa[fa+1])&&Q[0]===Fa[0]&&Q[1]===Fa[1]&&(Fa.outIn?Q.outIn=!0:Fa.inOut&&(Q.inOut=!0),xa.splice(fa+1,1));Q=Math.abs;da=[];for(fa=0;fa<xa.length-1;fa++){Sa=xa[fa];ca=Sa[0];Sa=Sa[1];Qa=Q(ca)===sa;va=Q(Sa)===sa;Fa=xa[fa+1];T=Fa[0];Fa=Fa[1];var na=Q(T)===sa,qa=Q(Fa)===sa;Qa&&qa?da.push([fa+1,[ca,Fa]]):va&&na&&da.push([fa+1,[T,Sa]])}for(fa=da.length-1;0<=fa;fa--)Fa=da[fa],ca=xa[Fa[0]-1],Q=xa[Fa[0]],ca.outIn||ca.inOut||Q.outIn||Q.inOut||xa.splice(Fa[0],0,Fa[1]);Q=
xa[0];fa=xa[xa.length-1];Q[0]===fa[0]&&Q[1]===fa[1]||xa.push(Q);return xa}),N.setShape(this._getPathStringFromPaths(Y)))},_getCorners:function(N,Y){if(P){N=this._map;var ia=Y.getExtent(),oa=ia.spatialReference;Y=N.toScreen(new C(ia.xmin,ia.ymax,oa));N=N.toScreen(new C(ia.xmax,ia.ymin,oa));return{tl:Y,br:N}}N=N.getTransformedBoundingBox();return{tl:N[0],br:N[2]}},_createSegments:function(N){N.shape.path=N.vmlPath;N.segmented=!1;N._confirmSegmented();var Y=N.segments;1<Y.length&&(N.segments=e.filter(Y,
function(ia,oa,sa){oa=sa[oa+1];return"M"===ia.action&&oa&&"L"===oa.action?(ia.args=ia.args.concat(oa.args),!0):!1}))},_getPathStringFromPaths:function(N){P?(N=e.map(N,function(Y){return"m "+e.map(Y,function(ia,oa){return(1===oa?"l ":"")+ia.join(",")}).join(" ")}),N.push("e")):N=e.map(N,function(Y){return"M "+e.map(Y,function(ia){return ia.join(",")}).join(" ")});return N.join(" ")},_isPointWithinBBox:function(N,Y){var ia=Y[1],oa=Y[2],sa=Y[3],Ba=N[0];N=N[1];return Ba>Y[0]&&Ba<oa&&N>ia&&N<sa?!0:!1},
_isPointWithinRange:function(N,Y,ia){var oa=N.x;N=N.y;return oa<Y||N<Y||oa>ia||N>ia?!1:!0},_getClipperIntersection:function(N,Y,ia){var oa,sa=H._getLineIntersection2,Ba=Math.round,Da={length:0};for(oa=0;4>oa;oa++){var pa=sa(N,Y[oa]);if(pa)if(pa[0]=Ba(pa[0]),pa[1]=Ba(pa[1]),ia)Da[oa]=pa,Da.length++;else return[oa,pa]}return ia?Da:null},_getPlaneIndex:function(N,Y){var ia=N[0];N=N[1];var oa=Y[0],sa=Y[1],Ba=Y[2];Y=Y[3];return ia<=oa?N>=sa&&N<=Y?3:N<sa?[0,3]:[2,3]:N<=sa?ia>=oa&&ia<=Ba?0:ia<oa?[3,0]:[1,
0]:ia>=Ba?N>=sa&&N<=Y?1:N<sa?[0,1]:[2,1]:N>=Y?ia>=oa&&ia<=Ba?2:ia<oa?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},onInfoTemplateChange:function(){},onSurfaceChange:function(){},onWebGLEnabledChange:function(){},setInfoTemplate:function(N){this.infoTemplate=N;this._evalSurfaceType();this.onInfoTemplateChange()},
add:function(N,Y){if(N._graphicsLayer===this)return N;N._suspended=this._suspendGraphics;Y||this.graphics.push(N);N._graphicsLayer=this;N._sourceLayer||(N._layer&&"esri.layers.GraphicsLayer"!==N._layer.declaredClass?N._sourceLayer=N._layer:"esri.layers.GraphicsLayer"!==this.declaredClass&&(N._sourceLayer=this));N._layer=this;this.hasWebGLSurface()||(this._updateExtent(N),this._draw(N));if(!Y)this.onGraphicAdd(N);return N},remove:function(N,Y,ia){if(!Y&&!ia){Y=this.graphics;var oa;if(-1===(oa=e.indexOf(Y,
N)))return null;if(!ba||64<=ba)Y.splice(oa,1);else{var sa=Y.length;if(sa){for(;oa<sa;)Y[oa]=Y[oa+1],oa++;Y.length--}}}this.hasWebGLSurface()||N.getDojoShape()&&this._removeShape(N,null,ia);N._shape=N._graphicsLayer=null;this.onGraphicRemove(N);return N},clear:function(N,Y){N=this.graphics;var ia,oa=!P;for(ia=N.length-1;0<=ia;ia--)this.remove(N[ia],null,oa);this.graphics=[];this.hasWebGLSurface()||this._destroyAllNodes();if(!Y)this.onGraphicsClear()},_destroyAllNodes:function(){if(!P&&this._div){var N;
this._childLayer&&(N=this._childLayer.getNode())&&N.parentNode&&N.parentNode.removeChild(N);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();N&&this._div.getEventSource().appendChild(N);this._initOpacity()}},clearNodes:function(){if(!this.hasWebGLSurface()){var N=this.graphics,Y=N.length,ia;for(ia=0;ia<Y;ia++)this._removeShape(N[ia],!0,!0);this._destroyAllNodes()}},_graphicVisibilityChanged:function(N){},_setIEOpacity:function(N,Y){var ia=N&&N.getNode();if(ia){var oa=
N.strokeStyle,sa=ia.stroke;oa&&sa&&(sa.opacity=oa.color.a*Y);N=N.fillStyle;oa=ia.fill;N&&oa&&("tile"===oa.type?l.set(ia,"opacity",Y):oa.opacity=N.a*Y)}},setOpacity:function(N,Y){if(Y||this.opacity!=N){var ia=this._div;ia&&!this.hasWebGLSurface()&&(P?(e.forEach(this.graphics,function(oa){this._setIEOpacity(oa._shape,N);this._setIEOpacity(oa._bgShape,N)},this),ia._esriIeOpacity=N,this._bgGroup._esriIeOpacity=N):"canvas-2d"===this.surfaceType?l.set(ia.getEventSource(),"opacity",N):ia.getEventSource().setAttribute("opacity",
N));this.opacity=N;if(!Y)this.onOpacityChange(N)}},setRenderer:function(N){this.renderer=N;this._evalSDRenderer(!0);this._evalSurfaceType();this.emit("renderer-change",{renderer:this._rndForScale||N})}});y=y([n,I],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this._processEvent=h.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var N=this.inherited("_setMap",arguments);this.enableMouseEvents();return N},
_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(N){var Y=this._map,ia=N.target,oa;N.screenPoint=new F(N.pageX-Y.position.x,N.pageY-Y.position.y);for(N.mapPoint=Y.toMap(N.screenPoint);ia&&!(oa=ia.e_graphic);)ia=ia.parentNode;if(oa)return N.graphic=oa,N},_onMouseOverHandler:function(N){if(this._processEvent(N))this.onMouseOver(N)},_onMouseMoveHandler:function(N){if(this._processEvent(N))this.onMouseMove(N)},_onMouseDragHandler:function(N){if(this._processEvent(N))this.onMouseDrag(N)},
_onMouseOutHandler:function(N){if(this._processEvent(N))this.onMouseOut(N)},_onMouseDownHandler:function(N){this._downGr=this._downPt=null;this._processEvent(N)&&(a.disconnect(this._onmousemove_connect),a.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=a.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=N.graphic,this._downPt=N.screenPoint.x+","+N.screenPoint.y,this.onMouseDown(N))},_onMouseUpHandler:function(N){this._upGr=this._upPt=null;this._processEvent(N)&&
(a.disconnect(this._onmousedrag_connect),a.disconnect(this._onmousemove_connect),this._onmousemove_connect=a.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=N.graphic,this._upPt=N.screenPoint.x+","+N.screenPoint.y,this.onMouseUp(N))},_onClickHandler:function(N){if(this._processEvent(N)){var Y=this._downGr,ia=this._upGr;Y&&ia&&Y===ia&&this._downPt===this._upPt&&(P&&(A._ieGraphic=N.graphic),this.onClick(N))}},_onDblClickHandler:function(N){if(this._processEvent(N))this.onDblClick(N)},
onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var N=a.connect,Y=this._div.getEventSource();R||(this._onmouseover_connect=N(Y,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=N(Y,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=N(Y,"onmouseout",this,"_onMouseOutHandler"),
this._onmousedown_connect=N(Y,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=N(Y,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=N(Y,"onclick",this,"_onClickHandler"),this._ondblclick_connect=N(Y,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var N=a.disconnect;N(this._onmouseover_connect);N(this._onmousemove_connect);N(this._onmousedrag_connect);N(this._onmouseout_connect);N(this._onmousedown_connect);
N(this._onmouseup_connect);N(this._onclick_connect);N(this._ondblclick_connect);this._mouseEvents=!1}}});y._GraphicsContainer=u;y._GraphicsLayer=n;h.setObject("layers.GraphicsLayer",y,A);h.setObject("layers._GraphicsContainer",u,A);h.setObject("layers._GraphicsLayer",n,A);return y})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(b,y){b.add("esri-svg",function(){return-1!==y.renderer.toLowerCase().indexOf("svg")});return b})},"esri/layers/support/webglUtils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/has","../../kernel"],function(b,y,q,a){var h=!1,e=q("esri-webgl-max-contexts");e=null!=e?e:q("esri-mobile")?8:16;var g={isWebGLSupported:function(){return!!h},isWebGLEnabled:function(){return this.isWebGLSupported()&&!!q("esri-featurelayer-webgl")},createCanvas:function(f,m){var l=document.createElement("canvas");l.style.width=f+"px";l.style.height=m+"px";return l},createWebGLContext:function(f){var m;y.some(["webgl","experimental-webgl","webkit-3d","moz-webgl"],function(l){try{m=
f.getContext?f.getContext(l):null}catch(d){m=null}return!!m});return m},_contextOwners:[],isContextAvailable:function(){return-1===e||0<e&&g._contextOwners.length<e},acquireContext:function(f){return-1!==y.indexOf(g._contextOwners,f)?!0:g.isContextAvailable()?(g._contextOwners.push(f),!0):!1},releaseContext:function(f){f=y.indexOf(g._contextOwners,f);-1!==f&&g._contextOwners.splice(f,1)}};h=g.createWebGLContext(g.createCanvas());b.setObject("layers.support.webglUtils",g,a);return g})},"esri/layers/support/WebGLSurface":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(b,y,q,a,h){b=b(null,{map:null,node:null,renderers:null,constructor:function(e){y.mixin(this,e);this.renderers=[]},destroy:function(){q.forEach(this.renderers,function(e){e.destroy()});this.renderers=null},getEventSource:function(){return this.node},createRenderer:function(e,g,f,m){e=new e({surface:this,width:g,height:f,map:this.map,layer:m});this.renderers.push(e);return e},destroyRenderer:function(e){var g=q.indexOf(this.renderers,
e);-1<g&&(e.destroy(),this.renderers.splice(g,1))},_createNode:function(){var e=document.createElement("div");e.style.pointerEvents="auto";e.style.position="absolute";return e}});y.setObject("layers.support.WebGLSurface",b,h);return b})},"esri/symbols/utils":function(){define("dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "),function(b,y,q,a,h,e){function g(k){k.removeAttribute("marker-start");k.removeAttribute("marker-end");k.removeAttribute("opacity")}function f(k,
t){for(var n in t)k.setAttribute(n,t[n])}function m(k,t,n){t="url(#"+t.getAttribute("id")+")";k.rawNode.setAttribute("marker-"+n,t)}var l=-1!==a.renderer.toLowerCase().indexOf("svg"),d=9===q("ie"),c={marker:{markerWidth:"6",markerHeight:"6",markerUnits:"strokeWidth",orient:"auto"},spear:{marker:{end:{viewBox:"0 0 25.4 23.43",refX:"20",refY:"12.76"},start:{viewBox:"-25.4 0 25.4 23.43",refX:"-20",refY:"12.76"}},path:{common:{d:"M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z",
"stroke-width":"0","fill-opacity":"1"},start:{transform:"matrix(-1, 0, 0, 1, 0, 0)"}}}};q={applyLineMarker:function(k,t,n,u){if(l&&!d){var x=k&&k.rawNode,A=t.marker;n=n||t.color;x&&"none"!==t.style&&n&&A&&"arrow"===A.style&&A.placement?x.getTotalLength&&0===x.getTotalLength()?g(x):(t=-1!==A.placement.indexOf("begin"),A=-1!==A.placement.indexOf("end"),t||A?(x.removeAttribute("stroke-opacity"),x.setAttribute("opacity",n.a),t?(t=u(k,n,"spear","start"),m(k,t,"start")):x.removeAttribute("marker-start"),
A?(n=u(k,n,"spear","end"),m(k,n,"end")):x.removeAttribute("marker-end")):g(x)):x&&g(x)}},createSVGMarker:function(k,t,n,u){n=c[n];var x=y.doc.createElementNS("http://www.w3.org/2000/svg","marker");x.setAttribute("id",t);f(x,c.marker);f(x,n.marker[u]);t=y.doc.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("fill",k.toCss());f(t,n.path.common);f(t,n.path[u]);x.appendChild(t);return x},create2DColorRamp:function(k){var t=k.surface.createGroup(),n=k.colors,u=k.numClasses;k=(k.size||
75)/u;for(var x=0;x<u;x++)for(var A=x*k,z=0;z<u;z++){var E=n[x][z];t.createRect({x:z*k,y:A,width:k,height:k}).setFill(E).setStroke(null)}return t},setSymbolFillColor:function(k,t){if(k)switch(t=t?new e(t):null,k.type){case "simplemarkersymbol":"cross"===k.style||"x"===k.style?k.outline&&k.outline.setColor(t):k.setColor(t);break;case "simplelinesymbol":case "cartographiclinesymbol":case "simplefillsymbol":case "shieldlabelsymbol":case "textsymbol":k.setColor(t)}}};b.setObject("renderer.utils",q,h);
return q})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(b,y,q,a,h,e,g,f,m,l){var d=function(){return 9>q("ie")?function(k,t,n,u,x,A,z,E,w){var D=[],r=Math.round,v,B=z.length,C;for(v=0;v<B;v++){var F=z[v];var G=E?E(F[0][0],F[0][1],w):F[0];if(1<(C=F.length)){var H=r((G[0]-k)*n+x);var J=r((t-G[1])*u+A);G=E?E(F[1][0],F[1][1],w):F[1];var I=r((G[0]-k)*n+x);G=r((t-
G[1])*u+A);D.push("M",H+","+J,"L",I+","+G);for(I=2;I<C;I++)G=E?E(F[I][0],F[I][1],w):F[I],H=r((G[0]-k)*n+x),J=r((t-G[1])*u+A),D.push(H+","+J)}else H=r((G[0]-k)*n+x),J=r((t-G[1])*u+A),D.push("M",H+","+J)}return D}:function(k,t,n,u,x,A,z,E,w,D){var r=[],v,B,C=Math.round;var F=0;for(v=z?z.length:0;F<v;F++){var G=z[F];r.push("M");var H=0;for(B=G?G.length:0;H<B;H++){var J=E?E(G[H][0],G[H][1],w):G[H];r.push(C((J[0]-k)*n+x)+","+C((t-J[1])*u+A))}D||r.push("Z")}return r}}(),c={toScreenPoint:function(k,t,n,
u,x){var A=k.spatialReference,z=u.spatialReference,E=u.x;u=u.y;A&&z&&!A.equals(z)&&A._canProject(z)&&(A=A.isWebMercator()?h.lngLatToXY(E,u):h.xyToLngLat(E,u,!0),E=A[0],u=A[1]);E=(E-k.xmin)*(t/k.getWidth());u=(k.ymax-u)*(n/k.getHeight());x||(E=Math.round(E),u=Math.round(u));return new e(E,u)},toScreenGeometry:function(k,t,n,u){var x=k.xmin,A=k.ymax,z=t/k.getWidth(),E=n/k.getHeight(),w=b.forEach,D=Math.round;if(u instanceof h)return new h(D((u.x-x)*z),D((A-u.y)*E));if(u instanceof m){k=new m;var r=
k.points;w(u.points,function(G,H){r[H]=[D((G[0]-x)*z),D((A-G[1])*E)]});return k}if(u instanceof l)return new l(D((u.xmin-x)*z),D((A-u.ymin)*E),D((u.xmax-x)*z),D((A-u.ymax)*z));if(u instanceof g){k=new g;var v=k.paths,B;w(u.paths,function(G,H){B=v[H]=[];w(G,function(J,I){B[I]=[D((J[0]-x)*z),D((A-J[1])*E)]})});return k}if(u instanceof f){k=new f;var C=k.rings,F;w(u.rings,function(G,H){F=C[H]=[];w(G,function(J,I){F[I]=[D((J[0]-x)*z),D((A-J[1])*E)]})});return k}},_toScreenPath:function(k,t,n,u,x,A){var z=
u instanceof g,E=k.spatialReference,w=u.spatialReference;if(E&&w&&!E.equals(w)&&E._canProject(w))if(E.isWebMercator())var D=h.lngLatToXY;else{D=h.xyToLngLat;var r=!0}return d(k.xmin,k.ymax,t/k.getWidth(),n/k.getHeight(),x,A,z?u.paths:u.rings,D,r,z)},toMapPoint:function(k,t,n,u){return new h(k.xmin+u.x/(t/k.getWidth()),k.ymax-u.y/(n/k.getHeight()),k.spatialReference)},toMapGeometry:function(k,t,n,u){var x=k.xmin,A=k.ymax,z=k.spatialReference,E=t/k.getWidth(),w=n/k.getHeight(),D=b.forEach;if(u instanceof
h)return new h(x+u.x/E,A-u.y/w,z);if(u instanceof m){k=new m(z);var r=k.points;D(u.points,function(G,H){r[H]=[x+G[0]/E,A-G[1]/w]});return k}if(u instanceof l)return new l(x+u.xmin/E,A-u.ymin/w,x+u.xmax/E,A-u.ymax/w,z);if(u instanceof g){k=new g(z);var v=k.paths,B;D(u.paths,function(G,H){B=v[H]=[];D(G,function(J,I){B[I]=[x+J[0]/E,A-J[1]/w]})});return k}if(u instanceof f){k=new f(z);var C=k.rings,F;D(u.rings,function(G,H){F=C[H]=[];D(G,function(J,I){F[I]=[x+J[0]/E,A-J[1]/w]})});return k}}};y.mixin(y.getObject("geometry",
!0,a),c);return c})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(b,y,q,a,h,e){function g(){y.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}g.prototype={addPlugin:function(f,m){var l=this,d=this._plugins,c=new h;try{b([f],function(k){f in d?c.resolve({id:d[f].declaredId||f.replace(/\//g,".")}):(d[f]=k,e(k.add(l,m),function(){var t={id:k.declaredId||f.replace(/\//g,".")};l.emit("plugin-add",
t);c.resolve(t)},function(t){c.reject(t)}))})}catch(k){c.reject(k)}return c.promise},removePlugin:function(f){if(f in this._plugins){var m=this._plugins[f];m.remove(this);delete this._plugins[f];this.emit("plugin-remove",{id:m.declaredId||f.replace(/\//g,".")})}},_pluginsHandler:function(){var f=this;q.some(arguments,function(m){if(m&&m.plugins&&m.plugins instanceof Array){m=m.plugins;var l;for(l=0;l<m.length;l++){var d=m[l];var c=d instanceof Object?d.id:d;f.addPlugin(c,d.options)}return!0}})}};
return g})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./FeatureTemplate ./support/domainUtils".split(" "),function(b,y,q,a,h,e,g,f,m){b=b(null,{declaredClass:"esri.layers.FeatureType",constructor:function(l){if(l&&y.isObject(l)){this.id=l.id;this.name=l.name;var d=l.symbol;d&&(this.symbol=g.fromJson(d));d=l.domains;var c=this.domains={};for(k in d)d.hasOwnProperty(k)&&(c[k]=m.fromJson(d[k]));if(l=
l.templates){var k=this.templates=[];for(d=0;d<l.length;d++)k.push(new f(l[d]))}}},toJson:function(){var l={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},d,c=this.domains,k=this.templates,t=e.fixJson;if(c){var n=l.domains={};for(d in c)c.hasOwnProperty(d)&&(n[d]=c[d]&&c[d].toJson());t(n)}k&&(l.templates=q.map(k,function(u){return u.toJson()}));return t(l)}});y.setObject("layers.FeatureType",b,h);return b})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),
function(b,y,q,a,h,e){b=b(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(g){g&&y.isObject(g)&&(this.name=g.name,this.description=g.description,this.drawingTool=g.drawingTool,this.thumbnail=g.thumbnail,g=g.prototype,this.prototype=new e(g.geometry,null,g.attributes))},toJson:function(){return h.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:h.fixJson(y.clone(this.thumbnail)),prototype:this.prototype&&this.prototype.toJson()})}});
y.mixin(b,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",
TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});y.setObject("layers.FeatureTemplate",b,a);return b})},"esri/layers/support/domainUtils":function(){define("dojo/_base/lang dojo/has ../../kernel ../RangeDomain ../CodedValueDomain ../InheritedDomain".split(" "),function(b,y,q,a,h,e){y={fromJson:function(g){if(g)switch(g.type){case "range":var f=new a(g);break;case "codedValue":f=new h(g);break;case "inherited":f=
new e(g)}return f}};b.setObject("layers.support.domainUtils",y,q);return y})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(b,y,q,a,h){b=b([h],{declaredClass:"esri.layers.InheritedDomain"});y.setObject("layers.InheritedDomain",b,a);return b})},"esri/layers/FeatureSubtype":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./support/domainUtils".split(" "),function(b,y,q,a,h,e){b=b(null,
{declaredClass:"esri.layers.FeatureSubtype",constructor:function(g){if(g&&y.isObject(g)){this.code=g.code;this.name=g.name;this.defaultValues=g.defaultValues;g=g.domains;var f=this.domains={},m;for(m in g)g.hasOwnProperty(m)&&(f[m]=e.fromJson(g[m]))}},toJson:function(){var g=h.fixJson,f={code:this.code,name:this.name,defaultValues:g(y.clone(this.defaultValues))},m=this.domains;if(m){var l=f.domains={},d;for(d in m)m.hasOwnProperty(d)&&(l[d]=m[d]&&m[d].toJson());g(l)}return g(f)}});y.setObject("layers.FeatureSubtype",
b,a);return b})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(h){h&&y.isObject(h)&&(this.objectId=h.objectId,this.globalId=h.globalId,this.success=h.success,h.success||(h=h.error,this.error=Error(),this.error.code=h.code,this.error.message=h.description))}});y.setObject("layers.FeatureEditResult",b,a);return b})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),
function(b,y,q,a,h,e,g,f){var m=/__begin__/ig,l=/__end__/ig,d=/^__begin__/i,c=/__end__$/i;b=b(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter",
"below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd",
"below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd",
"always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(k){k&&(y.mixin(this,k),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=e.valueOf(this._labelPlacementLookup,k.labelPlacement)),k.format&&(this.format=k.format),k.fieldInfos&&(this.fieldInfos=k.fieldInfos),k.symbol&&(this.symbol="esriSHD"===k.symbol.type?new f(k.symbol):new g(k.symbol)),k=this.sizeInfo)&&(k.minSize&&(k.minSize=a.pt2px(k.minSize)),k.maxSize&&(k.maxSize=a.pt2px(k.maxSize)))},
getSymbol:function(){return this.symbol},toJson:function(){var k=this.sizeInfo;k&&(k=y.mixin({},k),k.minSize&&(k.minSize=a.px2pt(k.minSize)),k.maxSize&&(k.maxSize=a.px2pt(k.maxSize)));var t=e.fixJson(this.labelExpressionInfo&&y.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(t);k={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:t,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,
where:this.where,sizeInfo:k||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return e.fixJson(k)},_processLabelExpressionInfo:function(k){k&&k.value&&(k.expression=this._convertTemplatedStringToArcade(k.value))},_convertTemplatedStringToArcade:function(k){if(k){var t=y.replace(k,function(n,u){return'__begin__$feature["'+u+'"]__end__'});t=d.test(t)?t.replace(d,
""):'"'+t;t=c.test(t)?t.replace(c,""):t+'"';t=t.replace(m,'" + ').replace(l,' + "')}return t}});y.setObject("layers.LabelClass",b,h);return b})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(b,y,q,a,h,e,g,f,m){var l={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};b=b(f,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,
255,255,1],width:32,height:32,font:a.defaultFont,constructor:function(d,c,k,t,n){d?y.isString(d)?(this.url=d,c&&(this.color=c),k&&(this.width=k),t&&(this.height=t),void 0!==n&&(this.font=n)):(this.width=a.pt2px(d.width),this.height=a.pt2px(d.height),c=d.imageData,9>q("ie")||!c||(k=this.url,this.url="data:"+(d.contentType||"image")+";base64,"+c,this.imageData=k)):y.mixin(this,l)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(d){this.width=d;return this},
setHeight:function(d){this.height=d;return this},setUrl:function(d){d!==this.url&&(delete this.imageData,delete this.contentType);this.url=d;return this},setFont:function(d){this.font=d;return this},setText:function(d){this.text=d;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,
stroke:null}},toJson:function(){var d=this.url,c=this.imageData;if(0===d.indexOf("data:")){var k=d;d=c;c=k.indexOf(";base64,")+8;c=k.substr(c)}d=g.getAbsoluteUrl(d);k=a.px2pt(this.width);k=isNaN(k)?void 0:k;var t=a.px2pt(this.height);t=isNaN(t)?void 0:t;d=e.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:d,imageData:c,contentType:this.contentType,width:k,height:t}));this.font?(c=new m(this.font),d.font=c.toJson()):d.font=null;delete d.size;d.imageData||delete d.imageData;return d}});
b.defaultProps=l;y.setObject("symbol.ShieldLabelSymbol",b,h);h.symbol.defaultShieldLabelSymbol=l;return b})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "),function(b,y,q,a,h,e,g,f,m){b=b([f],{declaredClass:"esri.layers._SnapshotMode",maxFeatures:5E4,maxRecordCountFactor:1,scaleToTileFactor:1,_isSuspendedAtStartup:!1,_pendingRefresh:!1,constructor:function(l){this.featureLayer=
l;this._featureMap={};this._hasUpdateError=this._hasPartialFeatures=!1;this._drawFeatures=y.hitch(this,this._drawFeatures);this._queryErrorHandler=y.hitch(this,this._queryErrorHandler);this._handleSuccess=y.hitch(this,this._handleSuccess);this._handleError=y.hitch(this,this._handleError);this._handleProgress=y.hitch(this,this._handleProgress)},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var l=this.featureLayer,d=l.reHostedFS.test(l.url);this.pagination=
l.queryPagination&&null!=l.maxRecordCount;this._cacheHintSupported=l._isCacheHintSupported();this.scaleToTileFactor=this._getScaleToTileFactor();d&&this.pagination&&(this._parallelSnapshot=new m({layer:l,mode:this,queryTask:l._task}));this._isSuspendedAtStartup=l.suspended;this._startup()}},propertyChangeHandler:function(l){this._init&&(l?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},destroy:function(){this._isSuspendedAtStartup=this._pendingRefresh=!1;this._cancelPendingRequest(this._pendingRequest);
this._parallelSnapshot&&this._parallelSnapshot.destroy();this.inherited(arguments)},drawFeature:function(l){var d=l.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(d,l);this._incRefCount(d)},resume:function(){this._isSuspendedAtStartup||this._pendingRefresh?(this._isSuspendedAtStartup=!1,this._startup()):this.propertyChangeHandler(0)},refresh:function(){var l=this.featureLayer;l._collection?(l._fireUpdateStart(),l._refresh(!0),l._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},
hasUpdateError:function(){return this._hasUpdateError},canFetchPBF:function(l){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(l)},_startup:function(){this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},_fetchAll:function(){var l=this.featureLayer;l._collection||l.suspended||!l.isQueryable()?this._pendingRefresh=l.suspended:(this._pendingRefresh=!1,l._fireUpdateStart(),this._clearIIf(),this._hasUpdateError=this._hasPartialFeatures=!1,this._parallelSnapshot?
this._parallelSnapshot.fetch().then(this._handleSuccess,this._handleError,this._handleProgress):this._sendRequest())},_handleSuccess:function(l){this._hasPartialFeatures=l.hasPartialFeatures;this._hasUpdateError=l.hasUpdateError;this.featureLayer._fireUpdateEnd(null)},_handleError:function(l){this._queryErrorHandler(l)},_handleProgress:function(l){l.isError?this.featureLayer._errorHandler(l.error):this._addFeatures(l.features)},_getScaleToTileFactor:function(){var l=this.featureLayer.tileMaxRecordCount,
d=this.featureLayer.maxRecordCount,c=1;null!=l&&null!=d&&(c=Number((l/d).toFixed(2)));return c},_getPageSize:function(l){var d=this.featureLayer.tileMaxRecordCount;d="tile"===l.resultType&&d?d:this.featureLayer.maxRecordCount;l.maxRecordCountFactor&&(d=Math.floor(d*l.maxRecordCountFactor));return d},_sendRequest:function(l){var d=this.featureLayer,c=this._createQueryInfo(),k=c.query;this.pagination&&(this._pageSize=this._getPageSize(k),this._start=k.start=null==l?0:l,k.num=this._pageSize);this._pendingRequest&&
this._cancelPendingRequest(this._pendingRequest);this._pendingRequest=d._task.execute(k,this._drawFeatures,this._queryErrorHandler,c.pbf?{format:"pbf"}:null)},_drawFeatures:function(l){this._pendingRequest=null;this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===l.exceededTransferLimit&&(l.exceededTransferLimit=l.features.length===this.featureLayer.maxRecordCount);var d=this.featureLayer,c=l.exceededTransferLimit,k=c&&!d._collection;l=this._checkMaxLimit(l.features);var t=
l.maxLimitReached;this._addFeatures(l.features);this.pagination&&k&&!t||(this._hasPartialFeatures=!!c,d._fireUpdateEnd(null,c?{queryLimitExceeded:!0}:null));k&&(this.pagination&&!t&&this._sendRequest(this._start+this._pageSize),d.onQueryLimitExceeded())},_queryErrorHandler:function(l){this._pendingRequest=null;this._hasUpdateError=this._hasPartialFeatures=!0;var d=this.featureLayer;d._errorHandler(l);d._fireUpdateEnd(l)},_checkMaxLimit:function(l){var d=l?l.length:0,c=this.featureLayer.graphics.length+
d,k=c>=this.maxFeatures;if(k){var t=c-this.maxFeatures;t&&l.splice(d-t,t)}return{maxLimitReached:k,featuresDiscarded:c>this.maxFeatures,features:l}},_createQueryInfo:function(){var l=this.featureLayer,d=new g;d.outFields=l.getOutFields();d.where=l.getDefinitionExpression()||"1\x3d1";d.returnGeometry=!0;d.outSpatialReference=e.createSpatialReference(this.map.spatialReference.toJson());d.timeExtent=l.getTimeDefinition();d.maxAllowableOffset=l._maxOffset;d.quantizationParameters=l._quantizationParameters;
d.orderByFields=l.supportsAdvancedQueries?l.getOrderByFields():null;d.multipatchOption=l.multipatchOption;l._ts&&(d._ts=(new Date).getTime());this._cacheHintSupported&&l._enableCacheHint(d);var c=this.canFetchPBF(d);l._enableEditModeQuantization(d,c);this._applyMaxRecordCountFactor(d,c);return{query:d,pbf:c}},_applyMaxRecordCountFactor:function(l,d){var c=this.featureLayer.advancedQueryCapabilities;this.featureLayer._isCacheHintEnabled(l)&&c&&c.supportsMaxRecordCountFactor&&("tile"!==l.resultType&&
1<this.scaleToTileFactor&&(l.maxRecordCountFactor=this.scaleToTileFactor),d&&1<this.maxRecordCountFactor&&(l.maxRecordCountFactor=this.maxRecordCountFactor),5<l.maxRecordCountFactor&&(l.maxRecordCountFactor=5))},_addFeatures:function(l){var d=this.featureLayer,c=d.objectIdField,k=l.length,t=d._selectedFeatures,n=d.mode===d.constructor.MODE_AUTO;d._fireUpdateStart();d._sortFeatures(l);for(d=0;d<k;d++){var u=l[d];var x=u.attributes[c];var A=this._addFeatureIIf(x,u);this._incRefCount(x);n&&A!==u&&t[x]&&
(A.setGeometry(u.geometry),A.setAttributes(u.attributes))}this._applyTimeFilter(!0)}});y.setObject("layers._SnapshotMode",b,a);return b})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(b,y,q,a,h){var e=!!a("esri-pbf");a=!!a("esri-featurelayer-pbf");b=b(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:e&&a,initialize:function(g){this.map=g;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(g){},
destroy:function(){this._init=this._started=!1},drawFeature:function(g){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(g){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(g){(g=this._featureMap[g])&&g._count++},_decRefCount:function(g){(g=this._featureMap[g])&&g._count--},_getFeature:function(g){return this._featureMap[g]},_addFeatureIIf:function(g,f){var m=
this._featureMap,l=m[g],d=this.featureLayer;l||(m[g]=f,d._add(f),f._count=0);return l||f},_removeFeatureIIf:function(g){var f=this._featureMap[g],m=this.featureLayer;if(f){if(f._count)return;delete this._featureMap[g];m._remove(f)}return f},_registerFeature:function(g,f){var m=this._featureMap,l=m[g];l?(l.attributes=f.attributes,l.geometry=f.geometry):(m[g]=f,f._count=0,f._layer=f._graphicsLayer=f._sourceLayer=this.featureLayer);return l||f},_unregisterFeature:function(g){var f=this._featureMap,m=
f[g];m&&!m._count&&(delete f[g],m._graphicsLayer=null)},_clearIIf:function(){var g=this.featureLayer;var f=g.graphics,m=g._selectedFeatures,l=g.getSelectedFeatures().length,d=g.objectIdField;if(l)for(g=f.length-1;0<=g;g--){l=f[g];var c=l.attributes[d];c in m?l._count=1:(l._count=0,this._removeFeatureIIf(c))}else g.clear(),this._featureMap={}},_cancelPendingRequest:function(g){if(g)try{g.cancel()}catch(f){}},_toggleVisibility:function(g){var f=this.featureLayer,m=f.graphics,l=g?"show":"hide",d,c=m.length;
g=g&&f._ager;for(d=0;d<c;d++){var k=m[d];k[l]();g&&f._repaint(k)}},_applyTimeFilter:function(g){var f=this.featureLayer;if(f.timeInfo&&!f.suspended){g||f._fireUpdateStart();var m=f._trackManager;m&&m.clearTracks();var l=f.getTimeDefinition(),d=f._getOffsettedTE(f._mapTimeExtent);d?(d=f._getTimeOverlap(l,d))?(l=f._filterByTime(f.graphics,d.startTime,d.endTime),m&&m.addFeatures(l.match),q.forEach(l.match,function(c){var k=c._shape;c.visible||(c.show(),(k=c._shape)&&k._moveToFront());f._ager&&k&&f._repaint(c)}),
q.forEach(l.noMatch,function(c){c.visible&&c.hide()})):this._toggleVisibility(!1):(m&&m.addFeatures(f.graphics),this._toggleVisibility(!0));m&&(m.moveLatestToFront(),m.drawTracks());g||f._fireUpdateEnd()}}});y.setObject("layers._RenderMode",b,h);return b})},"esri/layers/support/ParallelSnapshot":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "),function(b,y,q,a,h,e){b=b(null,{declaredClass:"esri.layers.support.ParallelSnapshot",
layer:null,mode:null,queryTask:null,batchSize:5,_queryInfo:null,_fetchDfd:null,_startPage:null,_lastPage:null,_pageSize:null,_maxPages:null,_requests:null,constructor:function(g){y.mixin(this,g);this._requests={}},destroy:function(){this.cancel()},fetch:function(){var g=new h;this.cancel(!0);this._queryInfo=this.mode._createQueryInfo();this._pageSize=this.mode._getPageSize(this._queryInfo.query);this._maxPages=Math.ceil(this._getFeatureCount()/this._pageSize);this._fetchDfd=g;this._sendRequests();
return g.promise},cancel:function(g){this._cancelPendingRequests(g);this._reset()},_reset:function(){this._startPage=this._lastPage=null;this._requests={}},_getFeatureCount:function(){return this.layer.mode===this.layer.constructor.MODE_AUTO&&0===this.layer.getLastExceedsLimitResult()?this.layer._getMaxFeaturesForAutoSnapshotMode():this.mode.maxFeatures},_sendRequests:function(g){var f=this._queryInfo.query,m=this.queryTask,l=this._requests;g=null==g?1:g;var d=g+this.batchSize-1;d>this._maxPages&&
(d=this._maxPages);if(!(g>d))for(this._startPage=g,this._lastPage=d;g<=d;g++)f.start=(g-1)*this._pageSize,f.num=this._pageSize,l[g]=m.execute(f,null,null,this._queryInfo.pbf?{format:"pbf"}:null),l[g].then(y.hitch(this,this._handleSuccess,g)).otherwise(y.hitch(this,this._handleError,g))},_evalNextBatch:function(g){g===this._lastPage&&this._sendRequests(this._lastPage+1)},_handleSuccess:function(g,f){f.exceededTransferLimit||this._cancelLaterRequests(g,!0);var m=this.mode._checkMaxLimit(f.features);
this._fetchDfd.progress({features:m.features,isError:!1});m.maxLimitReached?((g=m.featuresDiscarded||this._hasRejectedRequests())||(g=!!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),this._resolveFetch(g)):(f.exceededTransferLimit&&this._evalNextBatch(g),this._evalResolution())},_handleError:function(g,f){var m=this._requests;m&&m[g]&&(1===g?this._rejectFetch(f):(this._evalNextBatch(g),this._fetchDfd.progress({error:f,isError:!0}),this._evalResolution()))},_evalResolution:function(){this._hasPendingRequests()||
this._resolveFetch(this._hasRejectedRequests())},_resolveFetch:function(g){var f=this._hasRejectedRequests();this.cancel(!0);this._fetchDfd.resolve({hasPartialFeatures:g,hasUpdateError:f})},_rejectFetch:function(g){this.cancel(!0);this._fetchDfd.reject(g)},_getResult:function(g){return g&&g.dfd.results[0]},_hasPendingRequests:function(){return!!this._getPendingRequests().length},_getPendingRequests:function(){var g=this._requests,f,m=[];for(f in g){var l=g[f];l.isFulfilled()||m.push({pageId:Number(f),
dfd:l})}return m},_getLastSuccessfulRequest:function(){var g=this._getResolvedRequests(),f=-Infinity,m;g=q.filter(g,function(l){return!!this._getResult(l).features.length||1===l.pageId},this);q.forEach(g,function(l){l.pageId>f&&(f=l.pageId,m=l)});return m},_getResolvedRequests:function(){var g=this._requests,f,m=[];for(f in g){var l=g[f];l.isResolved()&&m.push({pageId:Number(f),dfd:l})}return m},_hasRejectedRequests:function(){var g=this._getRejectedRequests(),f=this._getLastSuccessfulRequest(),m=
this._getResult(f);m&&!m.exceededTransferLimit&&(g=q.filter(g,function(l){return l.pageId<=f.pageId}));return!!g.length},_getRejectedRequests:function(){var g=this._requests,f,m=[];for(f in g){var l=g[f];l.isRejected()&&m.push({pageId:Number(f),dfd:l})}return m},_cancelPendingRequests:function(g){this._cancelRequests(this._getPendingRequests(),g)},_cancelLaterRequests:function(g,f){var m=q.filter(this._getPendingRequests(),function(l){return l.pageId>g});this._cancelRequests(m,f)},_cancelRequests:function(g,
f){var m=this.mode,l=this._requests;q.forEach(g,function(d){f&&delete l[d.pageId];m._cancelPendingRequest(d.dfd)})}});y.setObject("layers.support.ParallelSnapshot",b,e);return b})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(b,y,q,a,h,e,g,f,m,l){b=b([m],{declaredClass:"esri.layers._OnDemandMode",constructor:function(d){this.featureLayer=
d;this._featureMap={}},initialize:function(d){this.inherited(arguments);this._cellMap={};this._gridLayer=l.createFromFeatureLayer({layer:this.featureLayer,map:d})},startup:function(){if(!this._started||this._isSuspendedAtStartup)this.inherited(arguments),this._ioQueue=[],this._isSuspendedAtStartup=this.featureLayer.suspended,this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(d){this._init&&2>d&&this._zoomHandler()},destroy:function(){this._disableConnectors();
this._processIOQueue(!0);this.inherited(arguments)},drawFeature:function(d){var c=d.geometry,k=[];if(c){k=this._gridLayer.getCellsInExtent("point"===c.type?{xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y}:c.getExtent(),!1).cells;c=this._cellMap;var t,n=d.attributes[this.featureLayer.objectIdField];for(t=0;t<k.length;t++){var u=k[t];var x=u.latticeID;var A=u.row;var z=u.col;x?u=c[x]=c[x]||u:(c[A]=c[A]||{},u=c[A][z]=c[A][z]||u);u.features=u.features||[];u.features.push(d);this._addFeatureIIf(n,d);this._incRefCount(n)}}},
suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){var d=!1,c=this._getCurrentCells(),k;for(k=0;k<c.length;k++)if(c[k].hasPartialFeatures){d=!0;break}return!d},hasUpdateError:function(){var d=!1,c=this._getCurrentCells(),k;for(k=0;k<c.length;k++)if(c[k].hasUpdateError){d=!0;break}return d},canFetchPBF:function(d){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(d)},
_enableConnectors:function(){var d=this.map;this._zoomConnect=y.connect(d,"onZoomEnd",this,this._zoomHandler);this._panConnect=y.connect(d,"onPanEnd",this,this._panHandler);this._resizeConnect=y.connect(d,"onResize",this,this._panHandler)},_disableConnectors:function(){y.disconnect(this._zoomConnect);y.disconnect(this._panConnect);y.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var d=this.featureLayer,c=this.map;!d.suspended&&d.isQueryable()&&(d._fireUpdateStart(),
this._clearIIf(),(d=d._trackManager)&&d.clearTracks(),this._cellMap={},this._gridLayer.setResolution(c.extent),this._sendRequest())},_panHandler:function(d){if(this.featureLayer.isQueryable()){this.featureLayer._fireUpdateStart();var c=this.featureLayer._resized;d=c?d:null;c&&this._gridLayer.setMapState(d,this.map.width,this.map.height);this._sendRequest(d)}},_sendRequest:function(d){this._exceeds=!1;var c=this.featureLayer,k=this.map;d=d||k.extent;k=this._gridLayer.getCellsInExtent(d,c.latticeTiling).cells;
if(!c.isEditable()){var t=this._cellMap;k=a.filter(k,function(A){if(A.lattice){if(t[A.latticeID])return!1}else if(t[A.row]&&t[A.row][A.col])return!1;return!0})}this._pending=this._pending||0;var n;for(n=0;n<k.length;n++){var u=k[n],x=this._createQueryInfo(u);this._pending++;this._ioQueue.push(c._task.execute(x.query,q.hitch(this,this._drawFeatures,u),q.hitch(this,this._queryErrorHandler,u),x.pbf?{format:"pbf"}:null))}this._removeOldCells(d);this._endCheck()},_drawFeatures:function(d,c){this.featureLayer._isImageService&&
10.7>this.featureLayer.version&&void 0===c.exceededTransferLimit&&(c.exceededTransferLimit=c.features.length===this.featureLayer.maxRecordCount);d.hasPartialFeatures=!!c.exceededTransferLimit;d.hasUpdateError=!1;this._exceeds=this._exceeds||c.exceededTransferLimit;this._finalizeIO();var k=this.featureLayer,t=this.map.extent,n=d.extent,u=d.row,x=d.col,A=k.objectIdField;c=c.features;var z=this._gridLayer,E=this._cellMap,w=d.latticeID;E=w?E[w]:E[u]&&E[u][x];if(d.resolution==z.resolution&&(w?w===z.getLatticeID(t):
z.intersects(n,t)))if(E)k._sortFeatures(c),this._updateCell(E,c);else for(k._sortFeatures(c),d.features=c,this._addCellToCellMap(d),k=c.length,d=0;d<k;d++)t=c[d],n=t.attributes[A],this._addFeatureIIf(n,t),this._incRefCount(n);else E&&this._removeCell(u,x,w);this._endCheck()},_queryErrorHandler:function(d,c){this._finalizeIO();d.hasPartialFeatures=!0;d.hasUpdateError=!0;this._addCellToCellMap(d);this.featureLayer._errorHandler(c);this._endCheck(c)},_finalizeIO:function(){this._pending--},_endCheck:function(d){if(0===
this._pending){this._processIOQueue();var c=this.featureLayer,k=c._trackManager;k&&(k.clearTracks(),k.addFeatures(c.graphics),c._ager&&a.forEach(c.graphics,function(t){t._shape&&c._repaint(t)}),k.moveLatestToFront(),k.drawTracks());this.featureLayer._fireUpdateEnd(!!d&&Error("FeatureLayer: "+(d.message||"an error occurred while updating the layer.")),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)c.onQueryLimitExceeded()}},_processIOQueue:function(d){this._ioQueue=a.filter(this._ioQueue,
function(c){return-1<c.fired?!1:!0});d&&a.forEach(this._ioQueue,this._cancelPendingRequest)},_createQueryInfo:function(d){var c=this.featureLayer,k=new f;k.outFields=c.getOutFields();k.where=c.getDefinitionExpression();k.returnGeometry=!0;k.geometry=d.extent||d.lattice;c.latticeTiling&&d.extent&&(k.spatialRelationship=f.SPATIAL_REL_CONTAINS);k.timeExtent=c._getOffsettedTE(c._mapTimeExtent);k.maxAllowableOffset=c._maxOffset;k.quantizationParameters=c._quantizationParameters;k.orderByFields=c.supportsAdvancedQueries?
c.getOrderByFields():null;k.multipatchOption=c.multipatchOption;c._ts&&(k._ts=(new Date).getTime());(d=c.advancedQueryCapabilities)&&d.supportsQueryWithResultType&&(k.resultType="tile");d=this.canFetchPBF(k);c._enableEditModeQuantization(k,d);return{query:k,pbf:d}},_getCurrentCells:function(d){var c=[];d=d||this._cellMap;for(var k in d)if(d.hasOwnProperty(k)){var t=d[k];t&&(t.hasOwnProperty("row")||t.hasOwnProperty("latticeID")?c.push(t):"object"===typeof t&&c.push.apply(c,this._getCurrentCells(t)))}return c},
_addCellToCellMap:function(d){var c=this._cellMap;if(d.latticeID)c[d.latticeID]=d;else{var k=d.row,t=d.col;c[k]=c[k]||{};c[k][t]=d}},_removeOldCells:function(d){var c=this._cellMap,k=this._gridLayer,t,n;for(t in c)if(c[t]){var u=c[t],x=u.latticeID,A=0,z=0;if(x)A++,x!==k.getLatticeID(d)&&(this._removeCell(null,null,x),z++);else for(n in u)u[n]&&(A++,k.intersects(u[n].extent,d)||(this._removeCell(t,n),z++));z===A&&delete c[t]}},_updateCell:function(d,c){var k=this.featureLayer,t=k.objectIdField;k=k._selectedFeatures;
var n,u=c.length;d.features=d.features||[];for(n=0;n<u;n++){var x=c[n],A=x.attributes[t],z=this._addFeatureIIf(A,x);z===x?(this._incRefCount(A),d.features.push(z)):A in k||(z.setGeometry(x.geometry),z.setAttributes(x.attributes))}},_removeCell:function(d,c,k){var t=this._cellMap,n=this.featureLayer,u=n.objectIdField,x=k?t[k]:t[d]&&t[d][c];if(x&&(k?delete t[k]:delete t[d][c],d=x.features))for(c=0;c<d.length;c++)k=d[c].attributes[u],this._decRefCount(k),k in n._selectedFeatures||this._removeFeatureIIf(k)}});
q.setObject("layers._OnDemandMode",b,e);return b})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "),function(b,y,q,a,h,e,g,f,m,l,d){var c=b(null,{declaredClass:"esri.layers._GridLayout",constructor:function(k,t,n,u){this.origin=k;this.cellWidth=t.width;this.cellHeight=t.height;this.mapWidth=n.width;this.mapHeight=
n.height;this.srInfo=u},setResolution:function(k){this.resolution=(k.xmax-k.xmin)/this.mapWidth;this.srInfo&&(k=Math.round(Math.round(2*this.srInfo.valid[1]/this.resolution)/this.cellWidth),this._frameStats=[k,0,k-1])},setMapState:function(k,t,n){this.mapWidth=t;this.mapHeight=n;this.setResolution(k)},getCellCoordinates:function(k){var t=this.resolution,n=this.origin;return{row:Math.floor((n.y-k.y)/(this.cellHeight*t)),col:Math.floor((k.x-n.x)/(this.cellWidth*t))}},normalize:function(k){var t=this._frameStats;
if(t){var n=t[0],u=t[1];t=t[2];k<u?(k%=n,k=k<u?k+n:k):k>t&&(k%=n)}return k},intersects:function(k,t){var n=this.srInfo;return n?q.some(t._getParts(n),function(u){return k.intersects(u.extent)}):k.intersects(t)},getCellExtent:function(k,t){var n=this.resolution,u=this.origin,x=this.cellWidth,A=this.cellHeight;return new g(t*x*n+u.x,u.y-(k+1)*A*n,(t+1)*x*n+u.x,u.y-k*A*n,d.createSpatialReference(u.spatialReference.toJson()))},getLatticeID:function(k){var t=this.getCellCoordinates({x:k.xmin,y:k.ymax}),
n=this.getCellCoordinates({x:k.xmax,y:k.ymin});k=t.row;var u=n.row;t=this.normalize(t.col);n=this.normalize(n.col);return k+"_"+u+"_"+t+"_"+n},sorter:function(k,t){return k<t?-1:1},getCellsInExtent:function(k,t){var n=this.getCellCoordinates({x:k.xmin,y:k.ymax}),u=this.getCellCoordinates({x:k.xmax,y:k.ymin}),x=n.row,A=u.row;n=n.col;u=u.col;var z=[],E,w,D=[],r=[],v=[];for(E=x;E<=A;E++)for(w=n;w<=u;w++){var B=this.normalize(w);k=this.getCellExtent(E,B);q.some(z,function(G){return G.row===E&&G.col===
B})||z.push({row:E,col:B,extent:k,resolution:this.resolution});t&&(D.push(k.xmin,k.xmax),r.push(k.ymin,k.ymax))}n=this.normalize(n);u=this.normalize(u);D.sort(this.sorter);r.sort(this.sorter);t=D.length;for(E=t-1;0<=E;E--)E<t-1&&D[E]===D[E+1]&&D.splice(E,1);t=r.length;for(E=t-1;0<=E;E--)E<t-1&&r[E]===r[E+1]&&r.splice(E,1);if(D.length&&r.length){k=D[0];w=D[D.length-1];var C=r[0];var F=r[r.length-1];t=D.length;for(E=0;E<t;E++)v.push([[D[E],F],[D[E],C]]);t=r.length;for(E=0;E<t;E++)v.push([[k,r[E]],[w,
r[E]]]);D=new f({paths:v,spatialReference:this.origin.spatialReference.toJson()});z.push({latticeID:x+"_"+A+"_"+n+"_"+u,lattice:D,resolution:this.resolution})}return{minRow:x,maxRow:A,minCol:n,maxCol:u,topRow:x,bottomRow:A,leftCol:n,rightCol:u,cells:z}},_findCell:function(k,t,n){var u;q.some(k,function(x){x.row===t&&x.col===n&&(u=x);return!!u});return u},getExtentOfIntersectingCells:function(k){var t=this.getCellsInExtent(k),n=t&&t.cells;if(n&&n.length){var u=t.topRow,x=t.leftCol,A=0;q.forEach(n,
function(D){D.row===u&&A++});var z=this._findCell(n,u,x).extent,E=this.srInfo;if(!E||A!==this._frameStats[0]&&x!==t.rightCol){var w=z.xmin;E=w+A*z.getWidth()}else w=E.valid[0],E=E.valid[1];t=this._findCell(n,t.bottomRow,x).extent.ymin;(k=(new g(w,t,E,z.ymax,k.spatialReference))._normalize(!1,!1))&&k.rings&&(k=new m(k),k=l.getDenormalizedExtent(k));return k}}});c.createFromFeatureLayer=function(k){var t=k.layer;k=t.getMap()||k.map;var n=t._srInfo;(t=k&&k.loaded?new c(new e(n?n.valid[0]:k.extent.xmin,
n?n.valid[1]:k.extent.ymax,k.spatialReference),{width:t._tileWidth,height:t._tileHeight},{width:k.width,height:k.height},n):null)&&t.setResolution(k.extent);return t};y.setObject("layers._GridLayout",c,h);return c})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(b,y,q,a,h){b=b([h],{declaredClass:"esri.layers._SelectionMode",constructor:function(e){this.featureLayer=e;this._featureMap={}},propertyChangeHandler:function(e){this._init&&
0===e&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures},hasUpdateError:function(){return this.featureLayer._hasSelectionError}});y.setObject("layers._SelectionMode",b,a);return b})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d){b=b([d],{declaredClass:"esri.layers._StreamMode",constructor:function(c,k){this.featureLayer=c;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=y.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;c.purgeOptions&&c.purgeOptions.age&&"number"===typeof c.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*c.purgeOptions.age));this._drawFeatures=
y.hitch(this,this._drawFeatures);this._queryErrorHandler=y.hitch(this,this._queryErrorHandler)},startup:function(){this._started||this.inherited(arguments)},propertyChangeHandler:function(c){this._init&&(0===c?this._applyTimeFilter():3===c&&this._redrawAllTracks())},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(c){var k=this.featureLayer,t=k.objectIdField;this._timeoutId||(this._timeoutId=
setTimeout(this._flushDrawBuffer,this._refreshRate));k._joinField&&this._getFeature(c.attributes[t])?this._drawBuffer.updates.push({oid:c.attributes[t],updates:c}):this._drawBuffer.adds.push(c)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);var c=this.featureLayer;c&&(c._relatedUrl||c._keepLatestUrl?(c._fireUpdateStart(),c._refreshing=!0,c.disconnect(),c.clear(),c._relatedQueried=!1,c._keepLatestQueried=!1,
c.connect()):(c._fireUpdateStart(),c.clear(),c._fireUpdateEnd()))},_drawFeatures:function(c,k){var t=this.featureLayer;t._create(c.features||[]);t._fireUpdateEnd(null,k)},_applyTimeFilter:function(c){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(c){var k=this.featureLayer,t=k.objectIdField;c&&q.forEach(c,function(n){n=n.attributes[t];k._unSelectFeatureIIf(n,this);this._decRefCount(n);this._removeFeatureIIf(n)},this)},_addFeatures:function(c){var k=this.featureLayer,t=
k._endTimeField,n=k._startTimeField,u,x=[],A=[],z=[];var E=k._trackManager;var w=k.objectIdField;if(E)for(u in c=E.addFeatures(c),c)c.hasOwnProperty(u)&&(x.push(u),c[u].adds&&(A=A.concat(c[u].adds)),c[u].deletes&&(z=z.concat(c[u].deletes)));else A=c;q.forEach(A,function(D){var r=D.attributes[w];var v=t&&D.attributes[t];!v&&this._maxFeatureAge&&(v=n&&D.attributes[n]?D.attributes[n]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);v&&(v=1E3*Math.ceil(v/1E3),this._featuresByTime[v]?this._featuresByTime[v].push(r):
this._featuresByTime[v]=[r]);this._addFeatureIIf(r,D);this._incRefCount(r)},this);z.length&&this._removeFeatures(z);E&&E.refreshTracks(x)},_updateFeatures:function(c){var k=this.featureLayer,t=[];var n=k._trackManager;var u=k._trackIdField;q.forEach(c,function(x){var A=x.updates;x=this._getFeature(x.oid);var z;if(x){A.geometry&&x.setGeometry(A.geometry);A=A.attributes||{};for(z in A)A.hasOwnProperty(z)&&(x.attributes[z]=A[z]);x.setAttributes(x.attributes);x.visible=this._checkFeatureTimeIntersects(x);
n&&x.attributes[u]?t.push(x.attributes[u]):k._repaint(x,null,!0)}},this);t.length&&n.refreshTracks(t)},_redrawAllTracks:function(){var c=this.featureLayer._trackManager,k;c&&(k=c.trimTracks())&&0<k.length&&(this._removeFeatures(k),c.refreshTracks())},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var c=this._drawBuffer,k=c.adds.splice(0,c.adds.length),t=c.updates.splice(0,c.updates.length);c=this.featureLayer;if(!c)return!1;c.updating||c._fireUpdateStart();this._addFeatures(k);this._updateFeatures(t);
(k=this._getExpiredFeatures())&&k.length&&(this._removeFeatures(k),c._trackManager&&c._trackManager.removeFeatures(k));c._purge();c._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var c=this._timeoutId,k=this._drawBuffer,t=k.adds;k=k.updates;c&&clearTimeout(c);t.splice(0,t.length);k.splice(0,k.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(c){c=
c||0===c?c:200;0>c&&(c=200);this._refreshRate=c},_checkFeatureTimeIntersects:function(c){var k=this.featureLayer,t=k.getMap();return(t=t?t.timeExtent:null)&&k.timeInfo&&(k.timeInfo.startTimeField||k.timeInfo.endTimeField)?0<k._filterByTime([c],t.startTime,t.endTime).match.length:!0},_fetchArchive:function(c){var k=new a,t=this.featureLayer;this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);t._fireUpdateStart();if(c&&this.map){c=new m(c);var n=new f;var u=this.map;var x=t.getFilter()||
{};var A=x.where||"1\x3d1";var z=x.geometry?l.fromJson(x.geometry):null;x=x.outFields?x.outFields.split(","):["*"];n.geometry=z;n.where=A;n.outFields=x;n.returnGeometry=!0;n.outSpatialReference=new g(u.spatialReference.toJson());this._pendingRequest=c.execute(n).then(function(E){this._pendingRequest=null;var w=this._fixFieldNameCasing(t,E);E.features=w;this._drawFeatures(E);t._fireUpdateEnd();k.resolve()}.bind(this)).otherwise(function(E){this._pendingRequest=null;t._errorHandler(E);t._fireUpdateEnd(E);
k.reject(E)}.bind(this))}else k.resolve();return k.promise},_queryErrorHandler:function(c){var k=this.featureLayer;k._errorHandler(c);k._fireUpdateEnd(c)},_fixFieldNameCasing:function(c,k){var t=k.features||[],n=k.fields;if(!n||!t.length)return t;c=this._mapFieldNameDifferences(c.fields,n);n=[];for(var u,x=0,A=k.features.length;x<A;x++)k=t[x],u=this._swizzleResponseAttributes(k.attributes,c),n.push({geometry:k.geometry,attributes:u});return n},_mapFieldNameDifferences:function(c,k){var t=[],n={},
u;var x=0;for(u=k.length;x<u;x++)t.push(k[x].name);x=0;for(u=c.length;x<u;x++){k=c[x].name;var A=this._checkForStreamFieldName(k,t);A&&(n[A]=k)}return n},_checkForStreamFieldName:function(c,k){c=c.toLowerCase();for(var t,n=0,u=k.length;n<u;n++)if(k[n].toLowerCase()===c){t=k[n];break}return t},_swizzleResponseAttributes:function(c,k){var t={},n;for(n in c)if(c.hasOwnProperty(n)){var u=c[n];k.hasOwnProperty(n)?t[k[n]]=u:t[n]=u}return t},_getExpiredFeatures:function(){var c,k,t=[],n=[];if(!this.featureLayer._endTimeField&&
!this._maxFeatureAge)return n;var u=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=c=1E3*Math.ceil(Date.now()/1E3);if(u&&u!==c)for(k=this._featuresByTime;u<=c;u+=1E3)k[u]&&(t=t.concat(k[u]),delete k[u]);q.forEach(t,function(x){(x=this._getFeature(x))&&n.push(x)},this);return n}});y.setObject("layers._StreamMode",b,e);return b})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),
function(b,y,q,a,h,e,g,f,m,l){var d=-1!==e.renderer.toLowerCase().indexOf("canvas");b=b(null,{declaredClass:"esri.layers._TrackManager",constructor:function(c){this.layer=c;this.trackMap={};this.trackLineMap={}},initialize:function(c){this.map=c;c=this.layer;this.createTracklineContainer()&&(this._handles=[c.on("visibility-change",y.hitch(this,function(k){this.container.setVisibility(k.visible);this.container.evaluateSuspension()})),c.on("scale-range-change",y.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,
this.layer.maxScale)}))])},createTracklineContainer:function(){var c=this.layer;if("esriGeometryPoint"!==c.geometryType)return null;var k=this.map,t=c._getRenderer();t=t&&t.trackRenderer;var n=this.container=new l._GraphicsLayer({id:c.id+"_tracks",_child:!0,visible:c.visible,minScale:c.minScale,maxScale:c.maxScale});n.loaded=!0;n.onLoad(n);n._setMap(k,c._div);d||(k=n._div.getNode(),c=c._div.getNode(),k&&c&&h.place(k,c,"first"));n.setRenderer(t);return n},addFeatures:function(c){var k=this.trackMap,
t=this.layer,n=t._trackIdField,u=[];q.forEach(c,function(E){var w=E.attributes[n];(k[w]=k[w]||[]).push(E);-1===q.indexOf(u,w)&&u.push(w)});var x=t._startTimeField,A=t.objectIdField,z=function(E,w){var D=E.attributes[x],r=w.attributes[x];return D===r?E.attributes[A]<w.attributes[A]?-1:1:D<r?-1:1};q.forEach(u,function(E){k[E].sort(z)})},trimTracks:function(c){function k(A){for(A=t[A]||[];A.length>n;)u.push(A.shift())}var t=this.trackMap,n=this.layer.maximumTrackPoints||0,u=[],x;if(!n)return u;if(c)q.forEach(c,
function(A){k(A)});else for(x in t)t.hasOwnProperty(x)&&k(x);return u},drawTracks:function(c){function k(E){var w=x[E],D,r;var v=t.trackLineMap[E];n.remove(v);delete t.trackLineMap[E];v=null;if(!w||2>w.length)return!1;v=[];for(D=w.length-1;0<=D;D--)(r=w[D].geometry)&&v.push([r.x,r.y]);w={};w[z]=E;1<v.length&&(v=new f(new m({paths:[v],spatialReference:A}),null,w),n.add(v),t.trackLineMap[E]=v)}var t=this,n=this.container,u;if(n){var x=this.trackMap;var A=this.map.spatialReference;var z=this.layer._trackIdField;
if(c)q.forEach(c,function(E){k(E)});else for(u in x)x.hasOwnProperty(u)&&k(u)}},refreshTracks:function(c){function k(z){var E;t.drawTracks([z]);if(x&&x.latestObservationRenderer){z=n[z]||[];var w=z.length;for(E=0;E<w;E++)u._repaint(z[E],null,!0)}}var t=this,n=this.trackMap,u=this.layer,x=u._getRenderer(),A;if(c)q.forEach(c,function(z){k(z)});else for(A in n)n.hasOwnProperty(A)&&k(A);this.moveLatestToFront()},moveLatestToFront:function(c){q.forEach(this.getLatestObservations(c),function(k){var t=k._shape;
t&&t._moveToFront();this._repaint(k,null,!0)},this.layer)},getLatestObservations:function(c){function k(A){A=u[A];return A[A.length-1]}var t=[],n=this.layer._getRenderer(),u=this.trackMap,x;if(!n.latestObservationRenderer)return t;if(c)q.forEach(c,function(A){t.push(k(A))});else for(x in u)u.hasOwnProperty(x)&&t.push(k(x));return t},clearTracks:function(c){var k=this.getLatestObservations(c),t=this.container,n=this.trackMap,u;if(c)q.forEach(c,function(A){delete this.trackMap[A];t&&(x=this.trackLineMap[A],
t.remove(x),delete this.trackLineMap[A])},this);else{if(t)for(u in n){var x=this.trackLineMap[u];t.remove(x)}this.trackMap={};this.trackLineMap={}}q.forEach(k,function(A){this._repaint(A,null,!0)},this.layer)},isLatestObservation:function(c){var k=this.trackMap[c.attributes[this.layer._trackIdField]];return k?k[k.length-1]===c:!1},destroy:function(){q.forEach(this._handles,function(k){k.remove()});var c=this.container;c&&(c.clear(),c._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=
this.container=null}});y.setObject("layers._TrackManager",b,g);return b})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k){function t(){}function n(u){var x=u.layer;return{geometry:u.geometry,attributes:u.attributes,getLayer:function(){return x}}}
b=b(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(u){this.sourceLayer=u;this._hndls=[]},initialize:function(u){this.map=u;var x=this.sourceLayer,A=x.renderer;x.setDrawMode(!1);this.imageLayer=u._getMapImageLyr();var z=this;this.heatmapRenderer=A instanceof d?A:(A.getRendererInfoByZoom(u.getZoom())||A.getRendererInfoByScale(u.getScale())).renderer;this.redraw=this.redraw.bind(this);this.recalculateHeatmap=
this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);h(["../workers/heatmapCalculator"],function(E){z._calculator=new E(y.mixin({width:z.map.width,height:z.map.height},z._getOptions()));z._setupRenderer();
z.heatmapRenderer.getStats=E.calculateStats;z.heatmapRenderer.getHistogramData=E.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(u){var x=u.renderer,A=x instanceof d;this.heatmapRenderer?A?this.heatmapRenderer=x:this._removeRenderer(u):A&&(this.heatmapRenderer=x,this.sourceLayer&&this.map&&
this._setupRenderer())},_handleOpacityChange:function(u){u=u.opacity;var x=this._getImageBySourceId(this.sourceLayer.id);x&&x.setOpacity(u)},_setupRenderer:function(){var u=this._hndls,x=this.sourceLayer,A=this.map,z=this;x._originalDraw=x._draw;x._draw=t;x._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);u.push(x.on("update-end",this.redraw));u.push(x.on("suspend",function(E){(E=z._getImageBySourceId(z.sourceLayer.id))&&E.hide()}));u.push(x.on("resume",
function(E){(E=z._getImageBySourceId(z.sourceLayer.id))&&E.show()}));u.push(q.after(x,"redraw",this.redraw));u.push(A.on("layer-remove",function(E){E.layer==x&&((E=z._getImageBySourceId(z.sourceLayer.id))&&z.imageLayer.removeImage(E),z._removeRenderer({target:x}))}));x._collection&&u.push(x.on("graphic-add",function(E){z._reprojectFeature(E.graphic);z.redraw()}));1!==x.mode&&(u.push(A.on("resize, pan-end",this.redraw)),u.push(A.on("zoom-end",this.redraw)));u.push(x.on("opacity-change",this._handleOpacityChange));
this.imageLayer.suspended&&this.imageLayer.resume();x.graphics&&x.graphics.length&&(x.graphics[0].geometry&&!A.spatialReference.equals(x.graphics[0].geometry.spatialReference)&&a.forEach(x.graphics,function(E){this._reprojectFeature(E)}.bind(this)),this.redraw())},redraw:function(){if(!this._drawTimer){var u=this;this._drawTimer=setTimeout(function(){clearTimeout(u._drawTimer);u._drawTimer=null;u.sourceLayer._getRenderer().isInstanceOf(d)&&u.recalculateHeatmap()},16)}},_removeRenderer:function(u){var x=
u.target;x._draw=x._originalDraw;delete x._originalDraw;x.setDrawMode(!0);this._removeHandlers();this._hndls=[];var A=this._getImageBySourceId(this.sourceLayer.id);A&&this.imageLayer.removeImage(A);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;x.renderer!=u.renderer&&x.renderer.getRendererInfo?this.heatmapRenderer=null:(this.destroy(),x.renderer&&x.renderer.getRendererInfo&&x.redraw())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():
this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(u){if(u&&u.geometry){var x=u.geometry,A=this.map.spatialReference;A.equals(x.spatialReference)||(x=m.project(x,A),null!=x&&(u.geometry=x))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var u=this.sourceLayer,x=this.map,A=this.heatmapRenderer,z=this.map.extent,E=this.map.width,w=this.map.height,D=this._calculator,r=this,v=function(C){C=r._getScreenPoints(C.features,x,u);C=D.calculateImageData(y.mixin({screenPoints:C,
mapinfo:{extent:[z.xmin,z.ymin,z.xmax,z.ymax],resolution:x.getResolution()},width:E,height:w},r._getOptions()));C=A.getSymbol(n({geometry:x.extent,attributes:{size:[E,w],imageData:C},layer:u}));C=new l({extent:x.extent,href:C.url,opacity:0,sourceId:u.id});r._swapMapImages(C,r._getImageBySourceId(u.id));u.suspended&&C.hide()},B={geometry:x.extent,timeExtent:u.useMapTime?x.timeExtent:void 0,spatialRelationship:c.SPATIAL_REL_INTERSECTS};null!=u._canDoClientSideQuery(B)?u.queryFeatures(B,v):v({features:u.graphics})},
_getScreenPoints:function(u,x,A){var z=[],E=u.length,w=0,D=0,r=new f(x.extent.xmin,x.extent.ymax,x.spatialReference),v=x.toScreen(r),B=v.x;v=v.y;var C=x.getResolution(),F;for((D=x.extent.getCacheValue("_parts"))&&(F=a.map(D,function(H){return A._intersects(x,H.extent)[0]}));E--;)if(D=u[E],D.geometry&&D.visible){var G={x:Math.ceil((D.geometry.x-r.x)/C+B),y:Math.floor((r.y-D.geometry.y)/C-v),attributes:D.attributes};F&&(D=1<F.length&&G.x<-F[0]?F[1]:F[0],G.x+=D);z[w++]=G}return z},_getImageBySourceId:function(u){var x=
this.imageLayer.getImages();x=a.filter(x,function(A){return A.sourceId==u});if(x.length)return x[x.length-1]},_swapMapImages:function(u,x){function A(){z.removeImage(x)}var z=this.imageLayer,E=this.sourceLayer.opacity;z.addImage(u);k.anim(u._node,{opacity:E},null,null,function(){u.opacity=E});null!=x&&k.anim(x._node,{opacity:0},null,null,A)},_removeHandlers:function(){if(null!=this._hndls)for(var u=this._hndls.length;u--;)this._hndls[u].remove()},_getOptions:function(){var u=this.heatmapRenderer;
return{blurRadius:u.blurRadius,gradient:u.gradient,maxPixelIntensity:u.maxPixelIntensity,minPixelIntensity:u.minPixelIntensity,field:u.field,fieldOffset:u.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var u=this.sourceLayer.graphics,x=u.length,A;x--;)A=u[x],A._shape=A._offsets=void 0}});y.setObject("layers.HeatmapManager",b,e);return b})},"esri/layers/clustering/ClusterManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E){var w=E.layers.clusters,D=E.widgets.popup,r=w.numFeatures,v=Math.pow(2,53)-1;b=b(e,{declaredClass:"esri.layers.clustering.ClusterManager",layer:null,aggregationInfo:null,container:null,defaults:{clusterRadius:80,markerSymbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}},_initialized:!1,_map:null,_eventHandles:null,_clusterRadius:null,
_renderer:null,_statisticInfos:null,_fields:null,_infoTemplate:null,_clusterGenerator:null,_singleGraphics:null,constructor:function(B){this._eventHandles=[];this.layer=B.layer;this.setAggregationInfo(B.aggregationInfo)},initialize:function(B){this._initialized=!0;this._map=B;this._removeFromPopup(this.layer);this.container=this._createContainer();this._clusterGenerator=this._createClusterGenerator();this._initClusterGenerator();this._createLayerEventListeners();this._createMapEventListeners();this._createPopupEventListeners()},
destroy:function(B){this._clearSingleGraphics();this._removeClusterBoundary();this._destroyEventListeners();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this._destroyClusterGenerator(B);this._destroyContainer();this.layer=this.aggregationInfo=this._map=null},setAggregationInfo:function(B){this.aggregationInfo=B?y.mixin({},B):null;this._applyAggregationInfo()},getClusterRenderer:function(){return this._renderer},getClusterFields:function(){return this._fields||
[]},getFeaturesInCluster:function(B){B=B&&B.getAggregationInfo();return this._clusterGenerator?this._clusterGenerator.getFeaturesInCluster(B):[]},getAggregateGraphics:function(){return this.container?this.container.graphics.slice(0):[]},getSingleGraphics:function(){return this._singleGraphics?this._singleGraphics.slice(0):[]},redraw:function(){this.container&&this.container.redraw()},isClusteringEnabled:function(){return!(!this._clusterGenerator||!this._clusterGenerator.clustersEnabled)},isClusteringActive:function(){return!!(this._clusterGenerator&&
0<this._clusterGenerator.getNumFeatures())},toggleFeatureVisibility:function(B){this._clusterGenerator&&this._clusterGenerator.toggleFeatureVisibility(B)},_createContainer:function(){var B=this.layer,C=new u._GraphicsLayer({_child:!0,id:B.id+"_clusters",visible:B.visible,minScale:B.minScale,maxScale:B.maxScale,infoTemplate:this._infoTemplate});C.fields=this._fields;C.setRenderer(this._renderer);C.loaded=!0;C.onLoad(C);C._setMap(this._map,B._div);return B._childLayer=C},_destroyContainer:function(){var B=
this.container;B&&(B.clear(),B._unsetMap(this._map,this.layer._div),this.layer._childLayer=null);this.container=null},_createClusterGenerator:function(){return new A({map:this._map,layer:this.layer,clusterRadius:this._clusterRadius,statisticInfos:this._statisticInfos})},_initClusterGenerator:function(){var B=this._clusterGenerator;B.loaded?this._awaitClusterGenerator():this._eventHandles.push(B.on("load",y.hitch(this,function(){this._awaitClusterGenerator()})),B.on("load-error",y.hitch(this,function(C){})))},
_destroyClusterGenerator:function(B){this._clusterGenerator&&this._clusterGenerator.destroy(B);this._clusterGenerator=null},_awaitClusterGenerator:function(){var B=this._clusterGenerator;B.started?(this._applyRenderer(),this._initClusterUpdates()):this._eventHandles.push(B.on("start",y.hitch(this,function(){this._applyRenderer();this._initClusterUpdates()})))},_applyAggregationInfo:function(){this._applyClusterRadius();this._applyRenderer();this._clusterGenerator&&!this._clusterGenerator.isUpdateScheduled()&&
this.redraw()},_applyClusterRadius:function(){var B=this.aggregationInfo;this._clusterRadius=B&&B.clusterRadius||this.defaults.clusterRadius;this._clusterGenerator&&this._clusterGenerator.setClusterRadius(this._clusterRadius);this._computeClusterRadius()},_computeClusterRadius:function(){var B=this.aggregationInfo||{};B.clusterRadius=this._clusterRadius;this.aggregationInfo=B},_applyRenderer:function(){var B=this.container,C=this._getClusterRendererInfo(),F=this._compareStatInfos(this._statisticInfos,
C.statisticInfos);F&&(this._statisticInfos=C.statisticInfos,this._clusterGenerator&&(this._clusterGenerator.setStatisticInfos(q.map(this._statisticInfos,function(G){return{attributeInfo:G.attributeInfo,statisticType:G.statisticType}})),B&&q.forEach(B.graphics,function(G){this._applyClusterAttributes(G,G.getAggregationInfo())},this)));this._renderer=C.renderer;this._applyFields();this._applyInfoTemplate(!!F&&this._initialized);B&&(B.setRenderer(this._renderer),this.emit("renderer-change"))},_applyFields:function(){this._fields=
this._getFields(this._statisticInfos);this.container&&(this.container.fields=this._fields)},_applyInfoTemplate:function(B){var C=this.aggregationInfo,F=C&&C.disablePopup;this.layer.infoTemplate&&!F?(C=C&&C.infoTemplate||this._infoTemplate,B=B||!C?this._createInfoTemplate():this._updateInfoTemplate(C)):B=null;this._infoTemplate=B;this.container&&this.container.setInfoTemplate(this._infoTemplate);this._computeInfoTemplate()},_computeInfoTemplate:function(){var B=this.aggregationInfo||{};B.infoTemplate=
this._infoTemplate;this.aggregationInfo=B},_getClusterRendererInfo:function(){var B=this.layer&&this.layer.renderer;return B?this._createClusterRenderer(B):this._getDefaultClusterRenderer()},_getDefaultClusterRenderer:function(){var B=this._createContinuousCountRenderer();this._addSizeByCountVariable(B);return{renderer:B,statisticInfos:[]}},_createContinuousCountRenderer:function(B){var C=new k(null,"cluster_count");C.addBreak({minValue:-v,maxValue:v,symbol:B?new B.constructor(B.toJson()):new t(y.clone(this.defaults.markerSymbol))});
return C},_createClusterRenderer:function(B){if(!this._isSupportedRenderer(B))return this._getDefaultClusterRenderer();var C=[];if(this._isSimpleRenderer(B))var F=this._createContinuousCountRenderer(B.symbol);else{F=new B.constructor(B.toJson());var G=this._getRendererAttributeInfo(B);if(this._isCBRenderer(F)){var H=z.getClusterField(G,"avg");C.push(this._getStatInfo(G,"avg"));F.normalizationType=null;F.normalizationField=null;F.normalizationTotal=null}else this._isUVRenderer(F)&&(H=z.getClusterField(G,
"type"),C.push(this._getStatInfo(G,"type")));F.attributeField=H;F.setValueExpression(null);F.valueExpressionTitle=null;F.setVisualVariables(null);this._setRendererTitle(F,B)}B=this._getSupportedVariables(B);G=this._createClusterVariables(B.allVars,C);F.setVisualVariables(G);B.sizeVars.length||this._isCBSizeRenderer(F)||this._addSizeByCountVariable(F);return{renderer:F,statisticInfos:C}},_isSupportedRenderer:function(B){if(this._isSimpleRenderer(B))return!0;if(this._isCBRenderer(B)){var C=B.normalizationType;
return"function"===typeof B.attributeField||C&&"field"!==C?!1:!0}return this._isUVRenderer(B)?"function"===typeof B.attributeField||B.attributeField2?!1:!0:!1},_isSimpleRenderer:function(B){return-1<B.declaredClass.toLowerCase().indexOf("simplerenderer")},_isCBRenderer:function(B){return-1<B.declaredClass.toLowerCase().indexOf("classbreaksrenderer")},_isUVRenderer:function(B){return-1<B.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")},_isCBSizeRenderer:function(B){var C=B.infos;if(!this._isCBRenderer(B)||
!C||2>C.length)return!1;var F=Infinity,G=-Infinity;q.forEach(C,function(H){if(H=H.symbol){var J=0;switch(H.type){case "simplemarkersymbol":J=H.size;break;case "picturemarkersymbol":J=(H.width+H.height)/2}F=Math.min(F,J);G=Math.max(G,J)}});return Infinity!==F&&-Infinity!==G&&F!==G},_getRendererAttributeInfo:function(B){var C=B.attributeField,F=C?this.layer.getField(C):null;return{field:C,attributeType:F&&"esriFieldTypeDate"===F.type?"date":null,rotationType:null,valueExpression:B.valueExpression,valueExpressionTitle:B.valueExpressionTitle,
normalizationField:B.normalizationField}},_setRendererTitle:function(B,C){B.legendOptions=y.clone(C.legendOptions);B.legendOptions&&B.legendOptions.title||(B.legendOptions=B.legendOptions||{},B.legendOptions.title=c.getRendererTitle(C,this.layer))},_getSupportedVariables:function(B){var C=B.getVisualVariablesForType("colorInfo",!1)||[],F=B.getVisualVariablesForType("sizeInfo",!1)||[],G=B.getVisualVariablesForType("opacityInfo",!1)||[];B=B.getVisualVariablesForType("rotationInfo",!1)||[];C=q.filter(C,
this._variableFilter);F=q.filter(F,this._variableFilter);G=q.filter(G,this._variableFilter);B=q.filter(B,this._variableFilter);return{sizeVars:F,allVars:C.concat(F).concat(G).concat(B)}},_variableFilter:function(B){return"function"!==typeof B.field&&!n.viewScaleRE.test(B.valueExpression)},_createClusterVariables:function(B,C){return q.map(B,function(F){return this._createVarForAvg(F,C)},this)},_createVarForAvg:function(B,C){var F=y.clone(B),G=this._getVariableAttributeInfo(B);F.field=z.getClusterField(G,
"avg");F.normalizationField=null;F.valueExpression=null;F.valueExpressionTitle=null;G=this._getStatInfo(G,"avg");this._addStatInfo(C,G);this._setVariableTitle(F,B);return F},_getVariableAttributeInfo:function(B){var C="rotationInfo"===B.type,F=C?"angle":null;C=C?B.rotationType:null;var G=B.legendOptions&&B.legendOptions.title,H=B.field,J=H?this.layer.getField(H):null;J&&"esriFieldTypeDate"===J.type&&(F="date");return{field:H,attributeType:F,rotationType:C,valueExpression:B.valueExpression,valueExpressionTitle:B.valueExpressionTitle||
B.valueExpression&&G,normalizationField:B.normalizationField}},_setVariableTitle:function(B,C){B.legendOptions&&B.legendOptions.title||(B.legendOptions=B.legendOptions||{},B.legendOptions.title=c.getVisualVariableTitle(C,this.layer))},_getStatInfo:function(B,C){return{statisticHash:z.getStatisticHash(B,C),attributeInfo:B,statisticType:C}},_addStatInfo:function(B,C){var F=this._findStatInfo(B,C);F?F.attributeInfo.valueExpressionTitle||(F.attributeInfo.valueExpressionTitle=C.attributeInfo.valueExpressionTitle):
B.push(C)},_findStatInfo:function(B,C){var F;q.some(B,function(G){G.statisticHash===C.statisticHash&&(F=G);return!!F});return F},_compareStatInfos:function(B,C){var F=q.filter(B,function(H){return!this._findStatInfo(C,H)},this),G=q.filter(C,function(H){return!this._findStatInfo(B,H)},this);return G.length||F.length?{added:G,removed:F}:null},_addSizeByCountVariable:function(B){var C=this._createSizeByCountVariable();C&&this._addVariable(B,C)},_getSizeByCountVariable:function(B){B=B.getVisualVariablesForType("sizeInfo",
!1)||[];return q.filter(B,function(C){return"cluster_count"===C.field})[0]},_updateSizeByCountVariable:function(){var B=this._renderer,C=this._getSizeByCountVariable(B);if(C){var F=this._createSizeByCountVariable();F&&this._replaceVariable(B,C,F)}},_createSizeByCountVariable:function(){var B=this._clusterGenerator;if(B){var C=B.getCurrentLodStats();if(C){var F=B.getNumFeatures();B=B.clusters;var G=C.min,H=C.max;1===C.count&&G===F||1===B.length&&B[0].count===F?(G=1,H=F):G&&G===H&&(H=2*G);F={type:"sizeInfo",
field:"cluster_count",valueUnit:"unknown",minSize:12,maxSize:50,minDataValue:G,maxDataValue:H,legendOptions:{title:r}}}}return F},_addVariable:function(B,C){var F=B.visualVariables||[];F.push(C);B.setVisualVariables(F)},_replaceVariable:function(B,C,F){var G=B.visualVariables;C=q.indexOf(G,C);-1<C&&G.splice(C,1);G.push(F);B.setVisualVariables(G)},_getFields:function(B){var C=[new x({name:"cluster_count",type:"esriFieldTypeInteger"})];q.forEach(B,function(F){var G=F.statisticType;F=F.attributeInfo;
var H;"avg"===G?H="date"===F.attributeType?"esriFieldTypeDate":"esriFieldTypeDouble":"type"===G&&(H=F.field?this.layer.getField(F.field).type:"esriFieldTypeString");C.push(new x({name:z.getClusterField(F,G),type:H}))},this);return C},_createInfoTemplate:function(){var B=this._statisticInfos,C=this._renderer,F=[{fieldName:"cluster_count",label:r,visible:!0,format:{digitSeparator:!0,places:0}}],G=[],H=[f.substitute({count:"{cluster_count}"},w.countSummary)],J=this._isUVRenderer(C)?C.infos:[];q.forEach(B,
function(I){var K=I.statisticType,R=I.attributeInfo,W=z.getClusterField(R,K),P=this._getFieldLabel(I);if("avg"===K){var S={fieldName:W,label:P,visible:!0,format:"date"===R.attributeType?{dateFormat:"shortDateShortTime"}:{digitSeparator:!0,places:1}};var L=this._getFieldSummary(I,W)}else"type"===K&&(L="expression/"+W,S={fieldName:L,visible:!0},G.push({name:W,title:P,returnType:"string",expression:this._getExpression(J,W)}),L=this._getFieldSummary(I,L));S&&F.push(S);L&&H.push(L)},this);return new d({fieldInfos:F,
expressionInfos:G,description:H.join("\x3cbr/\x3e\x3cbr/\x3e")})},_updateInfoTemplate:function(B){var C=B.toJson(),F=this._isUVRenderer(this._renderer)?this._renderer.infos:[];q.forEach(this._statisticInfos,function(G){var H=G.statisticType;G=z.getClusterField(G.attributeInfo,H);"type"===H&&(H=this._findExpressionInfo(G,C))&&(H.expression=this._getExpression(F,G))},this);return new d(C)},_findExpressionInfo:function(B,C){var F;q.some(C.expressionInfos,function(G){G.name===B&&(F=G);return!!F});return F},
_escapeDoubleQuotes:function(B){return B?B.replace(/"/g,'\\"'):""},_getExpression:function(B,C){return["var uvInfos \x3d ["+this._getObjects(B).join(", ")+"];",'var predominantType \x3d Text($feature["'+C+'"]);','var label \x3d "'+this._escapeDoubleQuotes(w.predominantNoneValue)+'";',"for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")},_getObjects:function(B){return q.map(B,function(C){return'{"value": "'+
String(C.value)+'","label": "'+this._escapeDoubleQuotes(String(C.label))+'"}'},this)},_getFieldLabel:function(B){var C=B.statisticType,F=B.attributeInfo,G=F.field;B=F.normalizationField;var H="";if("avg"===C)var J=B?w.avgNormFieldLabel:w.avgFieldLabel;else"type"===C&&(J=w.predominantFieldLabel);J&&(C=F.valueExpression?F.valueExpressionTitle:this.layer.getFieldLabel(G),B=B&&this.layer.getFieldLabel(B),H=f.substitute({fieldLabel:C||"",normFieldLabel:B||""},J));return H},_getFieldSummary:function(B,
C){var F=B.statisticType,G=B.attributeInfo,H=G.field;B=G.normalizationField;var J="";if("avg"===F)var I=B?w.avgNormFieldSummary:w.avgFieldSummary;else"type"===F&&(I=w.predominantFieldSummary);I&&(F=G.valueExpression?G.valueExpressionTitle:this.layer.getFieldLabel(H),B=B&&this.layer.getFieldLabel(B),J=f.substitute({fieldLabel:F||"",normFieldLabel:B||"",fieldValue:"{"+C+"}"},I));return J},_removeFromPopup:function(B){var C=this._map.infoWindow,F=C.features;if(F&&F.length){var G=q.filter(F,function(H){return H.getLayer()!==
B});G.length<F.length&&(G.length?C.setFeatures(G):(C.clearFeatures(),C.hide()))}},_resetClusterNav:function(){this._resetClusterNavPartial();this._popupClusterGraphic=null},_resetClusterNavPartial:function(){this._map.infoWindow.removeActions(this._popupActions);this._hideSingleGraphic(this._popupSingleGraphic);this._popupSingleGraphic=null},_addClusterBoundary:function(B,C){(C=C.clusterFillSymbol)&&(C=new C.constructor(C.toJson()));B=new g(B,C);this._map.graphics.add(B);this._clusterBoundary=B},
_removeClusterBoundary:function(){this._map.graphics.remove(this._clusterBoundary);this._clusterBoundary=null},_createBrowseFeaturesAction:function(){return this._map.infoWindow.addActions([{title:D.NLS_browseFeatures,className:"browseFeatures",callback:y.hitch(this,function(B){B.preventDefault();B=this._map.infoWindow;var C=B.getSelectedFeature(),F=C.getChildGraphics(),G=B.getCurrentAnchor();B.setFeatures(F,{anchor:G});if(F=l.graphicsExtent(F))this._addClusterBoundary(F,B),B.show(this._getPopupLocation(F,
G));this._popupClusterGraphic=C})}])[0]},_getPopupLocation:function(B,C){var F=B.getCenter();C=C.toLowerCase();-1<C.indexOf("top")?F.update(F.x,B.ymax):-1<C.indexOf("bottom")?F.update(F.x,B.ymin):-1<C.indexOf("left")?F.update(B.xmin,F.y):F.update(B.xmax,F.y);return F},_createViewSummaryAction:function(){return this._map.infoWindow.addActions([{title:D.NLS_viewSummary,className:"viewSummary",callback:y.hitch(this,function(B){B.preventDefault();B=this._popupClusterGraphic;var C=this._map.infoWindow;
C.setFeatures([B]);C.show(B.geometry);this._popupClusterGraphic=null})}])[0]},_initClusterUpdates:function(){this._updateSizeVariable();this._updateClusterGraphics();this._eventHandles.push(this._clusterGenerator.on("update-end",y.hitch(this,function(B){(B.mapLevelChange||B.indexChange)&&this._updateSizeVariable();this._updateClusterGraphics()})),this._clusterGenerator.on("index-complete",y.hitch(this,function(){this._updateSizeVariable()})))},_updateClusterGraphics:function(){this._hideSingleGraphics();
var B=[],C=[];q.forEach(this._clusterGenerator.clusters,function(F){var G=new g(F.centroid);G.setAggregationSourceLayer(this.layer);G.setAggregationInfo(F);this._applyClusterAttributes(G,F);1===F.count?(F=this._getSingleGraphic(G),C.push(F)):B.push(G)},this);this._showSingleGraphics(C);this._addGraphics(B)},_addGraphics:function(B){var C=this.container;C.clear();q.forEach(B,function(F){C.add(F)})},_getSingleGraphic:function(B){var C=this._clusterGenerator.getCell(B.getAggregationInfo().primary).features[0],
F=this.layer.renderer;F=F&&F.getSymbol(C);var G=this._getSizeByCountVariable(this._renderer);F&&G&&(B=G?this._renderer.getSize(B,{sizeInfo:G,shape:F.style,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null,C.setSize(B));return C},_showSingleGraphics:function(B){q.forEach(B,this._showSingleGraphic);this._singleGraphics=B},_hideSingleGraphics:function(){q.forEach(this._singleGraphics,function(B){B.setSize(null);this._hideSingleGraphic(B)},this);this._singleGraphics=null},
_clearSingleGraphics:function(){q.forEach(this._singleGraphics,function(B){B.setSize(null)});this._singleGraphics=null},_showSingleGraphic:function(B){B&&B._resume()},_hideSingleGraphic:function(B){B&&B._suspend()},_updateSizeVariable:function(){this.isClusteringEnabled()&&(this._updateSizeByCountVariable(),this.emit("renderer-change"))},_applyClusterAttributes:function(B,C){B.setAttributes(C.attributes)},_createLayerEventListeners:function(){var B=this.layer;this._eventHandles.push(B.on("visibility-change",
y.hitch(this,function(C){this.container.setVisibility(C.visible)})),B.on("scale-range-change",y.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)})),B.on("renderer-change",y.hitch(this,function(){this._applyRenderer()})),B.on("info-template-change",y.hitch(this,function(){this._applyInfoTemplate()})))},_createMapEventListeners:function(){this._eventHandles.push(this._map.on("zoom-start",y.hitch(this,function(){this._removeClusterBoundary();this._removeFromPopup(this.container);
this._removeFromPopup(this.layer);this._resetClusterNav();this.container.clear();this._hideSingleGraphics()})))},_createPopupEventListeners:function(){var B=this._map.infoWindow;this._eventHandles.push(B.on("selection-change",y.hitch(this,function(){this._resetClusterNavPartial();var C=this._map.infoWindow.getSelectedFeature(),F=C&&C.getLayer();if(F){if(F===this.container){this._removeClusterBoundary();var G=this._createBrowseFeaturesAction()}else F===this.layer&&C._isSuspended()?(G=this._createViewSummaryAction(),
this._popupSingleGraphic=C,this._showSingleGraphic(this._popupSingleGraphic)):this._removeClusterBoundary();this._popupActions=G?[G]:null}})),B.on("clear-features",y.hitch(this,function(C){this._resetClusterNav();C.isIntermediate||this._removeClusterBoundary()})),B.on("hide",y.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._suspend();this._clusterBoundary&&this._clusterBoundary.hide()})),B.on("show",y.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._resume();
this._clusterBoundary&&this._clusterBoundary.show()})))},_destroyEventListeners:function(){q.forEach(this._eventHandles,function(B){B.remove()})}});y.setObject("layers.clustering.ClusterManager",b,h);return b})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(b,y,q,a,h,e,g,f){b=b([e,g],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,
constructor:function(m,l){y.mixin(this,l);this.initialize(m,l)},getTitle:function(m){var l;this.info&&(l=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(m,this._fetchAttributes(m,null,this.getExpressionFieldsInTitle()),!0).title);return l||""},getContent:function(m){return this.info?(new f({template:this,graphic:m,chartTheme:this.chartTheme},a.create("div"))).domNode:""}});y.setObject("dijit.PopupTemplate",b,h);return b})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D){b=b(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",initialize:function(r,v){if(r){y.mixin(this,v);this.info=r;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var B=this._fieldLabels={},C=this._fieldsMap={};this.info.fieldInfos&&
q.forEach(this.info.fieldInfos,function(F){var G=F.fieldName.toLowerCase(),H=this._isExpressionField(G)?this.getExpressionInfo(G):null;B[G]=H?H.title:F.label;C[G]=F},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions();this.contentHasAsyncExpressions=this._contentHasAyncExpressions()}},toJson:function(){return a.fromJson(a.toJson(this.info))},getTitle:function(){},getContent:function(){},
getFieldInfo:function(r){var v;q.some(this.info&&this.info.fieldInfos,function(B){B.fieldName===r&&(v=B);return!!v});return v},getExpressionInfo:function(r){if(r=this._getExprField(r)){r=r.toLowerCase();var v;q.some(this.info.expressionInfos,function(B){B.name.toLowerCase()===r&&(v=B);return!!v});return v}},getExpressionFieldsInTitle:function(){return this._getExprFieldsFromTemplatedString(this.info.title)},getExpressionFieldsInContent:function(){var r=this._collectExprFieldsFromTemplatedString(this.info.description,
[]);this.info.description||q.forEach(this.info.fieldInfos,function(v){v.visible&&this._collectExprField(v.fieldName,r)},this);q.forEach(this.info.mediaInfos,function(v){this._collectExprFieldsFromTemplatedString(v.title,r);this._collectExprFieldsFromTemplatedString(v.caption,r);if(v=v.value)this._collectExprFieldsFromTemplatedString(v.linkURL,r),this._collectExprFieldsFromTemplatedString(v.sourceURL,r),q.forEach(v.fields,function(B){this._collectExprField(B,r)},this),this._collectExprField(v.normalizeField,
r),this._collectExprField(v.tooltipField,r)},this);return r},getRequiredExpressionFields:function(){return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())},hasGeometryOperations:function(){return q.some(this._getArcadeExpressions(),function(r){return r.hasGeometryOperations()})},hasAsyncExpressions:function(){return q.some(this._getArcadeExpressions(),function(r){return r.async})},initializeArcadeEngine:function(){return E.initialize(this._getArcadeExpressions())},getComponents:function(r,
v){var B=this.info,C={initArcadeEngine:this.initializeArcadeEngine()};B.fieldInfos&&(B=q.filter(B.fieldInfos,function(F){return-1!==F.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<B.length&&(C.relatedInfo=this._getRelatedRecords({graphic:r,fieldsInfo:B}));this._needFullResolutionFeature(r)&&(C.fullResolutionFeature=this._getFullResolutionFeature(r));return t(C).then(y.hitch(this,function(F){F=F.fullResolutionFeature;var G=v&&v.evaluateAllExpressions,H=G?null:this.getRequiredExpressionFields();
F=(G?this.hasAsyncExpressions():this._hasAsyncExpressions(H))?this._fetchAttributesAsync(r,F,H):this._fetchAttributes(r,F,H);return t([F]).then(y.hitch(this,function(J){return this._getPopupValues(r,J[0])}))}))},getAttachments:function(r){var v=r.getSourceLayer();r=r.attributes;if(this.info.showAttachments&&v&&v.hasAttachments&&v.objectIdField&&(r=r&&r[v.objectIdField]))return v.queryAttachmentInfos(r)},_needFullResolutionFeature:function(r){return(r=r.getSourceLayer())?"function"===typeof r.getMaxAllowableOffset&&
0<r.getMaxAllowableOffset()&&this.hasGeometryOperations():!1},_getFullResolutionFeature:function(r){var v=r.getSourceLayer(),B=v.objectIdField;r=(r=r.attributes)&&B&&r[B];if(null==r)return null;var C=new u;C.where=B+"\x3d"+r;C.maxAllowableOffset=0;C.outFields=[B];v._enableCacheHint(C);return v.queryFeatures(C).then(function(F){return F.features&&F.features[0]})},_isExpressionField:function(r){return this._reExprField.test(r)},_getExprField:function(r){return this._isExpressionField(r)?r.replace(this._reExprField,
""):null},_collectExprField:function(r,v){(r=this._getExprField(r))&&v.push(r);return v},_collectExprFieldsFromTemplatedString:function(r,v){r=this._getExprFieldsFromTemplatedString(r);r.length&&Array.prototype.push.apply(v,r);return v},_getExprFieldsFromTemplatedString:function(r){r=r?r.match(this._reExprFieldPattern):null;return q.map(r,function(v){return v.replace(this._reExprFieldPattern,"$1")},this)},_titleHasAsyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())},
_contentHasAyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInContent())},_hasAsyncExpressions:function(r){return q.some(r,function(v){v=this._exprCache[v];return!(!v||!v.async)},this)},_compileExpressions:function(r){var v={};q.forEach(r,function(B){var C=B.returnType&&B.returnType.toLowerCase();v[B.name]=new n({expression:B.expression,returnType:"number"===C?"number":"string",profile:E})});return v},_getArcadeExpressions:function(){var r=[],v;for(v in this._exprCache)r.push(this._exprCache[v]);
return r},_fetchAttributesAsync:function(r,v,B){var C=this._fetchAttributes(r,v,B);r={};for(var F in C)(v=C[F])&&v.then&&(r[F]=v);return t(r).then(y.hitch(this,function(G){for(var H in G){var J=G[H];C[H]=J instanceof Error?null:this._processArcadeResult(J)}return C}))},_processArcadeResult:function(r){"string"===typeof r&&(r=l.encode(r));return r},_fetchAttributes:function(r,v,B){var C=y.clone(r.attributes)||{},F=v&&v.geometry,G=this._exprPrefix,H=this._exprCache;B=B||q.map(this.info.expressionInfos,
function(J){return J.name});q.forEach(B,function(J){var I=G+J;J=(J=H[J])?r.evaluateExpression(J,this._getEvalOptions(J,r,F)):null;C[I]=this._processArcadeResult(J)},this);return C},_getEvalOptions:function(r,v,B){var C=r.hasGeometryOperations(),F=v.getSourceLayer(),G=F&&(F.getMap()||F.parentLayer&&F.parentLayer.getMap());r=E.getEvalOptions({expression:r,feature:v,layer:F,map:G,spatialReference:G&&G.spatialReference});v=r.context.vars.$feature;C=!(!C||!B);v&&C&&(v._geometry=B);r.skipCache=C;return r},
_getPopupValues:function(r,v,B){v=v||this._fetchAttributes(r);var C=this.info,F=r.getSourceLayer(),G=y.clone(v),H="",J="",I,K,R=F&&F._getDateOpts&&F._getDateOpts().properties;R=R&&R.slice(0);var W={dateFormat:{properties:R,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)},format:null};if(this._relatedInfo)for(L in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(L)){var P=this._relatedInfo[L],S=this._relatedLayersInfo[L];P&&(q.forEach(P.relatedFeatures,function(X){for(K in X.attributes)if(X.attributes.hasOwnProperty(K)&&
"esriRelCardinalityOneToOne"===S.relation.cardinality){var N=this._toRelatedFieldName([S.relation.id,K]);v[N]=G[N]=X.attributes[K]}},this),q.forEach(P.relatedStatsFeatures,function(X){for(K in X.attributes)if(X.attributes.hasOwnProperty(K)){var N=this._toRelatedFieldName([S.relation.id,K]);v[N]=G[N]=X.attributes[K]}},this))}for(I in G){var L=this._fieldsMap[I.toLowerCase()];P=this._getLayerFieldInfo(F,I);L&&P&&(L.fieldName=P.name);G[I]=this._formatValue(G[I],I,W);R&&L&&L.format&&L.format.dateFormat&&
(L=q.indexOf(R,I),-1<L&&R.splice(L,1))}if(F)for(I in R=F.typeIdField,v)if(v.hasOwnProperty(I)&&-1===I.indexOf(this._relatedFieldPrefix)){var aa=v[I];d.isDefined(aa)&&(L=this._getDomainName(F,r,I,aa),d.isDefined(L)?G[I]=L:I===R&&(L=this._getTypeName(F,r,aa),d.isDefined(L)&&(G[I]=L)))}C.title&&(H=this._processFieldsInLinks(this._fixTokens(C.title,F),v),H=y.trim(this._removeEmptyHref(d.substitute(G,H,W)||"")));if(B)return{title:H};C.description&&(J=this._processFieldsInLinks(this._fixTokens(C.description,
F),v),J=y.trim(this._removeEmptyHref(d.substitute(G,J,W)||"")));if(C.fieldInfos){var ba=[];q.forEach(C.fieldInfos,function(X){(I=X.fieldName)&&X.visible&&ba.push([this._fieldLabels[I.toLowerCase()]||I,d.substitute(G,"${"+I+"}",W)||""])},this)}var O;if(C.mediaInfos){var V=[];q.forEach(C.mediaInfos,function(X){O=0;aa=X.value;switch(X.type){case "image":var N=aa.sourceURL;N=N&&y.trim(this._removeEmptyHref(d.substitute(v,this._fixTokens(N,F))));O=!!N;break;case "piechart":case "linechart":case "columnchart":case "barchart":N=
aa.normalizeField;aa.fields=q.map(aa.fields,function(Ba){return(Y=this._getLayerFieldInfo(F,Ba))?Y.name:Ba},this);if(N){var Y=this._getLayerFieldInfo(F,N);aa.normalizeField=Y?Y.name:N}O=q.some(aa.fields,function(Ba){return d.isDefined(v[Ba])||-1!==Ba.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(O){X=y.clone(X);aa=X.value;N=X.title?this._processFieldsInLinks(this._fixTokens(X.title,F),v):"";var ia=X.caption?this._processFieldsInLinks(this._fixTokens(X.caption,
F),v):"";X.title=N?y.trim(this._removeEmptyHref(d.substitute(G,N,W)||"")):"";X.caption=ia?y.trim(this._removeEmptyHref(d.substitute(G,ia,W)||"")):"";if("image"===X.type)aa.sourceURL=d.substitute(v,this._fixTokens(aa.sourceURL,F)),aa.linkURL&&(aa.linkURL=y.trim(d.substitute(v,this._fixTokens(aa.linkURL,F))||""));else{var oa,sa;q.forEach(aa.fields,function(Ba,Da){if(-1!==Ba.indexOf(this._relatedFieldPrefix))sa=this._getRelatedChartInfos(Ba,aa,v,W),sa instanceof Array?aa.fields=sa:aa.fields[Da]=sa;else{var pa=
v[Ba];pa=void 0===pa?null:pa;oa=v[aa.normalizeField]||0;pa&&oa&&(pa/=oa);aa.fields[Da]={y:pa,tooltip:(this._fieldLabels[Ba.toLowerCase()]||Ba)+":\x3cbr/\x3e"+this._formatValue(pa,Ba,W,!!oa)}}},this)}V.push(X)}},this)}return{title:H,description:J,hasDescription:!!C.description,fields:ba&&ba.length?ba:null,mediaInfos:V&&V.length?V:null,formatted:G,editSummary:!1!==C.showLastEditInfo&&F&&F.getEditSummary?F.getEditSummary(r):""}},_getRelatedChartInfos:function(r,v,B,C){var F,G;var H=[];var J=this._fromRelatedFieldName(r);
var I=J[0];var K=this._relatedInfo[I];I=this._relatedLayersInfo[I];K&&q.forEach(K.relatedFeatures,function(R){R=R.attributes;var W;for(W in R)if(R.hasOwnProperty(W)&&W===J[1]){var P={};G=R[W];v.normalizeField&&(F=-1!==v.normalizeField.indexOf(this._relatedFieldPrefix)?R[this._fromRelatedFieldName(v.normalizeField)[1]]:B[v.normalizeField]);G&&F&&(G/=F);if(v.tooltipField)if(-1!==v.tooltipField.indexOf(this._relatedFieldPrefix)){var S=this._fromRelatedFieldName(v.tooltipField)[1],L=d.isDefined(R[S])?
this._formatValue(R[S],v.tooltipField,C,!!F):S;P.tooltip=L+":\x3cbr/\x3e"+this._formatValue(G,S,C,!!F)}else P.tooltip=(this._fieldLabels[r.toLowerCase()]||r)+":\x3cbr/\x3e"+this._formatValue(G,v.tooltipField,C,!!F);else P.tooltip=G;P.y=G;H.push(P)}},this);return"esriRelCardinalityOneToMany"===I.relation.cardinality||"esriRelCardinalityManyToMany"===I.relation.cardinality?H:H[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",longMonthDayYearShortTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longMonthDayYearShortTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longMonthDayYearLongTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
longMonthDayYearLongTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",dayShortMonthYearShortTime:"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",dayShortMonthYearShortTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",dayShortMonthYearLongTime:"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",dayShortMonthYearLongTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",longDateShortTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longDateShortTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longDateLongTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longDateLongTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",
shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_dateFormatsJson:{shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},
shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",
timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",
timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",
timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},_reHref:/href\s*=\s*(")([^"]+)"/ig,_reHrefApos:/href\s*=\s*(')([^']+)'/ig,_fixTokens:function(r,v){var B=this;return r.replace(/(\{([^\{\r\n]+)\})/g,function(C,F,G){C=B._getLayerFieldInfo(v,G);return"$"+(C?"{"+
C.name+"}":F)})},_encodeAttributes:function(r,v){r=y.clone(r)||{};var B,C;for(B in r)(C=r[B])&&"string"===typeof C&&(C=v?C:encodeURIComponent(C),C=C.replace(/'/g,"\x26apos;"),r[B]=C);return r},_processFieldsInLinks:function(r,v){var B=this._encodeAttributes(v),C=this._encodeAttributes(v,!0);v=y.hitch(this,this._addValuesToHref,v,B,C);r&&(r=r.replace(this._reHref,v).replace(this._reHrefApos,v));return r},_addValuesToHref:function(r,v,B,C,F,G){G=G&&y.trim(G);return C=d.substitute(G&&0===G.indexOf("${")?
"'"===F?B:r:v,C)},_getLayerFieldInfo:function(r,v){return r&&r.getField?r.getField(v):null},_formatValue:function(r,v,B,C){var F=this._fieldsMap[v.toLowerCase()],G=F&&F.format;v=-1!==q.indexOf(B.dateFormat.properties,v);var H="number"===typeof r&&!v&&(!G||!G.dateFormat);if(!d.isDefined(r)||!F||!d.isDefined(G))return this._applyFormatting(r,H);F=G.hasOwnProperty("places")||G.hasOwnProperty("digitSeparator");var J=G.hasOwnProperty("digitSeparator")?G.digitSeparator:!0;if(F&&!v)var I={formatType:"NumberFormat",
places:d.isDefined(G.places)&&(!C||0<G.places)?Number(G.places):Infinity};else if(G.dateFormat)I=y.mixin({formatType:"DateFormat",utcOffset:this.utcOffset},this._dateFormatsJson[G.dateFormat]||this._dateFormatsJson.shortDateShortTime);else return this._applyFormatting(r,H);var K=this._applyFormatFunctions(r,I,B);F&&-1<r.constructor.toString().indexOf("Array")&&(K="",q.forEach(r,y.hitch(this,function(R,W){W&&(K+=" ");K+=this._applyFormatFunctions(R,I,B)})));F&&!J&&D.group&&(K=K.replace(new RegExp("\\"+
D.group,"g"),""));v&&(K='\x3cspan class\x3d"esriDateValue"\x3e'+K+"\x3c/span\x3e");return this._applyFormatting(K,H)},_applyFormatFunctions:function(r,v,B){v&&B&&(B.format={myKey:v});r=d.substitute({myKey:r},"${myKey}",B)||"";v&&B&&(B.format=null);return r},_applyFormatting:function(r,v){return v?this._forceLTR(r):this._applyPreWrap(r)},_forceLTR:function(r){var v=f("ie");return v&&10>=v?r:"\x3cspan class\x3d'esriNumericValue'\x3e"+r+"\x3c/span\x3e"},_applyPreWrap:function(r){return"string"===typeof r?
r.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):r},_insertOffset:function(r){r&&(r=d.isDefined(this.utcOffset)?r.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):r);return r},_getDomainName:function(r,v,B,C){return(r=r.getDomain&&r.getDomain(B,{feature:v}))&&r.codedValues?r.getName(C):null},_getTypeName:function(r,v,B){return(r=r.getType&&r.getType(v))&&r.name},_getRelatedRecords:function(r){var v=r.graphic,B;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=
this._getRelatedLayersInfo(r).then(y.hitch(this,function(C){for(B in C)C.hasOwnProperty(B)&&C[B]&&(this._relatedLayersInfo[B].relatedLayerInfo=C[B])})));return this._relatedLayersInfoPromise.then(y.hitch(this,function(){return this._queryRelatedLayers(v)})).then(y.hitch(this,function(C){this._setRelatedRecords(v,C);return C}))},_getRelatedLayersInfo:function(r){var v=r.fieldsInfo,B,C={};var F=r.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});q.forEach(v,function(G){var H;
var J=this._fromRelatedFieldName(G.fieldName);var I=J[0];J=J[1];if(I&&(!this._relatedLayersInfo[I]&&F&&F.relationships&&(q.some(F.relationships,function(R){if(R.id==I)return H=R,!0}),H&&(this._relatedLayersInfo[I]={relation:H,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[I]&&(this._relatedLayersInfo[I].relatedFields.push(J),G.statisticType))){var K=new z;K.statisticType=G.statisticType;K.onStatisticField=J;K.outStatisticFieldName=J;this._relatedLayersInfo[I].outStatistics.push(K)}},
this);for(B in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(B)&&this._relatedLayersInfo[B]&&(r=this._relatedLayersInfo[B].relation,r=F.url.replace(/[0-9]+$/,r.relatedTableId),this._relatedLayersInfo[B].relatedLayerUrl=r,C[B]=k({url:r,content:{f:"json"},callbackParamName:"callback"}));return m(C)},_queryRelatedLayers:function(r){var v={},B;for(B in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(B)&&(v[B]=this._queryRelatedLayer({graphic:r,relatedInfo:this._relatedLayersInfo[B]}));
return m(v)},_queryRelatedLayer:function(r){var v,B;var C=r.graphic;var F=C.getSourceLayer();var G=F.url.match(/[0-9]+$/g)[0];var H=r.relatedInfo;var J=H.relatedLayerInfo;var I=H.relatedLayerUrl;var K=H.relation;r=q.filter(J.relationships,function(aa){return aa.relatedTableId===parseInt(G,10)});1===r.length?v=r[0]:1<r.length&&q.some(r,function(aa){aa.id===K.id&&(v=aa);return!!v});if(v){var R=new u;q.some(J.fields,function(aa){if(aa.name===v.keyField)return B=-1!==q.indexOf(["esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],aa.type)?"number":"string",!0});if(v.relationshipTableId&&v.keyFieldInRelationshipTable){var W=new g;this._queryRelatedRecords(C,v).then(y.hitch(this,function(aa){var ba;(ba=aa[C.attributes[F.objectIdField]])?(aa=q.map(ba.features,function(O){return O.attributes[J.objectIdField]},this),H.outStatistics&&0<H.outStatistics.length&&J.supportsStatistics&&(S=new u,S.where=this._chunkWhereInClause(J.objectIdField,aa,1E3),S.outFields=R.outFields,
S.outStatistics=H.outStatistics),S&&(L=new x(I),L.execute(S).then(y.hitch(this,function(O){var V=[];V.push(ba);V.push(O);W.resolve(V)})))):W.resolve()}))}else{var P="string"===B?v.keyField+"\x3d'"+C.attributes[K.keyField]+"'":v.keyField+"\x3d"+C.attributes[K.keyField];R.where=P;R.outFields=H.relatedFields;if(H.outStatistics&&0<H.outStatistics.length&&J.supportsStatistics){var S=new u;S.where=R.where;S.outFields=R.outFields;S.outStatistics=H.outStatistics}var L=new x(I);P=[];P.push(L.execute(R));S&&
P.push(L.execute(S))}}return P?m(P):W?W.promise:void 0},_setRelatedRecords:function(r,v){this._relatedInfo=[];for(var B in v)v.hasOwnProperty(B)&&v[B]&&(r=v[B],this._relatedInfo[B]={},this._relatedInfo[B].relatedFeatures=r[0].features,d.isDefined(r[1])&&(this._relatedInfo[B].relatedStatsFeatures=r[1].features))},_handlerErrorResponse:function(r,v){r.reject(v)},_fromRelatedFieldName:function(r){var v=[];-1!==r.indexOf(this._relatedFieldPrefix)&&(r=r.split("/"),v=r.slice(1));return v},_toRelatedFieldName:function(r){var v=
"";r&&0<r.length&&(v=this._relatedFieldPrefix+r[0]+"/"+r[1]);return v},_queryRelatedRecords:function(r,v){var B=r.getSourceLayer(),C=new A;C.outFields=["*"];C.relationshipId=v.id;C.objectIds=[r.attributes[B.objectIdField]];return B.queryRelatedFeatures(C)},_removeEmptyHref:function(r){return r.replace(/href=(""|'')/gi,"")},_chunkWhereInClause:function(r,v,B){for(var C=0,F=[];C<v.length;)F.push(r+" IN ("+v.slice(C,B+C)+")"),C+=B;return F.join(" OR ")}});return c.PopupInfo=c.PopupInfoTemplate=b})},
"dojox/html/entities":function(){define(["dojo/_base/lang"],function(b){var y=b.getObject("dojox.html.entities",!0),q=function(h,e){if(e._encCache&&e._encCache.regexp&&e._encCache.mapper&&e.length==e._encCache.length){var g=e._encCache.mapper;var f=e._encCache.regexp}else{g={};f=["["];var m;for(m=0;m<e.length;m++)g[e[m][0]]="\x26"+e[m][1]+";",f.push(e[m][0]);f.push("]");f=new RegExp(f.join(""),"g");e._encCache={mapper:g,regexp:f,length:e.length}}return h=h.replace(f,function(l){return g[l]})},a=function(h,
e){if(e._decCache&&e._decCache.regexp&&e._decCache.mapper&&e.length==e._decCache.length){var g=e._decCache.mapper;var f=e._decCache.regexp}else{g={};f=["("];var m;for(m=0;m<e.length;m++){var l="\x26"+e[m][1]+";";m&&f.push("|");g[l]=e[m][0];f.push(l)}f.push(")");f=new RegExp(f.join(""),"g");e._decCache={mapper:g,regexp:f,length:e.length}}return h=h.replace(f,function(d){return g[d]})};y.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];y.latin=[["\u00a1","iexcl"],["\u00a2",
"cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],
["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],
["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1",
"ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],
["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],
["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],
["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],
["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665",
"hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039",
"lsaquo"],["\u203a","rsaquo"]];y.encode=function(h,e){h&&(e?h=q(h,e):(h=q(h,y.html),h=q(h,y.latin)));return h};y.decode=function(h,e){h&&(e?h=a(h,e):(h=a(h,y.html),h=a(h,y.latin)));return h};return y})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(b,y,q,a,h,e){b=b(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,async:null,id:null,
syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,_compiled:!1,constructor:function(g){y.mixin(this,g);this.returnType=this.returnType||"string";this.id=h.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var g=this._traits.geometryOperations;void 0===g&&(g=this._traits.geometryOperations=e.hasGeometryOperations(this.syntaxTree));return g},hasFeatureSetOperations:function(){var g=
this._traits.featureSetOperations;void 0===g&&(g=this._traits.featureSetOperations=e.hasFeatureSetOperations(this.syntaxTree));return g},hasVariable:function(g){var f=this._traits.variables;void 0===f[g]&&(f[g]=e.hasVariable(this.syntaxTree,g));return f[g]},hasFunction:function(g){var f=this._traits.functions;void 0===f[g]&&(f[g]=e.hasFunction(this.syntaxTree,g));return f[g]},evaluate:function(g){this._compile();var f=this._attributeCache.compiledFunc;return this.async?e.executeAsyncFunction(f,g):
e.executeFunction(f,g)},_setSyntaxTree:function(g){this.syntaxTree=g;this._compiled=!1;this._traits={variables:{},functions:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef={valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),
isJSFunc:!1}},_compile:function(){this._compiled||(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}});return a.ArcadeExpression=b})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(b,y,q,a,h,e,g,f){b=new (b(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map"],
async:["$layer","$datastore","$map"]},context:{vars:{$feature:"any",$layer:"any",$datastore:"any",$map:"any"}}},initialize:function(m){var l=[];f.hasGeometryOperations(m)&&l.push(g.enableGeometryOperations());(f.hasFeatureSetOperations(m)||f.hasVariables(m,this.defaults.globals.featureSet))&&l.push(g.enableFeatureSetOperations());f.isAsync(m)&&l.push(g.enableAsyncOperations());return h(l)},isAsync:function(m){m=[m];return f.hasFeatureSetOperations(m)||f.hasVariables(m,this.defaults.globals.async)},
parse:function(m){return g.createSyntaxTree(m.expression)},compile:function(m){var l=y.clone(this.defaults.context);l.useAsync=m.async;return m.syntaxTree?g.createFunction(m.syntaxTree,l):null},getEvalOptions:function(m){var l=m.expression,d=m.feature,c=m.layer,k=m.map;m=m.spatialReference;d=d&&l.hasVariable("$feature")?e.createFromGraphicLikeObject(d.geometry,d.attributes,c):null;var t;if(c){var n={spatialReference:m};l.hasVariable("$layer")&&(t=c.getMap()?g.createFeatureSetFromLayer(c,n):g.createFeatureSetFromLayerUrl(c.url,
n));if(l.hasVariable("$datastore"))var u=(u=f.getServiceUrl(c.url))?g.createFeatureSetCollectionFromServiceUrl(u,n):null}l=k&&l.hasVariable("$map")?g.createFeatureSetCollectionFromMap(k):null;return{context:{vars:{$feature:d,$layer:t,$datastore:u,$map:l},spatialReference:m}}}}));y.setObject("arcadeProfiles.popupProfile",b,a);return b})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w){var D=0,r=w.widgets.popup,v=w.widgets.templatePicker;y=y([E,n,u],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=a.mixin({},r)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(v.loading);this._contentDfd=this.template.getComponents(this.graphic).then(a.hitch(this,this._handleComponentsSuccess)).otherwise(a.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var B=this._mediaInfos,C=B.length,F=this.domNode,G=this._prevMedia,H=this._nextMedia;if(1<C){var J=0,I=0;h.forEach(B,function(K){"image"===K.type?J++:-1!==K.type.indexOf("chart")&&I++});J&&(l.set(this._imageCount,"innerHTML",J),e.query(".summary .image",
F).removeClass("hidden"));I&&(l.set(this._chartCount,"innerHTML",I),e.query(".summary .chart",F).removeClass("hidden"))}else e.query(".summary",F).addClass("hidden"),d.add(G,"hidden"),d.add(H,"hidden");B=this._mediaPtr;0===B?d.add(G,"hidden"):d.remove(G,"hidden");B===C-1?d.add(H,"hidden"):d.remove(H,"hidden");this._destroyFrame()},_displayMedia:function(){var B=this._mediaInfos[this._mediaPtr],C=B.title,F=B.caption,G=e.query(".mediaSection .hzLine",this.domNode)[0];l.set(this._mediaTitle,"innerHTML",
C);d[C?"remove":"add"](this._mediaTitle,"hidden");l.set(this._mediaCaption,"innerHTML",F);d[F?"remove":"add"](this._mediaCaption,"hidden");d[C&&F?"remove":"add"](G,"hidden");this._rid=null;if("image"===B.type)this._showImage(B);else{var H=this;C=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"];F=B.value.theme||this.chartTheme;a.isString(F)&&(F=F.replace(/\./gi,"/"),-1===F.indexOf("/")&&(F="dojox/charting/themes/"+F));F||(F="./Rainbow");C.push(F);try{var J=this._rid=D++;b(C,function(I,
K,R){J===H._rid&&(H._rid=null,H._showChart(B.type,B.value,I,K,R))})}catch(I){}}},_preventNewTab:function(B){return(B=B&&a.trim(B).toLowerCase())&&(0===B.indexOf("mailto:")||0===B.indexOf("tel:"))},_showImage:function(B){d.add(this._mediaFrame,"image");var C=k.get(this._gallery,"height"),F=B.value,G=t.decode(F.linkURL);F=t.decode(F.sourceURL);var H;G&&(H=c.create("a",{href:G,target:this._preventNewTab(G)?"":"_blank"},this._mediaFrame));G=B.refreshInterval?this._addURLParameter(F,"timestamp",Date.now()):
F;c.create("img",{className:"esriPopupMediaImage",src:G},H||this._mediaFrame);var J=e.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=q.connect(J,"onload",this,function(){this._clearImageHandles();this._imageLoaded(J,C);this._initImageRefresh(B)})},_addURLParameter:function(B,C,F){var G=-1===B.indexOf("?")?"?":"\x26";return B+G+C+"\x3d"+F},_initImageRefresh:function(B){if(B.refreshInterval){var C=6E4*B.refreshInterval;this._imageRefreshHandle=setTimeout(a.hitch(this,function(){this._destroyFrame();
this._showImage(B)}),C)}},_clearImageHandles:function(){q.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(B,C,F,G,H){d.remove(this._mediaFrame,"image");F=this._chart=new F(c.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});H&&F.setTheme(H);switch(B){case "piechart":F.addPlot("default",{type:"Pie",labels:!1});F.addSeries("Series A",C.fields);break;case "linechart":F.addPlot("default",
{type:"Markers"});F.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});F.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});h.forEach(C.fields,function(J,I){J.x=I+1});F.addSeries("Series A",C.fields);break;case "columnchart":F.addPlot("default",{type:"Columns",gap:3});F.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});F.addSeries("Series A",C.fields);break;case "barchart":F.addPlot("default",{type:"Bars",gap:3}),F.addAxis("x",{includeZero:!0,fixUpper:"minor",
minorLabels:!1}),F.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),F.addSeries("Series A",C.fields)}this._action=new G(F);F.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);l.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(B,C){var F=B.height;F<C&&k.set(B,"marginTop",Math.round((C-F)/2)+"px")},_attListHandler:function(B,
C){if(B===this._attachmentsDfd){this._attachmentsDfd=null;var F="";C instanceof Error||!C||!C.length||h.forEach(C,function(G){F+="\x3cli\x3e";F+="\x3ca href\x3d'"+z.addProxy(G.url)+"' target\x3d'_blank'\x3e"+(G.name||"[No name]")+"\x3c/a\x3e";F+="\x3c/li\x3e"});l.set(this._attachmentsList,"innerHTML",F||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_createLinkIfURI:function(B,C){var F=z.getURIInfo(B);if(F){var G=B.match(F.pattern);B=G&&G[2];G=t.decode(G[1]);c.create("a",{target:"_blank",href:G,
title:G,innerHTML:A.substitute({appName:F.appName,hierPart:B},F.label)},C)}else l.set(C,"innerHTML",B)},_showStatus:function(B){l.set(this._status,"innerHTML",B);d.remove(this._status,"hidden");e.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){l.set(this._status,"innerHTML","");d.add(this._status,"hidden");e.query(".mainSection",this.domNode).removeClass("hidden")},_handleComponentsSuccess:function(B){if(B){this._hideStatus();var C=this.showTitle?B.title:"",F=B.description,
G=B.fields,H=B.mediaInfos,J=this.domNode,I=this._nls,K=this,R=this.template,W=this.graphic;this._prevMedia.title=I.NLS_prevMedia;this._nextMedia.title=I.NLS_nextMedia;l.set(this._title,"innerHTML",C);C||d.add(this._title,"hidden");if(!B.hasDescription&&G&&(F="",G=h.map(G,function(S){var L=c.create("tr",{vAlign:"top"});c.create("td",{className:"attrName",innerHTML:t.encode(S[0])},L);var aa=c.create("td",{className:"attrValue"},L);this._createLinkIfURI(S[1],aa);return L},this),G.length)){var P=c.create("table",
{className:"attrTable",cellPadding:"0px",cellSpacing:"0px"});h.forEach(G,function(S){P.appendChild(S)})}P?(this._description.appendChild(P),F=!0):l.set(this._description,"innerHTML",F);F||d.add(this._description,"hidden");e.query("a",this._description).forEach(function(S){K._preventNewTab(S.href)?"_blank"===S.target&&l.remove(S,"target"):l.set(S,"target","_blank")});C&&F?e.query(".mainSection .hzLine",J).removeClass("hidden"):C||F?e.query(".mainSection .hzLine",J).addClass("hidden"):e.query(".mainSection",
J).addClass("hidden");if(C=this._attachmentsDfd=R.getAttachments(W))C.addBoth(a.hitch(this,this._attListHandler,C)),l.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+I.NLS_searching+"...\x3c/li\x3e"),e.query(".attachmentsSection",J).removeClass("hidden");H&&H.length&&(e.query(".mediaSection",J).removeClass("hidden"),m.setSelectable(this._mediaFrame,!1),this._mediaInfos=H,this._mediaPtr=0,this._updateUI(),this._displayMedia());B.editSummary&&(l.set(this._editSummary,"innerHTML",B.editSummary),H&&
H.length&&d.remove(this._mediaBreak,"hidden"),d.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(r.NLS_noInfo)},_handleComponentsError:function(B){B&&"cancel"===B.dojoType||this._showStatus(r.NLS_noInfo)}});a.setObject("dijit._PopupRenderer",y,x);return y})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(b,y,q,a,h,e){return b([e,h],{_onMap:function(g){var f=
this.constructor._onMap;f&&f.FINAL||(delete this.constructor._onMap,f=this.registerConnectEvents(),f.FINAL=!0);g=g.toLowerCase();if(f[g])var m=this[f[g].method];else g=this._onCamelCase(g),this[g]&&(m=g);return m},on:function(g,f){var m=this._onMap(g),l=g.replace(/\-/g,""),d="on"+l in this.domNode;return m||!d?this.inherited(arguments):this.own(a(this.domNode,l,f))[0]},emit:function(g,f,m){var l,d=g.toLowerCase(),c=this.constructor._onMap||this.registerConnectEvents();var k=this[this._onMap(d)];f=
f||{};f.target||(f.target=this);if(k&&c&&c[d]){this._onObj2Arr(function(){l=Array.prototype.slice.call(arguments)},c[d].argKeys)(f);var t=y.mixin({},arguments);t[2]=l;t[0]=c[d].name.replace(/^on/,"")}return this.inherited(t||arguments)}})})},"esri/dijit/Legend/utils":function(){define(["dojo/_base/lang","../../lang","dojo/i18n!../../nls/jsapi"],function(b,y,q){var a=q.widgets.legend;return{getVisualVariableTitle:function(h,e){var g=h.field,f=h.normalizationField,m=!1,l=!1,d=!1;g=b.isFunction(g)?null:
g;f=b.isFunction(f)?null:f;if(h.legendOptions&&h.legendOptions.title)var c=h.legendOptions.title;else if(h.valueExpressionTitle)c=h.valueExpressionTitle;else{if(e.renderer&&e.renderer.authoringInfo&&e.renderer.authoringInfo.visualVariables){var k=e.renderer.authoringInfo.visualVariables;for(h=0;h<k.length;h++){var t=k[h];if("colorInfo"===t.type&&"ratio"===t.style){m=!0;break}else if("colorInfo"===t.type&&"percent"===t.style){l=!0;break}else if("colorInfo"===t.type&&"percentTotal"===t.style){d=!0;
break}}}(m=d&&"showRatioPercentTotal"||l&&"showRatioPercent"||m&&"showRatio"||f&&"showNormField"||g&&"showField"||null)&&(c=y.substitute({field:g&&e.getFieldLabel(g),normField:f&&e.getFieldLabel(f)},"showField"===m?"${field}":a[m]))}return c},getRendererTitle:function(h,e){if(h){if("esri.renderer.ClassBreaksRenderer"===h.declaredClass){var g=h.attributeField;var f=h.normalizationField;var m="percent-of-total"===h.normalizationType}g=b.isFunction(g)?null:g;f=b.isFunction(f)?null:f;if(h.legendOptions&&
h.legendOptions.title)var l=h.legendOptions.title;else h.valueExpressionTitle?l=h.valueExpressionTitle:(h=f&&"showNormField"||(m?"showNormPct":null)||g&&"showField"||null)&&(l=y.substitute({field:g&&e.getFieldLabel(g),normField:f&&e.getFieldLabel(f)},"showField"===h?"${field}":a[h]))}return l}}})},"esri/layers/clustering/GeohashAggregation":function(){define("dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t){b=y(e,{loaded:!1,started:!1,map:null,layer:null,lod:null,tolerance:null,clusterMode:null,clusterRadius:null,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0,clusters:null,clustersEnabled:!0,statisticInfos:null,defaults:{lod:1,tolerance:0,clusterMode:"auto",clusterRadius:80,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0},_eventHandles:null,_updateHandle:null,_indexHandle:null,_cellIndex:null,_globalIndex:null,_perfProfile:null,
_indexUpdated:!1,_cellSizeScaleFactor:1.5,_extentScaleFactor:1.25,_maxGeohashLength:12,_minClusterRadius:15,_levelChange:!0,_clusterFieldPrefix:"cluster_",_mapLevelChange:!1,constructor:function(n){this._update=q.hitch(this,this._update);this._indexFeatures=q.hitch(this,this._indexFeatures);this._eventHandles=[];this._globalIndex={numFeatures:null,fullExtent:null,lodStats:null};this._perfProfile={lastIndex:{total:null,numFeatures:0},lastUpdate:{cells:null,clusters:null,total:null}};this.clusters=
[];this.map=n.map;this.layer=n.layer;this.setLod(n.lod);this.setTolerance(n.tolerance);this.setClusterMode(n.clusterMode);this.setClusterRadius(n.clusterRadius);this.setSortEnabled(n.sortEnabled);this.setFilterEnabled(n.filterEnabled);this.setBufferEnabled(n.bufferEnabled);this.setUpdateEnabled(n.updateEnabled);this.setStatisticInfos(n.statisticInfos);this._load();this.loaded?this._startup():this._eventHandles.push(this.on("load",q.hitch(this,this._startup)))},destroy:function(n){this._displayFeatures(!0,
n);a.forEach(this._eventHandles,function(u){u.remove()});d.clearTimeout(this._updateHandle);d.clearTimeout(this._indexHandle);this._cellIndex=this._globalIndex=this._eventHandles=this._updateHandle=this._indexHandle=this.map=this.layer=this.clusters=null},setLod:function(n){var u=this.lod;this.lod=n||this.defaults.lod;u!==this.lod&&this.update()},setTolerance:function(n){var u=this.tolerance;this.tolerance=n||this.defaults.tolerance;u!==this.tolerance&&this.update()},setClusterMode:function(n){var u=
this.clusterMode;this.clusterMode=n||this.defaults.clusterMode;this._evalClusterParams();u!==this.clusterMode&&this.update()},setClusterRadius:function(n){var u=this.clusterRadius;this.clusterRadius=null!=n?n:this.defaults.clusterRadius;this._evalClusterParams();u!==this.clusterRadius&&this.update()},setSortEnabled:function(n){var u=this.sortEnabled;this.sortEnabled=null!=n?!!n:this.defaults.sortEnabled;u!==this.sortEnabled&&this.update()},setFilterEnabled:function(n){var u=this.filterEnabled;this.filterEnabled=
null!=n?!!n:this.defaults.filterEnabled;u!==this.filterEnabled&&this.update()},setBufferEnabled:function(n){var u=this.bufferEnabled;this.bufferEnabled=null!=n?!!n:this.defaults.bufferEnabled;u!==this.bufferEnabled&&this.update()},setUpdateEnabled:function(n){var u=this.updateEnabled;(this.updateEnabled=null!=n?!!n:this.defaults.updateEnabled)&&u!==this.updateEnabled&&(this._mapLevelChange=!0,this.update())},setStatisticInfos:function(n){this.statisticInfos=n||[];this.loaded&&this._applyStatInfos(this.statisticInfos)},
update:function(){this.loaded&&null==this._updateHandle&&(this._updateHandle=d.setTimeout(this._update,d.priority.HIGH))},isUpdateScheduled:function(){return null!=this._updateHandle},index:function(){this.loaded&&null==this._indexHandle&&(this._indexHandle=d.setTimeout(this._indexFeatures,d.priority.HIGH))},getCell:function(n){return this._cellIndex[n.length][n]},getCluster:function(n){var u;a.some(this.clusters,function(x){-1<a.indexOf(x.geohashes,n)&&(u=x);return!!u});return u},getCellsInCluster:function(n){var u=
[];a.forEach(n&&n.geohashes,function(x){(x=this.getCell(x))&&u.push(x)},this);return u},getFeaturesInCluster:function(n){var u=[];n=this.getCellsInCluster(n);a.forEach(n,function(x){Array.prototype.push.apply(u,x.features)});return u},toggleFeatureVisibility:function(n){this.index()},getCurrentLodStats:function(){var n=this._globalIndex.lodStats;return n&&n[this.lod]},getNumFeatures:function(){return this._globalIndex.numFeatures},getFullExtent:function(){var n=this._globalIndex.fullExtent;return n&&
Infinity!==n.xmin?new f(n):null},_load:function(){this._displayFeatures(!1);this._checkLoadStatus();this.map.loaded||this._eventHandles.push(this.map.on("load",q.hitch(this,this._checkLoadStatus)));this.layer.loaded||this._eventHandles.push(this.layer.on("load",q.hitch(this,this._checkLoadStatus)))},_checkLoadStatus:function(){if(this.map.loaded&&this.layer.loaded){if("esriGeometryPoint"!==this.layer.geometryType)var n=Error("GeohashAggregation is supported only for points");else{var u=this.map.spatialReference;
u.isWebMercator()||4326===u.wkid||(n=Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))}n?(this.loadError=n,this.emit("load-error",{error:n})):(this.loaded=!0,this.emit("load"))}},_startup:function(){this._evalUpdateStatus();this.index();this._processExtentChange();this._eventHandles.push(this.layer.on("update-end",q.hitch(this,this.index)),this.layer.on("edits-complete",q.hitch(this,this.index)),this.layer.on("graphics-clear",q.hitch(this,this.index)),
this.layer.on("suspend",q.hitch(this,this._evalUpdateStatus)),this.layer.on("resume",q.hitch(this,this._evalUpdateStatus)),this.map.on("extent-change",q.hitch(this,this._processExtentChange)))},_evalUpdateStatus:function(){this.setUpdateEnabled(!this.layer.suspended)},_processExtentChange:function(n){this._mapLevelChange=!(!n||!n.levelChange);this._evalClusterParams();this.update()},_update:function(){this._updateHandle=null;if(this.updateEnabled){this.emit("update-start");if(this.clustersEnabled){var n=
this.map.geographicExtent;if(n){var u=this._getIntersectingCells(n);n=this._getClusters(u.cells,n);this.clusters=n.clusters;this._applyStatInfosToClusters();u=u.profile;n=n.profile;var x=u.total+n.total;u.total=this._getElapsedTime(u.total);n.total=this._getElapsedTime(n.total);var A=this._perfProfile.lastUpdate={};A.cells=u;A.clusters=n;A.total=this._getElapsedTime(x)}}else this.clusters=[],this._perfProfile.lastUpdate=null;u=this._indexUpdated;this._indexUpdated=!1;n=this._mapLevelChange;this._mapLevelChange=
!1;this.emit("update-end",{levelChange:this._levelChange,mapLevelChange:n,indexChange:u})}},_displayFeatures:function(n,u){var x=this.layer;n=!n;x.suspendGraphics(n);!1!==u&&(n?x.clearNodes():x.redraw())},_indexFeatures:function(){this._indexHandle=null;var n=this._getTime();this._initializeIndexing();var u=0,x=this._globalIndex.fullExtent;a.forEach(this.layer.graphics,function(E){if(E.visible){var w=E.geometry,D=this._getLngLat(w);if(D){var r=w.getCacheValue("_geohash");void 0===r&&(r=k.pointToGeohash(D),
w.setCacheValue("_geohash",r||null))}r&&(this._addGeohashToIndex(r,E,D),u++,this._updateExtent(x,D))}},this);this._applyStatInfosToIndex();this._globalIndex.numFeatures=u;for(var A=this._globalIndex.lodStats,z=1;z<=this._maxGeohashLength;z++)A[z]=this._getLODStats(z,u);this._perfProfile.lastIndex.total=this._getElapsedTime(n,this._getTime());this._perfProfile.lastIndex.numFeatures=u;this._indexUpdated=!0;this.emit("index-complete");this.started||(this.started=!0,this.emit("start"));this.update()},
_initializeIndexing:function(){this._globalIndex={numFeatures:0,fullExtent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},lodStats:{}};for(var n=this._cellIndex=[],u=1;u<=this._maxGeohashLength;u++)n[u]={}},_getLngLat:function(n){if(n){var u=n.getLongitude();n=n.getLatitude();n=null!=u&&null!=n?{x:u,y:n}:null}return n},_addGeohashToIndex:function(n,u,x){for(var A=this._cellIndex,z="",E=0;E<this._maxGeohashLength;E++){z+=n[E];var w=A[z.length],D=w[z];D||(D=w[z]={count:0,centroid:{x:null,
y:null},extent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},features:[],geohash:z,statistics:null});this._updateItem(D,1,x,!0);D.features.push(u)}},_getLODStats:function(n,u){var x=this._cellIndex[n],A=0,z=Infinity,E=-Infinity,w=null,D;for(D in x){var r=x[D];A++;r.count<z&&(z=r.count);r.count>E&&(E=r.count)}0<A&&(w=Number((u/A).toFixed(2)));return{lod:n,count:A,min:Infinity===z?null:z,max:-Infinity===E?null:E,avg:w}},_evalClusterParams:function(){if(this.loaded&&"auto"===this.clusterMode){var n=
this._getClusterParams(this.map.getResolutionInMeters(),this.clusterRadius,this._minClusterRadius);this._levelChange=this.lod!==n.lod;this.lod=n.lod;this.tolerance=n.tolerance}},_getClusterParams:function(n,u,x){u<x&&(u=x);n=Math.ceil(n*u);u=this._getClosestLODRange(n).max;do x=this._getCellSize(u),(x=n>=this._cellSizeScaleFactor*x||1===x)||(u+=1);while(!x);x=n/this._getCellSize(u);return{lod:u,tolerance:n,multiplier:Number(x.toFixed(2))}},_getClosestLODRange:function(n){for(var u,x=this._maxGeohashLength;1<=
x;x--)if(this._getCellSize(x)>=n){u=x;break}null==u&&(u=1);n=u+1;n>this._maxGeohashLength&&(n=this._maxGeohashLength);return{min:u,max:n}},_getCellSize:function(n){n=k.getCellSizeInMeters(n);return Math.ceil(Math.min(n.width,n.height))},_sorter:function(n,u){var x=n.centroid,A=u.centroid;return n.count>u.count?-1:n.count<u.count?1:x.x>A.x?-1:x.x<A.x?1:0},_getIntersectingCells:function(n){var u=this._getTime();this.bufferEnabled&&(n=n.expand(this._extentScaleFactor));var x=k.getIntersecting(n,this.lod,
this.bufferEnabled?this.tolerance:0);n=this._getTime();var A=[],z=this.tolerance,E=this.sortEnabled;a.forEach(x,function(w){(w=this.getCell(w))&&A.push(w)},this);z&&E&&A.sort(this._sorter);x=this._getTime();return{cells:A,profile:{findCells:this._getElapsedTime(u,n),scanAndSortCells:this._getElapsedTime(n,x),total:x-u}}},_getClusters:function(n,u){var x=this._getTime(),A=[],z={},E={findCells:0};a.forEach(n,function(w,D){(w=this._createCluster(w,z,E))&&A.push(w)},this);this._markIntersecting(A,u);
this.filterEnabled&&(A=this._getIntersectingClusters(A));n=this._getTime();return{clusters:A,profile:{findCellsInCluster:this._getElapsedTime(E.findCells),total:n-x}}},_markIntersecting:function(n,u){var x=u.normalize();a.forEach(n,function(A){var z=A.centroid.x,E=A.centroid.y;A.isIntersecting=a.some(x,function(w){return z>=w.xmin&&z<=w.xmax&&E>=w.ymin&&E<=w.ymax})})},_getIntersectingClusters:function(n){return a.filter(n,function(u){return u.isIntersecting})},_createCluster:function(n,u,x){if(!u[n.geohash]){var A=
[{cell:n,distance:0}];if(this.tolerance){var z=this._getTime(),E=k.getNeighborsWithinDistance(n.centroid,this.lod,this.tolerance);x.findCells+=this._getTime()-z;a.forEach(E,function(w){if(w!==n.geohash&&(w=this.getCell(w))){var D=this._calculateDistance(n.centroid,w.centroid);D<=this.tolerance&&A.push({cell:w,distance:D})}},this)}return this._mergeCells(A,u)}},_calculateDistance:function(n,u){return m.getLength(k.geographicToWebMercator(n),k.geographicToWebMercator(u))},_mergeCells:function(n,u){var x=
this._initializeCluster({},n[0].cell.geohash);a.forEach(n,function(A){var z=A.cell,E=z.geohash;A=A.distance;var w=u[E];if(w)if(A<w.distance)this._removeCellFromCluster(E,u);else return;u[E]={cluster:x,distance:A};this._updateItem(x,z.count,z.centroid);x.geohashes.push(E)},this);return x},_removeCellFromCluster:function(n,u){var x=u[n].cluster;delete u[n];n=a.indexOf(x.geohashes,n);-1<n&&x.geohashes.splice(n,1);this._reevaluateCluster(x)},_reevaluateCluster:function(n){var u=n.geohashes;n=this._initializeCluster(n,
n.primary);a.forEach(u,function(x){var A=this.getCell(x);A&&(this._updateItem(n,A.count,A.centroid),n.geohashes.push(x))},this)},_initializeCluster:function(n,u){n.count=0;n.centroid=new g(null,null);n.geohashes=[];n.primary=u;n.statistics=null;return n},_applyStatInfos:function(n){n=this._getValidStatInfos(n);this._applyStatInfosToIndex(n);this._applyStatInfosToClusters(n)},_getValidStatInfos:function(n){var u=[];a.forEach(n,function(x){var A=x.attributeInfo;x=x.statisticType;var z="angle"===A.attributeType;
if(t.isSupportedStatisticType(x)&&(!z||"avg"===x)){var E="arithmetic"===A.rotationType;u.push({attributeCache:c.createAttributeCache(A,"type"===x),identifier:t.getStatisticId(A,x),statFunctions:t.getStatisticFunctions(x),isAngular:z,isDate:"date"===A.attributeType,isArithmetic:E})}});return u},_applyStatInfosToIndex:function(n){n=n||this._getValidStatInfos(this.statisticInfos);var u=this._cellIndex;if(u)for(var x=1;x<=this._maxGeohashLength;x++){var A=u[x],z;for(z in A)this._applyStatInfosToCell(A[z],
n)}},_applyStatInfosToCell:function(n,u){var x=this._initializeStats(n,u);a.forEach(n.features,function(A){this._calcFeatureStats(A,u,x)},this);this._summarizeStats(n,x,u)},_calcFeatureStats:function(n,u,x){n.attributes&&a.forEach(u,function(A){var z=x[A.identifier],E=A.attributeCache;E=E?n._getDataValue(E.attributeInfo,E,l):null;A.statFunctions.updateCellStat(z,E,A)})},_applyStatInfosToClusters:function(n){n=n||this._getValidStatInfos(this.statisticInfos);var u=this._clusterFieldPrefix;a.forEach(this.clusters,
function(x){var A=this._initializeStats(x,n);a.forEach(this.getCellsInCluster(x),function(z){this._calcCellStats(z,n,A)},this);this._summarizeStats(x,A,n,u);x.attributes[u+"id"]=x.primary},this)},_calcCellStats:function(n,u,x){var A=n.statistics;a.forEach(u,function(z){var E=z.identifier;z.statFunctions.updateClusterStat(x[E],A[E],z)})},_initializeStats:function(n,u){var x=n.statistics={};a.forEach(u,function(A){x[A.identifier]=A.statFunctions.initialize(A)});return x},_summarizeStats:function(n,
u,x,A){var z=n.attributes={};A=A||"";z[A+"count"]=n.count;a.forEach(x,function(E){var w=this._getStatFieldName(E,A);z[w]=E.statFunctions.summarize(u[E.identifier],E)},this)},_getStatFieldName:function(n,u){return(u||"")+n.identifier},_updateItem:function(n,u,x,A){var z=x.y,E=n.centroid,w=n.count;E.x=(w*E.x+u*x.x)/(w+u);E.y=(w*E.y+u*z)/(w+u);n.count+=u;A&&this._updateExtent(n.extent,x)},_updateExtent:function(n,u){var x=u.x;u=u.y;x<n.xmin&&(n.xmin=x);x>n.xmax&&(n.xmax=x);u<n.ymin&&(n.ymin=u);u>n.ymax&&
(n.ymax=u)},_getTime:function(){return window.performance?window.performance.now():(new Date).getTime()},_getElapsedTime:function(n,u){n=null!=n&&null!=u?u-n:n;if(null!=n){var x="millisecond";1E3<=n&&(n/=1E3,x="second",60<=n&&(n/=60,x="minute"));x={value:Number(n.toFixed(2)),unit:x}}return x}});q.setObject("layers.clustering.GeohashAggregation",b,h);return b})},"esri/core/timerUtils":function(){define([],function(){function b(e){var g,f=e.length;for(g=0;g<f;g++)e[g]()}var y={LOW:1,HIGH:2},q,a={};
a[y.LOW]=[];a[y.HIGH]=[];var h=function(){clearTimeout(q);q=null;var e=a[y.HIGH];a[y.HIGH]=[];b(e);e=a[y.LOW];a[y.LOW]=[];b(e)};return{priority:y,callbackQueue:a,setTimeout:function(e,g){e=[g,a[g].push(e)-1];q||(q=setTimeout(h,0));return e},clearTimeout:function(e){e&&a[e[0]].splice(e[1],1)}}})},"esri/layers/clustering/geohashUtils":function(){define("dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "),
function(b,y,q,a,h,e,g,f,m){function l(J){var I=J.spatialReference;if(!I)return{x:J.x,y:J.y};var K=I.isWebMercator(),R;4326===I.wkid?R={x:J.x,y:J.y}:K&&(R={x:J.getLongitude(),y:J.getLatitude()});return R}function d(J){var I=J.spatialReference,K=!(!I||!I.isWebMercator()),R;I&&4326===I.wkid?R=new g(J.toJson()):K&&(R=m.webMercatorToGeographic(J,!0));return R}function c(J,I){I.x=e.prototype._normalizeX(J.x,f.prototype._info[4326]);I.y=J.y;return I}function k(J){J=G.decimals[J].toString(2);return y.pad(J,
G.bitsPerBase32Char,"0")}function t(J,I){I=I.slice();I.splice(1,0,0);for(var K=I[0],R=I[2],W=0;W<J.length;W++){Number(J[W])?I[0]=I[1]:I[2]=I[1];var P=I[1]=(I[0]+I[2])/2;K=I[0];R=I[2]}return{value:P,min:K,max:R}}function n(J,I,K){var R=[];I=I.slice();I.splice(1,0,0);for(var W=I[0],P=I[2],S=0;S<K;S++)J>=I[1]?(I[0]=I[1],W=1):(I[2]=I[1],W=0),I[1]=(I[0]+I[2])/2,R.push(W),W=I[0],P=I[2];return{value:R.join(""),min:W,max:P}}function u(J){var I=J*G.bitsPerBase32Char;0===I%2?J=I/=2:(J=(I+1)/2,I-=J);return{lon:J,
lat:I}}function x(J){var I=0;J=J.split("").reverse().join("");for(var K=0;K<J.length;K++)I+=Number(J[K])*Math.pow(2,K);return G.base32[I]}function A(J,I){var K={x:J.xmin,y:J.ymax},R={x:J.xmax,y:J.ymin},W={x:J.xmax,y:J.ymax};return{sw:H.pointToGeohash({x:J.xmin,y:J.ymin},I),nw:H.pointToGeohash(K,I),se:H.pointToGeohash(R,I),ne:H.pointToGeohash(W,I)}}function z(J,I,K,R,W){var P=J;do W[P]||(W[P]=!0,R.push(P)),(J=P===I)||(P=F(P,K));while(!J)}function E(J,I,K,R){var W=A(J,I);J=[];z(W.sw,W.nw,"n",J,{});
I=[];z(W.se,W.ne,"n",I,{});for(W=0;W<J.length;W++)z(J[W],I[W],"e",K,R)}function w(J){return a.filter(J,function(I){return 180===I.xmax?!0:!1})[0]}function D(J){return a.filter(J,function(I){return-180===I.xmin?!0:!1})[0]}function r(J,I,K,R){var W=H.geographicToWebMercator(J);J={x:W.x-I,y:W.y-I};I=H.webMercatorToGeographic({x:W.x+I,y:W.y+I},!0);J=H.webMercatorToGeographic(J,!0);return new g(null!=K?K:J.x,J.y,null!=R?R:I.x,I.y)}function v(J,I,K,R){J=A(J,I);var W,P;"min"===R?P=180:"max"===R&&(W=-180);
var S=W;R=P;var L=H.geohashToCell(J.sw).extent;I=H.geohashToCell(J.ne).extent;J=null!=S?S:L.xmin;L=L.ymin;R=null!=R?R:I.xmax;I=I.ymax;J=r({x:J,y:L},K,W,P);K=r({x:R,y:I},K,W,P);return new g(J.xmin,J.ymin,K.xmax,K.ymax)}function B(J,I,K){var R=J,W=0;do W++,(J=R===I)||(R=F(R,K));while(!J);return W}function C(J,I){J=A(J,I);I=B(J.nw,J.ne,"e");return{rows:B(J.nw,J.sw,"s"),cols:I}}function F(J,I){var K=J.length%2,R=J.slice(-1),W=G.decimals[R];J=J.slice(0,-1);-1!=G.borders[I][K].indexOf(R)&&J&&(J=F(J,I));
return J+G.neighbors[I][K][W]}var G={base32:"0123456789bcdefghjkmnpqrstuvwxyz",decimals:function(){for(var J={},I=0;32>I;I++)J["0123456789bcdefghjkmnpqrstuvwxyz"[I]]=I;return J}(),neighbors:{n:[null,"238967debc01fg45kmstqrwxuvhjyznp"],s:[null,"bc01fg45238967deuvhjyznpkmstqrwx"],e:[null,"14365h7k9dcfesgujnmqp0r2twvyx8zb"],w:[null,"p0r21436x8zb9dcf5h7kjnmqesgutwvy"]},borders:{n:[null,"bcfguvyz"],s:[null,"0145hjnp"],e:[null,"prxz"],w:[null,"028b"]},bitsPerBase32Char:5,maxGeohashLength:12,longitudeRange:[-180,
180],latitudeRange:[-90,90]};G.neighbors.n[0]="14365h7k9dcfesgujnmqp0r2twvyx8zb";G.neighbors.s[0]="p0r21436x8zb9dcf5h7kjnmqesgutwvy";G.neighbors.e[0]="238967debc01fg45kmstqrwxuvhjyznp";G.neighbors.w[0]="bc01fg45238967deuvhjyznpkmstqrwx";G.borders.n[0]="prxz";G.borders.s[0]="028b";G.borders.e[0]="bcfguvyz";G.borders.w[0]="0145hjnp";var H={geographicToWebMercator:function(J){J=e.lngLatToXY(J.x,J.y);return{x:J[0],y:J[1]}},webMercatorToGeographic:function(J,I){J=e.xyToLngLat(J.x,J.y,I);return{x:J[0],
y:J[1]}},geohashToCell:function(J){var I;var K=[];for(I=0;I<J.length;I++)K.push(k(J[I]));K=K.join("");I=[];for(var R=[],W=0;W<K.length;W++)0===W%2?I.push(K[W]):R.push(K[W]);I=I.join("");R=R.join("");I=[I,R];K=t(I[0],G.longitudeRange);R=t(I[1],G.latitudeRange);I=K.value;return{point:{x:I,y:R.value},extent:{xmin:K.min,xmax:K.max,ymin:R.min,ymax:R.max},geohash:J}},pointToCell:function(J,I){I=I||G.maxGeohashLength;if(J=l(J)){J=c(J,J);var K=u(I);I=n(J.x,G.longitudeRange,K.lon);var R=n(J.y,G.latitudeRange,
K.lat);K=I.value;var W=R.value;I={xmin:I.min,xmax:I.max,ymin:R.min,ymax:R.max};R=[];for(var P=Math.ceil((K.length+W.length)/G.bitsPerBase32Char),S=0,L=0,aa=0;aa<P*G.bitsPerBase32Char;aa++){var ba=0===aa%2?K[S++]:W[L++];null==ba&&(ba=0);R.push(ba)}K=R.join("");W=G.bitsPerBase32Char;R=K.length/W;P=[];for(S=0;S<R;S++)L=K.substr(S*W,W),P.push(x(L));K=P.join("");return{point:J,extent:I,geohash:K}}},geohashToPoint:function(J){return H.geohashToCell(J).point},pointToGeohash:function(J,I){return(J=H.pointToCell(J,
I))&&J.geohash},getCells:function(J){return a.map(J,function(I){return H.geohashToCell(I)})},getCellSize:function(J){var I=G.longitudeRange,K=G.latitudeRange;I=Math.abs(I[1]-I[0]);K=Math.abs(K[1]-K[0]);J=u(J||1);return{width:I/Math.pow(2,J.lon),height:K/Math.pow(2,J.lat)}},getCellSizeInMeters:function(J){J=H.getCellSize(J);var I=m.metersPerDegree;J.width*=I;J.height*=I;return J},getIntersecting:function(J,I,K){I=I||1;K=K||0;var R=[],W=d(J);if(W){K&&(W=H.expandExtent(J,I,K));J=W.normalize();var P=
{};a.forEach(J,function(S){E(S,I,R,P)})}return R},countIntersecting:function(J,I,K){I=I||1;K=K||0;var R=0,W=d(J);if(W){K&&(W=H.expandExtent(J,I,K));J=W.normalize();if(2===J.length){R=w(J);W=D(J);K=C(R,I);var P=C(W,I);J=K.rows;K=K.cols+P.cols;R={x:R.xmin,y:R.ymax};W={x:W.xmax,y:W.ymax};R=c(R,{});W=c(W,{});R=H.pointToGeohash(R,I);I=H.pointToGeohash(W,I);R===I&&K--;I={rows:J,cols:K}}else I=C(J[0],I);R=I.cols*I.rows}return R},getChildren:function(J){J=J||"";var I=[],K;for(K in G.decimals)I.push(J+K);
return I},getNeighbors:function(J){var I=F(J,"n"),K=F(J,"s");return[I,F(I,"e"),F(I,"w"),K,F(K,"e"),F(K,"w"),F(J,"e"),F(J,"w")]},getExtentFromDistance:function(J,I){I=I||1E3;var K;(J=l(J))&&(K=r(J,I));return K},expandExtent:function(J,I,K){I=I||1;K=K||0;if(J=d(J)){if(K){J=J.normalize();if(2===J.length){var R=K;K=w(J);J=D(J);K=v(K,I,R,"min");J=v(J,I,R,"max");360<=K.getWidth()+J.getWidth()?(I=-180,J=180):(I=K.xmin,J=J.xmax);return new g(I,K.ymin,J,K.ymax)}return v(J[0],I,K)}return J}},getNeighborsWithinDistance:function(J,
I,K){K=K||1E3;I=I||1;var R=[];if(J=l(J)){K=r(J,K).normalize();var W={};a.forEach(K,function(P){E(P,I,R,W)})}return R}};q.setObject("layers.clustering.geohashUtils",H,h);return H})},"esri/layers/clustering/statUtils":function(){define(["dojo/_base/lang","../support/attributeUtils"],function(b,y){function q(e){return"number"===typeof e&&!isNaN(e)&&Infinity!==e&&-Infinity!==e}var a={sum:{initialize:function(){return{count:0,sum:null}},updateCellStat:function(e,g){q(g)&&(e.count++,e.sum+=g)},updateClusterStat:function(e,
g){g.count&&(e.count+=g.count,e.sum+=g.sum)},summarize:function(e){return e.sum}},avg:{initialize:function(e){return{count:0,sum:null,avg:null,sum_cosine:null,sum_sine:null}},updateCellStat:function(e,g,f){q(g)&&(e.count++,f.isAngular?(f.isArithmetic||(g=-1*g+90),e.sum_cosine+=Math.cos(g*Math.PI/180),e.sum_sine+=Math.sin(g*Math.PI/180)):e.sum+=g)},updateClusterStat:function(e,g,f){g.count&&(e.count+=g.count,f.isAngular?(e.sum_cosine+=g.sum_cosine,e.sum_sine+=g.sum_sine):e.sum+=g.sum)},summarize:function(e,
g){if(0<e.count){var f=e.count;g.isAngular?(f=180*Math.atan2(e.sum_sine/f,e.sum_cosine/f)/Math.PI,g.isArithmetic||(f=-1*(f-90)),e.avg=0>f?f+360:f):(e.avg=e.sum/f,g.isDate&&(e.avg=Math.ceil(e.avg)))}return e.avg}},type:{initialize:function(){return{uvInfos:{}}},updateCellStat:function(e,g){if(null==g||""===g||"string"===typeof g&&""===b.trim(g))g=null;e=e.uvInfos;null==e[g]?e[g]={count:1,value:g}:e[g].count++},updateClusterStat:function(e,g){e=e.uvInfos;g=g.uvInfos;for(var f in g){var m=g[f];null==
e[f]?e[f]={count:m.count,value:m.value}:e[f].count+=m.count}},summarize:function(e){e=e.uvInfos;var g,f=-Infinity;for(g in e){var m=e[g];if(m.count>f){f=m.count;var l=m.value}else m.count===f&&(l=null)}return l}}},h={isSupportedStatisticType:function(e){return a.hasOwnProperty(e)},getStatisticFunctions:function(e){return a[e]},getStatisticId:function(e,g){var f=y.getAttributeIdSource(e);e=f&&y.getAttributeId(f)||e.field;return g+"_"+e},getClusterField:function(e,g){return"cluster_"+h.getStatisticId(e,
g)},getStatisticHash:function(e,g){g=[h.getStatisticId(e,g)];e.attributeType&&g.push(e.attributeType.toLowerCase());e.rotationType&&g.push(e.rotationType.toLowerCase());return g.join("_")}};return h})},"esri/layers/agscommon":function(){define("./ArcGISMapServiceLayer ./LayerInfo ./TimeInfo ./LayerTimeOptions ./TimeReference ./Field ./Domain ./RangeDomain ./CodedValueDomain ./InheritedDomain ./LayerSource ./LayerMapSource ./LayerDataSource ./DataSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource ./DynamicLayerInfo ./LayerDrawingOptions ../geometry ../utils".split(" "),
function(){return{}})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(b,y,q,a,h,e,g,f){b=b(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(m){if(m&&(y.mixin(this,m),m.renderer&&(this.renderer=g.fromJson(m.renderer)),m.labelingInfo&&0<m.labelingInfo.length)){this.labelingInfo=[];var l;q.forEach(m.labelingInfo,function(d){l=new f(d);
this.labelingInfo.push(l)},this)}},toJson:function(){var m={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(m.labelingInfo=[],q.forEach(this.labelingInfo,function(l){m.labelingInfo.push(l.toJson())}));return e.fixJson(m)}});y.setObject("layers.LayerDrawingOptions",b,h);return b})},"esri/geometry":function(){define("./units ./SpatialReference ./geometry/Geometry ./geometry/Point ./geometry/ScreenPoint ./geometry/Multipoint ./geometry/Polyline ./geometry/Polygon ./geometry/Extent ./geometry/Rect ./geometry/geodesicUtils ./geometry/jsonUtils ./geometry/mathUtils ./geometry/normalizeUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x){return{units:b,SpatialReference:y,Geometry:q,Point:a,ScreenPoint:h,Multipoint:e,Polyline:g,Polygon:f,Extent:m,Rect:l,geodesicUtils:d,jsonUtils:c,mathUtils:k,normalizeUtils:t,scaleUtils:n,screenUtils:u,webMercatorUtils:x}})},"esri/units":function(){define(["dojo/has","./kernel"],function(b,y){b={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",FEET_US:"esriFeetUS",
INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILES_US:"esriMilesUS",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",YARDS_US:"esriYardsUS",ACRES:"esriAcres",ACRES_US:"esriAcresUS",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_MILES_US:"esriSquareMilesUS",SQUARE_FEET:"esriSquareFeet",SQUARE_FEET_US:"esriSquareFeetUS",SQUARE_METERS:"esriSquareMeters",
HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_YARDS_US:"esriSquareYardsUS",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",RADIANS:"esriDURadians"};return y.Units=
b})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "),function(b,y,q,a,h,e,g,f,m){function l(c){return new f(parseFloat(c.x),parseFloat(c.y)-parseFloat(c.height),parseFloat(c.x)+parseFloat(c.width),parseFloat(c.y),c.spatialReference)}var d=b(e,{declaredClass:"esri.geometry.Rect",type:"rect",x:0,y:0,width:100,height:100,constructor:function(c,k,t,n,u){h.isObject(c)&&"extent"===c.type&&(k=c.ymax,
t=c.getWidth(),n=c.getHeight(),u=c.spatialReference,c=c.xmin);h.isObject(c)?(h.mixin(this,c),this.spatialReference&&(this.spatialReference=m.createSpatialReference(this.spatialReference))):(this.x=c,this.y=k,this.width=t,this.height=n,this.spatialReference=u);this.verifySR()},getCenter:function(){return new g(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(c,k){return new d(this.x+c,this.y+k,this.width,this.height,this.spatialReference)},intersects:function(c){return c.x+
c.width<=this.x||c.y+c.height<=this.y||c.y>=this.y+this.height||c.x>=this.x+this.width?!1:!0},getExtent:function(){return l(this)},update:function(c,k,t,n,u){this.x=c;this.y=k;this.width=t;this.height=n;this.spatialReference=u;this.clearCache();return this}});y.setObject("geometry.Rect",d,a);a.geometry._rectToExtent=l;a.geometry._extentToRect=function(c){return new d(c)};return d})},"esri/geometry/geodesicUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),
function(b,y,q,a,h,e,g,f){function m(A){return!!(A&&A.wkid&&x[A.wkid])}function l(A){return m(A)?x[A.wkid]:x[4326]}function d(A){var z=A.spatialReference,E=l(z),w=E.a;E=E.eSq;var D=Math.sqrt(E),r=Math.sin(A.y*u);return new e(w*A.x*u,0<E?w*(1-E)*(r/(1-E*r*r)-1/(2*D)*Math.log((1-D*r)/(1+D*r)))*.5:w*r,z)}function c(A,z,E,w,D){var r=l(D),v=r.a,B=r.b;r=r.f;var C=Math.sin(E);E=Math.cos(E);var F=(1-r)*Math.tan(A);A=1/Math.sqrt(1+F*F);var G=F*A,H=Math.atan2(F,E);F=A*C;var J=F*F,I=1-J;v=I*(v*v-B*B)/(B*B);
var K=1+v/16384*(4096+v*(-768+v*(320-175*v))),R=v/1024*(256+v*(-128+v*(74-47*v)));v=w/(B*K);for(var W=2*Math.PI,P,S,L,aa;1E-12<Math.abs(v-W);)L=Math.cos(2*H+v),P=Math.sin(v),S=Math.cos(v),aa=R*P*(L+R/4*(S*(-1+2*L*L)-R/6*L*(-3+4*P*P)*(-3+4*L*L))),W=v,v=w/(B*K)+aa;w=G*P-A*S*E;B=r/16*I*(4+r*(4-3*I));return new e((z+(Math.atan2(P*C,A*S-G*P*E)-(1-B)*r*F*(v+B*P*(L+B*S*(-1+2*L*L)))))/u,Math.atan2(G*S+A*P*E,(1-r)*Math.sqrt(J+w*w))/u,D)}function k(A,z,E,w,D){var r=l(D),v=r.a;D=r.b;var B=r.f,C=w-z,F=Math.atan((1-
B)*Math.tan(A)),G=Math.atan((1-B)*Math.tan(E)),H=Math.sin(F);F=Math.cos(F);var J=Math.sin(G);G=Math.cos(G);var I=C,K=1E3;do{var R=Math.sin(I);var W=Math.cos(I);var P=Math.sqrt(G*R*G*R+(F*J-H*G*W)*(F*J-H*G*W));if(0===P)return 0;W=H*J+F*G*W;var S=Math.atan2(P,W);var L=F*G*R/P;var aa=1-L*L;R=W-2*H*J/aa;isNaN(R)&&(R=0);var ba=B/16*aa*(4+B*(4-3*aa));var O=I;I=C+(1-ba)*B*L*(S+ba*P*(R+ba*W*(-1+2*R*R)))}while(1E-12<Math.abs(I-O)&&0<--K);if(0===K)return D=w-z,{azimuth:Math.atan2(Math.sin(D)*Math.cos(E),Math.cos(A)*
Math.sin(E)-Math.sin(A)*Math.cos(E)*Math.cos(D)),geodesicDistance:Math.acos(Math.sin(A)*Math.sin(E)+Math.cos(A)*Math.cos(E)*Math.cos(w-z))*r.radius};A=aa*(v*v-D*D)/(D*D);z=A/1024*(256+A*(-128+A*(74-47*A)));return{azimuth:Math.atan2(G*Math.sin(I),F*J-H*G*Math.cos(I)),geodesicDistance:D*(1+A/16384*(4096+A*(-768+A*(320-175*A))))*(S-z*P*(R+z/4*(W*(-1+2*R*R)-z/6*R*(-3+4*P*P)*(-3+4*R*R)))),reverseAzimuth:Math.atan2(F*Math.sin(I),F*J*Math.cos(I)-H*G)}}function t(A,z){if(!(A instanceof g||A instanceof f))throw Error("_geodesicDensify: the input geometry is neither polyline nor polygon");
var E=A.spatialReference,w=l(E).radius/1E4;z<w&&(z=w);w=A instanceof g;var D=[],r;b.forEach(w?A.paths:A.rings,function(v){D.push(r=[]);r.push([v[0][0],v[0][1]]);var B,C;var F=v[0][0]*u;var G=v[0][1]*u;for(B=0;B<v.length-1;B++){var H=v[B+1][0]*u;var J=v[B+1][1]*u;if(F!==H||G!==J){J=k(G,F,J,H,E);H=J.azimuth;J=J.geodesicDistance;var I=J/z;if(1<I){for(C=1;C<=I-1;C++){var K=c(G,F,H,C*z,E);r.push([K.x,K.y])}C=c(G,F,H,(J+Math.floor(I-1)*z)/2,E);r.push([C.x,C.y])}G=c(G,F,H,J,E);r.push([G.x,G.y]);F=G.x*u;
G=G.y*u}}});return w?new g({paths:D,spatialReference:E}):new f({rings:D,spatialReference:E})}var n={esriMeters:1,esriKilometers:1E3,esriYards:.9144,esriFeet:.3048,esriMiles:1609.344,esriNauticalMiles:1852,esriInches:.0254,esriDecimeters:.1,esriCentimeters:.01,esriMillimeters:.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:.83612736,esriSquareFeet:.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,
esriSquareCentimeters:1E-4,esriSquareDecimeters:.01},u=Math.PI/180,x={4326:{a:6378137,b:6356752.31424518,f:1/298.257223563,eSq:.006694379990197414,radius:6371008.771415059},104900:{a:2439700,b:2439700,f:0,eSq:0,radius:2439700},104901:{a:6051E3,b:6051E3,f:0,eSq:0,radius:6051E3},104902:{a:6051800,b:6051800,f:0,eSq:0,radius:6051800},104903:{a:1737400,b:1737400,f:0,eSq:0,radius:1737400},104904:{a:3393400,b:3375730,f:1/192.04301075,eSq:.01038722,radius:3387510},104905:{a:3396190,b:3376200,f:1/169.89444722,
eSq:.01173737,radius:3389526.6666666665},104906:{a:6200,b:6200,f:0,eSq:0,radius:6200},104907:{a:11100,b:11100,f:0,eSq:0,radius:11100},104912:{a:2409300,b:2409300,f:0,eSq:0,radius:2409300},104915:{a:1562090,b:1562090,f:0,eSq:0,radius:1562090},104916:{a:2632345,b:2632345,f:0,eSq:0,radius:2632345},104918:{a:1821460,b:1821460,f:0,eSq:0,radius:1821460},104929:{a:249400,b:249400,f:0,eSq:0,radius:249400},104943:{a:2575E3,b:2575E3,f:0,eSq:0,radius:2575E3},104971:{a:3396190,b:3396190,f:0,eSq:0,radius:3396190},
104972:{a:47E4,b:47E4,f:0,eSq:0,radius:47E4},104973:{a:255E3,b:255E3,f:0,eSq:0,radius:255E3},104974:{a:2439400,b:2439400,f:0,eSq:0,radius:2439400}};q={isSupported:m,getSpheroidInfo:l,geodesicDensify:t,geodesicLengths:function(A,z){var E=[];b.forEach(A,function(w,D){var r=0,v=w.spatialReference;b.forEach(w.paths,function(B,C){C=0;var F;for(F=1;F<B.length;F++){var G=B[F-1][0]*u;var H=B[F][0]*u;var J=B[F-1][1]*u;var I=B[F][1]*u;if(J!==I||G!==H)G=k(J,G,I,H,v),C+=G.geodesicDistance}r+=C});r/=n[z];E.push(r)});
return E},geodesicAreas:function(A,z){var E=[],w=[];b.forEach(A,function(D,r){r=.0015696101447650193*l(D.spatialReference).radius;E.push(t(D,r))});b.forEach(E,function(D,r){var v=0,B=D.spatialReference;b.forEach(D.rings,function(C,F){F=d(new e(C[0][0],C[0][1],B));var G=d(new e(C[C.length-1][0],C[C.length-1][1],B)),H=G.x*F.y-F.x*G.y,J;for(J=0;J<C.length-1;J++)F=d(new e(C[J+1][0],C[J+1][1],B)),G=d(new e(C[J][0],C[J][1],B)),H+=G.x*F.y-F.x*G.y;v+=H});v/=n[z];w.push(v/-2)});return w},_unitsDictionary:n,
_toEqualAreaPoint:d,_directGeodeticSolver:c,_inverseGeodeticSolver:k};y.mixin(y.getObject("geometry",!0,a),q);return q})},"esri/utils":function(){define("./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "),function(){return{}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array esri/arcgis/utils arcgisonline/map/thumbnail/createThumbnailImage arcgisonline/map/thumbnail/createHiddenMap".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c){return function(k,t,n,u){var x=function(A,z){n(z);A.destroy();y.byId("hiddenMapDiv").removeChild(y.byId("hiddenMap"))};c(k,t,f.hitch(this,function(A){d(A,f.hitch(this,x,A),u)}),u)}})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B,C,F,G,H,J,I,K,R){function W(ea){return!(!ea||"BingMapsAerial"!==ea.layerType&&"BingMapsAerial"!==ea.type)}function P(ea){return!(!ea||"BingMapsRoad"!==ea.layerType&&"BingMapsRoad"!==ea.type)}function S(ea){return W(ea)||P(ea)||!(!ea||"BingMapsHybrid"!==ea.layerType&&"BingMapsHybrid"!==ea.type)}function L(ea){return!(!ea||"OpenStreetMap"!==ea.layerType&&"OpenStreetMap"!==ea.type)}function aa(ea){return!!(ea&&ea.url&&(-1<"ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(ea.layerType)||
!ea.layerType&&!ea.type))}function ba(ea){return x({url:Ab.arcgisUrl+"/"+ea.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function O(ea,Ja){var Ia={f:"json"};Ja&&(Ia.token=Ja);return x({url:ea,content:Ia,callbackParamName:"callback"},{disableIdentityLookup:!0})}function V(ea){!ea.layerDefinition||ea.layerDefinition.drawingInfo&&ea.layerDefinition.drawingInfo.labelingInfo||(ea.showLabels=!1);ea.itemProperties.layerDefinition&&(ea.layerDefinition?
(ea.layerDefinition.drawingInfo||(ea.layerDefinition.drawingInfo=ea.itemProperties.layerDefinition.drawingInfo),u.isDefined(ea.layerDefinition.definitionExpression)||(ea.layerDefinition.definitionExpression=ea.itemProperties.layerDefinition.definitionExpression),u.isDefined(ea.layerDefinition.minScale)||(ea.layerDefinition.minScale=ea.itemProperties.layerDefinition.minScale),u.isDefined(ea.layerDefinition.maxScale)||(ea.layerDefinition.maxScale=ea.itemProperties.layerDefinition.maxScale)):ea.layerDefinition=
ea.itemProperties.layerDefinition);!ea.itemProperties.popupInfo||ea.popupInfo||ea.disablePopup||(ea.popupInfo=ea.itemProperties.popupInfo);u.isDefined(ea.itemProperties.showLabels)&&!u.isDefined(ea.showLabels)&&(ea.showLabels=ea.itemProperties.showLabels);u.isDefined(ea.itemProperties.showLegend)&&!u.isDefined(ea.showLegend)&&(ea.showLegend=ea.itemProperties.showLegend);u.isDefined(ea.itemProperties.refreshInterval)&&!u.isDefined(ea.refreshInterval)&&(ea.refreshInterval=ea.itemProperties.refreshInterval)}
function X(ea){V(ea);ea.itemProperties.layerDefinition&&ea.layerDefinition&&(!u.isDefined(ea.layerDefinition.maximumTrackPoints)&&u.isDefined(ea.itemProperties.layerDefinition.maximumTrackPoints)&&(ea.layerDefinition.maximumTrackPoints=ea.itemProperties.layerDefinition.maximumTrackPoints),!ea.layerDefinition.definitionGeometry&&ea.itemProperties.layerDefinition.definitionGeometry&&(ea.layerDefinition.definitionGeometry=ea.itemProperties.layerDefinition.definitionGeometry));ea.itemProperties.purgeOptions&&
!ea.purgeOptions&&(ea.purgeOptions=ea.itemProperties.purgeOptions)}function N(ea,Ja){var Ia=new h;Ja=ea.itemData;var Ca=[],Ga=[];q.forEach(Ja.operationalLayers,function(Ma){if(Ma.itemId&&aa(Ma)){var Ka=Ma.url.toLowerCase();-1<Ka.indexOf("/featureserver")||-1<Ka.indexOf("/mapserver/")?(Ga.push(Ma),Ca.push(ba(Ma))):-1<Ka.indexOf("/mapserver")&&-1===Ka.indexOf("/mapserver/")&&(!Ma.layers||!u.isDefined(Ma.minScale)&&!u.isDefined(Ma.maxScale))?(Ga.push(Ma),Ca.push(ba(Ma))):-1<Ka.indexOf("/imageserver")&&
!u.isDefined(Ma.minScale)&&!u.isDefined(Ma.maxScale)?(Ga.push(Ma),Ca.push(ba(Ma))):-1<Ka.indexOf("/streamserver")&&(Ga.push(Ma),Ca.push(ba(Ma)))}});Ja.baseMap&&Ja.baseMap.baseMapLayers&&q.forEach(Ja.baseMap.baseMapLayers,function(Ma){Ma.itemId&&"VectorTileLayer"!==Ma.layerType&&(Ga.push(Ma),Ca.push(ba(Ma)))});if(0<Ca.length){var Na={};(new m(Ca)).addCallback(function(Ma){q.forEach(Ga,function(Ka,Ra){if((Ra=Ma[Ra][1])&&!(Ra instanceof Error)&&(Na[Ka.itemId]=Ra,aa(Ka))){var Wa=Ka.url.toLowerCase();
(-1<Wa.indexOf("/featureserver")||-1<Wa.indexOf("/mapserver/"))&&Ra.layers?q.forEach(Ra.layers,function(Ya){var cb="/featureserver/"+Ya.id;(cb=Wa.match(cb+"$")==cb)||(cb="/mapserver/"+Ya.id,cb=Wa.match(cb+"$")==cb);cb&&(Ka.itemProperties=Ya,V(Ka))}):-1<Wa.indexOf("/streamserver")?(Ka.itemProperties=Ra,X(Ka)):-1<Wa.indexOf("/mapserver")?(Ra.layers&&!Ka.layers&&(Ka.layers=Ra.layers),u.isDefined(Ra.minScale)&&!u.isDefined(Ka.minScale)&&(Ka.minScale=Ra.minScale),u.isDefined(Ra.maxScale)&&!u.isDefined(Ka.maxScale)&&
(Ka.maxScale=Ra.maxScale),u.isDefined(Ra.refreshInterval)&&!u.isDefined(Ka.refreshInterval)&&(Ka.refreshInterval=Ra.refreshInterval),Ra.visibleLayers&&!Ka.visibleLayers&&(Ka.visibleLayers=Ra.visibleLayers)):-1<Wa.indexOf("/imageserver")&&(u.isDefined(Ra.minScale)&&!u.isDefined(Ka.minScale)&&(Ka.minScale=Ra.minScale),u.isDefined(Ra.maxScale)&&!u.isDefined(Ka.maxScale)&&(Ka.maxScale=Ra.maxScale),u.isDefined(Ra.refreshInterval)&&!u.isDefined(Ka.refreshInterval)&&(Ka.refreshInterval=Ra.refreshInterval),
!Ra.popupInfo||Ka.popupInfo||Ka.disablePopup||(Ka.popupInfo=Ra.popupInfo),Ra.renderingRule&&!Ka.renderingRule&&(Ka.renderingRule=Ra.renderingRule,Ra.renderingRule.functionName&&(Ka.renderingRule.rasterFunction=Ra.renderingRule.functionName)),Ra.bandIds&&!Ka.bandIds&&(Ka.bandIds=Ra.bandIds),Ra.mosaicRule&&!Ka.mosaicRule&&(Ka.mosaicRule=Ra.mosaicRule),Ra.format&&!Ka.format&&(Ka.format=Ra.format),u.isDefined(Ra.compressionQuality)&&!u.isDefined(Ka.compressionQuality)&&(Ka.compressionQuality=Ra.compressionQuality),
!Ra.layerDefinition||!Ra.layerDefinition.definitionExpression||u.isDefined(Ka.layerDefinition)&&u.isDefined(Ka.layerDefinition.definitionExpression)||(Ka.layerDefinition=Ka.layerDefinition||{},Ka.layerDefinition.definitionExpression=Ra.layerDefinition.definitionExpression))}});ea.relatedItemsData=Na;Ia.callback(ea)})}else Ia.callback(ea);return Ia}function Y(ea,Ja){var Ia=new h,Ca=ea.itemData,Ga=Ca.baseMap.baseMapLayers[0];if(S(Ga))if(Ga.portalUrl&&k.id)delete Ja.bingMapsKey,k.id.checkSignInStatus(E.urlToObject(Ab.arcgisUrl).path).then(y.hitch(null,
function(Ma,Ka,Ra,Wa,Ya){O(Ga.portalUrl,Ya.token).then(y.hitch(null,oa,Ma,Ka,Ra,Wa),y.hitch(null,sa,Ma,Ka,Ra,Wa))},ea,Ja,Ca,Ia),y.hitch(null,function(Ma,Ka,Ra,Wa,Ya){O(Ga.portalUrl).then(y.hitch(null,oa,Ma,Ka,Ra,Wa),y.hitch(null,sa,Ma,Ka,Ra,Wa))},ea,Ja,Ca,Ia));else if(Ja.bingMapsKey){var Na=new Eb({bingMapsKey:Ja.bingMapsKey,mapStyle:Eb.MAP_STYLE_AERIAL});a.connect(Na,"onLoad",y.hitch(this,function(){Ia.callback([ea,Ja])}));a.connect(Na,"onError",function(Ma){delete Ja.bingMapsKey;ea.itemData=Ba(Ca);
Ga=ea.itemData.baseMap.baseMapLayers[0];Ga.errors=[];Ga.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Ia.callback([ea,Ja])})}else ea.itemData=Ba(Ca),Ga=ea.itemData.baseMap.baseMapLayers[0],Ga.errors=[],Ga.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),Ia.callback([ea,Ja]);else Ia.callback([ea,Ja]);return Ia}function ia(ea){var Ja=
new h;ea=ea.itemData;var Ia=ea.baseMap&&ea.baseMap.baseMapLayers;if(Yb&&!Yb.supported())for(ea=0;ea<Ia.length;ea++){var Ca=Ia[ea];if(!Ca.isReference){if("VectorTileLayer"===Ca.layerType){var Ga=Ca.itemId;var Na=ea}break}}Ga?eb(Ga,!1).addBoth(function(Ma){var Ka=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;Ma&&Ma.item&&Ka.test(Ma.item.url)&&(Ia[Na]={id:"FB_"+Ca.id,layerType:"ArcGISTiledMapServiceLayer",opacity:"opacity"in Ca?Ca.opacity:1,visibility:"visibility"in
Ca?Ca.visibility:!0,url:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});Ja.resolve()}):Ja.resolve();return Ja}function oa(ea,Ja,Ia,Ca,Ga){Ga.bingKey?(Ja.bingMapsKey=Ga.bingKey,Ga=new Eb({bingMapsKey:Ja.bingMapsKey,mapStyle:Eb.MAP_STYLE_AERIAL}),a.connect(Ga,"onLoad",y.hitch(this,function(){Ca.callback([ea,Ja])})),a.connect(Ga,"onError",function(Na){delete Ja.bingMapsKey;ea.itemData=Ba(Ia);Na=ea.itemData.baseMap.baseMapLayers[0];Na.errors=[];Na.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});
Ca.callback([ea,Ja])})):sa(ea,Ja,Ia,Ca)}function sa(ea,Ja,Ia,Ca){delete Ja.bingMapsKey;ea.itemData=Ba(Ia);Ia=ea.itemData.baseMap.baseMapLayers[0];Ia.errors=[];Ia.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});Ca.callback([ea,Ja])}function Ba(ea){W(ea.baseMap.baseMapLayers[0])?ea.baseMap={title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:
P(ea.baseMap.baseMapLayers[0])?ea.baseMap={title:"Streets",baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:ea.baseMap={title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};
return ea}function Da(ea,Ja,Ia,Ca){var Ga=ea.dynamicLayerInfos||ea.layerInfos,Na=Ja.layers;if(Na&&Ga)if(Ca.usePopupManager){var Ma;q.forEach(Ga,function(db){var $a=db.id;if(!db.subLayerIds)for(db=0;db<Na.length;db++){var ib=Na[db];if(ib.id===$a&&ib.popupInfo&&!ib.disablePopup){Ma||(Ma={});Ma[$a]={infoTemplate:new Ia(ib.popupInfo),layerUrl:ib.layerUrl};break}}});Ma&&ea.setInfoTemplates(Ma)}else{var Ka=[],Ra=[],Wa=[],Ya=[],cb=[],Ta=[];q.forEach(Ga,function(db){var $a=db.id;if(!db.subLayerIds&&-1!==
q.indexOf(ea.visibleLayers,$a))for(db=0;db<Na.length;db++){var ib=Na[db];if(ib.id===$a){Ra.push($a);Ka.push(ib.popupInfo);Wa.push(ib.layerUrl||"");ib.layerDefinition&&ib.layerDefinition.definitionExpression?Ya.push(ib.layerDefinition.definitionExpression):Ya.push("");cb.push(u.isDefined(ib.minScale)?ib.minScale:null);Ta.push(u.isDefined(ib.maxScale)?ib.maxScale:null);break}}});Ka.length&&(ea.__popups=Ka,ea.__popupIds=Ra,ea.__popupUrls=Wa,ea.__popupWhereClauses=Ya,ea.__popupMinScales=cb,ea.__popupMaxScales=
Ta,ea.__resourceInfo=Ja.resourceInfo)}}function pa(ea){if(!ea)return!1;var Ja=(new g(Ab.arcgisUrl)).authority;return-1!==ea.indexOf(".arcgis.com/")||-1!==ea.indexOf(Ja)}function ra(ea){return ea?-1!==ea.indexOf("/services.arcgisonline.com/")||-1!==ea.indexOf("/server.arcgisonline.com/"):!1}function ya(ea){"https:"===location.protocol&&(pa(ea)||ra(ea))&&(ea=ea.replace("http:","https:"));return ea}function wa(ea,Ja,Ia){var Ca=[];ea.displayLevels||(Ca=q.map(ea.resourceInfo.tileInfo.lods,function(Na){return Na.level}));
if(ea.exclusionAreas){var Ga=y.clone(ea.exclusionAreas);Ga=q.map(Ga,function(Na){Na.geometry=new r(Na.geometry);return Na})}ea.resourceInfo&&"Raster"===ea.resourceInfo.cacheType?(Ca=ea.layerDefinition&&ea.layerDefinition.drawingInfo&&ea.layerDefinition.drawingInfo.renderer,Ca=new Xb(ya(ea.url),{resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,id:ea.id,minScale:ea.minScale,maxScale:ea.maxScale,refreshInterval:ea.refreshInterval,multidimensionalDefinition:ea.multidimensionalDefinition,
bandIds:ea.bandIds,renderer:Ca||null})):Ca=new I(ya(ea.url),{resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,displayLevels:ea.displayLevels||Ca,id:ea.id,minScale:ea.minScale,maxScale:ea.maxScale,refreshInterval:ea.refreshInterval,exclusionAreas:Ga});Ia.ignorePopups||Da(Ca,ea,Ja,Ia);return Ca}function la(ea,Ja){if(!ea||!Ja||0===Ja.length)return[];Ja=","+Ja+",";var Ia=[],Ca,Ga=",";for(Ca=0;Ca<ea.length;Ca++)if(null!==ea[Ca].subLayerIds){if(-1===Ja.indexOf(","+ea[Ca].id+",")||-1<
Ga.indexOf(","+ea[Ca].id+","))Ga+=ea[Ca].subLayerIds.toString()+","}else-1<Ja.indexOf(","+ea[Ca].id+",")&&-1===Ga.indexOf(","+ea[Ca].id+",")&&Ia.push(ea[Ca].id);return Ia}function Aa(ea,Ja,Ia){var Ca=new vb;Ca.format="png24";ea.resourceInfo&&ea.resourceInfo.supportedImageFormatTypes&&-1<ea.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")&&(Ca.format="png32");Ca=new nb(ya(ea.url),{resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,id:ea.id,imageParameters:Ca,minScale:ea.minScale,
maxScale:ea.maxScale,refreshInterval:ea.refreshInterval});var Ga=ea.visibleLayers;if(!ea.visibleLayers){var Na="";q.forEach(Ca.layerInfos,function(Ta){Ta.defaultVisibility&&(Na+=(0<Na.length?",":"")+Ta.id)});Ga=Na}if(ea.layers&&0<ea.layers.length){var Ma=[],Ka=[],Ra,Wa=[],Ya,cb;q.forEach(ea.layers,function(Ta){var db=Ta.layerDefinition;db&&db.definitionExpression&&(Ma[Ta.id]=db.definitionExpression);if(db&&db.source){Ra=null;cb=db.source;if("mapLayer"===cb.type){var $a=q.filter(ea.resourceInfo.layers,
function(ib){return ib.id===cb.mapLayerId});$a.length&&(Ra=y.mixin($a[0],Ta))}else Ra=y.mixin({},Ta);Ra&&(Ra.source=cb,delete Ra.popupInfo,Ra=new zb(Ra),ea.visibleLayers&&($a="string"==typeof ea.visibleLayers?ea.visibleLayers.split(","):ea.visibleLayers,-1<q.indexOf($a,Ta.id)?Ra.defaultVisibility=!0:Ra.defaultVisibility=!1),Ka.push(Ra))}db&&null!=db.transparency&&($a=db.drawingInfo||{},null==$a.transparency&&($a.transparency=db.transparency,db.drawingInfo=$a));db&&db.source&&db.drawingInfo&&(Ya=new Wb(db.drawingInfo),
Wa[Ta.id]=Ya)},this);0<Ma.length&&Ca.setLayerDefinitions(Ma);0<Ka.length?(Ca.setDynamicLayerInfos(Ka,!0),0<Wa.length&&Ca.setLayerDrawingOptions(Wa,!0)):(Ga=la(Ca.layerInfos,Ga),Ca.setVisibleLayers(Ga))}else Ga=la(Ca.layerInfos,Ga),Ca.setVisibleLayers(Ga);Ia.ignorePopups||Da(Ca,ea,Ja,Ia);return Ca}function da(ea,Ja,Ia){var Ca=new Hb;Ca.bandIds=ea.bandIds;null!=ea.format&&(Ca.format=ea.format,null!=ea.compressionQuality&&(Ca.compressionQuality=ea.compressionQuality));if(ea.renderingRule&&ea.renderingRule.rasterFunction){var Ga=
new cc(ea.renderingRule);Ca.renderingRule=Ga}ea.mosaicRule&&(Ga=new ac(ea.mosaicRule),Ca.mosaicRule=Ga);u.isDefined(ea.noData)&&(Ca.noData=ea.noData);u.isDefined(ea.noDataInterpretation)&&(Ca.noDataInterpretation=ea.noDataInterpretation);u.isDefined(ea.interpolation)&&(Ca.interpolation=ea.interpolation);Ga=ea.layerType?"ArcGISImageServiceVectorLayer"===ea.layerType:!1;u.isDefined(ea.layerType)||(Ga=ea.resourceInfo.hasMultidimensions&&("esriImageServiceDataTypeVector-UV"===ea.resourceInfo.serviceDataType||
"esriImageServiceDataTypeVector-MagDir"===ea.resourceInfo.serviceDataType));Ca={resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,id:ea.id,imageServiceParameters:Ca,minScale:ea.minScale,maxScale:ea.maxScale,refreshInterval:ea.refreshInterval};Ca=Ga?new Lb(ya(ea.url),Ca):new rb(ya(ea.url),Ca);ea.layerDefinition&&(ea.layerDefinition.drawingInfo&&ea.layerDefinition.drawingInfo.renderer&&(Ga=C.fromJson(ea.layerDefinition.drawingInfo.renderer),Ca.setRenderer(Ga)),ea.layerDefinition.definitionExpression&&
Ca.setDefinitionExpression(ea.layerDefinition.definitionExpression,!0));Ia.ignorePopups||!ea.popupInfo||ea.disablePopup||Ca.setInfoTemplate(new Ja(ea.popupInfo));return Ca}function fa(ea,Ja,Ia){var Ca=[102113,102100,3857],Ga=Ia||new A(Ja[0].layerObject.fullExtent.spatialReference),Na=new A(ea.resourceInfo.fullExtent.spatialReference);return Ga.wkt==Na.wkt&&(Ga.wkid==Na.wkid||u.isDefined(Ga.latestWkid)&&Ga.latestWkid==Na.wkid||u.isDefined(Na.latestWkid)&&Ga.wkid==Na.latestWkid||u.isDefined(Ga.latestWkid)&&
Ga.latestWkid==Na.latestWkid)||Ga.wkid&&Na.wkid&&q.some(Ca,function(Ma){return Ma===Na.wkid})&&q.some(Ca,function(Ma){return Ma===Ga.wkid})?!0:!1}function Q(ea,Ja,Ia){if(!Ja[0].layerObject.tileInfo)return!1;ea=ea.resourceInfo.tileInfo;Ja=Ja[0].layerObject.tileInfo;Ia=Ia.width>Ia.height?Ia.width:Ia.height;for(var Ca=!1,Ga=!1,Na=0;Na<ea.lods.length;Na++){for(var Ma=ea.lods[Na].scale/ea.dpi,Ka=0;Ka<Ja.lods.length;Ka++){var Ra=Ja.lods[Ka].scale/Ja.dpi;if(Math.abs(Ra-Ma)/Ra<1/Ia)if(Ca){Ga=!0;break}else Ca=
!0}if(Ga)break}return Ga||Ca&&(1===ea.lods.length||1===Ja.lods.length)?!0:!1}function xa(ea,Ja,Ia,Ca,Ga,Na){var Ma=Ia._clazz;if(L(ea))var Ka=new bc({id:ea.id,opacity:ea.opacity,visible:null!==ea.visibility&&void 0!==ea.visibility?ea.visibility:!0});else if(ea&&("WFS"===ea.layerType||"WFS"===ea.type)){var Ra={customParameters:ea.wfsInfo.customParameters,geometryType:ea.layerDefinition.geometryType,id:ea.id,labelingInfo:ea.layerDefinition.drawingInfo.labelingInfo,maxFeatures:ea.wfsInfo.maxFeatures,
mode:ea.mode,name:ea.wfsInfo.name,showLabels:!0,swapXY:ea.wfsInfo.swapXY,title:ea.title,url:ea.url,version:ea.wfsInfo.version,visible:ea.visibility,wkid:ea.layerDefinition.spatialReference.wkid};Ka=new dc;Ka.fromJson(Ra,function(){u.isDefined(ea.opacity)&&Ka.setOpacity(ea.opacity);u.isDefined(ea.visibility)&&Ka.setVisibility(ea.visibility);(ea.minScale||ea.maxScale)&&Ka.setScaleRange(ea.minScale,ea.maxScale);Ka.renderer=C.fromJson(ea.layerDefinition.drawingInfo.renderer,{geometryType:Ra.geometryType});
!Ia.ignorePopups&&ea.popupInfo&&Ka.setInfoTemplate(new Ma(ea.popupInfo));Ka.emit("fromJsonComplete")})}else if(ea&&("WMS"===ea.layerType||"WMS"===ea.type)){var Wa=[],Ya=[];q.forEach(ea.layers,function($a){Ya.push(new mc({name:$a.name,title:$a.title,legendURL:$a.legendURL||$a.legendUrl,queryable:$a.queryable,showPopup:$a.showPopup}));Wa.push($a.name)},this);ea.visibleLayers&&(Wa=ea.visibleLayers);Ca=new r(ea.extent[0][0],ea.extent[0][1],ea.extent[1][0],ea.extent[1][1],new A({wkid:4326}));Ca={customLayerParameters:ea.customLayerParameters,
customParameters:ea.customParameters,extent:Ca,layerInfos:Ya,version:ea.version,maxWidth:ea.maxWidth,maxHeight:ea.maxHeight,featureInfoFormat:ea.featureInfoFormat,getFeatureInfoURL:ea.featureInfoUrl,getMapURL:ea.mapUrl,spatialReferences:ea.spatialReferences,title:ea.title,copyright:ea.copyright,minScale:ea.minScale||0,maxScale:ea.maxScale||0,format:ea.format};Ka=new lc(ea.url,{id:ea.id,visibleLayers:Wa,format:"png",transparent:ea.firstLayer?!1:!0,opacity:ea.opacity,visible:null!==ea.visibility?ea.visibility:
!0,resourceInfo:Ca,refreshInterval:ea.refreshInterval});Ka.spatialReference.wkid=Ca.spatialReferences[0]}else if(ea&&("KML"===ea.layerType||"KML"===ea.type)){var cb=ea.url;if(k.id){var Ta=k.id.findCredential(E.urlToObject(Ab.arcgisUrl).path);Ta&&(Ja=Ab.arcgisUrl.substring(Ab.arcgisUrl.indexOf("//")+2,Ab.arcgisUrl.indexOf("/",Ab.arcgisUrl.indexOf("//")+3)),Ga=Ja.split("."),Ga=Ga[Ga.length-2]+"."+Ga[Ga.length-1],Na=cb.indexOf(Ga),-1<Na&&(cb="https://"+Ja+cb.substring(Na+Ga.length),cb+="?token\x3d"+
Ta.token))}Ka=new Mb(cb,{id:ea.id,visible:null!==ea.visibility?ea.visibility:!0,outSR:Ca,refreshInterval:ea.refreshInterval});a.connect(Ka,"onLoad",function(){(ea.opacity||0===ea.opacity)&&Ka.setOpacity(ea.opacity);u.isDefined(ea.minScale)&&u.isDefined(ea.maxScale)&&Ka.setScaleRange(ea.minScale,ea.maxScale);ea.visibleFolders&&q.forEach(Ka.folders,function($a){-1<q.indexOf(ea.visibleFolders,$a.id)?Ka.setFolderVisibility($a,!0):Ka.setFolderVisibility($a,!1)},this)})}else if(!ea||"WebTiledLayer"!==ea.layerType&&
"WebTiledLayer"!==ea.type)if(!ea||"GeoRSS"!==ea.layerType&&"GeoRSS"!==ea.type)if(ea&&("CSV"===ea.layerType||"CSV"===ea.type)&&ea.url)Ca={layerDefinition:ea.layerDefinition,columnDelimiter:ea.columnDelimiter,id:ea.id?ea.id:null,visible:null!==ea.visibility?ea.visibility:!0,opacity:ea.opacity,refreshInterval:ea.refreshInterval},ea.locationInfo&&(Ca.latitudeFieldName=ea.locationInfo.latitudeFieldName,Ca.longitudeFieldName=ea.locationInfo.longitudeFieldName),!Ia.ignorePopups&&ea.popupInfo&&(Ca.infoTemplate=
new Ma(ea.popupInfo)),Ka=new Bb(ea.url,Ca);else if("VectorTileLayer"===ea.layerType&&ea.styleUrl)Ka=new Yb(ea.styleUrl,{id:ea.id,minScale:ea.minScale,maxScale:ea.maxScale,opacity:ea.opacity,visible:ea.visibility});else if(ea.layerDefinition&&!ea.url)Ca=e.fromJson(e.toJson(ea)),delete Ca.id,delete Ca.opacity,delete Ca.visibility,Ka=new K(Ca,{id:ea.id,opacity:ea.opacity,visible:ea.visibility,outFields:["*"],autoGeneralize:!0}),Ia.ignorePopups||!Ca.popupInfo||Ca.disablePopup||Ka.setInfoTemplate(new Ma(Ca.popupInfo)),
Qa(Ka);else if(S(ea))Ia.bingMapsKey?(Ca=Eb.MAP_STYLE_AERIAL_WITH_LABELS,W(ea)?Ca=Eb.MAP_STYLE_AERIAL:P(ea)&&(Ca=Eb.MAP_STYLE_ROAD),Ka=new Eb({bingMapsKey:Ia.bingMapsKey,mapStyle:Ca,opacity:ea.opacity,id:ea.id}),a.connect(Ka,"onError",y.hitch(this,function($a){$a.errors=$a.errors||[];$a.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+($a?$a.layerType||$a.type:"")+"]"})},ea))):(ea.errors=ea.errors||[],ea.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+
(ea?ea.layerType||ea.type:"")+"]"}));else if(ea.resourceInfo&&(ea.resourceInfo.mapName||""===ea.resourceInfo.mapName))Ka=!0===ea.resourceInfo.singleFusedMapCache&&(ea.baseMapLayer||fa(ea,Ja,Ca)&&Q(ea,Ga,Na))?wa(ea,Ma,Ia):Aa(ea,Ma,Ia);else if(ea.resourceInfo&&ea.resourceInfo.pixelSizeX)Ka=!0===ea.resourceInfo.singleFusedMapCache&&"ArcGISImageServiceLayer"!==ea.layerType&&(ea.baseMapLayer||"Raster"===ea.resourceInfo.cacheType||fa(ea,Ja,Ca)&&Q(ea,Ga,Na))?wa(ea,Ma,Ia):da(ea,Ma,Ia);else if(ea.resourceInfo&&
"Feature Layer"===ea.resourceInfo.type){ea.capabilities&&(ea.resourceInfo.capabilities=ea.capabilities);var db;!1===Ia.editable?db=!1:Ia.privileges&&-1===q.indexOf(Ia.privileges,"features:user:edit")&&k.id&&k.id.findCredential(ea.url)&&(db=!1);Ka=new K(ya(ea.url),{resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,id:ea.id,mode:ea.mode===K.MODE_SELECTION?K.MODE_SELECTION:K.MODE_AUTO,editable:db,outFields:["*"],autoGeneralize:!0,refreshInterval:ea.refreshInterval});Ia.ignorePopups||
!ea.popupInfo||ea.disablePopup||Ka.setInfoTemplate(new Ma(ea.popupInfo));ea.layerDefinition&&(ea.layerDefinition.drawingInfo&&ea.layerDefinition.drawingInfo.renderer&&(Ca=C.fromJson(ea.layerDefinition.drawingInfo.renderer,{geometryType:Ka.geometryType}),Ca.isMaxInclusive=!0,Ka.setRenderer(Ca)),ea.layerDefinition.drawingInfo&&ea.layerDefinition.drawingInfo.labelingInfo&&(Ca=q.map(ea.layerDefinition.drawingInfo.labelingInfo,function($a){return new Fb($a)}),Ka.setLabelingInfo(Ca)),ea.layerDefinition.definitionExpression&&
Ka.setDefinitionExpression(ea.layerDefinition.definitionExpression),u.isDefined(ea.layerDefinition.minScale)&&Ka.setMinScale(ea.layerDefinition.minScale),u.isDefined(ea.layerDefinition.maxScale)&&Ka.setMaxScale(ea.layerDefinition.maxScale));Qa(Ka)}else ea.resourceInfo&&ea.resourceInfo.streamUrls&&(Ca={resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,id:ea.id},ea.layerDefinition&&(cb=ea.layerDefinition.drawingInfo,ea.layerDefinition.definitionGeometry&&(Ta=Ta||{},Ta.geometry=ea.layerDefinition.definitionGeometry),
u.isDefined(ea.layerDefinition.definitionExpression)&&(Ta=Ta||{},Ta.where=ea.layerDefinition.definitionExpression),u.isDefined(ea.layerDefinition.maximumTrackPoints)&&(Ca.maximumTrackPoints=ea.layerDefinition.maximumTrackPoints)),Ta&&(Ca.filter=Ta),ea.purgeOptions&&(Ca.purgeOptions=ea.purgeOptions),Ka=new jc(ya(ea.url),Ca),cb&&cb.renderer&&(Ca=cb.renderer,Ka.setRenderer(C.fromJson(Ca,{geometryType:ea.resourceInfo.geometryType}))),cb&&cb.labelingInfo&&(Ca=q.map(cb.labelingInfo,function($a){return new Fb($a)}),
Ka.setLabelingInfo(Ca)),Ia.ignorePopups||!ea.popupInfo||ea.disablePopup||Ka.setInfoTemplate(new Ma(ea.popupInfo)),ea.layerDefinition&&(u.isDefined(ea.layerDefinition.minScale)&&Ka.setMinScale(ea.layerDefinition.minScale),u.isDefined(ea.layerDefinition.maxScale)&&Ka.setMaxScale(ea.layerDefinition.maxScale)),f.once(Ka,"error",function($a){ea.errors.push({message:"Error loading stream layer. Check websocket url"})}));else Ka=new $b(ea.url,{id:ea.id,opacity:ea.opacity,outSpatialReference:Ca,refreshInterval:ea.refreshInterval}),
a.connect(Ka,"onLoad",function(){!1===ea.visibility&&Ka.hide();u.isDefined(ea.minScale)&&u.isDefined(ea.maxScale)&&Ka.setScaleRange(ea.minScale,ea.maxScale);var $a=Ka.getFeatureLayers();q.forEach($a,function(ib){ea.pointSymbol&&"esriGeometryPoint"===ib.geometryType?(ib.renderer.symbol=B.fromJson(ea.pointSymbol),1===$a.length&&(Ka.pointSymbol=B.fromJson(ea.pointSymbol))):ea.lineSymbol&&"esriGeometryPolyline"===ib.geometryType?(ib.renderer.symbol=B.fromJson(ea.lineSymbol),1===$a.length&&(Ka.polylineSymbol=
B.fromJson(ea.lineSymbol))):ea.polygonSymbol&&"esriGeometryPolygon"===ib.geometryType&&(ib.renderer.symbol=B.fromJson(ea.polygonSymbol),1===$a.length&&(Ka.polygonSymbol=B.fromJson(ea.polygonSymbol)))})});else if(Ka=new kc(ea.templateUrl,{id:ea.id,visible:null!==ea.visibility?ea.visibility:!0,opacity:ea.opacity,copyright:ea.copyright,fullExtent:ea.fullExtent&&new r(ea.fullExtent),initialExtent:ea.fullExtent&&new r(ea.fullExtent),subDomains:ea.subDomains,tileInfo:ea.tileInfo?new qc(ea.tileInfo):null,
refreshInterval:ea.refreshInterval,wmtsInfo:ea.wmtsInfo}),u.isDefined(ea.minScale)||u.isDefined(ea.maxScale))Ka.loaded?Ka.setScaleRange(ea.minScale,ea.maxScale):a.connect(Ka,"onLoad",function(){Ka.setScaleRange(ea.minScale,ea.maxScale)});Ka&&(Ka.arcgisProps={title:ea.title},ea.baseMapLayer&&(ea.isReference?(Ka.attr("data-reference",!0),Ka._basemapGalleryLayerType="reference"):Ka._basemapGalleryLayerType="basemap"),Ka instanceof K&&ea.layerDefinition&&ea.layerDefinition.featureReduction&&"cluster"===
ea.layerDefinition.featureReduction.type&&(Ca=ea.layerDefinition.featureReduction,Ca.clusterSize&&(Ca.clusterSize=c.pt2px(Ca.clusterSize)),Ca.clusterRadius&&(Ca.clusterRadius=c.pt2px(Ca.clusterRadius)),Ca.popupInfo&&(Ca.infoTemplate=new F(Ca.popupInfo),delete Ca.popupInfo),Ka.setFeatureReduction(Ca)));return Ka}function Fa(ea,Ja,Ia,Ca,Ga){q.forEach(ea,function(Ka){Ka.layerObject=xa(Ka,ea,Ja,Ia,Ca,Ga)});var Na=q.filter(ea,function(Ka){return!Ka.isReference}),Ma=q.filter(ea,function(Ka){return!!Ka.isReference});
return ea=Na.concat(Ma)}function ca(ea){var Ja=null;ea=ea[0];ea.url&&aa(ea)&&ea.resourceInfo.spatialReference&&(Ja=new A,ea.resourceInfo.spatialReference.wkid&&(Ja.wkid=ea.resourceInfo.spatialReference.wkid),ea.resourceInfo.spatialReference.wkt&&(Ja.wkt=ea.resourceInfo.spatialReference.wkt));S(ea)||L(ea)?Ja=new A({wkid:102100}):ea&&("WMS"===ea.layerType||"WMS"===ea.type)&&(Ja=new A({wkid:ea.spatialReferences[0]}));return Ja}function Sa(ea,Ja,Ia,Ca,Ga,Na,Ma,Ka){q.forEach(Ja,function(Ra){Ra.url&&aa(Ra)&&
(Ra.resourceInfo=ea[Ra.deferredsPos][1],delete Ra.deferredsPos)});Na=Na||ca(Ja);Ja=Fa(Ja,Ia,Na,Ma,Ka);Ga.callback(Ja);return Ga}function Qa(ea){!window.CanvasRenderingContext2D&&ea.renderer&&"esri.renderer.HeatmapRenderer"===ea.renderer.declaredClass&&ea.setRenderer(C.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}}))}function va(ea,Ja){var Ia=
ya(ea);return x({url:Ia,content:{f:"json"},callbackParamName:"callback",error:function(Ca,Ga){Ca.message=Ca.message?Ca.message+(" [url:"+Ia+"]"):"[url:"+Ia+"]";Ja.push(Ca);t.defaults.io.errorHandler(Ca,Ga)}})}function T(ea){var Ja=Ab.arcgisUrl+"/"+ea.itemId+"/data";return x({url:Ja,content:{f:"json"},callbackParamName:"callback",error:function(Ia,Ca){Ia.message=Ia.message?Ia.message+(" [url:"+Ja+"]"):"[url:"+Ja+"]";ea.errors=ea.errors||[];ea.errors.push(Ia);t.defaults.io.errorHandler(Ia,Ca)}})}function ja(ea,
Ja,Ia){var Ca=new h;if(!(Ia.featureCollection&&Ia.featureCollection.layers||Ia.layers))return ea.errors=ea.errors||[],ea.errors.push({message:"Invalid Feature Collection item data. [item id: "+ea.itemId+"]"}),Ca.errback(),Ca;Ia.layers&&(Ia.featureCollection={layers:Ia.layers},delete Ia.layers,u.isDefined(Ia.showLegend)&&(Ia.featureCollection.showLegend=Ia.showLegend,delete Ia.showLegend));ka(ea,Ia.featureCollection,Ja).then(function(Ga){Ia.featureCollection=Ga;ea.featureCollection&&ea.featureCollection.layers?
q.forEach(Ia.featureCollection.layers,function(Na,Ma){Ma=ea.featureCollection.layers[Ma];Ma.popupInfo||Ma.layerDefinition?Ma.layerDefinition?(u.isDefined(Ma.layerDefinition.minScale)&&u.isDefined(Ma.layerDefinition.maxScale)&&(Ma.layerDefinition.minScale!==Na.layerDefinition.minScale||Ma.layerDefinition.maxScale!==Na.layerDefinition.maxScale)&&(delete Na.layerDefinition.minScale,delete Na.layerDefinition.maxScale),Ma.layerDefinition.drawingInfo&&e.toJson(Ma.layerDefinition.drawingInfo)!==e.toJson(Na.layerDefinition.drawingInfo)&&
delete Na.layerDefinition.drawingInfo,Ma.layerDefinition.showLegend!==Na.layerDefinition.showLegend&&delete Na.layerDefinition.showLegend,Ma.layerDefinition=y.mixin(Ma.layerDefinition,Na.layerDefinition)):Ma.layerDefinition=Na.layerDefinition:(Ma.popupInfo=Na.popupInfo,Ma.layerDefinition=Na.layerDefinition);Ma.featureSet=Na.featureSet;Ma.nextObjectId=Na.nextObjectId}):(ea.featureCollection=ea.featureCollection||{},ea.featureCollection=y.mixin(ea.featureCollection,Ia.featureCollection));Ca.callback(ea)});
return Ca}function ka(ea,Ja,Ia){var Ca=new h;b(["./csv"],function(Ga){var Na=[];q.forEach(Ja.layers,function(Ma){Ma.featureSet&&Ma.featureSet.features&&Ma.featureSet.features.length&&Ma.featureSet.features[0].geometry&&Ma.featureSet.features[0].geometry.spatialReference&&(Ma.deferredsPos=Na.length,Na.push(Ga.projectFeatureCollection(Ma,Ia,Ma.featureSet.features[0].geometry.spatialReference)))});(new m(Na)).addCallback(function(){q.forEach(Ja.layers,function(Ma){u.isDefined(Ma.deferredsPos)&&(Na[Ma.deferredsPos].results&&
Na[Ma.deferredsPos].results.length?Ma=Na[Ma.deferredsPos].results[0]:(Ma.errors=Ma.errors||[],Ma.errors.push({message:"Errors projecting feature collection. ["+ea.title+" - "+Ma.layerDefinition.name+"]"})),delete Ma.deferredsPos)});Ca.callback(Ja)})});return Ca}function U(ea,Ja,Ia,Ca,Ga){var Na=new h,Ma=new h,Ka=[];q.forEach(ea.operationalLayers,function(Wa){Wa.itemId&&"Feature Collection"==Wa.type&&Ka.push(T(Wa).then(y.hitch(null,ja,Wa,Ia)))});if(0===Ka.length)ha(ea,Ja,Ia,Ca,Ma,Ga);else{var Ra=new m(Ka);
Ra.addCallback(function(Wa){ha(ea,Ja,Ia,Ca,Ma,Ga)})}Ma.then(function(Wa){Ka=[];q.forEach(Wa,function(cb){cb=cb.layerObject;if(cb instanceof K&&!cb.loaded&&!cb.loadError){var Ta=new h;f.once(cb,"load, error",function(){Ta.callback(cb)});Ka.push(Ta)}else cb&&"esri.layers.WFSLayer"===cb.declaredClass&&!cb.loadError&&(Ta=new h,f.once(cb,"fromJsonComplete, error",function(db){Ta.callback(cb)}),Ka.push(Ta))});if(Ka.length){var Ya=new h;Ra=new m(Ka);Ra.addCallback(function(){Ya.callback(Wa)});return Ya.promise}return Wa}).then(function(Wa){var Ya=
[];q.forEach(Wa,function(cb){var Ta=cb.layerObject;Ta&&(Ta instanceof K||"esri.layers.StreamLayer"===Ta.declaredClass)?Ta.loaded&&Ta.labelingInfo&&(cb.showLabels||Ta._collection?Ya.push(Ta):Ta.setShowLabels&&Ta.setShowLabels(!1)):Ta&&"esri.layers.WFSLayer"===Ta.declaredClass&&Ta.loaded&&Ta.labelingInfo&&Ya.push(Ta)});Ya.length?b(["../layers/LabelLayer"],function(cb){var Ta=new cb;q.forEach(Ya,function(db){Ta.addFeatureLayer(db)});Wa.push({layerObject:Ta});Na.callback(Wa)}):Na.callback(Wa)});return Na}
function ha(ea,Ja,Ia,Ca,Ga,Na){var Ma=[],Ka=[],Ra=[];q.forEach(ea.operationalLayers,function(Wa,Ya){if(Wa.featureCollection&&Wa.featureCollection.layers){var cb=Wa.featureCollection.layers.length;q.forEach(Wa.featureCollection.layers,function(Ta,db){var $a=!0;Wa.visibleLayers&&-1==q.indexOf(Wa.visibleLayers,db)&&($a=!1);Ta.visibility=(null!=Wa.visibility?!!Wa.visibility:!0)&&$a;Ta.opacity=Wa.opacity;Ta.id=(Wa.id||"operational"+Ya)+"_"+db;Wa.title&&(Ta.title=1!==cb&&Ta.layerDefinition.name&&Wa.title!==
Ta.layerDefinition.name?Wa.title+" - "+Ta.layerDefinition.name:Wa.title);null==Ta.disablePopup&&(Ta.disablePopup=Wa.disablePopup);Ra.push(Ta)},this)}else Ra.push(Wa)});q.forEach(ea.baseMap.baseMapLayers,function(Wa,Ya){Wa.baseMapLayer=!0;Wa.id=Wa.id||"base"+Ya;Ma.push(Wa)});q.forEach(Ra,function(Wa,Ya){Wa.id=Wa.id||"operational"+Ya;Ma.push(Wa)});q.forEach(Ma,function(Wa){Wa.url&&aa(Wa)&&(Wa.deferredsPos=Ka.length,Wa.errors=Wa.errors||[],Ka.push(va(Wa.url,Wa.errors)))});0===Ka.length?(Ia=Ia||ca(Ma),
Ma=Fa(Ma,Ja,Ia,Ca,Na),Ga.callback(Ma)):(new m(Ka)).addCallback(function(Wa){Sa(Wa,Ma,Ja,Ka,Ga,Ia,Ca,Na)});return Ga}function na(ea,Ja,Ia,Ca){var Ga=ea.minScale,Na=ea.maxScale;if(10.1>=Ia.version&&Ja)for(ea=Ja.length-1;0<=ea;ea--){if(Ja[ea].id==Ca)if(0==Ga&&0<Ja[ea].minScale?Ga=Ja[ea].minScale:0<Ga&&0==Ja[ea].minScale?Ga=Ia.minScale:0<Ga&&0<Ja[ea].minScale&&(Ga=Math.min(Ga,Ja[ea].minScale)),Na=Math.max(Ia.maxScale||0,Ja[ea].maxScale||0),Ia.setScaleRange(Ga,Na),-1<Ja[ea].parentLayerId)Ca=Ja[ea].parentLayerId;
else break}else 10.1<Ia.version&&(q.forEach(ea.layerInfos,function(Ma){Ma.id==Ca&&(0==Ga&&0<Ma.minScale?Ga=Ma.minScale:0<Ga&&0==Ma.minScale||0<Ga&&0<Ma.minScale&&(Ga=Math.min(Ga,Ma.minScale)),Na=Math.max(Na||0,Ma.maxScale||0))}),Ia.setScaleRange(Ga,Na))}function qa(ea,Ja,Ia,Ca){var Ga=ea.url,Na=ea.__popupIds,Ma=ea.__popupUrls,Ka=ea.__popupWhereClauses,Ra=ea.__popupMinScales,Wa=ea.__popupMaxScales,Ya=ea.__resourceInfo,cb=[];q.forEach(ea.__popups,function(Ta,db){if(Ta){var $a=[];q.forEach(Ta.fieldInfos,
function(tb){"shape"!==tb.fieldName.toLowerCase()&&$a.push(tb.fieldName)});if(ea.dynamicLayerInfos&&0<ea.dynamicLayerInfos.length){var ib=q.filter(ea.dynamicLayerInfos,function(tb){return Na[db]==tb.id})[0].source;var Cb=new K(Ga+"/dynamicLayer",{parentLayer:ea,id:ea.id+"_"+Na[db],source:ib,outFields:$a,mode:K.MODE_SELECTION,infoTemplate:Ta&&new Ia(Ta),drawMode:!1,visible:ea.visible,autoGeneralize:!0});var Zb=function(tb,Qb){0<Ka[tb].length&&Qb.setDefinitionExpression(Ka[tb]);if(u.isDefined(Ra[tb])||
u.isDefined(Wa[tb]))if(u.isDefined(ea.minScale)||u.isDefined(ea.maxScale)){var Jb=ea.minScale,Tb=ea.maxScale;0==Jb&&0<Ra[tb]?Jb=Ra[tb]:0<Jb&&0==Ra[tb]||0<Jb&&0<Ra[tb]&&(Jb=Math.min(Jb,Ra[tb]));Tb=Math.max(Tb||0,Wa[tb]||0);Qb.setScaleRange(Jb,Tb)}else Qb.setScaleRange(Ra[tb],Wa[tb]);else na(ea,Ja||Ya.layers,Qb,Na[tb])};Cb.loaded?Zb(db,Cb):a.connect(Cb,"onLoad",function(tb){Zb(db,Cb)})}else{var qb=null,nc=Ga+"/"+Na[db];if(Ma[db].length)nc=Ma[db];else if(Ja)for(ib=0;ib<Ja.length;ib++)if(Ja[ib].id===
Na[db]){qb=Ja[ib];break}Cb=new K(ya(nc),{parentLayer:ea,id:ea.id+"_"+Na[db],outFields:$a,mode:K.MODE_SELECTION,infoTemplate:Ta&&new Ia(Ta),drawMode:!1,visible:ea.visible,resourceInfo:qb,autoGeneralize:!0});Cb.loaded?(0<Ka[db].length&&Cb.setDefinitionExpression(Ka[db]),na(ea,Ja||Ya.layers,Cb,Na[db])):a.connect(Cb,"onLoad",function(tb){0<Ka[db].length&&Cb.setDefinitionExpression(Ka[db]);na(ea,Ja||Ya.layers,tb,Na[db])})}cb.push(Cb)}});0<cb.length&&(a.connect(ea,"onVisibilityChange",y.hitch(this,function(Ta,
db){q.forEach(Ta,function($a){db?$a.show():$a.hide()})},cb)),a.connect(Ca,"onLayerRemove",y.hitch(this,function(Ta,db,$a){Ta.id===$a.id&&q.forEach(db,function(ib){Ca.removeLayer(ib)})},ea,cb)));delete ea.__popups;delete ea.__popupIds;delete ea.__popupUrls;delete ea.__popupWhereClauses;delete ea.__popupMinScales;delete ea.__popupMaxScales;delete ea.__resourceInfo;return cb}function ua(ea){return x({url:ya(ea.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function za(ea,
Ja,Ia){var Ca=[];q.forEach(ea,function(Na){var Ma=Na.__popups;Ma&&1<Ma.length&&10<=Na.version&&(Na.__deferredsPos=Ca.length,Ca.push(ua(Na)))});var Ga=[];0<Ca.length?(new m(Ca)).addCallback(function(Na){q.forEach(ea,function(Ma){Ma.__popups&&0<Ma.__popups.length&&(Ma.__deferredsPos||0===Ma.__deferredsPos?(Ga=Ga.concat(qa(Ma,Na[Ma.__deferredsPos][1].layers,Ia,Ja)),delete Ma.__deferredsPos):Ga=Ga.concat(qa(Ma,null,Ia,Ja)))});Ja.addLayers(Ga)}):(q.forEach(ea,function(Na){Na.__popups&&0<Na.__popups.length&&
(Ga=Ga.concat(qa(Na,null,Ia,Ja)))}),Ja.addLayers(Ga))}function Ea(ea){q.forEach(ea,function(Ja){var Ia=Ja.layer;Ia.toJson&&(Ja=Ia.toJson(),Ja.featureSet&&Ia.name&&-1<Ia.name.indexOf("Text")&&q.forEach(Ja.featureSet.features,function(Ca,Ga){Ca.attributes.TEXT&&(Ga=Ia.graphics[Ga],Ga.symbol.setText(Ca.attributes.TEXT),Ca.symbol.horizontalAlignment&&(Ga.symbol.align=Ca.symbol.horizontalAlignment),Ga.setSymbol(Ga.symbol),Ga.setAttributes(Ca.attributes))},this))})}function Pa(ea){var Ja=6;q.forEach(ea,
function(Ia){if(Ia=Ia.renderer)"esri.renderer.SimpleRenderer"===Ia.declaredClass?((Ia=Ia.symbol)&&Ia.xoffset&&(Ja=Math.max(Ja,Math.abs(Ia.xoffset))),Ia&&Ia.yoffset&&(Ja=Math.max(Ja,Math.abs(Ia.yoffset)))):"esri.renderer.UniqueValueRenderer"!==Ia.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==Ia.declaredClass||q.forEach(Ia.infos,function(Ca){(Ca=Ca.symbol)&&Ca.xoffset&&(Ja=Math.max(Ja,Math.abs(Ca.xoffset)));Ca&&Ca.yoffset&&(Ja=Math.max(Ja,Math.abs(Ca.yoffset)))})});return Ja}function Oa(ea){var Ja=
this,Ia=Ja.infoWindow,Ca=ea.graphic;if(Ja.loaded){Ia.hide();Ia.clearFeatures();var Ga=[];q.forEach(Ja.graphicsLayerIds,function(Ta){(Ta=Ja.getLayer(Ta))&&Ta instanceof K&&Ta.loaded&&Ta.visible&&(Ta.clearSelection(),Ta.infoTemplate&&!Ta.suspended&&Ga.push(Ta))});q.forEach(Ja.layerIds,function(Ta){(Ta=Ja.getLayer(Ta))&&-1!==Ta.declaredClass.indexOf("ArcGISImageServiceLayer")&&Ta.loaded&&Ta.visible&&Ta.infoTemplate&&Ga.push(Ta)});Ca=Ca&&Ca.getInfoTemplate()?Ca:null;if(Ga.length||Ca){var Na=Pa(Ga),Ma=
ea.screenPoint,Ka=Ja.toMap(new D(Ma.x-Na,Ma.y+Na));Na=Ja.toMap(new D(Ma.x+Na,Ma.y-Na));var Ra=new r(Ka.x,Ka.y,Na.x,Na.y,Ja.spatialReference),Wa=new H;Wa.geometry=Ra;Wa.timeExtent=Ja.timeExtent;var Ya=!0;Ka=q.map(Ga,function(Ta){Ta=Ta&&Ta.isFeatureReductionActive&&Ta.isFeatureReductionActive()?Ta.getFeatureReductionLayer():Ta;if(-1!==Ta.declaredClass.indexOf("ArcGISImageServiceLayer")){Wa.geometry=ea.mapPoint;Ya=!1;var db=Ta.queryVisibleRasters(Wa,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0});
db.addCallback(function(){return Ta.getVisibleRasters()})}else if("function"===typeof Ta.selectFeatures)db=Ta.selectFeatures(Wa),db.addCallback(function(){return Ta.getSelectedFeatures()});else{db=new h;var $a=q.filter(Ta.graphics,function(ib){return ib&&ib.visible&&Ra.intersects(ib.geometry)});db.resolve($a)}return db});Ca&&(Na=new h,Na.callback([Ca]),Ka.splice(0,0,Na));if(!q.some(Ka,function(Ta){return-1===Ta.fired})){var cb=Ca?1:0;q.forEach(Ga,function(Ta){cb=-1!==Ta.declaredClass.indexOf("ArcGISImageServiceLayer")?
cb+Ta.getVisibleRasters().length:cb+Ta.getSelectedFeatures().length});if(!cb)return}Ia.setFeatures(Ka);Ia.show(ea.mapPoint,{closestFirst:Ya})}}}function Ha(ea,Ja){var Ia=Ja.mapOptions||{};if(!Ia.infoWindow){var Ca=new G({visibleWhenEmpty:!1},l.create("div"));Ia.infoWindow=Ca}u.isDefined(Ia.showInfoWindowOnClick)||Ja.usePopupManager||(Ia.showInfoWindowOnClick=!1);ea=new z(ea,Ia);a.connect(ea,"onLayersAddResult",Ea);return ea}function Ua(ea,Ja,Ia,Ca,Ga,Na){if(Ca.map){var Ma=Ca.map;var Ka=Ca.clickEventHandle;
var Ra=Ca.clickEventListener;var Wa=Ca.errors}else{var Ya=Ia.itemData;!Ga.mapOptions.backgroundColor&&Ya.background&&Ya.background.color&&null!=Ya.background.color[0]&&(Ga.mapOptions.backgroundColor=n.toDojoColor(Ya.background.color));Ma=Ha(Ca,Ga);Ga.ignorePopups||Ga.disableClickBehavior||Ga.usePopupManager||(Ka=a.connect(Ma,"onClick",Oa),Ra=Oa)}Ma.addLayers(ea);Ga.ignorePopups||Ga.usePopupManager||za(ea,Ma,Ga._clazz);var cb=Wa||[];q.forEach(Ja,function(Ta){Ta.errors&&(cb=cb.concat(Ta.errors))},this);
Ma.loaded?Na.callback({map:Ma,itemInfo:Ia,errors:cb,clickEventHandle:Ka,clickEventListener:Ra}):a.connect(Ma,"onLoad",function(){Na.callback({map:Ma,itemInfo:Ia,errors:cb,clickEventHandle:Ka,clickEventListener:Ra})})}function bb(ea,Ja,Ia,Ca,Ga){var Na=[];q.forEach(Ga,function(Ra){y.isArray(Ra.layerObject)?q.forEach(Ra.layerObject,function(Wa){Na.push(Wa)}):Na.push(Ra.layerObject)});if(S(Ga[0]))var Ma=setInterval(function(){if(Ga[0].layerObject&&Ga[0].layerObject.loaded)clearInterval(Ma),ab(ea,Ja,
Ia,Ca,Ga,Na);else if(Ga[0].errors){clearInterval(Ma);var Ra="";Ga[0].errors&&Ga[0].errors.length&&(Ra=" ("+Ga[0].errors[0].message+")");Ca.errback(Error(R.arcgis.utils.baseLayerError+Ra))}},10);else if(!Na[0]&&Ga[0].baseMapLayer){var Ka="";Ga[0].errors&&Ga[0].errors.length&&(Ka=" ("+Ga[0].errors[0].message+")");Ca.errback(Error(R.arcgis.utils.baseLayerError+Ka))}else ab(ea,Ja,Ia,Ca,Ga,Na)}function ab(ea,Ja,Ia,Ca,Ga,Na){try{var Ma=Ia.mapOptions||{};Ia.mapOptions=Ma;Na=q.filter(Na,u.isDefined);if(Ja.map||
Ma.extent)Ua(Na,Ga,ea,Ja,Ia,Ca);else{var Ka=Na[0].spatialReference;if(Ma.center&&(null!=Ma.zoom||Ma.scale)&&(y.isArray(Ma.center)&&(Ma.center=new w(Ma.center)),v.canProject(Ma.center,Ka))){Ua(Na,Ga,ea,Ja,Ia,Ca);return}var Ra=ea.item;if(Ra&&Ra.extent&&Ra.extent.length){var Wa=new r(Ra.extent[0][0],Ra.extent[0][1],Ra.extent[1][0],Ra.extent[1][1],new A({wkid:4326}));4326===Ka.wkid?(Ma.extent=Wa,Ua(Na,Ga,ea,Ja,Ia,Ca)):900913===Ka.wkid||102100===Ka.wkid||102113===Ka.wkid||3857===Ka.wkid?(Wa.xmin=Math.max(Wa.xmin,
-180),Wa.xmax=Math.min(Wa.xmax,180),Wa.ymin=Math.max(Wa.ymin,-89.99),Wa.ymax=Math.min(Wa.ymax,89.99),Ma.extent=v.geographicToWebMercator(Wa),Ua(Na,Ga,ea,Ja,Ia,Ca)):Ia.geometryServiceURL||t.defaults.geometryService?(Ia.geometryServiceURL?new J(Ia.geometryServiceURL):t.defaults.geometryService).project([Wa],Ka,function(Ya){Ya=Ya[0];Ma.extent=Ma.extent||Ya;Ua(Na,Ga,ea,Ja,Ia,Ca)},function(){Ua(Na,Ga,ea,Ja,Ia,Ca)}):Ca.errback(Error(R.arcgis.utils.geometryServiceError))}else Ua(Na,Ga,ea,Ja,Ia,Ca)}}catch(Ya){Ca.errback(Ya)}}
function gb(ea){var Ja=[];q.forEach(ea.operationalLayers,function(Ia){Ia.featureCollection?Ja.push({featureCollection:Ia.featureCollection,visibility:null!=Ia.visibility?!!Ia.visibility:!0,title:Ia.title}):Ia.layerObject&&Ja.push({layer:Ia.layerObject,visibility:null!=Ia.visibility?!!Ia.visibility:!0,title:Ia.title})});return Ja}function fb(ea){var Ja=[],Ia=ea.baseMap.baseMapLayers;ea.operationalLayers&&(Ia=Ia.concat(ea.operationalLayers));q.forEach(Ia,function(Ca){var Ga={};if(Ca.featureCollection&&
(!Ca||"CSV"!==Ca.layerType&&"CSV"!==Ca.type))!0===Ca.featureCollection.showLegend&&q.forEach(Ca.featureCollection.layers,function(Ka){if(!1!==Ka.showLegend){var Ra=Ka.layerObject.renderer;Ga={layer:Ka.layerObject,title:Ca.title,defaultSymbol:Ra&&Ra.defaultSymbol&&Ra.defaultLabel?!0:!1};1<Ca.featureCollection.layers.length&&(Ga.title+=" - "+Ka.layerDefinition.name);Ja.push(Ga)}});else if(Ca.baseMapLayer&&!0===Ca.showLegend&&Ca.layerObject||!Ca.baseMapLayer&&!1!==Ca.showLegend&&Ca.layerObject&&!(Ca.layerObject instanceof
K&&Ca.layerObject.mode===K.MODE_SELECTION)){var Na=Ca.layerObject.renderer,Ma=Ca.layerObject.declaredClass;Na=!Na||Na&&Na.defaultSymbol&&Na.defaultLabel?!0:!1;if(10.1>Ca.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===Ma||"esri.layers.ArcGISTiledMapServiceLayer"===Ma)||"esri.layers.ArcGISImageServiceLayer"===Ma)Na=!0;Ga={layer:Ca.layerObject,title:Ca.title,defaultSymbol:Na};Ca.layers&&(Ma=q.map(q.filter(Ca.layers,function(Ka){return!1===Ka.showLegend}),function(Ka){return Ka.id}),
Ma.length&&(Ga.hideLayers=Ma));Ja.push(Ga)}});return Ja}function kb(ea,Ja){function Ia(Ka,Ra){q.forEach(Ka,function(Wa,Ya){switch(Wa){case "../layers/ArcGISDynamicMapServiceLayer":nb=Ra[Ya];break;case "../layers/ArcGISImageServiceLayer":rb=Ra[Ya];break;case "../layers/ArcGISImageServiceVectorLayer":Lb=Ra[Ya];break;case "../layers/CSVLayer":Bb=Ra[Ya];break;case "../layers/DynamicLayerInfo":zb=Ra[Ya];break;case "../layers/GeoRSSLayer":$b=Ra[Ya];break;case "../layers/ImageParameters":vb=Ra[Ya];break;
case "../layers/ImageServiceParameters":Hb=Ra[Ya];break;case "../layers/KMLLayer":Mb=Ra[Ya];break;case "../layers/LabelClass":Fb=Ra[Ya];break;case "../layers/LayerDrawingOptions":Wb=Ra[Ya];break;case "../layers/MosaicRule":ac=Ra[Ya];break;case "../layers/OpenStreetMapLayer":bc=Ra[Ya];break;case "../layers/RasterFunction":cc=Ra[Ya];break;case "../layers/RasterXLayer":Xb=Ra[Ya];break;case "../layers/StreamLayer":jc=Ra[Ya];break;case "../layers/TileInfo":qc=Ra[Ya];break;case "../layers/VectorTileLayer":Yb=
Ra[Ya];break;case "../virtualearth/VETiledLayer":Eb=Ra[Ya];break;case "../layers/WebTiledLayer":kc=Ra[Ya];break;case "../layers/WFSLayer":dc=Ra[Ya];break;case "../layers/WMSLayer":lc=Ra[Ya];break;case "../layers/WMSLayerInfo":mc=Ra[Ya]}})}var Ca=new h;ea=ea.itemData;Ja=[];ea.baseMap&&ea.baseMap.baseMapLayers&&(Ja=Ja.concat(ea.baseMap.baseMapLayers));ea.operationalLayers&&(Ja=Ja.concat(ea.operationalLayers));ea=q.map(Ja,function(Ka){return Ka&&Ka.layerType});var Ga=[],Na=[];Ja=!1;for(var Ma=0;Ma<ea.length;Ma++){switch(ea[Ma]){case "ArcGISFeatureLayer":-1===
q.indexOf(Ga,"../layers/LabelClass")&&Ga.push("../layers/LabelClass");break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===q.indexOf(Ga,"../layers/ArcGISImageServiceLayer")&&(Ga.push("../layers/ArcGISImageServiceLayer"),Na.push("../layers/ImageServiceParameters"),Na.push("../layers/MosaicRule"),Na.push("../layers/RasterFunction"),Ga.push("../layers/RasterXLayer"));break;case "ArcGISImageServiceVectorLayer":-1===q.indexOf(Ga,"../layers/ArcGISImageServiceVectorLayer")&&(Ga.push("../layers/ArcGISImageServiceVectorLayer"),
Na.push("../layers/ImageServiceParameters"),Na.push("../layers/MosaicRule"),Na.push("../layers/RasterFunction"));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===q.indexOf(Ga,"../layers/ArcGISDynamicMapServiceLayer")&&(Ga.push("../layers/ArcGISDynamicMapServiceLayer"),Na.push("../layers/DynamicLayerInfo"),Na.push("../layers/ImageParameters"),Na.push("../layers/LayerDrawingOptions"));break;case "ArcGISStreamLayer":-1===q.indexOf(Ga,"../layers/StreamLayer")&&Ga.push("../layers/StreamLayer");
-1===q.indexOf(Ga,"../layers/LabelClass")&&Ga.push("../layers/LabelClass");break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===q.indexOf(Ga,"../virtualearth/VETiledLayer")&&Ga.push("../virtualearth/VETiledLayer");break;case "CSV":-1===q.indexOf(Ga,"../layers/CSVLayer")&&(Ga.push("../layers/CSVLayer"),Na.push("./csv"));break;case "GeoRSS":-1===q.indexOf(Ga,"../layers/GeoRSSLayer")&&Ga.push("../layers/GeoRSSLayer");break;case "KML":-1===q.indexOf(Ga,"../layers/KMLLayer")&&Ga.push("../layers/KMLLayer");
break;case "OpenStreetMap":-1===q.indexOf(Ga,"../layers/OpenStreetMapLayer")&&Ga.push("../layers/OpenStreetMapLayer");break;case "VectorTileLayer":-1===q.indexOf(Ga,"../layers/VectorTileLayer")&&Ga.push("../layers/VectorTileLayer");break;case "WebTiledLayer":-1===q.indexOf(Ga,"../layers/WebTiledLayer")&&(Ga.push("../layers/WebTiledLayer"),Na.push("../layers/TileInfo"));break;case "WFS":-1===q.indexOf(Ga,"../layers/WFSLayer")&&Ga.push("../layers/WFSLayer");break;case "WMS":-1===q.indexOf(Ga,"../layers/WMSLayer")&&
(Ga.push("../layers/WMSLayer"),Na.push("../layers/WMSLayerInfo"));break;default:Ja=!0}if(Ja)break}Ja&&(Ga=Ib,Na=Pb);Ga.length?b(Ga,function(){Ia(Ga,arguments);Na.length?b(Na,function(){Ia(Na,arguments);Ca.resolve()}):Ca.resolve()}):Ca.resolve();return Ca}function ub(ea){ea=ea.itemData;var Ja=function(Ca,Ga){"GroupLayer"===Ca.layerType?q.forEach(Ca.layers,function(Na){Na.visibility=!1===Ca.visibility?!1:Na.visibility;Na.opacity=u.isDefined(Ca.opacity)?u.isDefined(Na.opacity)?Na.opacity*Ca.opacity:
Ca.opacity:Na.opacity;Ja(Na,Ga)}):Ga.push(Ca)},Ia=[];q.forEach(ea.operationalLayers,function(Ca){Ja(Ca,Ia)});ea.operationalLayers=Ia}function ob(ea,Ja,Ia,Ca){ub(Ca);var Ga=Ca.itemData;Ga.baseMap&&Ga.baseMap.baseMapLayers&&Ga.baseMap.baseMapLayers.length&&(Ga.baseMap.baseMapLayers[0].firstLayer=!0);var Na=Ja.layerMixins,Ma=Na&&Na.length;if(Ma){var Ka=function(Ra){for(var Wa=0;Wa<Ma;Wa++){var Ya=Na[Wa];if(Ya.mixin)if(Ya.hasOwnProperty("id")){if(Ra.id===Ya.id){y.mixin(Ra,Ya.mixin);break}}else if(Ra.url===
Ya.url){y.mixin(Ra,Ya.mixin);break}}};q.forEach(Ga.baseMap&&Ga.baseMap.baseMapLayers,Ka);q.forEach(Ga.operationalLayers,Ka)}kb(Ca,Ja).then(function(){return ia(Ca,Ja)}).then(function(){return Y(Ca,Ja)}).then(function(Ra){var Wa=Ra[0],Ya=Ra[1];if(Wa.itemData.operationalLayers&&0!==Wa.itemData.operationalLayers.length){var cb=new h,Ta=Wa.itemData.baseMap.baseMapLayers.slice(),db=q.filter(Wa.itemData.baseMap.baseMapLayers,function($a){return!$a.isReference});Ra={item:Wa.item,itemData:{baseMap:{baseMapLayers:db},
background:y.clone(Wa.itemData.background)}};Wa.itemData.baseMap.baseMapLayers=q.filter(Wa.itemData.baseMap.baseMapLayers,function($a){return $a.isReference});N(Ra,Ya).addCallback(function($a){U($a.itemData,Ya).addCallback(y.hitch(null,bb,$a,ea,Ya,cb))});cb.then(function($a){N(Wa,Ya).addCallback(function(ib){U(ib.itemData,Ya,$a.map.spatialReference,db,$a.map).addCallback(function(Cb){ib.itemData.baseMap.baseMapLayers=Ta;bb(ib,$a,Ya,Ia,Cb)})})},y.hitch(Ia,Ia.errback))}else N(Wa,Ya).addCallback(function($a){U($a.itemData,
Ya).addCallback(y.hitch(null,bb,$a,ea,Ya,Ia))})})}function eb(ea,Ja){"undefined"===typeof Ja&&(Ja=!0);Ab._arcgisUrl&&0<Ab._arcgisUrl.length&&(Ab.arcgisUrl=Ab._arcgisUrl);var Ia={},Ca=new h;x({url:Ab.arcgisUrl+"/"+ea,content:{f:"json"},callbackParamName:"callback",load:function(Ga){Ia.item=Ga;Ja?x({url:Ab.arcgisUrl+"/"+ea+"/data",content:{f:"json"},callbackParamName:"callback",load:function(Na){Ia.itemData=Na;Ca.callback(Ia)},error:function(Na){Ca.errback(Na)}}):Ca.callback(Ia)},error:function(Ga){Ca.errback(Ga)}});
return Ca}var nb,rb,Lb,Bb,zb,$b,vb,Hb,Mb,Fb,Wb,ac,bc,cc,Xb,jc,qc,Yb,Eb,kc,dc,lc,mc,Ib="../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "),Pb="./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/WMSLayerInfo".split(" ");
var Ab={arcgisUrl:E.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:eb,createMap:function(ea,Ja,Ia){var Ca=new h;Ia=Ia||{};var Ga=Ia.infoTemplateClass;Ia._clazz=Ga&&(y.isObject(Ga)?Ga:y.getObject(Ga))||F;y.isString(ea)?eb(ea).addCallback(y.hitch(null,ob,Ja,Ia,Ca)).addErrback(y.hitch(Ca,Ca.errback)):ob(Ja,Ia,Ca,ea);Ca.addCallback(function(Na){var Ma=Na.map;Ma&&(Ma.tables=y.getObject("itemInfo.itemData.tables",!1,Na)||[])});return Ca},getLayerList:function(ea){return ea&&
ea.itemInfo&&ea.itemInfo.itemData?gb(ea.itemInfo.itemData):[]},getLegendLayers:function(ea){return ea&&ea.itemInfo&&ea.itemInfo.itemData?fb(ea.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:N,_getItemData:ba,_getBingKey:O,_portalUrlResponse:oa,_portalUrlFailure:sa,_processFSItemProperties:V,_processSSItemProperties:X,_getLayers:U,_preBuildLayerObjects:Sa,_buildLayerObjects:Fa,_preCreateMap:bb,_getMapSR:ca,_createMap:Ua,_addSelectionLayers:za,_createSelectionFeatureLayers:qa,_getServiceInfo:va,
_getFeatureCollectionItem:T,_mergeFeatureCollectionItem:ja,_projectFeatureCollection:ka,_getLayersInfo:ua,_initLayer:xa,_loadAsCached:wa,_loadAsDynamic:Aa,_processPopups:Da,_onLayersAddResult:Ea,_sameSpatialReferenceAsBasemap:fa,_sameTilingSchemeAsBasemap:Q,_showPopup:Oa,_calculateClickTolerance:Pa,_getVisibleFeatureLayers:la,_updateLayerScaleInfo:na,_checkUrl:ya,_isHostedService:pa,_isAgolService:ra,_getLegendLayers:fb};y.setObject("arcgis.utils",Ab,k);return Ab})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v){var B={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},C={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},F=a.connect,G=a.disconnect,H=k.create,J=n.set,I=h.hitch,K=t.getMarginBox,R=y.deprecated,W=h.mixin,P=0;y=q(D,{declaredClass:"esri.Map",constructor:function(S,L){L=L||{};W(this,{_slider:null,_navDiv:null,_mapParams:W({attributionWidth:.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",
sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},L)});W(this,{isMapNavigation:null!=L.isMapNavigation?L.isMapNavigation:!0,isDoubleClickZoom:null!=L.isDoubleClickZoom?L.isDoubleClickZoom:!0,isClickRecenter:null!=L.isClickRecenter?L.isClickRecenter:!0,isPan:null!=L.isPan?L.isPan:!0,isRubberBandZoom:null!=L.isRubberBandZoom?L.isRubberBandZoom:!0,isPinchZoom:null!=L.isPinchZoom?L.isPinchZoom:!0,isKeyboardNavigation:null!=L.isKeyboardNavigation?L.isKeyboardNavigation:!0,isScrollWheel:null!=
L.isScrollWheel?L.isScrollWheel:!0,isShiftDoubleClickZoom:!1,isScrollWheelZoom:!1,isPanArrows:!1,isZoomSlider:!1});h.isFunction(A._css)&&(A._css=A._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);S=E("esri-transforms")&&E("esri-transitions");this.navigationMode=this._mapParams.navigationMode||S&&"css-transforms"||"classic";"css-transforms"!==this.navigationMode||S||(this.navigationMode="classic");this.fadeOnZoom=w.isDefined(this._mapParams.fadeOnZoom)?
this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=L&&L.smartNavigation;if(!(w.isDefined(this.smartNavigation)||!E("mac")||E("esri-touch")||E("esri-pointer")||3.5>=E("ff"))){var aa=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|_)([\d]+)\D/i);aa&&w.isDefined(aa[1])&&w.isDefined(aa[3])&&(S=parseInt(aa[1],10),aa=parseInt(aa[3],10),this.smartNavigation=10<S||10===S&&6<=
aa)}this.showAttribution=w.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=F(this,"onLoad",this,"_onLoadInitNavsHandler");var ba=H("div",{class:"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(S=h.getObject("esri.dijit.Attribution",!1))this._initAttribution(S,ba);else{var O=P++,V=this;this._rids&&this._rids.push(O);b(["./dijit/Attribution"],function(X){var N=V._rids?e.indexOf(V._rids,O):-1;-1!==
N&&(V._rids.splice(N,1),V._initAttribution(X,ba))})}this._mapParams.logo&&(S={},6===E("ie")&&(S.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+b.toUrl("./images/map/logo-med.png")+"')"),this._ogol=H("div",{style:S,tabIndex:"0",title:"Esri"},ba),this._setLogoSize(),this._onMapResizeLogo_connect=F(this,"onResize",this,"_setLogoSize"),this._ogol_connect=F(this._ogol,u,this,"_openLogoLink"));this.navigationManager=new r(this);L&&L.basemap&&
(this._onLoadFix=!0,this.setBasemap(L.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)L=this._getEnclosingResizableWidget(this.container)||window,S=this.resize,this._rszSignal=f.pausable(L,"resize",S),this._oriSignal=f.pausable(window,"orientationchange",S),m.after(L,"resize",S,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(S){var L=
x.getEnclosingWidget(S);return L?L.resize?L:this._getEnclosingResizableWidget(S.parentNode):L},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(c.remove(this._ogol,"logo-med"),c.add(this._ogol,"logo-sm")):(c.remove(this._ogol,"logo-sm"),c.add(this._ogol,"logo-med")))},_initAttribution:function(S,L){L=H("span",{class:"esriAttribution"},L,"first");J(L,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(F(L,u,function(){c.contains(this,
"esriAttributionOpen")?c.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&c.add(this,"esriAttributionOpen")}));this.attribution=new S({map:this},L)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var S=this._slider;S&&S.destroy&&!S._destroyed&&S.destroy();S=this._navDiv;var L=this.attribution;S&&k.destroy(S);L&&L.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);e.forEach(this._connects,G);
clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(S){var L=this.getLevel();return!this.__tileInfo||!(L===this.getMinZoom()&&0>S||L===this.getMaxZoom()&&0<S)},_onLoadInitNavsHandler:function(){this._evalMapNavigation();this._createNav();
if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var S=-1!==this._getSliderClass(!0).indexOf("Horizontal");S=[S?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",S?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",S?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(e.some(S,function(ba){return!h.getObject(ba,!1)})){S=e.map(S,function(ba){return ba.replace(/\./g,"/")});var L=P++,aa=this;this._rids&&
this._rids.push(L);b(S,function(){var ba=aa._rids?e.indexOf(aa._rids,L):-1;-1!==ba&&(aa._rids.splice(ba,1),aa._createSlider.apply(aa,arguments))})}else S=e.map(S,function(ba){return h.getObject(ba,!1)}),this._createSlider.apply(this,S)}G(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var S,L=c.add,aa=this.id;this._navDiv=H("div",{id:aa+"_navdiv"},this.root);L(this._navDiv,"navDiv");var ba=this.width/2,O=this.height/2;for(S in B){var V=B[S];var X=H("div",{id:aa+"_pan_"+
S},this._navDiv);L(X,"fixedPan "+V);if("up"===S||"down"===S){var N=parseInt(K(X).w,10)/2;J(X,{left:ba-N+"px",zIndex:30})}else N=parseInt(K(X).h,10)/2,J(X,{top:O-N+"px",zIndex:30});this._connects.push(F(X,"onclick",I(this,this[V])))}this._onMapResizeNavHandler_connect=F(this,"onResize",this,"_onMapResizeNavHandler");for(S in C)V=C[S],X=H("div",{id:aa+"_pan_"+S,style:{zIndex:30}},this._navDiv),L(X,"fixedPan "+V),this._connects.push(F(X,"onclick",I(this,this[V])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(S,
L,aa){S=this.id;L/=2;aa/=2;var ba=l.byId,O;for(O in B){var V=ba(S+"_pan_"+O);if("up"===O||"down"===O){var X=parseInt(K(V).w,10)/2;J(V,"left",L-X+"px")}else X=parseInt(K(V).h,10)/2,J(V,"top",aa-X+"px")}},_createSimpleSlider:function(){if(this._mapParams.slider){var S=this._slider=H("div",{id:this.id+"_zoom_slider",class:this._getSliderClass(),style:{zIndex:30}}),L=H("div",{class:"esriSimpleSliderIncrementButton",tabIndex:"0",role:"button"},S),aa=H("div",{class:"esriSimpleSliderDecrementButton",tabIndex:"0",
role:"button"},S);this._addZoomButtonTooltips(L,aa);this._incButton=L;this._decButton=aa;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var ba=v.widgets.zoomSlider;this._addZoomButtonIcon(L,"+",ba.zoomIn);this._addZoomButtonIcon(aa,"\x26minus;",ba.zoomOut);8>E("ie")&&c.add(aa,"dj_ie67Fix");this._connects.push(F(L,u,this,this._simpleSliderChangeHandler));this._connects.push(F(aa,u,this,this._simpleSliderChangeHandler));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(F(this,
"onZoomEnd",this,this._simpleSliderZoomHandler));10>E("ie")&&l.setSelectable(S,!1);this.root.appendChild(S);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(S){g.stop(S);S=-1!==S.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:S?1:-1})},_simpleSliderZoomHandler:function(S,L,aa,ba){var O;S=this._incButton;L=this._decButton;-1<ba&&ba===this.getMaxZoom()?O=S:-1<ba&&ba===this.getMinZoom()&&(O=L);O?(c.add(O,"esriSimpleSliderDisabledButton"),c.remove(O===S?
L:S,"esriSimpleSliderDisabledButton")):(c.remove(S,"esriSimpleSliderDisabledButton"),c.remove(L,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(S){S=S?"Large":"Simple";var L=this._mapParams.sliderOrientation,aa=this._mapParams.sliderPosition||"";L=L&&"horizontal"===L.toLowerCase()?"esri"+S+"SliderHorizontal":"esri"+S+"SliderVertical";if(aa)switch(aa.toLowerCase()){case "top-left":aa="esri"+S+"SliderTL";break;case "top-right":aa="esri"+S+"SliderTR";break;case "bottom-left":aa="esri"+S+
"SliderBL";break;case "bottom-right":aa="esri"+S+"SliderBR"}return"esri"+S+"Slider "+L+" "+aa},_addZoomButtonIcon:function(S,L,aa){k.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:L},S);k.create("span",{class:"esriIconFallbackText",innerHTML:aa},S)},_addZoomButtonTooltips:function(S,L){var aa=v.widgets.zoomSlider;d.set(S,"title",aa.zoomIn);d.set(L,"title",aa.zoomOut)},_createSlider:function(S,L,aa){if(this._mapParams.slider){var ba=H("div",{id:this.id+"_zoom_slider"},this.root),
O=z.defaults.map,V=this._getSliderClass(!0),X=-1!==V.indexOf("Horizontal"),N=this.getNumLevels();if(0<N){var Y,ia,oa=this._mapParams.sliderLabels,sa=!!oa,Ba=!1!==oa;if(Ba){var Da=X?"bottomDecoration":"rightDecoration";if(!oa)for(oa=[],O=0;O<N;O++)oa[O]="";e.forEach([{class:"esriLargeSliderTicks",container:Da,count:N,dijitClass:L},{class:sa&&"esriLargeSliderLabels",container:Da,count:N,labels:oa,dijitClass:aa}],function(ra){var ya=H("div"),wa=ra.dijitClass;delete ra.dijitClass;ba.appendChild(ya);wa===
L?Y=new wa(ra,ya):ia=new wa(ra,ya)})}S=this._slider=new S({id:ba.id,class:V,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:N,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},ba);S.startup();Ba&&(Y.startup(),ia.startup());this._slider_connect=F(S,"onChange",this,"_onSliderChangeHandler");this._connects.push(F(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(F(S._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{S=
this._slider=new S({id:ba.id,class:V,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:O.sliderChangeImmediate,style:"height:50px; z-index:30;"},ba);aa=S.domNode.firstChild.childNodes;for(O=1;3>=O;O++)J(aa[O],"visibility","hidden");S.startup();this._slider_connect=F(S,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(F(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}O=S.incrementButton;aa=S.decrementButton;X?this._addZoomButtonTooltips(O,
aa):this._addZoomButtonTooltips(aa,O);O.style.outline="none";aa.style.outline="none";S.sliderHandle.style.outline="none";S._onKeyPress=function(){};if(X=S._movable){var pa=X.onMouseDown;X.onMouseDown=function(ra){9>E("ie")&&1!==ra.button||pa.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect);this._slider_connect=F(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=F(this._slider._movable,
"onMoveStop",this,"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(S){this._extentUtil({targetLevel:S})},_onSliderMoveEndHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect)},_onSliderChangeHandler:function(S){this.setLevel(S)},_updateSliderValue:function(S,L){G(this._slider_connect);var aa=this._slider,ba=aa._onChangeActive;aa._onChangeActive=!1;aa.set("value",S);aa._onChangeActive=ba;this._slider_connect=F(aa,"onChange",this,L)},_onExtentChangeSliderHandler:function(S,
L,aa,ba){G(this._slidermovestop_connect);this._updateSliderValue(ba.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(S){this._extentUtil({numLevels:0<S?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(S){window.open(z.defaults.map.logoLink,"_blank");g.stop(S)},enableMapNavigation:function(){this.isMapNavigation||(this.isMapNavigation=!0,this._evalMapNavigation())},disableMapNavigation:function(){this.isMapNavigation&&
(this.isMapNavigation=!1,this._evalMapNavigation())},_evalMapNavigation:function(){this.isMapNavigation?this.navigationManager.enableNavigation():this.navigationManager.disableNavigation()},_evalNavigationFeature:function(S){if(this.isMapNavigation&&this["is"+S])this.navigationManager["enable"+S]();else this.navigationManager["disable"+S]()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.isDoubleClickZoom=!0,this._evalNavigationFeature("DoubleClickZoom"))},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&
(this.isDoubleClickZoom=!1,this._evalNavigationFeature("DoubleClickZoom"))},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(R(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(R(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",
null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.isClickRecenter=!0,this._evalNavigationFeature("ClickRecenter"))},disableClickRecenter:function(){this.isClickRecenter&&(this.isClickRecenter=!1,this._evalNavigationFeature("ClickRecenter"))},enablePan:function(){this.isPan||(this.isPan=!0,this._evalNavigationFeature("Pan"))},disablePan:function(){this.isPan&&(this.isPan=!1,this._evalNavigationFeature("Pan"))},
enableRubberBandZoom:function(){this.isRubberBandZoom||(this.isRubberBandZoom=!0,this._evalNavigationFeature("RubberBandZoom"))},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.isRubberBandZoom=!1,this._evalNavigationFeature("RubberBandZoom"))},enablePinchZoom:function(){this.isPinchZoom||(this.isPinchZoom=!0,this._evalNavigationFeature("PinchZoom"))},disablePinchZoom:function(){this.isPinchZoom&&(this.isPinchZoom=!1,this._evalNavigationFeature("PinchZoom"))},enableKeyboardNavigation:function(){this.isKeyboardNavigation||
(this.isKeyboardNavigation=!0,this._evalNavigationFeature("KeyboardNavigation"))},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.isKeyboardNavigation=!1,this._evalNavigationFeature("KeyboardNavigation"))},enableScrollWheel:function(){this.isScrollWheel||(this.isScrollWheel=!0,this._evalNavigationFeature("ScrollWheel"))},disableScrollWheel:function(){this.isScrollWheel&&(this.isScrollWheel=!1,this._evalNavigationFeature("ScrollWheel"))},enableScrollWheelZoom:function(){this.isScrollWheelZoom||
(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},enableScrollWheelPan:function(){this.isScrollWheelPan||this.navigationManager.enableScrollWheelPan()},disableScrollWheelPan:function(){this.isScrollWheelPan&&this.navigationManager.disableScrollWheelPan()},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=
!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(J(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(J(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)},onClick:function(S){S.graphic||(S.graphic=this.syncHitTestForWebGL(S))}});return A.Map=y})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B,C,F,G,H,J,I,K,R,W,P,S,L,aa,ba,O,V,X,N,Y,ia,oa,sa,Ba){function Da(U,ha){var na=U.lods;na.sort(function(Ea,Pa){return Ea.scale>Pa.scale?-1:Ea.scale<Pa.scale?1:0});var qa=[];na=f.filter(na,function(Ea){if(-1===fa(qa,Ea.scale))return qa.push(Ea.scale),!0});var ua=ha.lods=[],za;f.forEach(na,function(Ea,Pa){za=ua[Pa]=new N(Ea);za.level=Pa});ha.tileInfo=new X(Q(U,{lods:ua}))}var pa,ra=ba.toMapPoint,ya=ba.toScreenPoint,wa=h.connect,la=h.disconnect,
Aa=g.hitch,da=u.set,fa=f.indexOf,Q=g.mixin,xa=0,Fa=w.defaults.map,ca=Fa.layerNamePrefix,Sa=Fa.graphicsLayerNamePrefix,Qa=new RegExp("^"+ca+"(\\d+)$"),va=new RegExp("^"+Sa+"(\\d+)$"),T=function(){},ja=0,ka=sa.isWebGLEnabled();a=a([v,H],{declaredClass:"esri._CoreMap",tables:null,resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,webglEnabled:ka,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],
load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,
"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(U,ha){ha=ha||{};this.registerConnectEvents();Q(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_basemapPending:!1,_connects:[],_layerAddPromises:{},
_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,_minResolution:0,_maxResolution:0,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[],_webglContextOwners:[]});var na=this.container=d.byId(U),qa=this.id=c.get(na,"id")||A.getUniqueId(this.declaredClass);k.add(na,"map");
var ua=n.getContentBox(na);U=k.add;var za=t.create;this.position=new W(0,0);this._reposition();var Ea=this.width=0<ua.w?ua.w:Fa.width,Pa=this.height=0<ua.h?ua.h:Fa.height,Oa=this.root=za("div",{id:qa+"_root",style:{width:Ea+"px",height:Pa+"px",direction:"ltr"}});U(Oa,"esriMapContainer");ua=this.__container=za("div",{id:qa+"_container"},Oa);da(ua,"position","absolute");U(ua,"esriMapContainer");na.appendChild(Oa);ha=this._params=Q({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,
maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},ha);this.setWebGLEnabled(null!=ha.webglEnabled?ha.webglEnabled:this.webglEnabled);this.maxWebGLContexts=null!=ha.maxWebGLContexts?ha.maxWebGLContexts:-1;this.wrapAround180=ha.wrapAround180;this.optimizePanAnimation=ha.optimizePanAnimation;this.setBackgroundColor(ha.backgroundColor);r.isDefined(ha.resizeDelay)&&(this.resizeDelay=ha.resizeDelay);ha.lods&&(Da({rows:512,cols:512,dpi:96,format:"JPEG",
compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:ha.lods},ha),this.__tileInfo=ha.tileInfo);this.extent=ha.extent;this._extentUtil({mapCenter:ha.center,targetLevel:ha.zoom,targetScale:ha.scale});this.__visibleRect=new S(0,0,Ea,Pa);this.__visibleDelta=new S(0,0,Ea,Pa);qa=this._layersDiv=za("div",{id:qa+"_layers"});U(qa,"esriMapLayers");ua.appendChild(qa);this._zoomAnimDiv=za("div",{style:{position:"absolute"}});ha.infoWindow?this.infoWindow=ha.infoWindow:(U=this.infoWindow=
new Ba(ha.popupOptions,za("div")),U.startup(),U._ootb=!0,da(U.domNode,"zIndex",40));if(ha.showLabels){var Ha=this;b(["./layers/LabelLayer"],function(Ua){pa=Ua;Ha._createLabelLayer()});this.on("load",function(){Ha._createLabelLayer()})}this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:ha.showInfoWindowOnClick});this._zoomStartHandler=Aa(this,this._zoomStartHandler);this._zoomingHandler=Aa(this,this._zoomingHandler);this._zoomEndHandler=Aa(this,this._zoomEndHandler);this._panningHandler=
Aa(this,this._panningHandler);this._panEndHandler=Aa(this,this._panEndHandler);this._endTranslate=Aa(this,this._endTranslate);this._timedResize=Aa(this,this._timedResize);this._execResize=Aa(this,this._execResize);this._processLabelLayers=Aa(this,this._processLabelLayers);this._updateLabelLayers=Aa(this,this._updateLabelLayers);this.resize=Aa(this,this.resize);l.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(U){return b.toAbsMid?b.toAbsMid(U):y.id.replace(/\/[^\/]*$/ig,"/")+U},_cleanUp:function(){var U=
this.infoWindow;U&&(U._ootb&&U.destroy?U.destroy():U.unsetMap(this),delete this.infoWindow);la(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");t.destroy(this.root);this.root=null},_addLayer:function(U,ha,na){if(U.id){var qa=U.id.match(U instanceof V?va:Qa);qa&&qa[1]&&(qa=Number(qa[1]),xa<=qa&&(xa=qa+1))}var ua=U.id||(U instanceof V?Sa:ca)+xa++;U.id=ua;this._layers[ua]=U;U._isRefLayer="top"===na;na=!r.isDefined(na)||0>na||na>ha.length||"top"===na?ha.length:na;var za;if(!U._isRefLayer)for(;(za=
this.getLayer(ha[na-1]))&&za._isRefLayer;)na--;if(qa=!this._firstLayerId&&!this.loaded&&!this._basemapPending&&0===na&&(ha===this.layerIds||ha===this.graphicsLayerIds))this._firstLayerId=ua;ha.splice(na,0,ua);var Ea=Aa(this,this._addLayerHandler),Pa=this;na=this._connects;za=function(){U.loaded?Pa._onLoadFix?(Pa._onLoadFix=!1,setTimeout(function(){Ea(U)},0)):Ea(U):(Pa["_"+ua+"_addtoken_load"]=wa(U,"onLoad",Pa,"_addLayerHandler"),Pa["_"+ua+"_addtoken_err"]=wa(U,"onError",Pa,function(Oa){Ea(U,Oa,ha)}))};
this.loaded||qa||U.loaded&&-1===fa(this.graphicsLayerIds,ua)?za():na.push(wa(this,"onLoad",za));return U},_forgetLayer:function(U){U=U.id;la(this["_"+U+"_addtoken_load"]);la(this["_"+U+"_addtoken_err"]);var ha=this._layerAddPromises[U];ha&&(delete this._layerAddPromises[U],ha.cancel())},_addLayerHandler:function(U,ha,na){ha?this._attachLayerToMap(U,ha,na):U._prepareToAttach?(this._layerAddPromises[U.id]=U._prepareToAttach(this)).always(g.hitch(this,function(qa){qa&&"cancel"===qa.dojoType||this._attachLayerToMap(U,
null,na)})):U.declaredClass&&-1<U.declaredClass.toLowerCase().indexOf("vectortilelayer")&&!this.isWebGLContextAvailable()?(ha=Error("Too many WebGL contexts. Unable to add the layer: ",U.url),this._attachLayerToMap(U,ha,this.layerIds)):this._attachLayerToMap(U,ha,na)},_attachLayerToMap:function(U,ha,na){var qa=this.id,ua=U.id,za=fa(U instanceof V?this.graphicsLayerIds:this.layerIds,ua),Ea=za,Pa=!1,Oa=this._params;this._forgetLayer(U);if(ha)delete this._layers[ua],-1!==za&&(na.splice(za,1),this.onLayerAddResult(U,
ha));else{-1===za&&(za=fa(this._internalLayerIds,ua),Ea=20+za,Pa=!0);if(ua===this._firstLayerId){ha=U.spatialReference;na=this.extent&&this.extent.spatialReference;!na||na.equals(ha)||!U.tileInfo&&U.url||(na=null);na=this.spatialReference=na||ha;this.wrapAround180=this.wrapAround180&&na&&na._isWrappable()?!0:!1;U.tileInfo&&(this.__tileInfo?(ha=this.__tileInfo.lods,this.__tileInfo=Q({},U.tileInfo),this.__tileInfo.lods=ha):(Da(Q({},U.tileInfo),Oa),this.__tileInfo=Oa.tileInfo));if(this.wrapAround180){ha=
this.__tileInfo;na=na._getInfo();if(!ha||Math.abs(na.origin[0]-ha.origin.x)>na.dx)this.wrapAround180=!1;this.wrapAround180&&ha&&F._addFrameInfo(ha,na)}Oa.units=U.units;if((ha=this.__tileInfo&&this.__tileInfo.lods)&&ha.length){na=Oa.minScale;za=Oa.maxScale;var Ha=-1,Ua=-1,bb=!1,ab=!1,gb;for(gb=0;gb<ha.length;gb++)0<na&&!bb&&na>=ha[gb].scale&&(Ha=ha[gb].level,bb=!0),0<za&&!ab&&za>=ha[gb].scale&&(Ua=0<gb?ha[gb-1].level:-1,ab=!0);-1===Oa.minZoom&&(Oa.minZoom=0===na?ha[0].level:Ha);-1===Oa.maxZoom&&(Oa.maxZoom=
0===za?ha[ha.length-1].level:Ua);for(gb=0;gb<ha.length;gb++)Oa.minZoom===ha[gb].level&&(Oa.minScale=ha[gb].scale,this._minResolution=ha[gb].resolution),Oa.maxZoom===ha[gb].level&&(Oa.maxScale=ha[gb].scale,this._maxResolution=ha[gb].resolution)}else Oa.minZoom=Oa.maxZoom=Oa.zoom=-1}U instanceof V?(this._gc||(this._gc=new V._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=qa+"_gc"),this._attachGraphicsLayer(U).id=qa+"_"+ua):(Ea=U._setMap(this,this._layersDiv,Ea,this.__LOD),Ea.id=qa+"_"+
ua,this._layerDivs[ua]=Ea,this._reorderLayers(this.layerIds),Pa||-1===U.declaredClass.indexOf("VETiledLayer")||this._onBingLayerAdd(U));ua===this._firstLayerId&&(this.graphics=new V({id:qa+"_graphics",displayOnPan:Oa.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(U===this.graphics){na=this._layers[this._firstLayerId];qa=Oa.zoom;Ea=Oa.scale;ha=Oa.center;na=na.initialExtent||na.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=this._convertGeometry(this,
this.extent));!this.extent&&na&&(ha&&(ha=this._convertGeometry(na,ha)),ha&&(na=na.centerAt(ha),ha=null));if(ha=this.extent||na&&new P(na.toJson()))-1<qa?ha=this.__getExtentForLevel(qa,null,ha).extent:0<Ea&&(ha=aa.getExtentForScale(this,Ea,ha));if(!ha)return;Oa=this._fixExtent(ha,Oa.fitExtent);this.extent=Oa.extent;this.__LOD=Oa.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}Pa||(this.onLayerAdd(U),this.onLayerAddResult(U));
la(this[ua+"_addLayerHandler_connect"])}},_convertGeometry:function(U,ha){U=U&&U.spatialReference;var na=ha&&ha.spatialReference;U&&na&&!U.equals(na)&&(U._canProject(na)?U.isWebMercator()?ha=O.geographicToWebMercator(ha):4326===U.wkid&&(ha=O.webMercatorToGeographic(ha,!0)):ha=null);return ha},_attachGraphicsLayer:function(U){var ha=U.id;U=U._setMap(this,this._gc._surface);this._layerDivs[ha]=U;this._reorderLayers(this.graphicsLayerIds);return U},_detachGraphicsLayer:function(U){U.loaded&&U.getMap()&&
U._unsetMap(this,this._gc._surface)},_reorderLayers:function(U){var ha=this.onLayerReorder,na=t.place,qa=this._layerDivs,ua=this._layers,za=this._gc?this._gc._surface.getEventSource():null;if(U===this.graphicsLayerIds)f.forEach(U,function(Ua,bb){var ab=qa[Ua];Ua=ua[Ua];ab&&(this._gc._reorderLayer(Ua,ab,bb),ha(Ua,bb))},this);else{var Ea=this.graphics,Pa=Ea?Ea.id:null,Oa=this._layersDiv,Ha;f.forEach(U,function(Ua,bb){Ha=qa[Ua];Ua!==Pa&&Ha&&(na(Ha,Oa,bb),ha(ua[Ua],bb))});this._mapImageLyr&&this._placeMapImageLyr();
za&&(za=9>x("ie")?za.parentNode:za,na(za,za.parentNode,"last"))}this.onLayersReordered([].concat(U))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(U){var ha=parseFloat(U.left),na=parseFloat(U.top);U=new P(ha,na-parseFloat(U.height),ha+parseFloat(U.width),na,this.spatialReference);ha=this.extent.getWidth()/U.getWidth();this.__zoom(U,ha,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var U=this._zoomAnimDiv,
ha=U.extent,na=this.extent.getWidth()/ha.getWidth(),qa=U.anchor,ua=U.newLod,za=U.levelChange;U.extent=U.anchor=U.levelChange=U.startingExtent=U.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(ha,na,qa,ua,za)},_panningHandler:function(U){if(isNaN(parseFloat(U.left))||isNaN(parseFloat(U.top))){var ha=Math.round,na=this._panAnim.node;U.left=-1*(this._delta.x-ha(this.width/2))+"px";U.top=-1*(this._delta.y-ha(this.height/2))+"px";u.set(na,"left",U.left);u.set(na,"top",U.top)}U=new W(parseFloat(U.left),
parseFloat(U.top));ha=this.toMap(U);this.onPan(this.extent.offset(this.extent.xmin-ha.x,this.extent.ymax-ha.y),U)},_panEndHandler:function(U){this.__panning=!1;var ha=Math.round;U=new W(-ha(parseFloat(U.style.left)),-ha(parseFloat(U.style.top)));ha=U.x;var na=U.y,qa=this.__visibleRect,ua=this.__visibleDelta;qa.x+=-ha;qa.y+=-na;ua.x+=-ha;ua.y+=-na;da(this._zoomAnimDiv,{left:"0px",top:"0px"});qa=this.extent;ua=this._ratioW;var za=this._ratioH;qa=new P(qa.xmin+ha/ua,qa.ymin-na/za,qa.xmax+ha/ua,qa.ymax-
na/za,this.spatialReference);U.setX(-U.x);U.setY(-U.y);this._delta=this._panAnim=null;this._updateExtent(qa);this.onPanEnd(qa,U);this._fireExtChg([qa,U,!1,this.__LOD])},_fixExtent:function(U,ha){for(var na=this._reshapeExtent(U),qa=1.25;!0===ha&&(na.extent.getWidth()<U.getWidth()||na.extent.getHeight()<U.getHeight())&&0<na.lod.level&&3>=qa;)na=this._reshapeExtent(U.expand(qa)),qa+=.25;return na},_getFrameWidth:function(){var U=-1,ha=this.spatialReference._getInfo();this.__LOD?(ha=this.__LOD._frameInfo)&&
(U=ha[3]):ha&&(U=Math.round(2*ha.valid[1]/(this.extent.getWidth()/this.width)));return U},_fixAspectRatio:function(U){var ha=U.getWidth(),na=U.getHeight(),qa=ha/na,ua=this.width/this.height,za=0,Ea=0;this.width>this.height?ha>na?ua>qa?za=na*ua-ha:Ea=ha/ua-na:za=na*ua-ha:this.width<this.height?ha<na?ua>qa?za=na*ua-ha:Ea=ha/ua-na:Ea=ha/ua-na:ha<na?za=na-ha:ha>na&&(Ea=ha/ua-na);za&&(U.xmin-=za/2,U.xmax+=za/2);Ea&&(U.ymin-=Ea/2,U.ymax+=Ea/2);return U},_reshapeExtent:function(U){U=this._fixAspectRatio(U);
return this._getAdjustedExtent(U)},_getAdjustedExtent:function(U){if(this.__tileInfo)return F.getCandidateTileInfo(this,this.__tileInfo,U);var ha=aa.getScale(this,U),na=this.getMinScale(),qa=this.getMaxScale();!na||ha<=na?!qa||ha>=qa||(U=aa.getExtentForScale(this,qa,U)):U=aa.getExtentForScale(this,na,U);return{extent:U}},_onBingLayerAdd:function(U){this["__"+U.id+"_vis_connect"]=h.connect(U,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(U.visible)},_onBingLayerRemove:function(U){h.disconnect(this["__"+
U.id+"_vis_connect"]);delete this["__"+U.id+"_vis_connect"];var ha=f.some(this.layerIds,function(na){return(U=this._layers[na])&&U.visible&&-1!==U.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(ha)},_toggleBingLogo:function(U){U&&!this._bingLogo?(U={left:this._mapParams&&this._mapParams.nav?"25px":""},6===x("ie")&&(U.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+b.toUrl("./images/map/bing-logo-lg.png")+"')"),U=this._bingLogo=
t.create("div",{style:U},this.root),k.add(U,"bingLogo-lg")):!U&&this._bingLogo&&(t.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(U,ha){var na=this._zoomAnim,qa=this._panAnim;if(na&&na._active)na.stop(),na._fire("onEnd",[na.node]);else if(qa&&qa._active){qa.stop();this._panAnim=null;ha=qa.curve.getValue(qa._getStep());U=Math.round(parseFloat(ha.left));ha=Math.round(parseFloat(ha.top));na=this.navigationManager._dragOrigin;this.__pan(U,ha);na&&(na.x-=U,na.y-=ha);return}this.__panning=
!0;this.onPanStart(this.extent,new W(U,ha))},__pan:function(U,ha){var na=this.extent,qa=this._ratioW,ua=this._ratioH;this.onPan(new P(na.xmin-U/qa,na.ymin+ha/ua,na.xmax-U/qa,na.ymax+ha/ua,this.spatialReference),new W(U,ha))},__panEnd:function(U,ha){var na=this.__visibleRect,qa=this.__visibleDelta;na.x+=U;na.y+=ha;qa.x+=U;qa.y+=ha;na=new W(U,ha);qa=this.extent;var ua=this._ratioW,za=this._ratioH;qa=new P(qa.xmin-U/ua,qa.ymin+ha/za,qa.xmax-U/ua,qa.ymax+ha/za,this.spatialReference);this.__panning=!1;
this._updateExtent(qa);this.onPanEnd(qa,na);this._fireExtChg([qa,na,!1,this.__LOD])},__zoomStart:function(U,ha){this.__zooming=!0;this.onZoomStart(U,1,ha,this.__LOD?this.__LOD.level:null)},__zoom:function(U,ha,na){this.onZoom(U,ha,na)},__zoomEnd:function(U,ha,na,qa,ua){da(this._layersDiv,{left:"0px",top:"0px"});this._delta=new W(0,0);this.__visibleRect.x=this.__visibleRect.y=0;U=new P(U);this.__LOD=qa;this._ratioW=this.width/U.getWidth();this._ratioH=this.height/U.getHeight();var za=this._delta;this._delta=
null;this.__zooming=!1;this._updateExtent(U,ua);this.onZoomEnd(U,ha,na,qa?qa.level:null);this._fireExtChg([U,za,ua,qa])},_extentUtil:function(U,ha,na,qa,ua){var za=new e,Ea=this.width,Pa=this.height;if(U){var Oa=U.numLevels;var Ha=U.targetLevel;var Ua=r.isDefined(Ha);var bb=U.factor;var ab=U.mapAnchor;var gb=U.screenAnchor;var fb=U.mapCenter;var kb=U.levelOrFactor;var ub=U.targetScale;var ob=r.isDefined(ub)&&0<ub}if(ha){var eb=ha.dx;var nb=ha.dy;fb=ha.mapCenter}g.isArray(fb)&&(fb=new R(fb));var rb=
this._panAnim;ha=(U=this._stopAnim())?U.divExtent:this.extent;var Lb=this.__tileInfo,Bb=this._params;if(!this.loaded){if(na)ha&&(na=this._convertGeometry(ha,na)),na&&(this.extent=na,Bb.zoom=Bb.scale=-1,Bb.center=null);else if(fb||Ua||ob){if(fb)if(ha){if(fb=this._convertGeometry(ha,fb))this.extent=ha.centerAt(fb),Bb.center=null}else Bb.center=fb;Ua&&-1<Ha?(Bb.zoom=Ha,Bb.scale=-1):ob&&(Bb.scale=ub,Bb.zoom=-1)}za.resolve();return za}if(fb&&(fb=this._convertGeometry(this,fb),!fb)||ab&&(ab=this._convertGeometry(this,
ab),!ab)||na&&(na=this._convertGeometry(this,na),!na))return za.reject(),za;rb&&ab&&gb&&(ab=ra(this.extent,Ea,Pa,gb));U&&ab&&gb&&(ab=ra(U.divExtent,Ea,Pa,gb));if(Ua)if(Lb)Oa=this.getMinZoom(),Ua=this.getMaxZoom(),Ha<Oa?Ha=Oa:Ha>Ua&&(Ha=Ua),Oa=Ha-(U?U.level:this.getLevel());else{Oa=0<Ha?-1:1;var zb=kb?Ha:null}if(!na)if(r.isDefined(Oa))Lb?(Ea=U?U.level:this.getLevel(),Ea=this.__getExtentForLevel(Ea+Oa,fb,ha).extent):(Ea=(U?U.end:this.extent).expand(zb||(0<Oa?.5*Oa:2*-Oa)),zb&&fb&&(Ea=Ea.centerAt(fb))),
Ea&&(fb?na=Ea:(eb=ab||ha.getCenter(),Pa=Ea.getWidth(),nb=Ea.getHeight(),Ea=eb.x>=ha.xmin&&eb.x<=ha.xmax?(eb.x-ha.xmin)/ha.getWidth():.5,na=eb.y>=ha.ymin&&eb.y<=ha.ymax?(eb.y-ha.ymin)/ha.getHeight():.5,Ea=eb.x-Ea*Pa,eb=eb.y-na*nb,na=new P(Ea,eb,Ea+Pa,eb+nb,this.spatialReference)));else if(ob)na=aa.getExtentForScale(this,ub,ha);else if(r.isDefined(bb))na=ha.expand(bb);else if(eb||nb)U?(na=U.end,ab=na.getCenter(),zb=ya(na,Ea,Pa,ab),zb.x+=eb,zb.y+=nb,zb=ra(na,Ea,Pa,zb),na=na.offset(zb.x-ab.x,zb.y-ab.y)):
(eb=new W(Ea/2+eb,Pa/2+nb),eb=ra(ha,Ea,Pa,eb),Pa=ha.getWidth(),nb=ha.getHeight(),Ea=eb.x-Pa/2,eb=eb.y-nb/2,na=new P(Ea,eb,Ea+Pa,eb+nb,this.spatialReference));na||(fb?(ha=U?U.end:ha,Pa=ha.getWidth(),nb=ha.getHeight(),Ea=fb.x-Pa/2,eb=fb.y-nb/2,na=new P(Ea,eb,Ea+Pa,eb+nb,this.spatialReference)):U&&(na=U.end));na?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,T),this._extentDfd.reject()),this._extentDfd=za,this.__setExtent(na,null,gb,qa,U,ua)):za.reject();return za},__setExtent:function(U,
ha,na,qa,ua,za){try{if(this._firstLayerId)this.extent=U;else{var Ea=!0,Pa=this.spatialReference,Oa=ua?ua.divExtent:this.extent,Ha=this._fixExtent(U,qa||!1);U=Ha.extent;var Ua=U.getWidth(),bb=U.getHeight(),ab=Math.round;if(Oa){var gb=ab(1E6*Oa.getWidth()),fb=ab(1E6*Ua),kb=ab(1E6*Oa.getHeight()),ub=ab(1E6*bb);Ea=gb!==fb||kb!==ub}var ob,eb=ua&&ua.rect,nb=ua&&ua.divExtent;if(Fa.zoomDuration&&Ea&&Oa){nb=nb||new P(Oa);eb=eb||{left:Oa.xmin,top:Oa.ymax,width:Oa.getWidth(),height:Oa.getHeight()};var rb={left:U.xmin,
top:U.ymax,width:Ua,height:bb};var Lb=new R(U.xmin,U.ymax,Pa),Bb=new R(U.xmin,U.ymin,Pa),zb=new R(this.extent.xmin,this.extent.ymax,Pa),$b=new R(this.extent.xmin,this.extent.ymin,Pa);(ob=L.getLineIntersection(zb,Lb,$b,Bb,Pa))||ua||(Ea=!1)}this._ratioW=this.width/Ua;this._ratioH=this.height/bb;var vb=this._zoomAnimDiv;if(Ea)if(da(this._layersDiv,{left:"0px",top:"0px"}),ha=new W(0,0),this.__visibleRect.x=this.__visibleRect.y=0,eb&&rb){this._delta=ha;vb.id="_zAD";vb.startingExtent=nb;vb.extent=U;vb.levelChange=
Ea;vb.newLod=Ha.lod;vb.anchor=na?na:!ob&&ua?ua.anchor:ya(this.extent,this.width,this.height,ob);var Hb=this.extent.getWidth()/U.getWidth();Fa.zoomAnimationThrottled&&1024<(1>Hb?1/Hb:Hb)?(this.__zoomStart(nb,vb.anchor),this.__zoom(nb,1,vb.anchor),this._fireOnScale(1,vb.anchor,!0),this.__zoomEnd(U,Hb,vb.anchor,Ha.lod,Ea)):(this._zoomAnim=B.resize({node:vb,start:eb,end:rb,duration:Fa.zoomDuration,rate:Fa.zoomRate,beforeBegin:ua?null:this._zoomStartHandler,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),
this._fireOnScale(Hb,vb.anchor,za))}else this._updateExtent(U,Ea,za),this._fireExtChg([this.extent,ha,Ea,this.__LOD=Ha.lod]);else if(!this.__panning)if(!1===this.loaded||za)this._updateExtent(U,Ea,za),this._fireExtChg([this.extent,ha,Ea,this.__LOD=Ha.lod]);else{this.__panning=!0;eb=(new S(0,0,this.width,this.height,this.spatialReference)).getCenter();eb.x=ab(eb.x);eb.y=ab(eb.y);var Mb=this._delta=this.toScreen(U.getCenter()),Fb=Math.abs(eb.x-Mb.x),Wb=Math.abs(eb.y-Mb.y);this.optimizePanAnimation&&
(Fb>2*this.width||Wb>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(U,!1,za),this.onPanEnd(this.extent,new W(0,0)),this._fireExtChg([this.extent,new W(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new W(0,0)),this._panAnim=B.slideTo({node:vb,left:eb.x-Mb.x,top:eb.y-Mb.y,duration:Fa.panDuration,rate:Fa.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),
this._panAnim.play())}}}catch(ac){}},_fireOnScale:function(U,ha,na){if("css-transforms"===this.navigationMode){var qa=this.__visibleDelta;this.onScale(z.scaleAt(U,{x:-1*(this.width/2-(ha.x-qa.x)),y:-1*(this.height/2-(ha.y-qa.y))}),na)}},_stopAnim:function(){var U=this._zoomAnim,ha=this._panAnim;if(U&&U._active){U.stop();ha=U.curve.getValue(U._getStep());var na=parseFloat(ha.left),qa=parseFloat(ha.top);U=U.node;return{anchor:U.anchor,start:U.startingExtent,end:U.extent,level:U.newLod&&U.newLod.level,
rect:ha,divExtent:new P(na,qa-parseFloat(ha.height),na+parseFloat(ha.width),qa,this.spatialReference)}}ha&&ha._active&&(ha.stop(),ha._fire("onEnd",[ha.node]))},__getExtentForLevel:function(U,ha,na){var qa=this.__tileInfo;qa=qa&&qa.lods;U=r.isDefined(U)?U:0;na=na||this.extent;ha=ha||na&&na.getCenter();if(qa){if(ha){na=this.getMinZoom();var ua=this.getMaxZoom();U>ua&&(U=ua);U<na&&(U=na);U=qa[U];qa=this.width*U.resolution/2;na=this.height*U.resolution/2;return{extent:new P(ha.x-qa,ha.y-na,ha.x+qa,ha.y+
na,ha.spatialReference),lod:U}}}else return na?{extent:na.expand(!U||1>U?1:U).centerAt(ha)}:void 0},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var U=--this._jobs;U?0>U&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(U,ha){this[U]&&this[U].apply(this,ha)},_updateExtent:function(U,ha,na){this.extent=U;U=this.spatialReference;this._viewInfo={view:new K({viewingMode:"map",
scale:this.getScale()}),sr:U,version:ha?++ja:ja};(ha||na)&&this._setClipRect();this._calcGeographicExtent()},_calcGeographicExtent:function(){var U=this.spatialReference;U&&(U.isWebMercator()?this.geographicExtent=O.webMercatorToGeographic(this._getAvailExtent(),!0):4326===U.wkid&&(this.geographicExtent=new P(this._getAvailExtent().toJson())))},_fireExtChg:function(U){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",U);if(U=this._extentDfd)delete this._extentDfd,
U.resolve()},attr:function(U,ha){var na=this.container;na&&(null==ha?na.removeAttribute(U):na.setAttribute(U,ha));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();this._calcGeographicExtent()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(U,ha,na){},onTimeExtentChange:function(){},onWebGLEnabledChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},
onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this.releaseAllWebGLContexts(),this._cleanUp(),clearTimeout(this._resizeTimerHandle),
this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(U){da(this.__container,"cursor",this.cursor=U)},setMapCursor:function(U){this.setCursor(this._cursor=U)},resetMapCursor:function(){this.setCursor(this._cursor)},setBackgroundColor:function(U){U&&!U.declaredClass&&(U=new J(U));this.backgroundColor=U||null;var ha="";U&&(ha=9>x("ie")?U.toHex():"rgba("+U.toRgba().join(",")+")");u.set(this.root,{backgroundColor:ha})},setInfoWindow:function(U){var ha=this.infoWindow;
ha&&ha.unsetMap(this);this.infoWindow=U;this.loaded&&U&&U.setMap(this)},setInfoWindowOnClick:function(U){this._params.showInfoWindowOnClick=U;this.popupManager&&this.popupManager.set("enabled",U)},getInfoWindowAnchor:function(U){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(U)||"upperright"},toScreen:function(U,ha){return ya(this.extent,this.width,this.height,U,ha)},toMap:function(U){return ra(this.extent,this.width,this.height,U)},addLayer:function(U,ha){U&&!this.getLayer(U.id)&&
this._addLayer(U,U instanceof V?this.graphicsLayerIds:this.layerIds,ha);return U},addLayers:function(U){var ha=[],na=U.length,qa,ua=U.length;var za=h.connect(this,"onLayerAddResult",function(Ea,Pa){-1!==f.indexOf(U,Ea)&&(na--,ha.push({layer:Ea,success:!Pa,error:Pa}),na||(h.disconnect(za),this.onLayersAddResult(ha)))});for(qa=0;qa<ua;qa++)this.addLayer(U[qa]);return this},removeLayer:function(U,ha){var na=U.id,qa=U instanceof V?this.graphicsLayerIds:this.layerIds,ua=fa(qa,na);0<=ua&&(this._forgetLayer(U),
qa.splice(ua,1),this.loaded||this._firstLayerId!==na||(this._firstLayerId=null),U instanceof V?this._detachGraphicsLayer(U):U.loaded&&(U.getMap()&&U._unsetMap(this,this._layersDiv),-1!==U.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(U)),delete this._layers[na],delete this._layerDivs[na],ha||this._reorderLayers(qa),this.onLayerRemove(U))},removeAllLayers:function(){var U=this.layerIds,ha;for(ha=U.length-1;0<=ha;ha--)this.removeLayer(this._layers[U[ha]],1);U=this.graphicsLayerIds;
for(ha=U.length-1;0<=ha;ha--)this.removeLayer(this._layers[U[ha]],1);this.onLayersRemoved()},reorderLayer:function(U,ha){g.isString(U)&&(q.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),U=this.getLayer(U));var na=U.id,qa=U instanceof V?this.graphicsLayerIds:this.layerIds;0>ha?ha=0:ha>=qa.length&&(ha=qa.length-1);U=fa(qa,na);-1!==U&&U!==ha&&(qa.splice(U,1),qa.splice(ha,0,na),this._reorderLayers(qa))},
getLayer:function(U){return this._layers[U]},setWebGLEnabled:function(U){var ha=this.webglEnabled;this.webglEnabled=(U||!1)&&ka;if(ha!==this.webglEnabled)this.onWebGLEnabledChange()},isWebGLContextAvailable:function(){return sa.isContextAvailable()&&(-1===this.maxWebGLContexts||0<this.maxWebGLContexts&&this._webglContextOwners.length<this.maxWebGLContexts)},ownsWebGLContext:function(U){return-1!==f.indexOf(this._webglContextOwners,U)},acquireWebGLContext:function(U){return-1!==f.indexOf(this._webglContextOwners,
U)?!0:this.isWebGLContextAvailable()?(sa.acquireContext(U),this._webglContextOwners.push(U),!0):!1},releaseWebGLContext:function(U){var ha=f.indexOf(this._webglContextOwners,U);-1!==ha&&this._webglContextOwners.splice(ha,1);sa.releaseContext(U)},releaseAllWebGLContexts:function(){var U=this._webglContextOwners.slice(0);f.forEach(U,function(ha){this.releaseWebGLContext(ha)},this)},syncHitTestForWebGL:function(U){var ha,na=U.screenPoint;U=this.graphicsLayerIds.slice(0).reverse();f.some(U,function(qa){qa=
this.getLayer(qa);qa.loaded&&!qa.suspended&&qa.hasWebGLSurface()&&(ha=qa._div.syncHitTest(na.x,na.y));return!!ha},this);return ha},setExtent:function(U,ha){U=new P(U.toJson());var na=U.getWidth(),qa=U.getHeight();return 0===na&&0===qa?this.centerAt(new R({x:U.xmin,y:U.ymin,spatialReference:U.spatialReference&&U.spatialReference.toJson()})):this._extentUtil(null,null,U,ha)},getTargetExtent:function(U){if(U)return U=new P(U.toJson()),0!==U.getWidth()&&0!==U.getHeight()&&(U=(U=this._convertGeometry(this,
U))&&this._fixExtent(U).extent),U},centerAt:function(U){return this._extentUtil(null,{mapCenter:U})},centerAndZoom:function(U,ha){return this._extentUtil({targetLevel:ha,mapCenter:U,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:aa.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*aa.getUnitValueForSR(this.spatialReference)},getResolutionForPopup:function(){var U=
this.getResolution(),ha=this.getResolutionInMeters(),na=ha/16;return 10>=na?0:U/ha*na},getMinResolution:function(){return this._minResolution},getMaxResolution:function(){return this._maxResolution},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},getViewInfo:function(){return this._viewInfo},setScale:function(U){return this._extentUtil({targetScale:U})},getLayersVisibleAtScale:function(U){var ha=[];(U=U||this.getScale())&&f.forEach(this.layerIds.concat(this.graphicsLayerIds),
function(na){na=this.getLayer(na);na.isVisibleAtScale(U)&&ha.push(na)},this);return ha},getNumLevels:function(){var U=this.getMinZoom(),ha=this.getMaxZoom();return U===ha&&0>U?0:ha-U+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(U){if(-1<U)return this._extentUtil({targetLevel:U})},getZoom:function(){return this.getLevel()},setZoom:function(U){return this.setLevel(U)},getMinZoom:function(){return this._params.minZoom},getMaxZoom:function(){return this._params.maxZoom},
setBasemap:function(U){if(g.isObject(U)){var ha=U;U=ha.title}else ha=D&&D[U];if(ha){this._basemapDfd&&!this._basemapDfd.isFulfilled()&&this._basemapDfd.cancel();var na=[],qa=0;f.forEach(ha.baseMapLayers||ha.layers,function(za){var Ea={id:za.id,displayLevels:za.displayLevels,opacity:r.isDefined(za.opacity)?za.opacity:null,visible:r.isDefined(za.visibility)?za.visibility:null};if(Ea=this._createBaseLayerInstance(za,Ea,U))na.push(Ea),za.isReference||qa++},this);na.length&&qa&&(this._basemapDfd=I(na).otherwise(Aa(this,
function(za){this._basemapPending=!1;za&&"cancel"===za.dojoType&&f.forEach(na,function(Ea){Ea.cancel()});throw za;})).then(function(za){var Ea=[],Pa=[];f.forEach(za,function(Oa){Oa&&(Oa.layerInfo&&Ea.push(Oa.layerInfo),Oa.layer&&Pa.push(Oa.layer))});return{basemapName:U,infos:Ea,layers:Pa}}).then(Aa(this,this._waitForBaseLayers)).then(Aa(this,this._setBasemap)),this._basemapPending=!this.loaded&&!this._basemapDfd.isFulfilled())}else{ha=[];for(var ua in D)ha.push(ua)}},_createBaseLayerInstance:function(U,
ha,na){var qa=new e;if(U.type)switch(U.type){case "OpenStreetMap":qa.resolve({layerInfo:U,layer:new oa(ha)});break;case "VectorTile":b(["./layers/VectorTileLayer"],function(za){ua=G.normalize(U.url);qa.promise.isFulfilled()||qa.resolve({layerInfo:U,layer:new za(ua,ha)})});break;default:return null}else{var ua=G.normalize(U.url);qa.resolve({layerInfo:U,layer:new Y(ua,ha)})}return qa.promise},_waitForBaseLayers:function(U){var ha=new e(C._dfdCanceller);ha.promise.otherwise(function(qa){if(qa&&"cancel"===
qa.dojoType){for(var ua in ha._layerEvents)qa=ha._layerEvents[ua],h.disconnect(qa[0]),h.disconnect(qa[1]);delete ha._layerEvents}});if(!this.loaded)return ha.resolve(U),ha.promise;var na=function(qa){ha._pendingLayers--;qa=f.indexOf(U.layers,this);-1<qa&&(qa=ha._layerEvents[qa])&&(h.disconnect(qa[0]),h.disconnect(qa[1]));0>=ha._pendingLayers&&(delete ha._layerEvents,ha.isFulfilled()||ha.resolve(U))};ha._pendingLayers=0;ha._layerEvents={};f.forEach(U.layers,function(qa,ua){qa&&ha._pendingLayers++});
f.forEach(U.layers,function(qa,ua){qa&&(qa.loaded?na(qa):ha._layerEvents[ua]=[h.connect(qa,"onLoad",qa,na),h.connect(qa,"onError",qa,na)])});return ha.promise},_setBasemap:function(U){var ha=U.layers,na=U.infos,qa=0,ua=!0;this._basemapPending=!1;this.loaded&&(f.forEach(ha,function(Ea,Pa){Ea.loaded&&(na[Pa].isReference||qa++)}),ua=qa);if(ua){if(this.basemapLayerIds){var za={basemapName:this._basemap,infos:D&&D[this._basemap]&&D[this._basemap].baseMapLayers};za.basemapName||(f.forEach(this.basemapLayerIds,
function(Ea){if(this.getLayer(Ea)instanceof oa)return za.basemapName="osm",za.infos=D&&D.osm&&D.osm.baseMapLayers,!1},this),za.basemapName||(za=null))}this._removeBasemap();this._basemap=U.basemapName;this.basemapLayerIds=this._addBasemapLayers(ha,na);this.attr("data-basemap",this.getBasemap());this.emit("basemap-change",{current:U,previous:za})}},_addBasemapLayers:function(U,ha){var na=[],qa=[],ua=0;f.forEach(U,function(za,Ea){ha[Ea].isReference?na.push(za):(this.addLayer(za,ua++),qa.push(za.id))},
this);na.length&&f.forEach(na,function(za){za.attr("data-reference",!0);this.addLayer(za,"top");qa.push(za.id)},this);return qa},_removeBasemap:function(){var U=this.basemapLayerIds,ha;U&&U.length&&f.forEach(U,function(na){(ha=this.getLayer(na))&&this.removeLayer(ha)},this)},getBasemap:function(){return this._basemap||""},translate:function(U,ha){U=U||0;ha=ha||0;if(!this._txTimer){this._tx=this._ty=0;var na=this.toScreen(this.extent.getCenter());this.__panStart(na.x,na.y)}this._tx+=U;this._ty+=ha;
this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var U=this._tx,ha=this._ty;this._tx=this._ty=0;this.__panEnd(U,ha)},setTimeExtent:function(U){U=(this.timeExtent=U)?new U.constructor(U.toJson()):null;this.onTimeExtentChange(U)},setTimeSlider:function(U){this.timeSlider&&(la(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);U&&(this.timeSlider=
U,this.setTimeExtent(U.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=wa(U,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(U){if(this.visible!==U){this.visible=U;U||(this._display=this.container.style.display);this.container.style.display=U?this._display:"none";if(this.autoResize){var ha=U?"resume":"pause";this._rszSignal[ha]();this._oriSignal[ha]()}U&&this.resize()}return this},resize:function(U){clearTimeout(this._resizeTimerHandle);this._destroyed||(!0===U?this._execResize():
this._resizeTimerHandle=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeTimerHandle||this._execResize()},_execResize:function(){clearTimeout(this._resizeTimerHandle);this._resizeTimerHandle=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},_resize:function(){var U=this.width,ha=this.height,na=u.get(this.container,"display"),qa=n.getContentBox(this.container);if(!("none"===na||0>=qa.w||0>=qa.h||U===qa.w&&ha===qa.h)){if(na=this._zoomAnim||
this._panAnim)na.stop(),na._fire("onEnd",[na.node]);da(this.root,{width:(this.width=qa.w)+"px",height:(this.height=qa.h)+"px"});qa=this.width;na=this.height;this.attribution&&this.attribution.domNode&&u.set(this.attribution.domNode,"maxWidth",Math.floor(qa*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,qa,na);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,qa,na);var ua=new S(this.extent);U=(new S(ua.x,ua.y,qa/U*ua.width,
na/ha*ua.height,this.spatialReference)).getExtent();this.onResize(U,qa,na);this._extentUtil(null,null,U,null,!0)}},reposition:function(){var U=this.position,ha=U.x,na=U.y;this._reposition();U=this.position;if(ha!==U.x||na!==U.y)this.onReposition(U.x,U.y)},_reposition:function(){var U=n.position(this.container,!0),ha=n.getPadBorderExtents(this.container);this.position.update(U.x+ha.l,U.y+ha.t)},_setClipRect:function(){delete this._clip;var U=7>=x("ie")||void 0===x("ie")&&7<=x("trident")?"rect(auto,auto,auto,auto)":
"auto";if(this.wrapAround180){var ha=this.width,na=this.height,qa=this._getFrameWidth(),ua=ha-qa;0<ua&&(U=ua/2,U="rect(0px,"+(U+qa)+"px,"+na+"px,"+U+"px)",na=this.extent.getWidth(),ha=qa/ha*na,this._clip=[(na-ha)/2,ha])}da(this.__container,"clip",U)},_getAvailExtent:function(){var U=this.extent,ha=this._clip;if(ha){if(!U._clip){var na=new S(U);na.width=ha[1];na.x+=ha[0];U._clip=na.getExtent()}return U._clip}return U},_fixedPan:function(U,ha){return this._extentUtil(null,{dx:U,dy:ha})},panUp:function(){return this._fixedPan(0,
-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*this.width,-.75*this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,
-.75*this.height)},enableSnapping:function(U){U=U||{};if("esri.SnappingManager"===U.declaredClass)this.snappingManager=U;else{var ha=xa++,na=this;this._rids&&this._rids.push(ha);b(["./SnappingManager"],function(qa){var ua=na._rids?f.indexOf(na._rids,ha):-1;-1!==ua&&(na._rids.splice(ua,1),na.snappingManager=new qa(g.mixin({map:na},U)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&
pa&&this.loaded&&(this._labels=new pa({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=null;this._labels&&(this._labels.removeAllFeatureLayers(),f.forEach(this.graphicsLayerIds,function(U){U=this.getLayer(U);"function"===typeof U.applyEdits?
this._labels.addFeatureLayer(U):"esri.layers.WFSLayer"===U.declaredClass&&this._labels.addFeatureLayer(U)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new ia,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var U=this.layerIds,ha=this._layerDivs,na=!1,qa,ua,za=U.length-1;0<=za;za--)if(qa=U[za],ua=this.getLayer(qa),qa=ha[qa],ua&&qa&&!ua._isReference){t.place(this._mapImageLyr._div,
qa,"after");na=!0;break}na||t.place(this._mapImageLyr._div,this._layersDiv,"first")}});return E._CoreMap=a})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(b,y,q,a){b={streets:{title:a.basemaps.streets,thumbnailUrl:b.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:a.basemaps.satellite,thumbnailUrl:b.toUrl("./images/basemap/satellite.jpg"),
itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:a.basemaps.hybrid,thumbnailUrl:b.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},
terrain:{title:a.basemaps.terrain,thumbnailUrl:b.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:a.basemaps.topo,thumbnailUrl:b.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},
gray:{title:a.basemaps.gray,thumbnailUrl:b.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:a.basemaps["dark-gray"],thumbnailUrl:b.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",
baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:a.basemaps.oceans,thumbnailUrl:b.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",
isReference:!0}]},"national-geographic":{title:a.basemaps["national-geographic"],thumbnailUrl:b.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},osm:{title:a.basemaps.osm,thumbnailUrl:b.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:a.basemaps["dark-gray"],
thumbnailUrl:b.toUrl("./images/basemap/dark-gray.jpg"),itemId:"c11ce4f7801740b2905eb03ddc963ac8",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",type:"VectorTile"}]},"gray-vector":{title:a.basemaps.gray,thumbnailUrl:b.toUrl("./images/basemap/gray.jpg"),itemId:"8a2cba3b0ebf4140b7c0dc5ee149549a",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",
type:"VectorTile"}]},"streets-vector":{title:a.basemaps.streets,thumbnailUrl:b.toUrl("./images/basemap/streets.jpg"),itemId:"de26a3cf4cc9451298ea173c4b324736",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",type:"VectorTile"}]},"topo-vector":{title:a.basemaps.topo,thumbnailUrl:b.toUrl("./images/basemap/topo.jpg"),itemId:"7dc6cea0b1764a1f9af2e679f642f0f5",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{url:"https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:a.basemaps["streets-night-vector"],thumbnailUrl:b.toUrl("./images/basemap/streets-night.jpg"),itemId:"86f556a2d1fd468181855a35e344567f",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:a.basemaps["streets-relief-vector"],
thumbnailUrl:b.toUrl("./images/basemap/streets-relief.jpg"),itemId:"b266e6d17fc345b498345613930fbd76",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",type:"VectorTile"}]},"streets-navigation-vector":{title:a.basemaps["streets-navigation-vector"],thumbnailUrl:b.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"63c47b7177f946b49902c24129b87252",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",
type:"VectorTile"}]}};return q.basemaps=b})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),function(b,y,q,a,h,e,g,f,m){f={animateRange:function(l){var d=l.range;return new y.Animation(q.mixin({curve:new y._Line(d.start,d.end)},l))},resize:function(l){var d=l.node=a.byId(l.node),c=l.start,k=l.end;c||(c=h.getMarginBox(d),d=h.getPadBorderExtents(d),c=l.start={left:c.l+d.l,top:c.t+d.t,width:c.w-
d.w,height:c.h-d.h});k||(k=l.anchor?l.anchor:{x:c.left,y:c.top},d=l.size,k=l.end={left:c.left-(d.width-c.width)*(k.x-c.left)/c.width,top:c.top-(d.height-c.height)*(k.y-c.top)/c.height,width:d.width,height:d.height});return y.animateProperty(q.mixin({properties:{left:{start:c.left,end:k.left},top:{start:c.top,end:k.top},width:{start:c.width,end:k.width},height:{start:c.height,end:k.height}}},l))},slideTo:function(l){var d=l.node=a.byId(l.node),c=e.getComputedStyle,k=null,t=null,n=function(){return function(){var u=
"absolute"==d.style.position?"absolute":"relative";k="absolute"==u?d.offsetTop:parseInt(c(d).top)||0;t="absolute"==u?d.offsetLeft:parseInt(c(d).left)||0;"absolute"!=u&&"relative"!=u&&(u=h.position(d,!0),k=u.y,t=u.x,d.style.position="absolute",d.style.top=k+"px",d.style.left=t+"px")}}();n();l=y.animateProperty(q.mixin({properties:{top:{start:k,end:l.top||0},left:{start:t,end:l.left||0}}},l));b.connect(l,"beforeBegin",l,n);return l},flash:function(l){l=q.mixin({end:"#f00",duration:500,count:1},l);l.duration/=
2*l.count;var d=a.byId(l.node),c=l.start;c||(c=e.getComputedStyle(d).backgroundColor);var k=l.end,t=[],n=l.count;d={node:d,duration:l.duration};for(l=0;l<n;l++)t.push(y.animateProperty(q.mixin({properties:{backgroundColor:{start:c,end:k}}},d))),t.push(y.animateProperty(q.mixin({properties:{backgroundColor:{start:k,end:c}}},d)));return g.chain(t)}};q.mixin(q.getObject("fx",!0,m),f);return f})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d){q.isAsync||l(0,function(){d(["./fx/Toggler"])});q=q.fx={};l={_fire:function(t,n){this[t]&&this[t].apply(this,n||[]);return this}};var c=function(t){this._index=-1;this._animations=t||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;a.forEach(this._animations,function(n){n&&("undefined"!=typeof n.duration&&(this.duration+=n.duration),n.delay&&(this.duration+=n.delay))},this)};c.prototype=new y;b.extend(c,{_onAnimate:function(){this._fire("onAnimate",
arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=h.after(this._current,"onAnimate",b.hitch(this,"_onAnimate"),!0),this._onEndCtx=h.after(this._current,"onEnd",b.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(t,n){this._current||(this._current=this._animations[this._index=0]);if(!n&&"playing"==
this._current.status())return this;var u=h.after(this._current,"beforeBegin",b.hitch(this,function(){this._fire("beforeBegin")}),!0),x=h.after(this._current,"onBegin",b.hitch(this,function(z){this._fire("onBegin",arguments)}),!0),A=h.after(this._current,"onPlay",b.hitch(this,function(z){this._fire("onPlay",arguments);u.remove();x.remove();A.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=h.after(this._current,"onAnimate",b.hitch(this,"_onAnimate"),!0);this._onEndCtx&&
this._onEndCtx.remove();this._onEndCtx=h.after(this._current,"onEnd",b.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var t=h.after(this._current,"onPause",b.hitch(this,function(n){this._fire("onPause",arguments);t.remove()}),!0);this._current.pause()}return this},gotoPercent:function(t,n){this.pause();var u=this.duration*t;this._current=null;a.some(this._animations,function(x,A){if(u<=x.duration)return this._current=x,this._index=
A,!0;u-=x.duration;return!1},this);this._current&&this._current.gotoPercent(u/this._current.duration);n&&this.play();return this},stop:function(t){if(this._current){if(t){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var n=h.after(this._current,"onStop",b.hitch(this,function(u){this._fire("onStop",arguments);n.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():
"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});b.extend(c,l);q.chain=function(t){return new c(b.isArray(t)?t:Array.prototype.slice.call(t,0))};var k=function(t){this._animations=t||[];this._connects=[];this.duration=this._finished=0;a.forEach(t,function(u){var x=u.duration;u.delay&&(x+=u.delay);this.duration<x&&(this.duration=x);this._connects.push(h.after(u,"onEnd",b.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=
new e.Animation({curve:[0,1],duration:this.duration});var n=this;a.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(u){n._connects.push(h.after(n._pseudoAnimation,u,function(){n._fire(u,arguments)},!0))})};b.extend(k,{_doAction:function(t,n){a.forEach(this._animations,function(u){u[t].apply(u,n)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(t,n){var u=this._pseudoAnimation;u[t].apply(u,n)},play:function(t,
n){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(t,n){var u=this.duration*t;a.forEach(this._animations,function(x){x.gotoPercent(x.duration<u?1:u/x.duration,n)});this._call("gotoPercent",arguments);return this},stop:function(t){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},
destroy:function(){this.stop();a.forEach(this._connects,function(t){t.remove()})}});b.extend(k,l);q.combine=function(t){return new k(b.isArray(t)?t:Array.prototype.slice.call(t,0))};q.wipeIn=function(t){var n=t.node=g.byId(t.node),u=n.style,x;t=e.animateProperty(b.mixin({properties:{height:{start:function(){x=u.overflow;u.overflow="hidden";if("hidden"==u.visibility||"none"==u.display)return u.height="1px",u.display="",u.visibility="",1;var z=f.get(n,"height");return Math.max(z,1)},end:function(){return n.scrollHeight}}}},
t));var A=function(){u.height="auto";u.overflow=x};h.after(t,"onStop",A,!0);h.after(t,"onEnd",A,!0);return t};q.wipeOut=function(t){var n=(t.node=g.byId(t.node)).style,u;t=e.animateProperty(b.mixin({properties:{height:{end:1}}},t));h.after(t,"beforeBegin",function(){u=n.overflow;n.overflow="hidden";n.display=""},!0);var x=function(){n.overflow=u;n.height="auto";n.display="none"};h.after(t,"onStop",x,!0);h.after(t,"onEnd",x,!0);return t};q.slideTo=function(t){var n=null,u=null,x=function(A){return function(){var z=
f.getComputedStyle(A),E=z.position;n="absolute"==E?A.offsetTop:parseInt(z.top)||0;u="absolute"==E?A.offsetLeft:parseInt(z.left)||0;"absolute"!=E&&"relative"!=E&&(z=m.position(A,!0),n=z.y,u=z.x,A.style.position="absolute",A.style.top=n+"px",A.style.left=u+"px")}}(t.node=g.byId(t.node));x();t=e.animateProperty(b.mixin({properties:{top:t.top||0,left:t.left||0}},t));h.after(t,"beforeBegin",x,!0);return t};return q})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),
function(b,y,q,a,h,e,g,f,m){b=b(null,{declaredClass:"esri.layers.TileInfo",constructor:function(l){y.mixin(this,l);this.width=this.cols;this.height=this.rows;this._levelToLOD={};l=this.spatialReference;var d=this.origin;l&&(l=this.spatialReference=new g(l.toJson?l.toJson():l));d&&(this.origin=new f(d.toJson?d.toJson():d),!d.spatialReference&&l&&this.origin.setSpatialReference(new g(l.toJson())));this.lods=q.map(this.lods,function(t){return new m(t)});q.forEach(this.lods,function(t){this._levelToLOD[t.level]=
t},this);l=!1;d=this.spatialReference;var c=this.origin;if(d&&c){var k=d._getInfo();k&&(l=d._isWrappable()&&Math.abs(k.origin[0]-c.x)<=k.dx)}this.isWrappable=l;this._initializeUpsampleLevels()},toJson:function(){return e.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&q.map(this.lods,function(l){return l.toJson()})})},
lodAt:function(l){return this._levelToLOD&&this._levelToLOD[l]||null},updateTileInfo:function(l){var d=this.lodAt(l.level),c=d.resolution*this.width;d=d.resolution*this.height;l.id=l.level+"/"+l.row+"/"+l.col;l.extent||(l.extent=[0,0,0,0]);l.extent[0]=this.origin.x+l.col*c;l.extent[1]=this.origin.y-(l.row+1)*d;l.extent[2]=l.extent[0]+c;l.extent[3]=l.extent[1]+d},upsampleTile:function(l){var d=this._upsampleLevels[l.level];if(!d||-1===d.parentLevel)return!1;l.level=d.parentLevel;l.row=Math.floor(l.row/
d.factor+.001);l.col=Math.floor(l.col/d.factor+.001);this.updateTileInfo(l);return!0},_initializeUpsampleLevels:function(){var l=this.lods;this._upsampleLevels=[];for(var d=null,c=0;c<l.length;c++){var k=l[c];this._upsampleLevels[k.level]={parentLevel:d?d.level:-1,factor:d?d.resolution/k.resolution:0};d=k}}});y.setObject("layers.TileInfo",b,h);return b})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,y,q,a,h){b=b(null,{declaredClass:"esri.layers.LOD",
constructor:function(e){y.mixin(this,e)},toJson:function(){return h.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});y.setObject("layers.LOD",b,a);return b})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n){y=y([d,c],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(u,x){x&&(x.roundrobin&&(b.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),x.tileServers=x.roundrobin),this._setTileServers(x.tileServers),
this._loadCallback=x.loadCallback);this._params=q.mixin({},this._url.query);this._initLayer=q.hitch(this,this._initLayer);(u=x&&x.resourceInfo)?this._initLayer(u):(this._load=q.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(u){if(u&&0<u.length){this.tileServers=u;var x,A=u.length;for(x=0;x<A;x++)u[x]=m.urlToObject(u[x]).path}},_initLayer:function(u,x){this.inherited(arguments);this.resourceInfo=
h.toJson(u);this.tileInfo=new k(u.tileInfo);!1!==this.resampling&&(u.capabilities&&-1<u.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new n(this)):this.resampling=!!u.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new l(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;u.timeInfo&&(this.timeInfo=new t(u.timeInfo));u.mensurationCapabilities&&(this.mensurationCapabilities=
u.mensurationCapabilities);var A=this._url.path,z=this._loadCallback,E=m.getProtocolForWebResource(!0),w=A.match(/^https?:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);w=w&&w[2];if(!this.tileServers)if(u.tileServers)this._setTileServers(u.tileServers);else{var D=-1!==A.search(/^https?:\/\/server\.arcgisonline\.com/i),r=-1!==A.search(/^https?:\/\/services\.arcgisonline\.com/i);(D||r)&&this._setTileServers([A,A.replace(D?/server\.arcgisonline/i:
/services\.arcgisonline/i,D?"services.arcgisonline":"server.arcgisonline")])}if(w){w=w.toLowerCase();for(A=0;A<this._agolAttrs.length;A++)if(D=this._agolAttrs[A],D.toLowerCase()===w){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||E+"//static.arcgis.com/attribution/"+D;break}for(A=0;A<this._referenceLayers.length;A++)if(D=this._referenceLayers[A],D.toLowerCase()===w){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);z&&(delete this._loadCallback,z(this))},getTileUrl:function(u,
x,A){var z=this.tileServers,E=this._getToken(),w=this._url.query;u=(z?z[x%z.length]:this._url.path)+"/tile/"+u+"/"+x+"/"+A;u=m.upgradeToHTTPS(u);this.resampling&&!this.tileMap&&(u+="?blankTile\x3dfalse");w&&(u=this.resampling&&!this.tileMap?u+("\x26"+g.objectToQuery(w)):u+("?"+g.objectToQuery(w)));!E||w&&w.token||(u+=(-1===u.indexOf("?")?"?":"\x26")+"token\x3d"+E);u=this.addTimestampToURL(u);return m.addProxy(u)}});q.setObject("layers.ArcGISTiledMapServiceLayer",y,f);return y})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w){b=b(w,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(D,r){y.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=r?r.displayLevels:null)?this._displayLevels[0]:0;this.resampling=r?r.resampling:void 0;this._resamplingTolerance=r?r.resamplingTolerance:null;this.exclusionAreas=r?r.exclusionAreas:null;D=q.hitch;this._addImage=D(this,this._addImage);this._tileLoadHandler=D(this,this._tileLoadHandler);
this._tileErrorHandler=D(this,this._tileErrorHandler);this._popTile=D(this,this._popTile);this._cleanUpRemovedImages=D(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=D(this,this._fireOnUpdateEvent);this._transitionEnd=D(this,this._transitionEnd);this._tileMapCallback=D(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var D=this.tileInfo,r=D.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=D.width;this._tileH=
D.height;var v=this.scales=[],B=this._displayLevels,C=-Infinity,F=Infinity,G=this.fullExtent,H=new A(G.xmin,G.ymax);G=new A(G.xmax,G.ymin);var J=x.getContainingTileCoords,I,K=r.length;for(I=0;I<K;I++){var R=r[I];var W=J(D,H,R);R.startTileRow=0>W.row?0:W.row;R.startTileCol=0>W.col?0:W.col;W=J(D,G,R);R.endTileRow=W.row;R.endTileCol=W.col;B&&-1===a.indexOf(B,R.level)||(v[I]=R.scale,C=R.scale>C?R.scale:C,F=R.scale<F?R.scale:F)}-Infinity===C||this._hasMin||this.setMinScale(C);Infinity===F||this._hasMax||
this.setMaxScale(F);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=n("ie")&&7>n("ie")&&(this.isPNG32||"Mixed"===D.format)},isVisibleAtScale:function(D){return D?w.prototype._isMapAtVisibleScale.call(this,D,!0):!1},_isMapAtVisibleScale:function(D){var r=this.inherited(arguments,[D,!0]);if(r){var v=this._map;r=this.scales;var B=v.getScale(),C=!1,F=v.width>v.height?v.width:v.height;for(v=0;v<r.length;v++)if(Math.abs(r[v]-B)/r[v]<1/F){C=!0;break}r=C}return r},_setMap:function(D,r,v,B){this.inherited(arguments);
this._map=D;var C=this._div=e.create("div",null,r),F=D.__visibleDelta,G=y.connect,H=k._css.names,J={position:"absolute",width:D.width+"px",height:D.height+"px",overflow:"visible"},I=t.defaults.map.zoomDuration;"css-transforms"===D.navigationMode?(J[H.transform]=k._css.translate(-F.x,-F.y),m.set(C,J),delete J[H.transform],J[H.transition]=H.transformName+" "+I+"ms ease",m.set(this._active=e.create("div",null,C),J),this._active._remove=0,this._passives=[]):(J.left=-F.x+"px",J.top=-F.y+"px",m.set(C,J));
this._onResizeHandler_connect=G(D,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=G(this,"onOpacityChange",this,"_opacityChangeHandler");F=this.tileInfo;G=F.spatialReference;H=G._getInfo();(this._wrap=D.wrapAround180&&G._isWrappable()&&Math.abs(H.origin[0]-F.origin.x)<=H.dx)&&x._addFrameInfo(F,H);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!D.loaded)var K=y.connect(D,"onLoad",this,function(){y.disconnect(K);K=null;this.setExclusionAreas(this.exclusionAreas);
this.evaluateSuspension()});return C},_unsetMap:function(D,r){this.suspended||this._suspendImpl();e.destroy(this._div);this._map=this._div=null;var v=y.disconnect;v(this._onResizeHandler_connect);v(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){u.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var D=this._tiles,r=this._tileIds,v=this._loadingList,
B,C,F=y.disconnect,G=e.destroy;v&&0<v.count&&(v.forEach(function(J){if(B=D[J])F(B._onload_connect),F(B._onerror_connect),F(B._onabort_connect),B._onload_connect=B._onerror_connect=B._onabort_connect=null}),v.clear(),this._fireUpdateEnd());this._removeList.clear();for(v=r.length-1;0<=v;v--)(B=(C=r[v])&&D[C])&&G(B);if("css-transforms"===this._map.navigationMode){r=this._active;C=this._passives;this._noDom=0;for(v=C.length-1;0<=v;v--){var H=C[v];H._endHandle&&F(H._endHandle);H._matrix=H._multiply=H._endHandle=
null;H._marked=H._remove=0;C.splice(v,1);G(H)}r._matrix=r._multiply=null;r._marked=r._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new d;this._loadingList=new d;u.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(q.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,
null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var D=this._map,r=y.connect;if("css-transforms"===D.navigationMode){if(this._onScaleHandler_connect=r(D,"onScale",this,this._onScaleHandler),n("esri-mobile")){this._standby=[];var v=this,B=function(){v._noDom=1};this._onPanStartHandler_connect=r(D,"onPanStart",B);this._onZoomStartHandler_connect=r(D,"onZoomStart",B)}}else this._onZoomHandler_connect=r(D,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=r(D,"onPan",this,"_onPanHandler");
this._onExtentChangeHandler_connect=r(D,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var D=y.disconnect;D(this._onPanHandler_connect);D(this._onZoomHandler_connect);D(this._onScaleHandler_connect);D(this._onExtentChangeHandler_connect);D(this._onPanStartHandler_connect);D(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=
null},_onResizeHandler:function(D,r,v){D={width:r+"px",height:v+"px"};r=m.set;r(this._div,D);if("css-transforms"===this._map.navigationMode)for(this._active&&r(this._active,D),v=this._passives.length-1;0<=v;v--)r(this._passives[v],D)},_onExtentChangeHandler:function(D,r,v,B){r=this._map;var C=this._standby;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!r._isPanningOrZooming()){if("css-transforms"===r.navigationMode){if(v)for(B=this._passives.length-1;0<=B;B--){var F=this._passives[B];m.set(F,
k._css.names.transition,"none");F._marked?(this._passives.splice(B,1),F.parentNode&&F.parentNode.removeChild(F),e.destroy(F)):0<F.childNodes.length&&(F._multiply=F._multiply?c.multiply(F._matrix,F._multiply):F._matrix)}this._noDom=0;if(C&&C.length)for(B=C.length-1;0<=B;B--)F=C[B],m.set(F,"visibility","inherit"),this._popTile(F),C.splice(B,1)}this._fireUpdateStart();this._rrIndex=0;B=x.getCandidateTileInfo(r,this.tileInfo,D);D=r.__visibleDelta;if(!this._ct||B.lod.level!==this._ct.lod.level||v){F=B&&
this._ct&&B.lod.level!==this._ct.lod.level;this._ct=B;var G=this._tiles,H=this._tileIds,J=this._tileBounds,I=this._removeList,K=H.length;this._cleanUpRemovedImages();for(B=0;B<K;B++){C=H[B];var R=G[C];J[C]=H[B]=null;"css-transforms"===r.navigationMode&&F&&R.parentNode&&r.fadeOnZoom&&(R._fadeOut=F,R.parentNode._remove++);I.add(R)}v&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}B=D.x;v=D.y;"css-transforms"===r.navigationMode?(C={},C[k._css.names.transform]=k._css.translate(B,v),m.set(this._div,
C)):m.set(this._div,{left:B+"px",top:v+"px"});this.__coords_dx=B;this.__coords_dy=v;this._updateImages(new z(0,0,D.width,D.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;v=this._tileW;G=this._tileH;D=new z(-D.x,-D.y,D.width,D.height);for(B=this._tileIds.length-1;0<=B;B--)(C=this._tileIds[B])?(F=this._tiles[C],H=f.getMarginBox(F),H=new z(H.l,H.t,v,G),"css-transforms"===r.navigationMode&&(H.x=F._left,H.y=F._top),D.intersects(H)?
this._tileBounds[C]=H:(this._loadingList.contains(C)&&this._popTile(F),e.destroy(F),this._tileIds.splice(B,1),delete this._tileBounds[C],delete this._tiles[C])):(this._tileIds.splice(B,1),delete this._tileBounds[C],delete this._tiles[C])}},_onPanHandler:function(D,r){D=this._map;r=D.__visibleDelta.offset(r.x,r.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===D.navigationMode?(D={},D[k._css.names.transform]=k._css.translate(r.x,r.y),m.set(this._div,D),n("esri-mobile")||this._updateImages({x:-r.x,
y:-r.y,width:r.width,height:r.height})):(m.set(this._div,{left:r.x+"px",top:r.y+"px"}),this._updateImages({x:-r.x,y:-r.y,width:r.width,height:r.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(D,r){var v,B={},C=k._css.names,F=this._map,G=t.defaults.map.zoomDuration;for(v=this._passives.length-1;0<=v;v--){var H=this._passives[v];0===H.childNodes.length?(this._passives.splice(v,1),e.destroy(H)):("none"===H.style[C.transition]&&m.set(H,C.transition,
C.transformName+" "+G+"ms ease"),m.set(H,C.transition,r?"none":C.transformName+" "+G+"ms ease"),H._matrix=D,B[C.transform]=k._css.matrix(H._multiply?c.multiply(D,H._multiply):D),m.set(H,B))}this._active&&0===this._active.childNodes.length||(m.set(this._active,C.transition,r?"none":C.transformName+" "+G+"ms ease"),this._active._matrix=D,B[C.transform]=k._css.matrix(this._active._matrix),m.set(this._active,B),this._passives.push(this._active),B={position:"absolute",width:F.width+"px",height:F.height+
"px",overflow:"visible"},B[C.transition]=C.transformName+" "+G+"ms ease",m.set(this._active=e.create("div",null,this._div),B),this._active._remove=0,F.fadeOnZoom&&e.place(this._active,this._div,"first"))},_onZoomHandler:function(D,r,v){D=f.getMarginBox(this._div);v=v.offset(-D.l,-D.t);this._previousScale&&1!==r||(this._previousScale=1);var B,C=this._tileW*r,F=this._tileH*r,G=this._tileBounds,H=this._tiles,J=this._previousScale,I=this._multiple,K=m.set,R,W;if((D=n("ie"))&&8>D)a.forEach(this._tileIds,
function(ba){W="";B=G[ba];R=H[ba].style.margin.split(" ");a.forEach(R,function(O){""!==W&&(W+=" ");O=parseFloat(O);W+=O/J*r+"px"});K(H[ba],{left:B.x-(C-B.width)*(v.x-B.x)/B.width+"px",top:B.y-(F-B.height)*(v.y-B.y)/B.height+"px",margin:1!==I&&-1===W.indexOf("NaN")?W:"",zoom:r})});else{var P=C*I,S=F*I,L,aa;a.forEach(this._tileIds,function(ba){W="";B=G[ba];L=B.x-(C-B.width)*(v.x-B.x)/B.width;aa=B.y-(F-B.height)*(v.y-B.y)/B.height;R=H[ba].style.margin.split(" ");a.forEach(R,function(O){""!==W&&(W+=" ");
O=parseFloat(O);W+=O/J*r+"px"});K(H[ba],{left:L+"px",top:aa+"px",margin:1!==I&&-1===W.indexOf("NaN")?W:"",width:P+"px",height:S+"px"})})}this._previousScale=r},_updateImages:function(D){if(this._ct){var r=this._tileW,v=this._tileH,B=this._ct;var C=B.lod;B=B.tile;var F=B.offsets,G=B.coords,H=G.row;G=G.col;var J=C.level,I=this.opacity,K=this._tileIds,R=this._loadingList,W=this._addImage,P=this._map.id,S=this.id,L=D.x,aa=D.y,ba=C.startTileRow,O=C.endTileRow,V=C.startTileCol,X=C.endTileCol,N=a.indexOf,
Y=F.x-this.__coords_dx,ia=F.y-this.__coords_dy;var oa=r-Y+-D.x;var sa=v-ia+-D.y;var Ba=Math.ceil;oa=0<oa?oa%r:r-Math.abs(oa)%r;sa=0<sa?sa%v:v-Math.abs(sa)%v;L=0<L?Math.floor((L+Y)/r):Ba((L-(r-Y))/r);aa=0<aa?Math.floor((aa+ia)/v):Ba((aa-(v-ia))/v);ia=L+Ba((D.width-oa)/r);D=aa+Ba((D.height-sa)/v);if(this._wrap){var Da=C._frameInfo;var pa=Da[0];var ra=Da[1];Da=Da[2]}for(sa=L;sa<=ia;sa++)for(L=aa;L<=D;L++)Ba=H+L,oa=G+sa,this._wrap&&(oa<ra?(oa%=pa,oa=oa<ra?oa+pa:oa):oa>Da&&(oa%=pa)),!this._isExcluded(J,
Ba,oa)&&Ba>=ba&&Ba<=O&&oa>=V&&oa<=X&&(C=P+"_"+S+"_tile_"+J+"_"+L+"_"+sa,-1===N(K,C)&&(R.add(C),K.push(C),W(J,L,Ba,sa,oa,C,r,v,I,B,F)))}},_cleanUpRemovedImages:function(){var D=this._removeList,r=e.destroy,v,B=k._css.names;D.forEach(function(F){F._fadeOut||(F.style.filter="",F.style.zoom=1,r(F))});if("css-transforms"===this._map.navigationMode)for(v=this._passives.length-1;0<=v;v--){var C=this._passives[v];0===C.childNodes.length?(this._passives.splice(v,1),r(C)):this._map.fadeOnZoom&&!C._marked&&
C._remove===C.childNodes.length&&(C._marked=1,2048>k._css.getScaleFromMatrix(m.get(C,B.transform))?(m.set(C,B.transition,"opacity 0.65s"),m.set(C,"opacity",0),y.disconnect(C._endHandle),C._endHandle=y.connect(C,B.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:C}))}D.clear()},_transitionEnd:function(D){var r=D.target;"opacity"===D.propertyName&&(y.disconnect(r._endHandle),r._endHandle=null,D=a.indexOf(this._passives,r),-1<D&&this._passives.splice(D,1),r.parentNode&&
r.parentNode.removeChild(r),e.destroy(r))},_addImage:function(D,r,v,B,C,F,G,H,J,I,K){if(this._patchIE)I=this._tiles[F]=e.create("div"),I.id=F,g.add(I,"layerTile"),m.set(I,{left:G*B-K.x+"px",top:H*r-K.y+"px",width:G+"px",height:H+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(D,v,C)+"', sizingMethod\x3d'scale')"}),1>J&&m.set(I,"opacity",J),D=I.appendChild(e.create("div")),m.set(D,{opacity:0,width:G+"px",height:H+"px"}),this._div.appendChild(I),I=null,this._loadingList.remove(F),
this._fireOnUpdateEvent();else{I=this._tiles[F]=e.create("img");var R=y.connect;I.id=F;I._uid=D+"_"+v+"_"+C;I.alt="";g.add(I,"layerTile");B=G*B-K.x;K=H*r-K.y;r=this._map;var W=k._css.names;G={width:G+"px",height:H+"px",visibility:"hidden"};"css-transforms"===r.navigationMode?(G[W.transform]=k._css.translate(B,K),m.set(I,G),I._left=B,I._top=K):(G.left=B+"px",G.top=K+"px",m.set(I,G));1>J&&m.set(I,"opacity",J);I._onload_connect=R(I,"onload",this,"_tileLoadHandler");I._onerror_connect=R(I,"onerror",q.hitch(this,
"_tileErrorHandler",v,C));I._onabort_connect=R(I,"onabort",this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(D,v,C,F,this._tileMapCallback);else if(F=this.getTileUrl(D,v,C,I))this._failedRequests&&this._failedRequests[F]?(m.set(I,this._failedRequests[F].css),I.src=this._failedRequests[F].src,this._multiple=parseInt(this._failedRequests[F].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,I.src=F);"css-transforms"===r.navigationMode?this._active.appendChild(I):
this._div.appendChild(I);I=null}},_tileMapCallback:function(D,r){if(!this.suspended){var v=this._tiles[r.id]||l.byId(r.id);var B=r.level+"_"+r.row+"_"+r.col;v&&v._uid===B?(this._multiple=2*(r.level-D.level)||1,this.isResampling=1!==this._multiple,r=this.tileMap.style(D,r),m.set(v,r),v.src=this.getTileUrl(D.level,D.row,D.col)):this._popTile(r)}},getTileUrl:function(D,r,v){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},
_popTile:function(D){var r=y.disconnect;r(D._onload_connect);r(D._onerror_connect);r(D._onabort_connect);D._onload_connect=D._onerror_connect=D._onabort_connect=null;this._loadingList.remove(D.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(D){D=D.currentTarget;this._noDom?this._standby.push(D):(m.set(D,"visibility","inherit"),this._popTile(D))},_tileAbortHandler:function(D){D=D.currentTarget;this.onError(Error("Unable to load tile: "+D.src));m.set(D,"visibility","hidden");this._popTile(D)},
_tileErrorHandler:function(D,r,v){v=v.currentTarget;var B=!0;if(this.tileMap||!this.resampling)B=!1;else{var C=new h(v.src);C=C.path.split("/");C=parseInt(C[C.length-3]);var F=this._ct.lod.level-C+1;this._multiple=Math.pow(2,F);if(C===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)B=!1}B?(this.isResampling=!0,this._resample(v,D,r)):(this.onError(Error("Unable to load tile: "+v.src)),m.set(v,"visibility","hidden"),
this._popTile(v))},_resample:function(D,r,v){var B=(new h(D.src)).path.split("/"),C=this._multiple,F=parseInt(B[B.length-3])-1,G=parseInt(r/C),H=parseInt(v/C);B=v%C;var J=r%C;G=this.getTileUrl(F,G,H);r=this.getTileUrl(F+Math.log(C)/Math.LN2,r,v);C={width:this._tileW*C+"px",height:this._tileH*C+"px",margin:"-"+this._tileW*J+"px 0 0 -"+(this._tileH*B+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[r]={src:G,css:C};m.set(D,C);n("chrome")&&D.setAttribute("src",null);D.src=
G},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(D){if(this.opacity!=D)this.onOpacityChange(this.opacity=D)},onOpacityChange:function(){},_opacityChangeHandler:function(D){var r=m.set,v,B;if("css-transforms"===this._map.navigationMode){if(this._active){var C=this._active.childNodes;for(v=C.length-1;0<=v;v--)r(C[v],"opacity",D)}for(v=this._passives.length-
1;0<=v;v--)for(C=this._passives[v].childNodes,B=C.length-1;0<=B;B--)r(C[B],"opacity",D)}else for(C=this._div.childNodes,v=C.length-1;0<=v;v--)r(C[v],"opacity",D)},setExclusionAreas:function(D){this.exclusionAreas=D;if(this.loaded&&this._map&&this._map.loaded){var r=this._map.spatialReference,v=this.tileInfo,B=v.origin,C=v.lods,F=C[0].level,G=C[C.length-1].level,H,J,I;if(this.exclusionAreas&&this.exclusionAreas.length){this._exclusionsPerZoom=[];var K=0;for(H=D.length;K<H;K++){var R=D[K];if((I=R.geometry)&&
"extent"===I.type&&I.xmin<=I.xmax&&I.ymin<=I.ymax){if(!r.equals(I.spatialReference))if(r._canProject(I.spatialReference)){if(r.isWebMercator()){var W=A.lngLatToXY(I.xmin,I.ymin);I=A.lngLatToXY(I.xmax,I.ymax)}else W=A.xyToLngLat(I.xmin,I.ymin,!0),I=A.xyToLngLat(I.xmax,I.ymax,!0);I=new E(W[0],W[1],I[0],I[1],r)}else continue;var P=-1;if(R.minZoom&&-1!==R.minZoom)P=R.minZoom;else if(R.minScale&&-1!==R.minScale){var S=0;for(J=C.length;S<J;S++)if(C[S].scale<=R.minScale){P=C[S].level;break}}P=Math.max(P,
F);W=-1;if(R.maxZoom&&-1!==R.maxZoom)W=R.maxZoom;else if(R.maxScale&&-1!==R.maxScale)for(S=0,J=C.length;S<J;S++)if(C[S].scale<R.maxScale){W=C[S-1].level;break}else if(C[S].scale===R.maxScale){W=C[S].level;break}W=-1===W?G:Math.min(W,G);for(R=P;R<=W;R++){S=0;for(J=C.length;S<J;S++)if(C[S].level===R){var L=C[S];break}L&&(this._exclusionsPerZoom[R]||(this._exclusionsPerZoom[R]=[]),S=1/L.resolution/v.rows,J=1/L.resolution/v.cols,this._exclusionsPerZoom[R].push({rowFrom:Math.floor((B.y-I.ymax)*S),rowTo:Math.ceil((B.y-
I.ymin)*S),colFrom:Math.floor((I.xmin-B.x)*J),colTo:Math.ceil((I.xmax-B.x)*J)}))}}}}else this._exclusionsPerZoom=null;this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(D,r,v){var B;if(!this._exclusionsPerZoom)return!1;var C=this._exclusionsPerZoom[D];if(!C)return!1;var F=0;for(B=C.length;F<B;F++)if(D=C[F],r>=D.rowFrom&&r<D.rowTo&&v>=D.colFrom&&v<D.colTo)return!0;return!1}});q.setObject("layers.TiledMapServiceLayer",b,k);return b})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel",
"dojo/_base/array","./_base"],function(b,y,q){q.ArrayList=function(a){var h=[];a&&(h=h.concat(a));this.count=h.length;this.add=function(e){h.push(e);this.count=h.length};this.addRange=function(e){if(e.getIterator)for(e=e.getIterator();!e.atEnd();)this.add(e.get());else for(var g=0;g<e.length;g++)h.push(e[g]);this.count=h.length};this.clear=function(){h.splice(0,h.length);this.count=0};this.clone=function(){return new q.ArrayList(h)};this.contains=function(e){for(var g=0;g<h.length;g++)if(h[g]==e)return!0;
return!1};this.forEach=function(e,g){b.forEach(h,e,g)};this.getIterator=function(){return new q.Iterator(h)};this.indexOf=function(e){for(var g=0;g<h.length;g++)if(h[g]==e)return g;return-1};this.insert=function(e,g){h.splice(e,0,g);this.count=h.length};this.item=function(e){return h[e]};this.remove=function(e){e=this.indexOf(e);0<=e&&h.splice(e,1);this.count=h.length};this.removeAt=function(e){h.splice(e,1);this.count=h.length};this.reverse=function(){h.reverse()};this.sort=function(e){e?h.sort(e):
h.sort()};this.setByIndex=function(e,g){h[e]=g;this.count=h.length};this.toArray=function(){return[].concat(h)};this.toString=function(e){return h.join(e||",")}};return q.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(b,y,q){b=y.getObject("dojox.collections",!0);b.DictionaryEntry=function(a,h){this.key=a;this.value=h;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};b.Iterator=
function(a){var h=0;this.element=a[h]||null;this.atEnd=function(){return h>=a.length};this.get=function(){return this.atEnd()?null:this.element=a[h++]};this.map=function(e,g){return q.map(a,e,g)};this.reset=function(){h=0;this.element=a[h]}};b.DictionaryIterator=function(a){var h=[],e={},g;for(g in a)e[g]||h.push(a[g]);var f=0;this.element=h[f]||null;this.atEnd=function(){return f>=h.length};this.get=function(){return this.atEnd()?null:this.element=h[f++]};this.map=function(m,l){return q.map(h,m,
l)};this.reset=function(){f=0;this.element=h[f]}};return b})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),function(b,y,q,a,h,e,g){return b(null,{declaredClass:"esri.layers.TileMap",constructor:function(f){this.layer=f;this._tileMaps={}},getTile:function(f,m,l,d,c){f={id:d,level:f,row:m,col:l};m=this._getResamplingBudget();0<m?this._process({tile:f,requestedTile:f,callback:c,resamplingBudget:m}):
(c||this.callback).call(this,f,f)},statusOf:function(f,m,l){var d=this._getResamplingBudget();f={level:f,row:m,col:l};if(0===d)return 1;for(;0<=d;){m=this._tileToTileMap(f);if(!this._tileMaps[m.uid])return-1;m=this._tileMaps[m.uid];if(!m.promise.isFulfilled())return-1;if(this._isTileAvailable(f,m))return 1;f=this._parentTile(f);if(!f)break;d--}return 0},style:function(f,m){if(f.level!==m.level||f.row!==m.row||f.col!==m.col){var l=this.layer.tileInfo,d=l.lods,c=l.cols;l=l.rows;for(var k,t,n=d.length-
1;!k||!t;)k||d[n].level!==f.level||(k=d[n]),t||d[n].level!==m.level||(t=d[n]),n--;d=Math.round(k.resolution/t.resolution);f=m.col%d*-1*c;m=m.row%d*-1*l;d={width:c*d+"px",height:l*d+"px",margin:m+"px 0 0 "+f+"px","will-change":"transform"};f=0===f?0:-1*f;m=0===m?0:-1*m;d.clip="rect("+m+"px,"+(f+c)+"px,"+(m+l)+"px,"+f+"px)";return d}},_process:function(f){var m=f.tile,l=this._tileToTileMap(m),d=this._parentTile(m);this._getTileMap(l).then(y.hitch(this,function(c){l=c;this._isTileAvailable(m,l)?(f.callback||
this.callback).call(this,m,f.requestedTile):0<f.resamplingBudget&&d?(f.resamplingBudget--,f.tile=d,this._process(f)):(f.callback||this.callback).call(this,f.requestedTile,f.requestedTile)}),y.hitch(this,function(){(f.callback||this.callback).call(this,f.requestedTile,f.requestedTile)}))},_getTileMap:function(f){var m,l,d=null;if(this._tileMaps[f.uid]){f=this._tileMaps[f.uid];var c=f.promise}else{this._tileMaps[f.uid]=f;var k=new a;e({url:this._getTileMapUrl(f.level,f.row,f.col),handleAs:"json",content:{f:"json"},
callbackParamName:"callback",timeout:3E3,load:function(t){y.mixin(f,t);if(f.data&&0<f.data.length){l=f.data.length;if(1===l)d=f.data[0];else for(d=f.data[0],m=1;m<l;m++)if(f.data[m]!==d){d=null;break}null!==d&&(delete f.data,f.value=d);null==f.valid&&(f.valid=!0)}k.resolve(f)},error:function(t){t&&422===t.code?(y.mixin(f,{location:{top:f.row,left:f.col,width:8,height:8},valid:!0,value:0}),k.resolve(f)):k.reject()}});c=f.promise=k.promise}return c},_parentTile:function(f){var m=this.layer.tileInfo.lods,
l,d,c=null;q.some(m,function(k,t){return f.level===k.level?(l=k,d=t,!0):!1});0<d&&(m=m[d-1],c={id:f.id,level:m.level,row:Math.floor(f.row*l.resolution/m.resolution+.01),col:Math.floor(f.col*l.resolution/m.resolution+.01)});return c},_tileToTileMap:function(f){var m=8*Math.floor(f.row/8),l=8*Math.floor(f.col/8);return{uid:f.level+"_"+m+"_"+l,level:f.level,row:m,col:l}},_isTileAvailable:function(f,m){if(m.valid)if(void 0!==m.value)f=m.value;else{var l=m.location.left;var d=m.location.top;f=(f.row-d)*
m.location.width+(f.col-l);f=f<m.data.length?m.data[f]:0}else f=0;return f},_getTileMapUrl:function(f,m,l){var d=this.layer,c=d.tileServers,k=d._getToken(),t=d._url.query;f=(c?c[m%c.length]:d._url.path)+"/tilemap/"+f+"/"+m+"/"+l+"/8/8";t&&(f+="?"+h.objectToQuery(t));!k||t&&t.token||(f+=(-1===f.indexOf("?")?"?":"\x26")+"token\x3d"+k);return f=d.addTimestampToURL(f)},_getResamplingBudget:function(){var f=this.layer,m=0;f.resampling&&(m=f._resamplingTolerance,null===m||void 0===m)&&(m=f.tileInfo.lods.length);
return m}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k){var t=b([k],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(n){this.inherited(arguments,[null,n]);this._mapImages=[];var u=q.hitch;this._panStart=
u(this,this._panStart);this._pan=u(this,this._pan);this._extentChange=u(this,this._extentChange);this._zoom=u(this,this._zoom);this._zoomStart=u(this,this._zoomStart);this._scale=u(this,this._scale);this._resize=u(this,this._resize);y.connect(this,"onSuspend",this,this._onSuspend);y.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(n){var u=this._mapImages.push(n);--u;n._idx=u;n._layer=this;this._div&&this._createImage(n,u)},removeImage:function(n){if(n){var u=
n._idx,x=this._mapImages;if(x[u]===n){delete x[u];if(u=n._node)this._clearEvents(u),u.e_idx=u.e_bl=u.e_tr=u.e_l=u.e_t=u.e_w=u.e_h=null,u.parentNode&&(u.parentNode.removeChild(u),h.destroy(u));n._node=n._idx=n._layer=null}}},removeAllImages:function(){var n=this._mapImages,u,x=n.length;for(u=0;u<x;u++){var A=n[u];A&&this.removeImage(A)}this._mapImages=[]},getImages:function(){var n=this._mapImages,u=[],x,A=n.length;for(x=0;x<A;x++)n[x]&&u.push(n[x]);return u},setOpacity:function(n){this.opacity!=n&&
(this._opacityChanged(this.opacity=n),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(n){var u=this._div;if(u)if(!m("ie")||8<m("ie"))e.set(u,"opacity",n);else{var x=u.childNodes;var A=x.length;for(u=0;u<A;u++)e.set(x[u],"opacity",n)}},_createImage:function(n,u){var x=h.create("img");e.set(x,{position:"absolute"});1>n.opacity?e.set(x,"opacity",n.opacity):8>=m("ie")&&e.set(x,"opacity",this.opacity);!n.rotation||9>m("ie")||e.set(x,g._css.names.transform,g._css.rotate(360-
n.rotation));n._node=x;x.e_idx=u;x.e_layer=this;x.e_load=y.connect(x,"onload",t.prototype._imageLoaded);x.e_error=y.connect(x,"onerror",t.prototype._imageError);x.e_abort=y.connect(x,"onabort",t.prototype._imageError);x.src=n.href},_imageLoaded:function(n,u){n=u||n.target||n.currentTarget;u=n.e_layer;var x=u._mapImages[n.e_idx],A=u._map;A&&(A.__zooming||A.__panning||!u._sr)?u._standby.push(n):(u._clearEvents(n),x&&x._node===n&&A&&u._attach(x))},_imageError:function(n){n=n.target||n.currentTarget;
var u=n.e_layer,x=u._mapImages[n.e_idx];u._clearEvents(n);x&&(x._node=null)},_clearEvents:function(n){var u=y.disconnect;u(n.e_load);u(n.e_error);u(n.e_abort);n.e_load=n.e_error=n.e_abort=n.e_layer=null},_attach:function(n){var u=n.extent,x=u.spatialReference,A=this._sr,z=this._div,E=n._node,w=new d({x:u.xmin,y:u.ymin,spatialReference:x});u=new d({x:u.xmax,y:u.ymax,spatialReference:x});A.equals(x)||(A.isWebMercator()&&4326===x.wkid?(w=c.geographicToWebMercator(w),u=c.geographicToWebMercator(u)):x.isWebMercator()&&
4326===A.wkid&&(w=c.webMercatorToGeographic(w),u=c.webMercatorToGeographic(u)));E.e_bl=w;E.e_tr=u;n.visible&&(this._setPos(E,z._left,z._top),(this._active||z).appendChild(E))},_setPos:function(n,u,x){var A=n.e_bl,z=n.e_tr,E=this._map;A=E.toScreen(A);z=E.toScreen(z);u=A.x-u;x=z.y-x;var w=Math.abs(z.x-A.x);A=Math.abs(A.y-z.y);z={width:w+"px",height:A+"px"};var D=this._mapImages[n.e_idx];"css-transforms"===E.navigationMode?z[g._css.names.transform]=g._css.translate(u,x)+(D.rotation?" "+g._css.rotate(360-
D.rotation):""):(z.left=u+"px",z.top=x+"px");e.set(n,z);n.e_l=u;n.e_t=x;n.e_w=w;n.e_h=A},managedSuspension:!0,_setMap:function(n,u){this.inherited(arguments);var x=this._div=h.create("div",null,u),A=g._css.names,z={position:"absolute"},E=n.__visibleDelta;if(!m("ie")||8<m("ie"))z.opacity=this.opacity;"css-transforms"===n.navigationMode?(z[A.transform]=g._css.translate(E.x,E.y),e.set(x,z),x._left=E.x,x._top=E.y,z={position:"absolute",width:n.width+"px",height:n.height+"px",overflow:"visible"},this._active=
h.create("div",null,x),e.set(this._active,z),this._passive=h.create("div",null,x),e.set(this._passive,z)):(x._left=0,x._top=0,e.set(x,z));this._standby=[];A=this._mapImages;E=A.length;for(z=0;z<E;z++){var w=A[z];w._node||this._createImage(w,w._idx)}l.hide(x);return x},_unsetMap:function(n,u){this._disconnect();var x=this._div;if(x){var A=this._mapImages,z,E=A.length;for(z=0;z<E;z++){var w=A[z];if(w){var D=w._node;D&&(this._clearEvents(D),D.e_idx=D.e_bl=D.e_tr=D.e_l=D.e_t=D.e_w=D.e_h=null);w._node=
null}}u.removeChild(x);h.destroy(x)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();l.hide(this._div)},_onResume:function(n){n.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());n=this._map;var u=this._div,x=n.__visibleDelta;"css-transforms"===n.navigationMode&&(u._left=x.x,u._top=x.y,e.set(u,g._css.names.transform,g._css.translate(u._left,u._top)));this._redraw("css-transforms"===
n.navigationMode);this._connect(n);l.show(u)},_connect:function(n){if(!this._connections){var u=y.connect,x="css-transforms"===n.navigationMode;this._connections=[u(n,"onPanStart",this._panStart),u(n,"onPan",this._pan),u(n,"onExtentChange",this._extentChange),x&&u(n,"onZoomStart",this._zoomStart),x?u(n,"onScale",this._scale):u(n,"onZoom",this._zoom),x&&u(n,"onResize",this._resize)];x&&this._resize(n.extent,n.width,n.height)}},_disconnect:function(){this._connections&&(a.forEach(this._connections,
y.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(n,u){n=this._div;n._left=this._panL+u.x;n._top=this._panT+u.y;"css-transforms"===this._map.navigationMode?e.set(n,g._css.names.transform,g._css.translate(n._left,n._top)):e.set(n,{left:n._left+"px",top:n._top+"px"})},_extentChange:function(n,u,x){x?this._redraw("css-transforms"===this._map.navigationMode):u&&this._pan(n,u);this._processStandbyList()},_processStandbyList:function(){var n,
u=this._standby;if(u&&u.length)for(n=u.length-1;0<=n;n--)this._imageLoaded(null,u[n]),u.splice(n,1)},_redraw:function(n){if(n){n=this._passive;var u=g._css.names;e.set(n,u.transition,"none");this._moveImages(n,this._active);e.set(n,u.transform,"none")}n=this._active||this._div;u=this._div._left;var x=this._div._top,A,z=n.childNodes.length;for(A=0;A<z;A++){var E=n.childNodes[A];this._setPos(E,u,x)}},_zoom:function(n,u,x){n=this._div;var A=n._left,z=n._top,E,w=n.childNodes.length;for(E=0;E<w;E++){var D=
n.childNodes[E];var r=D.e_w*u,v=D.e_h*u,B=(x.x-A-D.e_l)*(r-D.e_w)/D.e_w,C=(x.y-z-D.e_t)*(v-D.e_h)/D.e_h;B=isNaN(B)?0:B;C=isNaN(C)?0:C;e.set(D,{left:D.e_l-B+"px",top:D.e_t-C+"px",width:r+"px",height:v+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(n,u){n=n.childNodes;var x=n.length;if(0<x)for(--x;0<=x;x--)u.appendChild(n[x])},_scale:function(n,u){var x=g._css.names,A=this._passive;e.set(A,x.transition,u?"none":x.transformName+" "+f.defaults.map.zoomDuration+
"ms ease");({})[x.transform]=g._css.matrix(n);e.set(A,x.transform,g._css.matrix(n))},_resize:function(n,u,x){e.set(this._active,{width:u+"px",height:x+"px"});e.set(this._passive,{width:u+"px",height:x+"px"})}});q.setObject("layers.MapImageLayer",t,g);return t})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),function(b,y,q,a,h,e,g,f,m){b=b(f,{declaredClass:"esri.layers.OpenStreetMapLayer",
constructor:function(l){this.spatialReference=new e({wkid:102100});this.tileInfo=new m({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,
resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},
{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817},{level:19,scale:1128.497176,resolution:.298582141647617}]});this.fullExtent=new g({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,
spatialReference:{wkid:102100}});this.initialExtent=new g({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=l&&l.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=l?l.displayLevels:null;this.copyright=l&&l.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(l=
l&&l.loadCallback)&&l(this)},getTileUrl:function(l,d,c){l=this.tileServers[d%this.serversLength]+"/"+l+"/"+c+"/"+d+".png";l=h.normalize(l);l=this.addTimestampToURL(l);return h.addProxy(l)}});y.setObject("layers.OpenStreetMapLayer",b,a);return b})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom ./PopupTemplate ./PopupRenderer".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B,C){b=b([v,B,f],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(F,G){this.initialize();y.mixin(this,F);this.domNode=l.byId(G);G=this._nls=y.mixin({},C.widgets.popup);F=this.domNode;c.add(F,"esriPopup");(this._isRTL=!t.isBodyLtr())&&
n.set(F,"direction","rtl");d.set(F,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+G.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+G.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+G.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
G.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+G.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'"+G.NLS_zoomTo+"' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+G.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=h.query(".sizer",F);G=h.query(".titlePane",F)[0];this._title=h.query(".title",G)[0];this._prevFeatureButton=h.query(".prev",G)[0];this._nextFeatureButton=h.query(".next",G)[0];this._maxButton=h.query(".maximize",G)[0];this._spinner=h.query(".spinner",G)[0];this._contentPane=h.query(".contentPane",F)[0];this._positioner=h.query(".esriPopupWrapper",F)[0];this._pointer=h.query(".pointer",F)[0];this._outerPointer=h.query(".outerPointer",F)[0];this._actionList=h.query(".actionsPane .actionList",
F)[0];this._contentUpdateHandles={};this._eventConnections=[a.connect(h.query(".close",G)[0],"onclick",this,this.hide),a.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),a.connect(this._nextFeatureButton,"onclick",this,this.selectNext),a.connect(this._maxButton,"onclick",this,this._toggleSize),a.connect(h.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),a.connect(this,"onClearFeatures",this,this._featuresCleared),a.connect(this,"onSelectionChange",this,this._featureSelected),
a.connect(this,"onDfdComplete",this,this._updateUI)];e("esri-touch")&&(F=z.setScrollable(this._contentPane),this._eventConnections.push(F[0],F[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(F){this.inherited(arguments);k.place(this.domNode,F.root);this.highlight&&this.enableHighlight(F);this._maxHeight=n.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(F){this.popupWindow&&
(A.isDefined(F)&&""!==F||(F="\x26nbsp;"),this.destroyDijits(this._title),this.place(F,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(F){this.popupWindow&&(A.isDefined(F)&&""!==F||(F="\x26nbsp;"),this._destroyContent(),this.place(F,this._contentPane),this.isShowing&&(this._startupContent(),this.reposition()))},show:function(F,G){if(this.popupWindow)if(this._delayHide=!1,F){var H=this.map;F.spatialReference?(this.location=F,F=H.toScreen(F)):this.location=
H.toMap(F);var J=H._getFrameWidth();if(-1!==J&&(F.x%=J,0>F.x&&(F.x+=J),H.width>J))for(H=(H.width-J)/2;F.x<H;)F.x+=J;this._maximized?this.restore():this._setPosition(F);G&&G.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this._startupContent(),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),
this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(F,G){this.popupWindow&&(this._sizers.style({width:F+"px"}),n.set(this._contentPane,"maxHeight",G+"px"),this._maxHeight=G,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this.location))},addActions:function(F){return q.map(F,function(G){var H=k.create("a",{href:"javascript:void(0);",className:"action "+
G.className,title:G.title,innerHTML:G.title},this._actionList);a.connect(H,"onclick",G.callback);return{action:G,node:H}},this)},removeActions:function(F){q.forEach(F,function(G){k.destroy(G.node)})},getCurrentAnchor:function(){return this._anchor},maximize:function(){var F=this.map;if(F&&!this._maximized&&this.popupWindow){this._maximized=!0;var G=this._maxButton;c.remove(G,"maximize");c.add(G,"restore");d.set(G,"title",this._nls.NLS_restore);G=this.marginLeft;var H=this.marginTop,J=F.width-2*G;
F=F.height-2*H;n.set(this.domNode,{left:this._isRTL?null:G+"px",right:this._isRTL?G+"px":null,top:H+"px",bottom:null});n.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=n.get(this._sizers[0],"width");this._savedHeight=n.get(this._contentPane,"maxHeight");this._sizers.style({width:J+"px"});n.set(this._contentPane,{maxHeight:F-65+"px",height:F-65+"px"});this._showPointer("");this._unfollowMap();c.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&
this._maximized&&this.popupWindow){this._maximized=!1;var F=this._maxButton;c.remove(F,"restore");c.add(F,"maximize");d.set(F,"title",this._nls.NLS_maximize);n.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();c.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);
this._destroyContent();q.forEach(this._eventConnections,a.disconnect);k.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(F,G){this._transientAnchor=
G&&G.anchor;this.inherited(arguments);this._updateUI()},clearFeatures:function(F){F||(this._transientAnchor=null);this.inherited(arguments)},postscript:null,_highlightSetter:function(F){var G=this.highlight,H=this.map;this.highlight=F;if(H&&F!==G)if(F){if(this.enableHighlight(H),F=this.features&&this.features[this.selectedIndex])this.updateHighlight(H,F),this.showHighlight()}else this.disableHighlight(H)},_pagingControlsSetter:function(F){var G=this.pagingControls,H=this.map;this.pagingControls=F;
H&&F!==G&&this._updatePagingControls()},_pagingInfoSetter:function(F){var G=this.pagingInfo,H=this.map;this.pagingInfo=F;H&&F!==G&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(F){var G=this.popupWindow,H=this.map;this.popupWindow=F;H&&F!==G&&(F?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(F){var G=this.anchor;this.anchor=F;this.map&&F!==G&&this.reposition()},_startupContent:function(){var F=this._contentPane;
this.startupDijits(F);q.forEach(this._getPopupRendererDijits(F),function(G){if(!this._contentUpdateHandles[G.id]){var H=G.on("content-update",y.hitch(this,function(){this.reposition()}));this._contentUpdateHandles[G.id]=H}},this)},_destroyContent:function(){var F=this._contentPane;q.forEach(this._getPopupRendererDijits(F),function(G){var H=this._contentUpdateHandles[G.id];H&&(H.remove(),delete this._contentUpdateHandles[G.id])},this);this.destroyDijits(F)},_getPopupRendererDijits:function(F){F=this.getDijits(F);
return F=q.filter(F,function(G){return G&&G.set&&/_PopupRenderer/.test(G.declaredClass)})},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var F=this.selectedIndex;if(0<=F){var G=this.features[F].getContent();if(!this.titleInBody&&G&&y.isString(G.id)){var H=u.byId(G.id);H&&H.set&&/_PopupRenderer/.test(H.declaredClass)&&
H.set("showTitle",!1)}this.setContent(G);this.updateHighlight(this.map,this.features[F]);this.showHighlight()}},_toggleVisibility:function(F){this._setVisibility(F);this.isShowing=F},_setVisibility:function(F){c.toggle(this.domNode,"esriPopupVisible",F);c.toggle(this.domNode,"esriPopupHidden",!F)},_waitAndHide:function(F){var G=this;this._delayHide=!0;setTimeout(function(){G._delayHide&&(G._delayHide=!1,G.hide())},F)},_followMap:function(){this._unfollowMap();var F=this.map;this._handles=[a.connect(F,
"onPanStart",this,this._onPanStart),a.connect(F,"onPan",this,this._onPan),a.connect(F,"onZoomStart",this,this._onZoomStart),a.connect(F,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var F=this._handles;F&&(q.forEach(F,a.disconnect),this._handles=null)},_onPanStart:function(){var F=this.domNode.style;this._panOrigin={left:F.left,top:F.top,right:F.right,bottom:F.bottom}},_onPan:function(F,G){var H=this._panOrigin;F=G.x;G=G.y;var J=H.left,I=H.top,K=H.right;H=H.bottom;J&&(J=parseFloat(J)+
F+"px");I&&(I=parseFloat(I)+G+"px");K&&(K=parseFloat(K)-F+"px");H&&(H=parseFloat(H)-G+"px");n.set(this.domNode,{left:J,top:I,right:K,bottom:H})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(F,G,H){H&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_getTargetAnchor:function(){return this._transientAnchor||this.anchor},_setPosition:function(F){var G=
F.x,H=F.y;F=this.offsetX||0;var J=this.offsetY||0,I=0,K=0,R=this.map,W=R.position.x,P=R.position.y,S=R.width,L=R.height;R="Left";var aa="bottom",ba="right",O="top",V=t.getContentBox(this._positioner),X=V.w/2,N=V.h/2,Y=n.get(this._sizers[0],"height")+this._maxHeight+n.get(this._sizers[2],"height"),ia=Y/2,oa=0,sa=0,Ba=S,Da=L,pa=G,ra=H,ya=this._getTargetAnchor().toLowerCase();if("auto"===ya){if(ya=g.getBox)ya=ya(),oa=Math.max(ya.l,W),Ba=Math.min(ya.l+ya.w,W+S),sa=Math.max(ya.t,P),Da=Math.min(ya.t+ya.h,
P+L),pa+=W,ra+=P;W=ra-sa>=Y;P=Da-ra>=Y;S=Ba-pa>=V.w;V=pa-oa>=V.w;ra-sa>ia&&Da-ra>=ia&&(S?(aa="",R="Left",O="",ba="right"):V&&(aa="",R="Right",O="",ba="left"));R&&aa&&pa-oa>X&&Ba-pa>=X&&(W?(R="",aa="bottom",ba="",O="top"):P&&(R="",aa="top",ba="",O="bottom"));R&&aa&&(S&&W?(R="Left",aa="bottom",ba="right",O="top"):S&&P?(R="Left",aa="top",ba="right",O="bottom"):V&&P?(R="Right",aa="top",ba="left",O="bottom"):V&&W&&(R="Right",aa="bottom",ba="left",O="top"));this._anchor=O&&ba?O+"-"+ba:O||ba}else aa=R="",
-1!==ya.indexOf("top")?aa="bottom":-1!==ya.indexOf("bottom")&&(aa="top"),-1!==ya.indexOf("left")?R="Right":-1!==ya.indexOf("right")&&(R="Left"),this._anchor=this._getTargetAnchor();ba=aa+R;switch(ba){case "top":case "bottom":K=14;break;case "Left":case "Right":I=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":K=14,I=-16}n.set(this.domNode,{left:G+"px",top:H+"px",right:null,bottom:null});G={left:null,right:null,top:null,bottom:null};R?G[R.toLowerCase()]=I+F+"px":G.left=
-X+"px";aa?G[aa]=K+J+"px":G.top=-N+"px";n.set(this._positioner,G);this._showPointer(ba)},_showPointer:function(F){c.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));c.remove(this._outerPointer,["right","left","hidden"]);"Right"===F||"Left"===F?(F=F.toLowerCase(),c.add(this._outerPointer,F)):c.add(this._pointer,F)},_setPagerCallbacks:function(F,G,H){if(this.pagingControls&&(F!==this||this._pagerScope&&this._pagerScope!==this)&&F!==this._pagerScope){this._pagerScope=
F;F===this&&(G=this.selectPrevious,H=this.selectNext);var J=this._eventConnections;a.disconnect(J[1]);a.disconnect(J[2]);G&&(J[1]=a.connect(this._prevFeatureButton,"onclick",F,G));H&&(J[2]=a.connect(this._nextFeatureButton,"onclick",F,H))}},_getLocation:function(F){var G=F&&F.geometry;if(G)switch(G.type){case "point":var H=G;if(F.isAggregate()){F=F.getChildGraphics();var J=F[0];F=(J=J.geometry&&J.geometry.spatialReference)&&new D({points:q.map(F,function(I){I=I.geometry;return[I.x,I.y]}),spatialReference:J.toJson()});
J=r.getDenormalizedExtent(F)}break;case "multipoint":H=G.getPoint(0);J=r.getDenormalizedExtent(G);break;case "polyline":case "polygon":H=G.getPoint(0,0),J=r.getDenormalizedExtent(G)}return[H,J]},_zoomToFeature:function(F){F.preventDefault();var G=this.features,H=this.selectedIndex;F=this.map;if(G)if(H=this._getLocation(G[H]),G=H[0],H=H[1],G||(G=this.location),H&&H.intersects(this.location)||(this.location=G),H&&H.getWidth()&&H.getHeight())F.setExtent(H,!0);else{var J=F.getNumLevels();H=F.getLevel();
var I=F.getMaxZoom(),K=this.zoomFactor||1;0<J?H!==I&&(J=H+K,J>I&&(J=I),F.navigationManager._wheelZoom({value:J-H,mapPoint:G},!0)):F.navigationManager._wheelZoom({value:1/Math.pow(2,K)*2,mapPoint:G},!0)}},_updatePagingControls:function(){var F=this._prevFeatureButton,G=this._nextFeatureButton,H=this.selectedIndex,J=this.features?this.features.length:0;this.pagingControls&&1<J?(0===H?c.add(F,"hidden"):c.remove(F,"hidden"),H===J-1?c.add(G,"hidden"):c.remove(G,"hidden")):(c.add(F,"hidden"),c.add(G,"hidden"))},
_updatePagingInfo:function(){var F=this.features?this.features.length:0,G=this._nls,H="\x26nbsp;";this.pagingInfo&&1<F&&G.NLS_pagingInfo&&(H=A.substitute({index:this.selectedIndex+1,total:F},G.NLS_pagingInfo));F&&(G=this.getSelectedFeature(),F=G.getInfoTemplate(),G=G.getTitle(),F&&!/esri\.InfoTemplate/.test(F.declaredClass)&&this.titleInBody||!G||(H=G+("\x26nbsp;"===H?"":" "+H)));this.setTitle(H)},_updateUI:function(){if(this.popupWindow){var F=this.features,G=this.deferreds,H=F?F.length:0,J=this._spinner,
I=this._actionList,K=this._nls;this._updatePagingControls();this._updatePagingInfo();H?c.remove(I,"hidden"):c.add(I,"hidden");G&&G.length?F?c.remove(J,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+K.NLS_searching+"...\x3c/div\x3e"):c.add(J,"hidden");H||G&&G.length?this._delayHide=!1:(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+K.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay))}}});y.setObject("dijit.Popup",b,x);return b})},
"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),function(b,y,q,a,h,e,g,f,m,l,d){b=b(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var c=y.hitch;this.__set_title=c(this,this.__set_title);this.__err_title=c(this,this.__err_title);this.__set_content=c(this,this.__set_content);this.__err_content=c(this,this.__err_content)},
setMap:function(c){this.map=c},unsetMap:function(c){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(c,k){l.isDefined(c)?y.isObject(c)?e.place(c,k,"only"):k.innerHTML=c:k.innerHTML=""},startupDijits:function(c){this._processDijits(c)},destroyDijits:function(c){this._processDijits(c,!0)},getDijits:function(c){var k=[];c&&1===c.children.length&&(c=c.children[0])&&(k=(k=f.byNode(c))?
[k]:f.findWidgets(c));return k},_processDijits:function(c,k){c=this.getDijits(c);q.forEach(c,function(t){if(k){if(t._started&&!t._destroyed)try{t.destroyRecursive?t.destroyRecursive():t.destroy&&t.destroy()}catch(n){}}else if(!t._started)try{t.startup()}catch(n){}})},__registerMapListeners:function(){this.__unregisterMapListeners();var c=this.map;this.__handles=[a.connect(c,"onPan",this,this.__onMapPan),a.connect(c,"onZoomStart",this,this.__onMapZmStart),a.connect(c,"onExtentChange",this,this.__onMapExtChg)]},
__unregisterMapListeners:function(){var c=this.__handles;c&&(q.forEach(c,a.disconnect,a),this.__handles=null)},__onMapPan:function(c,k){this.move(k,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new d(this.coords));this.hide(null,!0)},__onMapExtChg:function(c,k,t){c=this.map;var n=this.mapCoords;n?this.show(n,null,!0):(k=t?c.toScreen(this.__mcoords):this.coords.offset(k&&k.x||0,k&&k.y||0),this.show(k,null,!0))},__setValue:function(c,k){this[c].innerHTML="";var t="_dfd"+
c,n=this[t];n&&-1===n.fired&&(n.cancel(),this[t]=null);l.isDefined(k)&&(k instanceof h?(this[t]=k,k.addCallbacks(this["__set"+c],this["__err"+c])):this.__render(c,k))},__set_title:function(c){this._dfd_title=null;this.__render("_title",c)},__err_title:function(c){this._dfd_title=null},__set_content:function(c){this._dfd_content=null;this.__render("_content",c)},__err_content:function(c){this._dfd_content=null},__render:function(c,k){var t=this[c];this.place(k,t);this.isShowing&&(this.startupDijits(t),
"_title"===c&&this._adjustContentArea&&this._adjustContentArea())}});return m.InfoWindowBase=b})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented ./PopupInfo".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A){function z(E){return"sizeInfo"===E.type}b=b(A,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_mapLevelChangeHandle:null,_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",y.hitch(this,this._resetUpdateEndListeners));
this.on("dfd-complete",y.hitch(this,this._processFeatures));this.on("set-features",y.hitch(this,this._processFeatures));this.on("selection-change",y.hitch(this,this._checkFeatureResolution))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();this._untrackMapLevelChange()},setFeatures:function(E){if(E&&E.length){this.clearFeatures(!0);var w,D;E[0]instanceof h?D=E:w=E;w?this._updateFeatures(null,w):(this.deferreds=D,D=D.slice(0),q.forEach(D,function(r){r.addBoth(y.hitch(this,
this._updateFeatures,r))},this))}},clearFeatures:function(E){this.features=this.deferreds=this._marked=null;this.count=0;var w=this.selectedIndex;this.selectedIndex=-1;if(-1<w)this.onSelectionChange();this.onClearFeatures({isIntermediate:!!E})},getSelectedFeature:function(){var E=this.features;if(E)return E[this.selectedIndex]},select:function(E){0>E||E>=this.count||(this.selectedIndex=E,this.onSelectionChange())},enableHighlight:function(E){this._highlighted=E.graphics.add(new f(new m(0,0,E.spatialReference)));
this._highlighted.attr("data-popup-highlight","");this._highlighted.hide();this._trackMapLevelChange(E);this.markerSymbol||(E=this.markerSymbol=new k,E.setStyle(k.STYLE_TARGET),E._setDim(16,16,0),E.setOutline(new n(t.STYLE_SOLID,new a([0,255,255]),2,n.CAP_ROUND,n.JOIN_ROUND)),E.setColor(new a([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new t(t.STYLE_SOLID,new a([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new u(u.STYLE_NULL,new t(t.STYLE_SOLID,new a([0,255,255]),2),new a([0,0,0,0])));this.clusterFillSymbol||
(this.clusterFillSymbol=new u(u.STYLE_SOLID,new t(t.STYLE_SOLID,new a([0,255,255]),1.33),null))},disableHighlight:function(E){var w=this._highlighted;w&&(w.hide(),E.graphics.remove(w),delete this._highlighted);this._untrackMapLevelChange();this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var E=this.features&&this.features[this.selectedIndex];this._highlighted&&E&&E.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},
updateHighlight:function(E,w){var D=w.geometry,r=this._highlighted;if(D&&r){r.hide();!r._graphicsLayer&&E&&E.graphics.add(r);r.setGeometry(l.fromJson(D.toJson()));switch(D.type){case "point":case "multipoint":var v=w.getLayer(),B=w.symbol||v&&v._getSymbol(w);if(v&&B){var C;D=B.xoffset||0;var F=B.yoffset||0,G=B.angle||0;switch(B.type){case "simplemarkersymbol":var H=C=B.size||0;break;case "picturemarkersymbol":H=B.width||0;C=B.height||0;break;case "textsymbol":H=C=B.font&&B.font.size||0}var J=w.symbol?
null:v._getRenderer(w);(v=this._getSizeInfo(J))?E=w=J.getSize(w,{sizeInfo:v,shape:B.style,resolution:E&&E.getResolutionInMeters&&E.getResolutionInMeters()}):null!=w.size?E=w=w.size:(E=H,w=C);J=this.markerSymbol;E&&w&&(D&&(D=D/H*E),F&&(F=F/C*w),J._setDim(E+4,w+4,0));J.setOffset(D,F);J.setAngle(G)}break;case "polyline":J=this.lineSymbol;break;case "polygon":J=this.fillSymbol}r.setSymbol(J)}else r&&r.hide()},showClosestFirst:function(E){var w=this.features;if(w&&w.length){if(1<w.length){var D,r=Infinity,
v=-1,B,C=d.getLength,F=E.spatialReference;E=E.normalize();for(D=w.length-1;0<=D;D--)if(B=w[D].geometry){var G=B.spatialReference;var H=0;try{var J="point"===B.type?B:B.getExtent().getCenter();J=J.normalize();F&&G&&!F.equals(G)&&F._canProject(G)&&(J=F.isWebMercator()?c.geographicToWebMercator(J):c.webMercatorToGeographic(J));H=C(E,J)}catch(I){}0<H&&H<r&&(r=H,v=D)}0<v&&(w.splice(0,0,w.splice(v,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=E)},_trackMapLevelChange:function(E){this._untrackMapLevelChange();
this._mapLevelChangeHandle=E.on("extent-change",y.hitch(this,function(w){w.levelChange&&this._checkFeatureResolution()}))},_untrackMapLevelChange:function(){this._mapLevelChangeHandle&&(this._mapLevelChangeHandle.remove(),this._mapLevelChangeHandle=null)},_unbind:function(E){E=q.indexOf(this.deferreds,E);if(-1!==E)return this.deferreds.splice(E,1),this.deferreds.length?1:(this.deferreds=null,2)},_fireComplete:function(E){var w=this._marked;w&&(this._marked=null,this.showClosestFirst(w));this.onDfdComplete(E)},
_updateFeatures:function(E,w){if(E){if(this.deferreds&&(E=this._unbind(E)))if(w&&w instanceof Error){if(this._fireComplete(w),2===E)this.onSetFeatures()}else if(w&&w.length)if(this.features){if(w=q.filter(w,function(D){return-1===q.indexOf(this.features,D)},this),this.features=this.features.concat(w),this.count=this.features.length,this._fireComplete(),2===E)this.onSetFeatures()}else{this.features=w;this.count=w.length;this.selectedIndex=0;this._fireComplete();if(2===E)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),
2===E)this.onSetFeatures()}else this.features=w,this.count=w.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(E){return E?E.sizeInfo||q.filter(E.visualVariables,z)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};q.forEach(this._updateEndHandles,function(E){E.remove()});this._updateEndHandles=[]},_processFeatures:function(){q.forEach(this.features,function(E){(E=E.getLayer())&&!this._featureLayers[E.id]&&(1===E.currentMode||0===E.currentMode&&
6===E.mode)&&E.objectIdField&&E.hasXYFootprint&&E.queryFeatures&&(this._featureLayers[E.id]=E,E=E.on("update-end",y.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(E))},this)},_fLyrUpdateEndHandler:function(E){if(!E.error){var w=this,D=E.target,r=D.getSelectedFeatures(),v=0===D.currentMode&&6===D.mode,B={},C=[];q.forEach(this.features,function(F){if(F.getLayer()===D){var G=F.attributes[D.objectIdField];B[G]=F;C.push(G)}});C.length&&(E=new x,E.objectIds=C,D.queryFeatures(E,function(F){q.forEach(F.features,
function(G){var H=B[G.attributes[D.objectIdField]],J=!1;H.geometry!==G.geometry||D.hasWebGLSurface()?(H.setGeometry(G.geometry),J=!0):v&&r&&-1!==q.indexOf(r,G)&&(J=!0);J&&this._highlighted&&H===this.getSelectedFeature()&&this._highlighted.setGeometry(G.geometry)},w)}))}},_checkFeatureResolution:function(){var E=this.getSelectedFeature(),w=this.map;if(E&&w){var D=E.getLayer();if(D){var r=E.getResolution();2===D.currentMode&&E.geometry&&r&&r>w.getResolution()&&(w=w.getResolutionForPopup(),(D=this._refetchFeature(E,
w,D))&&D.then(y.hitch(this,this._updateFeatureResolution,E,w)))}}},_refetchFeature:function(E,w,D){if(E=this._createQueryForCustomResolution(E,w,D))return D.queryFeatures(E).then(function(r){return r&&r.features[0]})},_createQueryForCustomResolution:function(E,w,D){D=D.objectIdField;var r=E.attributes;r=r&&D&&r[D];if(null==r)return null;var v=new x;v.objectIds=[r];v.maxAllowableOffset=w;v.outFields=[D];v.outSpatialReference=E.geometry.spatialReference;return v},_updateFeatureResolution:function(E,
w,D){E.getResolution()!==w&&(E.setResolution(w),E.setGeometry(D.geometry),this._highlighted&&E===this.getSelectedFeature()&&this._highlighted.setGeometry(E.geometry))}});return g.PopupBase=b})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(b){return{add:function(y,q){y.popupManager||(y.popupManager=new b(q),y.popupManager.setMap(y))},remove:function(y){var q=y.popupManager;q&&(q.unsetMap(),y.popupManager=void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n){var u;f=f(t,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(x){this._mapClickHandler=l.hitch(this,this._mapClickHandler)},setMap:function(x){if(this.map)if(x!==this.map)this.unsetMap();else return;this.map=x;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(x){var A;
if(x&&(A=x.getLayer())&&(x=A.id,this._featureLayersCache[x])){var z=x.lastIndexOf("_");-1<z&&(x=x.substring(0,z),A=this.map.getLayer(x))}return A},_enabledSetter:function(x){this.enabled=x;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(x){var A=this.map.infoWindow,z=x.graphic;A&&this.map.loaded&&
(A.clearFeatures&&A.setFeatures?this._showPopup(x):z&&z.getInfoTemplate()&&this._showInfoWindow(z,x.mapPoint))},_showPopup:function(x){var A=this.map,z=A.infoWindow,E=this,w=[],D=[A.graphics].concat(g.map(A.graphicsLayerIds,A.getLayer,A));g.forEach(D,function(B){var C=B.getFeatureReduction&&B.getFeatureReduction();B&&B.loaded&&B.infoTemplate&&!B.suspended&&(!C||!E._isReductionEnabled(B)||C.infoTemplate&&!C.disablePopup)&&w.push(B)});var r=[];g.forEach(A.layerIds,function(B){(B=A.getLayer(B))&&B.loaded&&
!B.suspended&&(E._isImageServiceLayer(B)&&B.infoTemplate?w.push(B):"esri.layers.WMSLayer"===B.declaredClass&&B.getFeatureInfoURL?w.push(B):"esri.layers.ArcGISDynamicMapServiceLayer"!==B.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==B.declaredClass||!B.infoTemplates||r.push(B))});var v=A.getResolutionForPopup();this._getSubLayerFeatureLayers(r,v).then(function(B){w=w.concat(B);B=x.graphic&&x.graphic.getParentGraphic()||x.graphic;var C=null;B&&B.getInfoTemplate()&&!E._isImageServiceLayer(B.getLayer())&&
(C=B);if(w.length||C){var F=E._calculateClickTolerance(w),G=x.screenPoint;B=A.toMap(new y(G.x-F,G.y+F));F=A.toMap(new y(G.x+F,G.y-F));var H=new b(B.x,B.y,F.x,F.y,A.spatialReference);if(H=H.intersects(A.extent)){var J=new h,I=!!C,K=!0;B=g.map(w,function(R){J.timeExtent=R.useMapTime?A.timeExtent:null;var W=E._isReductionEnabled(R);R=W?R.getFeatureReductionLayer():R;var P=E._featureLayersCache[R.id];if(E._isImageServiceLayer(R)){J.geometry=x.mapPoint;K=!1;var S={rasterAttributeTableFieldPrefix:"Raster.",
returnDomainValues:!0};E._isTiledImageServiceLayer(R)?S=R.fetchPopupFromTiles(J):(S=R.queryVisibleRasters(J,S),S.addCallback(function(){var aa=R.getVisibleRasters();I=I||0<aa.length;return aa}))}else if("esri.layers.WMSLayer"===R.declaredClass){S=new m;var L=R._getPopupGraphic(A,x.screenPoint);L?(S.resolve([L]),I=!0):S.resolve([])}else P||"function"===typeof R.queryFeatures&&(0===R.currentMode||1===R.currentMode)?(J.geometry=H,S=R.queryFeatures(J),S.addCallback(function(aa){var ba=[];g.forEach(aa.features,
function(O){O.visible&&(ba.push(O),P&&O.setResolution(v))});I=I||0<ba.length;return ba})):(S=new m,L=g.filter(R.graphics,function(aa){return aa&&aa.visible&&H.intersects(aa.geometry)}),W&&E._isParentLayer(R,C)&&(W=E._findGraphicById(L,C,"cluster_id"))&&(C=W),I=I||0<L.length,S.resolve(L));return S});C&&(F=new m,F.resolve([C]),B.unshift(F));g.some(B,function(R){return!R.isFulfilled()})||I?(z.setFeatures(B),z.show(x.mapPoint,{closestFirst:K})):(z.hide(),z.clearFeatures())}}})},_getSubLayerFeatureLayers:function(x,
A,z){A=A||null;var E=z||new m,w=[];z=x.length;var D=this.map.getScale(),r=!1,v=this,B=0;a:for(;B<z;B++){var C=x[B],F=C.dynamicLayerInfos||C.layerInfos;if(F){var G=null;C._params&&(C._params.layers||C._params.dynamicLayers)&&(G=C.visibleLayers);G=a._getVisibleLayers(F,G);for(var H=a._getLayersForScale(D,F),J=F.length,I=0;I<J;I++){var K=F[I],R=K.id,W=C.infoTemplates[R];if(!K.subLayerIds&&W&&W.infoTemplate&&-1<g.indexOf(G,R)&&-1<g.indexOf(H,R)){if(!u){r=!0;break a}var P=C.id+"_"+R,S=this._featureLayersCache[P];
S&&S.loadError||(S||((S=W.layerUrl)||(S=K.source?this._getLayerUrl(C.url,"/dynamicLayer"):this._getLayerUrl(C.url,R)),S=new u(S,{parentLayer:C,id:P,drawMode:!1,mode:u.MODE_SELECTION,outFields:this._getOutFields(W.infoTemplate),resourceInfo:W.resourceInfo,source:K.source}),this._featureLayersCache[P]=S),S.setDefinitionExpression(C.layerDefinitions&&C.layerDefinitions[R]),S.setGDBVersion(C.gdbVersion),S.setInfoTemplate(W.infoTemplate),S.setMaxAllowableOffset(A),S.setUseMapTime(!!C.useMapTime),C.layerDrawingOptions&&
C.layerDrawingOptions[R]&&C.layerDrawingOptions[R].renderer&&S.setRenderer(C.layerDrawingOptions[R].renderer),w.push(S))}}}}if(r){var L=new m;n(["./layers/FeatureLayer"],function(ba){u=ba;L.resolve()});L.then(function(){v._getSubLayerFeatureLayers(x,A,E)})}else{var aa=[];g.forEach(w,function(ba){if(!ba.loaded){var O=new m;c.once(ba,"load, error",function(){O.resolve()});aa.push(O.promise)}});aa.length?k(aa).then(function(){w=g.filter(w,function(ba){return!ba.loadError&&ba.isVisibleAtScale(D)});E.resolve(w)}):
(w=g.filter(w,function(ba){return ba.isVisibleAtScale(D)}),E.resolve(w))}return E.promise},_getLayerUrl:function(x,A){var z=x.indexOf("?");return-1===z?x+"/"+A:x.substring(0,z)+"/"+A+x.substring(z)},_getOutFields:function(x){var A=x.info&&x.info.fieldInfos;if(A&&A.length&&"esri.dijit.PopupTemplate"===x.declaredClass){var z=[];g.forEach(A,function(E){var w=E.fieldName&&E.fieldName.toLowerCase();w&&"shape"!==w&&0!==w.indexOf("relationships/")&&z.push(E.fieldName)})}else z=["*"];return z},_calculateClickTolerance:function(x){var A=
d("esri-touch")?9:6,z,E;g.forEach(x,function(w){if(z=w.renderer)"esri.renderer.SimpleRenderer"===z.declaredClass?((E=z.symbol)&&E.xoffset&&(A=Math.max(A,Math.abs(E.xoffset))),E&&E.yoffset&&(A=Math.max(A,Math.abs(E.yoffset)))):"esri.renderer.UniqueValueRenderer"!==z.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==z.declaredClass||g.forEach(z.infos,function(D){(E=D.symbol)&&E.xoffset&&(A=Math.max(A,Math.abs(E.xoffset)));E&&E.yoffset&&(A=Math.max(A,Math.abs(E.yoffset)))})});return A},_showInfoWindow:function(x,
A){var z=this.map.infoWindow,E=x.geometry;A=E&&"point"===E.type?E:A;E=x.getContent();z.setTitle(x.getTitle());E&&l.isString(E.id)&&(x=e.byId(E.id))&&x.set&&/_PopupRenderer/.test(x.declaredClass)&&x.set("showTitle",!1);z.setContent(E);z.show(A)},_findGraphicById:function(x,A,z){var E,w=(A=A.attributes)&&A[z];g.some(x,function(D){var r=D.attributes;r&&r[z]===w&&(E=D);return!!E});return E},_isParentLayer:function(x,A){A=A&&A.getLayer();return x&&A===x},_isReductionEnabled:function(x){return x&&x.isFeatureReductionActive&&
x.isFeatureReductionActive()},_isImageServiceLayer:function(x){return"esri.layers.ArcGISImageServiceLayer"===x.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===x.declaredClass||"esri.layers.RasterXLayer"===x.declaredClass},_isTiledImageServiceLayer:function(x){return"esri.layers.RasterXLayer"===x.declaredClass}});return q.PopupManager=f})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r){var v=a.connect,B=a.disconnect,C=t("chrome"),F=t("safari"),G=[g.NUMPAD_PLUS,61,187,g.NUMPAD_MINUS,173,189,g.UP_ARROW,g.NUMPAD_8,g.RIGHT_ARROW,g.NUMPAD_6,g.DOWN_ARROW,g.NUMPAD_2,g.LEFT_ARROW,g.NUMPAD_4,g.PAGE_UP,g.NUMPAD_9,g.PAGE_DOWN,g.NUMPAD_3,g.END,g.NUMPAD_1,g.HOME,g.NUMPAD_7];b=b(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(H,J){this.map=H;y.mixin(this,J);J=H.__container;t("esri-pointer")?(this.pointerEvents=
new c(J,{map:H}),this.eventModel="pointer"):t("esri-touch")?(t("ios")||(this.mouseEvents=new l(J,{map:H})),this.touchEvents=new d(J,{map:H,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new l(J,{map:H}),this.eventModel="mouse");this._zoomRect=new x(null,new r(k.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=y.hitch(this,this._adjustPinch);this._adjustPinchEnd=y.hitch(this,this._adjustPinchEnd)},_panInit:function(H){var J=this.mouseEvents;e.isLeft(H)&&
this.map.isPan&&!H.shiftKey&&(this._dragOrigin=new z(0,0),y.mixin(this._dragOrigin,H.screenPoint),B(this._panStartHandle),B(this._panHandle),B(this._panEndHandle),this._panStartHandle=v(J,"onMouseDragStart",this,this._panStart),this._panHandle=v(J,"onMouseDrag",this,this._pan),this._panEndHandle=v(J,"onMouseUp",this,this._panEnd),C||F)&&(H.preventDefault(),f.curNode&&f.curNode.blur())},_panStart:function(H){this.map.setCursor("move");this.map.__panStart(H.screenPoint.x,H.screenPoint.y)},_pan:function(H){this.map.__pan(H.screenPoint.x-
this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)},_panEnd:function(H){B(this._panStartHandle);B(this._panHandle);B(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var J=this.map;J.__panning&&(J.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y),J.resetMapCursor())},_zoomInit:function(H){var J=this.map,I=this.pointerEvents||this.mouseEvents;(e.isLeft(H)||H.pointerType)&&J.isRubberBandZoom&&H.shiftKey&&(J.setCursor("crosshair"),this._dragOrigin=
y.mixin({},H.screenPoint),this._zoomDir=H.ctrlKey||H.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=v(I,"onSwipeMove",this,this._zoom),this._zoomEndHandle=v(I,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=v(I,"onMouseDrag",this,this._zoom),this._zoomEndHandle=v(I,"onMouseUp",this,this._zoomEnd)),C&&H.preventDefault())},_zoom:function(H){var J=this.map,I=this._normalizeRect(H).offset(J.__visibleRect.x,J.__visibleRect.y);H=J.graphics;var K=this._zoomRect;K.geometry||J.setCursor("crosshair");
K.geometry&&H.remove(K,!0);var R=J.toMap(new z(I.x,I.y));I=J.toMap(new z(I.x+I.width,I.y+I.height));I=new w(R.x,R.y,I.x-R.x,R.y-I.y,J.spatialReference);I._originOnly=!0;K.setGeometry(I);H.add(K,!0)},_zoomEnd:function(H){var J=this._zoomRect,I=this.map,K=I.extent,R=I.spatialReference;B(this._zoomHandle);B(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(I._canZoom(this._zoomDir)&&J.getDojoShape()){I.graphics.remove(J);J.geometry=null;H=this._normalizeRect(H);H.x+=I.__visibleRect.x;
H.y+=I.__visibleRect.y;if(-1===this._zoomDir){var W=K.getWidth();H=(W*I.width/H.width-W)/2;R=new E(K.xmin-H,K.ymin-H,K.xmax+H,K.ymax+H,R)}else K=I.toMap({x:H.x,y:H.y+H.height}),H=I.toMap({x:H.x+H.width,y:H.y}),R=new E(K.x,K.y,H.x,H.y,R);I._extentUtil(null,null,R)}J.getDojoShape()&&I.graphics.remove(J,!0);this._zoomDir=0;I.resetMapCursor()},_wheelZoom:function(H,J){var I=this.map;if(!J){if(I.smartNavigation&&!H.shiftKey&&!I._isPanningOrZooming()){I.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(H);return}J=H.timeStamp;if(!n.isDefined(J)||0>=J)J=(new Date).getTime();if(100>(this._mwts?J-this._mwts:J))return;this._mwts=J}I._canZoom(H.value)&&I._extentUtil({numLevels:H.value,mapAnchor:H.mapPoint,screenAnchor:H.screenPoint})},_wheelPan:function(H){var J=this.map;if(H.shiftKey&&!J._isPanningOrZooming())this._setScrollWheelPan(!1),J.enableScrollWheelZoom(),this._wheelZoom(H);else{var I=0,K=0;t("ff")?H.axis===H.HORIZONTAL_AXIS?I=-H.detail:K=-H.detail:(I=H.wheelDeltaX,K=H.wheelDeltaY);
J.translate(I,K)}},_setScrollWheelPan:function(H){this.map.isScrollWheelPan=H;this.mouseEvents&&this.mouseEvents.enableMouseWheel(H);B(this._mwMacHandle);this._mwMacHandle=null;H&&(this._mwMacHandle=v(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(H.mapPoint)},_recenterZoom:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&(H.value=H.ctrlKey||H.metaKey?-1:1,this._wheelZoom(H,!0))},
_dblClickZoom:function(H){this.map._isPanningOrZooming()||(H.value=1,this._wheelZoom(H,!0))},_twoFingerTap:function(H){this.map._isPanningOrZooming()||(H.value=-1,this._wheelZoom(H,!0))},_keyDown:function(H){var J=H.keyCode,I=this.map;if(-1!==q.indexOf(G,J)){if(J===g.NUMPAD_PLUS||61===J||187===J)I._extentUtil({numLevels:1});else if(J===g.NUMPAD_MINUS||173===J||189===J)I._extentUtil({numLevels:-1});else{I.__panning||I.__panStart(0,0);switch(J){case g.UP_ARROW:case g.NUMPAD_8:this._keyDy+=10;break;
case g.RIGHT_ARROW:case g.NUMPAD_6:this._keyDx-=10;break;case g.DOWN_ARROW:case g.NUMPAD_2:this._keyDy-=10;break;case g.LEFT_ARROW:case g.NUMPAD_4:this._keyDx+=10;break;case g.PAGE_UP:case g.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case g.PAGE_DOWN:case g.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case g.END:case g.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case g.HOME:case g.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}I.__pan(this._keyDx,this._keyDy)}h.stop(H)}},_keyEnd:function(H){var J=
this.map;J.__panning&&H.keyCode!==g.SHIFT&&(J.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(H){var J=this.map;J=J._zoomAnim||J._panAnim;if(H.shiftKey)return!1;J&&J._active&&(J.stop(),J._fire("onEnd",[J.node]));this._dragOrigin=new z(0,0);y.mixin(this._dragOrigin,H.screenPoint);B(this._swipeHandle);B(this._swipeEndHandle);this._swipeHandle=v(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=v(this.touchEvents||this.pointerEvents,
"onSwipeEnd",this,this._swipeEnd)},_swipe:function(H){var J=this.map;J.__panning?(this._panX=H.screenPoint.x,this._panY=H.screenPoint.y,J.__pan(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)):(J.setCursor("move"),J.__panStart(H.screenPoint.x,H.screenPoint.y))},_swipeEnd:function(H){B(this._swipeHandle);B(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var J=this.map;J.__panning&&(J.resetMapCursor(),J.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-
this._dragOrigin.y))},_pinchInit:function(H){var J=this.map,I=J._zoomAnim||J._panAnim;I&&I._active?(I.stop(),I._fire("onEnd",[I.node])):J.__panning&&(H.screenPoint=new z(this._panX,this._panY),H.mapPoint=J.toMap(H.screenPoint),this._swipeEnd(H));B(this._pinchHandle);B(this._pinchEndHandle);this._pinchHandle=v(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=v(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(H){var J=this.map;
if(H.screenPoints){this.currLength=D.getLength(H.screenPoints[0],H.screenPoints[1]);if(J.__zooming){var I=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(J.extent,I,this._dragOrigin);J.__zoom(this._zoomStartExtent,I,this._dragOrigin)}else this._dragOrigin=new z((H.screenPoints[0].x+H.screenPoints[1].x)/2,(H.screenPoints[0].y+H.screenPoints[1].y)/2),this._length=this.currLength,J.__zoomStart(J.extent,this._dragOrigin);this._pinchScale=I;J._fireOnScale(this.currLength/this._length,
this._dragOrigin,!0)}},_pinchEnd:function(H){H=this.map;B(this._pinchHandle);B(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(H.__zooming&&null===H._zoomAnim){var J=this.currLength/this._length,I=H.extent.getWidth();this._zoomAnimAnchor=H.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(H.extent,1/J,this._zoomAnimAnchor);if(H.__tileInfo){var K=A.getCandidateTileInfo(H,H.__tileInfo,this._zoomStartExtent),R=H.__getExtentForLevel(K.lod.level,this._zoomAnimAnchor),
W=H.getMinZoom(),P=H.getMaxZoom(),S=R.extent;R=R.lod;var L=I/S.getWidth(),aa=K.lod.level;1>J?L>J&&aa--:L<J&&aa++;aa<W?aa=W:aa>P&&(aa=P);aa!==K.lod.level&&(R=H.__getExtentForLevel(aa,this._zoomAnimAnchor),S=R.extent,R=R.lod);this._zoomEndExtent=S;this._zoomEndLod=R;H._zoomAnim=u.animateRange({range:{start:I/this._zoomStartExtent.getWidth(),end:L},duration:k.defaults.map.zoomDuration,rate:k.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});H._zoomAnim.play();H._fireOnScale(H.extent.getWidth()/
this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,H._fireOnScale(H.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(H){var J=this.__scaleExtent(this.map.extent,H,this._zoomAnimAnchor);this.map.__zoom(J,H,this._dragOrigin)},_adjustPinchEnd:function(){var H=this.map,J=H.extent.getWidth()/this._zoomEndExtent.getWidth(),I=this.__scaleExtent(H.extent,1/J,this._zoomAnimAnchor),K=this._dragOrigin,
R=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=H._zoomAnim=this._zoomAnimAnchor=null;H.__zoomEnd(I,J,K,R,!0)},__scaleExtent:function(H,J,I){I=I||H.getCenter();J=H.expand(J);var K=H.xmin-(J.getWidth()-H.getWidth())*(I.x-H.xmin)/H.getWidth();I=H.ymax-(J.getHeight()-H.getHeight())*(I.y-H.ymax)/H.getHeight();return new E(K,I-J.getHeight(),K+J.getWidth(),I,H.spatialReference)},_normalizeRect:function(H){H=H.screenPoint;var J=this._dragOrigin.x,I=this._dragOrigin.y;
H=new w((H.x<J?H.x:J)-this.map.__visibleRect.x,(H.y<I?H.y:I)-this.map.__visibleRect.y,Math.abs(H.x-J),Math.abs(H.y-I));delete H.spatialReference;0===H.width&&(H.width=1);0===H.height&&(H.height=1);return H},setImmediateClick:function(H){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(H);break;case "touch":this.touchEvents.setImmediateTap(H);this.mouseEvents&&this.mouseEvents.setImmediateClick(H);break;case "pointer":this.pointerEvents.setImmediateTap(H)}},enablePan:function(){this.disablePan();
switch(this.eventModel){case "mouse":this._panInitHandle=v(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=v(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=v(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=v(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){B(this._panInitHandle);this._panInitHandle=null;B(this._swipeInitHandle);this._swipeInitHandle=null},
enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?v(this.pointerEvents,"onSwipeStart",this,this._zoomInit):v(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){B(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=v(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},
disablePinchZoom:function(){B(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=v(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){B(this._wheelHandle);this._wheelHandle=null},enableScrollWheelPan:function(){var H=this.map;H&&H.loaded&&H.smartNavigation&&(this.disableScrollWheelPan(),this._setScrollWheelPan(!0))},disableScrollWheelPan:function(){var H=this.map;
H&&H.loaded&&H.smartNavigation&&this._setScrollWheelPan(!1)},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=v(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=v(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=v(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=v(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=
v(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=v(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){B(this._dblClickHandle);B(this._zoomOutHandle);this._dblTapHandle&&B(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=v(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},
disableShiftDoubleClickZoom:function(){B(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=v(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){B(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=v(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=
v(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){B(this._keyHandle);B(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableScrollWheel:function(){var H=this.map;H&&(H.smartNavigation?this.enableScrollWheelPan():H.enableScrollWheelZoom())},disableScrollWheel:function(){var H=this.map;H&&(H.disableScrollWheelZoom(),H.smartNavigation&&this.disableScrollWheelPan())},enableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),
H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},disableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),
H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var H,J=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,
this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(H=0;H<J.length;H++)B(J[H]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=
this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}});return m.MapNavigationManager=b})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(b,
y,q,a,h,e,g,f,m,l){var d=h.connect,c=h.disconnect;b=b([f],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==a("mac")?1:3,wheelDivisor:2>a("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(k,t){this.node=k;q.mixin(this,t);t=function(n){e.stop(n);return!1};a("mozilla")&&y.style(k,"MozUserSelect","none");this._handles=[d(k,"onselectstart",t),d(k,"ondragstart",t),d(k,"onmouseenter",this,this._onMouseEnterHandler),d(k,"onmouseleave",
this,this._onMouseLeaveHandler),d(k,"onmousedown",this,this._onMouseDownHandler),d(k,"onclick",this,this._onClickHandler),d(k,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=d(k,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=d(k,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=q.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(k=this.map)?k.isScrollWheelZoom||k.isScrollWheelPan:
this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(k,t){if(!this._preventClick||"onClick"!==k&&"onDblClick"!==k){if(this[k])this[k](t);if(this.map&&this.map[k])this.map[k](t)}},_processEvent:function(k){k=e.fix(k,k.target);var t=this.map,n=t&&t.position;n&&("DOMMouseScroll"===k.type&&3>a("ff")?k.screenPoint=new l(window.scrollX+k.screenX-n.x,window.scrollY+k.screenY-n.y):k.screenPoint=new l(k.pageX-n.x,k.pageY-n.y),k.mapPoint=t.extent?t.toMap(k.screenPoint):new m);k.numPoints=0;return k},
_onMouseEnterHandler:function(k){c(this._onKeyDown_connect);c(this._onKeyUp_connect);this._onKeyDown_connect=d(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=d(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(k))},_onMouseLeaveHandler:function(k){c(this._onKeyDown_connect);c(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(k))},_onMouseMoveHandler:function(k){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(k))},_onMouseDownHandler:function(k){c(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=d(document,"onmousemove",this,this._onMouseDragHandler);this._startX=k.pageX;this._startY=k.pageY;this._fire("onMouseDown",this._processEvent(k))},_onMouseUpHandler:function(k){var t=this.node;t.releaseCapture&&t.releaseCapture();
c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;c(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=d(t,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(k))},_onMouseDragHandler:function(k){c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=d(document,"onmousemove",this,this._onMouseDraggingHandler);c(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=d(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=d(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(k))},_onMouseDraggingHandler:function(k){e.stop(k);this._fire("onMouseDrag",this._processEvent(k))},_onDragMouseUpHandler:function(k){var t=this.node;t.releaseCapture&&t.releaseCapture();this._dragEnd=!0;c(this._docLeaveConnect);c(this._onMouseDragHandler_connect);c(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
d(t,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=d(t,"onmouseup",this,this._onMouseUpHandler);k=this._processEvent(k);this._fire("onMouseDragEnd",k);this._fire("onMouseUp",k)},_onDocMouseOut:function(k){var t=9>a("ie")?k.toElement:k.relatedTarget,n=t&&t.nodeName.toLowerCase();(!t||(a("chrome")||a("safari"))&&"html"===n)&&this._onDragMouseUpHandler(k)},_onClickHandler:function(k){k=this._processEvent(k);if(k.pageX===this._startX&&k.pageY===this._startY){clearTimeout(this._clickTimer);
var t={},n="movementX"in k,u;for(u in k)"mozInputSource"===u||"mozPressure"===u||n&&("webkitMovementX"===u||"webkitMovementY"===u)||(t[u]=k[u]);this._clickEvent=t;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>a("ie")&&(this._clickEvent.graphic=g._ieGraphic,delete g._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(k){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(k))},
_onMouseWheelHandler:function(k){var t=this.map;(t?t.isScrollWheelZoom||t.isScrollWheelPan:this.preventPageScroll)&&e.stop(k);t=a("ff")||a("mozilla")?-k.detail/this.mozWheelDivisor:k.wheelDelta/this.wheelDivisor;var n=Math.abs(t);n=n<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;k.value=0>t?-n:n;this._fire("onMouseWheel",this._processEvent(k))},_onKeyDownHandler:function(k){this._fire("onKeyDown",k)},_onKeyUpHandler:function(k){this._fire("onKeyUp",k)},enableMouseWheel:function(k){c(this._scrollHandle);
this._scrollHandle=d(this.node,a("ff")||a("mozilla")?k?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(k){this.doubleClickDuration=k?0:this._initialDuration},preventClickEvents:function(k){this._preventClick=k},destroy:function(){var k=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),
t;for(t=0;t<k.length;t++)c(k[t]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});return g.MouseEvents=b})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(b,y,q,a,h,e,g,f,m){b=b([g],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(l,d){this.node=l;q.mixin(this,d);y.setSelectable(l,!1);this._touchStart=q.hitch(this,this._touchStart);this._touchMove=q.hitch(this,this._touchMove);this._touchEnd=q.hitch(this,this._touchEnd);this._touchCancel=q.hitch(this,this._touchCancel);this._fireClickEvent=q.hitch(this,this._fireClickEvent);l.addEventListener("touchstart",
this._touchStart,!1);l.addEventListener("touchmove",this._touchMove,!1);l.addEventListener("touchend",this._touchEnd,!1);l.addEventListener("touchcancel",this._touchCancel,!1);this.map&&a("ios")&&(this._mouseOver=q.hitch(this,this._mouseOver),this._mouseOut=q.hitch(this,this._mouseOut),this._mouseDown=q.hitch(this,this._mouseDown),this._mouseUp=q.hitch(this,this._mouseUp),this._mouseClick=q.hitch(this,this._mouseClick),l.addEventListener("mouseover",this._mouseOver,!1),l.addEventListener("mouseout",
this._mouseOut,!1),l.addEventListener("mousedown",this._mouseDown,!1),l.addEventListener("mouseup",this._mouseUp,!1),l.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(l){var d=this._touches,c,k=l.changedTouches.length,t,n,u=(new Date).getTime();this._touchStartTS=u;if(!(a("android")&&a("safari")&&1===l.targetTouches.length&&l.touches.length===l.targetTouches.length&&l.targetTouches.length===
l.changedTouches.length&&0===l.changedTouches[0].identifier&&d[l.changedTouches[0].identifier])){this._addTouch(l);for(c=0;c<k;c++){var x=l.changedTouches[c];var A=d[x.identifier]={};A.startX=x.pageX;A.startY=x.pageY;A.startTS=u;-1===this._touchIds.indexOf(x.identifier)&&this._touchIds.push(x.identifier)}this._swipeActive&&(t=this._nodeTouches[0]);this._pinchActive&&(n=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(l,
t))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(l,[t,n]))):2===this._numTouches?this._swipeActive&&(t&&(A=d[this._touchIds[0]],A.startX=t.pageX,A.startY=t.pageY,A.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(l,t))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(l,t))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(l,[t,n])))}},_touchMove:function(l){l.preventDefault();
this._updateTouch(l);var d=this._touches,c,k=l.changedTouches.length,t;if(!(a("android")&&a("safari")&&1===l.targetTouches.length&&l.touches.length===l.targetTouches.length&&l.targetTouches.length===l.changedTouches.length&&0===l.changedTouches[0].identifier&&d[l.changedTouches[0].identifier]&&1<this._touchIds.length)){for(c=0;c<k;c++){var n=l.changedTouches[c];if(t=d[n.identifier]){var u=Math.abs(n.pageX-t.startX);n=Math.abs(n.pageY-t.startY);!t.moved&&(u>=this.tapRadius||n>=this.tapRadius)&&(t.moved=
t.absMoved=!0);var x=x?x:t.moved}}1===this._numTouches?(d=l.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(l,d)):x&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(l,d)))):2===this._numTouches&&(c=this._nodeTouches[0],k=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(l,[c,k])):x&&(x=d[c.identifier],t=d[k.identifier],d=Math.abs(x.startX-t.startX),x=Math.abs(x.startY-t.startY),t=Math.abs(c.pageX-k.pageX),
u=Math.abs(c.pageY-k.pageY),Math.abs(Math.sqrt(t*t+u*u)-Math.sqrt(d*d+x*x))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(l,[c,k])))))}},_touchEnd:function(l){this._removeTouch(l);var d=this._touches,c=l.changedTouches,k,t=c.length,n,u,x=(new Date).getTime(),A=this._touchIds;for(k=0;k<t;k++)if(u=d[c[k].identifier])u.absMoved&&(n=!0),u.pageX=c[k].pageX,u.pageY=c[k].pageY,u.endTS=x;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(l,c[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(l,c));else{if(!n){t=Infinity;n=-Infinity;x=Infinity;var z=-Infinity,E=this.tapStartTolerance,w=[],D=!0;for(k=0;k<A.length;k++)u=d[A[k]],w.push(u),u.startTS<t&&(t=u.startTS),u.startTS>n&&(n=u.startTS),u.endTS<x&&(x=u.endTS),u.endTS>z&&(z=u.endTS),delete d[A[k]];1===w.length&&c[0]&&(d=Math.abs(c[0].pageY-w[0].startY),Math.abs(c[0].pageX-w[0].startX)>=
this.tapRadius||d>=this.tapRadius)&&(D=!1);D&&Math.abs(n-t)<=E&&Math.abs(z-x)<=E&&this._basicTap(l,w)}}else 1===this._numTouches&&this._pinchActive&&(k=this._nodeTouches[0],u=d[k.identifier],u.startX=k.pageX,u.startY=k.pageY,this._pinchActive=u.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(l,[c[0],k])))},_touchCancel:function(l){this._numTouches&&this._touchEnd(l)},_basicTap:function(l,d){var c=(new Date).getTime(),k=this;l=this._processTouchEvent(l,d);this._taps.push({touchInfos:d,ts:c,
event:l});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",l);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var t=k;k=null;clearTimeout(t._tapTimer);t._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(l){var d=this._taps,c=d[0],k=d[1],t=c.touchInfos,n=k&&k.touchInfos;d.length&&(l||(this._taps=[]),c&&k?t.length===n.length?k.ts-c.ts<=this.doubleTapDuration?(1===t.length?
(l=Math.abs(t[0].startX-n[0].startX),t=Math.abs(t[0].startY-n[0].startY),t=l<=this.doubleTapRadius&&t<=this.doubleTapRadius):t=!0,t?this._processedDoubleTap(d):this._processedTap(k)):this._processedTap(k):this._processedTap(k):this._processedTap(c||k))},_processedTap:function(l){var d=l.event;this._fire("onProcessedTap",d);1===l.touchInfos.length?this._fire("onTap",this._fixEvent(d)):2===l.touchInfos.length&&this._fire("onTwoFingerTap",d)},_processedDoubleTap:function(l){var d=1===l[1].touchInfos.length;
if(d){var c=[this._fixEvent(l[0].event),this._fixEvent(l[1].event)];c[1].relatedEvents=c}l=[l[0].event,l[1].event];l[1].relatedEvents=l;this._fire("onProcessedDoubleTap",l[1]);d&&(this._fire("onDoubleTap",c[1]),this._fire("onDblClick",c[1]))},_addTouch:function(l){var d=l.changedTouches,c=this._nodeTouches,k;this._numTouches+=d.length;for(l=0;l<d.length;l++){var t=c.length;var n=!1;for(k=0;k<t&&!(n=c[k].identifier===d[l].identifier);k++);n?this._numTouches--:c.push(d[l])}for(l=c.length-1;0<=l;l--)h.isDescendant(c[l].target,
document.body)||(c.splice(l,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(l){var d=[],c=[],k=l.changedTouches,t=this._nodeTouches;this._numTouches-=k.length;0>this._numTouches&&(this._numTouches=0);for(l=0;l<k.length;l++)d.push(k[l].identifier);for(l=t.length-1;0<=l;l--)-1!==d.indexOf(t[l].identifier)&&c.push(t.splice(l,1)[0]);return c},_updateTouch:function(l){var d=[],c=l.changedTouches,k=this._nodeTouches;for(l=0;l<c.length;l++)d.push(c[l].identifier);for(l=
0;l<k.length;l++){var t=d.indexOf(k[l].identifier);-1!==t&&k.splice(l,1,c[t])}},_mouseOver:function(l){this._fire("onMouseOver",this._processMouseEvent(l))},_mouseOut:function(l){this._fire("onMouseOut",this._processMouseEvent(l))},_mouseDown:function(l){this._fire("onMouseDown",this._processMouseEvent(l))},_mouseUp:function(l){this._fire("onMouseUp",this._processMouseEvent(l))},_mouseClick:function(l){clearTimeout(this._clickTimer);300<(new Date).getTime()-this._touchStartTS?this._fire("onClick",
this._processMouseEvent(l)):(this._clickEvent=l,this._clickTimer=setTimeout(this._fireClickEvent,this.doubleTapDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);this._fire("onClick",this._processMouseEvent(this._clickEvent))},_fire:function(l,d){"onDblClick"===l&&clearTimeout(this._clickTimer);if("onDblClick"===l&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var c=this;setTimeout(function(){c.mouseEvents.preventClickEvents(!1)},350)}if(this[l])this[l](d);if(this.map&&
this.map[l])this.map[l](d)},_fixEvent:function(l){var d={},c;for(c in l)d[c]=l[c];this.map&&(d.screenPoint=d.screenPoints[0],d.mapPoint=d.mapPoints[0]);return d},_processTouchEvent:function(l,d){var c=this.map,k=c&&c.position,t=0;if(k&&d)if(q.isArray(d)){var n;l.screenPoints=[];l.mapPoints=[];for(n=0;n<d.length;n++)if(d[n]){var u=new m(d[n].pageX-k.x,d[n].pageY-k.y);l.screenPoints.push(u);l.mapPoints.push(c.extent?c.toMap(u):new f)}else t++}else l.screenPoint=new m(d.pageX-k.x,d.pageY-k.y),l.mapPoint=
c.extent?c.toMap(l.screenPoint):new f;l.numPoints=d?q.isArray(d)?d.length-t:1:0;return l},_processMouseEvent:function(l){var d=this.map,c=d&&d.position;c&&(l.screenPoint=new m(l.pageX-c.x,l.pageY-c.y),l.mapPoint=d.extent?d.toMap(l.screenPoint):new f);return l},setImmediateTap:function(l){this._immediate=l},destroy:function(){var l=this.node;l.removeEventListener("touchstart",this._touchStart,!1);l.removeEventListener("touchmove",this._touchMove,!1);l.removeEventListener("touchend",this._touchEnd,
!1);l.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(l.removeEventListener("mouseover",this._mouseOver,!1),l.removeEventListener("mouseout",this._mouseOut,!1),l.removeEventListener("mousedown",this._mouseDown,!1),l.removeEventListener("mouseup",this._mouseUp,!1),l.removeEventListener("click",this._mouseClick,!1));y.setSelectable(l,!0);clearTimeout(this._tapTimer);clearTimeout(this._clickTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=
null}});return e.TouchEvents=b})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(b,y,q,a,h,e,g,f){b=b([e],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==a("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(m,
l){this.node=m;y.mixin(this,l);void 0!==m.style.msTouchAction?m.style.msTouchAction="none":void 0!==m.style.touchAction&&(m.style.touchAction="none");l=navigator.msPointerEnabled;var d=function(c){c.preventDefault()};m.addEventListener("selectstart",d,!1);m.addEventListener("dragstart",d,!1);this._pointerDown=y.hitch(this,this._pointerDown);this._pointerMove=y.hitch(this,this._pointerMove);this._pointerUp=y.hitch(this,this._pointerUp);this._pointerCancel=y.hitch(this,this._pointerCancel);m.addEventListener(l?
"MSPointerDown":"pointerdown",this._pointerDown,!1);m.addEventListener(l?"MSPointerMove":"pointermove",this._pointerMove,!1);m.addEventListener(l?"MSPointerUp":"pointerup",this._pointerUp,!1);m.addEventListener(l?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=y.hitch(this,this._mouseOver),this._mouseOut=y.hitch(this,this._mouseOut),this._mouseLeave=y.hitch(this,this._mouseLeave),this._mouseDown=y.hitch(this,this._mouseDown),this._mouseUp=y.hitch(this,this._mouseUp),
this._mouseClick=y.hitch(this,this._mouseClick),this._mouseWheel=y.hitch(this,this._mouseWheel),this._mouseMove=y.hitch(this,this._mouseMove),this._mouseEnter=y.hitch(this,this._mouseEnter),this._onKeyDown=y.hitch(this,this._onKeyDown),this._onKeyUp=y.hitch(this,this._onKeyUp),m.addEventListener("mouseover",this._mouseOver,!1),m.addEventListener("mouseout",this._mouseOut,!1),m.addEventListener("mouseleave",this._mouseLeave,!1),m.addEventListener("mousedown",this._mouseDown,!1),m.addEventListener("mouseup",
this._mouseUp,!1),m.addEventListener("click",this._mouseClick,!1),m.addEventListener("mousewheel",this._mouseWheel,!1),m.addEventListener("mousemove",this._mouseMove,!1),m.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(m){if(-1<q.indexOf(this._touchIds,m.pointerId))this._pointerUp(m);else{var l=this._touches,d=m.target,c=m.pointerId,k=this._touchIds,t=(new Date).getTime();var n=l[c]=
{};n.pointerId=c;n.startX=n.pageX=m.pageX;n.startY=n.pageY=m.pageY;n.startTS=t;k.push(c);this._numTouches++;d.setPointerCapture?d.setPointerCapture(c):d.msSetPointerCapture&&d.msSetPointerCapture(c);d=l[k[0]];l=l[k[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(d&&(d.startX=d.pageX,d.startY=d.pageY,d.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,d))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,d))):
this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[d,l]))))}},_pointerMove:function(m){var l=this._touches,d=this._touchIds,c;if((c=l[m.pointerId])&&(c.pageX!==m.pageX||c.pageY!==m.pageY)){c.pageX=m.pageX;c.pageY=m.pageY;var k=Math.abs(c.pageX-c.startX);var t=Math.abs(c.pageY-c.startY);!c.moved&&(k>=this.tapRadius||t>=this.tapRadius)&&(c.moved=c.absMoved=!0);if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(m,m)):c.moved&&
(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(m,m)));else if(2===this._numTouches)if(c=l[d[0]],l=l[d[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(m,[c,l]));else if(c.moved||l.moved){d=Math.abs(c.startX-l.startX);k=Math.abs(c.startY-l.startY);t=Math.abs(c.pageX-l.pageX);var n=Math.abs(c.pageY-l.pageY);Math.abs(Math.sqrt(t*t+n*n)-Math.sqrt(d*d+k*k))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(m,[c,l])))}}},
_pointerUp:function(m){var l=this._touches,d,c=this.node,k=m.target,t=m.pointerId,n=this._touchIds,u=n.slice(0),x=q.map(u,function(w){return l[w]}),A=(new Date).getTime();if(d=l[t])if(d.pageX=m.pageX,d.pageY=m.pageY,d.endTS=A,this._numTouches--,k.releasePointerCapture?k.releasePointerCapture(t):k.msReleasePointerCapture&&k.msReleasePointerCapture(t),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,m));
else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,m));else{if(!d.absMoved){k=Infinity;t=-Infinity;n=Infinity;A=-Infinity;var z=this.tapStartTolerance,E;for(E=0;E<u.length;E++)d=x[E],d.startTS<k&&(k=d.startTS),d.startTS>t&&(t=d.startTS),d.endTS<n&&(n=d.endTS),d.endTS>A&&(A=d.endTS);Math.abs(t-k)<=z&&Math.abs(A-n)<=z&&this._basicTap(m,x)}}else 1===this._numTouches&&this._pinchActive&&(n.splice(q.indexOf(n,m.pointerId),1),delete l[m.pointerId],d=l[n[0]],
d.startX=d.pageX,d.startY=d.pageY,d.moved=!1,document.msElementsFromPoint&&(u=document.msElementsFromPoint(d.pageX,d.pageY),q.some(u,function(w){return w===c})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[m,d])))},_pointerCancel:function(m){this._numTouches&&this._pointerUp(m)},_basicTap:function(m,l){var d=(new Date).getTime(),c=this,k=this._immediate;m=this._processTouchEvent(m,l);this._taps.push({touchInfos:l,
ts:d,event:m});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",m);clearTimeout(this._tapTimer);m=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var t=c;c=null;clearTimeout(t._tapTimer);t._analyzeTap(k)},k?0:m)},_analyzeTap:function(m){var l=this._taps,d=l[0],c=l[1],k=d.touchInfos,t=c&&c.touchInfos;l.length&&(m||(this._taps=[]),d&&c?k.length===t.length?c.ts-d.ts<=this.doubleTapDuration?(1===k.length?(m=Math.abs(k[0].startX-
t[0].startX),k=Math.abs(k[0].startY-t[0].startY),k=m<=this.doubleTapRadius&&k<=this.doubleTapRadius):k=!0,k?this._processedDoubleTap(l):this._processedTap(c)):this._processedTap(c):this._processedTap(c):this._processedTap(d||c))},_processedTap:function(m){var l=m.event;this._fire("onProcessedTap",l);1===m.touchInfos.length?this._fire("onTap",this._fixEvent(l)):2===m.touchInfos.length&&this._fire("onTwoFingerTap",l)},_processedDoubleTap:function(m){var l=1===m[1].touchInfos.length;if(l){var d=[this._fixEvent(m[0].event),
this._fixEvent(m[1].event)];d[1].relatedEvents=d}m=[m[0].event,m[1].event];m[1].relatedEvents=m;this._fire("onProcessedDoubleTap",m[1]);l&&(this._fire("onDoubleTap",d[1]),this._fire("onDblClick",d[1]))},_mouseOver:function(m){this._fire("onMouseOver",this._processMouseEvent(m))},_mouseMove:function(m){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(m)):this._fire("onMouseMove",this._processMouseEvent(m))},_mouseOut:function(m){this._fire("onMouseOut",this._processMouseEvent(m))},_mouseLeave:function(m){document.removeEventListener("keydown",
this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(m))},_mouseDown:function(m){this._downX=m.pageX;this._downY=m.pageY;this._fire("onMouseDown",this._processMouseEvent(m));0===m.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(m)))},_mouseUp:function(m){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(m)));this._fire("onMouseUp",this._processMouseEvent(m))},
_mouseClick:function(m){Math.abs(m.pageX-this._downX)<=this.clickRadius&&Math.abs(m.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(m))},_mouseWheel:function(m){var l=this.map;(l?l.isScrollWheelZoom||l.isScrollWheelPan:this.preventPageScroll)&&m.preventDefault();l=m.wheelDelta?m.wheelDelta/this.wheelDivisor:-m.detail/this.mozWheelDivisor;var d=Math.abs(l);d=d<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;m.value=0>l?-d:d;this._fire("onMouseWheel",this._processMouseEvent(m))},
_mouseEnter:function(m){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(m))},_onKeyDown:function(m){this._fire("onKeyDown",m)},_onKeyUp:function(m){this._fire("onKeyUp",m)},_fire:function(m,l){if(this[m])this[m](l);if(this.map&&this.map[m])this.map[m](l)},_fixEvent:function(m){var l=
{},d;for(d in m)l[d]=m[d];l.preventDefault=function(){m.preventDefault()};l.stopPropagation=function(){m.stopPropagation()};this.map&&(l.screenPoint=l.screenPoints[0],l.mapPoint=l.mapPoints[0]);return l},_processTouchEvent:function(m,l){var d=this.map,c=d&&d.position,k=0;if(c&&l)if(y.isArray(l)){var t;m.screenPoints=[];m.mapPoints=[];for(t=0;t<l.length;t++)if(l[t]){var n=new f(l[t].pageX-c.x,l[t].pageY-c.y);m.screenPoints.push(n);m.mapPoints.push(d.extent?d.toMap(n):new g)}else k++}else m.screenPoint=
new f(l.pageX-c.x,l.pageY-c.y),m.mapPoint=d.extent?d.toMap(m.screenPoint):new g;m.numPoints=l?y.isArray(l)?l.length-k:1:0;return m},_processMouseEvent:function(m){var l=this.map,d=l&&l.position;d&&(m.screenPoint=new f(m.pageX-d.x,m.pageY-d.y),m.mapPoint=l.extent?l.toMap(m.screenPoint):new g);return m},setImmediateTap:function(m){this._immediate=m},destroy:function(){var m=this.node;m.removeEventListener("MSPointerDown",this._pointerDown,!1);m.removeEventListener("MSPointerMove",this._pointerMove,
!1);m.removeEventListener("MSPointerUp",this._pointerUp,!1);m.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(m.removeEventListener("mouseover",this._mouseOver,!1),m.removeEventListener("mousemove",this._mouseMove,!1),m.removeEventListener("mouseout",this._mouseOut,!1),m.removeEventListener("mouseleave",this._mouseLeave,!1),m.removeEventListener("mousedown",this._mouseDown,!1),m.removeEventListener("mouseup",this._mouseUp,!1),m.removeEventListener("click",this._mouseClick,
!1),m.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});return h.PointerEvents=b})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n){b=b(l,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(u){u=y.hitch;this._projectHandler=u(this,this._projectHandler);this._simplifyHandler=u(this,this._simplifyHandler);this._bufferHandler=u(this,this._bufferHandler);this._areasAndLengthsHandler=u(this,this._areasAndLengthsHandler);this._lengthsHandler=
u(this,this._lengthsHandler);this._labelPointsHandler=u(this,this._labelPointsHandler);this._relationHandler=u(this,this._relationHandler);this._convexHullHandler=u(this,this._convexHullHandler);this._unionHandler=u(this,this._unionHandler);this._autoCompleteHandler=u(this,this._autoCompleteHandler);this._reshapeHandler=u(this,this._reshapeHandler);this._cutHandler=u(this,this._cutHandler);this._intersectHandler=u(this,this._intersectHandler);this._differenceHandler=u(this,this._differenceHandler);
this._trimExtendHandler=u(this,this._trimExtendHandler);this._densifyHandler=u(this,this._densifyHandler);this._generalizeHandler=u(this,this._densifyHandler);this._offsetHandler=u(this,this._offsetHandler);this._distanceHandler=u(this,this._distanceHandler);this._toGeoCoordinateHandler=u(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=u(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(u){var x=[],A,z=u.length;for(A=0;A<z;A++)x.push(u[A].toJson());
return{geometryType:n.getJsonType(u[0]),geometries:x}},_decodeGeometries:function(u,x,A){var z=n.getGeometryType(x);u=u.geometries;var E=[],w={spatialReference:A.toJson()},D=y.mixin;q.forEach(u,function(r,v){E[v]=new z(D(r,w))});return E},_toProjectGeometry:function(u){var x=u.spatialReference.toJson();return u instanceof d?new k({rings:[[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]]],spatialReference:x}):new c({paths:[[].concat(u.points)],spatialReference:x})},
_fromProjectedGeometry:function(u,x,A){return"esriGeometryEnvelope"===x?(u=u.rings[0],new d(u[0][0],u[0][1],u[2][0],u[2][1],A)):new t({points:u.paths[0],spatialReference:A.toJson()})},project:function(u,x,A,z){var E=y.mixin({},this._url.query,{f:"json"});if(u.geometries){z=A;A=x;x=u.outSR;var w=u.geometries[0];E=y.mixin(E,u.toJson())}else w=u[0],E=y.mixin(E,{outSR:x.wkid||a.toJson(x.toJson()),inSR:w.spatialReference.wkid||a.toJson(w.spatialReference.toJson()),geometries:a.toJson(this._encodeGeometries(u))});
var D=n.getJsonType(w),r=this._projectHandler,v=this._errorHandler,B=new h(m._dfdCanceller);B._pendingDfd=f({url:this._url.path+"/project",content:E,callbackParamName:"callback",load:function(C,F){r(C,F,D,x,A,z,B)},error:function(C){v(C,z,B)}});return B},_projectHandler:function(u,x,A,z,E,w,D){try{var r=this._decodeGeometries(u,A,z);this._successHandler([r],"onProjectComplete",E,D)}catch(v){this._errorHandler(v,w,D)}},onProjectComplete:function(){},simplify:function(u,x,A){var z=u[0].spatialReference,
E=y.mixin({},this._url.query,{f:"json",sr:z.wkid?z.wkid:a.toJson(z.toJson()),geometries:a.toJson(this._encodeGeometries(u))}),w=n.getJsonType(u[0]),D=this._simplifyHandler,r=this._errorHandler,v=new h(m._dfdCanceller);v._pendingDfd=f({url:this._url.path+"/simplify",content:E,callbackParamName:"callback",load:function(B,C){D(B,C,w,z,x,A,v)},error:function(B){r(B,A,v)}});return v},_simplifyHandler:function(u,x,A,z,E,w,D){try{var r=this._decodeGeometries(u,A,z);this._successHandler([r],"onSimplifyComplete",
E,D)}catch(v){this._errorHandler(v,w,D)}},onSimplifyComplete:function(){},convexHull:function(u,x,A){var z=u[0].spatialReference;u=y.mixin({},this._url.query,{f:"json",sr:a.toJson(z.toJson()),geometries:a.toJson(this._encodeGeometries(u))});var E=this._convexHullHandler,w=this._errorHandler,D=new h(m._dfdCanceller);D._pendingDfd=f({url:this._url.path+"/convexHull",content:u,callbackParamName:"callback",load:function(r,v){E(r,v,z,x,A,D)},error:function(r){w(r,A,D)}});return D},_convexHullHandler:function(u,
x,A,z,E,w){try{var D=n.fromJson(u.geometry).setSpatialReference(A);this._successHandler([D],"onConvexHullComplete",z,w)}catch(r){this._errorHandler(r,E,w)}},onConvexHullComplete:function(){},union:function(u,x,A){var z=u[0].spatialReference;u=y.mixin({},this._url.query,{f:"json",sr:a.toJson(z.toJson()),geometries:a.toJson(this._encodeGeometries(u))});var E=this._unionHandler,w=this._errorHandler,D=new h(m._dfdCanceller);D._pendingDfd=f({url:this._url.path+"/union",content:u,callbackParamName:"callback",
load:function(r,v){E(r,v,z,x,A,D)},error:function(r){w(r,A,D)}});return D},_unionHandler:function(u,x,A,z,E,w){try{var D=n.fromJson(u.geometry).setSpatialReference(A);this._successHandler([D],"onUnionComplete",z,w)}catch(r){this._errorHandler(r,E,w)}},onUnionComplete:function(){},autoComplete:function(u,x,A,z){var E=u[0].spatialReference;u=y.mixin({},this._url.query,{f:"json",sr:a.toJson(E.toJson()),polygons:a.toJson(this._encodeGeometries(u).geometries),polylines:a.toJson(this._encodeGeometries(x).geometries)});
var w=this._autoCompleteHandler,D=this._errorHandler,r=new h(m._dfdCanceller);r._pendingDfd=f({url:this._url.path+"/autoComplete",content:u,callbackParamName:"callback",load:function(v,B){w(v,B,E,A,z,r)},error:function(v){D(v,z,r)}});return r},_autoCompleteHandler:function(u,x,A,z,E,w){try{var D=u.geometries;u=[];var r,v=D.length;for(r=0;r<v;r++)u[r]=new k({spatialReference:A,rings:D[r].rings});this._successHandler([u],"onAutoCompleteComplete",z,w)}catch(B){this._errorHandler(B,E,w)}},onAutoCompleteComplete:function(){},
reshape:function(u,x,A,z){var E=u.spatialReference;u=y.mixin({},this._url.query,{f:"json",sr:a.toJson(E.toJson()),target:a.toJson({geometryType:n.getJsonType(u),geometry:u.toJson()}),reshaper:a.toJson(x.toJson())});var w=this._reshapeHandler,D=this._errorHandler,r=new h(m._dfdCanceller);r._pendingDfd=f({url:this._url.path+"/reshape",content:u,callbackParamName:"callback",load:function(v,B){w(v,B,E,A,z,r)},error:function(v){D(v,z,r)}});return r},_reshapeHandler:function(u,x,A,z,E,w){try{var D=n.fromJson(u.geometry).setSpatialReference(A);
this._successHandler([D],"onReshapeComplete",z,w)}catch(r){this._errorHandler(r,E,w)}},onReshapeComplete:function(){},cut:function(u,x,A,z){var E=u[0].spatialReference,w=q.map(u,function(B){return B.toJson()});u=y.mixin({},this._url.query,{f:"json",sr:a.toJson(E.toJson()),target:a.toJson({geometryType:n.getJsonType(u[0]),geometries:w}),cutter:a.toJson(x.toJson())});var D=this._cutHandler,r=this._errorHandler,v=new h(m._dfdCanceller);v._pendingDfd=f({url:this._url.path+"/cut",content:u,callbackParamName:"callback",
load:function(B,C){D(B,C,E,A,z,v)},error:function(B){r(B,z,v)}});return v},_cutHandler:function(u,x,A,z,E,w){try{var D=u.geometries,r={};r.cutIndexes=u.cutIndexes;r.geometries=[];q.forEach(D,function(v){r.geometries.push(n.fromJson(v).setSpatialReference(A))});this._successHandler([r],"onCutComplete",z,w)}catch(v){this._errorHandler(v,E,w)}},onCutComplete:function(){},intersect:function(u,x,A,z){var E=u[0].spatialReference;u=y.mixin({},this._url.query,{f:"json",sr:a.toJson(E.toJson()),geometries:a.toJson(this._encodeGeometries(u)),
geometry:a.toJson({geometryType:n.getJsonType(x),geometry:x.toJson()})});var w=this._intersectHandler,D=this._errorHandler,r=new h(m._dfdCanceller);r._pendingDfd=f({url:this._url.path+"/intersect",content:u,callbackParamName:"callback",load:function(v,B){w(v,B,E,A,z,r)},error:function(v){D(v,z,r)}});return r},_intersectHandler:function(u,x,A,z,E,w){try{var D=[];q.forEach(u.geometries,function(r){D.push(n.fromJson(r).setSpatialReference(A))});this._successHandler([D],"onIntersectComplete",z,w)}catch(r){this._errorHandler(r,
E,w)}},onIntersectComplete:function(){},difference:function(u,x,A,z){var E=u[0].spatialReference;u=y.mixin({},this._url.query,{f:"json",sr:a.toJson(E.toJson()),geometries:a.toJson(this._encodeGeometries(u)),geometry:a.toJson({geometryType:n.getJsonType(x),geometry:x.toJson()})});var w=this._differenceHandler,D=this._errorHandler,r=new h(m._dfdCanceller);r._pendingDfd=f({url:this._url.path+"/difference",content:u,callbackParamName:"callback",load:function(v,B){w(v,B,E,A,z,r)},error:function(v){D(v,
z,r)}});return r},_differenceHandler:function(u,x,A,z,E,w){try{var D=[];q.forEach(u.geometries,function(r){D.push(n.fromJson(r).setSpatialReference(A))});this._successHandler([D],"onDifferenceComplete",z,w)}catch(r){this._errorHandler(r,E,w)}},onDifferenceComplete:function(){},buffer:function(u,x,A){var z=y.mixin({},this._url.query,{f:"json"},u.toJson()),E=u.outSpatialReference||u.geometries[0].spatialReference,w=this._bufferHandler,D=this._errorHandler,r=new h(m._dfdCanceller);r._pendingDfd=f({url:this._url.path+
"/buffer",content:z,callbackParamName:"callback",load:function(v,B){w(v,B,E,x,A,r)},error:function(v){D(v,A,r)}});return r},_bufferHandler:function(u,x,A,z,E,w){try{var D=u.geometries;u=[];var r,v=D.length;for(r=0;r<v;r++)u[r]=new k({spatialReference:A,rings:D[r].rings});this._successHandler([u],"onBufferComplete",z,w)}catch(B){this._errorHandler(B,E,w)}},onBufferComplete:function(){},areasAndLengths:function(u,x,A){u=y.mixin({},this._url.query,{f:"json"},u.toJson());var z=this._areasAndLengthsHandler,
E=this._errorHandler,w=new h(m._dfdCanceller);w._pendingDfd=f({url:this._url.path+"/areasAndLengths",content:u,callbackParamName:"callback",load:function(D,r){z(D,r,x,A,w)},error:function(D){E(D,A,w)}});return w},_areasAndLengthsHandler:function(u,x,A,z,E){try{this._successHandler([u],"onAreasAndLengthsComplete",A,E)}catch(w){this._errorHandler(w,z,E)}},onAreasAndLengthsComplete:function(){},lengths:function(u,x,A){u=y.mixin({},this._url.query,{f:"json"},u.toJson());var z=this._lengthsHandler,E=this._errorHandler,
w=new h(m._dfdCanceller);w._pendingDfd=f({url:this._url.path+"/lengths",content:u,callbackParamName:"callback",load:function(D,r){z(D,r,x,A,w)},error:function(D){E(D,A,w)}});return w},_lengthsHandler:function(u,x,A,z,E){try{this._successHandler([u],"onLengthsComplete",A,E)}catch(w){this._errorHandler(w,z,E)}},onLengthsComplete:function(){},labelPoints:function(u,x,A){var z=q.map(u,function(v){return v.toJson()}),E=u[0].spatialReference;z=y.mixin({},this._url.query,{f:"json",sr:E.wkid?E.wkid:a.toJson(E.toJson()),
polygons:a.toJson(z)});var w=this._labelPointsHandler,D=this._errorHandler,r=new h(m._dfdCanceller);r._pendingDfd=f({url:this._url.path+"/labelPoints",content:z,callbackParamName:"callback",load:function(v,B){w(v,B,u,E,x,A,r)},error:function(v){D(v,A,r)}});return r},_labelPointsHandler:function(u,x,A,z,E,w,D){try{var r=[];q.forEach(u.labelPoints,function(v){r.push(n.fromJson(v).setSpatialReference(z))});this._successHandler([r],"onLabelPointsComplete",E,D)}catch(v){this._errorHandler(v,w,D)}},onLabelPointsComplete:function(){},
relation:function(u,x,A){u=y.mixin({},this._url.query,{f:"json"},u.toJson());var z=this._relationHandler,E=this._errorHandler,w=new h(m._dfdCanceller);w._pendingDfd=f({url:this._url.path+"/relation",content:u,callbackParamName:"callback",load:function(D,r){z(D,r,x,A,w)},error:function(D){E(D,A,w)}});return w},_relationHandler:function(u,x,A,z,E){try{this._successHandler([u.relations],"onRelationComplete",A,E)}catch(w){this._errorHandler(w,z,E)}},onRelationComplete:function(){},trimExtend:function(u,
x,A){var z=y.mixin({},this._url.query,{f:"json"},u.toJson()),E=u.sr,w=this._trimExtendHandler,D=this._errorHandler,r=new h(m._dfdCanceller);r._pendingDfd=f({url:this._url.path+"/trimExtend",content:z,callbackParamName:"callback",load:function(v,B){w(v,B,E,x,A,r)},error:function(v){D(v,A,r)}});return r},_trimExtendHandler:function(u,x,A,z,E,w){try{var D=u.geometries;u=[];var r,v=D.length;for(r=0;r<v;r++)u[r]=new c({spatialReference:A,paths:D[r].paths});this._successHandler([u],"onTrimExtendComplete",
z,w)}catch(B){this._errorHandler(B,E,w)}},onTrimExtendComplete:function(){},densify:function(u,x,A){var z=y.mixin({},this._url.query,{f:"json"},u.toJson()),E=u.geometries[0].spatialReference,w=this._densifyHandler,D=this._errorHandler,r=new h(m._dfdCanceller);r._pendingDfd=f({url:this._url.path+"/densify",content:z,callbackParamName:"callback",load:function(v,B){w(v,B,E,x,A,r)},error:function(v){D(v,A,r)}});return r},_densifyHandler:function(u,x,A,z,E,w){try{var D=[];q.forEach(u.geometries,function(r){D.push(n.fromJson(r).setSpatialReference(A))});
this._successHandler([D],"onDensifyComplete",z,w)}catch(r){this._errorHandler(r,E,w)}},onDensifyComplete:function(){},generalize:function(u,x,A){var z=y.mixin({},this._url.query,{f:"json"},u.toJson()),E=u.geometries[0].spatialReference,w=this._generalizeHandler,D=this._errorHandler,r=new h(m._dfdCanceller);r._pendingDfd=f({url:this._url.path+"/generalize",content:z,callbackParamName:"callback",load:function(v,B){w(v,B,E,x,A,r)},error:function(v){D(v,A,r)}});return r},_generalizeHandler:function(u,
x,A,z,E,w){try{var D=[];q.forEach(u.geometries,function(r){D.push(n.fromJson(r).setSpatialReference(A))});this._successHandler([D],"onGeneralizeComplete",z,w)}catch(r){this._errorHandler(r,E,w)}},onGeneralizeComplete:function(){},offset:function(u,x,A){var z=y.mixin({},this._url.query,{f:"json"},u.toJson()),E=u.geometries[0].spatialReference,w=this._offsetHandler,D=this._errorHandler,r=new h(m._dfdCanceller);r._pendingDfd=f({url:this._url.path+"/offset",content:z,callbackParamName:"callback",load:function(v,
B){w(v,B,E,x,A,r)},error:function(v){D(v,A,r)}});return r},_offsetHandler:function(u,x,A,z,E,w){try{var D=[];q.forEach(u.geometries,function(r){D.push(n.fromJson(r).setSpatialReference(A))});this._successHandler([D],"onOffsetComplete",z,w)}catch(r){this._errorHandler(r,E,w)}},onOffsetComplete:function(){},distance:function(u,x,A){var z=y.mixin({},this._url.query,{f:"json"},u.toJson()),E=u.geometry1.spatialReference,w=this._distanceHandler,D=this._errorHandler,r=new h(m._dfdCanceller);r._pendingDfd=
f({url:this._url.path+"/distance",content:z,callbackParamName:"callback",load:function(v,B){w(v,B,E,x,A,r)},error:function(v){D(v,A,r)}});return r},_distanceHandler:function(u,x,A,z,E,w){try{u=u&&u.distance,this._successHandler([u],"onDistanceComplete",z,w)}catch(D){this._errorHandler(D,E,w)}},onDistanceComplete:function(){},toGeoCoordinateString:function(u,x,A){var z={};y.isObject(u.sr)?z.sr=u.sr.wkid||a.toJson(u.sr.toJson()):z.sr=u.sr;z.coordinates=a.toJson(u.coordinates);z.conversionType=u.conversionType||
"MGRS";z.conversionMode=u.conversionMode;z.numOfDigits=u.numOfDigits;z.rounding=u.rounding;z.addSpaces=u.addSpaces;u=y.mixin({},this._url.query,{f:"json"},z);var E=this._toGeoCoordinateHandler,w=this._errorHandler,D=new h(m._dfdCanceller);D._pendingDfd=f({url:this._url.path+"/toGeoCoordinateString",content:u,callbackParamName:"callback",load:function(r,v){E(r,v,x,A,D)},error:function(r){w(r,A,D)}});return D},_toGeoCoordinateHandler:function(u,x,A,z,E){try{this._successHandler([u.strings],"onToGeoCoordinateStringComplete",
A,E)}catch(w){this._errorHandler(w,z,E)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(u,x,A){var z={};y.isObject(u.sr)?z.sr=u.sr.wkid||a.toJson(u.sr.toJson()):z.sr=u.sr;z.strings=a.toJson(u.strings);z.conversionType=u.conversionType||"MGRS";z.conversionMode=u.conversionMode;u=y.mixin({},this._url.query,{f:"json"},z);var E=this._fromGeoCoordinateHandler,w=this._errorHandler,D=new h(m._dfdCanceller);D._pendingDfd=f({url:this._url.path+"/fromGeoCoordinateString",content:u,
callbackParamName:"callback",load:function(r,v){E(r,v,x,A,D)},error:function(r){w(r,A,D)}});return D},_fromGeoCoordinateHandler:function(u,x,A,z,E){try{this._successHandler([u.coordinates],"onToGeoCoordinateStringComplete",A,E)}catch(w){this._errorHandler(w,z,E)}},onFromGeoCoordinateStringComplete:function(){}});y.mixin(b,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});y.setObject("tasks.GeometryService",b,g);return b})},"arcgisonline/map/thumbnail/createThumbnailImage":function(){define("dojo/_base/lang arcgisonline/map/core/getScaleForExtent esri/kernel esri/tasks/PrintTemplate esri/tasks/PrintTask esri/tasks/PrintParameters".split(" "),
function(b,y,q,a,h,e){var g=window.esriGeowConfig;return function(f,m,l,d,c){for(var k=600,t=400,n=function(u){return d&&(u=y(f.extent,u),d[0].scale<u)?!1:!0};!n(k)&&!(k*=2,t*=2,1600<=k););n=new a;n.layout="MAP_ONLY";n.format="png32";n.preserveScale=!1;n.showAttribution=!1;n.showLabels=!1;n.exportOptions={width:k,height:t,dpi:96};c||(c=new h(g.self.helperServices.printTask.url,{}));k=new e;k.map=f;k.template=n;q.config.defaults.io.timeout=12E4;c.execute(k,b.hitch(this,function(u){q.config.defaults.io.timeout=
6E4;return m(u.url)}),b.hitch(this,function(u){q.config.defaults.io.timeout=6E4;if(l)return l(u)}))}})},"arcgisonline/map/core/getScaleForExtent":function(){define(["esri/config","esri/WKIDUnitConversion"],function(b,y){return function(q,a){var h=20015077/180,e=q.spatialReference;if(e){var g=e.wkid;var f=e.wkt}e=null;g?e=y.values[y[g]]:f&&-1!==f.search(/^PROJCS/i)&&(g=/UNIT\[([^\]]+)\]\]$/i.exec(f))&&g[1]&&(e=parseFloat(g[1].split(",")[1]));return q.getWidth()/a*(e||h)*39.37*b.defaults.screenDPI}})},
"esri/tasks/PrintTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.tasks.PrintTemplate",label:null,exportOptions:{width:800,height:1100,dpi:96},layoutOptions:null,format:"PNG32",layout:"MAP_ONLY",outScale:0,preserveScale:!0,forceFeatureAttributes:!1,showAttribution:null,showLabels:!0});y.setObject("tasks.PrintTemplate",b,a);return b})},"esri/tasks/PrintTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../lang ../layerUtils ../deferredUtils ../Color ../request ../urlUtils ../geometry/Polygon ../renderers/SimpleRenderer ../symbols/FillSymbol ./Geoprocessor ./PrintTemplate ./Task dojo/dom-attr dojo/dom-construct dojox/gfx/_base dojox/gfx/canvas dojox/json/query ./PrintParameters ./LegendLayer".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v){b=b(z,{declaredClass:"esri.tasks.PrintTask",constructor:function(B,C){this.url=B;this.printGp=new x(this.url);this._handler=y.hitch(this,this._handler);C&&C.async&&(this.async=!0);this._colorEvaluator=v("$..color")},async:!1,_vtlExtent:null,_cimVersion:null,_is11xService:!1,_loadGpServerMetadata:!0,execute:function(B,C,F){if(!this._loadGpServerMetadata)return this._execute(B,C,F);var G=new h(l._dfdCanceller),H=this._url.path,J=H.lastIndexOf("/GPServer/");
0<J&&(H=H.slice(0,J+9));G._pendingDfd=c({url:H,callbackParamName:"callback",content:y.mixin({},this._url.query,{f:"json"})}).then(y.hitch(this,function(I){this._loadGpServerMetadata=!1;this.async="esriExecutionTypeAsynchronous"===I.executionType;this._cimVersion=I.cimVersion;this._is11xService=!!this._cimVersion;G._pendingDfd=this._execute(B);return G._pendingDfd})).then(y.hitch(this,function(I){this._successHandler([I],null,C,G)})).otherwise(function(I){F&&F(I);G.errback(I)});return G},_handler:function(B,
C,F,G,H){try{if(this.async)"esriJobSucceeded"===B.jobStatus?this.printGp.getResultData(B.jobId,"Output_File",y.hitch(this,function(I){J=I.value;this._successHandler([J],"onComplete",F,H)})):this._errorHandler(Error(B.jobStatus),G,H);else{var J=B[0].value;this._successHandler([J],"onComplete",F,H)}}catch(I){this._errorHandler(I,G,H)}},_execute:function(B,C,F){var G=this._handler,H=this._errorHandler,J=B.template||new A;J.hasOwnProperty("showLabels")||(J.showLabels=!0);var I=J.exportOptions,K;I&&(K=
{outputSize:[I.width,I.height],dpi:I.dpi});I=J.layoutOptions;var R=[];if(I){this.legendAll=!1;I.legendLayers?q.forEach(I.legendLayers,function(Y){var ia={};ia.id=Y.layerId;Y.subLayerIds&&(ia.subLayerIds=Y.subLayerIds);R.push(ia)}):this.legendAll=!0;if("Miles"===I.scalebarUnit||"Kilometers"===I.scalebarUnit){var W="esriKilometers";var P="esriMiles"}else if("Meters"===I.scalebarUnit||"Feet"===I.scalebarUnit)W="esriMeters",P="esriFeet";var S={esriMiles:"mi",esriKilometers:"km",esriFeet:"ft",esriMeters:"m"};
S={titleText:I.titleText,authorText:I.authorText,copyrightText:I.copyrightText,customTextElements:I.customTextElements,scaleBarOptions:{metricUnit:W,metricLabel:S[W],nonMetricUnit:P,nonMetricLabel:S[P]},legendOptions:{operationalLayers:R}}}W=this._getPrintDefinition(B.map,J);B.outSpatialReference&&(W.mapOptions.spatialReference=B.outSpatialReference.toJson());B.template&&f.isDefined(B.template.showAttribution)&&(W.mapOptions.showAttribution=B.template.showAttribution);y.mixin(W,{exportOptions:K,layoutOptions:S});
this.allLayerslegend&&y.mixin(W.layoutOptions,{legendOptions:{operationalLayers:this.allLayerslegend}});if(W.operationalLayers){K=W.operationalLayers;var L=function(Y){return f.fixJson(y.mixin(Y,{type:"esriSLS",cap:void 0,join:void 0,meterLimit:void 0}))},aa=/[\u4E00-\u9FFF\u0E00-\u0E7F\u0900-\u097F\u3040-\u309F\u30A0-\u30FF\u31F0-\u31FF]/,ba=/[\u0600-\u06FF]/,O=function(Y){var ia=Y.text,oa=(Y=Y.font)&&Y.family&&Y.family.toLowerCase();ia&&Y&&("arial"===oa||"arial unicode ms"===oa)&&(Y.family=aa.test(ia)?
"Arial Unicode MS":"Arial","normal"!==Y.style&&ba.test(ia)&&(Y.family="Arial Unicode MS"))};for(S=0;S<K.length;S++)if(K[S].featureCollection&&K[S].featureCollection.layers)for(P=0;P<K[S].featureCollection.layers.length;P++){var V=K[S].featureCollection.layers[P];if(V.layerDefinition&&V.layerDefinition.drawingInfo&&V.layerDefinition.drawingInfo.renderer&&V.layerDefinition.drawingInfo.renderer.symbol){var X=V.layerDefinition.drawingInfo.renderer;"esriCLS"===X.symbol.type?X.symbol=L(X.symbol):"esriTS"===
X.symbol.type?O(X.symbol):X.symbol.outline&&"esriCLS"===X.symbol.outline.type&&(X.symbol.outline=L(X.symbol.outline))}if(V.featureSet&&V.featureSet.features)for(I=0;I<V.featureSet.features.length;I++)X=V.featureSet.features[I],X.symbol&&("esriCLS"===X.symbol.type?X.symbol=L(X.symbol):"esriTS"===X.symbol.type?O(X.symbol):X.symbol.outline&&"esriCLS"===X.symbol.outline.type&&(X.symbol.outline=L(X.symbol.outline)))}}J={Web_Map_as_JSON:a.toJson(f.fixJson(W)),Format:J.format,Layout_Template:J.layout};B.extraParameters&&
(J=y.mixin(J,B.extraParameters));var N=new h(l._dfdCanceller);B=function(Y,ia){G(Y,ia,C,F,N)};W=function(Y){H(Y,F,N)};N._pendingDfd=this.async?this.printGp.submitJob(J,B,null,W):this.printGp.execute(J,B,W);return N},onComplete:function(){},_createMultipointLayer:function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},_createPolygonLayer:function(){return{layerDefinition:{name:"polygonLayer",
geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},_createPointLayer:function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},_createPolylineLayer:function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",
features:[]}}},_convertSvgSymbol:function(B){if(!(8>=e("ie")||!B.path&&"image/svg+xml"!==B.contentType)){var C=r.createSurface(w.create("div"),1024,1024);var F="image/svg+xml"===B.contentType?C.createObject(r.Image,{src:"data:image/svg+xml;base64,"+B.imageData,width:D.pt2px(B.width),height:D.pt2px(B.height),x:0,y:0}):C.createObject(r.Path,B.path).setFill(B.color).setStroke(B.outline);"pendingRender"in C&&C._render(!0);var G=C.rawNode.getContext("2d"),H=Math.ceil(F.getBoundingBox().width),J=Math.ceil(F.getBoundingBox().height);
F=G.getImageData(F.getBoundingBox().x,F.getBoundingBox().y,H,J);G.canvas.width=H;G.canvas.height=J;G.putImageData(F,0,0);G=G.canvas.toDataURL("image/png");B={type:"esriPMS",imageData:G.substr(22,G.length),angle:B.angle,contentType:"image/png",height:B.size?B.size:D.px2pt(J),width:B.size?H/J*B.size:D.px2pt(H),xoffset:B.xoffset,yoffset:B.yoffset};C.destroy();return B}},_convertSvgRenderer:function(B){"simple"===B.type&&B.symbol&&(B.symbol.path||"image/svg+xml"===B.symbol.contentType)?B.symbol=this._convertSvgSymbol(B.symbol):
"uniqueValue"===B.type?(B.defaultSymbol&&(B.defaultSymbol.path||"image/svg+xml"===B.defaultSymbol.contentType)&&(B.defaultSymbol=this._convertSvgSymbol(B.defaultSymbol)),B.uniqueValueInfos&&q.forEach(B.uniqueValueInfos,function(C){if(C.symbol.path||"image/svg+xml"===C.symbol.contentType)C.symbol=this._convertSvgSymbol(C.symbol)},this)):"classBreaks"===B.type&&(B.defaultSymbol&&(B.defaultSymbol.path||"image/svg+xml"===B.defaultSymbol.contentType)&&(B.defaultSymbol=this._convertSvgSymbol(B.defaultSymbol)),
B.classBreakInfos&&q.forEach(B.classBreakInfos,function(C){if(C.symbol.path||"image/svg+xml"===C.symbol.contentType)C.symbol=this._convertSvgSymbol(C.symbol)},this))},_createFeatureCollection:function(B,C,F,G){var H=this._createPolygonLayer(),J=this._createPolylineLayer(),I=this._createPointLayer(),K=this._createMultipointLayer(),R=this._createPointLayer();R.layerDefinition.name="textLayer";delete R.layerDefinition.drawingInfo;if("esri.layers.FeatureLayer"===B.declaredClass||"esri.layers.StreamLayer"===
B.declaredClass)H.layerDefinition.name=J.layerDefinition.name=I.layerDefinition.name=K.layerDefinition.name=y.getObject("arcgisProps.title",!1,B)||B.name||B.id;var W=B.renderer&&"esri.renderer.SimpleRenderer"===B.renderer.declaredClass;if(!B.renderer||B.renderer.valueExpression||y.isFunction(B.renderer.attributeField))delete H.layerDefinition.drawingInfo,delete J.layerDefinition.drawingInfo,delete I.layerDefinition.drawingInfo,delete K.layerDefinition.drawingInfo;else{var P=B.renderer.toJson({useLegacyRotationProperties:!0});
if("temporal"===P.type){P={latestObservationRenderer:P.latestObservationRenderer,trackLinesRenderer:P.trackRenderer,observationAger:P.observationAger,renderer:P.observationRenderer};var S={};B._trackIdField&&(S.trackIdField=B._trackIdField);B._startTimeField&&(S.startTimeField=B._startTimeField);B._endTimeField&&(S.endTimeField=B._endTimeField);H.layerDefinition.drawingInfo=P;H.layerDefinition.timeInfo=S;J.layerDefinition.drawingInfo=P;J.layerDefinition.timeInfo=S;I.layerDefinition.drawingInfo=P;
I.layerDefinition.timeInfo=S;K.layerDefinition.drawingInfo=P;K.layerDefinition.timeInfo=S}else H.layerDefinition.drawingInfo.renderer=P,J.layerDefinition.drawingInfo.renderer=P,I.layerDefinition.drawingInfo.renderer=P,K.layerDefinition.drawingInfo.renderer=P}P=B.fields;P||!B.renderer||B.renderer.valueExpression||y.isFunction(B.renderer.attributeField)||("esri.renderer.ClassBreaksRenderer"===B.renderer.declaredClass?(P=[{name:B.renderer.attributeField,type:"esriFieldTypeDouble"}],B.renderer.normalizationField&&
P.push({name:B.renderer.normalizationField,type:"esriFieldTypeDouble"})):"esri.renderer.UniqueValueRenderer"===B.renderer.declaredClass&&(P=[{name:B.renderer.attributeField,type:"esriFieldTypeString"}],B.renderer.attributeField2&&P.push({name:B.renderer.attributeField2,type:"esriFieldTypeString"}),B.renderer.attributeField3&&P.push({name:B.renderer.attributeField3,type:"esriFieldTypeString"})));P&&(H.layerDefinition.fields=P,J.layerDefinition.fields=P,I.layerDefinition.fields=P,K.layerDefinition.fields=
P);P=B.graphics;B.isFeatureReductionActive&&B.isFeatureReductionActive()&&(P=B.getSingleGraphics());S=P.length;var L;for(L=0;L<S;L++){var aa=P[L];if(!1!==aa.visible&&aa.geometry){var ba=aa.toJson();ba.symbol&&ba.symbol.outline&&ba.symbol.outline.color&&ba.symbol.outline.color[3]&&!this._is11xService&&(ba.symbol.outline.color[3]=255);if(B.renderer&&!ba.symbol&&(y.isFunction(B.renderer.attributeField)||B.renderer.valueExpression||this._isFeatureCollectionRequired(B.renderer,B)||"esri.renderer.DotDensityRenderer"===
B.renderer.declaredClass||F)){F=F||B.renderer;var O=null;try{O=F.getSymbol(aa)}catch(V){}if(!O)continue;ba.symbol=O.toJson();this._isFeatureCollectionRequired(F,B)&&this._applyVisualVariables(ba.symbol,{renderer:F,graphic:aa,symbol:O,mapResolution:C&&C.getResolutionInMeters(),mapScale:C&&C.getScale()})}ba.symbol&&(ba.symbol.path||"image/svg+xml"===ba.symbol.contentType?ba.symbol=this._convertSvgSymbol(ba.symbol):ba.symbol.text&&delete ba.attributes);switch(aa.geometry.type){case "polygon":H.featureSet.features.push(ba);
break;case "polyline":J.featureSet.features.push(ba);break;case "point":ba.symbol&&ba.symbol.text?R.featureSet.features.push(ba):I.featureSet.features.push(ba);break;case "multipoint":K.featureSet.features.push(ba);break;case "extent":ba.geometry=t.fromExtent(aa.geometry).toJson(),H.featureSet.features.push(ba)}}}C=[];0<H.featureSet.features.length&&C.push(H);0<J.featureSet.features.length&&C.push(J);0<K.featureSet.features.length&&C.push(K);0<I.featureSet.features.length&&C.push(I);0<R.featureSet.features.length&&
C.push(R);if(!C.length)return null;q.forEach(C,function(V){var X=q.every(V.featureSet.features,function(N){return N.symbol});if(W||X)G&&G.forceFeatureAttributes||q.forEach(V.featureSet.features,function(N){delete N.attributes}),G.forceFeatureAttributes||delete V.layerDefinition.fields;X&&delete V.layerDefinition.drawingInfo});q.forEach(C,function(V){V.layerDefinition.drawingInfo&&V.layerDefinition.drawingInfo.renderer&&this._convertSvgRenderer(V.layerDefinition.drawingInfo.renderer)},this);return{id:B.id,
opacity:B.opacity,minScale:B.minScale||0,maxScale:B.maxScale||0,featureCollection:{layers:C}}},_getPrintDefinition:function(B,C){var F={operationalLayers:this._createOperationalLayers(B,C)},G=this._vtlExtent||B.extent,H=B.spatialReference;this._vtlExtent=null;B.spatialReference._isWrappable()&&(G=G._normalize(!0),H=G.spatialReference);G={mapOptions:{showAttribution:B.showAttribution,extent:G.toJson(),spatialReference:H.toJson()}};C.preserveScale&&y.mixin(G.mapOptions,{scale:C.outScale||B.getScale()});
B.timeExtent&&y.mixin(G.mapOptions,{time:[B.timeExtent.startTime.getTime(),B.timeExtent.endTime.getTime()]});B={};y.mixin(B,G,F);return B},_createOperationalLayers:function(B,C){var F,G=[],H=0;C.preserveScale&&(H=C.outScale||B.getScale());this.allLayerslegend=this.legendAll?[]:null;this._vtlExtent=null;var J=q.map(B.layerIds,B.getLayer,B);B._mapImageLyr&&J.push(B._mapImageLyr);for(F=0;F<J.length;F++){var I=J[F];if(I.loaded&&I.visible&&(!H||I.isVisibleAtScale(H))){var K=I.declaredClass;var R={id:I.id,
title:y.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0};R=y.mixin(R,this._getUrlAndToken(I));I.getNode()&&E.get(I.getNode(),"data-reference")&&(R._isRefLayer=!0);switch(K){case "esri.layers.ArcGISDynamicMapServiceLayer":var W=[];K=!!I._params.layers;if(I._params.dynamicLayers)K=C.outScale?I._getDynLayerObjs(C.outScale):a.fromJson(I._params.dynamicLayers),q.forEach(K,function(ba){W.push({id:ba.id,name:ba.name,layerDefinition:ba});delete ba.id;
delete ba.name;delete ba.maxScale;delete ba.minScale}),0===W.length&&(R.visibleLayers=[-1]);else if(I.supportsDynamicLayers){if(K||I.layerDefinitions||I.layerTimeOptions){var P=I.createDynamicLayerInfosFromLayerInfos(),S=null;K&&(S=I.visibleLayers);S=m._getVisibleLayers(P,S);var L=m._getLayersForScale(C.outScale||B.getScale(),P);q.forEach(P,function(ba){if(!ba.subLayerIds){var O=ba.id;-1<q.indexOf(S,O)&&-1<q.indexOf(L,O)&&(ba={source:ba.source.toJson()},I.layerDefinitions&&I.layerDefinitions[O]&&
(ba.definitionExpression=I.layerDefinitions[O]),I.layerTimeOptions&&I.layerTimeOptions[O]&&(ba.layerTimeOptions=I.layerTimeOptions[O].toJson()),W.push({id:O,layerDefinition:ba}))}});0===W.length&&(R.visibleLayers=[-1])}}else q.forEach(I.layerInfos,function(ba){var O={id:ba.id,layerDefinition:{}};I.layerDefinitions&&I.layerDefinitions[ba.id]&&(O.layerDefinition.definitionExpression=I.layerDefinitions[ba.id]);I.layerTimeOptions&&I.layerTimeOptions[ba.id]&&(O.layerDefinition.layerTimeOptions=I.layerTimeOptions[ba.id].toJson());
(O.layerDefinition.definitionExpression||O.layerDefinition.layerTimeOptions)&&W.push(O)}),K&&(R.visibleLayers=I.visibleLayers.length?I.visibleLayers:[-1]);W.length&&(R.layers=W);G.push(R);this.allLayerslegend&&this.allLayerslegend.push({id:I.id,subLayerIds:I.visibleLayers});break;case "esri.layers.ArcGISImageServiceLayer":R=y.mixin(R,{url:I.url,bandIds:I.bandIds,compressionQuality:I.compressionQuality,format:I.format,interpolation:I.interpolation});I.mosaicRule&&y.mixin(R,{mosaicRule:I.mosaicRule.toJson()});
if(I.renderingRule||I.renderer)this._is11xService?(I.renderingRule&&(R.renderingRule=I.renderingRule.toJson()),I.renderer&&(R.layerDefinition=R.layerDefinition||{},R.layerDefinition.drawingInfo=R.layerDefinition.drawingInfo||{},R.layerDefinition.drawingInfo.renderer=I.renderer.toJson())):(K=I.getExportImageRenderingRule())&&y.mixin(R,{renderingRule:K.toJson()});G.push(R);this.allLayerslegend&&this.allLayerslegend.push({id:I.id});break;case "esri.layers.RasterXLayer":this._is11xService&&(R=y.mixin(R,
{url:I.url,bandIds:I.bandIds,interpolation:I.interpolation}),I.renderer&&(R.layerDefinition=R.layerDefinition||{},R.layerDefinition.drawingInfo=R.layerDefinition.drawingInfo||{},R.layerDefinition.drawingInfo.renderer=I.renderer.toJson()),G.push(R),this.allLayerslegend&&this.allLayerslegend.push({id:I.id}));break;case "esri.layers.WMSLayer":R=y.mixin(R,{url:I.url,title:I.title,type:"wms",version:I.version,transparentBackground:I.imageTransparency,visibleLayers:I.visibleLayers});G.push(R);this.allLayerslegend&&
this.allLayerslegend.push({id:I.id,subLayerIds:I.visibleLayers});break;case "esri.virtualearth.VETiledLayer":K=I.mapStyle;"roadOnDemand"===K?K="Road":"aerialWithLabelsOnDemand"===K&&(K="Hybrid");R=y.mixin(R,{visibility:I.visible,type:"BingMaps"+K,culture:I.culture,key:I.bingMapsKey});G.push(R);break;case "esri.layers.OpenStreetMapLayer":R=y.mixin(R,{credits:I.copyright,type:"OpenStreetMap",url:k.getAbsoluteUrl(I.tileServers[0])});G.push(R);break;case "esri.layers.WMTSLayer":R=y.mixin(R,{url:I.url,
type:"wmts",layer:I._identifier,style:I._style,format:I.format,tileMatrixSet:I._tileMatrixSetId});G.push(R);break;case "esri.layers.MapImageLayer":K=I.getImages();q.forEach(K,function(ba,O){ba.visible&&ba.href&&(R={id:I.id+"_image"+O,type:"image",title:I.id,minScale:I.minScale||0,maxScale:I.maxScale||0,opacity:I.opacity*ba.opacity,extent:ba.extent.toJson()},"data:image/png;base64,"===ba.href.substr(0,22)?R.imageData=ba.href.substr(22):R.url=ba.href,G.push(R))});break;case "esri.layers.VectorTileLayer":delete R.url;
delete R.token;if(this._is11xService&&I.currentStyleInfo.serviceUrl&&I.currentStyleInfo.styleUrl&&(K=g.id&&g.id.findCredential(I.currentStyleInfo.styleUrl),P=g.id&&g.id.findCredential(I.currentStyleInfo.serviceUrl),!K&&!P||"2.1.0"!==this._cimVersion)){R.type="VectorTileLayer";R.styleUrl=I.currentStyleInfo.styleUrl;K&&(R.token=K.token);P&&P.token!==R.token&&(R.additionalTokens=[{url:I.currentStyleInfo.serviceUrl,token:P.token}]);G.push(R);break}R.type="image";K=this._vtlExtent||B.extent.offset(0,0);
var aa=C.exportOptions&&C.exportOptions.dpi||96;P={format:"png",pixelRatio:aa/96};"MAP_ONLY"!==C.layout||!C.preserveScale||C.outScale&&C.outScale!==B.getScale()||96!==aa||!C.exportOptions||C.exportOptions.width%2===B.width%2&&C.exportOptions.height%2===B.height%2||(P.area={x:0,y:0,width:B.width,height:B.height},C.exportOptions.width%2!==B.width%2&&--P.area.width,C.exportOptions.height%2!==B.height%2&&--P.area.height,this._vtlExtent||(aa=B.toMap({x:P.area.width,y:P.area.height}),K.update(K.xmin,aa.y,
aa.x,K.ymax,K.spatialReference),this._vtlExtent=K));R.extent=K._normalize(!0).toJson();K=I.takeScreenshot(P);K.isResolved()&&K.then(function(ba){"data:image/png;base64,"===ba.dataURL.substr(0,22)&&(R.imageData=ba.dataURL.substr(22))});R.imageData&&G.push(R);break;case "esri.layers.WebTiledLayer":K=I.url.replace(/\$\{/g,"{");R=y.mixin(R,{type:"WebTiledLayer",urlTemplate:K,credits:I.copyright});I.subDomains&&0<I.subDomains.length&&(R.subDomains=I.subDomains);I._wmtsInfo&&(R.wmtsInfo=I._wmtsInfo);delete R.url;
G.push(R);break;default:if(I.getTileUrl||I.getImageUrl)R=y.mixin(R,{url:I.url}),G.push(R)}}}J=q.map(B.graphicsLayerIds,B.getLayer,B);for(F=0;F<J.length;F++)I=J[F],I.isFeatureReductionActive&&I.isFeatureReductionActive()&&(I.getSingleGraphics().length?J.splice(++F,0,I.getFeatureReductionLayer()):J[F]=I.getFeatureReductionLayer());for(F=0;F<J.length;F++)if(I=J[F],I.loaded&&I.visible&&(!H||I.isVisibleAtScale(H)))switch(K=I.declaredClass,K){case "esri.layers.CSVLayer":if(this._is11xService){R={id:I.id,
url:I.url,title:I.title,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0,type:"CSV",locationInfo:{latitudeFieldName:I.latitudeFieldName,longitudeFieldName:I.longitudeFieldName},layerDefinition:{drawingInfo:{renderer:I.renderer&&I.renderer.toJson({useLegacyRotationProperties:!0})}}};G.push(R);break}case "esri.layers.FeatureLayer":case "esri.layers.LabelLayer":case "esri.layers.StreamLayer":if("esri.layers.LabelLayer"===K&&!C.showLabels||I.renderer&&"esri.renderer.HeatmapRenderer"===
I.renderer.declaredClass)continue;K=null;I.url&&I.renderer&&("esri.renderer.ScaleDependentRenderer"===I.renderer.declaredClass?"scale"===I.renderer.rangeType?K=I.renderer.getRendererInfoByScale(B.getScale())&&I.renderer.getRendererInfoByScale(B.getScale()).renderer:"zoom"===I.renderer.rangeType&&(K=I.renderer.getRendererInfoByZoom(B.getZoom())&&I.renderer.getRendererInfoByZoom(B.getZoom()).renderer):K=I.renderer);P=K&&"esri.layers.CSVLayer"!==I.declaredClass&&!this._isFeatureCollectionRequired(K,
I)&&!K.valueExpression;aa=I.isFeatureReductionActive&&I.isFeatureReductionActive();if(K&&!aa&&"esri.renderer.DotDensityRenderer"!==K.declaredClass&&"esri.layers.StreamLayer"!==I.declaredClass&&(this._is11xService||P)&&("esri.renderer.SimpleRenderer"===K.declaredClass||"esri.renderer.TemporalRenderer"===K.declaredClass||null==K.attributeField||y.isString(K.attributeField)&&I._getField(K.attributeField,!0)))if(R={id:I.id,title:y.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||
0,maxScale:I.maxScale||0,layerDefinition:{drawingInfo:{renderer:K.toJson({useLegacyRotationProperties:!0})}}},R=y.mixin(R,this._getUrlAndToken(I)),"esri.renderer.TemporalRenderer"===K.declaredClass&&(P=R.layerDefinition.drawingInfo,P.latestObservationRenderer=P.renderer.latestObservationRenderer,P.trackLinesRenderer=P.renderer.trackRenderer,P.observationAger=P.renderer.observationAger,P.renderer=P.renderer.observationRenderer,I._trackIdField&&(R.layerDefinition.timeInfo={trackIdField:I._trackIdField})),
this._convertSvgRenderer(R.layerDefinition.drawingInfo.renderer),this._is11xService||1>I.opacity||"esri.renderer.TemporalRenderer"===K.declaredClass||this._updateLayerOpacity(R))if(I._params.source&&(K=I._params.source.toJson(),y.mixin(R.layerDefinition,{source:K})),I.getDefinitionExpression()&&y.mixin(R.layerDefinition,{definitionExpression:I.getDefinitionExpression()}),2!==I.mode)0<I.getSelectedFeatures().length&&(K=q.map(I.getSelectedFeatures(),function(ba){return ba.attributes[I.objectIdField]}),
0<K.length&&I.getSelectionSymbol()&&y.mixin(R,{selectionObjectIds:K,selectionSymbol:I.getSelectionSymbol().toJson()}));else{K=q.map(I.getSelectedFeatures(),function(ba){return ba.attributes[I.objectIdField]});if(0===K.length||!I._params.drawMode)break;y.mixin(R.layerDefinition,{objectIds:K});K=null;I.getSelectionSymbol()&&(K=new n(I.getSelectionSymbol()));y.mixin(R.layerDefinition.drawingInfo,{renderer:K&&K.toJson()})}else R=this._createFeatureCollection(I,B,null,C);else R=K&&(K.valueExpression||
this._isFeatureCollectionRequired(K,I)||"esri.renderer.DotDensityRenderer"===K.declaredClass)?this._createFeatureCollection(I,B,K,C):this._createFeatureCollection(I,B,null,C);if(!R)continue;G.push(R);this.allLayerslegend&&this.allLayerslegend.push({id:I.id});break;case "esri.layers._GraphicsLayer":case "esri.layers.GraphicsLayer":case "esri.layers.WFSLayer":R=this._createFeatureCollection(I,B,null,C);if(!R)continue;G.push(R);this.allLayerslegend&&this.allLayerslegend.push({id:I.id});break;case "esri.layers.ArcGISImageServiceVectorLayer":R=
{id:I.id,title:y.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0,visibility:I.visible,symbolTileSize:I.symbolTileSize,layerDefinition:{drawingInfo:{renderer:I.renderer.toJson({useLegacyRotationProperties:!0})}}},R=y.mixin(R,this._getUrlAndToken(I)),I.mosaicRule&&y.mixin(R,{mosaicRule:I.mosaicRule.toJson()}),G.push(R),this.allLayerslegend&&this.allLayerslegend.push({id:I.id})}H&&q.forEach(G,function(ba){ba.minScale=0;ba.maxScale=0});B.graphics&&
0<B.graphics.graphics.length&&(R=this._createFeatureCollection(B.graphics,B,null,C))&&G.push(R);B._labels&&C.showLabels&&(R=this._createFeatureCollection(B._labels,B,null,C))&&G.push(R);q.forEach(G,function(ba,O,V){ba._isRefLayer&&(delete ba._isRefLayer,V.splice(O,1),V.push(ba))});return G},_getUrlAndToken:function(B){return{token:B._getToken(),url:B._url?B._url.path:null}},_updateLayerOpacity:function(B){var C=this._colorEvaluator(B);C=q.filter(C,function(J){return y.isArray(J)&&4===J.length});var F=
!0;if(C.length){var G=C[0][3],H;for(H=1;H<C.length;H++)if(G!==C[H][3]){F=!1;break}if(F)for(B.opacity=G/255,H=0;H<C.length;H++)C[H][3]=255}return F},_isFeatureCollectionRequired:function(B,C){if(C&&C.isFeatureReductionActive&&C.isFeatureReductionActive())return!0;var F=!1;if(C=this._getVariable(B,"rotationInfo",!1))F=(F=C.field)&&y.isFunction(F)||C.valueExpression;return B.hasVisualVariables("sizeInfo")||B.hasVisualVariables("colorInfo")||B.hasVisualVariables("opacityInfo")||F},_getVariable:function(B,
C,F){if(B)var G=(B=B.getVisualVariablesForType(C,F))&&B[0];return G},_applyVisualVariables:function(B,C){var F=C.renderer,G=C.graphic,H=C.symbol,J=C.mapResolution,I=C.mapScale,K=H.type;if("textsymbol"!==K&&"shieldlabelsymbol"!==K){var R=this._getVariable(F,"sizeInfo",!1),W=this._getVariable(F,"colorInfo",!1),P=this._getVariable(F,"opacityInfo",!1);C=this._getVariable(F,"rotationInfo",!1);H instanceof u&&(R=this._getVariable(F,"sizeInfo","outline")||R);J=R?F.getSize(G,{sizeInfo:R,shape:"simplemarkersymbol"===
K?H.style:null,resolution:J,scale:I}):G.size;null!=J&&("simplemarkersymbol"===K?B.size=D.px2pt(J):"picturemarkersymbol"===K?(I=H.width/H.height*J,B.width=D.px2pt(I),B.height=D.px2pt(J),0!==H.xoffset&&(B.xoffset=D.px2pt(H.xoffset/H.width*I)),0!==H.yoffset&&(B.yoffset=D.px2pt(H.yoffset/H.height*J))):"simplelinesymbol"===K?B.width=D.px2pt(J):B.outline&&(B.outline.width=D.px2pt(J)));W&&(!(H=F.getColor(G,{colorInfo:W}))||"simplemarkersymbol"!==K&&"simplelinesymbol"!==K&&"simplefillsymbol"!==K||(B.color=
d.toJsonColor(H)));P&&(H=F.getOpacity(G,{opacityInfo:P}),null!=H&&B.color&&(B.color[3]=Math.round(255*H)));C&&(F=F.getRotationAngle(G,{rotationInfo:C}))&&(B.angle=-F)}}});y.setObject("tasks.PrintTask",b,g);return b})},"dojox/gfx/canvas":function(){define("./_base dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/window dojo/dom-geometry dojo/dom ./shape ./path ./arc ./matrix ./decompose ./bezierutils".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k){function t(W,P,S,L,aa,ba,O,V,X,N){var Y=
P.length,ia=0;if(N){var oa=N.l/aa;ia=N.i}else oa=P[0]/aa;for(;ba<O;){if(ba+oa>O){var sa={l:(ba+oa-O)*aa,i:ia};oa=O-ba}ia%2||(W.beginPath(),W.arc(S,L,aa,ba,ba+oa,V),X&&W.stroke());ba+=oa;++ia;oa=P[ia%Y]/aa}return sa}function n(W,P,S,L){var aa=0,ba=0,O=0;if(L){var V=L.l;O=L.i}else V=P[0];for(;1>ba;)ba=k.tAtLength(W,V),1==ba&&(aa=k.computeLength(W),aa={l:V-aa,i:O}),W=k.splitBezierAtT(W,ba),O%2||S.push(W[0]),W=W[1],++O,V=P[O%P.length];return aa}function u(W,P,S,L){var aa=[P.last.x,P.last.y].concat(S),
ba=!(W instanceof Array);S=4===S.length?"quadraticCurveTo":"bezierCurveTo";var O=[];P=n(aa,P.canvasDash,O,L);for(L=0;L<O.length;++L)aa=O[L],ba?(W.moveTo(aa[0],aa[1]),W[S].apply(W,aa.slice(2))):(W.push("moveTo",[aa[0],aa[1]]),W.push(S,aa.slice(2)));return P}function x(W,P,S,L,aa,ba,O){var V=0,X=0,N=0,Y=k.distance(S,L,aa,ba),ia=0;P=P.canvasDash;var oa=S,sa=L,Ba=!(W instanceof Array);O?(N=O.l,ia=O.i):N+=P[0];for(;.01<Math.abs(1-X);){N>Y&&(V={l:N-Y,i:ia},N=Y);X=N/Y;O=S+(aa-S)*X;var Da=L+(ba-L)*X;ia++%
2||(Ba?(W.moveTo(oa,sa),W.lineTo(O,Da)):(W.push("moveTo",[oa,sa]),W.push("lineTo",[O,Da])));oa=O;sa=Da;N+=P[ia%P.length]}return V}var A=b.canvas={},z=null,E=d.multiplyPoint,w=Math.PI,D=2*w,r=w/2;c=y.extend;if(h.global.CanvasRenderingContext2D){h=h.doc.createElement("canvas").getContext("2d");var v="function"==typeof h.setLineDash,B="function"==typeof h.fillText}var C={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,
3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};A.Shape=a("dojox.gfx.canvas.Shape",f.Shape,{_render:function(W){W.save();this._renderTransform(W);this._renderClip(W);this._renderShape(W);this._renderFill(W,!0);this._renderStroke(W,!0);W.restore()},_renderClip:function(W){this.canvasClip&&(this.canvasClip.render(W),W.clip())},_renderTransform:function(W){if("canvasTransform"in this){var P=this.canvasTransform;W.translate(P.dx,P.dy);W.rotate(P.angle2);W.scale(P.sx,P.sy);W.rotate(P.angle1)}},
_renderShape:function(W){},_renderFill:function(W,P){if("canvasFill"in this){var S=this.fillStyle;if("canvasFillImage"in this){var L=S.width,aa=S.height,ba=this.canvasFillImage.width,O=this.canvasFillImage.height,V=Math.min(L==ba?1:L/ba,aa==O?1:aa/O),X=(L-V*ba)/2,N=(aa-V*O)/2;z.width=L;z.height=aa;var Y=z.getContext("2d");Y.clearRect(0,0,L,aa);Y.drawImage(this.canvasFillImage,0,0,ba,O,X,N,V*ba,V*O);this.canvasFill=W.createPattern(z,"repeat");delete this.canvasFillImage}W.fillStyle=this.canvasFill;
P&&("pattern"!==S.type||0===S.x&&0===S.y||W.translate(S.x,S.y),W.fill())}else W.fillStyle="rgba(0,0,0,0.0)"},_renderStroke:function(W,P){var S=this.strokeStyle;S?(W.strokeStyle=S.color.toString(),W.lineWidth=S.width,W.lineCap=S.cap,"number"==typeof S.join?(W.lineJoin="miter",W.miterLimit=S.join):W.lineJoin=S.join,this.canvasDash?v?(W.setLineDash(this.canvasDash),P&&W.stroke()):this._renderDashedStroke(W,P):P&&W.stroke()):P||(W.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(W,P){},getEventSource:function(){return null},
on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,setClip:function(W){this.inherited(arguments);var P=W?"width"in W?"rect":"cx"in W?"ellipse":"points"in W?"polyline":"d"in W?"path":null:null;if(W&&!P)return this;this.canvasClip=W?F(P,W):null;this.parent&&this.parent._makeDirty();return this}});var F=function(W,P){switch(W){case "ellipse":return{canvasEllipse:I({shape:P}),render:function(S){return A.Ellipse.prototype._renderShape.call(this,S)}};case "rect":return{shape:y.delegate(P,
{r:0}),render:function(S){return A.Rect.prototype._renderShape.call(this,S)}};case "path":return{canvasPath:G(P),render:function(S){this.canvasPath._renderShape(S)}};case "polyline":return{canvasPolyline:P.points,render:function(S){return A.Polyline.prototype._renderShape.call(this,S)}}}return null},G=function(W){var P=new dojox.gfx.canvas.Path;P.canvasPath=[];P._setPath(W.d);return P},H=function(W,P,S){var L=W.prototype[P];W.prototype[P]=S?function(){this.parent&&this.parent._makeDirty();L.apply(this,
arguments);S.call(this);return this}:function(){this.parent&&this.parent._makeDirty();return L.apply(this,arguments)}};H(A.Shape,"setTransform",function(){this.matrix?this.canvasTransform=b.decompose(this.matrix):delete this.canvasTransform});H(A.Shape,"setFill",function(){var W=this.fillStyle;if(W){if("object"==typeof W&&"type"in W){var P=this.surface.rawNode.getContext("2d");switch(W.type){case "linear":case "radial":var S="linear"==W.type?P.createLinearGradient(W.x1,W.y1,W.x2,W.y2):P.createRadialGradient(W.cx,
W.cy,0,W.cx,W.cy,W.r);q.forEach(W.colors,function(L){S.addColorStop(L.offset,b.normalizeColor(L.color).toString())});break;case "pattern":z||(z=document.createElement("canvas")),P=new Image,this.surface.downloadImage(P,W.src),this.canvasFillImage=P}}else S=W.toString();this.canvasFill=S}else delete this.canvasFill});H(A.Shape,"setStroke",function(){var W=this.strokeStyle;if(W){var P=this.strokeStyle.style.toLowerCase();P in C&&(P=C[P]);if(P instanceof Array){this.canvasDash=P=P.slice();var S;for(S=
0;S<P.length;++S)P[S]*=W.width;if("butt"!=W.cap){for(S=0;S<P.length;S+=2)P[S]-=W.width,1>P[S]&&(P[S]=1);for(S=1;S<P.length;S+=2)P[S]+=W.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!v&&!!this.canvasDash});H(A.Shape,"setShape");A.Group=a("dojox.gfx.canvas.Group",A.Shape,{constructor:function(){f.Container._init.call(this)},_render:function(W){W.save();this._renderTransform(W);this._renderClip(W);for(var P=0;P<this.children.length;++P)this.children[P]._render(W);W.restore()},
destroy:function(){f.Container.clear.call(this,!0);A.Shape.prototype.destroy.apply(this,arguments)}});A.Rect=a("dojox.gfx.canvas.Rect",[A.Shape,f.Rect],{_renderShape:function(W){var P=this.shape,S=Math.min(P.r,P.height/2,P.width/2),L=P.x,aa=L+P.width,ba=P.y;P=ba+P.height;var O=L+S,V=aa-S,X=ba+S,N=P-S;W.beginPath();W.moveTo(O,ba);S?(W.arc(V,X,S,-r,0,!1),W.arc(V,N,S,0,r,!1),W.arc(O,N,S,r,w,!1),W.arc(O,X,S,w,w+r,!1)):(W.lineTo(V,ba),W.lineTo(aa,N),W.lineTo(O,P),W.lineTo(L,X));W.closePath()},_renderDashedStroke:function(W,
P){var S=this.shape,L=Math.min(S.r,S.height/2,S.width/2),aa=S.x,ba=aa+S.width,O=S.y,V=O+S.height,X=aa+L,N=ba-L,Y=O+L,ia=V-L;L?(W.beginPath(),S=x(W,this,X,O,N,O),P&&W.stroke(),S=t(W,this.canvasDash,N,Y,L,-r,0,!1,P,S),W.beginPath(),S=x(W,this,ba,Y,ba,ia,S),P&&W.stroke(),S=t(W,this.canvasDash,N,ia,L,0,r,!1,P,S),W.beginPath(),S=x(W,this,N,V,X,V,S),P&&W.stroke(),S=t(W,this.canvasDash,X,ia,L,r,w,!1,P,S),W.beginPath(),S=x(W,this,aa,ia,aa,Y,S),P&&W.stroke(),t(W,this.canvasDash,X,Y,L,w,w+r,!1,P,S)):(W.beginPath(),
S=x(W,this,X,O,N,O),S=x(W,this,N,O,ba,ia,S),S=x(W,this,ba,ia,X,V,S),x(W,this,X,V,aa,Y,S),P&&W.stroke())}});var J=[];(function(){var W=l.curvePI4;J.push(W.s,W.c1,W.c2,W.e);for(var P=45;360>P;P+=45){var S=d.rotateg(P);J.push(E(S,W.c1),E(S,W.c2),E(S,W.e))}})();var I=function(W){var P=[],S=W.shape,L=d.normalize([d.translate(S.cx,S.cy),d.scale(S.rx,S.ry)]);var aa=E(L,J[0]);P.push([aa.x,aa.y]);for(S=1;S<J.length;S+=3){var ba=E(L,J[S]);var O=E(L,J[S+1]);aa=E(L,J[S+2]);P.push([ba.x,ba.y,O.x,O.y,aa.x,aa.y])}if(W._needsDash){aa=
[];ba=P[0];for(S=1;S<P.length;++S)O=[],n(ba.concat(P[S]),W.canvasDash,O),ba=[P[S][4],P[S][5]],aa.push(O);W._dashedPoints=aa}return P};A.Ellipse=a("dojox.gfx.canvas.Ellipse",[A.Shape,f.Ellipse],{setShape:function(){this.inherited(arguments);this.canvasEllipse=I(this);return this},setStroke:function(){this.inherited(arguments);v||(this.canvasEllipse=I(this));return this},_renderShape:function(W){var P=this.canvasEllipse,S;W.beginPath();W.moveTo.apply(W,P[0]);for(S=1;S<P.length;++S)W.bezierCurveTo.apply(W,
P[S]);W.closePath()},_renderDashedStroke:function(W,P){var S=this._dashedPoints;W.beginPath();for(var L=0;L<S.length;++L)for(var aa=S[L],ba=0;ba<aa.length;++ba){var O=aa[ba];W.moveTo(O[0],O[1]);W.bezierCurveTo(O[2],O[3],O[4],O[5],O[6],O[7])}P&&W.stroke()}});A.Circle=a("dojox.gfx.canvas.Circle",[A.Shape,f.Circle],{_renderShape:function(W){var P=this.shape;W.beginPath();W.arc(P.cx,P.cy,P.r,0,D,1)},_renderDashedStroke:function(W,P){var S=this.shape,L=0,aa=this.canvasDash.length;for(i=0;L<D;){var ba=
this.canvasDash[i%aa]/S.r;i%2||(W.beginPath(),W.arc(S.cx,S.cy,S.r,L,L+ba,0),P&&W.stroke());L+=ba;++i}}});A.Line=a("dojox.gfx.canvas.Line",[A.Shape,f.Line],{_renderShape:function(W){var P=this.shape;W.beginPath();W.moveTo(P.x1,P.y1);W.lineTo(P.x2,P.y2)},_renderDashedStroke:function(W,P){var S=this.shape;W.beginPath();x(W,this,S.x1,S.y1,S.x2,S.y2);P&&W.stroke()}});A.Polyline=a("dojox.gfx.canvas.Polyline",[A.Shape,f.Polyline],{setShape:function(){this.inherited(arguments);var W=this.shape.points,P=W[0],
S;this.bbox=null;this._normalizePoints();if(W.length)if("number"==typeof P)P=W;else for(P=[],S=0;S<W.length;++S){var L=W[S];P.push(L.x,L.y)}else P=[];this.canvasPolyline=P;return this},_renderShape:function(W){var P=this.canvasPolyline;if(P.length){W.beginPath();W.moveTo(P[0],P[1]);for(var S=2;S<P.length;S+=2)W.lineTo(P[S],P[S+1])}},_renderDashedStroke:function(W,P){var S=this.canvasPolyline,L=0;W.beginPath();for(var aa=0;aa<S.length;aa+=2)L=x(W,this,S[aa],S[aa+1],S[aa+2],S[aa+3],L);P&&W.stroke()}});
A.Image=a("dojox.gfx.canvas.Image",[A.Shape,f.Image],{setShape:function(){this.inherited(arguments);var W=new Image;this.surface.downloadImage(W,this.shape.src);this.canvasImage=W;return this},_renderShape:function(W){var P=this.shape;W.drawImage(this.canvasImage,P.x,P.y,P.width,P.height)}});A.Text=a("dojox.gfx.canvas.Text",[A.Shape,f.Text],{_setFont:function(){this.fontStyle?this.canvasFont=b.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var W=this.shape,P=0;if(W.text){var S=
this.surface.rawNode.getContext("2d");S.save();this._renderTransform(S);this._renderFill(S,!1);this._renderStroke(S,!1);this.canvasFont&&(S.font=this.canvasFont);P=S.measureText(W.text).width;S.restore()}return P},_render:function(W){W.save();this._renderTransform(W);this._renderFill(W,!1);this._renderStroke(W,!1);this._renderShape(W);W.restore()},_renderShape:function(W){var P=this.shape;P.text&&(W.textAlign="middle"===P.align?"center":P.align,this.canvasFont&&(W.font=this.canvasFont),this.canvasFill&&
W.fillText(P.text,P.x,P.y),this.strokeStyle&&(W.beginPath(),W.strokeText(P.text,P.x,P.y),W.closePath()))}});H(A.Text,"setFont");B||A.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var K={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",
A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};A.Path=a("dojox.gfx.canvas.Path",[A.Shape,m.Path],{constructor:function(){this.lastControl={}},setShape:function(){this.canvasPath=[];this._dashedPath=[];return this.inherited(arguments)},setStroke:function(){this.inherited(arguments);v||(this.segmented=!1,this._confirmSegmented());return this},_setPath:function(){this._dashResidue=null;this.inherited(arguments)},_updateWithSegment:function(W){var P=y.clone(this.last);this[K[W.action]](this.canvasPath,
W.action,W.args,this._needsDash?this._dashedPath:null);this.last=P;this.inherited(arguments)},_renderShape:function(W){var P=this.canvasPath;W.beginPath();for(var S=0;S<P.length;S+=2)W[P[S]].apply(W,P[S+1])},_renderDashedStroke:v?function(){}:function(W,P){var S=this._dashedPath;W.beginPath();for(var L=0;L<S.length;L+=2)W[S[L]].apply(W,S[L+1]);P&&W.stroke()},_moveToA:function(W,P,S,L){W.push("moveTo",[S[0],S[1]]);L&&L.push("moveTo",[S[0],S[1]]);for(P=2;P<S.length;P+=2)W.push("lineTo",[S[P],S[P+1]]),
L&&(this._dashResidue=x(L,this,S[P-2],S[P-1],S[P],S[P+1],this._dashResidue));this.last.x=S[S.length-2];this.last.y=S[S.length-1];this.lastControl={}},_moveToR:function(W,P,S,L){P="x"in this.last?[this.last.x+=S[0],this.last.y+=S[1]]:[this.last.x=S[0],this.last.y=S[1]];W.push("moveTo",P);L&&L.push("moveTo",P);for(P=2;P<S.length;P+=2)W.push("lineTo",[this.last.x+=S[P],this.last.y+=S[P+1]]),L&&(this._dashResidue=x(L,this,L[L.length-1][0],L[L.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl=
{}},_lineToA:function(W,P,S,L){for(P=0;P<S.length;P+=2)L&&(this._dashResidue=x(L,this,this.last.x,this.last.y,S[P],S[P+1],this._dashResidue)),W.push("lineTo",[S[P],S[P+1]]);this.last.x=S[S.length-2];this.last.y=S[S.length-1];this.lastControl={}},_lineToR:function(W,P,S,L){for(P=0;P<S.length;P+=2)W.push("lineTo",[this.last.x+=S[P],this.last.y+=S[P+1]]),L&&(this._dashResidue=x(L,this,L[L.length-1][0],L[L.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(W,
P,S,L){for(P=0;P<S.length;++P)W.push("lineTo",[S[P],this.last.y]),L&&(this._dashResidue=x(L,this,L[L.length-1][0],L[L.length-1][1],S[P],this.last.y,this._dashResidue));this.last.x=S[S.length-1];this.lastControl={}},_hLineToR:function(W,P,S,L){for(P=0;P<S.length;++P)W.push("lineTo",[this.last.x+=S[P],this.last.y]),L&&(this._dashResidue=x(L,this,L[L.length-1][0],L[L.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(W,P,S,L){for(P=0;P<S.length;++P)W.push("lineTo",
[this.last.x,S[P]]),L&&(this._dashResidue=x(L,this,L[L.length-1][0],L[L.length-1][1],this.last.x,S[P],this._dashResidue));this.last.y=S[S.length-1];this.lastControl={}},_vLineToR:function(W,P,S,L){for(P=0;P<S.length;++P)W.push("lineTo",[this.last.x,this.last.y+=S[P]]),L&&(this._dashResidue=x(L,this,L[L.length-1][0],L[L.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(W,P,S,L){for(P=0;P<S.length;P+=6)W.push("bezierCurveTo",S.slice(P,P+6)),L&&(this._dashResidue=
u(L,this,W[W.length-1],this._dashResidue));this.last.x=S[S.length-2];this.last.y=S[S.length-1];this.lastControl.x=S[S.length-4];this.lastControl.y=S[S.length-3];this.lastControl.type="C"},_curveToR:function(W,P,S,L){for(P=0;P<S.length;P+=6)W.push("bezierCurveTo",[this.last.x+S[P],this.last.y+S[P+1],this.lastControl.x=this.last.x+S[P+2],this.lastControl.y=this.last.y+S[P+3],this.last.x+S[P+4],this.last.y+S[P+5]]),L&&(this._dashResidue=u(L,this,W[W.length-1],this._dashResidue)),this.last.x+=S[P+4],
this.last.y+=S[P+5];this.lastControl.type="C"},_smoothCurveToA:function(W,P,S,L){for(P=0;P<S.length;P+=4){var aa="C"==this.lastControl.type;W.push("bezierCurveTo",[aa?2*this.last.x-this.lastControl.x:this.last.x,aa?2*this.last.y-this.lastControl.y:this.last.y,S[P],S[P+1],S[P+2],S[P+3]]);L&&(this._dashResidue=u(L,this,W[W.length-1],this._dashResidue));this.lastControl.x=S[P];this.lastControl.y=S[P+1];this.lastControl.type="C"}this.last.x=S[S.length-2];this.last.y=S[S.length-1]},_smoothCurveToR:function(W,
P,S,L){for(P=0;P<S.length;P+=4){var aa="C"==this.lastControl.type;W.push("bezierCurveTo",[aa?2*this.last.x-this.lastControl.x:this.last.x,aa?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+S[P],this.last.y+S[P+1],this.last.x+S[P+2],this.last.y+S[P+3]]);L&&(this._dashResidue=u(L,this,W[W.length-1],this._dashResidue));this.lastControl.x=this.last.x+S[P];this.lastControl.y=this.last.y+S[P+1];this.lastControl.type="C";this.last.x+=S[P+2];this.last.y+=S[P+3]}},_qCurveToA:function(W,P,S,L){for(P=
0;P<S.length;P+=4)W.push("quadraticCurveTo",S.slice(P,P+4));L&&(this._dashResidue=u(L,this,W[W.length-1],this._dashResidue));this.last.x=S[S.length-2];this.last.y=S[S.length-1];this.lastControl.x=S[S.length-4];this.lastControl.y=S[S.length-3];this.lastControl.type="Q"},_qCurveToR:function(W,P,S,L){for(P=0;P<S.length;P+=4)W.push("quadraticCurveTo",[this.lastControl.x=this.last.x+S[P],this.lastControl.y=this.last.y+S[P+1],this.last.x+S[P+2],this.last.y+S[P+3]]),L&&(this._dashResidue=u(L,this,W[W.length-
1],this._dashResidue)),this.last.x+=S[P+2],this.last.y+=S[P+3];this.lastControl.type="Q"},_qSmoothCurveToA:function(W,P,S,L){for(P=0;P<S.length;P+=2){var aa="Q"==this.lastControl.type;W.push("quadraticCurveTo",[this.lastControl.x=aa?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=aa?2*this.last.y-this.lastControl.y:this.last.y,S[P],S[P+1]]);L&&(this._dashResidue=u(L,this,W[W.length-1],this._dashResidue));this.lastControl.type="Q"}this.last.x=S[S.length-2];this.last.y=S[S.length-1]},
_qSmoothCurveToR:function(W,P,S,L){for(P=0;P<S.length;P+=2){var aa="Q"==this.lastControl.type;W.push("quadraticCurveTo",[this.lastControl.x=aa?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=aa?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+S[P],this.last.y+S[P+1]]);L&&(this._dashResidue=u(L,this,W[W.length-1],this._dashResidue));this.lastControl.type="Q";this.last.x+=S[P];this.last.y+=S[P+1]}},_arcTo:function(W,P,S,L){P="a"==P;for(var aa=0;aa<S.length;aa+=7){var ba=S[aa+
5],O=S[aa+6];P&&(ba+=this.last.x,O+=this.last.y);var V=l.arcAsBezier(this.last,S[aa],S[aa+1],S[aa+2],S[aa+3]?1:0,S[aa+4]?1:0,ba,O);q.forEach(V,function(X){W.push("bezierCurveTo",X)});L&&(this._dashResidue=u(L,this,p,this._dashResidue));this.last.x=ba;this.last.y=O}this.lastControl={}},_closePath:function(W,P,S,L){W.push("closePath",[]);L&&(this._dashResidue=x(L,this,this.last.x,this.last.y,L[1][0],L[1][1],this._dashResidue));this.lastControl={}}});q.forEach("moveTo lineTo hLineTo vLineTo curveTo smoothCurveTo qCurveTo qSmoothCurveTo arcTo closePath".split(" "),
function(W){H(A.Path,W)});A.TextPath=a("dojox.gfx.canvas.TextPath",[A.Shape,m.TextPath],{_renderShape:function(W){},_setText:function(){},_setFont:function(){}});A.Surface=a("dojox.gfx.canvas.Surface",f.Surface,{constructor:function(){f.Container._init.call(this);this.pendingImageCount=0;this.makeDirty()},destroy:function(){f.Container.clear.call(this,!0);this.inherited(arguments)},setDimensions:function(W,P){this.width=b.normalizedLength(W);this.height=b.normalizedLength(P);if(!this.rawNode)return this;
W=!1;this.rawNode.width!=this.width&&(this.rawNode.width=this.width,W=!0);this.rawNode.height!=this.height&&(this.rawNode.height=this.height,W=!0);W&&this.makeDirty();return this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(W){!this.rawNode||!W&&this.pendingImageCount||(W=this.rawNode.getContext("2d"),W.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(W),"pendingRender"in this&&(clearTimeout(this.pendingRender),
delete this.pendingRender))},render:function(W){W.save();for(var P=0;P<this.children.length;++P)this.children[P]._render(W);W.restore()},makeDirty:function(){this.pendingImagesCount||"pendingRender"in this||this._batch||(this.pendingRender=setTimeout(y.hitch(this,this._render),0))},downloadImage:function(W,P){var S=y.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender);W.onload=S;W.onerror=S;W.onabort=S;W.src=
P},onImageLoad:function(){--this.pendingImageCount||(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},on:function(){}});A.createSurface=function(W,P,S){if(!P&&!S){var L=e.position(W);P=P||L.w;S=S||L.h}"number"==typeof P&&(P+="px");"number"==typeof S&&(S+="px");L=new A.Surface;W=g.byId(W);var aa=W.ownerDocument.createElement("canvas");aa.width=b.normalizedLength(P);aa.height=b.normalizedLength(S);
W.appendChild(aa);L.rawNode=aa;L._parent=W;return L.surface=L};var R=f.Container;a={openBatch:function(){++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this._makeDirty();return this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(W){this._makeDirty();return R.add.apply(this,arguments)},remove:function(W,P){this._makeDirty();return R.remove.apply(this,arguments)},clear:function(){this._makeDirty();return R.clear.apply(this,arguments)},
getBoundingBox:R.getBoundingBox,_moveChildToFront:function(W){this._makeDirty();return R._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(W){this._makeDirty();return R._moveChildToBack.apply(this,arguments)}};m={createObject:function(W,P){W=new W;W.surface=this.surface;W.setShape(P);this.add(W);return W}};c(A.Group,a);c(A.Group,f.Creator);c(A.Group,m);c(A.Surface,a);c(A.Surface,f.Creator);c(A.Surface,m);A.fixTarget=function(W,P){return!0};return A})},"dojox/gfx/arc":function(){define(["./_base",
"dojo/_base/lang","./matrix"],function(b,y,q){function a(l){var d=Math.cos(l);l=Math.sin(l);var c={x:d+4/3*(1-d),y:l-4/3*d*(1-d)/l};return{s:{x:d,y:-l},c1:{x:c.x,y:-c.y},c2:c,e:{x:d,y:l}}}var h=2*Math.PI,e=Math.PI/4,g=Math.PI/8,f=e+g,m=a(g);return b.arc={unitArcAsBezier:a,curvePI4:m,arcAsBezier:function(l,d,c,k,t,n,u,x){t=!!t;n=!!n;var A=q._degToRad(k);k=d*d;var z=c*c,E=q.multiplyPoint(q.rotate(-A),{x:(l.x-u)/2,y:(l.y-x)/2}),w=E.x*E.x,D=E.y*E.y;k=Math.sqrt((k*z-k*D-z*w)/(k*D+z*w));isNaN(k)&&(k=0);
k={x:k*d*E.y/c,y:-k*c*E.x/d};t==n&&(k={x:-k.x,y:-k.y});k=q.multiplyPoint([q.translate((l.x+u)/2,(l.y+x)/2),q.rotate(A)],k);d=q.normalize([q.translate(k.x,k.y),q.rotate(A),q.scale(d,c)]);k=q.invert(d);l=q.multiplyPoint(k,l);x=q.multiplyPoint(k,u,x);u=Math.atan2(l.y,l.x);k=u-Math.atan2(x.y,x.x);n&&(k=-k);0>k?k+=h:k>h&&(k-=h);c=g;x=m;c=n?c:-c;l=[];for(t=k;0<t;t-=e)t<f&&(c=t/2,x=a(c),c=n?c:-c,t=0),E=q.normalize([d,q.rotate(u+c)]),n?(k=q.multiplyPoint(E,x.c1),A=q.multiplyPoint(E,x.c2),E=q.multiplyPoint(E,
x.e)):(k=q.multiplyPoint(E,x.c2),A=q.multiplyPoint(E,x.c1),E=q.multiplyPoint(E,x.s)),l.push([k.x,k.y,A.x,A.y,E.x,E.y]),u+=2*c;return l}}})},"dojox/gfx/decompose":function(){define(["./_base","dojo/_base/lang","./matrix"],function(b,y,q){function a(m,l){return Math.abs(m-l)<=1E-6*(Math.abs(m)+Math.abs(l))}function h(m,l,d,c){if(!isFinite(m))return d;if(!isFinite(d))return m;l=Math.abs(l);c=Math.abs(c);return(l*m+c*d)/(l+c)}function e(m){m=q.normalize(m);var l=-m.xx-m.yy,d=m.xx*m.yy-m.xy*m.yx,c=Math.sqrt(l*
l-4*d);l=-(l+(0>l?-c:c))/2;d/=l;c=m.xy/(l-m.xx);var k=1,t=m.xy/(d-m.xx),n=1;a(l,d)&&(c=1,t=k=0,n=1);isFinite(c)||(c=1,k=(l-m.xx)/m.xy,isFinite(k)||(c=(l-m.yy)/m.yx,k=1,isFinite(c)||(c=1,k=m.yx/(l-m.yy))));isFinite(t)||(t=1,n=(d-m.xx)/m.xy,isFinite(n)||(t=(d-m.yy)/m.yx,n=1,isFinite(t)||(t=1,n=m.yx/(d-m.yy))));m=Math.sqrt(c*c+k*k);var u=Math.sqrt(t*t+n*n);isFinite(c/=m)||(c=0);isFinite(k/=m)||(k=0);isFinite(t/=u)||(t=0);isFinite(n/=u)||(n=0);return{value1:l,value2:d,vector1:{x:c,y:k},vector2:{x:t,y:n}}}
function g(m,l){var d=0>m.xx*m.yy||0<m.xy*m.yx?-1:1,c=l.angle1=(Math.atan2(m.yx,m.yy)+Math.atan2(-d*m.xy,d*m.xx))/2;d=Math.cos(c);c=Math.sin(c);l.sx=h(m.xx/d,d,-m.xy/c,c);l.sy=h(m.yy/d,d,m.yx/c,c);return l}function f(m,l){var d=0>m.xx*m.yy||0<m.xy*m.yx?-1:1,c=l.angle2=(Math.atan2(d*m.yx,d*m.xx)+Math.atan2(-m.xy,m.yy))/2;d=Math.cos(c);c=Math.sin(c);l.sx=h(m.xx/d,d,m.yx/c,c);l.sy=h(m.yy/d,d,-m.xy/c,c);return l}return b.decompose=function(m){var l=q.normalize(m);m={dx:l.dx,dy:l.dy,sx:1,sy:1,angle1:0,
angle2:0};if(a(l.xy,0)&&a(l.yx,0))return y.mixin(m,{sx:l.xx,sy:l.yy});if(a(l.xx*l.yx,-l.xy*l.yy))return g(l,m);if(a(l.xx*l.xy,-l.yx*l.yy))return f(l,m);var d=new q.Matrix2D(l);var c=y.mixin(d,{dx:0,dy:0,xy:d.yx,yx:d.xy});d=e([l,c]);c=e([c,l]);d=new q.Matrix2D({xx:d.vector1.x,xy:d.vector2.x,yx:d.vector1.y,yy:d.vector2.y});c=new q.Matrix2D({xx:c.vector1.x,xy:c.vector1.y,yx:c.vector2.x,yy:c.vector2.y});l=new q.Matrix2D([q.invert(d),l,q.invert(c)]);g(c,m);l.xx*=m.sx;l.yy*=m.sy;f(d,m);l.xx*=m.sx;l.yy*=
m.sy;return y.mixin(m,{sx:l.xx,sy:l.yy})}})},"dojox/gfx/bezierutils":function(){define(["./_base"],function(b){b=b.bezierutils={};b.tAtLength=function(g,f){var m=0,l=6==g.length,d=0,c=0,k=l?a:e,t=function(n,u){for(var x=0,A=0;A<n.length-2;A+=2)x+=q(n[A],n[A+1],n[A+2],n[A+3]);A=l?q(g[0],g[1],g[4],g[5]):q(g[0],g[1],g[6],g[7]);x-A>u||d+x>f+u?(++c,n=k(n,.5),t(n[0],u),Math.abs(d-f)<=u||t(n[1],u)):(d+=x,m+=1/(1<<c))};f&&t(g,.5);return m};var y=b.computeLength=function(g){for(var f=6==g.length,m=0,l=0;l<
g.length-2;l+=2)m+=q(g[l],g[l+1],g[l+2],g[l+3]);l=f?q(g[0],g[1],g[4],g[5]):q(g[0],g[1],g[6],g[7]);return.1<m-l?(g=f?a(g,.5):h(g,.5),m=y(g[0],f),m+=y(g[1],f)):m},q=b.distance=function(g,f,m,l){return Math.sqrt((m-g)*(m-g)+(l-f)*(l-f))},a=function(g,f){var m=1-f,l=m*m,d=f*f,c=g[0],k=g[1],t=g[2],n=g[3],u=g[4];g=g[5];var x=l*c+2*m*f*t+d*u;l=l*k+2*m*f*n+d*g;return[[c,k,m*c+f*t,m*k+f*n,x,l],[x,l,m*t+f*u,m*n+f*g,u,g]]},h=function(g,f){var m=1-f,l=m*m,d=l*m,c=f*f,k=c*f,t=g[0],n=g[1],u=g[2],x=g[3],A=g[4],
z=g[5],E=g[6];g=g[7];var w=d*t+3*l*f*u+3*m*c*A+k*E;d=d*n+3*l*f*x+3*m*c*z+k*g;return[[t,n,m*t+f*u,m*n+f*x,l*t+2*m*f*u+c*A,l*n+2*m*f*x+c*z,w,d],[w,d,l*u+2*m*f*A+c*E,l*x+2*m*f*z+c*g,m*A+f*E,m*z+f*g,E,g]]},e=b.splitBezierAtT=function(g,f){return 6==g.length?a(g,f):h(g,f)};return b})},"dojox/json/query":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox","dojo/_base/array"],function(b,y,q){y.getObject("json",!0,q);q.json._slice=function(a,h,e,g){var f=a.length,m=[];e=e||f;h=0>h?Math.max(0,
h+f):Math.min(f,h);for(e=0>e?Math.max(0,e+f):Math.min(f,e);h<e;h+=g)m.push(a[h]);return m};q.json._find=function(a,h){function e(m){h&&(!0!==h||m instanceof Array?m[h]&&g.push(m[h]):g.push(m));for(var l in m){var d=m[l];h?d&&"object"==typeof d&&e(d):g.push(d)}}var g=[];if(h instanceof Array){if(1==h.length)return a[h[0]];for(var f=0;f<h.length;f++)g.push(a[h[f]])}else e(a);return g};q.json._distinctFilter=function(a,h){for(var e=[],g={},f=0,m=a.length;f<m;++f){var l=a[f];h(l,f,a)&&("object"==typeof l&&
l?l.__included||(l.__included=!0,e.push(l)):g[l+typeof l]||(g[l+typeof l]=!0,e.push(l)))}f=0;for(m=e.length;f<m;++f)e[f]&&delete e[f].__included;return e};return q.json.query=function(a,h){function e(c,k,t,n,u,x,A,z){return f[z].match(/[\*\?]/)||"~"==A?"/^"+f[z].substring(1,f[z].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+("~"==A?"$/i":"$/")+".test("+k+")":c}var g=0,f=[];a=a.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(c){g+="["==c?1:
"]"==c?-1:0;return"]"==c&&0<g?"`]":'"'==c.charAt(0)||"'"==c.charAt(0)?"`"+(f.push(c)-1):c});var m="";a.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw Error("Unsafe function call");});a=a.replace(/([^<>=]=)([^=])/g,"$1\x3d$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(c){return"."==c.charAt(0)?c:"@"==c?"$obj":(c.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+c}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(c,k,t){return(k=c.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/))?
(t="",c.match(/^\./)&&(m="dojox.json._find("+m,t=",true)"),m=(k[1].match(/=/)?"dojo.map":k[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter")+"("+m,t+",function($obj){return "+k[2]+"})"):(k=c.match(/^\[\s*([\/\\].*)\]/))?".concat().sort(function(a,b){"+k[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(n,u,x){return"var av\x3d "+x.replace(/\$obj/,"a")+",bv\x3d "+x.replace(/\$obj/,"b")+";if(av\x3ebv||bv\x3d\x3dnull){return "+("/"==u?1:-1)+";}\nif(bv\x3eav||av\x3d\x3dnull){return "+("/"==
u?-1:1)+";}\n"})+"return 0;})":(k=c.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/))?(m="dojox.json._slice("+m,","+(k[1]||0)+","+(k[2]||0)+","+(k[3]||1)+")"):c.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)?(m="dojox.json._find("+m,("."==c.charAt(1)?",'"+t+"'":c.match(/,/)?","+c:"")+")"):c}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,e).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(c,k,t,n,u,x,A,z){return e(c,n,u,x,A,z,t,k)});
a=m+("$"==a.charAt(0)?"":"$")+a.replace(/`([0-9]+|\])/g,function(c,k){return"]"==k?"]":f[k]});for(var l=eval("1\x26\x26function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj\x3d$;return "+a+"}"),d=0;d<arguments.length-1;d++)arguments[d]=arguments[d+1];return h?l.apply(this,arguments):l}})},"esri/tasks/PrintParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.tasks.PrintParameters",map:null,template:null,outSpatialReference:null,
extraParameters:null});y.setObject("tasks.PrintParameters",b,a);return b})},"esri/tasks/LegendLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,q,a){b=b(null,{declaredClass:"esri.tasks.LegendLayer",layerId:null,subLayerIds:null});y.setObject("tasks.LegendLayer",b,a);return b})},"arcgisonline/map/thumbnail/createHiddenMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array ../../esriGeowConfig esri/arcgis/utils".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d){return function(c,k,t,n){var u=y.byId("hiddenMapDiv");y.byId("hiddenMapDiv")||(u=g.create("div",{id:"hiddenMapDiv",style:{position:"absolute",left:"-1000px",top:"-1000px",width:"200px",height:"130px"}},document.body));g.create("div",{id:"hiddenMap",style:{width:"200px",height:"130px"}},u);u={item:{}};u.item.extent=k;u.itemData=c;d.arcgisUrl=l.restBaseUrl+"content/items";d.createMap(u,"hiddenMap",{mapOptions:{nav:!1},bingMapsKey:window.esriGeowConfig.self.bingKey}).then(function(x){var A=
function(r){var v=new h;r._heatmapManager?a.after(r._heatmapManager,"recalculateHeatmap",function(){v.resolve()}):v.resolve();return v},z=function(r){var v=new h;if(r.updating){"esri.layers.VectorTileLayer"===r.declaredClass&&setTimeout(function(){B&&(B.remove(),v.resolve())},1E4);var B=b(r,"update-end",function(){B.remove();v.resolve()})}else v.resolve();return v},E=function(r){var v=new h;"esri.layers.VectorTileLayer"===r.declaredClass&&setTimeout(function(){B&&(B.remove(),v.resolve())},5E3);var B=
b(r,"update-start",function(){B.remove();z(r).then(function(){v.resolve()})});return v},w=function(r){var v=new h,B=setInterval(f.hitch(this,function(C,F){C.graphics&&C.graphics.length?(clearInterval(B),v.resolve()):10<F[0]?(clearInterval(B),v.resolve()):F[0]+=1},r,[0]),500);return v},D=[];m.forEach(x.map.graphicsLayerIds,function(r){r=x.map.getLayer(r);r.renderer&&"heatmap"===r.renderer.type?D.push(A(r)):"esri.layers.WFSLayer"===r.declaredClass?D.push(w(r)):r.updating&&D.push(z(r))});m.forEach(x.map.layerIds,
function(r){r=x.map.getLayer(r);r.updating?D.push(z(r)):"esri.layers.VectorTileLayer"===r.declaredClass&&D.push(E(r))});D.length?e(D).then(function(r){setTimeout(function(){t(x.map)},1E3)}):t(x.map)},function(x){n&&n(x)})}})},"arcgisonline/map/thumbnail/getExtentWithFeatures":function(){define("dojo/Deferred esri/layers/FeatureLayer esri/layers/StreamLayer esri/SpatialReference arcgisonline/map/core/projectExtent arcgisonline/map/core/getExtentFromCenter arcgisonline/map/core/getScaleForExtent".split(" "),
function(b,y,q,a,h,e,g){return function(f,m,l){function d(){c.resolve(m)}var c=new b;if(!(f.layer instanceof y)||f.layer instanceof q)return c.resolve(m),c;var k=f.layer;f.layers&&(k=f.layers[0]);k.addPlugin("esri/plugins/FeatureLayerStatistics").then(function(){k.statisticsPlugin.getSuggestedScaleRange().then(function(t){if(t.center){var n=e(t.center,1280,t.minScale);if(0<t.relaxedMinScale)for(var u=g(n,200),x=800;u>t.relaxedMinScale&&!(n=e(t.center,x,t.minScale),u=g(n,200),x-=200,0>=x););h(n,new a({wkid:4326}),
function(A){m=[[A[0].xmin,A[0].ymin],[A[0].xmax,A[0].ymax]];d()},d)}else d()},d)},d);return c}})},"esri/layers/StreamLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/_base/lang dojo/Deferred dojo/has dojo/io-query dojo/on dojo/aspect ../kernel ../request ../graphic ./FeatureLayer ./StreamMode ./StreamTrackManager ../geometry/jsonUtils ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../renderers/SimpleRenderer ./PurgeOptions".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D){b=b([t],{declaredClass:"esri.layers.StreamLayer",_preventInit:!0,constructor:function(r,v){v=v||{};v.mode&&v.mode!==t.MODE_STREAM||(this._isStream=!0,this.currentMode=this.mode=t.MODE_STREAM,this._mode=new n(this));this.purgeOptions=new D(this,v.purgeOptions||{});this.purgeInterval=v.purgeInterval||0;this._reconnectAttempts=0;this.maxReconnectAttempts=10;this.socket=this._reconnectTimeoutId=null;this._keepLatestQueried=!1;this._keepLatestUrl=null;
this._relatedQueried=!1;this._joinField=this._relatedUrl=null;this._refreshing=!1;this._attemptReconnect=h.hitch(this,this._attemptReconnect);this._purge=h.hitch(this,this._purge);this._processServiceJson=h.hitch(this,this._processServiceJson);if(h.isObject(r)&&r.layerDefinition)this._initFeatureLayer(r,v);else{var B=this;c({url:r,content:h.mixin({f:"json"}),callbackParamName:"callback"}).then(function(C){B._processServiceJson(C,v)},function(C){B._errorHandler(C)})}},_processServiceJson:function(r,
v){var B=this;r.relatedFeatures&&r.relatedFeatures.featuresUrl&&r.relatedFeatures.joinField?(this._relatedUrl=r.relatedFeatures.featuresUrl,this.objectIdField=this._joinField=r.relatedFeatures.joinField,c({url:this._relatedUrl,content:{f:"json"},callbackParamName:"callback"}).then(function(C){C=C.fields||[];var F=q.map(r.fields,function(G){return G.name.toLowerCase()});q.forEach(C,function(G){-1===q.indexOf(F,G.name.toLowerCase())&&r.fields.push(G)});v.resourceInfo=r;B._initFeatureLayer(B._url,v)},
function(C){B.onError({error:C})})):(v.resourceInfo=r,this._initFeatureLayer(this._url,v))},_initLayer:function(r,v){this.inherited(arguments);if(r){var B;if(r.layerDefinition)this.purgeOptions=new D(this,this._params.purgeOptions||{}),this.socketUrl=this._params.socketUrl||r.layerDefinition.socketUrl||void 0;else{if(this._params.socketUrl)this.socketUrl=this._params.socketUrl;else{var C=this._getWebsocketConnectionInfo(r),F=C.urls;F&&F.length?(this._socketUrls=F,this.socketUrl=F[0],this.socketDirection=
"broadcast"===this._params.socketDirection?"broadcast":"subscribe",this.socketUrl+="/"+this.socketDirection,this._websocketToken=C.token,F.length>this.maxReconnectAttempts&&(this.maxReconnectAttempts=F.length)):(this.socketUrl=void 0,C="No web socket urls were retrieved from the Stream Service. Layer will not attempt to connect.","https:"===location.protocol&&(C+=" An insecure web socket connection cannot be made from a secure web page."),this.onError(Error(C)))}if(this._params.filter)try{this._filter=
B=this._makeFilter(this._params.filter)}catch(G){this.onError(Error("Error trying to create filter object: "+G+". Layer will not have filter applied")),this._filter=null}if(this._params.geometryDefinition||this._outFields||this._defnExpr){B=B||{};B.geometry=this._params.geometryDefinition;B.outFields=this._outFields;B.where=this._defnExpr;try{this._filter=B=this._makeFilter(B)}catch(G){this.onError(Error("Error trying to create filter object: "+G+". Layer will not have filter applied")),this._filter=
null}}}this.maximumTrackPoints=this._params.maximumTrackPoints||0===this._params.maximumTrackPoints?this._params.maximumTrackPoints:1;(this._params.refreshRate||0===this._params.refreshRate)&&this._mode&&this._mode._setRefreshRate&&this._mode._setRefreshRate(this._params.refreshRate);this._keepLatestUrl=r.keepLatestArchive?r.keepLatestArchive.featuresUrl:null;r.relatedFeatures&&r.relatedFeatures.featuresUrl&&r.relatedFeatures.joinField&&(this._relatedUrl=r.relatedFeatures.featuresUrl,this.objectIdField=
this._joinField=r.relatedFeatures.joinField);this.objectIdField||this._makeObjectIdField();this._map&&this.socketUrl&&!this._connected&&this.connect()}},_isWebGLCompatible:function(){return!1},_setMap:function(r){var v=this.inherited(arguments),B=this._getRenderer();this.timeInfo&&(this._trackIdField||B&&(B.latestObservationRenderer||B.trackRenderer))&&(this._trackManager=new u(this),this._trackManager.initialize(r));this.socketUrl&&!this._connected&&this._map&&this.connect();return v},_unsetMap:function(r,
v){q.forEach(this._connects,y.disconnect);(this._connected||this._reconnecting||this.socket)&&this.disconnect();this._togglePurgeT();this.inherited(arguments);this._map=null},_suspend:function(){this._togglePurgeT();this.inherited(arguments)},_resume:function(){this.inherited(arguments);this._togglePurgeT(!0)},clear:function(){try{this._mode&&this._mode._clearDrawBuffer&&this._mode._clearDrawBuffer(),this._mode&&this._mode._clearTimeBin&&this._mode._clearTimeBin(),this._mode&&this._mode._clearFeatureMap&&
this._mode._clearFeatureMap(),this._trackManager&&this._trackManager.clearTracks()}catch(r){}this.inherited(arguments);this._trackManager&&this._trackManager.createTracklineContainer()},redraw:function(){this._mode&&this._mode._flushDrawBuffer&&this._mode._flushDrawBuffer();this.inherited(arguments)},setDefinitionExpression:function(r){this.setFilter({where:r})},getDefinitionExpression:function(){if(this._filter)var r=this._filter.where;return r},destroy:function(){this.disconnect();this.inherited(arguments)},
onResume:function(r){this.inherited(arguments)},setGeometryDefinition:function(r){this.setFilter({geometry:r})},getGeometryDefinition:function(){if(this._filter)var r=this._filter.geometry;return r},connect:function(r){var v=new e,B={},C=this._filter,F,G,H=this.socketUrl,J;try{this._connected||this._connecting?v.reject(Error("Cannot start new connection process. Layer is connecting.")):(this._connecting=!0,this._getRelatedFeatures().then(function(){return this._getKeepLatestFeatures()}.bind(this)).then(function(){this._websocketToken&&
(B.token=this._websocketToken);this._map&&this._map.spatialReference&&this.spatialReference&&this._map.spatialReference.wkid!==this.spatialReference.wkid&&(B.outSR=this._map.spatialReference.wkid);if(C)for(G in C)null!==C[G]&&(F="geometry"===G?JSON.stringify(C[G]):C[G],B[G]=F);H+="?"+f.objectToQuery(B);J=this._createConnection(H,r);v.resolve(J)}.bind(this)).otherwise(function(I){v.reject(I)}))}catch(I){r&&(r(I,!1),v.reject(I)),this.onConnectionError({error:I})}return v.promise},disconnect:function(r){var v=
this._refreshing?"Disconnecting as part of layer refresh cycle":"Connection closed from client",B=this._refreshing?!0:!1;this._reconnectTimeoutId&&clearTimeout(this._reconnectTimeoutId);this._refreshing=this._reconnecting=this._connecting=this._connected=!1;this.socket&&this.socket.close();this.onDisconnect({willReconnect:B,message:v});r&&r(null,!0)},setFilter:function(r){if(this._collection)return this.onError("Filter can only be set when the source of the layer is a Stream Service"),!1;try{if(void 0!==
r.outFields){var v=Error("Outfields property cannot be changed after layer is created");this.onFilterChange({filter:this.getFilter(),error:v});return!1}var B=this._makeFilter(r)}catch(C){return v=Error(C),this.onFilterChange({filter:this.getFilter(),error:v}),!1}if(this.socket)r={filter:B},this.socket.send(JSON.stringify(r));else m.once(this,"connect",function(C){this.setFilter(B)});return!0},getFilter:function(){var r=this._filter,v={},B=["geometry","outFields","where"];r&&q.forEach(B,function(C){var F=
r[C];F&&("geometry"===C?F=x.fromJson(F):"outFields"===C&&(F=F.split(",")),v[C]=F)});return v},setMaximumTrackPoints:function(r){if(!r&&0!==r)return!1;this.maximumTrackPoints=r;this._mode.propertyChangeHandler(3)},getUniqueValues:function(r){var v={},B=[];var C=this._getField(r,!0);if(!C)return B;r=C.name;q.forEach(this.graphics||[],function(F){F=(F.attributes||{})[r];void 0===F||v[F]||(v[F]=1,B.push(F))});B.sort(function(F,G){return F<G?-1:F>G?1:0});return B},getLatestObservations:function(){var r=
[];return r=this._trackManager?this._trackManager.getLatestObservations():this.graphics},setPurgeInterval:function(r){var v=this.purgeInterval;this.purgeInterval=r;this._togglePurgeT();r&&this._togglePurgeT(!0);if(v!==r)this.onPurgeIntervalChange();return this},_togglePurgeT:function(r){if(r&&this.purgeInterval){var v=this;clearTimeout(this._purgeT);this._mode&&this._mode._flushDrawBuffer&&(this._purgeT=setTimeout(function(){v.updating||v.suspended||(v._mode._flushDrawBuffer(),v._togglePurgeT(!0))},
6E4*this.purgeInterval))}else this._purgeT&&(clearTimeout(this._purgeT),this._purgeT=null)},onMessage:function(){},onConnect:function(){},onDisconnect:function(){},onFilterChange:function(){},onAttemptReconnect:function(){},onConnectionError:function(){},onPurgeIntervalChange:function(){},_createConnection:function(r,v){var B=this,C=new WebSocket(r);C.onopen=function(){B.socket=C;B._connected=!0;B._connecting=!1;B._reconnecting=!1;B._reconnectAttempts=0;B._bind();B.onConnect();v&&v(null,!0)};C.onclose=
function(F){var G=!0,H=B._connected,J=null;if(B._connected||B._reconnecting){if(F.code){var I="Connection failed: ";if(1001===F.code)I+=F.reason||"Service is going away.",G=!1;else if(4400===F.code)I+=F.reason||"Invalid url parameters. Check filter properties.",G=!1;else if(4404===F.code)I+="Service not found",G=!1;else if(4401===F.code||4403===F.code)I+="Not authorized",G=!1}G&&(B._reconnectAttempts+=1,B._reconnectAttempts>B.maxReconnectAttempts&&(I="Maximum reconnect attempts exceeded",G=!1,H=!0));
B._connected=!1;H&&(I&&(J=Error(I)),B.onDisconnect({error:J,willReconnect:G}));G?B._attemptReconnect():B.socket=null}else B.socket||(J=Error("Could not make connection to service"),B.onConnectionError({error:J})),B.socket=null,B._connected=!1};C.onerror=function(F){};return C},_getKeepLatestFeatures:function(){var r=new e;this._map&&this._keepLatestUrl&&!this._keepLatestQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._keepLatestUrl).then(function(){r.resolve()}.bind(this)).otherwise(function(v){r.reject(v)}).always(function(){this._keepLatestQueried=
!0}.bind(this)):r.resolve();return r.promise},_getRelatedFeatures:function(){var r=new e;this._map&&this._relatedUrl&&!this._relatedQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._relatedUrl).then(function(){r.resolve()}.bind(this)).otherwise(function(v){r.reject(v)}).always(function(){this._relatedQueried=!0}.bind(this)):r.resolve();return r.promise},_purge:function(){var r,v=[];if(this.purgeOptions.displayCount&&this.graphics.length>this.purgeOptions.displayCount)for(r=0;r<this.graphics.length-
this.purgeOptions.displayCount;r++){var B=this.graphics[r];v.push(B)}0<v.length&&(this._mode._removeFeatures(v),this._trackManager&&this._trackManager.removeFeatures(v))},_bind:function(){var r=this;this.socket.onmessage=function(v){r._onMessage(JSON.parse(v.data))}},_onMessage:function(r){var v=this;this.onMessage(r);var B={create:function(C){v._create(C)},update:function(C){v._update(C)},"delete":function(C){v._delete(C)}};if(r.type)B[r.type](r.feature);else r.hasOwnProperty("filter")?v._handleFilterMessage(r):
this._create(r)},_create:function(r){function v(F){if(!B._featureHasOID(F,C)){if(!F.geometry)return!1;F.attributes=F.attributes||{};F.attributes[C]=B._nextId++}F=F.declaredClass?F:new k(F);B._mode.drawFeature(F)}var B=this,C=B.objectIdField;r.length?r.forEach(function(F){F&&v(F)}):r&&v(r)},_delete:function(r){var v=this,B=r[v.objectIdField]||r.attributes[v.objectIdField],C=!1;this.graphics.forEach(function(F){F.attributes[v.objectIdField]==B&&(C=F)});C&&this.remove(C)},_update:function(r){var v=this,
B=!1;this.graphics.forEach(function(C){C.attributes[v.objectIdField]==r.attributes[v.objectIdField]&&(B=C)});B&&(r.attributes&&B.setAttributes(r.attributes),r.geometry&&B.setGeometry(x.fromJson(r.geometry)))},_makeFilter:function(r){var v=null;r=r||{};if(void 0!==r.geometry)if(v=v||{},null===r.geometry)v.geometry=null;else{var B="string"===typeof r.geometry?x.fromJson(JSON.parse(r.geometry)):r.geometry.declaredClass?r.geometry:x.fromJson(r.geometry);if(!B||"point"===B.type)throw"Query object contains invalid geometry";
"extent"!==B.type&&(B=B.getExtent());if(!B||0===B.getHeight()&&0===B.getWidth())throw"Invalid filter geometry: Extent cannot have a height and width of 0";v.spatialRel="esriSpatialRelIntersects";v.geometryType="esriGeometryEnvelope";v.geometry=B.toJson()}void 0!==r.where&&(v=v||{},v.where=r.where);if(void 0!==r.outFields&&(v=v||{},r="string"===typeof r.outFields?"*"===r.outFields?null:r.outFields.replace(/,\s+/g,",").split(","):null===r.outFields?null:r.outFields,r=this._makeOutFields(r))){if(r.errors&&
0<r.errors.length)throw"Invalid filter outFields. "+r.errors.join(",");v.outFields=r.fields?r.fields.join(","):null}return v},_makeOutFields:function(r){var v=this,B=[],C=[],F={fields:null};if(!r||0===r.length)return F;q.forEach(r,function(G){if("*"===G)return F;var H=v._getField(G,!0);H?B.push(H.name):C.push("Field named "+G+" not found in schema.")});r=v._getOutFields();q.forEach(r,function(G){v._getField(G)&&-1===q.indexOf(B,G)&&B.push(G)});F.fields=B;F.errors=C;return F},_handleFilterMessage:function(r){r.error?
(r=Error(r.error.join(",")),this.onFilterChange({filter:this.getFilter(),error:r})):(r=r.filter,r.geometry&&"string"===typeof r.geometry&&(r.geometry=JSON.parse(r.geometry)),this._filter=r,this.onFilterChange({filter:this.getFilter()}))},_getWebsocketConnectionInfo:function(r){var v={urls:[]},B,C=[],F=[],G;r.streamUrls&&q.forEach(r.streamUrls,function(I){"ws"===I.transport&&(B=I.urls,v.token=I.token)});if(!B)return v;q.forEach(B,function(I){0===I.lastIndexOf("wss",0)?F.push(I):C.push(I)});r="https:"===
location.protocol||0===this.url.lastIndexOf("https:",0)?F:0===C.length?F:C;if(1<r.length)for(G=0;G<r.length-1;G++){var H=G+Math.floor(Math.random()*(r.length-G));var J=r[H];r[H]=r[G];r[G]=J}v.urls=r;return v},_attemptReconnect:function(){var r=this;this._reconnectTimeoutId=null;r._connected=!1;if(!r._socketUrls)return!1;if(!r._collection&&!r._reconnecting&&r.socket&&r.credential)return r._reconnecting=!0,r._getServiceConnectionMetadata(r._attemptReconnect),!1;r._reconnecting=!0;r.socket=null;if(r._reconnectAttempts>
r.maxReconnectAttempts)return r._reconnecting=!1;r.socketUrl=r._socketUrls[r._reconnectAttempts>r._socketUrls.length-1?r._reconnectAttempts%r._socketUrls.length:r._reconnectAttempts];r.socketUrl+="/"+r.socketDirection;var v=r._randomIntFromInterval(0,1E3);this._reconnectTimeoutId=setTimeout(function(){r.onAttemptReconnect({count:r._reconnectAttempts,url:r.socketUrl});r.connect()},1E3*r._reconnectAttempts+v)},_getServiceConnectionMetadata:function(r){var v=this,B=v._url.path;r="function"===typeof r?
r:null;c({url:B,content:h.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(function(C){C=v._getWebsocketConnectionInfo(C);v._websocketToken=C.token;r&&r()},function(C){v.onError(Error(C))})},_setDefaultRenderer:function(){var r=this.geometryType,v=new a([5,112,176,.8]),B=new a([255,255,255]);B=new z(z.STYLE_SOLID,B,1);if("esriGeometryPoint"===r||"esriGeometryMultipoint"===r)var C=new E(E.STYLE_CIRCLE,10,B,v);else if("esriGeometryPolyline"===r)C=new z(z.STYLE_SOLID,v,2);else if("esriGeometryPolygon"===
r||"esriGeometryEnvelope"===r)v=new a([5,112,176,.2]),B=new a([5,112,176,.8]),B=new z(z.STYLE_SOLID,B,1),C=new A(A.STYLE_SOLID,B,v);C&&this.setRenderer(new w(C))},_makeObjectIdField:function(){var r=1,v,B=[];if(!this.objectIdField){var C=this.fields.length;for(v=0;v<C;v++)B.push(this.fields[v].name.toLowerCase());for(;-1!==q.indexOf(B,"objectid_"+r);)r+=1;this.objectIdField="objectid_"+r;this.fields.push({name:"objectid_"+r,type:"esriFieldTypeOID",alias:"objectid_"+r,nullable:!1})}},_featureHasOID:function(r,
v){return r.attributes&&(r.attributes[v]||0===r.attributes[v])},_randomIntFromInterval:function(r,v){return Math.floor(Math.random()*(v-r+1)+r)}});h.setObject("layers.StreamLayer",b,d);return b})},"esri/layers/StreamTrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Point ../geometry/Polyline ./TrackManager".split(" "),function(b,y,q,a,h,e,g,f,m){b=b([m],{declaredClass:"esri.layers._StreamTrackManager",constructor:function(l){this.inherited(arguments);
var d=l.getMap().spatialReference;this.isWebMercator=d.isWebMercator();this.canWrap=d._isWrappable();this.wrapThreshold=this.isWebMercator?2.0037508342788905E7:180},initialize:function(l){this.inherited(arguments)},addFeatures:function(l,d){function c(E,w){var D,r;u[E]||(u[E]=[]);E=u[E];if(0<z){w.length>z&&w.splice(0,w.length-z);var v=w.length+E.length;v>z&&(D=E.splice(0,v-z))}v=w.length;for(r=0;r<v;r+=1)E.push(w[r]);return{deletes:D,adds:w}}var k={},t={},n;if(d)return this.inherited(arguments),k;
var u=this.trackMap;var x=this.layer;var A=x._trackIdField;var z=x.maximumTrackPoints||0;q.forEach(l,function(E){var w=E.attributes[A];E.visible&&(t[w]||(t[w]=[]),t[w].push(E))});for(n in t)t.hasOwnProperty(n)&&(x=c(n,t[n]),k[n]=x);return k},removeFeatures:function(l){var d=[],c=this.layer.objectIdField,k=this.layer._trackIdField;l&&(q.forEach(l,function(t){var n;var u=t.attributes[k];var x=t.attributes[c];if(n=this.trackMap[u])for(t=0;t<n.length;t+=1){var A=n[t];if(A.attributes[c]===x){this.trackMap[u].splice(t,
1);-1===q.indexOf(u)&&d.push(u);break}}},this),0<l.length&&this.refreshTracks(d))},drawTracks:function(l){function d(A){var z=n[A],E=z&&1<z.length,w=c.trackLineMap[A];w&&!E&&(k.remove(w),delete c.trackLineMap[A],w=null);if(!E)return!1;E=[];for(var D=[],r,v=z.length,B=0;B<v;B++)if(r=z[B].geometry){r=r.normalize();var C=r.x,F=0,G=!1;H&&c.canWrap&&(F=C-H.x,Math.abs(F)>c.wrapThreshold&&(G=!0));G?(D.push([c.getWrappedX(C),r.y]),E.push(D.slice(0)),D=[[C,r.y]]):D.push([C,r.y]);var H=new g(C,r.y,u)}1<D.length&&
E.push(D);z={};z[x]=A;if(E.length)if(w){for(var J=w.geometry;J.paths.length;)J.removePath(J.paths.length-1);E.forEach(function(I){J.addPath(I)});w.setGeometry(J)}else w=new e(new f({paths:E,spatialReference:u}),null,z),k.add(w),c.trackLineMap[A]=w}var c=this,k=this.container,t;if(k){var n=this.trackMap;var u=this.map.spatialReference;var x=this.layer._trackIdField;if(l)q.forEach(l,function(A){d(A)});else for(t in n)n.hasOwnProperty(t)&&d(t)}},refreshTracks:function(l){function d(n){var u;n=c[n]||
[];var x=n.length;for(u=0;u<x;u++)k._repaint(n[u],null,!0)}var c=this.trackMap,k=this.layer,t;this.drawTracks(l);if(l)q.forEach(l,function(n){d(n)});else for(t in c)c.hasOwnProperty(t)&&d(t)},getLatestObservations:function(){var l,d=this.trackMap,c=[];for(l in d)if(d.hasOwnProperty(l)){var k=d[l];c.push(k[k.length-1])}return c},destroy:function(){this.inherited(arguments);this.trackLineMap=null},getWrappedX:function(l){var d=this.isWebMercator,c=d?2.0037508342788905E7:180;d=d?-2.0037508342788905E7:
-180;return(0<l?d:c)-((0<l?c:d)-l)}});y.setObject("layers._StreamTrackManager",b,h);return b})},"esri/layers/PurgeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful","dojo/has","../kernel"],function(b,y,q,a,h){b=b([q],{declaredClass:"esri.layers.PurgeOptions",constructor:function(e,g){this.parent=e;for(var f in g)this[f]=g[f]},_displayCountSetter:function(e){this.displayCount=e;this.parent.refresh()}});y.setObject("layers.PurgeOptions",b,h);return b})},"arcgisonline/map/core/projectExtent":function(){define(["arcgisonline/map/utils/contains",
"esri/geometry/Extent","esri/geometry/webMercatorUtils","esri/geometry/Polygon","esri/tasks/GeometryService"],function(b,y,q,a,h){function e(g,f){if(g&&f.xmin>f.xmax){var m=g.valid[1]-f.xmin,l=f.xmax-g.valid[0];m>l?f.xmax=g.valid[1]+l:f.xmin=g.valid[0]-m}}return function(g,f,m,l,d,c){var k=[102113,102100,3857],t=g.spatialReference.wkid;if(t===f.wkid)return m([g],null);if(4326==t&&b(k,f.wkid))return g.ymin=Math.max(g.ymin,-89.99),g.ymax=Math.min(g.ymax,89.99),g=q.geographicToWebMercator(g),d=g.spatialReference._getInfo(),
e(d,g),g.spatialReference.wkid=f.wkid,m([g],null);if(b(k,t)&&4326==f.wkid)return g=q.webMercatorToGeographic(g),d=g.spatialReference._getInfo(),e(d,g),m([g],null);c||(c=new h(window.esriGeowConfig.self.helperServices.geometry.url));if(d&&d.wrapAround180&&"extent"===g.type){var n=g;g=a.fromExtent(g)}c.project([g],f,function(u,x){if(!(u&&0<u.length&&u[0]&&"extent"==u[0].type)||isNaN(u[0].xmin)||isNaN(u[0].ymin)||isNaN(u[0].xmax)||isNaN(u[0].ymax)){if(u&&0<u.length&&u[0]&&"point"==u[0].type&&!isNaN(u[0].x)&&
!isNaN(u[0].y))return m(u,x);if(n&&"polygon"===u[0].type){if(1===u[0].rings.length)u[0]=new y(u[0].getExtent());else{var A=(new a(u[0].spatialReference.toJson())).addRing(u[0].rings[0]).getExtent(),z=(new a(u[0].spatialReference.toJson())).addRing(u[0].rings[1]).getExtent();u[0]=z;u[0].xmin=z.xmin-A.getWidth();u[0].ymin=Math.min(z.ymin,A.ymin);u[0].ymax=Math.max(z.ymax,A.ymax)}return m(u,x)}if(l)return l()}else return m(u,x)},l)}})},"arcgisonline/map/utils/contains":function(){define([],function(){return function(b,
y){for(var q=b.length;q--;)if(b[q]===y)return!0;return!1}})},"arcgisonline/map/core/getExtentFromCenter":function(){define(["esri/geometry/Extent","arcgisonline/map/core/getExtentForScale"],function(b,y){return function(q,a,h){q=new b(q.x-1,q.y-.5,q.x+1,q.y+.5,q.spatialReference);return y(q,a,h)}})},"arcgisonline/map/core/getExtentForScale":function(){define(["esri/config","esri/WKIDUnitConversion"],function(b,y){return function(q,a,h){var e=20015077/180,g=q.spatialReference;if(g){var f=g.wkid;var m=
g.wkt}g=null;f?g=y.values[y[f]]:m&&-1!==m.search(/^PROJCS/i)&&(f=/UNIT\[([^\]]+)\]\]$/i.exec(m))&&f[1]&&(g=parseFloat(f[1].split(",")[1]));return q.expand(h*a/(39.37*(g||e)*b.defaults.screenDPI)/q.getWidth())}})},"arcgisonline/map/thumbnail/getItemData":function(){define(["dojo/Deferred","dojo/_base/lang","arcgisonline/sharing/util"],function(b,y,q){return function(a,h,e){q.request({url:window.esriGeowConfig.restBaseUrl+"content/items/"+a+"/data"},{disableIdentityLookup:!0}).then(y.hitch(this,function(g){if(g&&
(g.wfsInfo||g.wmtsInfo))var f=g;else if(g&&g.layers)f=g.layers;else if(e){e();return}h&&h(f)}),y.hitch(this,function(g){e&&e(g)}))}})},"arcgisonline/map/layer/getServiceInfo":function(){define("dojo/_base/lang dojo/_base/array dojo/topic dojo/Deferred esri/kernel esri/request esri/SpatialReference esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/core/projectExtent arcgisonline/sharing/dijit/dialog/GeneralDlg".split(" "),function(b,y,q,a,h,e,g,f,m,l,d){var c=window.esriGeowConfig;return function A(t,
n,u,x){var z=function(v,B){clearTimeout(D);q.publish("ServiceAnswerReceived",[]);var C=v.fullExtent;C||(C=v.extent);!C||C.spatialReference&&(C.spatialReference.wkid||C.spatialReference.wkt)||(v.fullExtent=null,C=v.extent=null);(c.allSSL||"https:"==location.protocol)&&v.tileServers&&v.tileServers.length&&y.forEach(v.tileServers,function(F,G){if(m.isHostedService(F)||m.supportsHttps(F))v.tileServers[G]=F.replace("http:","https:")});C?u&&u(v,t,B):v.spatialReference&&(v.spatialReference.wkid||v.spatialReference.wkt)?
(C=new f(-180,-90,180,90,new g({wkid:4326})),l(C,new g(v.spatialReference),b.hitch(this,function(F){v.fullExtent=F[0];v.extent=F[0];u&&u(v,t,B)}),b.hitch(this,function(F,G){x&&(F.details=[],F.details.push("Missing extent and could not project GCS into service spatial reference."),x(F,G))}))):u&&u(v,t,B)},E=function(v,B){clearTimeout(D);q.publish("ServiceAnswerReceived",[]);x&&x(v,B)},w=!1,D=setTimeout(function(){clearTimeout(D);D=null;var v=t.toLowerCase();if(-1===v.indexOf("/arcgis/rest/")&&-1<v.indexOf("/arcgis/"))return t=
t.replace("/arcgis/","/arcgis/rest/").replace("/ArcGIS/","/ArcGIS/rest/"),A(t,n,u,x);h.id.isBusy()?w=!0:n?(d.prototype.statics.getInstance().show({title:h.i18nBundle.generalDlg.waitDlgTitle,message:n}),D=setTimeout(function(){clearTimeout(D);D=null;h.id.isBusy()?w=!0:E("Request timed out.",{args:{url:t}})},45E3)):E("Request timed out.",{args:{url:t}})},1E4),r=t+(-1<t.indexOf("?")?"\x26f\x3djson":"?f\x3djson");e({url:r,callbackParamName:"callback",load:function(v,B){if(D||w)clearTimeout(D),v?v.error&&
""!==v.error?E(v.error,B):z(v,B):E("Request error.",{args:{url:t}})},error:function(v){if(D||w)clearTimeout(D),v&&v.message&&-1<v.message.indexOf("Aborted the Sign-In process")?q.publish("ServiceAnswerReceived",[]):E(v,{args:{url:t}})}})}})},"arcgisonline/pages/portal/CommentsUtil":function(){define("require exports tslib ./Comment ../../sharing/util dojo/promise/all dojo/Deferred dojo/_base/lang".split(" "),function(b,y,q,a,h,e,g,f){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);
g=q.__importDefault(g);f=q.__importDefault(f);return function(){function m(){}m.fetchComments=function(l,d,c){var k=this,t=new g.default,n=c.item,u=(null===n||void 0===n?void 0:n.itemUrl)+"/comments",x,A=(null===c||void 0===c?void 0:c.parentId)||"none";l=l||(null===c||void 0===c?void 0:c.nextStart)||c.start;var z=c.sortField,E=c.sortOrder;d=d||c.overrideNum||c.num;var w=c.comments;if(-1===l)t.resolve(w);else{var D={parentId:A,sortField:z,sortOrder:E,start:l,num:d};h.default.request({url:u,content:D}).then(function(r){return k._toPortalComments(n,
r)}).then(function(r){x=f.default.mixin(c,r,{num:c.num,comments:[].concat(c.comments||[]).concat(r.comments)});D=r;return D.comments}).then(function(r){return k._getOwnerProfiles(r)}).then(function(r){D.comments=D.comments.map(function(v,B){v.ownerProfile=r[B];return v});t.resolve({commentsInfo:x,comments:x.comments})})}return t};m._toPortalComments=function(l,d){var c=new g.default,k=l.portal;d.comments=d.comments.map(function(t){return new a.default(q.__assign(q.__assign({},t),{item:l,portal:k}))});
c.resolve(d);return c};m._getOwnerProfiles=function(l){l=l.map(function(d){return d.portal.getUserProfile(d.owner)});return e.default(l)};return m}()})},"arcgisonline/pages/portal/Comment":function(){define("require exports tslib ../pageUtil ../../tsutils/declareDecorator dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),function(b,y,q,a,h,e,g,f,m){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);
return function(){function l(d){this.owner=d.owner||"deletedUser";this.repliesInfo={parentId:this.id,sortField:"created",sortOrder:"desc",start:0,num:100,comments:[],item:this.item};this.comment=a.default.linkify(unescape(d.comment))}l.prototype.postscript=function(){};l.prototype.getReplies=function(d,c){var k=this,t=new e.default,n=window.require("arcgisonline/pages/portal/CommentsUtil");this.numReplies?n.fetchComments(d,c,this.repliesInfo).then(function(u){k.repliesInfo=g.default.mixin(k.repliesInfo,
u.commentsInfo);k.replies=k.repliesInfo.comments;t.resolve(k.replies)}):t.resolve([]);return t};return l=q.__decorate([h.default(m.default.PortalComment,f.default)],l)}()})},"arcgisonline/pages/item/_Info":function(){define("require exports tslib ../../sharing/util ../utils/arrays dojo/i18n!../../nls/arcgisonline ../utils/url".split(" "),function(b,y,q,a,h,e,g){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);return{Unknown:{privileges:[],openIn:[],types:[],attributes:[],classification:"file"},
"Feature Service":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:"is-layer is-2d is-scene-2 is-feature is-data is-desktopPro".split(" "),classification:"layer",hasServiceInfo:!0},"Map Service":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-tile","is-desktopPro"],classification:"layer",hasServiceInfo:!0},"Map Image Layer":{defaultOpenText:e.default.itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-desktopPro","is-service"],classification:"layer",hasServiceInfo:!0},"Image Service":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-service","is-scene-2","is-imageManagement"],classification:"layer",hasServiceInfo:!0},"Scene Service":{defaultOpenText:e.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",
openIn:["sceneViewer"],types:["is-3d","is-service","is-pro"],classification:"layer",hasServiceInfo:!0},Table:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-table","is-data","is-desktopPro"],classification:"layer",hasServiceInfo:!0},"Feature Collection":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-data","is-publish","is-views","is-pro"],classification:"layer"},
"Route Layer":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-publish","is-views"],classification:"layer"},"Geocoding Service":{types:["is-service"],classification:"layer"},"Geoenrichment Service":{types:["is-service"],classification:"layer"},"Network Analysis Service":{types:["is-service"],classification:"layer"},"Globe Service":{types:["is-desktop"],classification:"layer",openLyr:!0},"Geoprocessing Service":{types:["is-desktop",
"is-service"],classification:"layer"},Tool:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-desktop","is-service","is-tool"],classification:"layer",hasServiceInfo:!0},"Geodata Service":{types:["is-service"],classification:"layer"},"Geometry Service":{classification:"layer"},"Workflow Manager Service":{types:["is-service"],classification:"layer"},"Stream Service":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer"],types:["is-2d","is-service","is-streamLayer","is-pro"],classification:"layer",hasServiceInfo:!0},Feed:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","iotFeed"],types:["is-2d","is-service","is-feedLayer","is-pro"],classification:"layer",hasServiceInfo:!0},"Big Data Analytic":{defaultOpenText:e.default.itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-bigDataAnalytic"],classification:"app"},"Real Time Analytic":{defaultOpenText:e.default.itemLinks.openAnalyticsIoT,
defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-realTimeAnalytic"],classification:"app"},WMS:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},WFS:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-desktopPro"],classification:"layer"},WMTS:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},KML:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-download","is-desktopPro"],classification:"layer"},"Elevation Layer":{defaultOpenText:e.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"layer",hasServiceInfo:!0},"Vector Tile Service":{defaultOpenText:e.default.itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer","viewStyle","downloadStyle"],types:["is-vectorTile","is-service","is-scene-2","is-pro"],classification:"layer",hasServiceInfo:!0,hasViewStyle:!0},"Relational Database Connection":{classification:"layer"},Markup:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-views"],classification:"layer"},"Web Map":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer","createPresentation","openPresentation"],types:["is-map","is-desktopPro"],classification:"map",openPkg:!0},"Web Scene":{defaultOpenText:e.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d","is-scene","is-pro"],classification:"map"},"3D Web Scene":{defaultOpenText:e.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"map"},"Web Mapping Application":{defaultOpenText:e.default.itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp","downloadAttachment"],types:["is-app","is-web"],classification:"app",hasItemData:!0},"Hub Initiative":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Initiative":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Site Application":{defaultOpenText:e.default.itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Application":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Page":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Event":{defaultOpenText:e.default.itemLinks.viewInHub,
defaultOpenIcon:"launch",openIn:["hubEventViewer"],types:["is-hubEvent"],classification:"app"},"Site Page":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},Application:{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer"],classification:"app",types:["is-app"]},"Mobile Application":{defaultOpenText:e.default.itemLinks.getApp,defaultOpenIcon:"launch",openIn:["appViewer",
"downloadAttachment"],types:["is-mobile-app","is-mobile"],classification:"app"},"Desktop Application":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",openIn:["downloadAttachment"],types:["is-file","is-update","is-platform"],classification:"app"},"Native Application":{classification:"app"},"Workforce Project":{defaultOpenText:e.default.itemLinks.openWorkforce,defaultOpenIcon:"launch",openIn:["workforceViewer"],types:["is-workforceProject"],classification:"app",hasItemData:!0},
Workflow:{defaultOpenText:e.default.itemLinks.openWorkflow,defaultOpenIcon:"launch",openIn:["workflowViewer"],types:["is-workflow","is-pro"],classification:"app",hasItemData:!0},Form:{defaultOpenText:e.default.itemLinks.openSurvey123,defaultOpenIcon:"launch",openIn:["surveyViewer"],classification:"app"},"Insights Workbook":{defaultOpenText:e.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights"],classification:"app"},"Insights Page":{defaultOpenText:e.default.itemLinks.openInsights,
defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsPage"],classification:"app"},"Insights Model":{defaultOpenText:e.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsModel"],classification:"app"},"Insights Theme":{defaultOpenText:e.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsTheme"],classification:"app"},"Ortho Mapping Project":{defaultOpenText:e.default.itemLinks.openOrthoMaker,
defaultOpenIcon:"launch",openIn:["orthoMaker"],types:["is-orthoMaker"],classification:"app"},Mission:{defaultOpenText:e.default.itemLinks.openMission,defaultOpenIcon:"launch",openIn:["missionViewer"],types:["is-mission"],classification:"app"},"Hub Initiative Template":{defaultOpenText:e.default.itemLinks.openHubInitiative,defaultOpenIcon:"launch",openIn:["hubInitiative"],types:["is-hubInitiative"],classification:"app"},"QuickCapture Project":{types:["is-quickCaptureProject"],classification:"app"},
Solution:{classification:"solution",hasItemData:!0},"GeoAI Studio Project":{defaultOpenText:e.default.itemLinks.openGeoAIStudio,defaultOpenIcon:"launch",openIn:["geoAIStudioUrlViewer"],types:["is-geoAIStudioProject"],classification:"app"},StoryMap:{classification:"app",types:["is-storymap"]},Notebook:{defaultOpenText:e.default.itemLinks.openNotebook,defaultOpenIcon:"launch",openIn:["notebookViewer"],types:["is-notebook","is-download"],classification:"notebook"},"Data Store":{types:["is-data-store"],
classification:"data store"},"Excalibur Imagery Project":{defaultOpenText:e.default.itemLinks.openExcalibur,defaultOpenIcon:"launch",openIn:["excaliburViewer"],types:["is-excaliburProject"],classification:"app"},"Urban Model":{defaultOpenText:e.default.itemLinks.openUrbanModel,defaultOpenIcon:"launch",openIn:["urbanViewer"],types:["is-urbanModel"],classification:"app"},"Web Experience":{defaultOpenText:e.default.itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperience"],
classification:"app"},"Web Experience Template":{defaultOpenText:e.default.itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperienceTemplate"],classification:"app"},CSV:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature","is-documentUrl"],classification:"file"},Shapefile:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish",
"is-feature"],classification:"file"},"File Geodatabase":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},GeoJSON:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"Service Definition":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish",
"is-feature","is-tile"],classification:"file"},"Tile Package":{defaultOpenText:e.default.itemLinks.openArcMap,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-desktopPro"],classification:"file",openPkg:!0},"Compact Tile Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-compact"],classification:"file",openPkg:!0},"Scene Layer Package":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-scene-package"],classification:"file"},"Vector Tile Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-vector-tile","is-desktop"],classification:"file",openPkg:!0},"Deep Learning Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file",openPkg:!0},"Image Collection":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-image-collection"],classification:"file"},Layout:{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file",openData:!0},"Desktop Add In":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Add In":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GML:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Explorer Add In":{types:["is-explorer","is-update"],classification:"file"},"Operations Dashboard Add In":{types:["is-views"],classification:"file",isRetired:!0},"Survey123 Add In":{types:["is-file","is-update"],classification:"file"},"Operations Dashboard Extension":{types:["is-views"],classification:"file",
isRetired:!0},"AppBuilder Extension":{types:["is-views"],classification:"file"},"AppBuilder Widget Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Viewer Add In":{types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Configuration":{types:["is-file","is-update"],classification:"file"},"Globe Document":{types:["is-desktop","is-update"],classification:"file",openData:!0},
"Map Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Pro Map":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Published Map":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Scene Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"CityEngine Web Scene":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",
openIn:["cityEngineViewer"],types:["is-city-engine","is-download","is-update"],classification:"file"},"Desktop Style":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Geoprocessing Sample":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Task File":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update",
"is-pro"],classification:"file"},Layer:{defaultOpenText:e.default.itemLinks.openArcMap,types:["is-update","is-desktopPro"],classification:"file",openData:!0},"Pro Layer":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Pro Report":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},Style:{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Operation View":{types:["is-operationView","is-views"],isRetired:!0,classification:"file"},Dashboard:{defaultOpenText:e.default.itemLinks.dashboardView,openIn:["dashboard"],types:["is-dashboard","is-views"],classification:"file"},"Geoprocessing Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Layer Package":{defaultOpenText:e.default.itemLinks.openArcMap,
defaultOpenIcon:"download-to",types:["is-file","is-desktopPro","is-update"],classification:"file",openData:!0},"Pro Layer Package":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-pro","is-update"],classification:"file"},"Locator Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Map Package":{defaultOpenText:e.default.itemLinks.openArcMap,defaultOpenIcon:"download-to",
types:["is-desktopPro","is-file","is-download","is-update"],classification:"file",openData:!0},"Pro Map Package":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Mobile Basemap Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Mobile Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update"],classification:"file"},"Toolbox Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"ArcPad Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Basemap Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},
"Mobile Map Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Mobile Scene Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Package":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Rule Package":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Window Mobile Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Workflow Manager Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GeoPackage:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],
classification:"file"},"Desktop Application Template":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Native Application Template":{classification:"file"},"Native Application Installer":{types:["is-file","is-update"],classification:"file"},"Application Configuration":{classification:"file"},"Viewer Configuration":{classification:"file"},"Windows Viewer Configuration":{classification:"file"},"Map Template":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Template":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Raster function template":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-download"],classification:"file"},"Feature Collection Template":{classification:"file"},"Layer Template":{classification:"file"},"Administrative Report":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Report Template":{classification:"file"},"Color Set":{classification:"file"},"Explorer Layer":{types:["is-explorer","is-update","is-views"],classification:"file"},"Explorer Map":{types:["is-explorer","is-update","is-views"],classification:"file"},"Symbol Set":{classification:"file"},"Document Link":{defaultOpenText:e.default.itemLinks.open,defaultOpenIcon:"launch",openIn:["appViewer"],types:["is-link","is-documentUrl","is-views"],
classification:"file"},PDF:{defaultOpenText:e.default.itemLinks.open,defaultOpenIcon:"launch",types:["is-dataUrl","is-pdf","is-update","is-documentUrl"],classification:"file"},"CAD Drawing":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"CSV Collection":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},Image:{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"KML Collection":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Code Attachment":{types:["is-file","is-update"],classification:"file"},"Code Sample":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"iWork Keynote":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Numbers":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Pages":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Excel":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:"is-publish is-feature is-dataUrl is-file is-update is-documentUrl".split(" "),classification:"file"},"Microsoft Powerpoint":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Word":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Visio Document":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Statistical Data Collection":{types:[],classification:"file"},"360 VR Experience":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},netCDF:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},getItemInfo:function(f){var m,l,d,c=this[f.displayName]?
f.displayName:f.type,k=this[f.type];"GeoJson"===f.type&&(f.type="GeoJSON");var t=null===(m=null===f||void 0===f?void 0:f.iconUrl)||void 0===m?void 0:m.split("/").pop();"featureshosted16.png"===t&&(t="features16.png");f.isUtilityNetwork&&(t="utilitynetwork16.png");"Data Store"===f.type&&(t="datastore16.png");f.svgIconUrl16=t?"js/arcgisonline/img/item-types/"+t.replace("16.png","16.svg"):f.iconUrl;f.svgIconUrl32=t?"js/arcgisonline/img/item-types/"+t.replace("16.png","32.svg"):f.iconUrl;this[f.displayName]&&
(k=this[f.displayName]);k=q.__assign({privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"},k);"Feature Collection"===f.type&&h.default.includes(f.typeKeywords,"Table")&&(k.types=h.default.filterOut(k.types,["is-data"]));if("Feature Service"===f.type){m=["is-data","is-layer"];if(h.default.includes(f.typeKeywords,"Multipatch")||h.default.includes(f.typeKeywords,"HasOnlyMultipatchGeometries"))m=q.__spreadArrays(m,["is-scene-2"]);k.types=h.default.filterOut(k.types,m)}f.isUtilityNetwork&&
(k.displayName=f.displayName+" ("+e.default.itemProperties.utilityNetwork+((f.canUpdate||f.canDelete)&&f.isHostedService?", "+e.default.viewsWidget.hostedData:"")+")");"Application"!==f.type||f.url||(k.openIn=[],k.defaultOpenText=null);m="Desktop Add In;Globe Document;Map Document;Published Map;Scene Document;Geoprocessing Package;Geoprocessing Service;Globe Service;Locator Package".split(";");a.default.couldHaveArcGISDesktop()&&-1<m.indexOf(c)&&(k.defaultOpenText=h.default.includes(f.types,"is-desktopPro")?
e.default.itemLinks.openArcMap:e.default.itemLinks.openDesktop,k.defaultOpenIcon="launch");"Layer"===f.type&&h.default.includes(f.typeKeywords,"lyrx")&&(k=q.__assign(q.__assign({},k),this["Pro Layer"]));"Layer Package"===f.type&&h.default.includes(f.typeKeywords,"lpkx")&&(k=q.__assign(q.__assign({},k),this["Pro Layer Package"]));"Map Package"===f.type&&h.default.includes(f.typeKeywords,"mpkx")&&(k=q.__assign(q.__assign({},k),this["Pro Map Package"]));"Compact Tile Package"===f.type&&(f.type="Tile Package");
"Dashboard"===f.type&&a.default._isOperationsViewSupportedBrowser(!0)&&(k.types.push("is-browser"),f.isSupportedBrowser=!0);k.types=h.default.concatUnique(k.types,"public"===f.access?["is-public"]:["is-not-public"]);a.default.couldHaveArcGISDesktop()||(k.types=k.types.filter(function(n){return"is-desktop"!==n&&"is-desktopPro"!==n}));c=null===(d=null===(l=f.portalUser)||void 0===l?void 0:l.userRole)||void 0===d?void 0:d.canUpdateOrgItems();if("StoryMap"===f.type){if(h.default.includes(f.typeKeywords,
"smstatusunpublishedchanges")||h.default.includes(f.typeKeywords,"smstatuspublished"))k.types.push("is-published-storymap"),k.defaultOpenText=e.default.itemLinks.view,k.defaultOpenIcon="launch",k.openIn=["storyMapViewer"];if(f.isOwner||f.isAdmin||c)k.types.push("is-editable-storymap"),k.openIn=k.openIn||[],k.openIn.push("configureStoryMap"),k.defaultOpenText=k.defaultOpenText||e.default.configAGOLUtilServices.configure,k.defaultOpenIcon="launch"}"Web Experience"===f.type&&(h.default.includes(f.typeKeywords,
"status: Published")||h.default.includes(f.typeKeywords,"status: Changed"))&&k.types.push("is-published-webExperience");"Web Experience Template"===f.type&&(h.default.includes(f.typeKeywords,"status: Published")||h.default.includes(f.typeKeywords,"status: Changed"))&&k.types.push("is-published-webExperienceTemplate");"Web Mapping Application"===f.type&&(h.default.includes(f.typeKeywords,"configurableApp")&&(f.isOwner||f.isAdmin||c)&&k.types.push("can-configure"),f.url=g.redirectExternalAppURL(f,f.url));
"Image Service"!==f.type||h.default.includes(f.typeKeywords,"Managed Image Collection")||(k.types=k.types.filter(function(n){return"is-imageManagement"!==n}));return k}}})},"arcgisonline/pages/utils/url":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.redirectExternalAppURL=y.sanitizeServerURL=void 0;y.sanitizeServerURL=function(q){q=q||"";var a=q.split("/"),h=a.indexOf("FeatureServer");0<h&&(q=h-1,a.splice(q,1,a[q].replace(/:/g,"")),q=a.join("/"));
return q};y.redirectExternalAppURL=function(q,a,h){var e=["Web Mapping Application","Dashboard"];if(!q.portalUser&&"self"!==q.contentOrigin&&"public"===q.access&&(h||-1<e.indexOf(q.type))&&a){if(0===a.indexOf("/apps/"))return"https://"+q.portal.portalHostname+a;if(-1<a.indexOf(".arcgis.com"))return a=a.split(".arcgis.com"),"https://"+q.portal.portalHostname+a[a.length-1]}return a}})},"arcgisonline/pages/utils/item":function(){define("require exports tslib ../utils/arrays ../pageUtil ../../sharing/util ../../esriGeowConfig dojo/string dojo/Deferred dojo/promise/all dojo/i18n!../../nls/arcgisonline dojo/text!../dijit/Card/badges/authoritative.html dojo/text!../dijit/Card/badges/deprecated.html dojo/text!../dijit/Card/badges/living-atlas.html dojo/text!../dijit/Card/badges/marketplace.html dojo/text!../dijit/Card/badges/open-data.html dojo/text!../dijit/Card/badges/premium.html dojo/text!../dijit/Card/badges/retired.html dojo/text!../dijit/Card/badges/public-data-collection.html dojo/text!../dijit/Card/badges/subscriber.html dojo/text!../dijit/Card/badges/collaboration.html".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);t=q.__importDefault(t);n=q.__importDefault(n);u=q.__importDefault(u);x=q.__importDefault(x);A=q.__importDefault(A);z=q.__importDefault(z);E=q.__importDefault(E);w=q.__importDefault(w);return function(){function D(){}D.getBadges=
function(r,v,B){var C,F,G,H=[],J={i18n:d.default,hideText:v?"":"hide",tooltipClass:"tooltip tooltip-bottom-left tooltip-multiline"};v=v?"":"Labeled";var I=r.groupDesignations&&r.groupDesignations.split(", "),K=null===(C=r.portal)||void 0===C?void 0:C.isPortal;"org_authoritative"===r.contentStatus&&(J.tooltipLabel=d.default.badges["authoritativeTooltip"+v],H.push(f.default.substitute(c.default,J)));"public_authoritative"===r.contentStatus&&(r.verified||K)&&(J.tooltipLabel=f.default.substitute(d.default.badges["publicAuthoritativeTooltip"+
v],{name:K?r.portal.name:r.verified.name}),H.push(f.default.substitute(c.default,J)));"deprecated"===r.contentStatus&&(J.tooltipLabel=d.default.badges["deprecatedTooltip"+v],H.push(f.default.substitute(k.default,J)));-1<(null===(F=r.typeKeywords)||void 0===F?void 0:F.indexOf("Public Data Collection"))&&B&&(J.tooltipLabel=d.default.badges["publicDataCollectionTooltip"+v],H.push(f.default.substitute(z.default,J)));r.isRetired&&(J.tooltipLabel=d.default.badges["retiredTooltip"+v],H.push(f.default.substitute(A.default,
J)));I&&-1<I.indexOf("livingatlas")&&(J.tooltipLabel=d.default.badges["livingAtlasTooltip"+v],H.push(f.default.substitute(t.default,J)));I&&-1<I.indexOf("opendata")&&H.push(f.default.substitute(u.default,J));r.isPremium&&(B=(null===(G=r.portal)||void 0===G?0:G.user)?r.portal.user.orgId?"org":"public":"anon",J.tooltipLabel=d.default.badges[B+(r.requiresCredits?"PremiumTooltip":"SubscriberTooltip")+v],H.push(f.default.substitute(r.requiresCredits?x.default:E.default,J)));r.listed&&!K&&H.push(f.default.substitute(n.default,
J));r.origin&&H.push(f.default.substitute(w.default,J));return H.join("")};D.isItemAdmin=function(r,v){var B,C=!1;C=r.owner;v=null!==v&&void 0!==v?v:r.portal;var F=-1<(null===(B=r.itemControl)||void 0===B?void 0:B.indexOf("admin"));B=["esri_livingatlas","esri_demographics","esri_boundaries"];return C=v.isPortal&&!r.isOwner&&F&&-1<C.indexOf("esri_")&&!a.default.includes(B,C)?!1:!!F};D.canShareItem=function(r,v){var B,C,F=v||{},G=F.userRole,H=F.canShare,J=(null===G||void 0===G?void 0:G.canPurchaseMarketplace())||
(null===G||void 0===G?void 0:G.canTrialMarketplace()),I=r.access||"private",K=r.isAdmin||r.isOwner||F.isOrgAdmin&&r.isOwnedByMyOrg,R="public"===I&&"AppBuilder Extension"!==r.type&&"AppBuilder Widget Package"!==r.type;v="org"===I&&(null===(B=r.ownerProfile)||void 0===B?void 0:B.orgId)===v.orgId;B="licenseByUser"===(null===(C=r.listingProperties)||void 0===C?void 0:C.licenseBy);C="Native Application Installer"!==r.type&&"API Key"!==r.type&&!e.default.isProApp(r)&&!B;return H&&C&&(K||J&&r.listed||((null===
G||void 0===G?0:G.canShareItemToGroup())||!F.isOrgUser)&&(R||v))?!0:!1};D.canDeleteItem=function(r,v){var B=v||{};v=B.userRole;B=r.isAdmin||r.isOwner||B.isOrgAdmin&&r.isOwnedByMyOrg;v=(null===v||void 0===v?void 0:v.isCustom())&&v.canDeleteOrgItems();return!!(B||r.isOwnedByMyOrg&&v)};D.getProtectedItems=function(r){var v=new m.default,B=[],C=[],F=[];r.forEach(function(G){G.protected?B.push(G):G.portal.isPortal?F.push(G):C.push(G)});r=F.map(function(G){return G.canBeDeleted().then(function(H){H&&!H.success?
(G.error=H,B.push(G)):C.push(G)})});l.default(r).then(function(){v.resolve({protectedItems:B,unprotectedItems:C})});return v};D.deleteItemsByOwner=function(r,v){var B=new m.default;r=g.default.restBaseUrl+"content/users/"+r;1===v.length?(v=v[0],r=""+r+(v.folderId&&"/"!==v.folderId?"/"+v.folderId:"")+"/items/"+v.id+"/delete",e.default.request({url:r,content:""},{usePost:!0}).then(function(C){return B.resolve([C])},function(C){return B.resolve([C])})):1<v.length&&(r+="/deleteItems",v={items:v.map(function(C){return C.id}).join(",")},
e.default.request({url:r,content:v},{usePost:!0}).then(function(C){return B.resolve(C.results)},function(C){return B.resolve([C])}));return B};D.deleteItems=function(r){var v=this,B=new m.default,C={},F=[],G=[],H=[];r.forEach(function(I){var K;"Deep Learning Package"===(null===I||void 0===I?void 0:I.type)?F.push(h.default.uninstallDeepLearningPackage(I).then(function(R){var W;"uninstallFail"===(null===R||void 0===R?void 0:R.messageCode)?G.push(R):C[I.owner]=[I].concat(null!==(W=C[I.owner])&&void 0!==
W?W:[])})):C[I.owner]=[I].concat(null!==(K=C[I.owner])&&void 0!==K?K:[])});var J=Object.keys(C).map(function(I){return v.deleteItemsByOwner(I,C[I])});l.default(F).then(function(){return l.default(J)}).then(function(I){I.forEach(function(K){K.forEach(function(R){R.success?H.push(R):G.push(R)})});B.resolve({removed:H,errors:G})});return B};D.getContentStatus=function(r){if(r.contentStatus&&-1<r.contentStatus.indexOf("authoritative")){var v=r.portal;return"public"===r.access&&(null===v||void 0===v?0:
v.isVerified)?"public_authoritative":"org_authoritative"}return r.contentStatus};D.shouldOpenToItemURLInNewTab=function(r){return-1<"Web Mapping Application;Mobile Application;Document Link;Site Application;Hub Site Application;StoryMap".split(";").indexOf(r.type)};D.shouldOpenInNewTab=function(r){return-1<["CityEngine Web Scene","Dashboard","Operation View"].indexOf(r.type)};return D}()})},"arcgisonline/pages/utils/socialMedia":function(){define(["require","exports","tslib","../../esriGeowConfig",
"esri/lang"],function(b,y,q,a,h){a=q.__importDefault(a);h=q.__importDefault(h);return function(){function e(){}e.canShowSocialMediaLinks=function(g){var f=g.isPortal,m=h.default.isDefined(g.canSharePublic)?!!g.canSharePublic:!0,l=!!g.portalProperties&&h.default.isDefined(g.portalProperties.showSocialMediaLinks);g=l&&!0===g.portalProperties.showSocialMediaLinks;return a.default.showSocialMediaLinks&&!0===a.default.showSocialMediaLinks&&(f?m&&g:m&&(!l||g))};e.canShowSocialMediaLinksOnItems=function(g){var f=
g.portalUser,m=!!f&&!f.orgId,l=!!f&&!!f.orgId;f=!f||m||l&&(f.userRole.canShareItemToPublic()||f.userRole.canShareOthersItemsToPublic());return this.canShowSocialMediaLinks(g)&&f};e.canShowSocialMediaLinksOnGroups=function(g){var f=g.portalUser,m=!!f&&!f.orgId,l=!!f&&!!f.orgId;f=!f||m||l&&f.userRole.canShareGroupToPublic();return this.canShowSocialMediaLinks(g)&&f};return e}()})},"arcgisonline/pages/portal/UserProfiles":function(){define("require exports tslib ./PortalUser ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/Stateful".split(" "),
function(b,y,q,a,h,e,g,f,m,l){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);return function(){function d(c){this.NO_THUMBNAIL_PATH=h.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");this.users={}}d.prototype.find=function(c){var k=this,t=this.users,n="string"===typeof c?{username:c}:c,u=n&&n.username;n="deletedUser"===u;var x={username:n?f.default.common.deletedUser:
u,thumbnailUrl:this.NO_THUMBNAIL_PATH},A=new g.default;"fetching"===t[u]?setTimeout(function(){k.find(c).then(function(z){A.resolve(z)})},50):t[u]?A.resolve(t[u]):n?(t[u]=m.default.mixin({},{isDeleted:!0},x),A.resolve(t[u])):(t[u]="fetching",this.getUserProfile(u).then(function(z){t[u]=z;A.resolve(t[u])},function(){t[u]=m.default.mixin({},x);A.resolve(t[u])}));return A};d.prototype.getUserProfile=function(c){var k=this,t=new g.default,n;h.default.request({url:this.portal.portalUrl+"community/users/"+
c}).then(function(u){n=new a.default(m.default.mixin(u,{portal:k.portal}));t.resolve(n)});return t};return d=q.__decorate([e.default(l.default)],d)}()})},"arcgisonline/pages/portal/PortalUser":function(){define("require exports tslib ./PortalGroup ./LicenseInfo ../utils/arrays ../../sharing/util ../../sharing/dijit/Role ../../tsutils/declareDecorator dojo/cookie dojo/_base/lang dojo/Deferred dojo/Stateful dojo/topic esri/arcgis/Portal esri/lang".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u){a=
q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);t=q.__importDefault(t);n=q.__importDefault(n);u=q.__importDefault(u);return function(){function x(A){var z;A=this.portal||{};this.setRole(this.viewOnly);this.viewOnly&&this.copyViewOnlyRoleProperties();d.default.mixin(this,{thumbnailUrl:this.thumbnailUrl||g.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),
defaultThumbnailUrl:g.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")});d.default.mixin(this,h.default);this.token=null===(z=this.credential)||void 0===z?void 0:z.token;this.id=this.username;this.orgUrl=A.urlKey&&A.customBaseUrl?A.urlKey+"."+A.customBaseUrl:A.portalUrl;this.computeFlags()}x.prototype.postscript=function(){};x.prototype.setRole=function(A){return this.userRole=new f.default({portalUser:this,viewOnly:A})};x.prototype.computeFlags=function(){var A,z=this.portal.supportsHostedServices||
!1,E=(null===(A=this.portal.helperServices)||void 0===A?void 0:A.rasterAnalytics)&&u.default.isDefined(this.portal.helperServices.rasterAnalytics.url);this.isOrgUser=this.portal.urlKey&&this.portal.customBaseUrl||this.portal.isPortal?!0:!1;this.isOrgAdmin=this.userRole.isAdmin();this.canShare=!this.isOrgUser||this.userRole.canShareItemToGroup()||this.userRole.canShareItemToOrg()||this.portal.canSharePublic&&this.userRole.canShareItemToPublic();this.canShareOthers=this.userRole.canShareOthersItemsToGroup()||
this.userRole.canShareOthersItemsToOrg()||this.portal.canSharePublic&&this.userRole.canShareOthersItemsToPublic();this.canViewOthersOrgItems=!this.userRole.isCustom()||this.userRole.isCustom()&&this.userRole.canViewOrgItems();this.canReassignOrgItems=this.isOrgAdmin||this.userRole.canReassignOrgItems();this.canUseGeocode=(this.canCreateItems=!this.isOrgUser||this.userRole.canCreateItem())&&this.userRole.canUseGeocode();this.canPublishTiles=this.userRole.canPublishTiles();this.canPublishFeatures=this.userRole.canPublishFeatures();
this.canPublishScenes=this.userRole.canPublishScenes();this.canPublishVectorTiles=this.userRole.canPublishVectorTiles();this.canPublishImageCollection=E&&this.userRole.canPublishImageCollection()?!0:!1;this.canUserPublish=z&&this.canCreateItems&&(this.canPublishTiles||this.canPublishFeatures||this.canPublishScenes||this.canPublishVectorTiles||this.canPublishImageCollection);this.canManageLicenses=this.isOrgAdmin||this.userRole.canManageLicenses();this.canManageWebsite=this.isOrgAdmin||this.userRole.canManageWebsite()};
x.prototype.copyViewOnlyRoleProperties=function(){this.role=this.userRole.baseRole;this.roleId=this.userRole.id;this.privileges=this.userRole.privileges;this.level="1"};x.prototype.getTags=function(){var A=this,z=new c.default;this.tags&&this.tags.length?z.resolve(this.tags):this.inherited(arguments).then(function(E){A.set("tags",E);z.resolve(A.tags)},function(E){A.set("tags",[]);z.resolve([])});return z};x.prototype.getContentTags=function(){var A=this,z,E=new c.default;(null===(z=this.contentTags)||
void 0===z?0:z.length)?E.resolve(this.contentTags):g.default.loadUserTags(this.username).then(function(w){A.set("contentTags",w);E.resolve(A.contentTags)},function(w){A.set("contentTags",[]);E.resolve([])});return E};x.prototype.getCurrentFolder=function(){if(!u.default.isDefined(this.currentFolder)){var A=g.default.getCookie("ESRI_Content"),z=A&&"/"!==A.folderId?A.folderId:this.username;this.set("currentFolder",{id:z,isAll:null===A||void 0===A?void 0:A.isAll,isHome:"/"!==z&&z&&z!==this.username?
!1:!0})}return this.currentFolder};x.prototype.setCurrentFolder=function(A){var z=g.default.getCookie("ESRI_Content")||{},E=(null===A||void 0===A?void 0:A.id)||A||this.username,w="all"===E;A={folderId:E===this.username||w?"/":E,isAll:w,isHome:(null===A||void 0===A?0:A.isHome)||"/"===E||!E||E===this.username?!0:!1};d.default.mixin(z,A);l.default("ESRI_Content",JSON.stringify(z),{path:"/"});this.set("currentFolder",d.default.mixin(A,{id:E}))};x.prototype.getFolders=function(){var A=this,z=new c.default;
g.default.request({url:this.userContentUrl,content:{num:1}}).then(this._toFolders.bind(this)).then(function(E){A.set("folders",E);z.resolve(E.slice(0))});return z};x.prototype.createFolder=function(A){var z=this,E=new c.default,w=this.userContentUrl+"/createFolder";A={folderName:A.replace(/ /g,"_"),title:A};g.default.request({url:w,content:A},{usePost:!0}).then(function(D){z.folders.push(D.folder);z.folders.shift();z.set("folders",z._toFolders({folders:z.folders}));t.default.publish("folders/refresh");
E.resolve(D.folder)},function(D){E.reject(D)});return E};x.prototype.updateFolder=function(A,z){var E=this,w=new c.default;g.default.request({url:this.userContentUrl+"/"+A+"/updateFolder",content:{newTitle:z}},{usePost:!0}).then(function(){return E.getFolders()},function(D){w.reject(D)}).then(function(D){w.resolve(D);t.default.publish("folders/refresh")},function(D){w.reject(D)});return w};x.prototype.deleteFolder=function(A){var z=this,E=new c.default;g.default.request({url:this.userContentUrl+"/"+
A+"/delete"},{usePost:!0}).then(function(w){var D,r=null===(D=null===w||void 0===w?void 0:w.folder)||void 0===D?void 0:D.id;z.folders=z.folders.filter(function(v){return(null===v||void 0===v?void 0:v.id)!==r});z.folders.shift();z.set("folders",z._toFolders({folders:z.folders}));E.resolve(w.folder)},function(w){E.reject(w)});return E};x.prototype.deleteItems=function(A){var z=new c.default,E=this.userContentUrl+"/deleteItems";A={items:A.map(function(w){return w.id})};g.default.request({url:E,content:A},
{usePost:!0}).then(function(){z.resolve(!0)},function(w){z.reject(w)});return z};x.prototype._toFolders=function(A){var z=this;A=(null===A||void 0===A?void 0:A.folders)||[];A=A.sort(function(E,w){return E.title.localeCompare(w.title)});e.default.find(A,function(E){return E.id===z.username})||A.unshift({username:this.username,id:this.username,title:this.username,created:"now"});return A};x.prototype.getGroups=function(){var A=this,z=this.portal.url+"community/users/"+this.username,E=new c.default;
this.userGroups?E.resolve(this.adminGroups||this.userGroups):g.default.request({url:z}).then(function(w){A.userGroups=(null===w||void 0===w?0:w.groups)?A._toGroup(w.groups):[];E.resolve(A.userGroups)},function(w){E.reject(w)});return E};x.prototype.getSharedOwnershipGroups=function(){var A=this,z=new c.default;this.ownershipGroups&&z.resolve(0<this.ownershipGroups.length?this.ownershipGroups:null);this.getGroups().then(function(){z.resolve(0<A.ownershipGroups.length?A.ownershipGroups:null)});return z};
x.prototype._toGroup=function(A){var z=this;this.ownershipGroups=[];return(null!==A&&void 0!==A?A:[]).map(function(E){var w=new a.default(d.default.mixin(E,{portal:z.portal}));z._isSharedOwnershipGroup(E)&&z.ownershipGroups.push(E);return d.default.mixin(E,{portalGroup:w})})};x.prototype._isSharedOwnershipGroup=function(A){var z=A.capabilities&&A.capabilities.join(",")||"";return(A.owner===this.username||!A.isViewOnly||A.userMembership&&"admin"===A.userMembership.memberType)&&-1<z.toLowerCase().indexOf("updateitemcontrol")};
return x=q.__decorate([m.default(n.default.PortalUser,k.default)],x)}()})},"arcgisonline/pages/portal/PortalGroup":function(){define("require exports tslib ./PortalItem ../utils/arrays ../utils/getLivingAtlasCategorySet ../utils/resources ../utils/socialMedia ../utils/verified ../utils/itemsgroups ../../sharing/util ../../tsutils/declareDecorator dojo/promise/all dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x){a=q.__importDefault(a);
h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);t=q.__importDefault(t);n=q.__importDefault(n);u=q.__importDefault(u);return function(){function A(z){var E,w,D,r,v,B,C;this.portalUser=null!==(w=null===(E=this.portal)||void 0===E?void 0:E.getPortalUser())&&void 0!==w?w:null;this.groupContentUrl=this.url.replace("/community/","/content/");this.searchContentUrl=this.portal.portalUrl+
"search";this.canShowSocialMediaLinks=f.default.canShowSocialMediaLinksOnGroups(this.portal);this.isOwner="owner"===(null===(D=this.userMembership)||void 0===D?void 0:D.memberType);this.isManager="admin"===(null===(r=this.userMembership)||void 0===r?void 0:r.memberType);this.isMember="member"===(null===(v=this.userMembership)||void 0===v?void 0:v.memberType);this.isPublic="public"===this.access;this.belongsToGroup=this.userMembership&&h.default.includes(["owner","admin","member"],this.userMembership.memberType);
this.isSharedOwnership=h.default.includes(this.capabilities,"updateitemcontrol");this.computeIsOpenDataEnabled();this.computeIsBackedByEnterpriseGroup();this.title=null!==(B=this.title)&&void 0!==B?B:"";this.snippet=null!==(C=this.snippet)&&void 0!==C?C:"";this.thumbnailUrl=this.thumbnail?this.url+"/info/"+this.thumbnail+"?token\x3d"+d.default.getToken():"./images/group-no-image.png"}A.prototype.postscript=function(){};A.prototype.getOwnerProfile=function(z,E){var w=this,D=this.owner,r=new t.default;
this.ownerProfile?r.resolve(this.ownerProfile):(this.isOwner?(D=new t.default,D.resolve(this.portalUser)):D=this.portal.getUserProfile(D),D.then(function(v){w.isAdmin=w.isOwner||w._isGroupAdmin(v);k.default({folders:w.isAdmin&&E?v.getFolders():null,tags:w.isAdmin&&z?v.getTags():null,contentTags:w.isAdmin&&z?v.getContentTags():null}).then(function(){w.set("ownerProfile",v);r.resolve(v)})}));return r};A.prototype._isOpenDataSetter=function(z){this.isOpenData=z;this.computeIsOpenDataEnabled()};A.prototype._providerSetter=
function(z){this.provider=z;this.computeIsBackedByEnterpriseGroup()};A.prototype._providerGroupNameSetter=function(z){this.providerGroupName=z;this.computeIsBackedByEnterpriseGroup()};A.prototype.leave=function(){var z=this,E=new t.default;d.default.request({url:this.url+"/leave"},{usePost:!0}).then(function(w){z.set("isMember",!1);E.resolve(w)});return E};A.prototype.join=function(){var z=this,E=new t.default;d.default.request({url:this.url+"/join"},{usePost:!0}).then(function(w){z.autoJoin&&(z.set("belongsToGroup",
!0),z.set("isMember",!0));E.resolve(w)},function(w){E.reject(w)});return E};A.prototype.getApplications=function(){var z=this,E=new t.default;d.default.request({url:this.url+"/applications"}).then(function(w){z.set("applications",w.applications);E.resolve(w.applications)},function(w){E.reject(w)});return E};A.prototype.groupContent=function(z,E){var w=this;void 0===z&&(z={});var D=z.q;D=void 0===D?"":D;var r=z.sortField;r=void 0===r?"modified":r;var v=z.sortOrder;v=void 0===v?"desc":v;var B=z.num;
B=void 0===B?12:B;var C=z.start;C=void 0===C?1:C;var F=this.portalUser,G=this.portal,H=new t.default;d.default.request({url:""+this.groupContentUrl+(E?"/search":"")+"?"+("string"===typeof z?z:"sortField\x3d"+r+"\x26sortOrder\x3d"+v+"\x26num\x3d"+B+"\x26start\x3d"+C+(D?"\x26q\x3d":"")+D)}).then(function(J){return l.getAllItemsGroups({response:J,portalUser:F,url:G.url})}).then(function(J){return w.toPortalItems(J)}).then(function(J){return H.resolve(J)},function(J){H.reject(J)});return H};A.prototype.search=
function(z){var E=this,w=new t.default,D=this.portal.portalUrl+"search";z=q.__assign({q:"group:"+this.id,sortField:"modified",sortOrder:"desc",num:12,start:1},z||{});d.default.request({url:D,content:z}).then(function(r){return E.toPortalItems(r)}).then(function(r){return w.resolve(r)},function(r){w.reject(r)});return w};A.prototype.toPortalItems=function(z){var E=this,w=new t.default;z.results&&(z.items=z.results,delete z.results);var D=z.items.map(function(r){return new a.default(q.__assign(q.__assign({},
r),{portal:E.portal}))}).map(function(r){return m.default.setVerifiedInfo(r)});k.default(D).then(function(r){z.items=r;w.resolve(z)},function(r){return 0});return w};A.prototype.groupMembers=function(z){var E=this;z=z||{};var w=new t.default,D=n.default.clone(z);z=this.url+"/userlist";D=q.__assign(q.__assign({},{sortField:"joined",sortOrder:"desc",num:25,start:1}),D);d.default.request({url:z,content:D}).then(function(r){return E.toMembers(r)}).then(function(r){return w.resolve(r)},function(r){w.reject(r)});
return w};A.prototype.toMembers=function(z){var E=this,w=new t.default,D=window.require("arcgisonline/pages/portal/PortalUser");z.users=z.users.map(function(r){return new D(q.__assign(q.__assign({},r),{portal:E.portal}))});w.resolve(z);return w};A.prototype.allGroupMembers=function(z){var E=this;z=z||{};var w=new t.default,D=n.default.clone(z);z=this.url+"/userlist";D=q.__assign(q.__assign({},{sortField:"joined",sortOrder:"desc",num:25,start:1}),D);g.default.fetchAllResources(z,D,"users").then(function(r){return E.toMembers({total:r.length,
users:r})}).then(function(r){return w.resolve(r)},function(r){w.reject(r)});return w};A.prototype.itemCount=function(){var z=new t.default;this.search({num:1}).then(function(E){return z.resolve(E&&E.total||0)});return z};A.prototype._isGroupAdmin=function(z){var E,w;z=z||this.portal.portalUser||{};var D=z.username,r=(null===(E=this.groupOwner)||void 0===E?void 0:E.orgId)||void 0;E=this._getAdmins();E=h.default.includes(E,D);D=z.orgId||r?z.orgId===r:!1;r=z.isOrgAdmin&&D;z=(null===(w=z.userRole)||void 0===
w?void 0:w.isCustom())&&D&&z.userRole.canUpdateOrgGroups();return E||r||z};A.prototype._getAdmins=function(){var z,E;return(null!==(E=null===(z=this.members)||void 0===z?void 0:z.users)&&void 0!==E?E:[]).filter(function(w){return"admin"===w.memberType}).map(function(w){return w.username})};A.prototype._canRemoveContent=function(z){var E,w=z||this.portal.portalUser||{},D=(null===(E=this.groupOwner)||void 0===E?void 0:E.username)||{};z=this._isGroupAdmin(z);w=w.username===D;return z||w};A.prototype._canAssignToThisGroup=
function(z){var E,w;z=z||this.portal.portalUser||{};var D=(null===(E=this.groupOwner)||void 0===E?void 0:E.orgId)||void 0;D=z.orgId||D?z.orgId===D:!1;E=z.isOrgAdmin&&D;z=(null===(w=z.userRole)||void 0===w?void 0:w.isCustom())&&D&&z.userRole.canAssignUsersToOrgGroups();return(E||z)&&!this.isOwner};A.prototype._canChangeOwner=function(z){var E,w;z=z||this.portal.portalUser||{};var D=(null===(E=this.groupOwner)||void 0===E?void 0:E.orgId)||{};D=z.orgId||D?z.orgId===D:!1;E=z.isOrgAdmin&&D;z=(null===(w=
z.userRole)||void 0===w?void 0:w.isCustom())&&D&&z.userRole.canReassignOrgGroups();return!(!E&&!z)};A.prototype._canManageMembershipRequests=function(z){var E;z=z||this.portal.portalUser||{};var w=z.username,D=(null===(E=this.groupOwner)||void 0===E?void 0:E.orgId)||{};E=this._getAdmins();D=z.orgId||D?z.orgId===D:!1;w=h.default.includes(E,w);z=z.isOrgAdmin&&D;return!!(this.isOwner||w||z)};A.prototype._canInviteOthers=function(z){var E,w,D=z||this.portal.portalUser||{};z=D.username;var r=(null===(E=
this.groupOwner)||void 0===E?void 0:E.orgId)||{};E=this._getAdmins();var v=D.orgId||r?D.orgId===r:!1;r=D.isOrgAdmin&&v;D=(null===(w=D.userRole)||void 0===w?void 0:w.isCustom())&&v&&D.userRole.canAssignUsersToOrgGroups();w=h.default.includes(E,z);return!!(this.isOwner||w||r||D)};A.prototype._canJoinGroup=function(z){var E,w,D;z=z||this.portal.portalUser||{};var r=(null===(E=this.groupOwner)||void 0===E?void 0:E.orgId)||{};E=z.orgId||r?z.orgId===r:!1;r=!this.isInvitationOnly;var v=!this.belongsToGroup,
B=null===(w=z.userRole)||void 0===w?void 0:w.canJoinOrgGroup();w=!z.orgId||(null===(D=z.userRole)||void 0===D?void 0:D.canJoinNonOrgGroup());return v&&r?E?B:B||w:!1};A.prototype._canDeleteGroup=function(z,E){var w,D;z=z||this.portal.portalUser||{};var r=z.username,v=(null===(w=this.groupOwner)||void 0===w?void 0:w.orgId)||{};w=this._getAdmins();w=h.default.includes(w,r);z=(z.orgId||v?z.orgId===v:!1)&&(null===(D=z.userRole)||void 0===D?void 0:D.canDeleteOrgGroups());return E&&E.isAdminView?E.canDelete:
!!(this.isOwner||w||z)};A.prototype.getCategories=function(){var z=this,E=new t.default,w,D,r,v;d.default.request({url:this.url+"/categorySchema"}).then(function(B){w=B.categorySchema||[];z.categorySchema=[];w.forEach(function(C){z._isReferencingCategorySet(C)?(D=-1<C.source.indexOf("portal.regions"),r=-1<C.source.indexOf("contentCategorySetsGroupQuery.LivingAtlas")):z.categorySchema.push(C)});D||r?e.default(z.portal,"LivingAtlas",D).then(function(C){v=(null===C||void 0===C?0:C.length)?C.shift():
{};z.categorySchema=n.default.mixin(v.categorySchema,{isLivingAtlas:!0});E.resolve(z.categorySchema)}):E.resolve(z.categorySchema)},function(B){E.reject(B)});return E};A.prototype._isReferencingCategorySet=function(z){var E,w;return-1<(null===(E=z.source)||void 0===E?void 0:E.indexOf("portal.regions"))||-1<(null===(w=z.source)||void 0===w?void 0:w.indexOf("contentCategorySetsGroupQuery.LivingAtlas"))};A.prototype.computeIsOpenDataEnabled=function(){this.isOpenDataEnabled=this.portal&&!this.portal.isPortal&&
!0===this.isOpenData};A.prototype.computeIsBackedByEnterpriseGroup=function(){this.isBackedByEnterpriseGroup="enterprise"===this.provider&&!!this.providerGroupName};return A=q.__decorate([c.default(x.PortalGroup,u.default)],A)}()})},"arcgisonline/pages/utils/getLivingAtlasCategorySet":function(){define("require exports tslib ../portal/PortalItem ../../sharing/util dojo/promise/all dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/kernel dojo/_base/lang".split(" "),function(b,y,q,a,h,e,g,f,
m,l){function d(z){var E=new g.default;h.default.request({url:z.portalUrl+"portals/self",content:{culture:m.default.locale,default:!0}}).then(function(w){E.resolve(null===w||void 0===w?void 0:w.contentCategorySetsGroupQuery)});return E}function c(z,E){var w=new g.default,D=window.require("arcgisonline/pages/portal/PortalGroup");E?z.queryGroups(E,!0).then(function(r){(r=r.total?r.results.shift():null)?w.resolve(new D(l.default.mixin(r,{portal:z}))):w.reject(!1)}):w.reject(!1);return w}function k(z,
E,w,D){var r=new g.default;D?E?t(z,D,E).then(function(v){return n(z,w,[v])}).then(function(v){return r.resolve(v)}):D.groupContent().then(function(v){return r.resolve(v.items)}).then(function(v){return n(z,w,v)}).then(function(v){return r.resolve(v)}):r.reject(!1);return r}function t(z,E,w){var D=new g.default,r;E.search({q:"group:"+E.id+' typekeywords:"'+w+'"',num:1}).then(function(v){r=v.total?v.items.shift():{};D.resolve(new a.default(l.default.mixin(r,{portal:z})))});return D}function n(z,E,w){var D=
new g.default;w=l.default.isArray(w)?w:[w];E=E&&!z.isPortal;w=w.map(function(r){return u(z,E,r)});e.default(w).then(function(r){D.resolve(r)});return D}function u(z,E,w){var D=new g.default,r=[A(w)];E&&r.push(x(z));e.default(r).then(function(v){w.set("categorySchema",v);D.resolve(w)});return D}function x(z){var E=new g.default,w={title:"Region",description:"Living Atlas Regions",displayName:f.default.common.regions};z.getRegions().then(function(D){D=(D||[]).map(function(r){return l.default.mixin(r,
{displayName:r.localizedName,name:r.region})});w=l.default.mixin(w,{categories:D});E.resolve(w)});return E}function A(z){var E=new g.default;z.getData().then(function(w){w=null===w||void 0===w?void 0:w.categorySchema;w=(null===w||void 0===w?0:w.length)?w.shift():{};E.resolve(l.default.mixin(w,{displayName:f.default.GroupWidget.categories}))});return E}a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);
return function(z,E,w){var D=new g.default;d(z).then(function(r){return c(z,r)}).then(function(r){return k(z,E,w,r)}).then(function(r){return D.resolve(r)},function(r){return D.resolve(null)});return D}})},"arcgisonline/pages/utils/resources":function(){define("require exports tslib ../../sharing/util dojo/promise/all dojo/Deferred dojo/_base/lang esri/lang".split(" "),function(b,y,q,a,h,e,g,f){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);
return function(){function m(){}m.sendAllResources=function(l,d,c,k,t,n){var u=new e.default;c=g.default.clone(c);var x=[],A=c.splice(0,d);for(f.default.isDefined(n)||(n=!0);0<(null===A||void 0===A?void 0:A.length);)x.push(a.default.request({url:l,content:k(A)},g.default.mixin({usePost:n},t||{}))),A=c.splice(0,d);h.default(x).then(function(z){u.resolve(z)},function(z){u.reject(z)});return u};m.sendAllResourcesWithDelay=function(l,d,c,k,t){function n(){setTimeout(function(){(E=A.splice(0,d))&&0<E.length&&
(a.default.request({url:l,content:k(E)},{usePost:!0}).then(function(r){w++;z.push(r);w>=x&&u.resolve(z)},function(r){w++;w>=x&&u.reject(r)}),D++,n())},0===D?0:t)}var u=new e.default,x=Math.ceil(c.length/d),A=g.default.clone(c),z=[],E,w=0,D=0;n();return u};m.sendAllResourcesSerially=function(l,d,c,k){function t(){z=x.splice(0,d);0<(null===z||void 0===z?void 0:z.length)&&a.default.request({url:l,content:k(z)},{usePost:!0}).then(function(w){E++;A.push(w);E>=u?n.resolve(A):t()},function(w){E++;E>=u?n.reject(w):
t()})}var n=new e.default,u=Math.ceil(c.length/d),x=g.default.clone(c),A=[],z,E=0;t();return n};m.fetchAllResources=function(l,d,c){void 0===d&&(d={});void 0===c&&(c="results");var k=new e.default,t=[],n=100,u=[],x=1,A,z,E;d.start=x;!d.num||d.num>n?d.num=n:n=d.num;a.default.request({url:l,content:d}).then(function(w){if(null===w||void 0===w?0:w[c]){u=u.concat(w[c]);x=w.nextStart;A=w.total-u.length;z=Math.ceil(A/n);for(E=0;E<z;E++)d.start=x+E*n,t.push(a.default.request({url:l,content:d}));h.default(t).then(function(D){D.forEach(function(r){u=
u.concat(r[c])});k.resolve(u)},function(D){k.reject(D)})}else k.resolve(u)},function(w){k.reject(w)});return k};return m}()})},"arcgisonline/pages/utils/verified":function(){define(["require","exports","tslib","../../sharing/util","dojo/Deferred"],function(b,y,q,a,h){a=q.__importDefault(a);h=q.__importDefault(h);return function(){function e(){}e.getVerifiedInfo=function(g){var f,m,l,d=new h.default,c=e.orgHash,k=null!==(f=g.orgId)&&void 0!==f?f:null===(m=g.portal)||void 0===m?void 0:m.id;f=null===
(l=g.portal)||void 0===l?void 0:l.isPortal;if(g.contentStatus&&"public_authoritative"===g.contentStatus&&k&&!f)if(c[k])d.resolve(e.orgHash[k]);else{var t=location.protocol+"//"+g.portal.portalHostname+"/sharing/rest/portals/"+k;a.default.request({url:t}).then(function(n){return e.getOrgProps(t).then(function(u){u&&(n.localizedOrgProperties=u);return n})}).then(function(n){var u,x,A=(n.allSSL?"https://":"http://")+(n.urlKey||"")+"."+n.customBaseUrl+"/",z=n.thumbnail?A+"sharing/rest/portals/self/resources/"+
n.thumbnail:"./images/group-no-image.png";c[n.id]={name:n.name,description:null===(x=null===(u=n.localizedOrgProperties)||void 0===u?void 0:u.default)||void 0===x?void 0:x.description,url:A+"home/",thumbnail:z};d.resolve(c[n.id])},function(n){return 0})}else d.resolve(!1);return d};e.getOrgProps=function(g){var f=new h.default;a.default.request({url:g+"/resources/localizedOrgProperties",content:{start:1,num:100}}).then(function(m){m&&!m.code?f.resolve(m):f.resolve(!1)},function(){f.resolve(!1)});
return f};e.setVerifiedInfo=function(g){var f=new h.default;e.getVerifiedInfo(g).then(function(m){g.verified=m;f.resolve(g)});return f};e.orgHash={};return e}()})},"arcgisonline/pages/utils/itemsgroups":function(){define("require exports tslib dojo/_base/Deferred ./arrays ./promises arcgisonline/sharing/util".split(" "),function(b,y,q,a,h,e,g){function f(c){var k=c.response,t=c.url,n=c.portalUser;c=c.contentUser;var u=[];n&&(u=u.concat(n.userGroups||[]));c&&(u=u.concat(c.groups||[]));if(k.results&&
0<(null===u||void 0===u?void 0:u.length)){var x=k.results.map(function(A){return A.id}).join(",");n=u.map(function(A){return A.id});n=h.default.batch(n,100).map(function(A){return m(t,A,x)});return e.default.eachAlwaysValues(n).then(function(A){A=l(A);return d(k,A)})}n=new a.default;n.resolve(k);return n}function m(c,k,t){if(!t||0===k.length)return t=new a.default,t.resolve({}),t;c+="content/itemsgroups";k=k.join(",");return g.default.request({url:c,content:{items:t,groups:k}})}function l(c){return c.reduce(function(k,
t){t&&Object.keys(t).forEach(function(n){n&&t[n]&&(k[n]=t[n])});return k},{})}function d(c,k){if(k){var t={};c.results.forEach(function(n){return t[n.id]=n});Object.keys(k).forEach(function(n){var u=k[n];if(u&&u.items){n=k[n];var x=n.groupId,A=n.groupTitle,z=n.groupThumbnail;n.items.forEach(function(E){E=t[E.itemId];E.groupData=E.groupData||[];E.sharedGroups=E.sharedGroups||0;0!==E.groupData.length&&h.default.find(E.groupData,function(w){return w.id===x})||(E.groupData.push({groupId:x,groupTitle:A,
groupThumbnail:z}),E.sharedGroups+=1)})}})}return c}Object.defineProperty(y,"__esModule",{value:!0});y.parseItemsGroups=y.collateItemsGroupsResponse=y.fetchItemsGroupsPage=y.getAllItemsGroups=y.getItemGroups=void 0;a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);y.getItemGroups=function(c){var k=c.url,t=c.portalUser,n=c.contentUser;c={results:[c.item]};var u=new a.default;f({response:c,url:k,portalUser:t,contentUser:n}).then(function(x){u.resolve(null===
x||void 0===x?void 0:x.results[0])});return u};y.getAllItemsGroups=f;y.fetchItemsGroupsPage=m;y.collateItemsGroupsResponse=l;y.parseItemsGroups=d})},"arcgisonline/pages/utils/promises":function(){define(["require","exports","tslib","dojo/Deferred","dojo/promise/all"],function(b,y,q,a,h){a=q.__importDefault(a);h=q.__importDefault(h);return{isPromise:function(e){return e&&"function"===typeof e.then},resolve:function(e){var g=new a.default;g.resolve(e);return g.promise},reject:function(e){var g=new a.default;
g.reject(e);return g.promise},when:function(e){return this.isPromise(e)?e:this.resolve(e)},create:function(e,g,f){var m=this,l=new a.default(f);e(function(d){return m.when(d).then(l.resolve,l.reject)});return l.promise},all:h.default,filter:function(e,g){var f=e.slice();return this.all(e.map(function(m,l){return g(m,l)})).then(function(m){return f.filter(function(l,d){return m[d]})})},eachAlways:function(e){if(e){if("function"!==typeof e.forEach){var g=Object.keys(e),f=g.map(function(m){return e[m]});
return this.eachAlways(f).then(function(m){var l={};g.forEach(function(d,c){l[d]=m[c]});return l})}return this.create(function(m){var l=[],d=e.length;0===d&&m(l);e.forEach(function(c){var k={promise:c};l.push(k);c.then(function(t){k.value=t}).catch(function(t){k.error=t}).then(function(){--d;0===d&&m(l)})})},function(m){e.forEach(function(l){l.cancel(m)})})}},eachAlwaysValues:function(e){return this.eachAlways(e).then(function(g){return g.filter(function(f){return f.value}).map(function(f){return f.value})})},
after:function(e,g){var f=this,m=0;return this.create(function(l){m=window.setTimeout(function(){f.resolve(g)},e)},function(){m&&(clearTimeout(m),m=0)})},timeout:function(e,g,f){var m=0,l=new a.default(e.cancel);e.then(function(d){l.isFulfilled()||(l.resolve(d),m&&(clearTimeout(m),m=0))});e.catch(function(d){l.isFulfilled()||(l.reject(d),m&&(clearTimeout(m),m=0))});m=window.setTimeout(function(){l.reject(f||Error("promiseUtils:timeout\n          The wrapped promise did not resolve within "+g+"ms"))},
g);return l.promise}}})},"arcgisonline/pages/portal/LicenseInfo":function(){define("require exports tslib ../utils/organization ../../sharing/geow/Licenses dojo/Deferred".split(" "),function(b,y,q,a,h,e){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);return{_licensesAPI:new h.default,licenses:{arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},arcgisinsights:{valid:!1,className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},
opsdashboard:{valid:!1,className:"web-dashboard-not-licensed"},workforce:{valid:!1,className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,isCapability:!0}},getLicenseInfo:function(){var g=this,f=new e.default,m=this.licenses||{};this._getSubscriptionInfo().then(function(){return g._getProvisionedListings()}).then(function(){return f.resolve(m)});return f},_getSubscriptionInfo:function(){var g=
this,f=new e.default,m=this.licenses||{};this.portal.user&&this.isOrgUser?a.default.getSubscriptionInfo().then(function(l){var d;g.orgCapabilities=null!==(d=null===l||void 0===l?void 0:l.orgCapabilities)&&void 0!==d?d:[];g.orgCapabilities.forEach(function(c){return g._addCapabilityInfo(c)});f.resolve(m)}):f.resolve(m);return f},_addCapabilityInfo:function(g){var f,m,l=this.licenses||{},d=(null===(f=g.id)||void 0===f?void 0:f.toLowerCase())||null;g&&(f=null!==(m=l[d])&&void 0!==m?m:{},l[d]=q.__assign(q.__assign(q.__assign({},
f),g),{title:g.id,valid:!0}))},_getProvisionedListings:function(){var g=this,f=new e.default,m=this.portal.user,l={returnAppClientIds:!0,returnAllProvisions:!0},d=this.licenses||{};m&&this.isOrgUser?this._licensesAPI.getUserProvisionedListings(m.username,l).then(function(c){g.provisionedListings=null!==c&&void 0!==c?c:[];g.provisionedListings.forEach(function(k){return g._addListingInfo(k)});f.resolve(d)},function(){f.resolve([])}):(Object.keys(d).forEach(function(c){d[c].isCapability||(d[c].valid=
!0)}),f.resolve(d));return f},_addListingInfo:function(g){var f,m=this.licenses||{},l=(null===(f=g.clientId)||void 0===f?void 0:f.toLowerCase())||null;l&&(m[l]=q.__assign(q.__assign({},m[l]||{}),{valid:!0,itemId:g.itemId,clientId:g.clientId}))},isLicensed:function(g){var f,m,l;g=null!==(f=null===g||void 0===g?void 0:g.toLowerCase())&&void 0!==f?f:"";f=this.licenses||{};return null!==(l=null===(m=null===f||void 0===f?void 0:f[g])||void 0===m?void 0:m.valid)&&void 0!==l?l:!1}}})},"arcgisonline/pages/utils/organization":function(){define("require exports tslib dojo/Deferred dojo/cookie dojo/json dojo/string dojo/i18n!../../nls/arcgisonline dojo/io-query dojo/_base/kernel moment/moment ../../esriGeowConfig ./formatters ../utils/arrays ../../sharing/geow/Roles ../../sharing/util ../../sharing/geow/Geow".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);t=q.__importDefault(t);n=q.__importDefault(n);u=q.__importDefault(u);x=q.__importDefault(x);var A=b.toUrl("arcgisonline/sharing/dijit")+"/css/images/app-icons/";return function(){function z(){}z.isMobile=function(){return 720>=
window.innerWidth};z.getCompatibleUserTypes=function(E,w,D){var r=this,v=[];w.forEach(function(B){var C=!1,F=!1;E.isPro&&B.apps.forEach(function(I){I.isAppBundle||I.entitlements.forEach(function(K){if(-1!==r._proKeys.indexOf(K)){-1!==r._proKeys.indexOf(E.key)&&(F=!0);var R=null===D||void 0===D?void 0:D.filter(function(W){return W.key===K})[0];R&&r.isProExtension(E.key)&&-1!==R.extNotSupported.indexOf(E.key)&&(C=!0)}})});var G=!1,H=!1,J=!1;B.apps.forEach(function(I){E.isAppBundle&&I.isAppBundle&&I.id===
E.itemId&&(G=!0);E.isAppBundle||I.isAppBundle||I.id!==E.itemId||-1===I.entitlements.indexOf(E.key)?!E.isAppBundle&&I.isAppBundle&&I.apps.some(function(R){return-1!==R.entitlements.indexOf(E.key)})&&(H=!0):H=!0;var K=E.requiredListings;0<(null===K||void 0===K?void 0:K.length)?I.isAppBundle?I.apps.some(function(R){return-1<K.indexOf(R.id)})&&(J=!0):-1<K.indexOf(I.id)&&(J=!0):J=!0});!(-1===E.allowedLevels.indexOf(B.level)&&0!==E.allowedLevels.length||C||F||G||H)&&0<B.maxUsers&&J&&!B.supportsSignInOnlyFromUTApps&&
v.push(B)});return v};z.userTypePassesRequired=function(E,w){var D=w.requiredListings;if(!D||0===D.length)return!0;var r=!1;return E.apps.some(function(v){v.isAppBundle?v.apps.some(function(B){return-1<D.indexOf(B.id)})&&(r=!0):-1<D.indexOf(v.id)&&(r=!0);return r})};z.checkPasswordStrength=function(E){return u.default.request({url:u.default.getSecureUrl(c.default.restBaseUrl+"portals/checkPasswordStrength"),content:{password:E}},{usePost:!0})};z.getSubscriptionInfo=function(){return u.default.request({url:u.default.getSecureUrl(c.default.restBaseUrl+
"portals/self/subscriptionInfo")})};z.filterRoles=function(E,w,D,r,v){var B=[],C=q.__spreadArrays(["portal:user:joinNonOrgGroup","portal:user:viewTracks"],w.privileges);"11"===r&&C.push("features:user:edit");E.forEach(function(F){if(D||!D&&w&&F.privileges&&!n.default.exceedsRolePrivileges(C,F.privileges))v?B.push(F):B.push({name:F.name,role:F.id,description:F.description})});return B};z.alreadyIncludedInUserType=function(E,w){var D,r=0<E.apps.filter(function(v){return w.itemId===v.id}).length;E.apps.forEach(function(v){v.isAppBundle&&
v.apps.forEach(function(B){B.id===w.itemId&&(r=!0)})});(null!==(D=E.extensions)&&void 0!==D?D:[]).some(function(v){(v=v.id===w.itemId)&&(r=!0);return v});return r};z.convertAppBundletoEntitlement=function(E){return E.map(function(w){return{key:w.appBundleItemId,itemId:w.appBundleItemId,title:w.name,used:w.assigned,total:w.maxUsers,isAppBundle:!0,apps:w.apps,allowedLevels:w.allowedLevels,usernames:w.usernames}})};z.transformAppBundleApps=function(E,w,D){var r=this,v=[];E.forEach(function(B){var C,
F,G;if(1>=(null===(C=B.entitlements)||void 0===C?void 0:C.length)){if(C=((null===(F=r._appSwitcherResponse)||void 0===F?void 0:F.apps)||[]).filter(function(H){return H.entitlement===B.entitlements[0]})[0],D||null===C||void 0===C||!C.hidden)C&&(B.title=C.shortLabel||C.title||B.title||""),v.push(B)}else null===(G=B.entitlements)||void 0===G?void 0:G.forEach(function(H){var J,I=((null===(J=r._appSwitcherResponse)||void 0===J?void 0:J.apps)||[]).filter(function(K){return H&&K.entitlement===H})[0];(null===
I||void 0===I?0:I.title)&&!I.hidden&&(J=q.__assign(q.__assign({},B),{title:I.shortLabel||I.title}),v.push(J))})});return v};z.initLicensesConfig=function(E){var w=this,D=new a.default;E||D.resolve();this.queryAppSwitcherItem(E).then(function(r){var v;0<(null===(v=r.items)||void 0===v?void 0:v.length)?(r=r.items[0],w.licensesConfigItem=r,w.getAppSwitcherConfig(r,E).then(function(){D.resolve()})):D.resolve()});return D};z.clearLicensesConfigCache=function(){this._appSwitcherConfigDfd=this._appSwitcherResponse=
this._appSwitcherSearchDfd=this._appSwitcherSearchResponse=void 0};z.queryAppSwitcherItem=function(E){var w=this,D=new a.default;this._appSwitcherSearchResponse?D.resolve(this._appSwitcherSearchResponse):this._appSwitcherSearchDfd?this._appSwitcherSearchDfd.then(function(r){D.resolve(r)}):(this._appSwitcherSearchDfd=D,E.queryItems(c.default.licensesItemQuery,!0).then(function(r){w._appSwitcherSearchResponse=r;D.resolve(r)},function(r){w._appSwitcherSearchResponse={};D.resolve({})}));return D};z.getAppSwitcherConfig=
function(E,w){var D=this,r=new a.default;this._appSwitcherResponse?r.resolve(this._appSwitcherResponse):this._appSwitcherConfigDfd?this._appSwitcherConfigDfd.then(function(v){r.resolve(v)}):(this._appSwitcherConfigDfd=r,u.default.request({url:E.itemDataUrl}).then(function(v){D._appSwitcherResponse=v;D.licensesConfig=v;v.appSwitcher&&(D._apps=v.appSwitcher.apps);r.resolve(v)},function(v){D._appSwitcherResponse={};r.resolve({})}));return r};z.isEntitlement=function(E){return void 0!==E.key||void 0!==
E.itemId};z.getAppIconDir=function(){return A};z.getAppIcon=function(E,w){function D(R){F.imagePath="svg-app-icon.svg";F.abbr=R.title.substring(0,1);F.showAbbr=!0;F.abbrClass="";F.ordinal=1;F.shapeClass=""}function r(R){var W=I.filter(function(P){var S,L;return P.entitlement&&1===(null===(S=R.entitlements)||void 0===S?void 0:S.length)&&P.entitlement===(null===(L=R.entitlements)||void 0===L?void 0:L[0])||P.title&&P.title===R.title||P.shortLabel&&P.shortLabel===R.title})[0];-1!==R.title.indexOf("ArcGIS Pro")?
(F.imagePath="arcgis-pro.png",F.ordinal=0):(null===W||void 0===W?0:W.image)?(F.imagePath=""+K+W.image,F.ordinal=0,G=!0):W&&!W.image?D(R):(F.imagePath="fieldmapsmobile"===R.id?A+"fieldmaps.png":J?""+K+R.title.replace(/\s/g,"_")+"/icon.png":A+"generic-app.png",F.shapeClass="not-hex",G=!0)}function v(R){var W,P,S=I.filter(function(L){return L.entitlement&&L.entitlement===R.key||L.title&&L.title===R.title||L.shortLabel&&L.shortLabel===R.title})[0];R.isPro||-1!==R.title.indexOf("ArcGIS Pro")?(F.imagePath=
"arcgis-pro.png",F.ordinal=0):(null===S||void 0===S?0:S.image)?(F.imagePath=""+K+S.image,F.ordinal=0,G=!0):S&&!S.image?D(R):(F.shapeClass="not-hex",R.icon?(F.imagePath=c.default.restBaseUrl+"portals/self/resources/"+R.icon+"?token\x3d"+c.default.userInfo.token,G=!0,F.ordinal=2):(null===(P=null===(W=R.properties)||void 0===W?void 0:W.appSwitcher)||void 0===P?0:P.image)?(F.imagePath="https://"+c.default.self.portalHostname+"/sharing/rest/content/items/"+R.itemId+"/resources/"+R.properties.appSwitcher.image+
"?token\x3d"+c.default.userInfo.token,G=!0,F.ordinal=2):"esri"===R.owner||"esri_apps"===R.owner||R.isAppBundle?(F.imagePath=J?""+K+R.title.replace(/\s/g,"_")+"/icon.png":A+"generic-app.png",G=!0):(F.imagePath=w,F.showAbbr=!0,F.abbrClass="",F.ordinal=3))}var B,C,F={abbrClass:"hide",showAbbr:!1,abbr:"",shapeClass:""},G=!1;if("User License Type Extension"===E.type)return q.__assign(q.__assign({},F),{imagePath:A+"user-type-extension.png",ordinal:0});if("Application SDK"===E.type)return q.__assign(q.__assign({},
F),{imagePath:A+"runtime.png",ordinal:0});if(E.isExtension)return q.__assign(q.__assign({},F),{imagePath:A+"pro-extension.png",ordinal:0});var H=this._getAppSwitcherIcon(E,w),J=this.licensesConfigItem,I=(null===(B=this._appSwitcherResponse)||void 0===B?void 0:B.apps)||[];w&&0!==w.length||(w="svg-app-circle.svg");var K=c.default.restBaseUrl+"content/items/"+(null===(C=this.licensesConfigItem)||void 0===C?void 0:C.id)+"/resources/";H?F=H:this.isEntitlement(E)?v(E):r(E);G||(F.imagePath=A+F.imagePath);
F.isAppBundle=E.isAppBundle;return F};z.getEmptyAppIcon=function(){return A+"svg-app-icon.svg"};z._getAppSwitcherIcon=function(E,w){var D=this;if(this._apps){w="svg-app-icon.svg";var r=this._apps.filter(function(B){var C=B.title&&B.title===E.title;D.isEntitlement(E)&&!C&&(C=B.itemId&&B.itemId===E.itemId);return C})[0];if(r){var v={};r.image?(v.imagePath=r.image,v.ordinal=0,v.abbrClass="hide",v.showAbbr=!1,v.abbr=""):(v.imagePath=w,v.abbr=r.abbr,v.showAbbr=!0,v.abbrClass="",v.ordinal=1);v.shapeClass=
""}return v}};z.getUserTypesContainingPro=function(E){return E.filter(function(w){return w.apps?w.apps.some(function(D){return"ArcGIS Pro"===D.title}):!1})};z.userTypeIncludesPro=function(E){var w;return null===(w=null===E||void 0===E?void 0:E.apps)||void 0===w?void 0:w.some(function(D){return"ArcGIS Pro"===D.title})};z.getProFromUserTypes=function(E){var w;E.forEach(function(D){D.apps&&(w=t.default.find(D.apps,function(r){if("ArcGIS Pro"===r.title)return r}))});return w};z.getProFromAppBundles=function(E){var w;
E.forEach(function(D){w=t.default.find(D.apps,function(r){if("ArcGIS Pro"===r.title)return r})});return w};z.getProExtensions=function(E){var w=this;return E.filter(function(D){return-1!==w._proExtensionKeys.indexOf(D.key)})};z.isProExtension=function(E){return-1!==this._proExtensionKeys.indexOf(E)};z.isProKey=function(E){return-1!==this._proKeys.indexOf(E)};z.filterOutProExtensions=function(E){var w=this;return E.filter(function(D){return-1===w._proExtensionKeys.indexOf(D.key)})};z.getProEntitlements=
function(E){var w=this;E=E.filter(function(D){return D.isPro&&-1<w._proKeys.indexOf(D.key)});E.forEach(function(D){"desktopBasicN"===D.key?D.ordinal=0:"desktopStdN"===D.key?D.ordinal=1:"desktopAdvN"===D.key&&(D.ordinal=2)});E.sort(function(D,r){return D.ordinal>r.ordinal?1:D.ordinal<r.ordinal?-1:0});return E};z.getUserRole=function(E){var w;return null!==(w=null===E||void 0===E?void 0:E.userRole)&&void 0!==w?w:{}};z.shouldShowMFA=function(E,w){w=this.getUserRole(w).isAdmin();var D=!1;!E.isPortal&&
E.subscriptionInfo?(D="trial developer"===E.subscriptionInfo.type.toLowerCase()||"developer subscription"===E.subscriptionInfo.type.toLowerCase(),D=w&&c.default.multiFactorEnabled&&E.mfaEnabled&&!D):D=E.isPortal&&E.supportsEmail&&w&&E.mfaEnabled;return D};z.canViewLastLogin=function(E){E=this.getUserRole(E);return E.isAdmin()||E.canViewUsers()};z.canLoadLicensesUI=function(E){E=this.getUserRole(E);return E.isAdmin()||E.canViewOrgUsers()&&E.canManageLicenses()};z.canLoadMembersCard=function(E){E=this.getUserRole(E);
return E.isAdmin()||E.canViewUsers()};z.canManageMembers=function(E){E=this.getUserRole(E);return E.isAdmin()||E.canViewUsers()&&(E.canUpdateUsers()||E.canDeleteUsers()||E.canChangeUserRoles()||E.canManageLicenses())};z.canGetUserTypes=function(E){E=this.getUserRole(E);return E.isAdmin()||E.canInviteUsers()||E.canManageRoles()||E.canManageLicenses()};z.canGetUsersGroups=function(E){E=this.getUserRole(E);return E.isAdmin()||E.canViewUsers()&&E.canViewOrgGroups()};z.canGetLicenseTypes=function(E){E=
this.getUserRole(E);return E.isAdmin()||E.canManageLicenses()||E.canInviteUsers()};z.canSelectMembers=function(E){E=this.getUserRole(E);return E.isAdmin()||E.canViewOrgUsers()&&(E.canDisableUsers()||E.canManageLicenses()||E.canAssignUsersToOrgGroups()||E.canReassignOrgItems())};z.canUseMemberActions=function(E){E=this.getUserRole(E);return E.isAdmin()||E.canUpdateUsers()||E.canDeleteUsers()||E.canDisableUsers()||E.canChangeUserRoles()};z.checkUserCultureSetting=function(E,w){var D=new a.default,r=
m.default.queryToObject(window.location.search.substring(1)),v=function(B){var C,F=-1<["hi"].indexOf(B);!B||l.default.locale===B.toLowerCase()||F||r.locale?D.resolve():(F=u.default.getCookie("esri_auth"),F.username=F.username||F.email,(null===F||void 0===F?void 0:F.username)===E.username&&(F.culture&&(null===(C=F.culture)||void 0===C?void 0:C.toLowerCase())===B.toLowerCase()||(F.culture=B.toLowerCase(),x.default.setAuthCookie(F),h.default("arcgisLocale",F.culture)),D.resolve(),window.location.reload()))};
w?u.default.request({url:c.default.restBaseUrl+"community/users/"+E.username}).then(function(B){return v(B.culture)},function(){return D.resolve()}):v(E.culture);return D};z.hasModernHomePageEnabled=function(E){var w,D,r;return E.isPortal?"modern"===(null===(D=E.portalProperties)||void 0===D?void 0:D.homePage)||"modernOnly"===(null===(r=E.portalProperties)||void 0===r?void 0:r.homePage):"modern"===(null===(w=E.portalProperties)||void 0===w?void 0:w.homePage)||this.isOrgPastLegacyHomePageCutOffDate(E)};
z.isOrgPastLegacyHomePageCutOffDate=function(E){var w=(new Date("June 30, 2020")).getTime();return E.isPortal?!1:E.created>=w};z.isEnterpriseSetToModernHomePageOnly=function(E){var w;return E.isPortal&&"modernOnly"===(null===(w=E.portalProperties)||void 0===w?void 0:w.homePage)};z.hasLegacyHomePageDefaults=function(E){var w,D=null===(w=E.rotatorPanels)||void 0===w?void 0:w[0];w=!E.homePageFeaturedContent;var r=!E.description;E=!E.backgroundImage;D=!D||"banner-2"===(null===D||void 0===D?void 0:D.id)&&
-1<D.innerHTML.indexOf('\x3cimg src\x3d"images/banner-2.jpg" style\x3d"border-radius:0 0 10px 10px; margin-top:0; width:960px;height:180px;" /\x3e\x3cdiv style\x3d"position: absolute; bottom: 80px; left:80px; max-height:65px; width: 660px; margin:0;"\x3e\x3cimg src\x3d"')&&-1<D.innerHTML.indexOf(' class\x3d"esriFloatLeading esriTrailingMargin025" style\x3d"margin-bottom:0;max-height:100px;" /\x3e\x3cspan style\x3d"position:absolute;bottom:0;margin-bottom:0;line-height:normal; font-family:HelveticaNeue,Verdana; font-weight:600;font-size:32px;color:#369;"\x3e')&&
-1<(null===D||void 0===D?void 0:D.innerHTML.indexOf("\x3c/span\x3e\x3c/div\x3e"));return r&&E&&D&&w};z.neverLoggedInLabel=function(E,w){return g.default.substitute(f.default.myOrganization.notYetTooltip,{date:w})};z.lastLoginDate=function(E){var w=d.default(new Date).diff(d.default(E),"days"),D=d.default(new Date).isSame(E,"day");return D?f.default.filters.today:!D&&2>w?f.default.myOrganization.membersTab.yesterday:0===E||-1===E||1E3===E?f.default.myOrganization.notYet:k.default.fullDate(E)};z.disabledStyle=
function(E){return E?"org-member-disabled":""};z.disabledStyleAllowEvents=function(E){return E?"org-member-disabled__allow-events":""};z.disabledLinkClass=function(E){return E?"org-member-disable-link":""};z.shouldShowOnboard=function(E,w){var D=u.default.getCookie("esri_onboard",!0)||{},r=u.default.isPortal(),v=!!c.default.isDebug;v=r||v?document.domain:".arcgis.com";w||(w=new Date("June 30, 2019"));var B=!D[E]&&new Date<w;!r&&D[E]&&new Date>=w&&(delete D[E],h.default("esri_onboard",e.default.stringify(D),
{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:v}));return B};z.createOnboardCookie=function(E){var w,D=u.default.getCookie("esri_onboard")||{},r=u.default.isPortal(),v=!!c.default.isDebug;r=r||v?document.domain:".arcgis.com";h.default("esri_onboard",e.default.stringify(q.__assign(q.__assign({},D),(w={},w[E]=!0,w))),{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:r})};z.createCookie=function(E,w,D,r){var v=u.default.isPortal(),B=!!c.default.isDebug;r=r||!c.default.self.urlKey?
".arcgis.com":c.default.self.urlKey+"."+c.default.self.customBaseUrl;v=v||B?document.domain:r;D*=864E5;h.default(E,e.default.stringify(q.__assign({},w)),{expires:new Date((new Date).getTime()+D),path:"/",domain:v})};z.isSearchTermValid=function(E,w){var D=/^[^%()';]+$/,r=/^[a-zA-Z0-9@._]+$/;return("username"===w?r:D).test(E)||0===E.length};z.generateSearchErrorMessage=function(E,w){return{firstname:f.default.myOrganization.restrictedFirstNameCharacters,lastname:f.default.myOrganization.restrictedLastNameCharacters,
username:f.default.createAccount.errors.restrictedCharacters,fullname:f.default.myOrganization.restrictedFullNameCharacters}[w]||f.default.controlBar.invalidSyntax};z.addBuiltInRolesAndTranslate=function(E,w){E=q.__spreadArrays(E,[{id:"org_publisher",name:f.default.myOrganization.formatters.rolePublisher},{id:"org_admin",name:f.default.myOrganization.formatters.roleAdmin},{id:"org_user",name:f.default.myOrganization.formatters.roleUser}]);E.forEach(function(D){var r=w.filter(function(v){return v.id===
D.id})[0];r&&(D.name=r.name)});return E};z.highlight=function(E,w){w&&(E=w.textContent.replace(new RegExp("("+E+")","ig"),'\x3cspan class\x3d"org-settings__search-highlight"\x3e$1\x3c/span\x3e'),w.innerHTML=E)};z.categorizeEntitlements=function(E){var w=this.getProExtensions(E);E=this.filterOutProExtensions(E);var D=this.getProEntitlements(E),r=[],v=[],B=[],C=[];E.forEach(function(F){"User License Type Extension"===F.type?B.push(F):"Application SDK"===F.type?C.push(F):F.type&&-1<F.type.indexOf("Application")?
r.push(F):F.type&&-1===F.type.indexOf("Applcation")&&v.push(F)});return{pro:D,proExtensions:w,apps:r,data:v,userTypeExtensions:B,runtime:C}};z.pickRandomHomePageStockImage=function(){return""+Math.floor(2*Math.random()+1)};z.getTitleColorBasedOnStockImage=function(E){return t.default.includes(["4","5","6"],E)?"black":"white"};z.isAdminRole=function(E){var w=!1;E.privileges?w=E.privileges.some(function(D){return-1<D.indexOf(":admin")}):"org_admin"===E.id&&(w=!0);return w};z.filterIncludedEntitlements=
function(E){var w;return E.entitlements&&null!==(w=E.licenseType)&&void 0!==w&&w.apps?E.entitlements.filter(function(D){var r,v=!1;v=null===(r=E.licenseType)||void 0===r?void 0:r.apps.some(function(B){return B.isAppBundle?B.apps.some(function(C){return-1<C.entitlements.indexOf(D)}):-1<B.entitlements.indexOf(D)});return!v}):E.entitlements};z.getAppTitle=function(E){var w,D=((null===(w=this._appSwitcherResponse)||void 0===w?void 0:w.apps)||[]).filter(function(r){return r.entitlement===E.entitlements[0]})[0];
return 1===E.entitlements.length?(null===D||void 0===D?void 0:D.title)||E.title||"":E.title||""};z.getClearEmptyFieldsStateForHelperService=function(E){return""===E?!0:void 0};z.adjustSanitizerForOrgSettingsUse=function(E){Object.keys(E._xssFilter.cssFilter.options.whiteList).forEach(function(w){E._xssFilter.cssFilter.options.whiteList[w]=!0});E._xssFilter.cssFilter.options.whiteList["-webkit-border-radius"]=!0;E._xssFilter.cssFilter.options.whiteList["-moz-border-radius"]=!0;E._xssFilter.cssFilter.options.whiteList["-o-border-radius"]=
!0};z.sanitizeUrlOrgOverride=function(E){return E};z._proKeys=["desktopBasicN","desktopStdN","desktopAdvN"];z._proExtensionKeys="spatialAnalystN 3DAnalystN networkAnalystN geostatAnalystN dataReviewerN workflowMgrN dataInteropN defenseN FMVN businessBasicN businessStdN roadsHighwaysN publisherN productionMapN schematicsN trackingN aviationN airportsN maritimeN bathymetryN smpNAmericaN smpEuropeN smpAsiaPacificN smpMidEAfricaN smpLAmericaN smpJapanN LocRefDesktopN imageAnalystN locateXTN".split(" ");
z.orgSettingsSanitizerParams={whiteList:{a:"id class role target rel title".split(" "),blockquote:["cite","style"],center:[],col:["span","style","width","height"],colgroup:["style"],div:["align","id","class","role"],font:["face","class"],h1:["id","style"],h2:["id","style"],h3:["id","style"],h4:["id","style"],h5:["id","style"],iframe:["class","height","width","src"],img:["class"],input:["id","checked","class","name","type"],li:["style"],link:["href","rel","type"],meta:["name","content","http-equiv",
"charset"],p:["id","class"],span:["id","class","role"],strike:[],strong:["style"],style:[],sub:[],sup:[],table:["id","background"],td:["background"],tdbody:[],thead:[],title:[],address:["id","class","style"],article:["id","class","style"],aside:["id","class","style"],details:["id","class","style"],figcaption:["id","class","style"],figure:["id","class","style"],footer:["id","class","style"],header:["id","class","style"],main:["id","class","style"],mark:["id","class","style"],nav:["id","class","style"],
section:["id","class","style"],summary:["id","class","style"],time:["id","class","style"]}};return z}()})},"arcgisonline/pages/utils/formatters":function(){define("require exports tslib ../pageUtil ./arrays ./icons dojo/i18n!../../nls/arcgisonline dojo/date/locale dojo/number dojo/text!../dijit/Card/_Owner.html dojo/text!../dijit/Card/_OwnerVerified.html dojo/string moment/moment".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=
q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);return function(){function t(){}t.timeFromPresent=function(n){return k.default.utc(n).fromNow()};t.fullDate=function(n){return n&&-1<n?f.default.format(new Date(n),{selector:"date",formatLength:"medium"}):""};t.timeOnly=function(n){return n&&-1<n?f.default.format(new Date(n),{selector:"time",formatLength:"short"}):""};t.fullDateEnhanced=function(n){var u=
k.default(new Date).diff(k.default(n),"days"),x=k.default(new Date).isSame(n,"day");return x?g.default.filters.today:!x&&2>u?g.default.myOrganization.membersTab.yesterday:15>u?c.default.substitute(g.default.myOrganization.membersTab.daysAgo,{num:u}):this.fullDate(n)};t.completeDate=function(n){return n&&-1<n?f.default.format(new Date(n),{formatLength:"long"}):""};t.capitalize=function(n){return n.charAt(0).toUpperCase()+n.slice(1)};t.shortenNumber=function(n){return 1E6<=n?m.default.format(Math.round(n/
1E5)/10)+"M":1E3<=n?m.default.format(Math.round(n/100)/10)+"K":""+n};t.empty=function(n){return null!==n&&void 0!==n?n:""};t.hide=function(n){return n?"":"hide"};t.show=function(n){return n?"hide":""};t.firstChar=function(n){var u;return null!==(u=null===n||void 0===n?void 0:n.charAt(0).toUpperCase())&&void 0!==u?u:""};t.stripHTML=function(n){var u,x;n=(new DOMParser).parseFromString(n,"text/html");return null!==(x=n.body&&(null!==(u=n.body.textContent)&&void 0!==u?u:n.body.innerText))&&void 0!==
x?x:""};t.formatCategoryChip=function(n){var u=n;"/"===(null===n||void 0===n?void 0:n[0])&&(u=n.slice(1));return u=u.split("/").join(" / ")};t.lowerCase=function(n){var u;return null!==(u=(null===n||void 0===n?void 0:n.toLowerCase)&&n.toLowerCase())&&void 0!==u?u:""};t.hyphenate=function(n){return(n||"").replace(/\s+/g,"-")};t.formatDisplayName=function(n,u,x){var A=(null===n||void 0===n?void 0:n.portal)&&n.portal.portalUser&&n.portal.portalUser.userRole;A=n&&(n.isAdminView?A&&A.canUpdateOrgItems():
n.canUpdate);var z="Data Store"===(null===n||void 0===n?void 0:n.type);n&&A&&u&&!n.isUtilityNetwork&&(n.isHostedService?x+=" ("+(n.isDataView?g.default.viewsWidget.hostedView:"Feature Service"===n.type?g.default.viewsWidget.hostedData:g.default.viewsWidget.hostedService)+")":n.isLocatorView?x+=" ("+g.default.viewsWidget.locatorView+")":n.isPhotoLocations&&(x+=" ("+g.default.viewsWidget.photoLocations+")"));z&&(x=a.default.formatDataStoreItem(x,n.typeKeywords));return x};t.formatNumViews=function(n){return m.default.format(null!==
n&&void 0!==n?n:0,{pattern:"#,###,###,##0"})};t.formatViewsLabel=function(n){n="file"!==n.classification||h.default.includes(n.types,"is-views")||h.default.includes(n.types,"is-pdf")?"viewsColon":"downloadsLbl";return g.default.viewsWidget[n]};t.formatOwnerText=function(n,u,x){var A,z,E;if(u)return null!==(z=null===(A=n.verified)||void 0===A?void 0:A.name)&&void 0!==z?z:n.owner;u=(null===(E=n.verified)||void 0===E?void 0:E.name)&&n.verified.url;E=c.default.substitute(l.default,{item:n,i18n:g.default});
return u?(n=c.default.substitute(d.default,{item:n,i18n:g.default}),x?'\x3cspan class\x3d"js-owner-section inline-block"\x3e'+n.replace("js-owner-section","")+' \x3c/span\x3e\x3cdiv class\x3d"item__managed-by-wrapper"\x3e'+g.default.itemProperties.managedByOwner+" "+E.replace("js-owner-section","")+"\x3c/div\x3e":n):E};t.getAccess=function(n){return g.default.itemSharingLabel[n]};t.getAccessIcon=function(n){return{private:e.default.lock["16"],shared:e.default.users["16"],org:e.default.organization["16"],
public:e.default.globe["16"]}[n]};t.getGroupAccess=function(n){return{public:g.default.groupsPage.everyone,private:g.default.groupsPage.groupMembers,org:g.default.groupsPage.organization}[n]};t.getGroupAccessIcon=function(n){return{public:e.default.inline.globe["16"],private:e.default.inline.lock["16"],org:e.default.inline.organization["16"]}[n]};return t}()})},"arcgisonline/sharing/geow/Roles":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/promise/all".split(" "),
function(b,y,q,a,h,e,g){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);return function(){function f(){this.declaredClass="arcgisonline.sharing.geow.Roles"}f.exceedsRolePrivileges=function(m,l){l=l||[];var d;for(d=0;d<l.length;d++){var c=l[d];if(-1===m.indexOf(c))return!0}return!1};f.prototype.createRole=function(m,l){return h.default.request({url:a.default.restBaseUrl+"portals/self/createRole",content:{name:m,description:l}},{usePost:!0})};f.prototype.updateRole=
function(m,l,d){return h.default.request({url:a.default.restBaseUrl+"portals/self/roles/"+m+"/update",content:{name:l,description:d}},{usePost:!0})};f.prototype.deleteRole=function(m){return h.default.request({url:a.default.restBaseUrl+"portals/self/roles/"+m+"/delete"},{usePost:!0})};f.prototype.setPrivileges=function(m,l){var d=a.default.restBaseUrl+"portals/self/roles/"+m+"/setPrivileges";m={id:m,privileges:JSON.stringify({privileges:l})};return h.default.request({url:d,content:m},{usePost:!0})};
f.prototype.getPrivileges=function(m){return h.default.request({url:a.default.restBaseUrl+"portals/self/roles/"+m+"/privileges"})};f.prototype.getAllUsersForRole=function(m){var l=this,d=new e.default,c=[],k=[],t=1,n,u,x;l.getUsersForRole(1,100,m).then(function(A){if(A&&A.users){k=k.concat(A.users);t=A.nextStart;n=A.total-k.length;u=Math.ceil(n/100);for(x=0;x<u;x++)c.push(l.getUsersForRole(t+100*x,100,m));g.default(c).then(function(z){z.forEach(function(E){k=k.concat(E.users)});d.resolve(k)},function(){d.resolve(k)})}},
function(){d.resolve(k)});return d};f.prototype.getUsersForRole=function(m,l,d){return h.default.request({url:a.default.restBaseUrl+"portals/self/users",content:{start:m,num:l,role:d}})};f.prototype.getAllRoles=function(m){var l=this,d=new e.default,c=[],k=1,t=[],n,u,x;l.getRoles(k,100,m).then(function(A){if(A&&A.roles){t=t.concat(A.roles);k=A.nextStart;n=A.total-t.length;u=Math.ceil(n/100);for(x=0;x<u;x++)c.push(l.getRoles(k+100*x,100,m));g.default(c).then(function(z){z.forEach(function(E){t=t.concat(E.roles)});
d.resolve(t)},function(){d.resolve(t)})}},function(){d.resolve(t)});return d};f.prototype.getRoles=function(m,l,d){var c=a.default.restBaseUrl+"portals/self/roles";m={start:m,num:l,returnPrivileges:null};d&&(m.returnPrivileges=d);return h.default.request({url:c,content:m})};f.prototype.getRole=function(m){return h.default.request({url:a.default.restBaseUrl+"portals/self/roles/"+m})};f.prototype.containsPrivilegesOutsideRole=function(m,l,d){var c=new e.default;m={roleResult:this.getPrivileges(m),compareResult:this.getPrivileges(l)};
var k=!1,t,n;g.default(m).then(function(u){t=u.roleResult&&u.roleResult.privileges||[];n=u.compareResult&&u.compareResult.privileges||[];d&&d instanceof Array?t=t.concat(d):d&&d instanceof String&&t.push(d);k=f.exceedsRolePrivileges(t,n);c.resolve(k)},function(){c.resolve(k)});return c};return f}()})},"arcgisonline/sharing/geow/Licenses":function(){define("require exports tslib dojo/Deferred dojo/string dojo/i18n!../../nls/arcgisonline esri/lang ../../esriGeowConfig ../../pages/pageUtil ../../pages/utils/organization ../../pages/utils/promises ../../pages/components/ManageBlockedApps/blocked-apps-service ../util".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);return function(){function t(){this.proEntitlements=[];this._productListings=[];this.productEntitlements={};this._remainingProEntitlements={};this._remainingProductEntitlements={};this.appUserCounts=[];this._userEntitlementsUrl=f.default.restBaseUrl+
"content/listings/${itemId}/userEntitlements";this._userEntitlementUrl=this._userEntitlementsUrl+"/${username}";this._userSessionsUrl=f.default.restBaseUrl+"content/listings/${itemId}/users/${username}/sessions"}t.terminateUserSession=function(n,u,x){var A=k.default.getSecureUrl(f.default.restBaseUrl);return k.default.request({url:A+"content/listings/"+n+"/terminateUserSession",content:{username:u,sessionId:x}},{usePost:!0})};t.prototype.provisionUserEntitlements=function(n,u,x){return m.default.sendAllResourcesSerially(f.default.restBaseUrl+
"content/listings/"+n+"/provisionUserEntitlements",25,u.users,function(A){return{userEntitlements:JSON.stringify({users:A,entitlements:u.entitlements}),suppressCustomerEmail:!x}})};t.prototype.retrieveProvisionedUserEntitlement=function(n,u){n=h.default.substitute(this._userEntitlementUrl,{itemId:n,username:u});return k.default.request({url:n})};t.prototype.retrieveProvisionedUserEntitlements=function(n,u,x){n=h.default.substitute(this._userEntitlementsUrl,{itemId:n});return k.default.request({url:n,
content:{start:u?u:1,num:x?x:10}})};t.prototype.retrieveSessionInformation=function(n,u){n=h.default.substitute(this._userSessionsUrl,{itemId:n,username:u});return k.default.request({url:n})};t.prototype.provisionUserAppBundle=function(n,u,x){var A=new a.default,z=new a.default;x?z.resolve():this.getAppBundles(!0).then(function(E){E=E.appBundles.filter(function(w){return w.appBundleItemId===n})[0];E.maxUsers-E.assigned>=u.length?z.resolve():A.reject()});z.then(function(){m.default.sendAllResourcesWithDelay(f.default.restBaseUrl+
"content/listings/"+n+"/provisionUserAppBundle",25,u,function(E){return{users:JSON.stringify(E),revoke:x}},500).then(function(E){A.resolve(E)},function(E){A.reject(E)})});return A};t.prototype.updateUserLicenseType=function(n,u){var x=new a.default;m.default.sendAllResourcesSerially(f.default.restBaseUrl+"portals/self/updateUserLicenseType",25,n,function(A){return{users:JSON.stringify(A),userLicenseType:u}}).then(function(A){x.resolve(A)},function(){x.reject()});return x};t.prototype.getUserCounts=
function(n){return k.default.request({url:f.default.restBaseUrl+"portals/self/users/counts?type\x3d"+n})};t.prototype.getUserLicenseType=function(n){var u=this,x=new a.default,A;c.default.getBlockedAppsWithInfo().then(function(z){A=z;return k.default.request({url:f.default.restBaseUrl+"/community/users/"+n+"/userLicenseType"})}).then(function(z){z.apps.forEach(function(E){E.isAppBundle?E.apps.forEach(function(w){w.blocked=c.default.isBlocked(A,w)}):E.blocked=c.default.isBlocked(A,E)});u.addFieldMapsMobileToUserType(z);
x.resolve(z)},function(){x.resolve()});return x};t.prototype.getUserAppBundles=function(n){return m.default.fetchAllResources(f.default.restBaseUrl+"/community/users/"+n+"/appBundles",{num:10},"appBundles")};t.prototype.getUserProvisionedListings=function(n,u){var x=u||{},A;return c.default.getBlockedAppsWithInfo().then(function(z){A=z;return m.default.fetchAllResources(f.default.restBaseUrl+"/community/users/"+n+"/provisionedListings",x,"provisionedListings")}).then(function(z){l.default.licensesConfig&&
z.forEach(function(E){var w=l.default.licensesConfig.apps.filter(function(D){return D.title===E.title})[0];w&&w.label&&(E.title=w.label);E.blocked=c.default.isBlocked(A,E)});return z})};t.prototype.getUserEntitlements=function(n,u){return k.default.request({url:f.default.restBaseUrl+"/content/listings/"+n+"/userEntitlements/"+u})};t.prototype.getLicenseTypes=function(n){var u=this,x=new a.default,A;c.default.getBlockedAppsWithInfo().then(function(z){A=z;return m.default.fetchAllResources(f.default.restBaseUrl+
"portals/self/userLicenseTypes",{num:10},"userLicenseTypes")}).then(function(z){(null===A||void 0===A?0:A.length)&&z.forEach(function(E){E.apps.forEach(function(w){w.isAppBundle?w.apps.forEach(function(D){D.blocked=A.some(function(r){var v;return r.itemid&&r.itemid===D.id||r.title===D.title||(null===(v=r.related)||void 0===v?void 0:v.some(function(B){return B.itemid&&B.itemid===D.id||B.title===D.title}))})}):w.blocked=A.some(function(D){var r;return D.itemid&&D.itemid===w.id||D.title===w.title||(null===
(r=D.related)||void 0===r?void 0:r.some(function(v){return v.itemid&&v.itemid===w.id||v.title===w.title}))})})});u.getUserCounts("userLicenseType").then(function(E){z.forEach(function(D){var r=E.results.filter(function(v){return v.key===D.id})[0];D.assigned=r?r.count:0;u.addFieldMapsMobileToUserType(D)});var w=z.filter(function(D){return n||0!==D.assigned||0!==D.maxUsers});m.default.sortListByStrProp(w,"name");x.resolve({userLicenseTypes:w})})});return x};t.prototype.getAppBundles=function(n){var u=
this,x=new a.default,A;c.default.getBlockedAppsWithInfo().then(function(z){A=z;return k.default.request({url:f.default.restBaseUrl+"portals/self/appBundles"})}).then(function(z){z.appBundles.forEach(function(E){"Field Apps"===E.name&&E.apps.push({id:"fieldmapsmobile",title:"ArcGIS Field Maps",type:"Mobile Application",entitlements:["fieldmapsmobile"]});E.apps.forEach(function(w){w.blocked=A.some(function(D){var r;return D.itemid&&D.itemid===w.id||D.title===w.title||(null===(r=D.related)||void 0===
r?void 0:r.some(function(v){return v.itemid&&v.itemid===w.id||v.title===w.title}))})})});u.getUserCounts("appBundle").then(function(E){z.appBundles.forEach(function(w){var D=E.results.filter(function(r){return r.key===w.appBundleItemId})[0];w.assigned=D?D.count:0});z.appBundles=z.appBundles.filter(function(w){return 0!==w.maxUsers||0!==w.assigned});m.default.sortListByStrProp(z.appBundles,"name");n?x.resolve(z):d.default.eachAlways(z.appBundles.map(function(w){return u.getUsersForAppBundle(w.appBundleItemId)})).then(function(w){w.forEach(function(D,
r){z.appBundles[r].usernames=D.value.results.map(function(v){return v.username})});d.default.eachAlways(z.appBundles.map(function(D){return u.getAppBundleListing(D.appBundleItemId)})).then(function(D){z.appBundles.forEach(function(r,v){r.allowedLevels=D[v].value.allowedUserLevels?D[v].value.allowedUserLevels.split(",").map(function(B){return B.trim()}):[]});x.resolve(z)})})})});return x};t.prototype.getAppBundleListing=function(n){return k.default.request({url:k.default.getSecureUrl(f.default.restBaseUrl)+
"content/listings/"+n})};t.prototype.getUsersForAppBundle=function(n){return k.default.request({url:f.default.restBaseUrl+"portals/self/users/search",content:{q:"appbundle: "+n}})};t.prototype.getLicensedEntitlements=function(){var n=this,u=new a.default,x;l.default.initLicensesConfig(f.default.portal).then(function(){return c.default.getBlockedAppsWithInfo()}).then(function(A){x=A;return n.retrieveProductListings()}).then(function(){n._retrieveUserEntitlements().then(function(){var A;n._hasNegativeLicenses();
var z=[];if(n._hasProListing()){var E={};n.appUserCounts.forEach(function(v){v.key!==n._proListing.listing.itemId||E[v.secondaryKey]||(E[v.secondaryKey]={num:0})});var w=!(n._proListing.provision.orgEntitlements&&n._proListing.provision.orgEntitlements.entitlements),D=[];var r=w?E:n._proListing.provision.orgEntitlements.entitlements;w||Object.keys(E).forEach(function(v){r[v]||(r[v]=E[v],D.push(v))});Object.keys(r).forEach(function(v){var B;w||(w=-1!==D.indexOf(v));var C=(null===(B=n.appUserCounts.filter(function(I){return I.key===
n._proListing.listing.itemId&&I.secondaryKey===v})[0])||void 0===B?void 0:B.count)||0;B=r[v].num;var F=B-C,G=n.proEntitlements.filter(function(I){return-1!==I.entitlements.indexOf(v)}),H=-1===["desktopBasicN","desktopStdN","desktopAdvN"].indexOf(v),J=n._isLicenseExpired(n._proListing.provision.endDate,w,B,C);C={title:t.getProEntitlementTitle(v),key:v,total:B,used:C,remaining:F,status:h.default.substitute(t.i18n.licensesUsed,{used:C,total:B}),isPro:!0,proEntitlements:n.proEntitlements,allowedLevels:["2"],
itemId:n._proListing.listing.itemId,usernames:G.map(function(I){return I.username}),extNotSupported:t.getExtNotSupported(v),expiration:n._proListing.provision.endDate,isExpired:J,isExtension:H,trial:n._proListing.provision.trial};z.push(C)})}null===(A=n._productListings)||void 0===A?void 0:A.forEach(function(v){var B=v.listing,C=B.itemId,F={},G=!(v.provision.orgEntitlements&&v.provision.orgEntitlements.entitlements),H=B.title,J=n.appUserCounts.filter(function(I){return I.key===C})[0];J&&(F[J.secondaryKey]=
{num:0});r=G?F:v.provision.orgEntitlements.entitlements;Object.keys(r).forEach(function(I){var K;if(l.default.licensesConfig){var R=l.default.licensesConfig.apps.filter(function(L){return L.entitlement===I})[0];R&&(H=R.label||R.title)}R=(null===J||void 0===J?void 0:J.count)||0;var W=r[I].num,P=W-R,S=n._isLicenseExpired(v.provision.endDate,G,W,R);R={title:H,key:I,total:W,used:R,remaining:P,status:h.default.substitute(t.i18n.licensesUsed,{used:R,total:W}),icon:B.icon,properties:B.properties,itemId:C,
type:B.type,allowedLevels:B.allowedUserLevels?B.allowedUserLevels.split(",").map(function(L){return L.trim()}):[],usernames:n.productEntitlements[C]?n.productEntitlements[C].map(function(L){return L.username}):[],expiration:v.provision.endDate,isExpired:S,trial:v.provision.trial,requiredListings:B.requiredListings,dependentListings:B.dependentListings,owner:B.owner,blocked:x.some(function(L){var aa;return L.itemid&&L.itemid===C||L.title===H||(null===(aa=L.related)||void 0===aa?void 0:aa.some(function(ba){return ba.itemid&&
ba.itemid===C||ba.title===H}))})};"ArcGIS for Power BI"===R.title&&(null===(K=l.default.licensesConfig)||void 0===K?0:K.hidePowerBI)||z.push(R)})});m.default.sortListByStrProp(z,"title");u.resolve(z)})});return u};t.prototype.getProListing=function(){return this._hasProListing()?this._proListing:void 0};t.prototype.getDisconnectSettingForListing=function(n){n=k.default.getSecureUrl(f.default.restBaseUrl)+"content/listings/"+n+"/disconnectSettings";return k.default.request({url:n})};t.prototype.updateDisconnectSettingForListing=
function(n,u,x){n=k.default.getSecureUrl(f.default.restBaseUrl)+"content/listings/"+n+"/setDisconnectSettings";var A=new a.default;u={canDisconnect:u};g.default.isDefined(x)&&(u.maxDisconnectTime=x);k.default.request({url:n,content:u},{usePost:!0}).then(function(z){z&&z.code&&z.messageCode?A.resolve({error:!0,messageCode:z.messageCode}):A.resolve(z)},function(z){var E={error:!0,messageCode:void 0};z&&z.messageCode&&(E.messageCode=z.messageCode);A.resolve(E)});return A};t.getExtNotSupported=function(n){return this._extNotSupported[n]};
t.getProEntitlementTitle=function(n){switch(n){case "desktopBasicN":return t.i18n.licenseTypes.agsProLabel+" "+t.i18n.licenseTypes.basicLabel;case "desktopStdN":return t.i18n.licenseTypes.agsProLabel+" "+t.i18n.licenseTypes.standardLabel;case "desktopAdvN":return t.i18n.licenseTypes.agsProLabel+" "+t.i18n.licenseTypes.advancedLabel;case "spatialAnalystN":return t.i18n.licenseTypes.spatialAnalyst;case "3DAnalystN":return t.i18n.licenseTypes.threeDAnalyst;case "networkAnalystN":return t.i18n.licenseTypes.networkAnalyst;
case "geostatAnalystN":return t.i18n.licenseTypes.geostatisticalAnalyst;case "dataReviewerN":return t.i18n.licenseTypes.dataReviewer;case "workflowMgrN":return t.i18n.licenseTypes.workflowManager;case "dataInteropN":return t.i18n.licenseTypes.dataInterop;case "defenseN":return t.i18n.licenseTypes.defenseMapping;case "FMVN":return t.i18n.licenseTypes.fullMotionVideo;case "businessBasicN":return t.i18n.licenseTypes.businessBasic;case "businessStdN":return t.i18n.licenseTypes.businessStd;case "roadsHighwaysN":return t.i18n.licenseTypes.roadsHighways;
case "publisherN":return t.i18n.licenseTypes.publisher;case "productionMapN":return t.i18n.licenseTypes.productionMapping;case "schematicsN":return t.i18n.licenseTypes.schematics;case "trackingN":return t.i18n.licenseTypes.tracking;case "aviationN":return t.i18n.licenseTypes.aviation;case "airportsN":return t.i18n.licenseTypes.airports;case "maritimeN":return t.i18n.licenseTypes.maritime;case "bathymetryN":return t.i18n.licenseTypes.bathymetry;case "smpNAmericaN":return t.i18n.licenseTypes.streetMapNA;
case "smpEuropeN":return t.i18n.licenseTypes.streetMapEU;case "smpAsiaPacificN":return t.i18n.licenseTypes.streetMapAPAC;case "smpMidEAfricaN":return t.i18n.licenseTypes.streetMapMEA;case "smpLAmericaN":return t.i18n.licenseTypes.streetMapLA;case "smpJapanN":return t.i18n.licenseTypes.streetMapJA;case "LocRefDesktopN":return t.i18n.licenseTypes.locationRef;case "imageAnalystN":return t.i18n.licenseTypes.imageAnalyst;case "locateXTN":return t.i18n.licenseTypes.locateXT;default:return""}};t.prototype._hasNegativeLicenses=
function(){var n=this,u={},x=!1,A=!1;this._proListing&&(this._proListing.provision.orgEntitlements&&this._proListing.provision.orgEntitlements.entitlements&&(u=this._convertOrgEntitlementsToPurchaseMap(this._proListing.provision.orgEntitlements.entitlements)),this._remainingProEntitlements=q.__assign({},u),this.proEntitlements.forEach(function(z){z.entitlements.forEach(function(E){n._remainingProEntitlements[E]||(n._remainingProEntitlements[E]=0);--n._remainingProEntitlements[E];0>n._remainingProEntitlements[E]&&
(x=!0)})}));this._productListings&&0<this._productListings.length&&(this._remainingProductEntitlements={},this._productListings.forEach(function(z){u={};var E=z.listing.itemId;z.provision.orgEntitlements&&z.provision.orgEntitlements.entitlements&&(u=n._convertOrgEntitlementsToPurchaseMap(z.provision.orgEntitlements.entitlements));n._remainingProductEntitlements[E]=q.__assign({},u);n.productEntitlements[E]&&n.productEntitlements[E].forEach(function(w){w.entitlements.forEach(function(D){n._remainingProductEntitlements[E]||
(n._remainingProductEntitlements[E]={});n._remainingProductEntitlements[E][D]||(n._remainingProductEntitlements[E][D]=0);--n._remainingProductEntitlements[E][D];0>n._remainingProductEntitlements[E][D]&&(A=!0)})})}));return x||A};t.prototype._convertOrgEntitlementsToPurchaseMap=function(n){var u={};if(n)for(var x in n)n[x]&&g.default.isDefined(n[x].num)?u[x]=n[x].num:u[x]=n[x];return u};t.prototype._hasProListing=function(){var n=this;return!!(this._proListing&&this._proListing.provision&&(this._proListing.provision.orgEntitlements&&
!m.default.isEmptyObject(this._proListing.provision.orgEntitlements)||this.appUserCounts.some(function(u){var x;return u.key===(null===(x=n._proListing.listing)||void 0===x?void 0:x.itemId)})))};t.prototype._isLicenseExpired=function(n,u,x,A){var z=g.default.isDefined(n),E=-1===n;n=n<Date.now();return z&&!E&&n||u||0===x&&0<A};t.prototype.retrieveProductListings=function(){var n=this,u=new a.default;k.default.findLicenseByUserProducts().then(function(x){x&&x.pro&&(n._proListing=q.__assign({},x.pro));
x&&x.products&&(n._productListings=q.__spreadArrays(x.products));u.resolve()},function(){n._proListing=void 0;n._productListings=void 0;u.resolve()});return u};t.prototype.retrieveUserEntitlementsForListing=function(n){n=h.default.substitute(this._userEntitlementsUrl,{itemId:n});return m.default.fetchAllResources(n,{},"userEntitlements")};t.prototype.getAppUserCounts=function(){var n=this;return m.default.fetchAllResources(f.default.restBaseUrl+"portals/self/users/counts?type\x3dapp").then(function(u){n.appUserCounts=
u})};t.prototype._retrieveUserEntitlements=function(){var n=new a.default;this.getAppUserCounts().then(function(){n.resolve()},function(){n.resolve()});return n};t.prototype.addFieldMapsMobileToUserType=function(n){n.apps.forEach(function(u){u.isAppBundle&&"Field Apps Bundle"===u.title&&u.apps.push({id:"fieldmapsmobile",title:"ArcGIS Field Maps",type:"Mobile Application",entitlements:["fieldmapsmobile"]})})};t.prototype._retrieveProUserEntitlements=function(){var n=h.default.substitute(this._userEntitlementsUrl,
{itemId:this._proListing.listing.itemId});return m.default.fetchAllResources(n,{},"userEntitlements")};t.prototype._retrieveProductUserEntitlements=function(){var n=this,u={};this._productListings.forEach(function(x){x=x.listing.itemId;var A=h.default.substitute(n._userEntitlementsUrl,{itemId:x});u[x]=m.default.fetchAllResources(A,{},"userEntitlements")});return u};t.i18n=q.__assign({},e.default.manageLicenses);t._extNotSupported={desktopBasicN:"defenseN roadsHighwaysN productionMapN aviationN airportsN maritimeN bathymetryN LocRefDesktopN".split(" "),
desktopStdN:["aviationN","maritimeN"],desktopAdvN:[]};return t}()})},"arcgisonline/pages/components/ManageBlockedApps/blocked-apps-service":function(){define("require exports tslib dojo/Deferred dojo/promise/all arcgisonline/sharing/util arcgisonline/esriGeowConfig".split(" "),function(b,y,q,a,h,e,g){Object.defineProperty(y,"__esModule",{value:!0});a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);var f,m=function(){return e.default.request({url:g.default.restBaseUrl+
"portals/self/signinSettings"}).then(function(d){return null===d||void 0===d?void 0:d.blockedApps})},l=function(){var d=new a.default;if(f)return d.resolve(f),d;e.default.request({url:g.default.restBaseUrl+"search",content:{num:10,start:0,sortField:"title",sortOrder:"asc",q:g.default.blockedAppsConfigItemQuery}}).then(function(c){var k;if(c=null===(k=c.results)||void 0===k?void 0:k[0])return e.default.request({url:g.default.restBaseUrl+"content/items/"+c.id+"/data"})},function(){d.resolve(f)}).then(function(c){f=
(null===c||void 0===c?void 0:c.blockedApps)||[];d.resolve(f)},function(){d.resolve(f)});return d};y.default={updateBlockedApps:function(d){d=q.__assign({blockedApps:d.length?JSON.stringify(d):""},!d.length&&{clearEmptyFields:!0});return e.default.request({url:g.default.restBaseUrl+"portals/self/setSigninSettings",content:d},{usePost:!0})},getBlockedApps:m,getBlockableApps:l,getBlockedAppsWithInfo:function(){var d=new a.default;h.default({blockable:l(),clientIds:m()}).then(function(c){var k=c.blockable,
t=c.clientIds;(null===k||void 0===k?0:k.length)&&t||d.resolve([]);d.resolve((k||[]).filter(function(n){return-1<(null===t||void 0===t?void 0:t.indexOf(n.clientid))}))},function(){d.resolve([])});return d},isBlocked:function(d,c){return d.some(function(k){var t;return k.itemid&&(k.itemid===c.id||k.itemid===c.itemId)||k.title===c.title||(null===(t=k.related)||void 0===t?void 0:t.some(function(n){return n.itemid&&(n.itemid===c.id||n.itemid===c.itemId)||n.title===c.title}))})},extractClientIds:function(d){var c=
[];d.forEach(function(k){var t,n;c.push(k.clientid);null===(n=null===(t=k.related)||void 0===t?void 0:t.forEach)||void 0===n?void 0:n.call(t,function(u){c.push(u.clientid)})});return c}}})},"arcgisonline/sharing/dijit/Role":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/arrays ./_LevelAwareMixin ../../tsutils/declareDecorator dojo/i18n!../../nls/arcgisonline dojo/json esri/lang".split(" "),function(b,y,q,a,h,e,g,f,m,l){a=q.__importDefault(a);h=q.__importDefault(h);
e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);return function(){function d(c){this.declaredClass="arcgisonline.sharing.dijit.Role";this.description=this.name=this.baseRole=this.id=null;this.privileges=[];this.privilegeObj={portal:{admin:{inviteUsers:!1,disableUsers:!1,viewUsers:!1,updateUsers:!1,deleteUsers:!1,changeUserRoles:!1,viewGroups:!1,updateGroups:!1,deleteGroups:!1,reassignGroups:!1,assignToGroups:!1,manageEnterpriseGroups:!1,
viewItems:!1,updateItems:!1,deleteItems:!1,reassignItems:!1,manageLicenses:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,createUpdateCapableGroup:!1,updateItemCategorySchema:!1,manageCollaborations:!1,manageSecurity:!1,manageWebsite:!1,manageRoles:!1,manageServers:!1,manageUtilityServices:!1,manageCredits:!1},publisher:{publishFeatures:!1,publishTiles:!1,publishScenes:!1,publishTiledImagery:!1,publishDynamicImagery:!1,publishServerServices:!1,publishServerGPServices:!1,registerDataStores:!1,bulkPublishFromDataStores:!1,
enumerateDataStores:!1},user:{createGroup:!1,joinGroup:!1,joinNonOrgGroup:!1,createItem:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,shareGroupToOrg:!1,shareGroupToPublic:!1,viewOrgUsers:!1,viewOrgItems:!1,viewOrgGroups:!1,viewTracks:!1}},features:{user:{edit:!1,fullEdit:!1,manageVersions:!1}},opendata:{user:{openDataAdmin:!1,designateGroup:!1}},premium:{user:{geocode:!1,networkanalysis:!1,spatialanalysis:!1,geoenrichment:!1,demographics:!1,featurereport:!1},publisher:{geoanalytics:!1,rasteranalysis:!1,
createNotebooks:!1,scheduleNotebooks:!1,publishNotebooks:!1,createAdvancedNotebooks:!1}},marketplace:{admin:{manage:!1,purchase:!1,startTrial:!1}}};this.VIEWER_ROLE_ID="iAAAAAAAAAAAAAAA";this.VIEWER_ROLE_PRIVILEGES="portal:user:joinGroup portal:user:viewOrgGroups portal:user:viewOrgItems portal:user:viewOrgUsers premium:user:demographics premium:user:elevation premium:user:featurereport premium:user:geocode premium:user:networkanalysis".split(" ");c=c||{};var k=c.portalUser;k?(this.id=k.roleId?k.roleId:
k.role,this.baseRole=k.role,this.setPrivileges(k.privileges)):(this.id=c.id,this.baseRole=c.role,this.name=c.name,this.description=c.description,c.privileges&&this.setPrivileges(c.privileges));c.viewOnly&&this.setViewOnly()}d.prototype.setViewOnly=function(){var c=this;this.baseRole="org_user";this.id=this.VIEWER_ROLE_ID;var k=this._buildPrivilegesArray().filter(function(t){return h.default.includes(c.VIEWER_ROLE_PRIVILEGES,t)});this.setPrivileges(k)};d.prototype.isViewer=function(){return l.default.isDefined(this.id)&&
this.id===this.SYSTEM_ROLES.VIEWER};d.prototype.isUser=function(){return l.default.isDefined(this.id)&&("org_user"===this.id||"account_user"===this.id)};d.prototype.isPublisher=function(){return l.default.isDefined(this.id)&&("org_publisher"===this.id||"account_publisher"===this.id)};d.prototype.isAdmin=function(){return l.default.isDefined(this.id)&&("org_admin"===this.id||"account_admin"===this.id)};d.prototype.isBasedOnUser=function(){return this.isUser()||l.default.isDefined(this.baseRole)&&("org_user"===
this.baseRole||"account_user"===this.baseRole)};d.prototype.isBasedOnPublisher=function(){return this.isPublisher()||l.default.isDefined(this.baseRole)&&("org_publisher"===this.baseRole||"account_publisher"===this.baseRole)};d.prototype.isBasedOnAdmin=function(){return this.isAdmin()||l.default.isDefined(this.baseRole)&&("org_admin"===this.baseRole||"account_admin"===this.baseRole)};d.prototype.isCustom=function(){return!this.isUser()&&!this.isPublisher()&&!this.isAdmin()&&l.default.isDefined(this.id)&&
0<this.id.length};d.prototype.canInviteUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.inviteUsers};d.prototype.canDisableUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.disableUsers};d.prototype.canViewUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.viewUsers};d.prototype.canUpdateUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateUsers};
d.prototype.canDeleteUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.deleteUsers};d.prototype.canChangeUserRoles=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.changeUserRoles};d.prototype.canViewOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.viewGroups};d.prototype.canUpdateOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateGroups};
d.prototype.canDeleteOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.deleteGroups};d.prototype.canReassignOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.reassignGroups};d.prototype.canAssignUsersToOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.assignToGroups};d.prototype.canManageEnterpriseGroups=function(){var c;return null===(c=this.privilegeObj)||
void 0===c?void 0:c.portal.admin.manageEnterpriseGroups};d.prototype.canViewOrgItems=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.viewItems};d.prototype.canUpdateOrgItems=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateItems};d.prototype.canDeleteOrgItems=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.deleteItems};d.prototype.canReassignOrgItems=function(){var c;return null===
(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.reassignItems};d.prototype.canManageItems=function(){return this.isAdmin()||this.canViewUsers()&&this.canViewOrgItems()&&(this.canUpdateOrgItems()||this.canDeleteOrgItems()||this.canReassignOrgItems())};d.prototype.canManageLicenses=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageLicenses};d.prototype.canShareOthersItemsToGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:
c.portal.admin.shareToGroup};d.prototype.canShareOthersItemsToOrg=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.shareToOrg};d.prototype.canShareOthersItemsToPublic=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.shareToPublic};d.prototype.canCreateUpdateCapableGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.createUpdateCapableGroup};d.prototype.canUpdateItemCategories=function(){var c;
return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateItemCategorySchema};d.prototype.canManageCollaborations=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageCollaborations};d.prototype.canManageSecurity=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageSecurity};d.prototype.canManageWebsite=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageWebsite};
d.prototype.canManageRoles=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageRoles};d.prototype.canManageServers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageServers};d.prototype.canManageUtilityServices=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageUtilityServices};d.prototype.canManageCredits=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:
c.portal.admin.manageCredits};d.prototype.canCreateGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.createGroup};d.prototype.canJoinOrgGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.joinGroup};d.prototype.canJoinNonOrgGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.joinNonOrgGroup};d.prototype.canPublishFeatures=function(){var c;return null===(c=this.privilegeObj)||void 0===
c?void 0:c.portal.publisher.publishFeatures};d.prototype.canPublishTiles=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishTiles};d.prototype.canPublishScenes=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishScenes};d.prototype.canPublishTiledImagery=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishTiledImagery};d.prototype.canPublishDynamicImagery=function(){var c;
return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishDynamicImagery};d.prototype.canPublishServerServices=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishServerServices};d.prototype.canPublishServerGPServices=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishServerGPServices};d.prototype.canPublishVectorTiles=function(){return!0};d.prototype.canPublishImageCollection=function(){var c=
a.default.self&&a.default.self.isPortal,k=this.canPublishDynamicImagery()||this.canPublishTiledImagery();return c?this.canPublishServerServices():this._allowImageryBetaFeatures()&&k};d.prototype.canCreateItem=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.createItem};d.prototype.canShareItemToGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareToGroup};d.prototype.canShareItemToOrg=function(){var c;return null===(c=
this.privilegeObj)||void 0===c?void 0:c.portal.user.shareToOrg};d.prototype.canShareItemToPublic=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareToPublic};d.prototype.canShareGroupToOrg=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareGroupToOrg};d.prototype.canShareGroupToPublic=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareGroupToPublic};d.prototype.canViewOrgUsers=function(){var c;
return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewOrgUsers};d.prototype.canViewOrgUserContent=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewOrgItems};d.prototype.canViewOrgUserGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewOrgGroups};d.prototype.canViewTracks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewTracks};d.prototype.canEditFeatures=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.features.user.edit};d.prototype.canEditFeaturesFullControl=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.features.user.fullEdit};d.prototype.canManageVersions=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.features.user.manageVersions};d.prototype.canManageOpenData=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.opendata.user.openDataAdmin};d.prototype.canDesignateOpenDataGroups=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.opendata.user.designateGroup};d.prototype.canUseGeocode=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.geocode};d.prototype.canUseNetworkAnalysis=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.networkanalysis};d.prototype.canUseSpatialAnalysis=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.spatialanalysis};
d.prototype.canUseGeoenrichment=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.geoenrichment};d.prototype.canUseDemographics=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.demographics};d.prototype.canUseFeatureReport=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.featurereport};d.prototype.canUseGeoanalytics=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:
c.premium.publisher.geoanalytics};d.prototype.canUseRasterAnalysis=function(){var c,k=a.default.self&&a.default.self.isPortal,t=null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.rasteranalysis;return k?this.canPublishServerServices():t&&this._allowImageryBetaFeatures()};d.prototype.canPurchaseMarketplace=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.marketplace.admin.purchase};d.prototype.canManageMarketplace=function(){var c;return null===(c=this.privilegeObj)||
void 0===c?void 0:c.marketplace.admin.manage};d.prototype.canTrialMarketplace=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.marketplace.admin.startTrial};d.prototype.canCreateNotebooks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.createNotebooks};d.prototype.canScheduleNotebooks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.scheduleNotebooks};d.prototype.canPublishNotebooks=function(){var c;
return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.publishNotebooks};d.prototype.canCreateAdvancedNotebooks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.createAdvancedNotebooks};d.prototype.canBulkPublishFromDataStores=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.bulkPublishFromDataStores};d.prototype.canEnumerateDataStores=function(){var c;return null===(c=this.privilegeObj)||void 0===
c?void 0:c.portal.publisher.enumerateDataStores};d.prototype.canRegisterDataStores=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.registerDataStores};d.prototype.setPrivileges=function(c){this.privileges=c;this._initPrivilegesObject();l.default.isDefined(c)&&this._readPrivileges(c)};d.prototype.stringify=function(){return m.default.stringify({id:this.id,name:this.name,description:this.description,privileges:this._buildPrivilegesArray()})};d.prototype.stringifyRole=
function(){return m.default.stringify({id:this.id,name:this.name,description:this.description})};d.prototype.stringifyPrivileges=function(){return m.default.stringify({privileges:this._buildPrivilegesArray()})};d.prototype.stringifyPretty=function(){return m.default.stringify({id:this.id,name:this.name,description:this.description,privileges:this._buildPrivilegesArray()},null,"  ")};d.prototype.summarize=function(){var c=[],k=a.default.self&&a.default.self.isPortal,t=a.default.self&&a.default.self.portalProperties&&
a.default.self.portalProperties.openData&&!0===a.default.self.portalProperties.openData.enabled,n=this.privilegeObj;n.portal.user.viewOrgUsers&&c.push(k?f.default.customRoles.users.canViewOrgUsersSumPortal:f.default.customRoles.users.canViewOrgUsersSum);n.portal.user.createGroup&&c.push(f.default.customRoles.groups.canCreateSum);n.portal.user.joinGroup&&c.push(k?f.default.customRoles.groups.canJoinIntSumPortal:f.default.customRoles.groups.canJoinIntSum);n.portal.user.joinNonOrgGroup&&c.push(f.default.customRoles.groups.canJoinExt);
n.portal.user.viewOrgGroups&&c.push(k?f.default.customRoles.groups.canViewOrgGroupsPortal:f.default.customRoles.groups.canViewOrgGroups);n.portal.user.createItem&&c.push(f.default.customRoles.items.canCreateSum);n.portal.publisher.publishFeatures&&c.push(f.default.customRoles.items.canPublishFeatures);n.portal.publisher.publishTiles&&c.push(f.default.customRoles.items.canPublishTiles);n.portal.publisher.publishScenes&&c.push(f.default.customRoles.items.canPublishScenes);n.portal.publisher.publishTiledImagery&&
c.push(f.default.customRoles.items.canPublishTiledImagery);n.portal.publisher.publishDynamicImagery&&c.push(f.default.customRoles.items.canPublishDynamicImagery);k&&n.portal.publisher.publishServerServices&&c.push(f.default.customRoles.items.canPublishServerServices);k&&n.portal.publisher.registerDataStores&&c.push(f.default.customRoles.items.canRegisterDataStore);n.portal.user.viewOrgItems&&c.push(k?f.default.customRoles.items.canViewOrgItemsPortal:f.default.customRoles.items.canViewOrgItems);n.portal.user.viewTracks&&
c.push(f.default.customRoles.items.canViewTracks);n.portal.user.shareToGroup&&c.push(f.default.customRoles.itemSharing.canShareGroupsSum);n.portal.user.shareToOrg&&c.push(k?f.default.customRoles.itemSharing.canShareOrgSumPortal:f.default.customRoles.itemSharing.canShareOrgSum);n.portal.user.shareToPublic&&c.push(f.default.customRoles.itemSharing.canSharePublicSum);n.portal.user.shareGroupToOrg&&c.push(k?f.default.customRoles.groupSharing.canShareOrgPortal:f.default.customRoles.groupSharing.canShareOrg);
n.portal.user.shareGroupToPublic&&c.push(f.default.customRoles.groupSharing.canSharePublic);t&&n.opendata.user.openDataAdmin&&c.push(f.default.customRoles.openData.canAdmin);n.premium.user.geocode&&c.push(f.default.customRoles.geoservices.canUseGeocoding);n.premium.user.networkanalysis&&c.push(f.default.customRoles.geoservices.canUseNA);n.premium.user.spatialanalysis&&c.push(f.default.customRoles.geoservices.canUseSA);n.premium.user.geoenrichment&&c.push(f.default.customRoles.geoservices.canUseGeoenrichment);
n.premium.user.demographics&&c.push(f.default.customRoles.geoservices.canUseDemographics);n.premium.user.featurereport&&c.push(f.default.customRoles.geoservices.canUseFeatureReport);k&&(n.premium.publisher.geoanalytics&&c.push(f.default.customRoles.geoservices.canUseGeoanalytics),n.premium.publisher.rasteranalysis&&c.push(f.default.customRoles.geoservices.canUseRasterAnalysis));n.features.user.edit&&c.push(f.default.customRoles.features.canEditSum);n.features.user.fullEdit&&c.push(f.default.customRoles.features.canManageSum);
n.features.user.manageVersions&&c.push(f.default.customRoles.versioning.canManage);t&&n.opendata.user.designateGroup&&c.push(f.default.customRoles.openData.canDesignate);n.portal.admin.viewUsers&&c.push(k?f.default.customRoles.userAdmin.canViewSumPortal:f.default.customRoles.userAdmin.canViewSum);n.portal.admin.updateUsers&&c.push(k?f.default.customRoles.userAdmin.canUpdateSumPortal:f.default.customRoles.userAdmin.canUpdateSum);n.portal.admin.deleteUsers&&c.push(k?f.default.customRoles.userAdmin.canDeleteSumPortal:
f.default.customRoles.userAdmin.canDeleteSum);n.portal.admin.inviteUsers&&c.push(k?f.default.customRoles.userAdmin.canAddSum:f.default.customRoles.userAdmin.canInviteSum);n.portal.admin.disableUsers&&c.push(k?f.default.customRoles.userAdmin.canDisableSumPortal:f.default.customRoles.userAdmin.canDisableSum);n.portal.admin.changeUserRoles&&c.push(k?f.default.customRoles.userAdmin.canChangeRolesSumPortal:f.default.customRoles.userAdmin.canChangeRolesSum);n.portal.admin.manageLicenses&&c.push(k?f.default.customRoles.userAdmin.canManageLicensesSumPortal:
f.default.customRoles.userAdmin.canManageLicensesSum);n.portal.admin.viewGroups&&c.push(k?f.default.customRoles.groupAdmin.canViewSumPortal:f.default.customRoles.groupAdmin.canViewSum);n.portal.admin.updateGroups&&c.push(k?f.default.customRoles.groupAdmin.canUpdateSumPortal:f.default.customRoles.groupAdmin.canUpdateSum);n.portal.admin.deleteGroups&&c.push(k?f.default.customRoles.groupAdmin.canDeleteSumPortal:f.default.customRoles.groupAdmin.canDeleteSum);n.portal.admin.reassignGroups&&c.push(k?f.default.customRoles.groupAdmin.canReassignSumPortal:
f.default.customRoles.groupAdmin.canReassignSum);n.portal.admin.assignToGroups&&c.push(k?f.default.customRoles.groupAdmin.canAssignSumPortal:f.default.customRoles.groupAdmin.canAssignSum);n.portal.admin.manageEnterpriseGroups&&c.push(f.default.customRoles.groupAdmin.canLink);n.portal.admin.createUpdateCapableGroup&&c.push(f.default.customRoles.groupAdmin.canCreateUpdateCapable);n.portal.admin.viewItems&&c.push(k?f.default.customRoles.itemAdmin.canViewSumPortal:f.default.customRoles.itemAdmin.canViewSum);
n.portal.admin.updateItems&&c.push(k?f.default.customRoles.itemAdmin.canUpdateSumPortal:f.default.customRoles.itemAdmin.canUpdateSum);n.portal.admin.deleteItems&&c.push(k?f.default.customRoles.itemAdmin.canDeleteSumPortal:f.default.customRoles.itemAdmin.canDeleteSum);n.portal.admin.reassignItems&&c.push(k?f.default.customRoles.itemAdmin.canReassignSumPortal:f.default.customRoles.itemAdmin.canReassignSum);n.portal.admin.updateItemCategorySchema&&c.push(f.default.customRoles.itemAdmin.canManageItemCategories);
n.portal.admin.manageCollaborations&&c.push(k?f.default.customRoles.settingsAdmin.canManageCollabPortalSum:f.default.customRoles.settingsAdmin.canManageCollabSum);n.portal.admin.manageSecurity&&c.push(k?f.default.customRoles.settingsAdmin.canManageSecurityPortalSum:f.default.customRoles.settingsAdmin.canManageSecuritySum);n.portal.admin.manageWebsite&&c.push(k?f.default.customRoles.settingsAdmin.canManageWebsitePortalSum:f.default.customRoles.settingsAdmin.canManageWebsiteSum);n.portal.admin.manageRoles&&
c.push(k?f.default.customRoles.settingsAdmin.canManageRolesPortalSum:f.default.customRoles.settingsAdmin.canManageRolesSum);n.portal.admin.manageServers&&c.push(f.default.customRoles.settingsAdmin.canManageServersSum);n.portal.admin.manageUtilityServices&&c.push(k?f.default.customRoles.settingsAdmin.canManageUtilityServicesPortalSum:f.default.customRoles.settingsAdmin.canManageUtilityServicesSum);n.portal.admin.manageCredits&&c.push(f.default.customRoles.settingsAdmin.canManageCreditsSum);k&&n.portal.publisher.publishServerGPServices&&
c.push(f.default.customRoles.items.canPublishServerGPServices);n.portal.admin.shareToGroup&&c.push(k?f.default.customRoles.itemAdmin.canShareToGroupSumPortal:f.default.customRoles.itemAdmin.canShareToGroupSum);n.portal.admin.shareToOrg&&c.push(k?f.default.customRoles.itemAdmin.canShareToOrgSumPortal:f.default.customRoles.itemAdmin.canShareToOrgSum);n.portal.admin.shareToPublic&&c.push(k?f.default.customRoles.itemAdmin.canShareToPublicSumPortal:f.default.customRoles.itemAdmin.canShareToPublicSum);
k||(n.marketplace.admin.manage&&c.push(f.default.customRoles.marketplace.canAdminSum),n.marketplace.admin.purchase&&c.push(f.default.customRoles.marketplace.canPurchaseSum),n.marketplace.admin.startTrial&&c.push(f.default.customRoles.marketplace.canTrialSum));n.premium.publisher.createAdvancedNotebooks&&c.push(f.default.customRoles.geoservices.canUseAdvancedNotebooks);n.premium.publisher.createNotebooks&&c.push(f.default.customRoles.items.canCreateNotebooks);n.premium.publisher.publishNotebooks&&
c.push(f.default.customRoles.items.canPublishNotebooks);n.premium.publisher.scheduleNotebooks&&c.push(f.default.customRoles.itemAdmin.canScheduleNotebooks);return c};d.prototype._initPrivilegesObject=function(){this._applyToAll(!1)};d.prototype._readPrivileges=function(c){var k=this;l.default.isDefined(c)&&c instanceof Array&&c.forEach(function(t){k._readPrivilege(t)})};d.prototype._readPrivilege=function(c){this._applyEffectToAction(!0,c)};d.prototype._allowImageryBetaFeatures=function(){var c;return h.default.includes(null===
(c=a.default.self)||void 0===c?void 0:c.allowedBetaFeatures,"imagery")};d.prototype._applyEffectToAction=function(c,k){switch(k){case "portal:admin:inviteUsers":this.privilegeObj.portal.admin.inviteUsers=c;break;case "portal:admin:disableUsers":this.privilegeObj.portal.admin.disableUsers=c;break;case "portal:admin:viewUsers":this.privilegeObj.portal.admin.viewUsers=c;break;case "portal:admin:updateUsers":this.privilegeObj.portal.admin.updateUsers=c;break;case "portal:admin:deleteUsers":this.privilegeObj.portal.admin.deleteUsers=
c;break;case "portal:admin:changeUserRoles":this.privilegeObj.portal.admin.changeUserRoles=c;break;case "portal:admin:viewGroups":this.privilegeObj.portal.admin.viewGroups=c;break;case "portal:admin:updateGroups":this.privilegeObj.portal.admin.updateGroups=c;break;case "portal:admin:deleteGroups":this.privilegeObj.portal.admin.deleteGroups=c;break;case "portal:admin:reassignGroups":this.privilegeObj.portal.admin.reassignGroups=c;break;case "portal:admin:assignToGroups":this.privilegeObj.portal.admin.assignToGroups=
c;break;case "portal:admin:manageEnterpriseGroups":this.privilegeObj.portal.admin.manageEnterpriseGroups=c;break;case "portal:admin:viewItems":this.privilegeObj.portal.admin.viewItems=c;break;case "portal:admin:updateItems":this.privilegeObj.portal.admin.updateItems=c;break;case "portal:admin:deleteItems":this.privilegeObj.portal.admin.deleteItems=c;break;case "portal:admin:reassignItems":this.privilegeObj.portal.admin.reassignItems=c;break;case "portal:admin:manageLicenses":this.privilegeObj.portal.admin.manageLicenses=
c;break;case "portal:admin:shareToGroup":this.privilegeObj.portal.admin.shareToGroup=c;break;case "portal:admin:shareToOrg":this.privilegeObj.portal.admin.shareToOrg=c;break;case "portal:admin:shareToPublic":this.privilegeObj.portal.admin.shareToPublic=c;break;case "portal:admin:createUpdateCapableGroup":this.privilegeObj.portal.admin.createUpdateCapableGroup=c;break;case "portal:admin:updateItemCategorySchema":this.privilegeObj.portal.admin.updateItemCategorySchema=c;break;case "portal:admin:manageCollaborations":this.privilegeObj.portal.admin.manageCollaborations=
c;break;case "portal:admin:manageSecurity":this.privilegeObj.portal.admin.manageSecurity=c;break;case "portal:admin:manageWebsite":this.privilegeObj.portal.admin.manageWebsite=c;break;case "portal:admin:manageRoles":this.privilegeObj.portal.admin.manageRoles=c;break;case "portal:admin:manageServers":this.privilegeObj.portal.admin.manageServers=c;break;case "portal:admin:manageUtilityServices":this.privilegeObj.portal.admin.manageUtilityServices=c;break;case "portal:admin:manageCredits":this.privilegeObj.portal.admin.manageCredits=
c;break;case "portal:publisher:publishFeatures":this.privilegeObj.portal.publisher.publishFeatures=c;break;case "portal:publisher:publishTiles":this.privilegeObj.portal.publisher.publishTiles=c;break;case "portal:publisher:publishScenes":this.privilegeObj.portal.publisher.publishScenes=c;break;case "portal:publisher:publishTiledImagery":this.privilegeObj.portal.publisher.publishTiledImagery=c;break;case "portal:publisher:publishDynamicImagery":this.privilegeObj.portal.publisher.publishDynamicImagery=
c;break;case "portal:publisher:publishServerServices":this.privilegeObj.portal.publisher.publishServerServices=c;break;case "portal:publisher:publishServerGPServices":this.privilegeObj.portal.publisher.publishServerGPServices=c;break;case "portal:publisher:bulkPublishFromDataStores":this.privilegeObj.portal.publisher.bulkPublishFromDataStores=c;break;case "portal:publisher:enumerateDataStores":this.privilegeObj.portal.publisher.enumerateDataStores=c;break;case "portal:publisher:registerDataStores":this.privilegeObj.portal.publisher.registerDataStores=
c;break;case "portal:user:createGroup":this.privilegeObj.portal.user.createGroup=c;break;case "portal:user:joinGroup":this.privilegeObj.portal.user.joinGroup=c;break;case "portal:user:joinNonOrgGroup":this.privilegeObj.portal.user.joinNonOrgGroup=c;break;case "portal:user:createItem":this.privilegeObj.portal.user.createItem=c;break;case "portal:user:shareToGroup":this.privilegeObj.portal.user.shareToGroup=c;break;case "portal:user:shareToOrg":this.privilegeObj.portal.user.shareToOrg=c;break;case "portal:user:shareToPublic":this.privilegeObj.portal.user.shareToPublic=
c;break;case "portal:user:shareGroupToOrg":this.privilegeObj.portal.user.shareGroupToOrg=c;break;case "portal:user:shareGroupToPublic":this.privilegeObj.portal.user.shareGroupToPublic=c;break;case "portal:user:viewOrgUsers":this.privilegeObj.portal.user.viewOrgUsers=c;break;case "portal:user:viewOrgItems":this.privilegeObj.portal.user.viewOrgItems=c;break;case "portal:user:viewOrgGroups":this.privilegeObj.portal.user.viewOrgGroups=c;break;case "portal:user:viewTracks":this.privilegeObj.portal.user.viewTracks=
c;break;case "features:user:edit":this.privilegeObj.features.user.edit=c;break;case "features:user:fullEdit":this.privilegeObj.features.user.fullEdit=c;break;case "features:user:manageVersions":this.privilegeObj.features.user.manageVersions;break;case "opendata:user:openDataAdmin":this.privilegeObj.opendata.user.openDataAdmin=c;break;case "opendata:user:designateGroup":this.privilegeObj.opendata.user.designateGroup=c;break;case "premium:user:geocode":this.privilegeObj.premium.user.geocode=c;break;
case "premium:user:networkanalysis":this.privilegeObj.premium.user.networkanalysis=c;break;case "premium:user:spatialanalysis":this.privilegeObj.premium.user.spatialanalysis=c;break;case "premium:user:geoenrichment":this.privilegeObj.premium.user.geoenrichment=c;break;case "premium:user:demographics":this.privilegeObj.premium.user.demographics=c;break;case "premium:user:featurereport":this.privilegeObj.premium.user.featurereport=c;break;case "premium:publisher:geoanalytics":this.privilegeObj.premium.publisher.geoanalytics=
c;break;case "premium:publisher:rasteranalysis":this.privilegeObj.premium.publisher.rasteranalysis=c;break;case "marketplace:admin:purchase":this.privilegeObj.marketplace.admin.purchase=c;break;case "marketplace:admin:manage":this.privilegeObj.marketplace.admin.manage=c;break;case "marketplace:admin:startTrial":this.privilegeObj.marketplace.admin.startTrial=c;break;case "premium:publisher:createNotebooks":this.privilegeObj.premium.publisher.createNotebooks=c;break;case "premium:publisher:scheduleNotebooks":this.privilegeObj.premium.publisher.scheduleNotebooks=
c;break;case "premium:publisher:publishNotebooks":this.privilegeObj.premium.publisher.publishNotebooks=c;break;case "premium:publisher:createAdvancedNotebooks":this.privilegeObj.premium.publisher.createAdvancedNotebooks=c}};d.prototype._applyToAll=function(c){this.privilegeObj.portal.admin.inviteUsers=c;this.privilegeObj.portal.admin.disableUsers=c;this.privilegeObj.portal.admin.viewUsers=c;this.privilegeObj.portal.admin.updateUsers=c;this.privilegeObj.portal.admin.deleteUsers=c;this.privilegeObj.portal.admin.changeUserRoles=
c;this.privilegeObj.portal.admin.viewGroups=c;this.privilegeObj.portal.admin.updateGroups=c;this.privilegeObj.portal.admin.deleteGroups=c;this.privilegeObj.portal.admin.reassignGroups=c;this.privilegeObj.portal.admin.assignToGroups=c;this.privilegeObj.portal.admin.manageEnterpriseGroups=c;this.privilegeObj.portal.admin.viewItems=c;this.privilegeObj.portal.admin.updateItems=c;this.privilegeObj.portal.admin.deleteItems=c;this.privilegeObj.portal.admin.reassignItems=c;this.privilegeObj.portal.admin.manageLicenses=
c;this.privilegeObj.portal.admin.shareToGroup=c;this.privilegeObj.portal.admin.shareToOrg=c;this.privilegeObj.portal.admin.shareToPublic=c;this.privilegeObj.portal.admin.createUpdateCapableGroup=c;this.privilegeObj.portal.admin.updateItemCategorySchema=c;this.privilegeObj.portal.admin.manageCollaborations=c;this.privilegeObj.portal.admin.manageSecurity=c;this.privilegeObj.portal.admin.manageWebsite=c;this.privilegeObj.portal.admin.manageRoles=c;this.privilegeObj.portal.admin.manageServers=c;this.privilegeObj.portal.admin.manageUtilityServices=
c;this.privilegeObj.portal.admin.manageCredits=c;this.privilegeObj.portal.publisher.publishFeatures=c;this.privilegeObj.portal.publisher.publishTiles=c;this.privilegeObj.portal.publisher.publishScenes=c;this.privilegeObj.portal.publisher.publishServerServices=c;this.privilegeObj.portal.publisher.publishServerGPServices=c;this.privilegeObj.portal.user.createGroup=c;this.privilegeObj.portal.user.joinGroup=c;this.privilegeObj.portal.user.joinNonOrgGroup=c;this.privilegeObj.portal.user.createItem=c;this.privilegeObj.portal.user.shareToGroup=
c;this.privilegeObj.portal.user.shareToOrg=c;this.privilegeObj.portal.user.shareToPublic=c;this.privilegeObj.portal.user.shareGroupToOrg=c;this.privilegeObj.portal.user.shareGroupToPublic=c;this.privilegeObj.portal.user.viewOrgUsers=c;this.privilegeObj.portal.user.viewOrgItems=c;this.privilegeObj.portal.user.viewOrgGroups=c;this.privilegeObj.portal.user.viewTracks=c;this.privilegeObj.features.user.edit=c;this.privilegeObj.opendata.user.openDataAdmin=c;this.privilegeObj.opendata.user.designateGroup=
c;this.privilegeObj.premium.user.geocode=c;this.privilegeObj.premium.user.networkanalysis=c;this.privilegeObj.premium.user.spatialanalysis=c;this.privilegeObj.premium.user.geoenrichment=c;this.privilegeObj.premium.user.demographics=c;this.privilegeObj.premium.user.featurereport=c;this.privilegeObj.premium.publisher.geoanalytics=c;this.privilegeObj.premium.publisher.rasteranalysis=c;this.privilegeObj.marketplace.admin.purchase=c;this.privilegeObj.marketplace.admin.manage=c;this.privilegeObj.marketplace.admin.startTrial=
c;this.privilegeObj.premium.publisher.createNotebooks=c;this.privilegeObj.premium.publisher.scheduleNotebooks=c;this.privilegeObj.premium.publisher.publishNotebooks=c;this.privilegeObj.premium.publisher.createAdvancedNotebooks=c};d.prototype._buildPrivilegesArray=function(){var c=[];!0===this.privilegeObj.portal.admin.inviteUsers&&c.push("portal:admin:inviteUsers");!0===this.privilegeObj.portal.admin.disableUsers&&c.push("portal:admin:disableUsers");!0===this.privilegeObj.portal.admin.viewUsers&&
c.push("portal:admin:viewUsers");!0===this.privilegeObj.portal.admin.updateUsers&&c.push("portal:admin:updateUsers");!0===this.privilegeObj.portal.admin.deleteUsers&&c.push("portal:admin:deleteUsers");!0===this.privilegeObj.portal.admin.changeUserRoles&&c.push("portal:admin:changeUserRoles");!0===this.privilegeObj.portal.admin.viewGroups&&c.push("portal:admin:viewGroups");!0===this.privilegeObj.portal.admin.updateGroups&&c.push("portal:admin:updateGroups");!0===this.privilegeObj.portal.admin.deleteGroups&&
c.push("portal:admin:deleteGroups");!0===this.privilegeObj.portal.admin.reassignGroups&&c.push("portal:admin:reassignGroups");!0===this.privilegeObj.portal.admin.assignToGroups&&c.push("portal:admin:assignToGroups");!0===this.privilegeObj.portal.admin.manageEnterpriseGroups&&c.push("portal:admin:manageEnterpriseGroups");!0===this.privilegeObj.portal.admin.viewItems&&c.push("portal:admin:viewItems");!0===this.privilegeObj.portal.admin.updateItems&&c.push("portal:admin:updateItems");!0===this.privilegeObj.portal.admin.deleteItems&&
c.push("portal:admin:deleteItems");!0===this.privilegeObj.portal.admin.reassignItems&&c.push("portal:admin:reassignItems");!0===this.privilegeObj.portal.admin.manageLicenses&&c.push("portal:admin:manageLicenses");!0===this.privilegeObj.portal.admin.shareToGroup&&c.push("portal:admin:shareToGroup");!0===this.privilegeObj.portal.admin.shareToOrg&&c.push("portal:admin:shareToOrg");!0===this.privilegeObj.portal.admin.shareToPublic&&c.push("portal:admin:shareToPublic");!0===this.privilegeObj.portal.admin.createUpdateCapableGroup&&
c.push("portal:admin:createUpdateCapableGroup");!0===this.privilegeObj.portal.admin.updateItemCategorySchema&&c.push("portal:admin:updateItemCategorySchema");!0===this.privilegeObj.portal.admin.manageCollaborations&&c.push("portal:admin:manageCollaborations");!0===this.privilegeObj.portal.admin.manageSecurity&&c.push("portal:admin:manageSecurity");!0===this.privilegeObj.portal.admin.manageWebsite&&c.push("portal:admin:manageWebsite");!0===this.privilegeObj.portal.admin.manageRoles&&c.push("portal:admin:manageRoles");
!0===this.privilegeObj.portal.admin.manageServers&&c.push("portal:admin:manageServers");!0===this.privilegeObj.portal.admin.manageUtilityServices&&c.push("portal:admin:manageUtilityServices");!0===this.privilegeObj.portal.admin.manageCredits&&c.push("portal:admin:manageCredits");!0===this.privilegeObj.portal.publisher.publishFeatures&&c.push("portal:publisher:publishFeatures");!0===this.privilegeObj.portal.publisher.publishTiles&&c.push("portal:publisher:publishTiles");!0===this.privilegeObj.portal.publisher.publishScenes&&
c.push("portal:publisher:publishScenes");!0===this.privilegeObj.portal.publisher.publishTiledImagery&&c.push("portal:publisher:publishTiledImagery");!0===this.privilegeObj.portal.publisher.publishDynamicImagery&&c.push("portal:publisher:publishDynamicImagery");!0===this.privilegeObj.portal.publisher.publishServerServices&&c.push("portal:publisher:publishServerServices");!0===this.privilegeObj.portal.publisher.publishServerGPServices&&c.push("portal:publisher:publishServerGPServices");!0===this.privilegeObj.portal.publisher.bulkPublishFromDataStores&&
c.push("portal:publisher:bulkPublishFromDataStores");!0===this.privilegeObj.portal.publisher.enumerateDataStores&&c.push("portal:publisher:enumerateDataStores");!0===this.privilegeObj.portal.publisher.registerDataStores&&c.push("portal:publisher:registerDataStores");!0===this.privilegeObj.portal.user.createGroup&&c.push("portal:user:createGroup");!0===this.privilegeObj.portal.user.joinGroup&&c.push("portal:user:joinGroup");!0===this.privilegeObj.portal.user.joinNonOrgGroup&&c.push("portal:user:joinNonOrgGroup");
!0===this.privilegeObj.portal.user.createItem&&c.push("portal:user:createItem");!0===this.privilegeObj.portal.user.shareToGroup&&c.push("portal:user:shareToGroup");!0===this.privilegeObj.portal.user.shareToOrg&&c.push("portal:user:shareToOrg");!0===this.privilegeObj.portal.user.shareToPublic&&c.push("portal:user:shareToPublic");!0===this.privilegeObj.portal.user.shareGroupToOrg&&c.push("portal:user:shareGroupToOrg");!0===this.privilegeObj.portal.user.shareGroupToPublic&&c.push("portal:user:shareGroupToPublic");
!0===this.privilegeObj.portal.user.viewOrgUsers&&c.push("portal:user:viewOrgUsers");!0===this.privilegeObj.portal.user.viewOrgItems&&c.push("portal:user:viewOrgItems");!0===this.privilegeObj.portal.user.viewOrgGroups&&c.push("portal:user:viewOrgGroups");!0===this.privilegeObj.portal.user.viewTracks&&c.push("portal:user:viewTracks");!0===this.privilegeObj.features.user.edit&&c.push("features:user:edit");!0===this.privilegeObj.features.user.fullEdit&&c.push("features:user:fullEdit");!0===this.privilegeObj.features.user.manageVersions&&
c.push("features:user:manageVersions");!0===this.privilegeObj.opendata.user.openDataAdmin&&c.push("opendata:user:openDataAdmin");!0===this.privilegeObj.opendata.user.designateGroup&&c.push("opendata:user:designateGroup");!0===this.privilegeObj.premium.user.geocode&&c.push("premium:user:geocode");!0===this.privilegeObj.premium.user.networkanalysis&&c.push("premium:user:networkanalysis");!0===this.privilegeObj.premium.user.spatialanalysis&&c.push("premium:user:spatialanalysis");!0===this.privilegeObj.premium.user.geoenrichment&&
c.push("premium:user:geoenrichment");!0===this.privilegeObj.premium.user.demographics&&c.push("premium:user:demographics");!0===this.privilegeObj.premium.user.featurereport&&c.push("premium:user:featurereport");!0===this.privilegeObj.premium.publisher.geoanalytics&&c.push("premium:publisher:geoanalytics");!0===this.privilegeObj.premium.publisher.rasteranalysis&&c.push("premium:publisher:rasteranalysis");!0===this.privilegeObj.marketplace.admin.purchase&&c.push("marketplace:admin:purchase");!0===this.privilegeObj.marketplace.admin.manage&&
c.push("marketplace:admin:manage");!0===this.privilegeObj.marketplace.admin.startTrial&&c.push("marketplace:admin:startTrial");!0===this.privilegeObj.premium.publisher.createNotebooks&&c.push("premium:publisher:createNotebooks");!0===this.privilegeObj.premium.publisher.scheduleNotebooks&&c.push("premium:publisher:scheduleNotebooks");!0===this.privilegeObj.premium.publisher.publishNotebooks&&c.push("premium:publisher:publishNotebooks");!0===this.privilegeObj.premium.publisher.createAdvancedNotebooks&&
c.push("premium:publisher:createAdvancedNotebooks");return c};return d=q.__decorate([g.default(e.default)],d)}()})},"arcgisonline/sharing/dijit/_LevelAwareMixin":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.LevelAwareInfo=void 0;y.LevelAwareInfo={SYSTEM_ROLES:{VIEWER:"iAAAAAAAAAAAAAAA",DATA_EDITOR:"iBBBBBBBBBBBBBBB"},LICENSE_LEVELS:{ONE:"1",ONE_PLUS_EDIT:"11",TWO:"2"}};b=function(){return function(){this.SYSTEM_ROLES=y.LevelAwareInfo.SYSTEM_ROLES;
this.LICENSE_LEVELS=y.LevelAwareInfo.LICENSE_LEVELS}}();y.default=b})},"arcgisonline/pages/utils/accessNotice":function(){define("require exports tslib arcgisonline/esriGeowConfig arcgisonline/sharing/util dojo/cookie".split(" "),function(b,y,q,a,h,e){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);return function(){function g(){}g.checkSettings=function(){return h.default.request({url:a.default.restBaseUrl+"portals/self/settings",content:{f:"json"}}).then(function(f){var m;if(null===
(m=f.anonymousAccessNotice)||void 0===m?0:m.enabled){if(e.default("ago_conditions_accepted"))return{redirected:!1,response:f};window.location.href=a.default.baseUrl+"pages/Account/accept_conditions.html#client_id\x3darcgisonline\x26redirect_uri\x3d"+window.location.href;return{redirected:!0}}return{redirected:!1,response:f}},function(){return{redirected:!1}})};return g}()})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),
function(b){return b._base})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(b,y,q,a){var h=y("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(e){if(this._hash[e.id])throw Error("Tried to register widget with id\x3d\x3d"+e.id+" but that id is already registered");this._hash[e.id]=e;this.length++},remove:function(e){this._hash[e]&&(delete this._hash[e],this.length--)},forEach:function(e,
g){g=g||q.global;var f=0,m;for(m in this._hash)e.call(g,this._hash[m],f++,this._hash);return this},filter:function(e,g){g=g||q.global;var f=new h,m=0,l;for(l in this._hash){var d=this._hash[l];e.call(g,d,m++,this._hash)&&f.add(d)}return f},byId:function(e){return this._hash[e]},byClass:function(e){var g=new h,f;for(f in this._hash){var m=this._hash[f];m.declaredClass==e&&g.add(m)}return g},toArray:function(){var e=[],g;for(g in this._hash)e.push(this._hash[g]);return e},map:function(e,g){return b.map(this.toArray(),
e,g)},every:function(e,g){g=g||q.global;var f=0,m;for(m in this._hash)if(!e.call(g,this._hash[m],f++,this._hash))return!1;return!0},some:function(e,g){g=g||q.global;var f=0,m;for(m in this._hash)if(e.call(g,this._hash[m],f++,this._hash))return!0;return!1}});b.forEach("forEach filter byClass map every some".split(" "),function(e){a[e]=h.prototype[e]});return h})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),
function(b,y,q,a,h,e,g,f){e.focus=function(m){if(m){var l="node"in m?m.node:m,d=m.bookmark;m=m.openedForWindow;var c=d?d.isCollapsed:!1;if(l){var k="iframe"==l.tagName.toLowerCase()?l.contentWindow:l;if(k&&k.focus)try{k.focus()}catch(t){}e._onFocusNode(l)}if(d&&h.withGlobal(m||h.global,f.isCollapsed)&&!c){m&&m.focus();try{h.withGlobal(m||h.global,f.moveToBookmark,null,[d])}catch(t){}}}};e.watch("curNode",function(m,l,d){f._curFocus=d;f._prevFocus=l;d&&a.publish("focusNode",d)});e.watch("activeStack",
function(m,l,d){f._activeStack=d});e.on("widget-blur",function(m,l){a.publish("widgetBlur",m,l)});e.on("widget-focus",function(m,l){a.publish("widgetFocus",m,l)});q.mixin(f,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return f.getBookmark().isCollapsed},getBookmark:function(){return(h.global==window?g:new g.SelectionManager(h.global)).getBookmark()},moveToBookmark:function(m){return(h.global==window?g:new g.SelectionManager(h.global)).moveToBookmark(m)},getFocus:function(m,l){m=!e.curNode||
m&&y.isDescendant(e.curNode,m.domNode)?f._prevFocus:e.curNode;return{node:m,bookmark:m&&m==e.curNode&&h.withGlobal(l||h.global,f.getBookmark),openedForWindow:l}},_activeStack:[],registerIframe:function(m){return e.registerIframe(m)},unregisterIframe:function(m){m&&m.remove()},registerWin:function(m,l){return e.registerWin(m,l)},unregisterWin:function(m){m&&m.remove()}});return f})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(b,
y,q,a,h){var e={getViewport:function(){return q.getBox()}};e.placeOnScreen=a.at;e.placeOnScreenAroundElement=function(g,f,m,l){if(y.isArray(m))var d=m;else{d=[];for(var c in m)d.push({aroundCorner:c,corner:m[c]})}return a.around(g,f,d,!0,l)};e.placeOnScreenAroundNode=e.placeOnScreenAroundElement;e.placeOnScreenAroundRectangle=e.placeOnScreenAroundElement;e.getPopupAroundAlignment=function(g,f){var m={};b.forEach(g,function(l){var d=f;switch(l){case "after":m[f?"BR":"BL"]=f?"BL":"BR";break;case "before":m[f?
"BL":"BR"]=f?"BR":"BL";break;case "below-alt":d=!d;case "below":m[d?"BL":"BR"]=d?"TL":"TR";m[d?"BR":"BL"]=d?"TR":"TL";break;case "above-alt":d=!d;default:m[d?"TL":"TR"]=d?"BL":"BR",m[d?"TR":"TL"]=d?"BR":"BL"}});return m};y.mixin(h,e);return h})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(b,y,q){var a=q._createWrapper;q._createWrapper=function(e){e.declaredClass||(e={_popupWrapper:e.parentNode&&b.contains(e.parentNode,"dijitPopup")?
e.parentNode:null,domNode:e,destroy:function(){},ownerDocument:e.ownerDocument,ownerDocumentBody:y.body(e.ownerDocument)});return a.call(this,e)};var h=q.open;q.open=function(e){if(e.orient&&"string"!=typeof e.orient&&!("length"in e.orient)){var g=[],f;for(f in e.orient)g.push({aroundCorner:f,corner:e.orient[f]});e.orient=g}return h.call(this,e)};return q})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(b,y){y.scrollIntoView=function(q,a){b.scrollIntoView(q,a)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],
function(){})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(b,y,q){y.mixin(q,{hasWaiRole:function(a,h){a=this.getWaiRole(a);return h?-1<a.indexOf(h):0<a.length},getWaiRole:function(a){return y.trim((b.get(a,"role")||"").replace("wairole:",""))},setWaiRole:function(a,h){b.set(a,"role",h)},removeWaiRole:function(a,h){var e=b.get(a,"role");e&&(h?(h=y.trim((" "+e+" ").replace(" "+
h+" "," ")),b.set(a,"role",h)):a.removeAttribute("role"))},hasWaiState:function(a,h){return a.hasAttribute?a.hasAttribute("aria-"+h):!!a.getAttribute("aria-"+h)},getWaiState:function(a,h){return a.getAttribute("aria-"+h)||""},setWaiState:function(a,h,e){a.setAttribute("aria-"+h,e)},removeWaiState:function(a,h){a.removeAttribute("aria-"+h)}});return q})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(b,y){y.getDocumentWindow=function(q){return b.get(q)}})},"xstyle/core/load-css":function(){define([],
function(){function b(e){if(a.createStyleSheet){var g=a.createStyleSheet();g.cssText=e;return g.owningElement}g=a.createElement("style");g.setAttribute("type","text/css");g.appendChild(a.createTextNode(e));h.appendChild(g);return g}function y(e,g,f){var m=q[e];if(m)return l=b(m),g(l);var l=a.createElement("link");l.type="text/css";l.rel="stylesheet";l.href=e;var d=!f||!1!==f.wait;e=(e=navigator.userAgent.match(/AppleWebKit\/(\d+\.?\d*)/))&&+e[1];if(null===l.onload&&!(536>e))l.onload=function(){l.onload=
null;l.onerror=null;d&&g(l)},l.onerror=function(){d&&g(l)};else if(d)var c=setInterval(function(){l.style&&(clearInterval(c),g(l))},15);(h||a.getElementsByTagName("head")[0]).appendChild(l);d||g(l)}var q="undefined"==typeof _css_cache?{}:_css_cache,a=document,h=a.head;y.insertCss=b;return y})},"esri/main":function(){define(["./kernel","dojo/i18n!./nls/jsapi","./config","./sniff"],function(b,y){b.bundle=y;return b})},"arcgisonline/base":function(){define(["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline",
"dojo/require!esri/main,esri/utils,arcgisonline/init,arcgisonline/sharing/dijit/SiteHeader,arcgisonline/sharing/dijit/SiteFooter,arcgisonline/sharing/dijit/SiteFooterMap,arcgisonline/sharing/dijit/SignUp,arcgisonline/sharing/dijit/SignUpInternal,dijit/form/Form,arcgisonline/sharing/geow/Account,arcgisonline/sharing/dijit/HelpManager,dojo/date/locale,dojox/widget/Rotator,dojox/widget/AutoRotator,dojox/widget/rotator/Controller,dojox/widget/rotator/Fade,dijit/layout/StackController,dojo/cookie,dojo/json,arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,dojo/topic,dijit/_base,dijit/form/DropDownButton,dijit/form/ComboButton,dijit/form/ToggleButton,dijit/form/RadioButton,dijit/PopupMenuItem,dijit/_Contained,dijit/_Container,dijit/_WidgetBase,dijit/main,dojo/Stateful,dojo/date/locale,esri/utils,arcgisonline/sharing/dijit/Gallery,arcgisonline/sharing/util,arcgisonline/sharing/dijit/views,dojo/parser,dijit/_base,dojo/dnd/AutoSource,dojo/dnd/Target,dojo/fx/Toggler,dijit/TooltipDialog,dijit/MenuSeparator"],
function(b,y,q){b.provide("arcgisonline.base");b.require("esri.main");b.require("esri.utils");b.require("arcgisonline.init");b.require("arcgisonline.sharing.dijit.SiteHeader");b.require("arcgisonline.sharing.dijit.SiteFooter");b.require("arcgisonline.sharing.dijit.SiteFooterMap");b.require("arcgisonline.sharing.dijit.SignUp");b.require("arcgisonline.sharing.dijit.SignUpInternal");b.require("dijit.form.Form");b.require("arcgisonline.sharing.geow.Account");b.require("arcgisonline.sharing.dijit.HelpManager");
b.require("dojo.date.locale");b.require("dojox.widget.Rotator");b.require("dojox.widget.AutoRotator");b.require("dojox.widget.rotator.Controller");b.require("dojox.widget.rotator.Fade");b.require("dijit.layout.StackController");b.require("dojo.cookie");b.require("dojo.json");b.require("arcgisonline.sharing.dijit.TextMenu");b.require("arcgisonline.sharing.util");b.require("dojo.topic");b.require("dijit._base");b.require("dijit.form.DropDownButton");b.require("dijit.form.ComboButton");b.require("dijit.form.ToggleButton");
b.require("dijit.form.RadioButton");b.require("dijit.PopupMenuItem");b.require("dijit._Contained");b.require("dijit._Container");b.require("dijit._WidgetBase");b.require("dijit.main");b.require("dojo.Stateful");b.require("dojo.date.locale");b.require("esri.utils");b.require("arcgisonline.sharing.dijit.Gallery");b.require("arcgisonline.sharing.util");b.require("arcgisonline.sharing.dijit.views");b.require("dojo.parser");b.require("dijit._base");b.require("dojo.dnd.AutoSource");b.require("dojo.dnd.Target");
b.require("dojo.fx.Toggler");b.require("dijit.TooltipDialog");b.require("dijit.MenuSeparator");b.requireLocalization("arcgisonline","arcgisonline")})},"arcgisonline/init":function(){define(["dojo","dijit","dojox","dojo/require!dojo/DeferredList,arcgisonline/sharing/dijit/_Empty,esri/libs/sanitizer/Sanitizer,arcgisonline/pages/utils/organization"],function(b,y,q){b.provide("arcgisonline.init");b.require("dojo.DeferredList");b.require("arcgisonline.sharing.dijit._Empty");b.require("esri.libs.sanitizer.Sanitizer");
b.require("arcgisonline.pages.utils.organization");b.mixin(arcgisonline.init,{labels:null,feeds:[],currentFeed:null,allSSL:!1,isOrg:!1,isSingleTenant:!1,settings:null,galleryNodeMap:{},sanitizer:null,orgUtil:arcgisonline.pages.utils.organization,loadLabels:function(){var a=arcgisonline.init;a.labels=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(a.labels,b.i18n.getLocalization("arcgisonline","arcgisonline").homePage);b.mixin(a.labels,b.i18n.getLocalization("arcgisonline","arcgisonline").emptyStates);
b.attr("viewerLink","innerHTML",a.labels.viewerLink);b.attr("viewerDescription","innerHTML",a.labels.viewerDescription);b.attr("signUpLink","innerHTML",a.labels.signUpLink);b.attr("signUpDescription","innerHTML",a.labels.signUpDescription);b.attr("featuredVideosLink","innerHTML",a.labels.featuredVideosLink);b.attr("featuredVideosDescription","innerHTML",a.labels.featuredVideosDescription);b.attr("lnkExplore","innerHTML",a.labels.explorerLink);b.attr("pExplore","innerHTML",a.labels.explorerDescription);
b.attr("signUpImg","alt",a.labels.signUpLink);b.attr("signUpImg","title",a.labels.signUpLink);b.attr("mapImg","alt",a.labels.viewerLink);b.attr("mapImg","title",a.labels.viewerLink);b.attr("developersImg","alt",a.labels.explorerLink);b.attr("developersImg","title",a.labels.explorerLink);b.attr("videosImg","alt",a.labels.featuredVideosLink);b.attr("videosImg","title",a.labels.featuredVideosLink);b.attr("next","aria-label",esriGeowConfig.isRightToLeft?a.labels.previous:a.labels.next);b.attr("prev",
"aria-label",esriGeowConfig.isRightToLeft?a.labels.next:a.labels.previous);b.attr("skipToContent","innerHTML",a.labels.skipToContent)},initialize:function(){var a=arcgisonline.init;esri.i18nBundle=b.i18n.getLocalization("arcgisonline","arcgisonline");a.loadLabels();a.initSanitizer();b.byId("logoImg")&&b.attr("logoImg","src",arcgisonline.sharing.util.relativeToExplicitUrl("images/logo-pod.jpg"));b.byId("featuredVideosLink").href=esriGeowConfig.learnArcGIS;a.isSingleTenant=void 0!==esriGeowConfig.isMultiTenant&&
null!==esriGeowConfig.isMultiTenant&&!1===esriGeowConfig.isMultiTenant;var h=arcgisonline.sharing.util.getUser();if(a.isSingleTenant||h&&h.accountId)a.isOrg=!0,(h=b.byId("headerTitle"))&&h.parentNode.removeChild(h);arcgisonline.sharing.geow.Account.getSelf(b.hitch(a,arcgisonline.init.initPage),b.hitch(arcgisonline.init,arcgisonline.init.initPage))},unhide:function(){document.body.classList.remove("hide")},initSanitizer:function(){var a=arcgisonline.init;a.sanitizer=new esri.libs.sanitizer.Sanitizer(a.orgUtil.orgSettingsSanitizerParams,
!0);a.sanitizer.sanitizeUrl=a.orgUtil.sanitizeUrlOrgOverride;a.orgUtil.adjustSanitizerForOrgSettingsUse(a.sanitizer)},overrideSettings:function(a){var h=arcgisonline.init;h.settings=a;h.isPortal=arcgisonline.sharing.util.isPortal();if(h.settings.id&&0<h.settings.id.length){h.isOrg=!0;var e=b.byId("headerTitle");e&&e.parentNode.removeChild(e)}h.isPortal&&h.getFederatedServers();a.allSSL&&(h.allSSL=a.allSSL);a.portalName&&(esriGeowConfig.portalName=a.portalName);a.portalHostname&&(esriGeowConfig.portalHostname=
a.portalHostname);a.portalHeaderImage&&(esriGeowConfig.portalHeaderImage=a.portalHeaderImage);a.homePageFeaturedContent?esriGeowConfig.homePageFeaturedContent=a.homePageFeaturedContent:h.isOrg&&(esriGeowConfig.homePageFeaturedContent=null);esri.isDefined(a.homePageFeaturedContentCount)&&(esriGeowConfig.homePageFeaturedContentCount=a.homePageFeaturedContentCount);if(a.rotatorPanels)if(h.isOrg){esriGeowConfig.rotatorPanels=a.rotatorPanels;e=esriGeowConfig.rotatorPanels;for(var g,f,m,l=0;l<e.length;l++)g=
e[l],h.isPortal&&"7443"===location.port&&-1===esriGeowConfig.self.portalHostname.indexOf(":7443")&&(f=new RegExp(esriGeowConfig.self.portalHostname,"gi"),f.test(g.innerHTML)&&(m=esriGeowConfig.self.portalHostname.split("/"),m[0]+=":7443",m[1]="arcgis",g.innerHTML=g.innerHTML.replace(f,m.join("/")))),e[l].innerHTML=g.innerHTML.replace(/CDN_SERVER/gi,esriGeowConfig.cdnServerUrl)}else b.create("div",{id:"homeCalciteBanner"},b.byId("matrixLayout")),b.addClass(b.byId("details"),"calcite_home calcite_home_details"),
b.addClass(b.byId("matrixLayout"),"calcite_home calcite_home_matrixLayout"),b.addClass(b.byId("homeCalciteBanner"),"calcite_home calcite_home_banner"),b.addClass(b.byId("featuredMaps"),"calcite_home calcite_home_featuredMaps"),b.addClass(b.byId("bottomContent"),"calcite_home calcite_home_bottomContent");else h.isOrg&&(esriGeowConfig.rotatorPanels=null);h=a.showHomePageDescription;esriGeowConfig.showHomePageDescription=void 0!==h&&null!==h?a.showHomePageDescription:!1},getFederatedServers:function(){var a=
arcgisonline.sharing.util.getUser();!esriGeowConfig.federatedServers&&a&&arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/"+esriGeowConfig.self.id+"/servers"}).then(b.hitch(this,function(h){arcgisonline.sharing.util.setFederatedServers((h||{}).servers||[])}))},initOrganization:function(){var a=arcgisonline.init;esri.hide(b.byId("bottomSection"));if(esriGeowConfig.explorerOnline){var h="http://developers.arcgis.com",e=a.labels.explorerLink,g=a.labels.explorerDescription;a.isSingleTenant&&
(h=esriGeowConfig.explorerOnline,e=a.labels.explorerLinkPortal,g=a.labels.explorerDescriptionPortal);b.create("div",{id:"appOrgDiv",innerHTML:'\x3ch2 id\x3d"h2Explore"\x3e\x3ca id\x3d"lnkExplore" class\x3d"explorerLink" href\x3d"'+h+'" target\x3d"_blank" \x3e'+e+'\x3c/a\x3e\x3c/h2\x3e\x3cp id\x3d"pExplore"\x3e'+g+"\x3c/p\x3e"},b.byId("topRow2"))}h=a.settings.name;e=a.settings.description;g=esriGeowConfig.showHomePageDescription;g=void 0!==g&&null!==g&&!1===g?!1:!0;var f=esri.isDefined(e)&&"\x3cbr\x3e"!==
e&&"\x3cbr/\x3e"!==e&&"\x3cbr /\x3e"!==e&&""!==e;f&&g?(b.attr(b.byId("orgDetails"),"innerHTML",a.sanitizer.sanitize(e)),esri.show(b.byId("organizationSection"))):!arcgisonline.sharing.util.isPortal()||f||g||(e='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+(a.settings.helpBase+a.settings.helpMap.m["120000837"])+'" target\x3d"_blank"\x3e',b.attr(b.byId("orgDetails"),"innerHTML",esri.substitute({linkStart:e,linkEnd:"\x3c/a\x3e\x3c/span\x3e"},a.labels.portalDefaultDesc)),esri.show(b.byId("organizationSection")));
e=(e=arcgisonline.sharing.util.getToken())?"?token\x3d"+e:"";g=a.settings.backgroundImage;esri.isDefined(g)?"none"!==g?0===g.indexOf("images/")?b.query("body").addClass("defaultBackground"):(g=esriGeowConfig.restBaseUrl+"portals/self/resources/"+g+e,f=b.query("body.esri")[0],b.style(f,"backgroundImage","url('"+g+"')"),b.style(f,"backgroundPosition","top center"),b.style(f,"backgroundRepeat","repeat-x")):b.query("body").addClass("calciteBackground"):b.query("body").addClass("calciteBackground");if(esriGeowConfig.rotatorPanels){b.addClass(b.byId("matrixLayout"),
"matrixLayoutShort");b.addClass(b.byId("details"),"detailsShort");h=arcgisonline.sharing.util.getToken();g=esriGeowConfig.rotatorPanels;for(f=0;f<g.length;f++)e=g[f],e.id&&(e.innerHTML=a.allSSL||a.isPortal&&"https:"===location.protocol?e.innerHTML.replace(/http:/g,"https:"):e.innerHTML),e.innerHTML=e.innerHTML.replace(/CDN_SERVER/gi,esriGeowConfig.cdnServerUrl),e.innerHTML=e.innerHTML.replace("SECURITY_TOKEN",h?h:""),e.innerHTML=a.expandPredefinedImageUrls(e.innerHTML),e.innerHTML=a.expandProtocolAgnosticUrls(e.innerHTML),
e.innerHTML=a.sanitizer.sanitize(e.innerHTML);a.createRotator(g)}else g=esriGeowConfig.portalHeaderImage?esriGeowConfig.portalHeaderImage:arcgisonline.sharing.util.relativeToExplicitUrl("images/organizationSplash.jpg"),b.create("img",{id:"headerImage",src:g},b.byId("matrixLayout")),b.addClass(b.byId("headerImage"),"portalImage"),g=b.create("div",{id:"logoDisplay"},b.byId("matrixLayout")),f="",a.settings&&a.settings.thumbnail&&(f=esriGeowConfig.restBaseUrl+"portals/self/resources/"+a.settings.thumbnail+
e,b.create("img",{src:f,alt:h},g)),b.create("span",{innerHTML:h},g),b.addClass(b.byId("matrixLayout"),"matrixLayoutShort"),b.addClass(b.byId("details"),"detailsShort");a.unhide()},expandPredefinedImageUrls:function(a){var h=window.location.href.substring(0,window.location.href.lastIndexOf("/")+1);a=this.expandPredefinedImageUrl(a,"images/banner-1.jpg",h);a=this.expandPredefinedImageUrl(a,"images/banner-2.jpg",h);a=this.expandPredefinedImageUrl(a,"images/banner-3.jpg",h);a=this.expandPredefinedImageUrl(a,
"images/banner-4.jpg",h);a=this.expandPredefinedImageUrl(a,"images/banner-5.jpg",h);a=this.expandPredefinedImageUrl(a,"images/organizationSplash.jpg",h);return a=this.expandPredefinedImageUrl(a,"images/arcgis_background.jpg",h)},expandPredefinedImageUrl:function(a,h,e){return a.replace('src\x3d"'+h+'"','src\x3d"'+e+h+'"').replace("src\x3d'"+h+"'","src\x3d'"+e+h+"'")},expandProtocolAgnosticUrls:function(a){var h=window.location.protocol;return a.replace('src\x3d"//','src\x3d"'+h+"//").replace("src\x3d'//",
"src\x3d'"+h+"//")},initPage:function(a,h){h=arcgisonline.init;!a||a.code||a.message||h.overrideSettings(a);h.isOrg?document.title=h.settings.name:(document.title=esriGeowConfig.portalName||h.labels.arcgis,b.query("body").addClass("defaultBackground"),esriGeowConfig.portalHeaderImage?((a=b.byId("headerTitle"))&&a.parentNode.removeChild(a),b.create("img",{id:"headerImage",src:esriGeowConfig.portalHeaderImage},b.byId("matrixLayout")),b.addClass(b.byId("headerImage"),"portalImage")):h.createRotator(esriGeowConfig.rotatorPanels));
a="";(a=arcgisonline.sharing.util.getUser())&&!a.accountId?(b.attr("signUpLink","innerHTML",h.labels.readyToUse),b.attr("signUpDescription","innerHTML",h.labels.readyToUseDescription),b.query("#signUpLink").attr("href",location.protocol+"//www.esri.com/software/apps")):(-1===esriGeowConfig.signin.indexOf("http")?(a=esriGeowConfig.baseUrl+esriGeowConfig.signin,!1!==esriGeowConfig.useSSL&&(a=a.replace("http:","https:"))):a=esriGeowConfig.signin,b.query("#signUpLink").attr("href",a));esriGeowConfig.explorerOnline?
b.query(".explorerLink").attr("href","http://developers.arcgis.com"):(b.style(b.byId("bottom3Grid"),"display","none"),b.removeClass(b.byId("bottomRow2"),"middle"),b.addClass(b.byId("bottomRow2"),"last"),b.addClass(b.byId("bottom2Grid"),"grid_6"),b.addClass(b.byId("bottom1Grid"),"grid_6"));b.style("page-border","visibility","visible");esriGeowConfig.homePageFeaturedContent?h.getGroup(esriGeowConfig.homePageFeaturedContent):esri.hide(b.byId("featuredMaps"));h.isOrg?h.initOrganization():h.unhide()},
createRotator:function(a){var h=new q.widget.AutoRotator({transition:"dojox.widget.rotator.crossFade",duration:1E4,panes:a,autoStart:!0,pauseOnManualChange:!0,cycles:12,suspendOnHover:!0},b.byId("imgRotator"));new q.widget.rotator.Controller({rotator:h,commands:"#"},b.byId("categories"));a&&1===a.length&&b.style("categories","display","none")},getNextElementSibling:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(;a.nextSibling;){if(1===a.nextSibling.nodeType)return a.nextSibling;
a=a.nextSibling}},getGroup:function(a){a={q:a,f:"json",ts:(new Date).getTime()};arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/groups",content:a}).then(b.hitch(arcgisonline.init,arcgisonline.init.getGroupContent),b.hitch(arcgisonline.init,arcgisonline.init.getGroupContent))},getGroupContent:function(a){if(a&&a.results&&a.results[0]){for(var h=0,e=a.results[h];a.results.length>h+1&&!(-1<a.query.indexOf('"'+e.title+'"'));)h++,e=a.results[h];b.byId("galleryTitle").innerHTML=
e.title;0===esriGeowConfig.homePageFeaturedContentCount?this.showAllGroupItems(e):(a={q:"group:"+e.id+' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"',f:"json",num:esriGeowConfig.homePageFeaturedContentCount,sortField:e.sortField?e.sortField:"modified",sortOrder:e.sortOrder?e.sortOrder:"desc",ts:(new Date).getTime()},arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:a}).then(b.hitch(arcgisonline.init,
arcgisonline.init.createGallery),function(g){}))}else esri.hide(b.byId("featuredMaps"))},showAllGroupItems:function(a){var h={q:"group:"+a.id+' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"',f:"json",num:100,sortField:a.sortField?a.sortField:"modified",sortOrder:a.sortOrder?a.sortOrder:"desc",ts:(new Date).getTime()};arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:h}).then(b.hitch(this,
function(e){var g={results:e.results},f=0;f=0;if(0<e.nextStart){f=e.total-e.results.length;f=Math.ceil(f/100);var m=[];e=e.nextStart;for(var l=0;l<f;l++)h.start=e+100*l,m.push(arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:h}));(new b.DeferredList(m)).then(b.hitch(this,function(d){b.forEach(d,b.hitch(this,function(c){c[1]&&c[1].results&&(g.results=g.results.concat(c[1].results))}));this.createGallery(g)}),b.hitch(this,function(d){this.createGallery(g)}))}else this.createGallery(g)}),
function(e){})},createGallery:function(a,h){var e=a.results,g=new arcgisonline.sharing.dijit.Gallery({nodesPerPage:4,showThumbnailInDetails:!1,showToolTip:!1,showPageControls:!1,fadeOutOtherNodes:!0,noResultsMessage:b.string.substitute(arcgisonline.sharing.dijit._Empty,{message:arcgisonline.init.labels.noContentAvailable,width:96})},"gallery");b.connect(g,"onContentChange",function(){e.length<=g.nodesPerPage&&(esriGeowConfig.isRightToLeft?(b.removeClass("next","prevButtonEnabled"),b.addClass("next",
"prevButtonDisabled")):(b.removeClass("next","nextButtonEnabled"),b.addClass("next","nextButtonDisabled")))});g.set("items",e);esriGeowConfig.isRightToLeft?(b.connect(b.byId("prev"),"click, keyup",g,g.nextPage),b.connect(b.byId("next"),"click, keyup",g,g.prevPage),b.removeClass("next","nextButtonEnabled"),b.addClass("next","nextButtonDisabled")):(b.connect(b.byId("prev"),"click, keyup",g,g.prevPage),b.connect(b.byId("next"),"click, keyup",g,g.nextPage),b.removeClass("prev","prevButtonEnabled"),b.addClass("prev",
"prevButtonDisabled"));b.connect(g,"onPageChange",function(f){arcgisonline.init.galleryNodeMap={};esriGeowConfig.isRightToLeft?(1===f?(b.removeClass("next","nextButtonEnabled"),b.addClass("next","nextButtonDisabled")):(b.removeClass("next","nextButtonDisabled"),b.addClass("next","nextButtonEnabled")),f===g.pageCount?(b.removeClass("prev","prevButtonEnabled"),b.addClass("prev","prevuttonDisabled")):(b.removeClass("prev","prevButtonDisabled"),b.addClass("prev","prevButtonEnabled"))):(1===f?(b.removeClass("prev",
"prevButtonEnabled"),b.addClass("prev","prevButtonDisabled")):(b.removeClass("prev","prevButtonDisabled"),b.addClass("prev","prevButtonEnabled")),f===g.pageCount?(b.removeClass("next","nextButtonEnabled"),b.addClass("next","nextButtonDisabled")):(b.removeClass("next","nextButtonDisabled"),b.addClass("next","nextButtonEnabled")))});b.connect(g,"onNodeMouseEnter",function(f,m){var l=arcgisonline.init;f=f.currentTarget;var d=arcgisonline.sharing.util.getUser();b.query("a",f).forEach(function(c){if(!l.galleryNodeMap[m.id]){var k=
arcgisonline.sharing.util.getHomePageGalleryLinkInfo(m),t=!1;k.href&&-1<k.href.toLowerCase().indexOf("javascript")&&m.url&&("Web Mapping Application"===m.type||"Mobile Application"===m.type||"Document Link"===m.type||"Site Application"===m.type||"Hub Site Application"===m.type||"StoryMap"===m.type)&&(k.href=m.url,t=!0);if("CityEngine Web Scene"===m.type||"Dashboard"===m.type||"Operation View"===m.type)t=!0;if(k&&k.href&&"JavaScript:void(0)"===k.href&&k.onclick)b.connect(c,"onclick",k.onclick);else{if(!d&&
"self"!==m.contentOrigin&&"public"===m.access&&k.href){var n=k.href.indexOf("/apps/");0===n?k.href="https://"+esriGeowConfig.self.portalHostname+k.href:0<k.href.indexOf(window.location.host+arcgisonline.sharing.util.getHomeAppContext())&&0<n?k.href="https://"+esriGeowConfig.self.portalHostname+k.href.substring(n):-1<k.href.indexOf(".arcgis.com")&&(n=k.href.split(".arcgis.com"),k.href="https://"+esriGeowConfig.self.portalHostname+n[n.length-1])}b.attr(c,"href",k.href)}b.attr(c,"target",t?"_blank":
"");l.galleryNodeMap[m.id]=!0}})})}})})},"arcgisonline/sharing/dijit/_Empty":function(){define(["dojo/text!./templates/_Empty.html"],function(b){return b})},"arcgisonline/sharing/dijit/SiteHeader":function(){define(["dojo","dijit","dojox","dojo/require!dijit/_Widget,dijit/_Templated,arcgisonline/sharing/util,arcgisonline/sharing/geow/Account,arcgisonline/sharing/geow/Geow,arcgisonline/agoNav,dojo/topic"],function(b,y,q){b.provide("arcgisonline.sharing.dijit.SiteHeader");b.require("dijit._Widget");
b.require("dijit._Templated");b.require("arcgisonline.sharing.util");b.require("arcgisonline.sharing.geow.Account");b.require("arcgisonline.sharing.geow.Geow");b.require("arcgisonline.agoNav");b.require("dojo.topic");b.declare("arcgisonline.sharing.dijit.SiteHeader",[y._Widget,y._Templated],{util:arcgisonline.sharing.util,geow:arcgisonline.sharing.geow.Geow,acct:arcgisonline.sharing.geow.Account,agoNav:arcgisonline.agoNav,widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent siteHeader" id\x3d"header" dojoAttachPoint\x3d"containerNode"\x3e\n    \x3cdiv class\x3d"esri-header-barrier"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
postMixInProperties:function(){this.inherited(arguments);this._logCookieChange(this.geow.checkSharedCookie());this.i18n=b.mixin({},b.i18n.getLocalization("arcgisonline","arcgisonline").common);b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").siteHeader);this.webLabel=this.i18n.webOnly;this.webDescription=this.i18n.webDesc;this.desktopLabel=this.i18n.allContent;this.desktopDescription=this.i18n.allDesc;this.relativePath=esriGeowConfig.baseUrl||"./"},postCreate:function(){var a=
window.location.pathname.toLowerCase();this.isSignInPage=-1!==a.indexOf(esriGeowConfig.signin);this.isSignUpPage=-1!==a.indexOf(esriGeowConfig.signup);this.isJoinPage=-1!==a.indexOf(esriGeowConfig.join);this.isSetupPage=-1!==a.indexOf(esriGeowConfig.setup);this.isIEPage=-1!==a.indexOf("ie6.html");this.isTroubleshootPage=-1!==a.indexOf("troubleshoot.html");this._account=arcgisonline.sharing.geow.Account;7>b.isIE&&!this.isIEPage&&(window.location="ie6.html");document.getElementById("page-border")&&
b.attr("page-border","onClick","")},startup:function(){this.inherited(arguments);esri.config.defaults.io.corsEnabledServers.push("http://"+location.host);esri.config.defaults.io.corsEnabledServers.push("https://"+location.host);esri.config.defaults.io.proxyUrl=esriGeowConfig.proxyServer;return this._fetchSelf()},_generateGlobalNav:function(a){this._agoNavIsLoaded||window.require(["arcgisonline/agoNav"],function(h){this.agoNav=h;this.agoNav.init({config:esriGeowConfig.self,legacy:this.legacy,relativePath:this.relativePath});
this._agoNavIsLoaded=!0}.bind(this))},_logCookieChange:function(a){var h=this.telemetry;a&&h&&h.logEvent&&h.logEvent({category:"cookie",label:"Organization changed",detail:"Yes"})},_fetchSelf:function(){var a=new b.Deferred;this._account.getSelf(b.hitch(this,function(h){this._finishStartup(h);a.resolve(h);b.topic.publish("OnFetchSelf",h)}),b.hitch(this,function(h){this._finishStartup();throw h;}));return a},_finishStartup:function(a){this.geow.setCookies(a||{});if(a&&!a.code&&!a.message){if(a.httpsPort){esriGeowConfig.httpsPort=
a.httpsPort;var h=esri.config.defaults.io.corsEnabledServers.pop()}if(a.httpPort){esriGeowConfig.httpPort=a.httpPort;var e=esri.config.defaults.io.corsEnabledServers.pop()}e&&esri.config.defaults.io.corsEnabledServers.push(arcgisonline.sharing.util.getHttpUrl("http://"+location.host).replace(/:80$/,""));h&&esri.config.defaults.io.corsEnabledServers.push(arcgisonline.sharing.util.getSecureUrl("http://"+location.host).replace(/:443$/,""));if(a.authorizedCrossOriginDomains&&0<a.authorizedCrossOriginDomains.length)for(h=
0;h<a.authorizedCrossOriginDomains.length;h++)e=a.authorizedCrossOriginDomains[h],esri.isDefined(e)&&0<e.length&&esri.config.defaults.io.corsEnabledServers.push({host:e,withCredentials:!0});this._generateGlobalNav({user:a.user});this.isLoggedIn=this.util.isLoggedIn();a.isPortal&&arcgisonline.sharing.util._cookies&&-1===arcgisonline.sharing.util._cookies.esri_auth&&delete arcgisonline.sharing.util._cookies.esri_auth;h=b.locale;a.user&&a.user.culture?h=a.user.culture:a.culture&&(h=a.culture);e=arcgisonline.sharing.util.getUser();
var g=b.queryToObject(window.location.search.substring(1));var f=-1<["hi"].indexOf(h);if(a.culture&&!e)a.culture=a.culture.toLowerCase(),b.cookie("arcgisLocale",a.culture),-1!==a.culture.indexOf("ar")?esriGeowConfig.isRightToLeft=!0:esriGeowConfig.isRightToLeft=!1,b.locale.toLowerCase()!==a.culture.toLowerCase()&&window.location.reload();else if(!a.culture&&!e)b.cookie("arcgisLocale")&&(b.cookie("arcgisLocale",null,{expires:-1}),window.location.reload());else if(e&&h&&b.locale!==h.toLowerCase()&&
!f&&!g.locale){var m=arcgisonline.sharing.util.getCookie("esri_auth");if(m&&(m.username=m.username||m.email,m&&m.username===a.user.username)){9>b.isIE&&m.auth_tier&&"web"===m.auth_tier&&(g=new Date,m.expires=new Date(g.setSeconds(g.getSeconds()+Number(7200))));if(!m.culture||m.culture&&m.culture!==h.toLowerCase())m.culture=h.toLowerCase(),arcgisonline.sharing.geow.Geow.setAuthCookie(m),b.cookie("arcgisLocale",m.culture.toLowerCase());window.location.reload()}}if(e&&esri.isDefined(e.auth_tier)&&"web"===
e.auth_tier)if(e.username=e.username||e.email,e&&e.culture.toLowerCase()!==h.toLowerCase()&&!f){f=arcgisonline.sharing.util.getCookie("esri_auth")||{};9>b.isIE&&(g=new Date,f.expires=new Date(g.setSeconds(g.getSeconds()+Number(7200))));if(!e.culture||e.culture&&e.culture.toLowerCase()!==h.toLowerCase())e.culture=h.toLowerCase(),f.culture=e.culture,a.allSSL&&(f.allSSL=!0,f.secure=!0),arcgisonline.sharing.geow.Geow.setAuthCookie(f),e=b.mixin(e,f);window.location.reload()}else e&&e.culture.toLowerCase()===
h.toLowerCase()&&b.locale.toLowerCase()!==h.toLowerCase()&&!f&&window.location.reload();a.allSSL&&(this.allSSL=esriGeowConfig.allSSL=a.allSSL);esri.isDefined(esriGeowConfig.allSSL)&&esriGeowConfig.allSSL&&"http:"===location.protocol&&(window.location=arcgisonline.sharing.util.getSecureUrl(location.href));a.helpBase&&(esriGeowConfig.help=a.helpBase,esriGeowConfig.helpBase=a.helpBase,h=esriGeowConfig.self&&esriGeowConfig.self.helpBase||"support.html",this.util.isPortal()&&(h=location.protocol+"//"+
location.host+a.helpBase,h=this.allSSL||arcgisonline.sharing.util.usePortalSSL()?arcgisonline.sharing.util.getSecureUrl(h):arcgisonline.sharing.util.getHttpUrl(h)));a.helpMap&&a.helpMap.m&&(esriGeowConfig.helpMap=a.helpMap.m);a.portalHostname&&(esriGeowConfig.portalHostname=a.portalHostname);a.urlKey&&(esriGeowConfig.urlKey=a.urlKey);a.staticImagesUrl&&(esriGeowConfig.staticImagesUrl=a.staticImagesUrl);h=!1===esriGeowConfig.isMultiTenant;h||(g=window.location.host,g===a.portalHostname||-1===g.indexOf(a.customBaseUrl)||
a.access||a.name||(window.location=window.location.href.replace(g,a.portalHostname)),!e||"account_admin"!==e.role&&"org_admin"!==e.role||!a.id||a.urlKey||this.isSetupPage||(window.location=esriGeowConfig.baseUrl+"setup.html"));h?(!a.access||"private"!==a.access||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||this.isSignUpPage||(window.location=arcgisonline.sharing.util.getSecureUrl()+esriGeowConfig.signin+"?returnUrl\x3d"+encodeURIComponent(window.location)),!a.isPortal||
"singletenant"!==a.portalMode||"7080"!==location.port&&"7443"!==location.port||arcgisonline.sharing.util.checkForIAA().then(b.hitch(this,function(l){if(l&&l.hasIAA&&(a.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location=arcgisonline.sharing.util.getHttpUrl(esriGeowConfig.baseUrl)+"error.html?c\x3dWebAdaptorRequired"),!a.portalHostname.match(/:7080\//)&&80!==esriGeowConfig.httpPort&&443!==esriGeowConfig.httpsPort&&"http:"===location.protocol&&
-1===location.href.indexOf("error.html"))){l=new b._Url(location.href);var d=l.path.indexOf("/home/");d=l.path.substring(d+6);l=esri.isDefined(l.query)?"?"+l.query:"";window.location=arcgisonline.sharing.util.getHttpUrl("http://"+a.portalHostname)+"/home/"+d+l}}))):a.id||!a.urlKey||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||(window.location=esriGeowConfig.baseUrl.replace("http:","https:")+esriGeowConfig.signin+"?returnUrl\x3d"+encodeURIComponent(window.location))}},
updateEsriAccessLinks:function(a){esriGeowConfig.self.user.userType=a;window.require(["arcgisonline/agoNav"],function(h){this.agoNav=h;h.updateHeaderComponent({config:esriGeowConfig.self})}.bind(this))}})})},"arcgisonline/sharing/geow/Account":function(){define("dijit/registry dojo/_base/lang dojo/Deferred dojo/dom-class dojo/dom-construct dojo/json dojo/promise/all dojo/query dojo/request/iframe dojo/sniff dojo/data/ItemFileReadStore dojo/data/util/sorter dojo/when esri/config esri/lang esri/IdentityManager ../../pages/utils/promises ../../esriGeowConfig ../util ./Geow ../dijit/Role ../dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r){return{displayedPortalNonSSLNotice:!1,getCurrentUserInfo:function(v,B){B=z.getUser();null!==B&&z.getJson(A.restBaseUrl+"community/users/"+(B.username||B.email),v.bind(this))},i18n:function(){return this._i18n?this._i18n:this._i18n=r.common},loadMapSettings:function(v){E.checkSharedCookie();this.getSelf(dojo.hitch(this,function(B,C){if(B){E.setCookies(B);B.allSSL&&(A.allSSL=B.allSSL);n.isDefined(A.allSSL)&&A.allSSL&&"http:"===location.protocol&&
(window.location=z.getSecureUrl(location.href));B.basemapGalleryGroupQuery&&(A.basemapGalleryGroupQuery=B.basemapGalleryGroupQuery);B.templatesGroupQuery&&(A.templatesGroupQuery=B.templatesGroupQuery);B.defaultBasemap&&(A.defaultBasemap=B.defaultBasemap);B.defaultExtent&&(A.defaultExtent=B.defaultExtent);B.symbolSetsGroupQuery&&(A.symbolSetsGroupQuery=B.symbolSetsGroupQuery);B.staticImagesUrl&&(A.staticImagesUrl=B.staticImagesUrl);B.layerTemplatesGroupQuery&&(A.layerTemplatesGroupQuery=B.layerTemplatesGroupQuery);
B.colorSetsGroupQuery&&(A.colorSetsGroupQuery=B.colorSetsGroupQuery);B.helpBase&&(A.help=B.helpBase,A.helpBase=B.helpBase);B.helpMap&&B.helpMap.m&&(A.helpMap=B.helpMap.m);B.urlKey&&(A.urlKey=B.urlKey);if(B.authorizedCrossOriginDomains&&0<B.authorizedCrossOriginDomains.length)for(C=0;C<B.authorizedCrossOriginDomains.length;C++){var F=B.authorizedCrossOriginDomains[C];n.isDefined(F)&&0<F.length&&t.defaults.io.corsEnabledServers.push({host:F,withCredentials:!0})}B.isPortal&&z._cookies&&-1===z._cookies.esri_auth&&
delete z._cookies.esri_auth;C=!1===A.isMultiTenant;var G=(F=z.getUser())?!0:!1,H=window.location.pathname.toLowerCase(),J=-1!=H.indexOf(A.signin),I=-1!=H.indexOf("troubleshoot.html");H=-1!=H.indexOf("setup.html");C||!F||"account_admin"!==F.role&&"org_admin"!==F.role||!B.id||B.urlKey||H||(window.location=A.baseUrl+"setup.html");if(C){!B.access||"private"!==B.access||G||J||I||(window.location=z.getSecureUrl()+A.signin+"?returnUrl\x3d"+encodeURIComponent(window.location));F=f(".esriLogoIcon");for(C=
0;C<F.length;C++)a.replace(F[C],"esriLogoIcon esriOrgIcon");B.isPortal&&"singletenant"===B.portalMode&&("7080"===location.port||"7443"===location.port)&&z.checkForIAA().then(function(K){if(K&&K.hasIAA&&(B.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location=z.getHttpUrl(A.baseUrl)+"error.html?c\x3dWebAdaptorRequired"),!B.portalHostname.match(/:7080\//)&&80!==A.self.httpPort&&443!==A.self.httpsPort&&"http:"===location.protocol&&-1===
location.href.indexOf("error.html"))){K=new dojo._Url(location.href);var R=K.path.indexOf("/home/");R=K.path.substring(R+6);K=n.isDefined(K.query)?"?"+K.query:"";window.location=z.getHttpUrl("http://"+B.portalHostname)+"/home/"+R+K}}.bind(this))}else if(!B.id&&B.urlKey&&!G)J||I||(window.location=A.baseUrl.replace("http:","https:")+A.signin+"?returnUrl\x3d"+encodeURIComponent(window.location));else if(B.id&&B.urlKey&&!G)for(F=f(".esriLogoIcon"),C=0;C<F.length;C++)a.replace(F[C],"esriLogoIcon esriOrgIcon")}v&&
v(B)}))},getAccountResource:function(v,B,C,F){z.getJson(A.restBaseUrl+"portals/self/resources/"+B,C.bind(this),F.bind(this))},uploadAccountResource:function(v,B,C,F){z.postJson(B,A.restBaseUrl+"portals/self/addResource",C.bind(this),F.bind(this))},deleteAccountResource:function(v,B,C,F){z.postJson({key:B},A.restBaseUrl+"portals/self/removeResource",C.bind(this),F.bind(this))},getAccountSettings:function(v,B){v=function(F){B&&B(F)}.bind(this);var C=function(F){B&&B({})}.bind(this);z.getJson(A.restBaseUrl+
"portals/self/resources/accountSettings",v,C)},getSelf:function(v,B,C){if(this._isRequestingSelf)setTimeout(this.getSelf.bind(this,v,B),75);else{var F=A.restBaseUrl+"/portals/helpmap?culture\x3d"+dojo.locale,G=A.restBaseUrl+"portals/self?culture\x3d"+dojo.locale;C&&(F+="\x26token\x3d"+C,G+="\x26token\x3d"+C);C=A&&A.self||x.eachAlways({helpMapResult:z._requestWithAppHandlers({url:F}),selfResult:z._requestWithAppHandlers({url:G})}).then(function(H){if(H.selfResult&&H.selfResult.error)throw H.selfResult.error;
var J=H.selfResult.value;H.helpMapResult&&H.helpMapResult.value&&(J.helpMap=H.helpMapResult.value.helpMap);if(J.user)return u.checkAppAccess(A.restBaseUrl,this.getAppClientId()).always(function(I){this.setupAfterSelf(J,!(!I||!I.viewOnly));this._isRequestingSelf=!1;10>=l("ie")&&this.throwawayIEPostFix();return J}.bind(this));this.setupAfterSelf(J);this._isRequestingSelf=!1;10>=l("ie")&&this.throwawayIEPostFix();return J}.bind(this),function(H){throw H;}.bind(this));this._isRequestingSelf=!A.self;return k(C,
v,B)}},getAppClientId:function(){return-1<window.location.href.indexOf("webmap/viewer.html")?"arcgisWebApps":"arcgisonline"},setupAfterSelf:function(v,B){A.self=v;A.userInfo=v.user&&y.mixin(A.userInfo||{},v.user);v.user&&v.user.username&&(A.userInfo.email=v.user&&v.user.username);v.user&&v.user.role&&(A.userRole=new w({id:v.user.roleId?v.user.roleId:v.user.role,role:v.user.role,privileges:v.user.privileges?v.user.privileges:void 0,viewOnly:B}),B&&(A.self.user.role=A.userInfo.role=v.user.role=A.userRole.baseRole,
A.self.user.roleId=A.userInfo.roleId=v.user.roleId=A.userRole.id,A.self.user.privileges=A.userInfo.privileges=v.user.privileges=A.userRole.privileges,A.self.user.level=A.userInfo.level=v.user.level="1"));this.normalizeOrgIdAndRole()},normalizeOrgIdAndRole:function(){n.isDefined(A.self.user)&&(n.isDefined(A.self.user.orgId)&&(A.self.user.accountId=A.self.user.orgId),n.isDefined(A.self.user.role)&&(A.self.user.role=z.normalizeOrgRole(A.self.user.role)));n.isDefined(A.userInfo)&&(n.isDefined(A.userInfo.orgId)&&
(A.userInfo.accountId=A.userInfo.orgId),n.isDefined(A.userInfo.role)&&(A.userInfo.role=z.normalizeOrgRole(A.userInfo.role)))},throwawayIEPostFix:function(){var v=h.create("form",{encoding:"multipart/form-data",method:"POST"});h.create("input",{type:"hidden",name:"f",value:"json"},v);h.create("input",{type:"hidden",name:"q",value:"*"},v);h.create("input",{type:"hidden",name:"callback.html",value:"textarea"},v);m.post(A.restBaseUrl+"community/users",{form:v,handleAs:"json"}).then(function(){}.bind(this)).otherwise(function(){}.bind(this))},
activateAccount:function(v,B,C,F){null!==z.getUser()&&(v={code:v},F&&(v.userLicenseType=F),z.postJson(v,A.restBaseUrl+"portals/activate",B,C))},getAccount:function(v,B,C){null!==z.getUser()&&z.getJson(A.restBaseUrl+"portals/self",B.bind(this))},updateAccount:function(v,B,C){if(null!==z.getUser()){var F="";v.defaultBasemap&&(F=e.stringify(v.defaultBasemap));var G=v.metadataFormats&&0<v.metadataFormats.length?v.metadataFormats.join(","):"",H=!!A.userRole,J=A.userRole.isAdmin(),I=A.self&&(A.self.canListApps||
A.self.canListData),K=H&&(J||A.userRole.canManageCredits()),R=H&&(J||A.userRole.canManageSecurity()),W=H&&(J||A.userRole.canManageWebsite());I=I&&H&&(J||A.userRole.canManageMarketplace());H=H&&(J||A.userRole.canManageUtilityServices());J=W||R||H||K;K={clearEmptyFields:!0};W&&(K.name=v.name,K.description=v.description,K.culture=v.culture,K.cultureFormat=v.cultureFormat,K.region=v.region,K.featuredItemsGroupQuery=v.featuredItemsGroupQuery,K.thumbnail=v.thumbnail,K.basemapGalleryGroupQuery=v.basemapGalleryGroupQuery,
K.defaultBasemap=F,K.defaultExtent=v.defaultExtent?e.stringify(v.defaultExtent):"",K.featuredGroups=e.stringify(v.featuredGroups),K.homePageFeaturedContent=v.homePageFeaturedContent,K.homePageFeaturedContentCount=v.homePageFeaturedContentCount,K.rotatorPanels=e.stringify(v.rotatorPanels),K.showHomePageDescription=v.showHomePageDescription,K.templatesGroupQuery=v.templatesGroupQuery,K.analysisLayersGroupQuery=v.analysisLayersGroupQuery,K.galleryTemplatesGroupQuery=v.galleryTemplatesGroupQuery,K.stylesGroupQuery=
v.stylesGroupQuery,K.bingKey=v.bingKey,K.canShareBingPublic=v.canShareBingPublic,K.backgroundImage=v.backgroundImage,K.units=v.units,K.metadataEditable=v.metadataEditable,K.metadataFormats=G,K.useVectorBasemaps=v.useVectorBasemaps);H&&v.helperServices&&(K.geocodeService=e.stringify(v.helperServices.geocode),K.printServiceTask=e.stringify(v.helperServices.printTask),K.geometryService=e.stringify(v.helperServices.geometry),K.routeServiceLayer=e.stringify(v.helperServices.route),n.isDefined(v.helperServices.asyncRoute)&&
(K.asyncRouteService=e.stringify(v.helperServices.asyncRoute)),n.isDefined(v.helperServices.closestFacility)&&(K.closestFacilityService=e.stringify(v.helperServices.closestFacility)),n.isDefined(v.helperServices.asyncClosestFacility)&&(K.asyncClosestFacilityService=e.stringify(v.helperServices.asyncClosestFacility)),n.isDefined(v.helperServices.serviceArea)&&(K.serviceAreaService=e.stringify(v.helperServices.serviceArea)),n.isDefined(v.helperServices.asyncServiceArea)&&(K.asyncServiceAreaService=
e.stringify(v.helperServices.asyncServiceArea)),n.isDefined(v.helperServices.syncVRP)&&(K.syncVRPService=e.stringify(v.helperServices.syncVRP)),n.isDefined(v.helperServices.asyncVRP)&&(K.asyncVRPService=e.stringify(v.helperServices.asyncVRP)),n.isDefined(v.helperServices.asyncLocationAllocation)&&(K.asyncLocationAllocationService=e.stringify(v.helperServices.asyncLocationAllocation)),n.isDefined(v.helperServices.routingUtilities)&&(K.routingUtilitiesService=e.stringify(v.helperServices.routingUtilities)),
n.isDefined(v.helperServices.traffic)&&(K.trafficService=e.stringify(v.helperServices.traffic)),n.isDefined(v.helperServices.asyncODCostMatrix)&&(K.asyncODCostMatrixService=e.stringify(v.helperServices.asyncODCostMatrix)),z.isPortal()&&(n.isDefined(v.helperServices.analysis)&&(K.analysisService=e.stringify(v.helperServices.analysis)),n.isDefined(v.helperServices.asyncGeocode)&&(K.asyncGeocodeService=e.stringify(v.helperServices.asyncGeocode)),n.isDefined(v.helperServices.geoenrichment)&&(K.geoenrichmentService=
e.stringify(v.helperServices.geoenrichment)),n.isDefined(v.helperServices.hydrology)&&(K.hydrologyService=e.stringify(v.helperServices.hydrology)),n.isDefined(v.helperServices.orthomappingElevation)&&(K.orthomappingElevationService=e.stringify(v.helperServices.orthomappingElevation)),n.isDefined(v.helperServices.elevation)&&(K.elevationService=e.stringify(v.helperServices.elevation)),n.isDefined(v.helperServices.elevationSync)&&(K.elevationSyncService=e.stringify(v.helperServices.elevationSync)),
n.isDefined(v.helperServices.defaultElevationLayers)&&(K.elevation3DService=e.stringify(v.helperServices.defaultElevationLayers))));I&&(K.orgUrl=v.orgUrl,K.orgEmail=v.orgEmail,K.orgPhone=v.orgPhone);R&&(K.access=v.access,K.allSSL=v.allSSL,K.commentsEnabled=v.commentsEnabled,K.canSharePublic=v.canSharePublic,K.canSearchPublic=v.canSearchPublic,K.urlKey=v.urlKey,K.canSignInIDP=v.canSignInIDP,K.canSignInArcGIS=v.canSignInArcGIS,K.useStandardizedQuery=v.useStandardizedQuery,K.mfaEnabled=v.mfaEnabled,
K.mfaAdmins=e.stringify(v.mfaAdmins),K.authorizedCrossOriginDomains=e.stringify(v.authorizedCrossOriginDomains),K.allowedOrigins=v.allowedOrigins,K.allowedRedirectUris=e.stringify(v.allowedRedirectUris),K.updateUserProfileDisabled=v.updateUserProfileDisabled,K.eueiEnabled=v.eueiEnabled,K.contacts=e.stringify(v.contacts||[]));J&&(K.portalProperties=e.stringify(v.portalProperties));v=Object.keys(K);1===v.length&&"clearEmptyFields"===v[0]?B():z.request({url:z.getSecureUrl(A.restBaseUrl)+"portals/self/update",
content:K},{usePost:!0}).then(B.bind(this),C.bind(this))}},getAccountGroups:function(v,B,C,F){if(null!==z.getUser()){F=1;var G=10;null!==B.start&&(F=B.start);null!==B.num&&(G=B.num);v="(orgid:"+v+" AND (access:org OR access:public)";z.isPortal()&&(v+=' -owner:"esri_nav" -owner:"esri_livingatlas" -owner:"esri_boundaries" -owner:"esri_demographics"');v=A.restBaseUrl+"community/groups?q\x3d"+encodeURIComponent(v+")")+"\x26sortField\x3dtitle\x26sortOrder\x3dasc\x26start\x3d"+F+"\x26num\x3d"+G;z.getJson(v,
C.bind(this))}},checkUsernames:function(v,B,C){v=v&&0<v.length?v.join(","):"";z.postJson({usernames:v},A.restBaseUrl+"community/checkUsernames",B,C)},inviteUsers:function(v,B,C){null!==z.getUser()&&z.postJson(v,A.restBaseUrl+"portals/self/invite",B,C)},inviteAccountUsersByEmail:function(v,B,C,F){null!==z.getUser()&&z.postJson(B,A.restBaseUrl+"portals/self/inviteByEmail",C.bind(this),F.bind(this))},getPendingAccountUsers:function(v,B,C,F){if(null!==z.getUser()){v=1;F=10;var G;n.isDefined(B.start)&&
(v=B.start);n.isDefined(B.num)&&(F=B.num);if(n.isDefined(B.sortField))var H=B.sortField;if(n.isDefined(B.sortOrder))var J=B.sortOrder;n.isDefined(B.type)&&(G=B.type);B=A.restBaseUrl+"portals/self/invitations?start\x3d"+v+"\x26num\x3d"+F;H&&(B+="\x26sortField\x3d"+H);J&&(B+="\x26sortOrder\x3d"+J);G&&(B+="\x26type\x3d"+G);z.getJson(B,C.bind(this))}},retrieveInvitations:function(v,B,C){v=A.restBaseUrl+"portals/self/invitations?start\x3d"+v+"\x26num\x3d"+B;C&&(v+="\x26type\x3d"+C);return z.request({url:v})},
getInvitation:function(v,B,C){null!==z.getUser()&&z.getJson(A.restBaseUrl+"community/invitations/"+v,B.bind(this),C)},acceptInvitation:function(v,B,C){null!==z.getUser()&&z.postJson({invitationId:v},A.restBaseUrl+"community/invitations/"+v+"/accept",B.bind(this),C.bind(this))},declineInvitation:function(v,B,C){null!==z.getUser()&&z.postJson({},A.restBaseUrl+"community/invitations/"+v+"/decline",B.bind(this))},approvePendingInvitation:function(v,B,C,F){null!==z.getUser()&&z.postJson({},A.restBaseUrl+
"portals/self/invitations/"+B+"/approve",C.bind(this))},removePendingInvitation:function(v,B,C,F){null!==z.getUser()&&z.postJson({},A.restBaseUrl+"portals/self/invitations/"+B+"/delete",C.bind(this))},getAccountUsers:function(v,B,C,F){if(null!==z.getUser()){v=1;F=10;n.isDefined(B.start)&&(v=B.start);n.isDefined(B.num)&&(F=B.num);if(n.isDefined(B.sortField))var G=B.sortField;if(n.isDefined(B.sortOrder))var H=B.sortOrder;if(n.isDefined(B.adminOnly))var J=B.adminOnly;if(n.isDefined(B.excludeSystemUsers))var I=
B.excludeSystemUsers;B=A.restBaseUrl+"portals/self/users?start\x3d"+v+"\x26num\x3d"+F;G&&(B+="\x26sortField\x3d"+G);H&&(B+="\x26sortOrder\x3d"+H);J&&(B+="\x26role\x3dorg_admin");I&&(B+="\x26excludeSystemUsers\x3dtrue");z.getJson(B,C.bind(this))}},searchAccountUsers:function(v,B,C,F){null!==z.getUser()&&(v=1,F=10,n.isDefined(B.start)&&(v=B.start),n.isDefined(B.num)&&(F=B.num),v=A.restBaseUrl+"portals/self/users?start\x3d"+v+"\x26num\x3d"+F,n.isDefined(B.sortField)&&(v+="\x26sortField\x3d"+B.sortField),
n.isDefined(B.sortOrder)&&(v+="\x26sortOrder\x3d"+B.sortOrder),n.isDefined(B.role)&&(v+="\x26role\x3d"+B.role),n.isDefined(B.username)&&(v+="\x26username\x3d"+B.username),n.isDefined(B.fullname)&&(v+="\x26fullname\x3d"+B.fullname),n.isDefined(B.lastname)&&(v+="\x26lastname\x3d"+B.lastname),n.isDefined(B.firstname)&&(v+="\x26firstname\x3d"+B.firstname),n.isDefined(B.excludeSystemUsers)&&(v+="\x26excludeSystemUsers\x3dtrue"),z.getJson(v,C.bind(this)))},searchAccountGroups:function(v,B,C,F,G){if(null!==
z.getUser()){var H=1,J=10;null!==C.start&&(H=C.start);null!=C.num&&(J=C.num);v=A.restBaseUrl+"community/groups?q\x3d"+encodeURIComponent("("+B+" orgid:"+v+")")+"\x26start\x3d"+H+"\x26num\x3d"+J+"\x26sortField\x3dtitle\x26sortOrder\x3dasc";z.getJson(v,F.bind(this),G.bind(this))}},updateUserRole:function(v,B,C,F){var G=null,H=z.getUser();if(null!==H){G=H.accountId;var J=H.username||H.email;null!==G&&(J===v&&"account_admin"===H.role&&"account_admin"!==B?(v=new D,v.onOkClick=function(){b.byId("general-dialog").hide();
C(null)},v.show({title:"Account Administrator",message:"You are an account administrator and cannot remove yourself from the administrator role. Another account administrator must change your role."})):z.postJson({user:v,role:B},A.restBaseUrl+"portals/self/updateUserRole",C.bind(this),F.bind(this)))}},deleteUser:function(v,B,C){null!==z.getUser()&&z.postJson({},A.restBaseUrl+"community/users/"+v+"/delete",B.bind(this),C.bind(this))},blankUserStore:function(){return new d({data:{identifier:"username",
label:"fullName",items:[]}})},caseInsensitiveComparator:function(v,B){v&&(v=v.toLowerCase());B&&(B=B.toLowerCase());return c.basicComparator(v,B)},lastLoginComparator:function(v,B){var C=0===v||-1===v?void 0:v,F=0===B||-1===B?void 0:B,G=-1;A.self&&A.self.isPortal||!1===A.isMultiTenant?G=c.basicComparator(C,F):C==F?G=v==B?0:v<B?-1:1:C&&F&&v>B?G=1:C&&!F?G=1:!C&&F&&(G=-1);return G},pendingUsersToStore:function(v,B){var C=[];v.forEach(function(F,G){C[G]={id:F.id,fromUsername:F.fromUsername,email:F.email,
username:F.username,role:z.normalizeOrgRole(F.role),targetId:F.targetId,type:F.type,targetType:F.targetType,mustApprove:F.mustApprove,accepted:F.accepted,dateAccepted:F.dateAccepted,expiration:F.expiration,created:F.created,culture:B}},this);v=new d({data:{identifier:"id",label:"fullName",items:C}});v.comparatorMap={email:this.caseInsensitiveComparator,username:this.caseInsensitiveComparator};return v},usersToStore:function(v,B){var C=[];v.forEach(function(F,G){C[G]={email:F.email,fullName:F.fullName,
username:F.username,created:F.created,storageUsage:F.storageUsage,role:z.normalizeOrgRole(F.role),lastLogin:F.lastLogin,culture:B,disabled:F.disabled,idpUsername:F.idpUsername,userType:F.userType,mfaEnabled:F.mfaEnabled,availableCredits:F.availableCredits,assignedCredits:F.assignedCredits,level:F.level||"2"}},this);v=new d({data:{identifier:"username",label:"fullName",items:C}});v.comparatorMap={fullName:this.caseInsensitiveComparator,username:this.caseInsensitiveComparator,lastLogin:this.lastLoginComparator};
return v},groupsToStore:function(v){var B=[];v.forEach(function(C,F){B[F]={id:C.id,title:C.title}},this);return new ItemFileWriteStore({data:{identifier:"id",label:"group",items:B}})},getSupportedLanguages:function(v,B){return esri.request({url:A.restBaseUrl+"portals/languages",content:{f:"json"},load:v,callbackParamName:"callback",error:B})},getSupportedRegions:function(v,B){return esri.request({url:A.restBaseUrl+"portals/regions",content:{f:"json",culture:dojo.locale},load:v,callbackParamName:"callback",
error:B})},getSupportedLanguagesAndRegions:function(){var v=new q;g({languages:this.getSupportedLanguages(null,null),regions:this.getSupportedRegions(null,null)}).then(function(B){v.resolve({languages:B.languages,regions:B.regions})}.bind(this),function(B){v.resolve(B)}.bind(this));return v}}})},"arcgisonline/agoNav":function(){define("esri-global-nav/esri-global-nav dojo/promise/all dojo/debounce dojo/string dojo/cookie dojo/topic dojo/query dojo/io-query dojo/_base/lang dojo/Deferred dojo/on dojo/dom-construct ./sharing/geow/Account ./sharing/geow/Geow ./sharing/dijit/Webworker/_AppLauncher ./sharing/dijit/InfoBanner ./sharing/util ./pages/utils/notebook ./pages/utils/dom esri/arcgis/Portal esri/request esri/IdentityManager ./esriGeowConfig ./pages/utils/notifications ./pages/portal/PortalItem ./pages/portal/PortalUser ./pages/portal/LicenseInfo ./pages/organization/widgets/GroupIcon ./pages/utils/icons arcgis-components/wrappers/InfoBanner dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B,C,F,G,H,J,I){return{declaredClass:"arcgisonline.agoNav",init:function(K){this.legacy=K.legacy;this.getOrgSettings().then(function(R){if(R.anonymousAccessNotice&&R.anonymousAccessNotice.enabled&&!h("ago_conditions_accepted"))return window.location.href=r.baseUrl+"pages/Account/accept_conditions.html#client_id\x3darcgisonline\x26redirect_uri\x3d"+window.location.href;R.informationalBanner&&R.informationalBanner.enabled&&this.createClassificationBanner(R.informationalBanner)}.bind(this));
this.relativePath=K.relativePath||"./";r.self=K.config;this.customNavStructure=K.customNavStructure;this.isOrgUser=r.userInfo&&r.userInfo.orgId;this.userIsSignedIn=!(!r.userInfo||!r.userInfo.email&&!r.userInfo.username);this.createPortalInstance().then(function(){var R=f.queryToObject(window.location.search.slice(1));(-1<window.location.pathname.indexOf("user.html")||-1<window.location.pathname.indexOf("userprofile.html"))&&R&&R.hideNav?(document.body.classList.add("is-embedded"),R=document.querySelector(".esri-header-barrier"),
R.parentNode.removeChild(R)):(this.navLinks=this.buildNavLinks(this,r),this.createGlobalNav(r.userInfo,K.customNavStructure));esri&&!esri.i18nBundle&&(esri.i18nBundle=I)}.bind(this));e.subscribe("account-menu/close",this.closeAccountMenu.bind(this));e.subscribe("portal-helpBase/update",this.updateHelpUrl.bind(this));e.subscribe("top-nav/update",this.updateMenu.bind(this))},closeAccountMenu:function(){this.updateComponent("header:menu:close",document.getElementById("esri-header-account-menu"))},updateHelpUrl:function(K){this.updateHeaderComponent({config:K})},
updateMenu:function(K){var R=r.self.portalProperties||{};R.topNav=K;r.self.portalProperties=R;this.navLinks=this.buildNavLinks(this,r);K=this.getNavStructure(r.userInfo,this.customNavStructure);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-desktop"),K.header.menus);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-mobile"),K.header.menus)},createClassificationBanner:function(K){var R=document.createElement("div"),W=document.createElement("div");
document.body.insertBefore(R,document.body.childNodes[0]);document.body.appendChild(W);new J.InfoBanner({bannerConfig:K,topContainer:R,bottomContainer:W});setTimeout(function(){var P=document.getElementById("esri-header-menus-content-mobile");P&&(P.style.height="calc(var(--esri-vh) - "+(56+R.clientHeight)+"px)")},1E3)},createPortalInstance:function(){var K=new l;(this.portal=r&&r.portal)?K.resolve(!0):k.getSelf(function(R){this.portal=new E.Portal({url:r.restBaseUrl.replace("http://","https://"),
self:m.clone(R)});d.once(this.portal,"load",function(W){this.portal.portalUser=this.portal.getPortalUser();F.isOrgUser=this.isOrgUser;F.portal=this.portal;F.getLicenseInfo().then(function(P){r.userInfo&&(r.userInfo=m.mixin(r.userInfo,F));this.portal.portalUser?D.checkAppAccess(this.portal.portalUrl,"arcgisonline").always(function(S){if(S=!(!S||!S.viewOnly))this.portal.portalUser=new C(m.mixin(this.portal.user,{cookie:this.getUserCookie(),credential:this.portal.portalUser.credential,portal:this.portal,
viewOnly:S}));K.resolve(!0)}.bind(this)):K.resolve(!0)}.bind(this))}.bind(this))}.bind(this));return K},createGlobalNav:function(K,R){R=this.getNavStructure(K,R);b.createHeader({targetElm:".esri-header-barrier",menuData:R});this.setupInlineSearch();this.userIsSignedIn?(this.setupAccountSwitcherLink(),this.setupSignOutLink(),this.setupNotifications(K),this.isOrgUser&&(r.self.isPortal||r.self.subscriptionInfo&&"active"===r.self.subscriptionInfo.state)&&(r.self.isPortal||(this.defaultNavStructure.header.apps=
this._getAppsLoadingJson(),this.updateAppLauncherComponent()),this.createAppLauncher())):this.setupSignInLink();this.addLegacyClasses()},addLegacyClasses:function(){if(this.legacy){var K=window.location.pathname.toLowerCase();if(-1!==K.indexOf("home.html")||-1===K.indexOf(".html"))g(".siteHeader").addClass("top-nav"),g(".-desktop .esri-header-menus-link,.esri-header-brand-text,.esri-header-menus-toggle,.esri-header-notifications-control,.esri-header-inlineSearch-control,.esri-header-account-control,.esri-header-apps-control").addClass("top-nav-link"),
g(".top-nav-link.-is-active").removeClass("-is-active").addClass("is-active")}},getNavStructure:function(K,R){K=(this.userCookie=this.userIsSignedIn&&this.getUserCookie())?this.getSignedInNavStructure(K,this.userCookie):this.getSignedOutNavStructure();return m.mixin(r.self.isPortal?this.modifyStructureForPortal(K):K,R||{})},getSignedOutNavStructure:function(){var K=this.showProductLinks()?["ArcGIS","pricing","map","scene","help"]:["home_link","gallery","map","scene","groups"];this.defaultNavStructure.header.menus=
[this.filterAndCreateLinks(K,I.siteHeader)];this.defaultNavStructure.header.brand.href=this.relativePath+(r.self.isPortal?"home.html":"../features/features.html");return this.defaultNavStructure},getSignedInNavStructure:function(K,R){K={name:K.fullName,id:K.username,group:"",image:this.getUserProfileImage(K.username,K.thumbnail,R.token)};R=this.isPublicAccount()?"ArcGIS overview pricing map scene groups myContent".split(" "):"home_link gallery map scene notebook groups myContent myAccount".split(" ");
this.defaultNavStructure.header.account.user=K;this.defaultNavStructure.header.menus=[this.filterAndCreateLinks(R,I.siteHeader)];this.defaultNavStructure.header.account.menus=this.filterAndCreateLinks("myProfile mySettings myEsri training trialDownload esriCommunity arcgisBlog help".split(" "),I.siteHeader);this.defaultNavStructure.header.brand.href=this.relativePath+(r.self.isPortal?"home.html":"../features/features.html");this.userIsSignedIn&&(this.defaultNavStructure.header.notifications=this._getDefaultNotifications());
return this.defaultNavStructure},modifyStructureForPortal:function(K){K.header.search.dialog.queryLabel=I.siteHeader.searchAgoEnterprise;return K},getFooterLinks:function(){this.i18n=m.mixin(I.siteFooter,I.common,I.supportPage.helpLabel);var K=r.footerLinks.reduce(function(R,W){var P=W.title.indexOf("${");P=-1<P?this._evalString(W.title,P):W.title;return"ArcGIS Marketplace"===W.title?r.self&&this.userIsSignedIn?R.concat({label:P,href:r.marketplaceUrl.replace("http://","https://")}):R:"contactUs"===
W.type?R.concat({label:P,href:this._constructContactUsUrl(W)}):"reportAbuse"===W.type?R.concat({label:P,href:this._constructReportAbuseUrl(W)}):W.url?R.concat({label:P,href:W.url}):R}.bind(this),[]);r.self&&r.self.portalProperties&&r.self.portalProperties.links&&r.self.portalProperties.links.contactUs&&r.self.portalProperties.links.contactUs.visible&&K.push({label:this.i18n.customContactUs,href:r.self.portalProperties.links.contactUs.url});return K},updateComponent:function(K,R,W){var P=document.createEvent("CustomEvent");
P.initCustomEvent(K,!0,!0,W);R.dispatchEvent(P)},updateAppLauncherComponent:function(K){this.updateComponent("header:update:apps",document.querySelector(".esri-header-apps"),this._appsJson(K))},updateHeaderComponent:function(K){r.self=K.config;this.navLinks=this.buildNavLinks(this,r);K=this.getNavStructure(r.userInfo,K.customNavStructure);this.updateComponent("header:update:account",document.querySelector(".esri-header-client").lastChild,K.header.account)},updateNotificationsComponent:function(K){this.defaultNavStructure.header.notifications.messages=
K;this.updateComponent("header:update:notifications",document.querySelector(".esri-header-notifications"),this._getDefaultNotifications(K));0===K.length&&this.updateComponent("header:menu:close",document.querySelector(".esri-header-notifications"))},updateSearchComponent:function(K,R){this.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-inlineSearch"),this._searchJson(K,R))},createAppLauncher:function(){this.portal.token=this.userCookie.token;this.appLauncher=
new n(this.portal);this.appLauncher.getApps({noStrings:!0}).then(function(K){if(K.primary.length||K.secondary.length)this.fixRelativeAppUrls(K.primary),this.fixRelativeAppUrls(K.secondary),this.updateAppLauncherComponent(K),document.querySelector(".esri-header-barrier").addEventListener("header:apps:reorder",function(R){this.appLauncher.setApps(JSON.stringify(R.detail.icons),!0)}.bind(this)),e.subscribe("appLauncher/app/updated",this._restartAppLauncherApp.bind(this)),e.subscribe("appLauncher/app/deleted",
this._restartAppLauncherApp.bind(this)),e.subscribe("appLauncher/restart",this._restartAppLauncherApp.bind(this,!0)),this.addLegacyClasses()}.bind(this))},fixRelativeAppUrls:function(K){if(-1!==location.pathname.indexOf("/home/notebook/")){var R=window.location.protocol+"//"+window.location.host+x.getHomeAppContext()+"/";(K||[]).forEach(function(W){W.url=(W.url||"").replace("../",R)})}},_restartAppLauncherApp:function(K){this.appLauncher&&this.appLauncher.refreshApps(K).then(function(R){this.updateAppLauncherComponent(R)}.bind(this))},
_appsJson:function(K){return m.mixin({label:I.appSwitcher.appLauncher,disableDragDrop:!1,loading:!K,text:{title:I.appSwitcher.appLauncher,confirm:I.appSwitcher.gotIt,dragAppsHere:I.appSwitcher.dragAppsHere,intro:I.appSwitcher.dragAndDropIntroText,removed:I.appSwitcher.noLongerAvailable,removedMessage:I.appSwitcher.removedApp,showMore:I.appSwitcher.showMore}},K)},_getAppsLoadingJson:function(K){return{label:I.appSwitcher.appLauncher,disableDragDrop:!1,loading:K}},_searchJson:function(K,R){return R&&
R.results.length?{minIconWidth:"44",suggestions:[this._generateSuggestionsSection({searchTerm:K,category:"item",data:R.results})]}:{suggestions:[]}},_disabledSearchJson:function(){return{minIconWidth:"44",disabled:!0,suggestions:[{hideHR:!0,links:[{text:I.search.error.wildCardSearchError,secondary:null,href:null,htmlIcon:'\x3cspan class\x3d"esri-header-inlineSearch-suggestion-error-icon"\x3e'+H["exclamation-mark-circle"]["16"]+"\x3c/span\x3e"}]}]}},_generateSuggestionsSection:function(K){return{hideHR:!0,
links:K.data.map(this._generateSuggestionLink.bind(this,K.category))}},_generateSuggestionLink:function(K,R,W){return m.mixin({text:R.title,secondary:this._getSecondaryOwnerText(K,R),href:this.relativePath+(K+".html?id\x3d")+R.id,iconSize:"group"===K?"28":"22"},R.icon||"group"!==K?{icon:R.icon}:{htmlIcon:this._getGroupIcon(R)})},_getGroupIcon:function(K){return(new G({portal:this.portal,group:K,size:"28",letterSize:"1",tooltipClass:"",cssClasses:"org-member-card__group-title esri-header-inlineSearch-suggestion-icon"})).domNode.outerHTML},
_getSecondaryOwnerText:function(K,R){return"item"===K?a.substitute(I.siteHeader.itemTypeBy,{itemType:R.type,owner:R.owner}):a.substitute(I.siteHeader.groupOwner,{owner:R.owner})},_generateSearchLink:function(K){return this._constructSecureBaseUrl("search.html?start\x3d1\x26sortOrder\x3dtrue\x26sortField\x3drelevance\x26"+K)},_constructSearchQ:function(K,R){return K+(R&&r.userInfo&&r.userInfo.orgId?" orgid:"+r.userInfo.orgId:"")},_getSuggestFilters:function(){return(r.self.id?'accountid:"'+r.self.id+
'"':"")+(r.viewQueries.none||"")},fetchSuggestionResults:function(K){K=K.substring(0,409).replace(/(\/)/g,"\\/").replace(/(\?)/g,"\\?");return w({url:r.restBaseUrl.replace("http://","https://")+"search/suggest",content:{suggest:K,filters:this._getSuggestFilters(),searchFields:"title",f:"json"},handleAs:"json",callbackParamName:"callback"})},fetchItemSearchResults:function(K){return w({url:r.restBaseUrl.replace("http://","https://")+"search",content:{q:this._constructSearchQ(K,!0),start:1,num:3,f:"json"},
handleAs:"json",callbackParamName:"callback"})},fetchGroupSearchResults:function(K){return w({url:r.restBaseUrl.replace("http://","https://")+"/community/groups",content:{q:this._constructSearchQ(K,!1),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})},mixinItemIcon:function(K){this.portal.portalUser&&!this.portal.portalUser.userRole&&(this.portal.portalUser.userRole=r.userRole);var R=new B(dojo.mixin(K,{portal:this.portal}));return m.mixin(K,{type:R.displayName,icon:r.baseUrl+
R.svgIconUrl32})},mixinGroupIcon:function(K){return m.mixin(K,{icon:K.thumbnail?this._constructRestUrlWithToken("community/groups/"+K.id+"/info/"+K.thumbnail):null})},_constructRestUrlWithToken:function(K){return this.portal.portalUrl+K+(this.userCookie?"?token\x3d"+this.userCookie.token:"")},_constructSecureBaseUrl:function(K){return r.baseUrl.replace("http://","https://")+K},buildNavLinks:function(K,R){var W=window.location.pathname.toLowerCase(),P=r.self&&r.self.portalProperties&&r.self.portalProperties.topNav||
{},S=P.gallery,L=P.map,aa=P.scene;P=P.groups;var ba=this.isOrgUser&&r.self&&r.userInfo.orgId===r.self.id,O=r.notebookLandingEnabled?"notebookhome.html":"notebook.html";return{myProfile:{href:this.relativePath+"user.html"},mySettings:{href:this.relativePath+"user.html#settings"},pricing:{href:this.relativePath+"../features/plans/pricing.html"},overview:{href:this.relativePath+"../features/features.html"},ArcGIS:{href:this.relativePath+(K.isPublicAccount()?"home.html":"../features/features.html")},
groups:{show:!P||"all"===P||"members"===P&&ba,href:this.relativePath+"groups.html",active:-1<W.indexOf("groups.html")},myContent:{href:this.relativePath+"content.html",active:-1<W.indexOf("content.html")},map:{show:F.isLicensed("arcgisWebApps")&&(!L||"all"===L||"members"===L&&ba||"mapCreators"===L&&ba&&r.userRole.canCreateItem()),href:this.relativePath+"webmap/viewer.html?useExisting\x3d1"},help:{href:K._getHelpUrl.bind(K),openInNewTab:!0},gallery:{show:"noOne"!==S&&(!S||"all"===S||"members"===S&&
ba)&&r.self.id,href:this.relativePath+"gallery.html",active:-1<W.indexOf("gallery.html")},home_link:{show:!K.isPublicAccount(),href:this.relativePath+"home.html",active:-1<W.indexOf("home.html")||0>W.indexOf(".html")},scene:{show:R.sceneViewerEnabled&&F.isLicensed("arcgisWebApps")&&(!aa||"all"===aa||"members"===aa&&ba||"sceneCreators"===aa&&ba&&r.userRole.canCreateItem()),href:this.relativePath+"webscene/viewer.html"},notebook:{show:A.notebookServerConfigured()&&r.userRole&&r.userRole.canCreateNotebooks(),
href:this.relativePath+"notebook/"+O,openInNewTab:!r.notebookLandingEnabled},myAccount:{show:K.canViewOrgUsers()&&K.orgPageRestrictionsDoNotApply(),href:this.relativePath+"organization.html",active:-1<W.indexOf("organization.html")},marketplace:{show:!K.isPublicAccount(),href:K._getMarketplaceUrl.bind(K)},features:{show:K.isPublicAccount()&&!r.self.isPortal,href:this.relativePath+"../features/features.html"},esriCommunity:{show:K.showEsriLinks(),href:K._getEsriCommunityUrl.bind(K),openInNewTab:!0},
myEsri:{show:K.showEsriLinks(),href:K._getMyEsriUrl.bind(K),openInNewTab:!0},arcgisBlog:{show:K.showEsriLinks(),href:"https://www.esri.com/arcgis-blog/arcgis-online/",openInNewTab:!0},training:{show:K.showEsriLinks(),href:K._getEsriTrainingUrl.bind(K),openInNewTab:!0},trialDownload:{show:K.subscriptionIsTrial(),href:K._getTrialDownloadUrl.bind(K),openInNewTab:!0}}},GlobalNavLink:{init:function(K,R){this.label=K;this.href=R.href?"function"===typeof R.href?R.href():R.href:"#";R.data&&(this.data=R.data);
R.active&&(this.active=R.active);R.openInNewTab&&(this.newContext=R.openInNewTab);return this}},filterAndCreateLinks:function(K,R){linkArr=[];K.forEach(function(W){var P=this.navLinks[W];!P||"show"in P&&!P.show||linkArr.push(this.createGlobalNavLink(R[W]||W,P))},this);return linkArr},createGlobalNavLink:function(K,R){return Object.create(this.GlobalNavLink).init(K,R)},getUserProfileImage:function(K,R,W){return R?r.restBaseUrl.replace("http://","https://")+"community/users/"+K+"/info/"+R+"?token\x3d"+
W:this.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")},getUserCookie:function(){return r.userInfo||null},getOrgSettings:function(){return x.request({url:r.restBaseUrl+"portals/self/settings",content:{f:"json"}})},setupSignInLink:function(){if(this.hideSignInLink())return g(".esri-header-account-control--signin")[0].classList.add("hide");g(".esri-header-account-control--signin").on("click",function(K){-1<window.location.href.indexOf("item.html")?window.location.href=r.baseUrl+
"signin.html?useLandingPage\x3dfalse\x26returnUrl\x3d"+window.location.href:window.location.href=r.baseUrl+"signin.html?useLandingPage\x3dtrue"})},setupSignOutAndAccountSwitcherLinks:function(){r.showAccountSwitcher&&dojo.addClass(g(".esri-header-account-signin-control.-switch"),"hide");g(".esri-header-account-control-logout").on("click",function(K){this._selectLogOut(K)}.bind(this));g(".esri-header-account-control.-switch").on("click",function(K){this._openSwitchAccounts(K)}.bind(this))},setupSignOutLink:function(){var K=
h("esri_auth");if((K=K?JSON.parse(K):{})&&"auth_tier"in K&&"web"===K.auth_tier.toLowerCase())return g(".esri-header-account-signin-control.-logout")[0].classList.add("hide");g(".esri-header-account-signin-control.-logout").on("click",function(R){this._selectLogOut(R)}.bind(this))},setupAccountSwitcherLink:function(){if("showAccountSwitcher"in r&&!r.showAccountSwitcher)return g(".esri-header-account-signin-control.-switch")[0].classList.add("hide");g(".esri-header-account-signin-control.-switch").on("click",
function(K){this._openSwitchAccounts(K)}.bind(this))},setupInlineSearch:function(){document.querySelector(".esri-header-barrier").addEventListener("header::search:typing",q(function(K){-1<K.detail.indexOf("*")?this.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-inlineSearch"),this._disabledSearchJson()):2<=K.detail.length&&this.fetchSuggestionResults(K.detail).then(m.hitch(this,function(R){R.results=R.results.map(this.mixinItemIcon.bind(this));this.updateSearchComponent(K.detail,
R)}))}.bind(this),280))},setupNotifications:function(K){v.fetchNotifications(K,this.portal).then(this.updateNotificationsComponent.bind(this));document.addEventListener("header:click:notifications:dismiss",function(R){v.deleteNotifications(K,R.detail).then(function(W){var P=W.filter(function(S){return S.success}).map(function(S){return S.notificationId});W=(this.defaultNavStructure.header.notifications.messages||[]).filter(function(S){return 0>P.indexOf(S.id)});this.updateNotificationsComponent(W)}.bind(this))}.bind(this))},
_getDefaultNotifications:function(K){return{label:I.notifications.label,dismissAllLabel:I.notifications.dismissAllLabel,dismissLabel:I.notifications.dismissLabel,emptyMessage:{image:{path:["M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"],viewBox:"0 0 32 32"},text:I.notifications.noNotifications},messages:K||[]}},_evalString:function(K,R){var W=K.indexOf("}",
R),P=K.substring(R+2,W);return K.substring(0,R)+eval("this."+P)+K.substring(W+1,K.length)},_constructContactUsUrl:function(K){K="mailto:"+K.email;K+="?subject\x3d"+a.substitute({appTitle:r.portalName||"ArcGIS.com"},"A comment about ${appTitle}");return K+="\x26body\x3d"+a.substitute("I have the following comment about the ${appTitle} Web site. %0AReferring page: ${referringPage} %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)",
{appTitle:r.portalName||"ArcGIS.com",referringPage:window.encodeURIComponent(location.href)})},_constructReportAbuseUrl:function(K){K="mailto:"+K.email+"?subject\x3dConcerns about an item";return K+="\x26body\x3d"+a.substitute("I have concerns about the following. %0AReferring page: ${referringPage} %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)",
{referringPage:window.encodeURIComponent(location.href)})},_selectLogOut:function(K){K.preventDefault();r.self.isPortal?this._standardLogOut():this._agolLogOut()},_agolLogOut:function(){h("esri_webmap","",{expires:-1,path:"/"});var K=(r.isDebug?r.baseUrl:r.baseUrl.replace("http://","https://"))+"pages/Account/manage_accounts.html#client_id\x3darcgisonline\x26signout\x3dtrue";window.location.href=K},_standardLogOut:function(){h("esri_webmap","",{expires:-1,path:"/"});var K=arcgisonline.sharing.util.getHttpUrl()+
"home.html";"private"===r.self.access&&(K=arcgisonline.sharing.util.getSecureUrl()+r.signin);"public"===r.self.access&&(K=(r.self.allSSL||this.usePortalSSL()?arcgisonline.sharing.util.getSecureUrl():arcgisonline.sharing.util.getHttpUrl())+"home.html");t.signout(K)},_openSwitchAccounts:function(){window.open(r.baseUrl+"pages/Account/manage_accounts.html#client_id\x3darcgisonline","_blank").focus()},relativeToExplicitUrl:function(K){r.cdnServerUrl=dojo.baseUrl.substring(0,dojo.baseUrl.indexOf("/js/"));
return r.cdnServerUrl.lastIndexOf("/")===r.cdnServerUrl.length-1?r.cdnServerUrl+K:r.cdnServerUrl+"/"+K},_getHelpUrl:function(){return r.self.isPortal?this._getPortalHelpUrl():r.self&&r.self.helpBase||"support.html"},_getPortalHelpUrl:function(){if(-1<r.self.helpBase.indexOf("enterprise.arcgis.com"))return r.self.helpBase+"portal/";var K=r.self.helpBase;return r.self.allSSL||"https:"===location.protocol||this.usePortalSSL()||"7443"===location.port?arcgisonline.sharing.util.getSecureUrl(location.protocol+
"//"+location.host)+K:K},_getEsriTrainingUrl:function(){return this.generateEsriLoginHandlerUrl(window.location.protocol+"//www.esri.com/training/arcgis-online-training")},_getMyEsriUrl:function(){return this.generateEsriLoginHandlerUrl(r.myEsriLink)},_getEsriCommunityUrl:function(){return this.generateEsriLoginHandlerUrl(r.esriCommunityLink)},_getMarketplaceUrl:function(){var K=this.getDevEnviroment();return location.protocol+"//marketplace"+(K?K+"ext":"")+".arcgis.com"},_getTrialDownloadUrl:function(){var K=
{"pt-br":1,"pt-pt":1,"zh-cn":1,"zh-hk":1,"zh-tw":1},R=(r.userInfo&&r.userInfo.culture||r.self&&r.self.culture||dojoConfig.locale||"en").toLowerCase();K={nl:1}[R]?"en":R in K?R:R.split("-")[0].toLowerCase();return r.learnArcGIS+"/"+K+"/trial"},generateEsriLoginHandlerUrl:function(K){var R=this.getDevEnviroment();R="https://accounts"+(R?"dev"===R?"-dev":"-stg":"")+".esri.com/";var W="\x26authBaseUrl\x3d"+x.getSecureUrl(r.restBaseUrl.replace("/sharing/rest/",""));return R+"LoginHandler/switchuser?username\x3d"+
(r.userInfo.username+"\x26redirect_uri\x3d"+K+W)},getDevEnviroment:function(){var K=r.self.portalHostname;return-1!==K.indexOf("dev")?"dev":-1!==K.indexOf("qa")?"qa":null},_getOriginOfUrl:function(K){var R=window.location;K=K?K+":":R.protocol;return K+"//"+R.hostname+(R.port?":"+R.port:"")+"/"},hideSignInLink:function(){return r.self.isPortal&&"singletenant"===r.self.portalMode&&h("esri_auth_guest")&&"7443"!==location.port},showProductLinks:function(){return!r.self.id&&!r.self.access&&!r.self.isPortal},
isPublicAccount:function(){return!r.self.urlKey&&!r.self.isPortal&&!!r.userInfo},canViewOrgUsers:function(){return r.userRole&&r.userRole.canViewOrgUsers()},orgPageRestrictionsDoNotApply:function(){var K=r.userInfo;return r.restrictOrganizationPageToAdmin?!K.accountId||K.role&&"account_admin"===K.role&&!K.roleId:!0},showEsriLinks:function(){return!r.self.isPortal&&r.userInfo&&"both"===r.userInfo.userType},subscriptionIsTrial:function(){return!r.self.isPortal&&r.self.subscriptionInfo&&("Trial"===r.self.subscriptionInfo.type||
"Trial Press"===r.self.subscriptionInfo.type)},usePortalSSL:function(){return(!1===r.isMultiTenant||arcgisonline.sharing.util.isPortal())&&r.self&&r.self.portalHostname&&!r.self.portalHostname.match(/:7080\//)&&80!==r.self.httpPort&&443!==r.self.httpsPort&&"https:"===location.protocol},defaultNavStructure:{header:{theme:"web",brand:{label:"ArcGIS Online",href:"../features/features.html",brandText:"ArcGIS"},menus:[[{label:"Features",href:"../features/features.html"},{label:"Plans",href:"../features/plans/pricing.html"},
{label:"Map",href:this.relativePath+"webmap/viewer.html?useExisting\x3d1"},{label:"Scene",href:"webscene/viewer.html"},{label:"Help",href:"http://doc.arcgis.com/en/arcgis-online/"}]],search:{label:I.common.search,hide:"search.html"===location.pathname.split("/")[2],inline:!0,dialog:{prefix:"esri-header-search-dialog",action:r.baseUrl+"search.html",label:"ArcGIS Online",submitLabel:I.common.search,cancelLabel:I.common.cancel,queryLabel:I.siteHeader.searchAgo}},account:{label:I.siteHeader.yourProfile,
controls:{signin:I.siteHeader.signIn,signout:I.siteHeader.signOut,switch:I.siteHeader.switchAccounts},menus:[{label:"profile \x26 settings",href:this.relativePath+"user.html"},{label:"my esri",href:"#",data:{agoMethod:"goMyesri"}},{label:"training",href:"#",data:{agoMethod:"goTraining"}},{label:"community \x26 forums",href:"#",data:{agoMethod:"goEsriCommunity"}},{label:"help",href:"http://doc.arcgis.com/en/arcgis-online/"}]}}}}})},"dojo/debounce":function(){define([],function(){return function(b,
y){var q;return function(){q&&clearTimeout(q);var a=this,h=arguments;q=setTimeout(function(){b.apply(a,h)},y)}}})},"arcgisonline/sharing/dijit/Webworker/_AppLauncher":function(){define("arcgisonline/esriGeowConfig dojo/_base/declare dojo/on dojo/_base/lang dojo/Deferred dojo/promise/all dojo/json dojo/sniff esri/request arcgisonline/sharing/util arcgisonline/pages/portal/LicenseInfo arcgisonline/pages/components/ManageBlockedApps/blocked-apps-service require".split(" "),function(b,y,q,a,h,e,g,f,m,
l,d,c,k){return y("arcgisonline.sharing.dijit.Webworker._AppLauncher",null,{appIconPath:"/css/images/app-icons/",basePath:k.toUrl("arcgisonline/sharing/dijit"),_browserIsEdge:!1,constructor:function(t){this.inherited(arguments);this._portal=t;this._portalUser=this._portal.portalUser||this._portal.user;this._self=b.self||t;this.userToken=t.token;b.userInfo&&b.userInfo.isLicensed||this.fetchAndSetupLicenseInfo();this.imgDir=this.basePath+this.appIconPath;this.appSwitcherInConfig=b.appSwitcherConfigItemQuery?
!0:null;this.__displayIntro=!1},getApps:function(t){t&&t.noStrings||!dojo.i18n||!dojo.i18n.getLocalization("arcgisonline","arcgisonline")||(this.i18n=dojo.i18n.getLocalization("arcgisonline","arcgisonline").appSwitcher,this._clearText=dojo.i18n.getLocalization("arcgisonline","arcgisonline").configAGOLUtilServices.clear);return this.queryItems().then(a.hitch(this,function(n){this.appSwitcherConfig=n.results[0];return this.refreshApps()}))},refreshApps:function(t){return this._queryItemsAndInitApps(this.appSwitcherConfig,
null,null,t).then(a.hitch(this,function(n){return(new h).resolve({provisionedListings:n.provisionedListings,willQueryForItems:n.willQueryForItems})})).then(a.hitch(this,function(n){return this._init(n.provisionedListings,n.willQueryForItems)}))},setApps:function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(u){return(new h).resolve({success:!1})}if(this._appArraysAreValid(t.primaryApps,t.secondaryApps)){var n=t.revisions||{};return this._saveAppOrderToUserProperties(this.populateDataIdAttributes(t.primaryApps,
n.targetUid,n.isNew&&"isNew",n.targetValue||!1),this.populateDataIdAttributes(t.secondaryApps))}return(new h).resolve({success:!1})},_appArraysAreValid:function(t,n){return t&&n&&Array.isArray(t)&&Array.isArray(n)?t.length+n.length>=this._minNumberOfAppsToSave:!1},fetchAndSetupLicenseInfo:function(){var t=new h;d.isOrgUser=this._portalUser&&this._portalUser.orgId;d.portal=this._portal;d.portal.user=d.portal.user||this._portalUser;return d.getLicenseInfo().then(function(){this._portalUser&&(b.userInfo=
a.mixin(this._portalUser,d));return t.resolve(!0)}.bind(this))},queryItems:function(t,n){return this.portalQueryItems(b.appSwitcherConfigItemQuery,1)},_queryItemsAndInitApps:function(t,n,u,x){t.itemDataUrl=this.formatUrlWithToken(this._portal.portalUrl+"content/items/"+t.id+"/data");this._browserInUse=this._getBrowserInUse();this.__changedApp=n&&u?n:null;var A=!this._cookieForQueryingItemsExists(),z=new h;if(this._portalUser&&this._portalUser.orgId)return e({config:m({url:t.itemDataUrl,content:{f:"json"}}),
marketplace:this._getMarketPlaceProvisionedListings(x),preferences:this._getUserProperties(),customOrgApps:this._getApprovedApps()}).then(a.hitch(this,function(E){this.userProperties=E.preferences.properties||{};this.userApps=E.config.appSwitcher;this._self.isPortal||this.userApps.apps.unshift(this._getAgoApp());this.approvedApps=E.customOrgApps.approvedApps||[];this.userProperties.appLauncher||(A=!1,this.__displayIntro=!0);return z.resolve({provisionedListings:E.marketplace,willQueryForItems:A})}))},
_filterBlockedApps:function(t){return t.filter(function(n){return!(this._blockedApps&&this._blockedApps.some(function(u){return n.itemId&&n.itemId===u.itemid||n.title&&n.title===u.title}))}.bind(this))},_init:function(t,n,u,x){return this._getBlockedApps().then(function(){return this._getLicensedApps(t,n)}.bind(this)).then(a.hitch(this,function(A){this._appDictionary=A[1];var z=new h;if(this.userProperties.appLauncher&&this.userProperties.appLauncher.primary&&this.userProperties.appLauncher.secondary)return this._queryAppItemsForChanges(this.approvedApps,
n).then(a.hitch(this,function(){this._newAppDictionary=a.clone(this._appDictionary);this.primaryApps=this.userProperties.appLauncher.primary.reduce(this._populateAppIdentifiers.bind(this),[]);this.secondaryApps=this.userProperties.appLauncher.secondary.reduce(this._populateAppIdentifiers.bind(this),[]);this.primaryApps=this._filterBlockedApps(this.primaryApps);this.secondaryApps=this._filterBlockedApps(this.secondaryApps);for(var E in this._newAppDictionary)this._newAppDictionary[E].canAccess&&(this._newAppDictionary[E].isNew=
!0,this._appDictionary[E]=this._newAppDictionary[E],this.primaryApps.push(this._newAppDictionary[E]));this._minNumberOfAppsToSave=this.primaryApps.concat(this.secondaryApps).filter(function(w){return w.canAccess}).length;return z.resolve(this._getResponseObject(this))}));this.primaryApps=A[0].slice().sort(function(E,w){return E.label<w.label?-1:1});this.primaryApps=this._filterBlockedApps(this.primaryApps);this.secondaryApps=[];this._minNumberOfAppsToSave=this.primaryApps.filter(function(E){return E.canAccess}).length;
return z.resolve(this._getResponseObject(this))}))},_getResponseObject:function(){return a.mixin(this.i18n?{text:this.getAppLauncherStrings()}:{},{primary:this.primaryApps,secondary:this.secondaryApps,ieVersion:this._browserInUse,highContrast:f("highcontrast"),displayIntro:this.__displayIntro})},getAppLauncherStrings:function(t){return{clear:this._clearText,confirm:this.i18n.gotIt,intro:this.i18n.dragAndDropIntroText,dragAppsHere:this.i18n.dragAppsHere,removed:this.i18n.noLongerAvailable,removedMessage:this.i18n.removedApp,
showMore:this.i18n.showMore}},_initFromLocalStorage:function(t){this.primaryApps=t.primaryApps;this.secondaryApps=t.secondaryApps;this._initAppSwitcher();this._refreshAppSwitcherIcons()},_getBlockedApps:function(){return e({blockedApps:c.default.getBlockedApps(this._portal),blockedConfig:this._portal.queryItems(b.blockedAppsConfigItemQuery,!0)}).then(function(t){if(t.blockedConfig&&t.blockedConfig.results&&t.blockedConfig.results.length){var n=this.formatUrlWithToken(this._portal.portalUrl+"content/items/"+
t.blockedConfig.results[0].id+"/data");return m({url:n,content:{f:"json"}}).then(function(u){if(u){var x=u.blockedApps||[];u=t.blockedApps||[];this._blockedApps=[];u.forEach(function(A){var z=x.filter(function(E){return E.clientid===A})[0];z&&this._blockedApps.push(z)}.bind(this))}return this._blockedApps}.bind(this))}return[]}.bind(this))},_getLicensedApps:function(t,n){for(var u={},x={},A=this._getAppExceptions(),z=this._getExcludedProvisionedListings(),E=[],w=new h,D=this.userApps.apps.length,
r=0;r<D;r++){var v=this.userApps.apps[r],B=v.itemId||v.title,C=!0,F=this._blockedApps&&this._blockedApps.some(function(G){return v.itemId&&v.itemId===G.itemid||v.title&&v.title===G.title});u[B]=1;x[B]=v;if(!(F||l.isArcGISEnterpriseOnKubernetes()&&!1===v.supportsKubernetes||A[v.title]&&!A[v.title].hasAccess(v.title)))if(v.privileges&&0!==v.privileges.length||v.isLicensed)if(this._portalUser.userLicenseTypeId&&"storytellerut"===this._portalUser.userLicenseTypeId.toLowerCase()&&v.label&&"storymaps"===
v.label.toLowerCase())x[B].canAccess=!0,E.push(this._modifySystemAppForView(v,B));else{if(v.privileges&&0<v.privileges.length&&this._portalUser.privileges){for(F=0;F<v.privileges.length;F++)if(0>this._portalUser.privileges.indexOf(v.privileges[F])){C=!1;break}if(!v.isLicensed&&C){x[B].canAccess=!0;E.push(this._modifySystemAppForView(v,B));continue}}if(v.isLicensed&&C)for(C=0;C<t.length;C++)if(B===t[C].itemId||B===t[C].title){x[B].canAccess=!0;E.push(this._modifySystemAppForView(v,B));break}}else x[B].canAccess=
!0,E.push(this._modifySystemAppForView(v,B))}t.forEach(a.hitch(this,function(G){"Web Mapping Application"===G.type&&!z[G.clientId]&&!u[G.itemId]&&G.url&&G.title&&!u[G.title]&&0>G.typeKeywords.indexOf("hideFromAppSwitcher")&&(G=this._modifyPartnerAppForView(G),x[G.itemId]=G,E.push(G))}));return w.resolve([this.approvedApps.map(a.hitch(this,function(G){var H=a.mixin(G.appProperties,{itemId:G.itemId,webMappingApp:!0,approvedApp:!0,canAccess:!n});x[G.itemId]=H;return this._modifyWebAppForView(H)})).concat(E),
x])},_getApprovedApps:function(t){return this.requestWithAuth(b.restBaseUrl.replace("http://","https://")+"portals/"+this._portalUser.orgId+"/approvedApps",{f:"json",returnAllApps:t})},_populateAppIdentifiers:function(t,n,u){(u=Object.keys(this._appDictionary).map(function(x){return this._appDictionary[x]}.bind(this)).filter(function(x){return x.itemId===n.uid||x.title===n.uid})[0])&&!this._appDictionary[n.uid]&&(n.uid=u.itemId||u.title);if(u&&u.hasBeenPopulated)return t;u?((n.hasChanged||u.hasChanged||
!u.canAccess&&!u.ignoreNoAccess)&&this._isAdmin()&&(n.hasChanged||n.ignoreNoAccess||(this.__saveOnLoad=!0),this._appDictionary[n.uid].hasChanged=!0,this._appDictionary[n.uid].ignoreNoAccess=n.ignoreNoAccess),n.isNew&&(this._appDictionary[n.uid].isNew=!0),delete this._newAppDictionary[n.uid]):(u=n,u.canAccess=!1,u.itemId=n.uid,this._appDictionary[n.uid]=u);this._appDictionary[n.uid].hasBeenPopulated=!0;t.push(u);return t},populateDataIdAttributes:function(t,n,u,x){return t.map(function(A,z){var E=
this._appDictionary[A],w={label:E.label,uid:A};E.isNew&&(w.isNew=!0);E.hasChanged&&!E.ignoreNoAccess&&(w.hasChanged=!0);n&&A===n&&(t[z-1]===A&&(this.__duplicateValueIndex=z),x?(this._appDictionary[A][u]=x,w[u]=x):(delete this._appDictionary[A][u],delete w[u]));E.canAccess&&E.ignoreNoAccess&&delete w.ignoreNoAccess;return w},this)},_getImgSrcForWebMappingApp:function(t){return t.icon?b.restBaseUrl+"portals/self/resources/"+t.icon+"?token\x3d"+this.userToken:"https://"+this._self.portalHostname+"/sharing/rest/content/items/"+
t.itemId+"/resources/"+t.appSwitcher.image+"?token\x3d"+this.userToken},_modifySystemAppForView:function(t,n){t.image?t.image=this.imgDir+t.image:t.placeHolderIcon=this.imgDir+"svg-app-icon.svg";t.url&&0===t.url.indexOf("../")&&(t.url=location.protocol+"//"+(this._portal.urlKey?this._portal.urlKey+"."+this._portal.customBaseUrl:this._self.portalHostname)+t.url.substring(2,t.url.length));delete t.isLicensed;delete t.privileges;t.itemId=n;return t},_modifyWebAppForView:function(t){t.appSwitcher&&t.appSwitcher.image||
t.icon?t.image=this._getImgSrcForWebMappingApp(t):t.placeHolderIcon=this.imgDir+"svg-app-circle.svg";t.abbr=t.appSwitcher&&t.appSwitcher.abbr||t.abbreviation;delete t.abbreviation;delete t.appSwitcher;delete t.approvedApp;delete t.webMappingApp;return t},_modifyPartnerAppForView:function(t){t.appSwitcher=t.properties&&t.properties.appSwitcher;return{abbr:t.appSwitcher&&t.appSwitcher.abbr||t.abbreviation,itemId:t.itemId,canAccess:!0,webMappingApp:!0,image:t.appSwitcher&&t.appSwitcher.image||t.icon?
this._getImgSrcForWebMappingApp(t):null,label:t.title||t.label,url:t.url,placeHolderIcon:t.placeHolderIcon||this.imgDir+"svg-app-circle.svg"}},_saveAppOrderToUserProperties:function(t,n){this.userProperties.appLauncher||(this.userProperties.appLauncher={});if(JSON.stringify(this.userProperties.appLauncher.primary)!==JSON.stringify(t)||JSON.stringify(this.userProperties.appLauncher.secondary)!==JSON.stringify(n))return this.userProperties.appLauncher.primary=t,this.userProperties.appLauncher.secondary=
n,this._updateUserProperties(this.userProperties)},_getUserProperties:function(){return this.requestWithAuth(b.restBaseUrl+"community/users/"+this._portalUser.username+"/properties",{f:"json"})},_getMarketPlaceProvisionedListings:function(t){var n=new h;return!t&&b.userInfo&&b.userInfo.provisionedListings?n.resolve(b.userInfo.provisionedListings):this.fetchAllResources(this._portal.portalUrl+"community/users/"+this._portalUser.username+"/provisionedListings",{returnAppClientIds:!0,returnAllProvisions:!0},
"provisionedListings")},_updateUserProperties:function(t){t=a.mixin({f:"json",properties:g.stringify(t)},this._portalUser?{token:this.userToken}:{});return m({url:b.restBaseUrl+"community/users/"+this._portalUser.username+"/setProperties",content:t},{usePost:!0})},_getExcludedProvisionedListings:function(){var t={opsdashboard:1,arcgisWebApps:1,Workforce:1,geoplanner:1,webappbuilder:1,HubforArcGIS:1,appstudio:1,survey123:1,storymaps:1,mapsForOffice:1,mapsForO365:1,mapsForSharePoint:1};this._self.isPortal&&
(t.arcgisonline=1);return t},_getAppExceptions:function(){return{"Open Data":{hasAccess:this._userHasAccessToOpenData.bind(this)},AppStudio:{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},"ArcGIS Velocity":{hasAccess:this._userHasAccessToAnalyticsForIoT.bind(this)},"ArcGIS Hub":{hasAccess:this._hasLicense.bind(this,"HubforArcGIS")},"ArcGIS Enterprise Sites":{hasAccess:this._userHasAccessToSites.bind(this)},"ArcGIS Experience Builder":{hasAccess:function(t){return this._isInPortalConfig(t)}.bind(this)},
"ArcGIS StoryMaps":{hasAccess:function(t){return this._isInPortalConfig(t)}.bind(this)},"ArcGIS QuickCapture Web Designer":{hasAccess:function(t){return this._isInPortalConfig(t)&&this._hasLicense("arcgisWebApps")}.bind(this)},"ArcGIS Collector":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Field Maps":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Dashboards":{hasAccess:function(t){return b.showCreateDashboard&&this._isInPortalConfig(t)&&this._hasLicense("opsdashboard")}.bind(this)},
"ArcGIS Solutions":{hasAccess:function(){return!this._self.isPortal||b.solutionsEnabled}.bind(this)},"ArcGIS Workforce":{hasAccess:function(t){return!this._self.isPortal||this._isInPortalConfig(t)}.bind(this)},"Map Viewer Beta":{hasAccess:this._userHasAccessToMapViewer.bind(this)},"Ortho Maker":{hasAccess:this._userHasAccessToOrthoMaker.bind(this)},Notebook:{hasAccess:this._hasAccessToNotebooks.bind(this)},"Story Maps":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},Survey123:{hasAccess:this._hasLicense.bind(this,
"survey123")},"Track Viewer":{hasAccess:this._userHasAccessToTrackViewer.bind(this)}}},_hasAccessToNotebooks:function(t){return this._notebookServerConfigured()&&this._isInPortalConfig(t)&&this._canCreateNotebooks()},_notebookServerConfigured:function(){return this._self.isPortal?b.notebookServerEnabled&&this._self.supportsHostedNotebooks:b.notebookServerEnabled},_canCreateNotebooks:function(){return(this._portalUser.privileges||[]).length?this._portalUser.privileges.some(function(t){return"premium:publisher:createNotebooks"===
t}):!1},_isInPortalConfig:function(t){return!this._self.isPortal||b.showInAppLauncher&&-1!==b.showInAppLauncher.indexOf(t)},_userHasAccessToMapViewer:function(){var t=this._self.isPortal&&this._self.portalProperties&&!1===this._self.portalProperties.newMapViewerEnabled;return b.newMapViewerEnabled&&!t&&this._hasLicense("arcgisWebApps")},_userHasAccessToOpenData:function(){return this._self&&this._self.portalProperties&&(!this._self.portalProperties.openData||this._self.portalProperties.openData&&
!this._self.portalProperties.openData.enabled)?!1:this._hasLicense("HubforArcGIS")},_userHasAccessToAnalyticsForIoT:function(){var t=["portal:publisher:publishFeeds","portal:publisher:publishRealTimeAnalytics","portal:publisher:publishBigDataAnalytics"],n=(this._portalUser.privileges||[]).some(function(x){return-1<t.indexOf(x)}),u=this._hasLicense("analytics4IoT");return n&&u},_userHasAccessToSites:function(t){return this._isInPortalConfig(t)&&this._hasLicense("HubforArcGIS")},_userHasAccessToCollectorWeb:function(t){return this._isInPortalConfig(t)},
_userHasAccessToOrthoMaker:function(){return this._self&&this._self.helperServices&&this._self.helperServices.rasterAnalytics&&this._self.helperServices.orthoMapping&&this._isInPortalConfig("Ortho Maker")},_userHasAccessToTrackViewer:function(){return this._self&&this._self.helperServices&&this._self.helperServices.locationTracking&&b.trackViewerEnabled&&this._isInPortalConfig("Track Viewer")},_hasLicense:function(t){return b.userInfo&&b.userInfo.isLicensed?b.userInfo.isLicensed(t):!0},_getAgoApp:function(){return{image:"arcgis-online.png",
label:"ArcGIS Online",title:"ArcGIS Online",url:this.userProperties.landingPage?b.baseUrl+this.userProperties.landingPage.url:this._portalUser.isOrgAdmin?"organization.html":"home.html"}},_getOriginOfUrl:function(t){t=t||window.location;return t.protocol+"//"+t.hostname+(t.port?":"+t.port:"")},_getNewAppIconFromAppIdAndProperties:function(t,n){if(!this._appDictionary[t])return n=a.mixin(JSON.parse(n),{itemId:t,webMappingApp:!0,approvedApp:!0,canAccess:!0,isNew:!0}),this._appDictionary[t]=n},_queryAppItemsForChanges:function(t,
n){var u=new h,x=b.restBaseUrl+"search?";if(!n||!t||!t.length)return u.resolve({success:!0});x=x+"f\x3djson\x26num\x3d100\x26q\x3d id:("+(t.map(function(A){return'"'+A.itemId+'"'}).join(" OR ")+")");return this.requestWithAuth(x,{f:"json"}).then(a.hitch(this,function(A){A.results&&0<A.results.length&&A.results.forEach(function(z){var E=this._appDictionary[z.id];E.canAccess=1;E.hasChanged=E.url!==z.url?z.url:0},this);return u.resolve({success:!0})}))},_getAppsFromLocalStorage:function(){if(!this.__localStorageIsAvailable)return!1;
var t=localStorage.getItem("APSW-primary"),n=localStorage.getItem("APSW-secondary");return t?{primaryApps:t,secondaryApps:n}:!1},_saveApssToLocalStorage:function(t,n){this.__localStorageIsAvailable&&(localStorage.setItem("APSW-primary",JSON.stringify(t)),localStorage.setItem("APSW-secondary",JSON.stringify(n)))},_cookieForQueryingItemsExists:function(){var t=dojo.cookie("APSW-query")&&JSON.parse(dojo.cookie("APSW-query"));if(t&&t.expires>(new Date).setHours((new Date).getHours()))return!0;t=JSON.stringify({expires:(new Date).setHours((new Date).getHours()+
5)});dojo.cookie("APSW-query",t,{path:"/",domain:document.domain});return!1},requestWithAuth:function(t,n){return m({url:t,content:this.userToken?a.mixin(n,{token:this.userToken}):n})},fetchAllResources:function(t,n,u){var x=new h,A=1,z=[],E,w,D,r;n=n?a.mixin(n,{f:"json",token:this.userToken}):{f:"json",token:this.userToken};u=u||"results";n.start=A;n.num||(n.num=100);m({url:t,content:n}).then(function(v){if(v&&v[u]){z=z.concat(v[u]);A=v.nextStart;E=v.total-z.length;w=Math.ceil(E/100);D=[];for(r=
0;r<w;r++)n.start=A+100*r,D.push(l.request({url:t,content:n}));e(D).then(function(B){B.forEach(function(C){z=z.concat(C[u])});x.resolve(z)},function(B){x.reject(B)})}else x.resolve(z)},function(v){x.reject(v)});return x},_isAdmin:function(){return this._portalUser.role&&("org_admin"===this._portalUser.role||"account_admin"===this._portalUser.role)},portalQueryItems:function(t,n){t={num:n||10,start:0,sortField:"title",sortOrder:"asc",f:"json",q:t};n="";n=this._portal.urlKey?"https://"+this._portal.urlKey+
"."+this._portal.customBaseUrl+"/sharing/rest/search":this._portal.url+"search";return this.requestWithAuth(n,t)},useSSL:function(t,n){if(this._self.isPortal){var u=this.getLocation(n);if(-1<this._self.portalHostname.toLowerCase().indexOf(u.hostname.toLowerCase())&&u.port&&"80"!==u.port&&"443"!==u.port)return n=u.pathname,n=0===n.indexOf("/")?n:"/"+n,this._self.allSSL||-1<t.indexOf("https:")?"https://"+u.hostname+(this._self.httpsPort&&"443"!==this._self.httpsPort?":"+this._self.httpsPort:"")+n+u.search:
"http://"+u.hostname+(this._self.httpPort&&"80"!==this._self.httpPort?":"+this._self.httpPort:"")+n+u.search}return-1!==t.indexOf("https:")||this._self.allSSL?n.replace("http:","https:"):n},getLocation:function(t){var n=document.createElement("a");n.href=t;return{protocol:n.protocol,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search,hash:n.hash,host:n.host}},formatUrlWithToken:function(t){var n=this.userToken;return-1!==t.indexOf("null")?null:this.useSSL(window.location.protocol,
n?t+(-1!==t.indexOf("?")?"\x26":"?")+("token\x3d"+n):t)},_checkIfLocalStorageIsAvailable:function(){if("object"===typeof localStorage)try{return localStorage.setItem("testLocalStorage",1),localStorage.removeItem("testLocalStorage"),!0}catch(t){return!1}},_getBrowserInUse:function(){return 10>=f("ie")||6<f("trident")?"ie11":f("edge")?"edge":null}})})},"arcgisonline/sharing/dijit/InfoBanner":function(){define("require exports tslib dijit/_WidgetBase arcgis-components/wrappers/InfoBanner arcgisonline/tsutils/declareDecorator".split(" "),
function(b,y,q,a,h,e){a=q.__importDefault(a);e=q.__importDefault(e);return function(){function g(f,m){}g.prototype.postCreate=function(){this.inherited(arguments);var f={bannerConfig:this.banner};"bottom"===this.region?f.bottomContainer=this.domNode:f.topContainer=this.domNode;new h.InfoBanner(f)};return g=q.__decorate([e.default(a.default)],g)}()})},"arcgis-components/wrappers/InfoBanner":function(){define(["../Component","../InfoBanner/index"],function(b,y){return function(q){function a(e){if(h[e])return h[e].exports;
var g=h[e]={i:e,l:!1,exports:{}};return q[e].call(g.exports,g,g.exports,a),g.l=!0,g.exports}var h={};return a.m=q,a.c=h,a.d=function(e,g,f){a.o(e,g)||Object.defineProperty(e,g,{enumerable:!0,get:f})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,g){if((1&g&&(e=a(e)),8&g)||4&g&&"object"==typeof e&&e&&e.__esModule)return e;var f=Object.create(null);if(a.r(f),
Object.defineProperty(f,"default",{enumerable:!0,value:e}),2&g&&"string"!=typeof e)for(var m in e)a.d(f,m,function(l){return e[l]}.bind(null,m));return f},a.n=function(e){var g=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(g,"a",g),g},a.o=function(e,g){return Object.prototype.hasOwnProperty.call(e,g)},a.p="",a(a.s=825)}({0:function(q,a,h){function e(t,n){function u(){this.constructor=t}c(t,n);t.prototype=null===n?Object.create(n):(u.prototype=n.prototype,new u)}function g(t,
n){var u={},x;for(x in t)Object.prototype.hasOwnProperty.call(t,x)&&0>n.indexOf(x)&&(u[x]=t[x]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var A=0;for(x=Object.getOwnPropertySymbols(t);A<x.length;A++)0>n.indexOf(x[A])&&Object.prototype.propertyIsEnumerable.call(t,x[A])&&(u[x[A]]=t[x[A]])}return u}function f(t,n,u,x){var A,z=arguments.length,E=3>z?n:null===x?x=Object.getOwnPropertyDescriptor(n,u):x;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(t,
n,u,x);else for(var w=t.length-1;0<=w;w--)(A=t[w])&&(E=(3>z?A(E):3<z?A(n,u,E):A(n,u))||E);return 3<z&&E&&Object.defineProperty(n,u,E),E}function m(t,n,u,x){return new (u||(u=Promise))(function(A,z){function E(r){try{D(x.next(r))}catch(v){z(v)}}function w(r){try{D(x.throw(r))}catch(v){z(v)}}function D(r){var v;r.done?A(r.value):(v=r.value,v instanceof u?v:new u(function(B){B(v)})).then(E,w)}D((x=x.apply(t,n||[])).next())})}function l(t,n){function u(D){return function(r){return function(v){if(x)throw new TypeError("Generator is already executing.");
for(;w;)try{if(x=1,A&&(z=2&v[0]?A.return:v[0]?A.throw||((z=A.return)&&z.call(A),0):A.next)&&!(z=z.call(A,v[1])).done)return z;switch(A=0,z&&(v=[2&v[0],z.value]),v[0]){case 0:case 1:z=v;break;case 4:return w.label++,{value:v[1],done:!1};case 5:w.label++;A=v[1];v=[0];continue;case 7:v=w.ops.pop();w.trys.pop();continue;default:if(!(z=w.trys,(z=0<z.length&&z[z.length-1])||6!==v[0]&&2!==v[0])){w=0;continue}if(3===v[0]&&(!z||v[1]>z[0]&&v[1]<z[3]))w.label=v[1];else if(6===v[0]&&w.label<z[1])w.label=z[1],
z=v;else if(z&&w.label<z[2])w.label=z[2],w.ops.push(v);else{z[2]&&w.ops.pop();w.trys.pop();continue}}v=n.call(t,w)}catch(B){v=[6,B],A=0}finally{x=z=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([D,r])}}var x,A,z,E,w={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]};return E={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E}function d(){for(var t=0,n=0,u=arguments.length;n<u;n++)t+=arguments[n].length;
t=Array(t);var x=0;for(n=0;n<u;n++)for(var A=arguments[n],z=0,E=A.length;z<E;z++,x++)t[x]=A[z];return t}h.d(a,"d",function(){return e});h.d(a,"a",function(){return k});h.d(a,"f",function(){return g});h.d(a,"c",function(){return f});h.d(a,"b",function(){return m});h.d(a,"e",function(){return l});h.d(a,"g",function(){return d});var c=function(t,n){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,x){u.__proto__=x}||function(u,x){for(var A in x)x.hasOwnProperty(A)&&(u[A]=x[A])})(t,
n)},k=function(){return(k=Object.assign||function(t){for(var n,u=1,x=arguments.length;u<x;u++)for(var A in n=arguments[u])Object.prototype.hasOwnProperty.call(n,A)&&(t[A]=n[A]);return t}).apply(this,arguments)}},10:function(q,a){q.exports=b},128:function(q,a){a=function(){return this}();try{a=a||(new Function("return this"))()}catch(h){"object"==typeof window&&(a=window)}q.exports=a},145:function(q,a){function h(){throw Error("setTimeout has not been defined");}function e(){throw Error("clearTimeout has not been defined");
}function g(A){if(c===setTimeout)return setTimeout(A,0);if((c===h||!c)&&setTimeout)return c=setTimeout,setTimeout(A,0);try{return c(A,0)}catch(z){try{return c.call(null,A,0)}catch(E){return c.call(this,A,0)}}}function f(){u&&t&&(u=!1,t.length?n=t.concat(n):x=-1,n.length&&m())}function m(){if(!u){var A=g(f);u=!0;for(var z=n.length;z;){t=n;for(n=[];++x<z;)t&&t[x].run();x=-1;z=n.length}t=null;u=!1;(function(E){if(k===clearTimeout)return clearTimeout(E);if((k===e||!k)&&clearTimeout)return k=clearTimeout,
clearTimeout(E);try{k(E)}catch(w){try{return k.call(null,E)}catch(D){return k.call(this,E)}}})(A)}}function l(A,z){this.fun=A;this.array=z}function d(){}q=q.exports={};try{var c="function"==typeof setTimeout?setTimeout:h}catch(A){c=h}try{var k="function"==typeof clearTimeout?clearTimeout:e}catch(A){k=e}!0;var t,n=[],u=!1,x=-1;q.nextTick=function(A){var z=Array(arguments.length-1);if(1<arguments.length)for(var E=1;E<arguments.length;E++)z[E-1]=arguments[E];n.push(new l(A,z));1!==n.length||u||g(m)};
l.prototype.run=function(){this.fun.apply(null,this.array)};q.title="browser";q.browser=!0;q.env={};q.argv=[];q.version="";q.versions={};q.on=d;q.addListener=d;q.once=d;q.off=d;q.removeListener=d;q.removeAllListeners=d;q.emit=d;q.prependListener=d;q.prependOnceListener=d;q.listeners=function(A){return[]};q.binding=function(A){throw Error("process.binding is not supported");};q.cwd=function(){return"/"};q.chdir=function(A){throw Error("process.chdir is not supported");};q.umask=function(){return 0}},
22:function(q,a,h){(function(e,g){q.exports=function(){function f(){var V=setTimeout;return function(){return V(m,1)}}function m(){for(var V=0;V<r;V+=2)(0,I[V])(I[V+1]),I[V]=void 0,I[V+1]=void 0;r=0}function l(V,X){var N=this,Y=new this.constructor(c);void 0===Y[L]&&w(Y);var ia=N._state;if(ia){var oa=arguments[ia-1];C(function(){return E(ia,Y,oa,N._result)})}else A(N,Y,V,X);return Y}function d(V){if(V&&"object"==typeof V&&V.constructor===this)return V;var X=new this(c);return t(X,V),X}function c(){}
function k(V,X,N){X.constructor===V.constructor&&N===l&&X.constructor.resolve===d?function(Y,ia){1===ia._state?u(Y,ia._result):2===ia._state?x(Y,ia._result):A(ia,void 0,function(oa){return t(Y,oa)},function(oa){return x(Y,oa)})}(V,X):void 0===N?u(V,X):"function"==typeof N?function(Y,ia,oa){C(function(sa){var Ba=!1,Da=function(pa,ra,ya,wa){try{pa.call(ra,ya,wa)}catch(la){return la}}(oa,ia,function(pa){Ba||(Ba=!0,ia!==pa?t(sa,pa):u(sa,pa))},function(pa){Ba||(Ba=!0,x(sa,pa))},sa._label);!Ba&&Da&&(Ba=
!0,x(sa,Da))},Y)}(V,X,N):u(V,X)}function t(V,X){if(V===X)x(V,new TypeError("You cannot resolve a promise with itself"));else if(Y=typeof(N=X),null===N||"object"!==Y&&"function"!==Y)u(V,X);else{N=void 0;try{N=X.then}catch(ia){return void x(V,ia)}k(V,X,N)}var N,Y}function n(V){V._onerror&&V._onerror(V._result);z(V)}function u(V,X){void 0===V._state&&(V._result=X,V._state=1,0!==V._subscribers.length&&C(z,V))}function x(V,X){void 0===V._state&&(V._state=2,V._result=X,C(n,V))}function A(V,X,N,Y){var ia=
V._subscribers,oa=ia.length;V._onerror=null;ia[oa]=X;ia[oa+1]=N;ia[oa+2]=Y;0===oa&&V._state&&C(z,V)}function z(V){var X=V._subscribers,N=V._state;if(0!==X.length){for(var Y=void 0,ia=void 0,oa=V._result,sa=0;sa<X.length;sa+=3)Y=X[sa],ia=X[sa+N],Y?E(N,Y,ia,oa):ia(oa);V._subscribers.length=0}}function E(V,X,N,Y){var ia="function"==typeof N,oa=void 0,sa=void 0,Ba=!0;if(ia){try{oa=N(Y)}catch(Da){Ba=!1,sa=Da}if(X===oa)return void x(X,new TypeError("A promises callback cannot return that same promise."))}else oa=
Y;void 0!==X._state||(ia&&Ba?t(X,oa):!1===Ba?x(X,sa):1===V?u(X,oa):2===V&&x(X,oa))}function w(V){V[L]=aa++;V._state=void 0;V._result=void 0;V._subscribers=[]}var D=Array.isArray?Array.isArray:function(V){return"[object Array]"===Object.prototype.toString.call(V)},r=0,v=void 0,B=void 0,C=function(V,X){I[r]=V;I[r+1]=X;2===(r+=2)&&(B?B(m):S())},F="undefined"!=typeof window?window:void 0,G=F||{};G=G.MutationObserver||G.WebKitMutationObserver;var H="undefined"==typeof self&&void 0!==e&&"[object process]"===
{}.toString.call(e),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,I=Array(1E3),K,R,W,P,S=void 0;H?S=function(){return e.nextTick(m)}:G?(R=0,W=new G(m),P=document.createTextNode(""),W.observe(P,{characterData:!0}),S=function(){P.data=R=++R%2}):J?((K=new MessageChannel).port1.onmessage=m,S=function(){return K.port2.postMessage(0)}):S=void 0===F?function(){try{var V=Function("return this")().require("vertx");return void 0!==(v=V.runOnLoop||
V.runOnContext)?function(){v(m)}:f()}catch(X){return f()}}():f();var L=Math.random().toString(36).substring(2),aa=0,ba=function(){function V(X,N){this._instanceConstructor=X;this.promise=new X(c);this.promise[L]||w(this.promise);D(N)?(this.length=N.length,this._remaining=N.length,this._result=Array(this.length),0===this.length?u(this.promise,this._result):(this.length=this.length||0,this._enumerate(N),0===this._remaining&&u(this.promise,this._result))):x(this.promise,Error("Array Methods must be provided an Array"))}
return V.prototype._enumerate=function(X){for(var N=0;void 0===this._state&&N<X.length;N++)this._eachEntry(X[N],N)},V.prototype._eachEntry=function(X,N){var Y=this._instanceConstructor,ia=Y.resolve;if(ia===d){var oa=ia=void 0,sa=!1;try{ia=X.then}catch(Ba){sa=!0,oa=Ba}ia===l&&void 0!==X._state?this._settledAt(X._state,N,X._result):"function"!=typeof ia?(this._remaining--,this._result[N]=X):Y===O?(Y=new Y(c),sa?x(Y,oa):k(Y,X,ia),this._willSettleAt(Y,N)):this._willSettleAt(new Y(function(Ba){return Ba(X)}),
N)}else this._willSettleAt(ia(X),N)},V.prototype._settledAt=function(X,N,Y){var ia=this.promise;void 0===ia._state&&(this._remaining--,2===X?x(ia,Y):this._result[N]=Y);0===this._remaining&&u(ia,this._result)},V.prototype._willSettleAt=function(X,N){var Y=this;A(X,void 0,function(ia){return Y._settledAt(1,N,ia)},function(ia){return Y._settledAt(2,N,ia)})},V}(),O=function(){function V(X){this[L]=aa++;this._result=this._state=void 0;this._subscribers=[];if(c!==X){if("function"!=typeof X)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
if(this instanceof V)(function(N,Y){try{Y(function(ia){t(N,ia)},function(ia){x(N,ia)})}catch(ia){x(N,ia)}})(this,X);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return V.prototype.catch=function(X){return this.then(null,X)},V.prototype.finally=function(X){var N=this.constructor;return"function"==typeof X?this.then(function(Y){return N.resolve(X()).then(function(){return Y})},function(Y){return N.resolve(X()).then(function(){throw Y;
})}):this.then(X,X)},V}();return O.prototype.then=l,O.all=function(V){return(new ba(this,V)).promise},O.race=function(V){var X=this;return D(V)?new X(function(N,Y){for(var ia=V.length,oa=0;oa<ia;oa++)X.resolve(V[oa]).then(N,Y)}):new X(function(N,Y){return Y(new TypeError("You must pass an array to race."))})},O.resolve=d,O.reject=function(V){var X=new this(c);return x(X,V),X},O._setScheduler=function(V){B=V},O._setAsap=function(V){C=V},O._asap=C,O.polyfill=function(){var V=void 0;if(void 0!==g)V=
g;else if("undefined"!=typeof self)V=self;else try{V=Function("return this")()}catch(Y){throw Error("polyfill failed because global object is unavailable in this environment");}var X=V.Promise;if(X){var N=null;try{N=Object.prototype.toString.call(X.resolve())}catch(Y){}if("[object Promise]"===N&&!X.cast)return}V.Promise=O},O.Promise=O,O}()}).call(this,h(145),h(128))},26:function(q,a,h){function e(H){return H.reduce(function(J,I){return I&&I.relatedItems?J.concat(I.relatedItems.map(function(K){return K})):
J},[])}function g(H,J,I){return H(J,{query:Object(l.a)({f:"json"},I)}).then(function(K){return K.data})}function f(H,J){void 0===J&&(J=100);for(var I=[],K=0;K<Math.ceil(H.length/J);K++)I.push(H.slice(K*J,(K+1)*J));return I.filter(function(R){return 0<R.length})}function m(H){var J=H.itemIds,I=H.request,K=H.groupIds,R=H.portal.restUrl+"/content/itemsgroups";return new d.Promise(function(W,P){I(R,{method:"get",query:{f:"json",items:J,groups:K}}).then(function(S){W(S.data)},P)})}h.d(a,"s",function(){return c});
h.d(a,"n",function(){return k});h.d(a,"h",function(){return t});h.d(a,"e",function(){return n});h.d(a,"f",function(){return u});h.d(a,"j",function(){return x});h.d(a,"l",function(){return A});h.d(a,"k",function(){return z});h.d(a,"m",function(){return E});h.d(a,"c",function(){return w});h.d(a,"d",function(){return D});h.d(a,"p",function(){return r});h.d(a,"q",function(){return v});h.d(a,"r",function(){return B});h.d(a,"g",function(){return C});h.d(a,"o",function(){return F});h.d(a,"t",function(){return g});
h.d(a,"a",function(){return f});h.d(a,"i",function(){return m});h.d(a,"b",function(){return G});var l=h(0),d=h(22),c=function(H){return function(J,I){return H({url:J,content:I.query},{usePost:"post"===I.method}).then(function(K){return{data:K}})}},k=function(H,J,I){return g(H,J.restUrl+"/portals/self",{culture:I,default:!0})},t=function(H,J,I){return g(H,J.restUrl+"/content/items/"+I+"/data")},n=function(H,J,I,K){return g(H,J.restUrl+"/community/groups",Object(l.a)({q:I},K))},u=function(H,J,I){return g(H,
J.restUrl+"/community/groups/"+I+"/categorySchema")},x=function(H,J,I){return g(H,J.restUrl+"/portals/"+(I||J.id)+"/categorySchema")},A=function(H,J,I,K){return H(J.restUrl+"/portals/"+(I||J.id)+"/collaborationsSummary",K)},z=function(H,J,I,K){return H(J.restUrl+"/portals/"+(I||J.id)+"/collaboratedItems",K)},E=function(H,J,I){return g(H,location.protocol+"//"+J.portalHostname+"/sharing/rest/portals/"+(I||"self"))},w=function(H,J,I){return H(J.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+
J.id+" AND access:public",num:100,start:I||1,sortField:"title",sortOrder:"asc"}}).then(function(K){return K.data.total>K.data.start+K.data.num?w(H,J,K.data.start+K.data.num).then(function(R){return Object(l.a)(Object(l.a)({},R),{data:Object(l.a)(Object(l.a)({},R.data),{results:K.data.results.concat(R.data.results)})})}):K})},D=function(H,J,I,K){return H(J.restUrl+"/community/users/"+I+"/provisionedListings",{query:{f:"json",num:100,start:K||1}}).then(function(R){var W=d.Promise.all(R.data.provisionedListings.filter(function(S){return S.itemId}).map(function(S){return(new d.Promise(function(L,
aa){H(J.restUrl+"/content/items/"+S.itemId,{method:"get",query:{f:"json"}}).then(function(ba){L(ba.data)},aa)})).catch(function(L){return 0})})),P=R.data.provisionedListings.map(function(S){return g(H,J.restUrl+"/content/items/"+(S.id||S.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(L){return L},function(L){})});return R.data.total>R.data.start+R.data.num?D(H,J,I,R.data.start+R.data.num).then(function(S){return d.Promise.all([W].concat(P)).then(function(L){return L[0].results.concat(e(L.slice(1))).concat(S)})}):
d.Promise.all([W].concat(P)).then(function(S){return S[0].filter(function(L){return void 0!==L}).concat(e(S.slice(1)))})})},r=function(H,J,I){return g(H,J.restUrl+"/community/users/"+(I||J.user.username))},v=function(H,J,I){return g(H,J.restUrl+"/content/users/"+(I||J.user.username),{num:1})},B=function(H,J,I){return g(H,J.restUrl+"/content/groups/"+I)},C=function(H,J,I){return g(H,J.restUrl+"/community/groups",I)},F=function(H,J){return g(H,J.restUrl+"/portals/self/settings")},G=function(H,J){return void 0===
J&&(J=","),H.map(function(I){return I.id}).join(J)}},610:function(q,a){q.exports=y},825:function(q,a,h){h.r(a);h.d(a,"InfoBanner",function(){return l});var e=h(0),g=h(10);q=h(610);var f=h.n(q),m=h(26),l=function(){function d(c){var k=this;this.options=c;var t=c.bottomContainer;(this.topContainer=c.topContainer,this.bottomContainer=t,c.bannerConfig)?this.setupBanners(c.bannerConfig):c.request&&c.portal&&c.apiVersion&&(t=4===c.apiVersion?c.request:this.shimmedRequest.bind(this),c=4===c.apiVersion?c.portal:
Object(e.a)(Object(e.a)({},c.portal),{restUrl:c.portal.portalUrl.slice(0,-1),credential:c.portal.user&&c.portal.user.credential?c.portal.user.credential:void 0}),Object(m.o)(t,c).then(function(n){k.setupBanners(n.informationalBanner)}))}return d.prototype.destroy=function(){this.topContainer&&(this.topProjector.stop(),this.topContainer.remove?this.topContainer.remove():this.topContainer.parentNode&&this.topContainer.parentNode.removeChild(this.topContainer));this.bottomContainer&&(this.bottomProjector.stop(),
this.bottomContainer.remove?this.bottomContainer.remove():this.bottomContainer.parentNode&&this.bottomContainer.parentNode.removeChild(this.bottomContainer))},d.prototype.setupBanners=function(c){c&&c.enabled&&(this.topContainer&&(this.topProjector=this.createProjector(this.topContainer,"top-info-banner","top",c)),this.bottomContainer&&(this.bottomProjector=this.createProjector(this.bottomContainer,"bottom-info-banner","bottom",c)))},d.prototype.createProjector=function(c,k,t,n){var u={key:k,position:t,
bannerConfig:n};return this.store=Object(g.createStore)(function(x,A){A.type;A.payload;return Object(e.a)({},u)},u),Object(g.createProjector)(this.store,function(x){return x(f.a,Object(e.a)({},u))},c)},d.prototype.shimmedRequest=function(c,k){var t=Object(e.a)({},k.query);return this.options.portal&&this.options.portal.user&&this.options.portal.user.credential&&-1<c.indexOf(this.options.portal.restUrl)&&(t.token=this.options.portal.user.credential.token),this.options.request({url:c,content:k.query},
{usePost:"post"===k.method}).then(function(n){return{data:n}})},d}()}})})},"arcgis-components/Component":function(){define(function(){return function(b){function y(a){if(q[a])return q[a].exports;var h=q[a]={i:a,l:!1,exports:{}};return b[a].call(h.exports,h,h.exports,y),h.l=!0,h.exports}var q={};return y.m=b,y.c=q,y.d=function(a,h,e){y.o(a,h)||Object.defineProperty(a,h,{enumerable:!0,get:e})},y.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},y.t=function(a,h){if((1&h&&(a=y(a)),8&h)||4&h&&"object"==typeof a&&a&&a.__esModule)return a;var e=Object.create(null);if(y.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:a}),2&h&&"string"!=typeof a)for(var g in a)y.d(e,g,function(f){return a[f]}.bind(null,g));return e},y.n=function(a){var h=a&&a.__esModule?function(){return a.default}:function(){return a};return y.d(h,"a",h),h},y.o=function(a,h){return Object.prototype.hasOwnProperty.call(a,
h)},y.p="",y(y.s=677)}({0:function(b,y,q){function a(c,k){function t(){this.constructor=c}l(c,k);c.prototype=null===k?Object.create(k):(t.prototype=k.prototype,new t)}function h(c,k){var t={},n;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&0>k.indexOf(n)&&(t[n]=c[n]);if(null!=c&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(n=Object.getOwnPropertySymbols(c);u<n.length;u++)0>k.indexOf(n[u])&&Object.prototype.propertyIsEnumerable.call(c,n[u])&&(t[n[u]]=c[n[u]])}return t}function e(c,
k,t,n){var u,x=arguments.length,A=3>x?k:null===n?n=Object.getOwnPropertyDescriptor(k,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(c,k,t,n);else for(var z=c.length-1;0<=z;z--)(u=c[z])&&(A=(3>x?u(A):3<x?u(k,t,A):u(k,t))||A);return 3<x&&A&&Object.defineProperty(k,t,A),A}function g(c,k,t,n){return new (t||(t=Promise))(function(u,x){function A(w){try{E(n.next(w))}catch(D){x(D)}}function z(w){try{E(n.throw(w))}catch(D){x(D)}}function E(w){var D;w.done?u(w.value):
(D=w.value,D instanceof t?D:new t(function(r){r(D)})).then(A,z)}E((n=n.apply(c,k||[])).next())})}function f(c,k){function t(E){return function(w){return function(D){if(n)throw new TypeError("Generator is already executing.");for(;z;)try{if(n=1,u&&(x=2&D[0]?u.return:D[0]?u.throw||((x=u.return)&&x.call(u),0):u.next)&&!(x=x.call(u,D[1])).done)return x;switch(u=0,x&&(D=[2&D[0],x.value]),D[0]){case 0:case 1:x=D;break;case 4:return z.label++,{value:D[1],done:!1};case 5:z.label++;u=D[1];D=[0];continue;case 7:D=
z.ops.pop();z.trys.pop();continue;default:if(!(x=z.trys,(x=0<x.length&&x[x.length-1])||6!==D[0]&&2!==D[0])){z=0;continue}if(3===D[0]&&(!x||D[1]>x[0]&&D[1]<x[3]))z.label=D[1];else if(6===D[0]&&z.label<x[1])z.label=x[1],x=D;else if(x&&z.label<x[2])z.label=x[2],z.ops.push(D);else{x[2]&&z.ops.pop();z.trys.pop();continue}}D=k.call(c,z)}catch(r){D=[6,r],u=0}finally{n=x=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([E,w])}}var n,u,x,A,z={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},
trys:[],ops:[]};return A={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A}function m(){for(var c=0,k=0,t=arguments.length;k<t;k++)c+=arguments[k].length;c=Array(c);var n=0;for(k=0;k<t;k++)for(var u=arguments[k],x=0,A=u.length;x<A;x++,n++)c[n]=u[x];return c}q.d(y,"d",function(){return a});q.d(y,"a",function(){return d});q.d(y,"f",function(){return h});q.d(y,"c",function(){return e});q.d(y,"b",function(){return g});q.d(y,"e",function(){return f});
q.d(y,"g",function(){return m});var l=function(c,k){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var u in n)n.hasOwnProperty(u)&&(t[u]=n[u])})(c,k)},d=function(){return(d=Object.assign||function(c){for(var k,t=1,n=arguments.length;t<n;t++)for(var u in k=arguments[t])Object.prototype.hasOwnProperty.call(k,u)&&(c[u]=k[u]);return c}).apply(this,arguments)}},12:function(b,y,q){function a(e){return function f(){for(var m=this,l=[],d=0;d<
arguments.length;d++)l[d]=arguments[d];return l.length>=e.length?e.call.apply(e,Object(h.g)([this],l)):function(){for(var c=[],k=0;k<arguments.length;k++)c[k]=arguments[k];return f.call.apply(f,Object(h.g)([m],l,c))}}}q.d(y,"a",function(){return a});var h=q(0)},3:function(b,y,q){function a(c){return 0===Object.keys(c).length&&c.constructor===Object}function h(c){return null!=c}function e(c,k){return l.apply(null,arguments)}function g(c,k){return d.apply(null,arguments)}q.d(y,"b",function(){return a});
q.d(y,"a",function(){return h});q.d(y,"e",function(){return m});q.d(y,"c",function(){return e});q.d(y,"d",function(){return g});var f=q(0);b=q(12);var m=Object(b.a)(function(c,k){k=Object(f.a)({},k);return delete k[c],k}),l=Object(b.a)(function(c,k){return Object.keys(k).reduce(function(t,n){return t[n]=c(k[n],n,k),t},{})}),d=Object(b.a)(function(c,k){return Object.keys(k).reduce(function(t,n){return c(k[n],n,k)&&(t[n]=k[n]),t},{})})},355:function(b,y,q){!function(a){var h=[],e=function(C,F){var G=
{};return Object.keys(C).forEach(function(H){G[H]=C[H]}),F&&Object.keys(F).forEach(function(H){G[H]=F[H]}),G},g=function(C,F){return C.vnodeSelector===F.vnodeSelector&&(C.properties&&F.properties?C.properties.key===F.properties.key&&C.properties.bind===F.properties.bind:!C.properties&&!F.properties)},f=function(C){if("string"!=typeof C)throw Error("Style values must be strings");},m=function(C,F,G,H){var J=C[F];if(""!==J.vnodeSelector){var I=J.properties;if(!(I&&(void 0===I.key?I.bind:I.key)))for(I=
0;I<C.length;I++)if(I!==F&&g(C[I],J))throw Error(G.vnodeSelector+" had a "+J.vnodeSelector+" child "+("added"===H?H:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.");}},l=[],d=!1,c=function(C){(C.children||[]).forEach(c);C.properties&&C.properties.afterRemoved&&C.properties.afterRemoved.apply(C.properties.bind||C.properties,[C.domNode])},k=function(){d=!1;l.forEach(c);l.length=0},t=function(C){l.push(C);d||(d=!0,"undefined"!=typeof window&&
"requestIdleCallback"in window?window.requestIdleCallback(k,{timeout:16}):setTimeout(k,16))},n=function(C){var F=C.domNode;if(C.properties){var G=C.properties.exitAnimation;if(G)return F.style.pointerEvents="none",void G(F,function(){F.parentNode&&(F.parentNode.removeChild(F),t(C))},C.properties)}F.parentNode&&(F.parentNode.removeChild(F),t(C))},u=function(C,F,G){!function(H,J,I){if(J)for(var K=0;K<J.length;K++)x(J[K],H,void 0,I)}(C,F.children,G);F.text&&(C.textContent=F.text);(function(H,J,I){if(J)for(var K=
I.eventHandlerInterceptor,R=Object.keys(J),W=R.length,P=function(L){var aa,ba=R[L];L=J[ba];if("className"===ba)throw Error('Property "className" is not supported, use "class".');if("class"===ba)A(H,L,!0);else if("classes"===ba){var O=Object.keys(L),V=O.length;for(ba=0;ba<V;ba++){var X=O[ba];L[X]&&H.classList.add(X)}}else if("styles"===ba)for(O=Object.keys(L),V=O.length,ba=0;ba<V;ba++){X=O[ba];var N=L[X];N&&(f(N),I.styleApplyer(H,X,N))}else"key"!==ba&&null!=L&&(O=typeof L,"function"===O?0===ba.lastIndexOf("on",
0)&&(K&&(L=K(ba,L,H,J)),"oninput"===ba&&(aa=L,L=function(Y){aa.apply(this,[Y]);Y.target["oninput-value"]=Y.target.value}),H[ba]=L):"http://www.w3.org/2000/svg"===I.namespace?"href"===ba?H.setAttributeNS("http://www.w3.org/1999/xlink",ba,L):H.setAttribute(ba,L):"string"===O&&"value"!==ba&&"innerHTML"!==ba?H.setAttribute(ba,L):H[ba]=L)},S=0;S<W;S++)P(S)})(C,F.properties,G);F.properties&&F.properties.afterCreate&&F.properties.afterCreate.apply(F.properties.bind||F.properties,[C,G,F.vnodeSelector,F.properties,
F.children])},x=function(C,F,G,H){var J=0,I=C.vnodeSelector,K=F.ownerDocument;if(""===I){var R=C.domNode=K.createTextNode(C.text);void 0!==G?F.insertBefore(R,G):F.appendChild(R)}else{for(var W=0;W<=I.length;++W){var P=I.charAt(W);if(W===I.length||"."===P||"#"===P)P=I.charAt(J-1),J=I.slice(J,W),"."===P?R.classList.add(J):"#"===P?R.id=J:("svg"===J&&(H=e(H,{namespace:"http://www.w3.org/2000/svg"})),void 0!==H.namespace?R=C.domNode=K.createElementNS(H.namespace,J):(R=C.domNode=C.domNode||K.createElement(J),
"input"===J&&C.properties&&void 0!==C.properties.type&&R.setAttribute("type",C.properties.type)),void 0!==G?F.insertBefore(R,G):R.parentNode!==F&&F.appendChild(R)),J=W+1}u(R,C,H)}},A=function(C,F,G){F&&F.split(" ").forEach(function(H){H&&C.classList.toggle(H,G)})};var z=function(C,F,G){var H=C.domNode,J=!1;if(C===F)return!1;var I=!1;if(""===F.vnodeSelector){if(F.text!==C.text)return C=H.ownerDocument.createTextNode(F.text),H.parentNode.replaceChild(C,H),F.domNode=C,J=!0;F.domNode=H}else 0===F.vnodeSelector.lastIndexOf("svg",
0)&&(G=e(G,{namespace:"http://www.w3.org/2000/svg"})),C.text!==F.text&&(I=!0,void 0===F.text?H.removeChild(H.firstChild):H.textContent=F.text),F.domNode=H,I=function(K,R,W,P,S){if(W===P)return!1;P=P||h;for(var L,aa=(W=W||h).length,ba=P.length,O=L=0,V=!1;O<ba;){var X=L<aa?W[L]:void 0,N=P[O];if(void 0!==X&&g(X,N))V=z(X,N,S)||V,L++;else{a:{X=W;var Y=N;if(""!==Y.vnodeSelector)for(var ia=L+1;ia<X.length;ia++)if(g(X[ia],Y)){X=ia;break a}X=-1}if(0<=X){for(;L<X;L++)n(W[L]),m(W,L,K,"removed");V=z(W[X],N,S)||
V;L=X+1}else x(N,R,L<aa?W[L].domNode:void 0,S),N.properties&&(X=N.properties.enterAnimation)&&X(N.domNode,N.properties),m(P,O,K,"added")}O++}if(aa>L)for(;L<aa;L++)n(W[L]),m(W,L,K,"removed");return V}(F,H,C.children,F.children,G)||I,I=function(K,R,W,P){if(W){for(var S=!1,L=Object.keys(W),aa=L.length,ba=0;ba<aa;ba++){var O=L[ba],V=W[O],X=R[O];if("class"===O)X!==V&&(A(K,X,!1),A(K,V,!0));else if("classes"===O){var N=K.classList,Y=Object.keys(V),ia=Y.length;for(O=0;O<ia;O++){var oa=Y[O],sa=!!V[oa];sa!==
!!X[oa]&&(S=!0,sa?N.add(oa):N.remove(oa))}}else if("styles"===O)for(N=Object.keys(V),Y=N.length,O=0;O<Y;O++)ia=N[O],oa=V[ia],oa!==X[ia]&&(S=!0,oa?(f(oa),P.styleApplyer(K,ia,oa)):P.styleApplyer(K,ia,""));else(V||"string"!=typeof X||(V=""),"value"===O)?(N=K[O],N!==V&&(K["oninput-value"]?N===K["oninput-value"]:V!==X)&&(K[O]=V,K["oninput-value"]=void 0),V!==X&&(S=!0)):V!==X&&(X=typeof V,"function"===X&&P.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===P.namespace?"href"===O?K.setAttributeNS("http://www.w3.org/1999/xlink",
O,V):K.setAttribute(O,V):"string"===X&&"innerHTML"!==O?"role"===O&&""===V?K.removeAttribute(O):K.setAttribute(O,V):K[O]!==V&&(K[O]=V),S=!0))}return S}}(H,C.properties,F.properties,G)||I,F.properties&&F.properties.afterUpdate&&F.properties.afterUpdate.apply(F.properties.bind||F.properties,[H,G,F.vnodeSelector,F.properties,F.children]);return I&&F.properties&&F.properties.updateAnimation&&F.properties.updateAnimation(H,F.properties,C.properties),J};var E=function(C,F){return{getLastRender:function(){return C},
update:function(G){if(C.vnodeSelector!==G.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var H=C;C=G;z(H,G,F)},domNode:C.domNode}},w={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(C,F,G){C.style[F]=G}},D={create:function(C,F){return F=e(w,F),x(C,document.createElement("div"),void 0,F),E(C,F)},append:function(C,F,G){return G=e(w,G),x(F,C,void 0,
G),E(F,G)},insertBefore:function(C,F,G){return G=e(w,G),x(F,C.parentNode,C,G),E(F,G)},merge:function(C,F,G){return G=e(w,G),F.domNode=C,u(C,F,G),E(F,G)},replace:function(C,F,G){return G=e(w,G),x(F,C.parentNode,C,G),C.parentNode.removeChild(C),E(F,G)}},r=function(C,F,G){for(var H=0,J=F.length;H<J;H++){var I=F[H];Array.isArray(I)?r(C,I,G):null!=I&&!1!==I&&("string"==typeof I&&(I={vnodeSelector:"",properties:void 0,children:void 0,text:I.toString(),domNode:null}),G.push(I))}};var v=Array.prototype.find?
function(C,F){return C.find(F)}:function(C,F){return C.filter(F)[0]};var B=function(C,F){var G=C;return F.forEach(function(H){G=G&&G.children?v(G.children,function(J){return J.domNode===H}):void 0}),G};a.createCache=function(){var C,F;return{invalidate:function(){C=F=void 0},result:function(G,H){if(C)for(var J=0;J<G.length;J++)C[J]!==G[J]&&(F=void 0);return F||(F=H(),C=G),F}}};a.createMapping=function(C,F,G){var H=[],J=[];return{results:J,map:function(I){for(var K=I.map(C),R=J.slice(),W=0,P=0;P<I.length;P++){var S=
I[P],L=K[P];if(L===H[W])J[P]=R[W],G(S,R[W],P),W++;else{for(var aa=!1,ba=1;ba<H.length+1;ba++){var O=(W+ba)%H.length;if(H[O]===L){J[P]=R[O];G(I[P],R[O],P);W=O+1;aa=!0;break}}aa||(J[P]=F(S,P))}}J.length=I.length;H=K}}};a.createProjector=function(C){var F,G,H=e(w,C),J=H.performanceLogger,I=!0,K=!1,R=[],W=[],P=function(L,aa,ba){H.eventHandlerInterceptor=function(V,X,N){var Y=function(ia){N("domEvent",ia);for(var oa=X(),sa=ia.currentTarget,Ba=oa.domNode,Da=[];sa&&sa!==Ba;)Da.push(sa),sa=sa.parentNode;
Da.reverse();var pa;oa=B(oa.getLastRender(),Da);return V.scheduleRender(),oa&&(pa=oa.properties["on"+ia.type].apply(oa.properties.bind||this,arguments)),N("domEventProcessed",ia),pa};return function(ia,oa,sa,Ba){return Y}}(F,function(){return O},J);var O=L(aa,ba(),H);R.push(O);W.push(ba)},S=function(){if(G=void 0,I){I=!1;J("renderStart",void 0);for(var L=0;L<R.length;L++){var aa=W[L]();J("rendered",void 0);R[L].update(aa);J("patched",void 0)}J("renderDone",void 0);I=!0}};return F={renderNow:S,scheduleRender:function(){G||
K||(G=requestAnimationFrame(S))},stop:function(){G&&(cancelAnimationFrame(G),G=void 0);K=!0},resume:function(){K=!1;I=!0;F.scheduleRender()},append:function(L,aa){P(D.append,L,aa)},insertBefore:function(L,aa){P(D.insertBefore,L,aa)},merge:function(L,aa){P(D.merge,L,aa)},replace:function(L,aa){P(D.replace,L,aa)},detach:function(L){for(var aa=0;aa<W.length;aa++)if(W[aa]===L)return W.splice(aa,1),R.splice(aa,1)[0];throw Error("renderFunction was not found");}}};a.dom=D;a.h=function(C,F,G){if(Array.isArray(F))G=
F,F=void 0;else if(F&&("string"==typeof F||F.hasOwnProperty("vnodeSelector"))||G&&("string"==typeof G||G.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");var H,J;return G&&1===G.length&&"string"==typeof G[0]?H=G[0]:G&&(r(C,G,J=[]),0===J.length&&(J=void 0)),{vnodeSelector:C,properties:F,children:J,text:""===H?void 0:H,domNode:null}};Object.defineProperty(a,"__esModule",{value:!0})}(y)},51:function(b,y,q){function a(){for(var h=[],e=0;e<arguments.length;e++)h[e]=arguments[e];
return function(g){return h.reduceRight(function(f,m){return m(f)},g)}}q.d(y,"a",function(){return a})},677:function(b,y,q){function a(A,z,E,w){var D=new u({key:"root"},z);A&&(D.store=A);var r=Object(c.createProjector)(w);z=Object(d.a)(Object(d.a)({},r),{append:function(v){return r.append(v,function(){return D.render.bind(D)(D.tsx.bind(D))})}});return z.append(E),A&&A.subscribe(function(){return r.scheduleRender()}),z}function h(A,z){return function(E){return function(w,D){return function(r,v){return D(E,
Object(d.a)(Object(d.a)(Object(d.a)({},w),A(v(),w)),z(r,w)))}}}}function e(){for(var A=[],z=0;z<arguments.length;z++)A[z]=arguments[z];return function(E){return function(w,D){var r=E(w,D);w=k.a;var v=r.dispatch;D=A.map(function(B){return B({dispatch:function(C){return v(C)},getState:r.getState})});return v=w.apply(void 0,D)(r.dispatch),Object(d.a)(Object(d.a)({},r),{dispatch:v})}}}function g(A){return function(z){return function(E,w){return z(function(D,r){if("@@shunt/SETSTATE"===r.type)return r.payload;
D=E(D,r);return-1===r.type.indexOf("@@component/INIT")&&A(r,D),D},w)}}}function f(A){return function(z){z.dispatch;var E=z.getState;return function(w){return function(D){var r=w(D);return A(D,E()),r}}}}function m(A){var z=Object(t.d)(function(E){return"function"==typeof E},A);return function(E,w){return void 0===E&&(E={}),Object(t.c)(function(D,r){return D(E[r],w)},z)}}function l(A,z){var E=z,w=[];z={dispatch:function(D){return E=A(E,D),w.forEach(function(r){return r()}),D},subscribe:function(D){return w.push(D),
function(){w.splice(w.indexOf(D),1)}},getState:function(){return E}};return z.dispatch({type:"@@component/INIT"+Math.random().toString(36).substring(7)}),z}q.r(y);q.d(y,"createProjector",function(){return a});q.d(y,"Component",function(){return n});q.d(y,"RootComponent",function(){return u});q.d(y,"connect",function(){return h});q.d(y,"applyMiddleware",function(){return e});q.d(y,"shunt",function(){return g});q.d(y,"thunk",function(){return x});q.d(y,"addListener",function(){return f});q.d(y,"combineReducers",
function(){return m});q.d(y,"createStore",function(){return l});var d=q(0),c=q(355),k=q(51),t=q(3),n=function(){function A(z){this.childComponents={};this.state={};this.props=z}return A.prototype.componentDidConnect=function(){},A.prototype.componentWillReceiveProps=function(z){},A.prototype.setState=function(z){this.state=Object(d.a)(Object(d.a)({},this.state),z);this.store&&this.store.dispatch({type:this.props.key+"_COMPONENT_STATE_UPDATE"})},A.prototype.tsx=function(z,E,w){var D=Array.prototype.slice.call(arguments).slice(2);
if("string"==typeof z)var r=c.h.apply(this,[z,E,D]);else if(z.prototype&&z.prototype.constructor.name){var v=z;D=Object(d.a)(Object(d.a)({},E),{children:D});var B=this.childComponents[D.key];B?(B.componentWillReceiveProps(D),B.props=D,r=B.render(B.tsx.bind(B))):((B=this.childComponents[D.key]=new v(D)).store=this.store,B.componentDidConnect(),r=B.render(B.tsx.bind(B)))}else r=(v=z)(Object(d.a)(Object(d.a)({},E),{children:D}),this.tsx.bind(this));return"function"==typeof r?r(this.store.dispatch,this.store.getState):
r},A}(),u=function(A){function z(E,w){E=A.call(this,E)||this;return E.renderRoot=w,E}return Object(d.d)(z,A),z.prototype.render=function(E){var w=this;return E(function(D,r){return w.renderRoot(r)})},z}(n);void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var A=/function\s([^(]{1,})\(/.exec(this.toString());return A&&1<A.length?A[1].trim():""},set:function(A){}});var x=function(A){var z=A.dispatch,E=A.getState;return function(w){return function(D){return"function"==
typeof D?D(z,E):w(D)}}}}})})},"arcgis-components/InfoBanner/index":function(){define(["../Component"],function(b){return function(y){function q(h){if(a[h])return a[h].exports;var e=a[h]={i:h,l:!1,exports:{}};return y[h].call(e.exports,e,e.exports,q),e.l=!0,e.exports}var a={};return q.m=y,q.c=a,q.d=function(h,e,g){q.o(h,e)||Object.defineProperty(h,e,{enumerable:!0,get:g})},q.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"});Object.defineProperty(h,
"__esModule",{value:!0})},q.t=function(h,e){if((1&e&&(h=q(h)),8&e)||4&e&&"object"==typeof h&&h&&h.__esModule)return h;var g=Object.create(null);if(q.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:h}),2&e&&"string"!=typeof h)for(var f in h)q.d(g,f,function(m){return h[m]}.bind(null,f));return g},q.n=function(h){var e=h&&h.__esModule?function(){return h.default}:function(){return h};return q.d(e,"a",e),e},q.o=function(h,e){return Object.prototype.hasOwnProperty.call(h,e)},q.p="",q(q.s=
724)}({0:function(y,q,a){function h(k,t){function n(){this.constructor=k}d(k,t);k.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function e(k,t){var n={},u;for(u in k)Object.prototype.hasOwnProperty.call(k,u)&&0>t.indexOf(u)&&(n[u]=k[u]);if(null!=k&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(u=Object.getOwnPropertySymbols(k);x<u.length;x++)0>t.indexOf(u[x])&&Object.prototype.propertyIsEnumerable.call(k,u[x])&&(n[u[x]]=k[u[x]])}return n}function g(k,t,n,u){var x,
A=arguments.length,z=3>A?t:null===u?u=Object.getOwnPropertyDescriptor(t,n):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(k,t,n,u);else for(var E=k.length-1;0<=E;E--)(x=k[E])&&(z=(3>A?x(z):3<A?x(t,n,z):x(t,n))||z);return 3<A&&z&&Object.defineProperty(t,n,z),z}function f(k,t,n,u){return new (n||(n=Promise))(function(x,A){function z(D){try{w(u.next(D))}catch(r){A(r)}}function E(D){try{w(u.throw(D))}catch(r){A(r)}}function w(D){var r;D.done?x(D.value):(r=D.value,
r instanceof n?r:new n(function(v){v(r)})).then(z,E)}w((u=u.apply(k,t||[])).next())})}function m(k,t){function n(w){return function(D){return function(r){if(u)throw new TypeError("Generator is already executing.");for(;E;)try{if(u=1,x&&(A=2&r[0]?x.return:r[0]?x.throw||((A=x.return)&&A.call(x),0):x.next)&&!(A=A.call(x,r[1])).done)return A;switch(x=0,A&&(r=[2&r[0],A.value]),r[0]){case 0:case 1:A=r;break;case 4:return E.label++,{value:r[1],done:!1};case 5:E.label++;x=r[1];r=[0];continue;case 7:r=E.ops.pop();
E.trys.pop();continue;default:if(!(A=E.trys,(A=0<A.length&&A[A.length-1])||6!==r[0]&&2!==r[0])){E=0;continue}if(3===r[0]&&(!A||r[1]>A[0]&&r[1]<A[3]))E.label=r[1];else if(6===r[0]&&E.label<A[1])E.label=A[1],A=r;else if(A&&E.label<A[2])E.label=A[2],E.ops.push(r);else{A[2]&&E.ops.pop();E.trys.pop();continue}}r=t.call(k,E)}catch(v){r=[6,v],x=0}finally{u=A=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([w,D])}}var u,x,A,z,E={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],
ops:[]};return z={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z}function l(){for(var k=0,t=0,n=arguments.length;t<n;t++)k+=arguments[t].length;k=Array(k);var u=0;for(t=0;t<n;t++)for(var x=arguments[t],A=0,z=x.length;A<z;A++,u++)k[u]=x[A];return k}a.d(q,"d",function(){return h});a.d(q,"a",function(){return c});a.d(q,"f",function(){return e});a.d(q,"c",function(){return g});a.d(q,"b",function(){return f});a.d(q,"e",function(){return m});
a.d(q,"g",function(){return l});var d=function(k,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,u){n.__proto__=u}||function(n,u){for(var x in u)u.hasOwnProperty(x)&&(n[x]=u[x])})(k,t)},c=function(){return(c=Object.assign||function(k){for(var t,n=1,u=arguments.length;n<u;n++)for(var x in t=arguments[n])Object.prototype.hasOwnProperty.call(t,x)&&(k[x]=t[x]);return k}).apply(this,arguments)}},10:function(y,q){y.exports=b},724:function(y,q,a){a.r(q);var h=a(0);y=function(e){function g(f){return e.call(this,
f)||this}return Object(h.d)(g,e),g.prototype.render=function(f){var m=this.props.position,l=this.props.bannerConfig;return f("div",{classes:{"info-banner":!0,"info-banner--top":"top"===m,"info-banner--bottom":"bottom"===m},style:"background-color: "+l.bgColor+"; color: "+l.fontColor},f("p",{class:"info-banner-text"},l.text))},g}(a(10).Component);q.default=y}})})},"arcgisonline/pages/utils/notebook":function(){define("require exports tslib ../../esriGeowConfig esri/lang esri/urlUtils ../../sharing/util dojo/Deferred dojo/request dojo/promise/all dojo/on dojo/string dojo/dom-construct dojo/dom-class dojo/dom-attr arcgisonline/pages/pageUtil arcgisonline/sharing/dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);t=q.__importDefault(t);n=q.__importDefault(n);u=q.__importDefault(u);x=q.__importDefault(x);A=q.__importDefault(A);return function(){function z(){}z.notebookServerConfigured=function(){var E,w;if(a.default.self&&a.default.self.isPortal)return a.default.notebookServerEnabled&&
a.default.self.supportsHostedNotebooks?!0:!1;var D=-1!==["Trial Developer","Trial","Trial Press","Developer Subscription"].indexOf(null===(E=a.default.self.subscriptionInfo)||void 0===E?void 0:E.type);return a.default.notebookServerEnabled&&(!D||-1!==((null===(w=a.default.self)||void 0===w?void 0:w.allowedBetaFeatures)||[]).indexOf("notebooks"))};z.getNotebookServer=function(){var E=new f.default;(a.default.portal||a.default.self).isPortal?a.default.userInfo?a.default.portal.getFederatedServers().then(function(w){h.default.isDefined(w)&&
h.default.isDefined(w.servers)&&h.default.isDefined(w.servers.length)?(w=w.servers.filter(function(D){return"ARCGIS_NOTEBOOK_SERVER"===D.serverType&&"NotebookServer"===D.serverFunction}),w.length?(w=w[0],w.adminContext="/admin",E.resolve(w)):E.resolve(null)):E.resolve(null)},function(w){E.resolve(null)}):E.resolve(null):g.default.request({url:a.default.restBaseUrl+"/portals/self/urls"}).then(function(w){var D,r;(w=null===(r=null===(D=null===w||void 0===w?void 0:w.urls)||void 0===D?void 0:D.notebooks)||
void 0===r?void 0:r.https)?E.resolve({url:"https://"+w,adminContext:""}):E.resolve(null)},function(w){E.resolve(null)});return E};z.notebooksBetaFormatter=function(E){return E};z.buildSelfSignedErrorMessage=function(E,w,D){E.messageHTML="\n      \x3ch4\x3e\n        "+(D?A.default.notebookViewer.openNotebookServerCertificateError:A.default.notebookViewer.openNotebookCertificateError)+"\n      \x3c/h4\x3e\n      \x3cp\x3e\n        "+A.default.notebookViewer.openNotebookCertificateErrorDescription+"\n      \x3c/p\x3e\n      \x3col\x3e\n        \x3cli\x3e\n          "+
A.default.notebookViewer.openNotebookCertificateErrorStep1+'\n          \x3ca href\x3d"'+(w.url+w.adminContext)+'" target\x3d"_blank" \x3e\n            '+(w.url+w.adminContext)+"\n          \x3c/a\x3e\n        \x3c/li\x3e\n        \x3cli\x3e"+A.default.notebookViewer.openNotebookCertificateErrorStep2+"\x3c/li\x3e\n        \x3cli\x3e"+A.default.notebookViewer.openNotebookCertificateErrorStep3+"\x3c/li\x3e\n      \x3c/ol\x3e"};z.getNotebookServerMachines=function(E){var w=new f.default,D=[],r={useJsonFormatParam:!0,
useCredentials:!0};z.notebookRequest(E+"/admin/machines/","GET",null,r).then(function(v){v=(null===v||void 0===v?void 0:v.machines)||[];v.length?(v.forEach(function(B){var C=new f.default;l.default({hardware:z.getNotebookServerMachineHardware(E,B,r),health:z.getNotebookServerMachineHealth(E,B,r)}).then(function(F){C.resolve({machineName:B.machineName,hardware:F.hardware,health:F.health})});D.push(C)}),l.default(D).then(function(B){w.resolve(B)})):w.resolve([])});return w};z.getNotebookServerMachineHardware=
function(E,w,D){var r=new f.default;z.notebookRequest(E+"/admin/machines/"+w.machineName+"/hardware","GET",null,D).then(function(v){r.resolve(v)},function(v){r.resolve({error:v})});return r};z.getNotebookServerMachineHealth=function(E,w,D){var r=new f.default;z.notebookRequest(E+"/admin/machines/"+w.machineName+"/status","GET",null,D).then(function(v){r.resolve(v)},function(v){r.resolve({error:v})});return r};z.getNotebookServerOS=function(E){var w=new f.default,D={useJsonFormatParam:!0,useCredentials:!0};
z.notebookRequest(E+"/admin/machines/","GET",null,D).then(function(r){((null===r||void 0===r?void 0:r.machines)||[]).length?z.notebookRequest(E+"/admin/machines/"+r.machines[0].machineName+"/hardware","GET",null,D).then(function(v){v=-1!==(v.os||"").toLowerCase().indexOf("windows")?"windows":"linux";w.resolve(v)},function(v){w.reject(v)}):w.reject()});return w};z.getNotebookRuntimes=function(E){var w=new f.default;z.getNotebookServer().then(function(D){null!==D?z.getNotebookRuntimesBase(D.url).then(function(r){E?
w.resolve({runtimes:r.runtimes,server:D}):w.resolve(r.runtimes)},function(r){w.reject(r)}):w.reject()});return w};z.getNotebookRuntimesBase=function(E){return z.notebookRequest(E+"/admin/notebooks/runtimes","GET",null,{useJsonFormatParam:!0,useCredentials:!0})};z.getNotebookRuntimeInfo=function(E,w){var D=this,r=new f.default;E&&w?this.getNotebookRuntimes(!0).then(function(v){var B=v.runtimes.filter(function(C){return C.name.toLowerCase()===E.toLowerCase()&&C.version.toLowerCase()===w.toLowerCase()});
1!==B.length?r.reject():D.notebookRequest(v.server.url+"/admin/notebooks/runtimes/"+B[0].id+"/manifest","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(C){r.resolve(C)},function(C){r.reject(C)})},function(v){r.reject(v)}):r.reject();return r};z.startNotebookServerPoller=function(){return window.setInterval(function(){z.getNotebookServerInfo()},6E5)};z.getNotebookServerInfo=function(){var E=new f.default;z.getNotebookServer().then(function(w){null!==w?z.pingNotebookServer(w.url).then(function(D){E.resolve(D)},
function(D){E.reject(D)}):E.reject()});return E};z.pingNotebookServer=function(E){var w=new f.default;z.notebookRequest(E+"/rest/info","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){w.resolve(D)},function(D){w.reject(D)});return w};z.getSampleNotebooksGroup=function(){var E=new f.default,w=a.default.self&&a.default.self.isPortal?"esri sample notebooks":"arcgis sample notebooks";g.default.request({url:a.default.restBaseUrl+"community/groups",content:{q:"title:("+w+') AND owner:"esri_notebook"'}}).then(function(D){D=
(D.results||[]).filter(function(r){return(r.title||"").toLowerCase()===w});1===D.length?E.resolve({id:D[0].id}):E.resolve({id:null})},function(D){E.resolve({id:null})});return E};z.getSampleNotebooksUrl=function(){var E=new f.default;z.getSampleNotebooksGroup().then(function(w){w.id&&E.resolve(a.default.baseUrl+"group.html?id\x3d"+w.id+"#content")});return E};z.getSampleNotebooks=function(){var E=new f.default;z.getSampleNotebooksGroup().then(function(w){w.id?g.default.request({url:a.default.restBaseUrl+
"content/groups/"+w.id}).then(function(D){E.resolve({items:(D.items||[]).filter(function(r){return"notebook"===(r.type||"").toLowerCase()})})},function(D){E.resolve({items:[]})}):E.resolve({items:[]})});return E};z.getAllNotebooks=function(E){var w=new f.default;z.notebookRequest(E+"/admin/notebooks","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){w.resolve(D)},function(D){w.reject({error:D})});return w};z.getNotebookServerDirectories=function(E){var w=new f.default;z.notebookRequest(E+
"/admin/system/directories","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){w.resolve(D)},function(D){w.resolve({error:D})});return w};z.deleteDataDirectory=function(E,w){var D=new f.default;z.notebookRequest(E+"/admin/system/directories/"+w+"/unregister","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(r){D.resolve(r)},function(r){D.resolve({error:r})});return D};z.deleteNotebookRuntime=function(E,w){var D=new f.default;z.notebookRequest(E+"/admin/notebooks/runtimes/"+
w+"/unregister","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(r){D.resolve(r)},function(r){D.resolve({error:r})});return D};z.getAllContainers=function(E){var w=new f.default,D={allUsers:a.default.userRole.isAdmin()};z.notebookRequest(E+"/admin/system/containers","GET",D,{useJsonFormatParam:!0,useCredentials:!0}).then(function(r){w.resolve(r)},function(r){w.resolve({error:r})});return w};z.terminateContainer=function(E,w){var D=new f.default;z.notebookRequest(E+"/admin/system/containers/"+
w+"/terminateContainer","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(r){D.resolve(r)},function(r){D.resolve({error:r})});return D};z.getNotebookServerLogs=function(E,w){var D=new f.default;z.notebookRequest(E+"/admin/logs/query","GET",w,{useJsonFormatParam:!0,useCredentials:!0}).then(function(r){D.resolve(r)},function(r){D.resolve({error:r})});return D};z.deleteNotebookServerLogs=function(E){var w=new f.default;z.notebookRequest(E+"/admin/logs/clean","POST",null,{useJsonFormatParam:!0,
useCredentials:!0}).then(function(D){w.resolve(D)},function(D){w.reject({error:D})});return w};z.createNotebookRuntimeProperties=function(E,w,D){void 0===D&&(D=null);D=D||w.value;E=E.filter(function(r){return r.id===D})[0];return JSON.stringify({notebookRuntimeName:E.name,notebookRuntimeVersion:E.version})};z.formatNotebookRuntimeVersion=function(E){return{"10.7":"1.0","10.7.0":"1.0","10.7.1":"2.0","10.8":"3.0","10.8.0":"3.0","10.8.1":"4.0"}[E]||E};z.showRuntimeInfo=function(E,w,D){var r=D.target;
"runtime-button"===(null===r||void 0===r?void 0:r.name)&&(r.disabled=!0);D.stopPropagation();D.preventDefault();E=E||n.default.get(D.currentTarget,"data-runtime-name");w=w||n.default.get(D.currentTarget,"data-runtime-version");var v=E+(w?" - "+z.formatNotebookRuntimeVersion(w):""),B=u.default.createSpecifiedDialog(x.default);t.default.add(B._dialog.domNode,"notebook__runtime-info-dialog");z.getNotebookRuntimeInfo(E,w).then(function(C){C=z.buildRuntimeInfoTable(C,v);B.show({title:v,content:C})},function(C){B.show({title:A.default.generalDlg.errorDlgTitle,
message:A.default.notebookViewer.tabContent.info.runtimeInfoError})});d.default.once(B,"hide",function(){B.destroyRecursive();"runtime-button"===(null===r||void 0===r?void 0:r.name)&&(r.disabled=!1)})};z.buildRuntimeInfoTable=function(E,w){var D=k.default.create("div",null);if((E.libraries||[]).length){k.default.create("p",{innerHTML:c.default.substitute(A.default.notebookViewer.tabContent.info.runtimeMessage,[w])},D);w=k.default.create("table",{class:"table"},D);var r=k.default.create("thead",null,
w);r=k.default.create("tr",null,r);k.default.create("th",{innerHTML:A.default.notebookViewer.tabContent.info.name},r);k.default.create("th",{innerHTML:A.default.notebookViewer.tabContent.info.version},r);var v=k.default.create("tbody",null,w);E.libraries.forEach(function(B){var C=k.default.create("tr",null,v);k.default.create("td",{innerHTML:B.name},C);k.default.create("td",{innerHTML:B.version},C)})}else k.default.create("p",{innerHTML:c.default.substitute(A.default.notebookViewer.tabContent.info.runtimeMessageNoManifest,
[w])},D);return D.outerHTML};z.getContainerLogs=function(E,w){return z.notebookRequest(E+"/admin/system/containers/"+w+"/logs","POST",null,{useJsonFormatParam:!0,useCredentials:!0})};z.getContainerInformation=function(E,w){var D=new f.default,r={useJsonFormatParam:!0,useCredentials:!0};l.default({containerInfo:z.notebookRequest(E+"/admin/system/containers/"+w,"GET",null,r),containerStats:z.notebookRequest(E+"/admin/system/containers/"+w+"/statistics","GET",null,r)}).then(function(v){D.resolve(v)},
function(v){D.reject(v)});return D};z.createRuntimeSelect=function(E,w,D){E=E||[];E.sort(function(B,C){return C.esriProvidedRuntime-B.esriProvidedRuntime});var r=a.default.userRole.canCreateAdvancedNotebooks();r||(E=E.filter(function(B){return!B.requiresAdvancedPrivileges}));var v={esriProvided:0,custom:0};E.forEach(function(B){var C={value:B.id,innerHTML:B.name+(B.version?" - "+z.formatNotebookRuntimeVersion(B.version):"")};z.formatNotebookRuntimeVersion(w)!==z.formatNotebookRuntimeVersion(B.version)&&
B.esriProvidedRuntime||(B.esriProvidedRuntime?(v.esriProvided++,r?B.requiresAdvancedPrivileges&&!B.supportsGPU&&(C.selected=""):C.selected=""):v.custom++,k.default.create("option",C,D))});return v};z.showNotebookPreview=function(E,w,D){var r=new f.default;w=a.default.restBaseUrl+"content/items/"+w+"/resources/"+D;D=e.default.hasSameOrigin(w,window.location.href);g.default.request({url:w,content:{"request.preventCache":+new Date}},{useProxy:!D}).then(function(v){if(v.html){var B=E.contentWindow.document;
B.open();B.write(v.html);B.close();r.resolve({success:!0})}else r.resolve({success:!1,error:v.error})}.bind(this),function(v){r.resolve({success:!1,error:v})}.bind(this));return r};z.canScheduleNotebooks=function(E,w){var D=new f.default,r="Notebook"===(null===w||void 0===w?void 0:w.type),v=z.notebookServerConfigured();r&&v&&!a.default.hideTasks&&z.getNotebookRuntimes().then(function(B){var C,F,G,H=null===(C=w.properties)||void 0===C?void 0:C.notebookRuntimeName,J=z.formatNotebookRuntimeVersion(null===
(F=w.properties)||void 0===F?void 0:F.notebookRuntimeVersion);B=(B||[]).some(function(I){return H===I.name&&J===z.formatNotebookRuntimeVersion(I.version)&&"1.0"!==J&&"2.0"!==J});(null===(G=null===E||void 0===E?void 0:E.userRole)||void 0===G?0:G.canScheduleNotebooks())&&(null===w||void 0===w?0:w.isOwner)&&B&&document.body.classList.add("can-schedule-notebooks");D.resolve(!0)},function(B){D.resolve(!1)});return D};z.getNotebookDataAccessUrl=function(E){return g.default.request({url:a.default.restBaseUrl+
"content/users/"+E+"/generateDirectAccessUrl",content:{storeType:"notebookWorkspace"}},{usePost:!0})};z.notebookRequest=function(E,w,D,r){r=r||{};var v={},B={"X-Requested-With":null},C=a.default.userInfo?a.default.userInfo.token:null;r.useJsonFormatParam&&(v.f="json");"GET"===w&&(v=q.__assign(q.__assign({},v),D));r.bypassCustomHeaders||(B["X-Esri-Authorization"]="Bearer "+C,r.useJsonBody&&(B["Content-Type"]="application/json"));r.contentType&&(B["Content-Type"]=r.contentType);v={data:r.useJsonBody?
D?JSON.stringify(D):null:D,method:w,handleAs:"json",headers:Object.keys(B).length?B:null,query:Object.keys(v).length?v:null,preventCache:!1===r.preventCache?!1:!0,withCredentials:r.bypassCustomHeaders?!1:!0};B={url:E};"multipart/form-data"===r.contentType?B.form=D:B.content=D;return r.useProxy?g.default.request(B,{usePost:"POST"===w,useProxy:r.useProxy}):m.default(E,v)};return z}()})},"arcgisonline/pages/utils/notifications":function(){define("require exports tslib moment/moment dojo/promise/all dojo/Deferred dojo/string ../../esriGeowConfig ../../sharing/util dojo/i18n!../../nls/arcgisonline".split(" "),
function(b,y,q,a,h,e,g,f,m,l){function d(c){return m.default.request({url:f.default.restBaseUrl+"community/users/"+c.username+"/notifications/"+c.id+"/delete"},{usePost:!0})}a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);return{fetchNotifications:function(c,k){c=c.username||c.email;return c?m.default.request({url:f.default.restBaseUrl+"community/users/"+c+"/notifications"}).then(function(t){return(t.notifications||
[]).map(function(n){if(n&&n.received&&n.id){var u={date:a.default(n.received).fromNow(),id:n.id,text:""};"webapp_not_copied"===n.type&&k.isPortal&&(n.type="webapp_not_copied_portal");l.default.notifications.types[n.type]&&(n.data.baseUrl=f.default.baseUrl,u.text=g.default.substitute(l.default.notifications.types[n.type],n.data));"message_received"===n.type&&n.data&&n.data.message&&(u.text=n.data.message);n=u.text&&u}else n=null;return n}).filter(function(n){return n})}):(c=new e.default,c.resolve([]),
c)},deleteNotifications:function(c,k){k=k.map(function(t){return{username:c.username,id:t}}).map(d);return h.default(k)}}})},"arcgisonline/pages/organization/widgets/GroupIcon":function(){define("require exports tslib dojo/text!./templates/_groupIcon.html dijit/_TemplatedMixin dijit/_WidgetBase ../../portal/PortalGroup ../../utils/dom ../../utils/formatters ../../utils/strings ../../../tsutils/declareDecorator".split(" "),function(b,y,q,a,h,e,g,f,m,l,d){a=q.__importDefault(a);h=q.__importDefault(h);
e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);return function(){function c(k,t){this.templateString=a.default;this.hide=m.default.hide;this.show=m.default.show;this.firstChar=m.default.firstChar;this.stripHTML=m.default.stripHTML;this.empty=m.default.empty;this.cssClasses="";this.size="50";this.letterSize="4";this.tooltipClass="tooltip";this._viewBoxSize="65"}c.prototype.postMixInProperties=function(){var k;
this.inherited(arguments);this._group=new g.default(q.__assign(q.__assign({},this.group),{portal:this.portal}));this._group.fillColor=this._group.id?"#"+this._group.id.substr(this._group.id.length-6):l.default.stringToHex(this._group.title);this._group.useLetter=!(null===(k=this._group.title.charAt(0))||void 0===k||!k.match(/^\w+$/));this._group.useLetter&&(this._viewBoxSize=this.size)};c.prototype.postCreate=function(){var k=this;this._img.addEventListener("error",function(){f.default.hideNode(k._img);
k._svg.classList.remove("hide")})};return c=q.__decorate([d.default(e.default,h.default)],c)}()})},"arcgisonline/sharing/dijit/SiteFooter":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/dom ../../pages/utils/organization ../util ../geow/Account ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/dom dojo/dom-construct dojo/i18n!../../nls/arcgisonline dojo/string dojo/topic dojo/text!./templates/SiteFooter.html dojo/_base/lang esri/lang".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);t=q.__importDefault(t);n=q.__importDefault(n);u=q.__importDefault(u);x=q.__importDefault(x);A=q.__importDefault(A);z=q.__importDefault(z);return function(){function E(w,D){this.templateString=x.default;this.isTroubleshootPage=
this.isSignInPage=!1}E.prototype.postMixInProperties=function(){this.i18n=A.default.mixin({},t.default.common);A.default.mixin(this.i18n,t.default.siteFooter);A.default.mixin(this.i18n,t.default.supportPage.helpLabel)};E.prototype.postCreate=function(){var w=window.location.pathname.toLowerCase();this.isSignInPage=-1!==w.indexOf(a.default.signin);this.isTroubleshootPage=-1!==w.indexOf("troubleshoot.html");this.addEventListeners()};E.prototype.startup=function(){this._loadLinks()};E.prototype.refresh=
function(){k.default.destroy(this.id+"_links");k.default.create("span",{id:this.id+"_links",className:"esriItemLinks"},this.domNode);this._loadLinks()};E.prototype.addEventListeners=function(){this.own(u.default.subscribe("contact-us-link/update",this.handleContactUsLinkUpdate.bind(this)))};E.prototype.handleContactUsLinkUpdate=function(w){var D=c.default.byId(this.id+"_links"),r=window.location.href,v=!1,B=null;-1<r.indexOf("viewer.html")&&!e.default.isMobile()&&-1===r.indexOf("returnUrl")&&(v=!0);
B=v?k.default.create("span",{innerHTML:"\x26nbsp;. "}):k.default.create("span",{innerHTML:""});z.default.isDefined(w)||(w={visible:!1,url:""});(r=c.default.byId(this.id+"_customContactUs"))?(h.default.showHide(r,w.visible),r.href=w.url):(r=k.default.create("a",{href:w.url,innerHTML:this.i18n.customContactUs,id:this.id+"_customContactUs",class:w.visible?"footer__contact-us":"footer__contact-us hide"}),w=c.default.byId(this.id+"_contactEsri"),z.default.isDefined(w)?(k.default.place(r,w,"after"),k.default.place(B,
w,"after")):(0<a.default.footerLinks.length&&k.default.place(B,D,"last"),k.default.place(r,D,"last")))};E.prototype._getTitle=function(w){return-1<(null===w||void 0===w?void 0:w.indexOf("${"))&&-1<w.indexOf("}")?n.default.substitute(w,{i18n:this.i18n}):w};E.prototype._loadLinks=function(){var w=this;f.default.getSelf(function(D){var r,v,B,C=g.default.getUser(),F=D.isPortal,G=c.default.byId(w.id+"_links"),H=window.location.href,J=!1,I=null;-1<H.indexOf("?useExisting\x3d1")&&(H=H.substring(0,H.length-
14));-1<H.indexOf("viewer.html")&&!e.default.isMobile()&&-1===H.indexOf("returnUrl")&&(J=!0);(a.default.footerLinks||[]).forEach(function(R){var W="${i18n.legal}"===(null===R||void 0===R?void 0:R.title),P=!!(W&&z.default.isDefined(C)&&z.default.isDefined(C.accountId)),S="${i18n.help}"===(null===R||void 0===R?void 0:R.title)||"support.html"===(null===R||void 0===R?void 0:R.url),L=!(S&&!z.default.isDefined(C)&&z.default.isDefined(D.access)&&"public"===D.access&&(F||!F&&z.default.isDefined(D.customBaseUrl)));
P=!W&&!S||W&&!P||S&&!L;I&&P&&k.default.place(I,G,"last");W=w._getTitle(R.title);if(R.url){-1===R.url.indexOf("http")&&-1===R.url.indexOf("mailto:")&&J&&(R.url="support.html"===R.url?D.helpBase||a.default.baseUrl+R.url:a.default.baseUrl+R.url);if("${i18n.help}"===R.title||"support.html"===R.url)R.url=D.helpBase;R=k.default.create("a",{href:R.url,target:"_blank",innerHTML:W});P&&k.default.place(R,G,"last")}else F&&"contactUs"===R.type?(P=a.default.portalName||"ArcGIS.com",S=escape(H),R="mailto:"+R.email,
R=k.default.create("a",{id:w.id+"_contactEsri",href:R+('?subject\x3d"A comment about '+P+'"\x26body\x3d"I have the following comment about the ')+(P+" Web site. %0AReferring page: "+S+' %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"'),innerHTML:W}),k.default.place(R,G,"last")):"reportAbuse"===R.type&&(S=escape(H),R="mailto:"+R.email+'?subject\x3d"Concerns about an item"',R=k.default.create("a",{href:R+
('\x26body\x3d"I have concerns about the following. %0AReferring page: '+S+" %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)\""),innerHTML:W}),k.default.place(R,G,"last"));I=J?k.default.create("span",{innerHTML:"\x26nbsp;. "}):k.default.create("span",{innerHTML:""})});var K=null!==(B=null===(v=null===(r=D.portalProperties)||
void 0===r?void 0:r.links)||void 0===v?void 0:v.contactUs)&&void 0!==B?B:{visible:!1,url:""};(r=c.default.byId(w.id+"_customContactUs"))?(h.default.showHide(r,K.visible),r.href=K.url):(r=k.default.create("a",{href:K.url,innerHTML:w.i18n.customContactUs,id:w.id+"_customContactUs",class:K.visible?"footer__contact-us":"footer__contact-us hide"}),K=c.default.byId(w.id+"_contactEsri"),z.default.isDefined(K)?(k.default.place(r,K,"after"),k.default.place(I,K,"after")):(0<a.default.footerLinks.length&&k.default.place(I,
G,"last"),k.default.place(r,G,"last")))})};return E=q.__decorate([m.default(d.default,l.default)],E)}()})},"arcgisonline/sharing/dijit/SiteFooterMap":function(){define("require exports tslib ./SiteFooter ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/text!./templates/SiteFooterMap.html".split(" "),function(b,y,q,a,h,e,g,f){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);return function(){function m(){this.templateString=
f.default}return m=q.__decorate([h.default(g.default,e.default,a.default)],m)}()})},"arcgisonline/sharing/dijit/SignUp":function(){define(["dojo","dijit","dojox","dojo/require!dijit/_Widget,dijit/_Templated,dijit/form/Button,dijit/form/ValidationTextBox,arcgisonline/sharing/util,arcgisonline/sharing/geow/Geow,arcgisonline/sharing/geow/Account,arcgisonline/sharing/dijit/dialog/ChoiceDlg,arcgisonline/sharing/dijit/dialog/TermsOfUseDlg"],function(b,y,q){b.provide("arcgisonline.sharing.dijit.SignUp");
b.require("dijit._Widget");b.require("dijit._Templated");b.require("dijit.form.Button");b.require("dijit.form.ValidationTextBox");b.require("arcgisonline.sharing.util");b.require("arcgisonline.sharing.geow.Geow");b.require("arcgisonline.sharing.geow.Account");b.require("arcgisonline.sharing.dijit.dialog.ChoiceDlg");b.require("arcgisonline.sharing.dijit.dialog.TermsOfUseDlg");b.declare("arcgisonline.sharing.dijit.SignUp",[y._Widget,y._Templated],{util:arcgisonline.sharing.util,termsOfUseDlg:arcgisonline.sharing.dijit.dialog.TermsOfUseDlg,
geow:arcgisonline.sharing.geow.Geow,redirectUrl:esriGeowConfig.baseUrl+"home.html",orgRedirectUrl:esriGeowConfig.baseUrl+"organization.html",setupRedirectUrl:esriGeowConfig.baseUrl+"setup.html",widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent"\x3e\n  \x3cdiv id\x3d"sign-up-form" class\x3d"grid_16"\x3e\n    \x3ch1 id\x3d"sign_up_title"\x3e\x3c/h1\x3e\n    \x3cdiv id\x3d"register-error"\x3e\n    \x3c/div\x3e\n    \x3cdiv dojotype\x3d"dijit.form.Form" id\x3d"register-form" method\x3d"POST" action\x3d""\x3e\n      \x3cp class\x3d"register"\x3e\n        \x3cb id\x3d"sign-up-title"\x3e\x3c/b\x3e\n      \x3c/p\x3e\n      \x3cp class\x3d"freeTrial" style\x3d"display:none;"\x3e${i18n.activateTrialMsg}\x3c/p\x3e\n      \x3cp\x3e\n        \x3ctable\x3e\n          \x3ctbody\x3e\n            \x3ctr\x3e\n              \x3ctd class\x3d"grid_2 alpha"\x3e\n                \x3clabel for\x3d"register_username" style\x3d"padding:0;margin:0;"\x3e\n                  ${i18n.userLabel}\n                \x3c/label\x3e\n              \x3c/td\x3e\n              \x3ctd\x3e\n                \x3cdiv id\x3d"register_username" name\x3d"register_username" class\x3d"grid_6 omega" style\x3d"padding:2px;margin:0;" dojotype\x3d"dijit.form.TextBox" trim\x3d"true"\x3e\n                \x3c/div\x3e\n              \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr height\x3d"5"\x3e\n              \x3ctd colspan\x3d"2" height\x3d"5"\x3e\n              \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr\x3e\n              \x3ctd class\x3d"grid_2 alpha"\x3e\n                \x3clabel for\x3d"register_password" style\x3d"padding:0;margin:0;"\x3e\n                  ${i18n.passwordLabel}\n                \x3c/label\x3e\n              \x3c/td\x3e\n              \x3ctd\x3e\n                \x3cdiv id\x3d"register_password" name\x3d"register_password" class\x3d"grid_6 omega" style\x3d"padding:2px;margin:0;" type\x3d"password" dojotype\x3d"dijit.form.TextBox"trim\x3d"true"\x3e\n                \x3c/div\x3e\n              \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr\x3e\n              \x3ctd\x3e\x3c/td\x3e\n              \x3ctd\x3e\n                \x3cdiv class\x3d"freeTrial" style\x3d"display:none;"\x3e\n                  \x3ca dojoAttachPoint\x3d"_signInHelpLink" href\x3d"troubleshoot.html"\x3e${i18n.needHelpSign}\x3c/a\x3e\n                  \x3cdiv\x3e\n                    \x3cinput id\x3d"remember-me" value\x3d"off" dojotype\x3d"dijit.form.CheckBox" /\x3e\n                    \x3clabel for\x3d"remember-me"\x3e${i18n.rememberMe}\x3c/label\x3e\n                  \x3c/div\x3e\n                \x3c/div\x3e\n                \x3cdiv class\x3d"register"\x3e\n                  \x3cdiv id\x3d"forgotPasswordLinkDiv"\x3e\n                    \x3ca id\x3d"forgotPasswordLink"\x3e${i18n.forgotPassword}\x3c/a\x3e\n                  \x3c/div\x3e\n                \x3c/div\x3e\n                \x3cdiv style\x3d"margin-top:10px;"\x3e\n                  \x3cbutton id\x3d"button_sign_in" class\x3d"calcite blue" dojoAttachPoint\x3d\'_btnSignIn\' type\x3d"submit" label\x3d"${i18n.register}" dojotype\x3d"dijit.form.Button"\x3e\n\n                  \x3c/button\x3e\n                  \x3cimg dojoAttachPoint\x3d\'_keyImgicon\' style\x3d"display:none; position:absolute; padding-left:10px;"/\x3e\n                  \x3cbr/\x3e\n                  \x3cbr/\x3e\n                  \x3cdiv id\x3d"registerDiv"\x3e\n                  \x3cp\x3e\n                    \x3cb id\x3d"sign-up-no-account"\x3e\x3c/b\x3e\n                    \x3cbr/\x3e\n                    \x3cspan\x3e\x3ca id\x3d"registerLink"\x3e${i18n.createAccount}\x3c/a\x3e\x3c/span\x3e\n                  \x3c/p\x3e\n                  \x3c/div\x3e\n                \x3c/div\x3e\n              \x3c/td\x3e\n            \x3c/tr\x3e\n          \x3c/tbody\x3e\n        \x3c/table\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv style\x3d"width:100%; clear:both;"\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n',
i18n:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").signUpWidget);this.defaultOrgTitleText=this.i18n.myAccount},postCreate:function(){b.attr(this._keyImgicon,"src",this.util.relativeToExplicitUrl("images/goldKey.gif"));esriGeowConfig.portalName&&b.style(this._keyImgicon,"display","none")},startup:function(){this.inherited(arguments);b.mixin(this,
b.queryToObject(window.location.search.slice(1)));this.trial=this.type&&("trial"===this.type.toLowerCase()||"trial press"===this.type.toLowerCase());esri.config.defaults.io.proxyUrl=esriGeowConfig.proxyServer;this._svcUrl=esriGeowConfig.restBaseUrl+(esriGeowConfig.restBaseUrl.lastIndexOf("/")===esriGeowConfig.restBaseUrl.length-1?"":"/");this._communityUri=this._svcUrl+"community/";this._usersUri=this._communityUri+"users/";this._accountsUri=this._svcUrl+"portals/";this._requestParams={f:"json"};
this.loadConnections();esriGeowConfig.account_registration?b.byId("registerLink").href=esriGeowConfig.account_registration:b.style(b.byId("registerDiv"),"display","none");esriGeowConfig.forgotPwd?b.byId("forgotPasswordLink").href=esriGeowConfig.forgotPwd:b.style(b.byId("forgotPasswordLinkDiv"),"display","none");b.byId("sign-up-title").innerHTML=b.string.substitute(this.i18n.enterYourAccountInfo,{account:esriGeowConfig.esriGlobalAccount?esriGeowConfig.esriGlobalAccount:this.i18n.esriGlobalAccount});
b.byId("sign-up-no-account").innerHTML=b.string.substitute(this.i18n.dontHaveAccount,{account:esriGeowConfig.esriGlobalAccount?esriGeowConfig.esriGlobalAccount:this.i18n.esriGlobalAccount});this.trial?(b.attr("registerYour","innerHTML",this.i18n.activateTrial),this._btnSignIn.set("label",this.i18n.signIn),b.query(".registerYour").style("display","none"),b.query(".freeTrial").style("display","block")):esriGeowConfig.useDefaultIdentityStore?b.attr("registerYour","innerHTML",this.i18n.createAccount):
b.attr("registerYour","innerHTML",this.i18n.registerYour+(esriGeowConfig.esriGlobalAccount||this.i18n.esriGlobalAccount));setTimeout(function(){b.byId("register_username").focus()},350);b.subscribe("registerUser",this,"registerUser");b.subscribe("declineTermsOfUse",this,"declineTermsOfUse")},loadConnections:function(){b.connect(y.byId("button_register"),"onClick",this,"signUp");b.connect(y.byId("register-form"),"onSubmit",this,"signUp")},signIn:function(a){this.invitation?arcgisonline.sharing.geow.Account.getInvitation(this.invitation,
b.hitch(this,this.onInvitationInfo),b.hitch(this,this.onInvitationInfo)):this.activationcode?this._activateAccount(a).then(b.hitch(this,"routeUser")):this.routeUser()},onInvitationInfo:function(a,h){if(a&&a.code&&a.message&&403===a.code){var e="\x3cp\x3e"+this.i18n.emailInvitation+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkInstructions+"\x3c/p\x3e";h=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();h.onOkClick=b.hitch(this,function(f,m){f.hide();this.routeUser()},h);h.show({title:this.i18n.notice,
message:e})}else if(a&&a.code&&a.message&&400===a.code)e="\x3cp\x3e"+this.i18n.invitationUsedMsg+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e",h=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),h.onOkClick=b.hitch(this,function(f,m){f.hide();this.routeUser()},h),h.show({title:this.i18n.notice,message:e});else if(a&&a.id&&a.id===this.invitation){h=arcgisonline.sharing.util.getUser();var g="\x3cp\x3e"+b.string.substitute(this.i18n.membershipPending,{account:"\x3cstrong\x3e"+
a.account.name+"\x3c/strong\x3e"})+"\x3c/p\x3e";h="\x3cp\x3e\x3cstrong\x3e"+b.string.substitute(this.i18n.ByAcceptingInvite,{account:a.account.name,name:h.username})+"\x3c/strong\x3e\x3c/p\x3e\x3cp\x3e\x3cul\x3e\x3cli\x3e"+b.string.substitute(this.i18n.transferMsg,{account:a.account.name,name:h.username})+"\x3c/li\x3e\x3cli\x3e"+this.i18n.leaveOrganization+"\x3c/li\x3e\x3cli\x3e"+b.string.substitute(this.i18n.itemsMsg,{beginStrong:"\x3cstrong\x3e",endStrong:"\x3c/strong\x3e"})+"\x3c/li\x3e\x3cli\x3e"+
this.i18n.accountManagedMsg+"\x3c/li\x3e\x3c/ul\x3e\x3c/p\x3e\x3cp\x3e"+b.string.substitute(this.i18n.currentOrNewAccount,{account:a.account.name})+"\x3c/p\x3e";e={title:this.i18n.notice,message:h,choiceOneTitle:this.i18n.useCurrentAccount,choiceTwoTitle:this.i18n.createNewOne};e.choiceOneHandler=b.hitch(this,function(f){a.mustApprove&&!0===a.mustApprove?(f=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),f.onOkClick=b.hitch(this,function(m){m.hide();arcgisonline.sharing.geow.Account.acceptInvitation(this.invitation,
b.hitch(this,this.onInvitationAccepted),b.hitch(this,this.onInvitationAccepted))},f),f.show({title:this.i18n.notice,message:g})):arcgisonline.sharing.geow.Account.acceptInvitation(this.invitation,b.hitch(this,this.onInvitationAccepted),b.hitch(this,this.onInvitationAccepted))});e.choiceTwoHandler=b.hitch(this,function(f){this.routeUser()});h=arcgisonline.sharing.dijit.dialog.ChoiceDlg.prototype.statics.getInstance();h.show(e)}else this.routeUser()},onInvitationAccepted:function(a){if(a&&a.success&&
!0===a.success){var h={username:y.byId("register_username").getValue(),password:y.byId("register_password").getValue(),expiration:esriGeowConfig.tokenExpiration};this.geow.signin(h,b.hitch(this,this.routeUser),b.hitch(this,"signInError"))}else a&&a.code&&a.message&&500===a.code&&"Invitation has already been accepted."===b.trim(a.message)?(a="\x3cp\x3e"+this.i18n.acceptedInvite+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOk+"\x3c/p\x3e",h=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),
h.onOkClick=b.hitch(this,function(e,g){e.hide();this.routeUser()},h),h.show({title:this.i18n.notice,message:a})):(h=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),h.onOkClick=b.hitch(this,function(e,g){e.hide();window.location=esriGeowConfig.baseUrl.replace("http:","https:")+esriGeowConfig.signin+"?invitation\x3d"+this.invitation},h),a.code&&a.message?("User already member of an account."===a.message&&(a.message=this.i18n.userAnotheOrg),h.show({title:this.i18n.unableJoin,
message:a.message})):h.show({title:this.i18n.unableJoin,message:this.i18n.problemJoingOrg}))},routeUser:function(){var a=this.returnUrl,h=esriGeowConfig.baseUrl+esriGeowConfig.signin;a&&-1<a.indexOf(h)&&(a=null);(this._user=this.util.getUser()).accountId?this._fetchSelf().then(b.hitch(this,"routeOrg")):window.location=a?a:esriGeowConfig.baseUrl.replace("https:","http:")+"user.html?newUser\x3dtrue"},routeOrg:function(a,h){h=this._user;var e=this.returnUrl,g=esriGeowConfig.baseUrl+esriGeowConfig.signin;
e&&-1<e.indexOf(g)&&(e=null);var f=this._organization=a||{};a=f.allSSL;e?(f.urlKey&&f.customBaseUrl&&(h=this._util.parseUrl(e).host,-1===h.indexOf(f.urlKey+"."+f.customBaseUrl)&&(g=this.util.getCookie("esri_auth"),e=e.replace(h,f.urlKey+"."+f.customBaseUrl),e=this.util.getBridgeUrl(e,g))),window.location=a?e.replace("http:","https:"):e):f.urlKey&&f.customBaseUrl?(g=null,-1===window.location.host.indexOf(f.urlKey+"."+f.customBaseUrl)&&(g=this.util.getCookie("esri_auth")),e=(a?"https:":"http:")+"//"+
f.urlKey+"."+f.customBaseUrl,f=esriGeowConfig.baseUrl.indexOf(location.host),e=-1<f?e+(esriGeowConfig.baseUrl.substring(f+location.host.length)+("account_admin"===h.role?"organization.html":"home.html")):a?this.redirectUrl.replace("http:","https:"):this.redirectUrl.replace("https:","http:"),g&&(e=esriGeowConfig.bridgeUrl+"?url\x3d"+e+"\x26exp\x3d"+Math.ceil((new Date(g.expires)-new Date)/1E3)),window.location=e):window.location="account_admin"!==h.role||f.urlKey?"account_admin"===h.role&&this.activationcode?
a?this.orgRedirectUrl.replace("http:","https:"):this.orgRedirectUrl.replace("https:","http:"):a?this.redirectUrl.replace("http:","https:"):this.redirectUrl.replace("https:","http:"):a?this.setupRedirectUrl.replace("http:","https:"):this.setupRedirectUrl.replace("https:","http:")},signUp:function(a){a.preventDefault();b.query("#register-error")&&(b.byId("register-error").innerHTML="",b.removeClass("register-error","error"));!1!==this.validateForm()&&(y.byId("button_sign_in").set("disabled",!0),this.trial||
y.byId("button_sign_in").set("label",this.i18n.registering),esriGeowConfig.portalName?this.registerUser():this.trial&&this.activationcode?(this.signout(),this._signin(b.hitch(this,function(){this.termsOfUseDlg.prototype.statics.getInstance().show()})).then(b.hitch(this,function(){this._showAlreadyRegisteredDlg()}))):this.termsOfUseDlg.prototype.statics.getInstance().show())},_showAlreadyRegisteredDlg:function(){var a=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();a.show({title:this.i18n.alreadyRegisteredTitle,
message:this.i18n.alreadyRegistered});var h=b.connect(a,"onHide",b.hitch(this,function(){b.disconnect(h);y.byId("register_username").set("value","");y.byId("register_password").set("value","");y.byId("button_sign_in").set("disabled",!1);setTimeout(b.hitch(function(){y.byId("register_username").focus()}),300)}))},validateForm:function(){var a=y.byId("register_username").getValue(),h=y.byId("register_password").getValue(),e=null;if(!(null!=a&&""!==a||null!=h&&""!==h))e=this.i18n.error.userNamePassRqd;
else if(null==a||""===a)e=this.i18n.error.usernameRqd;else if(null==h||""===h)e=this.i18n.error.passRqd;if(null==e)return!0;this.showError({message:e});return!1},signout:function(){esriGeowConfig.userInfo=null;esriGeowConfig.userPreferences=null;b.cookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain});b.cookie("ESRI_Webmap",null,{expires:-1,path:"/",domain:document.domain});b.publish("onSignOut",[])},registerUser:function(a){a=b.byId("register_username").value;var h=b.byId("register_password").value;
a={username:a,password:h};this.signout();this.geow.signup(a,b.hitch(this,function(e,g){if(null!=e.error&&""!==e.error)y.byId("button_sign_in").set("disabled",!1),y.byId("button_sign_in").set("label",this.trial?this.i18n.signIn:this.i18n.register),this.errorHandler(e,g);else return this._signin().then(b.hitch(this,"signIn"))}),b.hitch(this,"signInError"))},declineTermsOfUse:function(){y.byId("button_sign_in").set("disabled",!1)},signInError:function(a,h){y.byId("button_sign_in").set("disabled",!1);
y.byId("button_sign_in").set("label",this.trial?this.i18n.signIn:this.i18n.register);h="\x3cb style\x3d'font-size:1.2em;line-height:30px;'\x3e"+b.string.substitute(this.i18n.unableRegister,{portalName:esriGeowConfig.portalName?esriGeowConfig.portalName:this.i18n.arcgisOnline})+"\x3c/b\x3e\x3cbr/\x3e";h+="\x3cspan style\x3d'color:#000000;'\x3e";h=a.code&&500===a.code&&a.message&&"Unable to register user. Username contains unsupported characters."===a.message?h+this.i18n.invalidUsername:h+(this.i18n.usernameSpellCheck+
"\x3cbr/\x3e"+this.i18n.caseSensitive);this.showError({message:h+"\x3c/span\x3e\x3cbr/\x3e\x26nbsp;"})},_activateAccount:function(a){return this._request(this._accountsUri+"activate",{code:this.activationcode,token:a.token},{usePost:!0,errBack:b.hitch(this,"_activateError")}).then(b.hitch(this,"_signin"))},_activateError:function(a){a.details=a.details&&a.details.length?b.filter(a.details,"return item !\x3d\x3d null"):null;a.details&&a.details.length&&(a.details=a.details.join("\x3cbr /\x3e"),a.message=
a.message?a.message+"\x3cbr /\x3e"+a.details:a.details);a=b.mixin(b.mixin({},{title:"Error",message:"There was an error."}),a);var h=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();h.onOkClick=b.hitch(this,function(e){e.hide();this.routeUser()},h);h.show(a)},_signin:function(a){var h=new b.Deferred,e={username:y.byId("register_username").getValue(),password:y.byId("register_password").getValue(),expiration:b.byId("remember-me").checked?esriGeowConfig.longTokenExpiration:
esriGeowConfig.tokenExpiration};this.geow.signin(e,b.hitch(this,"_resolveDfd",h),a||b.hitch(this,"signInError"));return h},_resolveDfd:function(a,h){if(h.error)throw this.signInError(h.error),h.error;a.resolve(h)},_fetchSelf:function(){var a=this.util.getUser();esriGeowConfig.self=null;return this._request(this._accountsUri+"self",{token:a.token})},_request:function(a,h,e){h=b.mixin(h||{},this._requestParams);return this.util.request({url:a,content:h},e||{}).then(b.hitch(this,function(g){return g.error?
e.errBack?e.errBack(g.error):this._showError(g.error):g}),b.hitch(this,function(g){e.errBack?e.errBack(g):this._showError(g);throw g;}))},showError:function(a){a=a.error||a||{};a.code=a.code||0;a.details=a.details&&a.details.length?b.filter(a.details,"return item !\x3d\x3d null"):null;a.details&&a.details.length&&(a.details=a.details.join("\x3cbr /\x3e"),a.message=a.message?a.message+"\x3cbr /\x3e"+a.details:a.details);b.addClass("register-error","error");b.attr(b.byId("register-error"),"innerHTML",
a.message+"");return!0}})})},"arcgisonline/sharing/dijit/dialog/ChoiceDlg":function(){define("require dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-construct dojo/on dojo/query dojo/aspect dijit/Dialog dijit/form/Button dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin esri/lang ../../../esriGeowConfig dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ChoiceDlg.html".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A){var z=y("arcgisonline.sharing.dijit.dialog.ChoiceDlg",
[c,k,t],{declaredClass:"arcgisonline.sharing.dijit.dialog.ChoiceDlg",widgetsInTemplate:!0,templateString:A,title:"",message:"",choiceOneButton:null,choiceOneTitle:"",choiceOneHandler:null,choiceTwoButton:null,choiceTwoTitle:"",choiceTwoHandler:null,choiceOneConn:null,choiceTwoConn:null,postCreate:function(){this.choiceOneHandler=g(this.choiceOneButton,"click",q.hitch(this,"onChoiceOneClick"));this.choiceTwoHandler=g(this.choiceTwoButton,"click",q.hitch(this,"onChoiceTwoClick"))},postMixInProperties:function(){this.inherited(arguments);
this.i18n=q.mixin({},x.common);q.mixin(this.i18n,x.choiceDlg);this.choiceOneTitle=this.i18n.ok;this.choiceTwoTitle=this.i18n.cancel},destroy:function(){this.inherited(arguments);n.isDefined(this.choiceOneConn)&&this.choiceOneConn.remove();n.isDefined(this.choiceTwoConn)&&this.choiceTwoConn.remove()},show:function(E){E.title&&""!==E.title&&(this.title=E.title);E.message&&""!==E.message&&(this.message=E.message);E.choiceOneTitle&&""!==E.choiceOneTitle&&(this.choiceOneTitle=E.choiceOneTitle);E.choiceTwoTitle&&
""!==E.choiceTwoTitle&&(this.choiceTwoTitle=E.choiceTwoTitle);E.choiceOneHandler&&(this.choiceOneHandler=E.choiceOneHandler,this.setChoiceOneHandler());E.choiceTwoHandler&&(this.choiceTwoHandler=E.choiceTwoHandler,this.setChoiceTwoHandler());E.closeHandler&&m.after(this._dialog,"onCancel",E.closeHandler);this._dialog.set("title",this.title);h.set(this.choiceContent,"innerHTML",this.message);this.choiceOneButton.set("label",this.choiceOneTitle);this.choiceTwoButton.set("label",this.choiceTwoTitle);
this._dialog.show()},setChoiceOneHandler:function(){n.isDefined(this.choiceOneConn)&&(this.choiceOneConn.remove(),this.choiceOneConn=void 0);this.choiceOneConn=g(this.choiceOneButton,"click",q.hitch(this,function(){this.hide();this.choiceOneHandler()}))},setChoiceTwoHandler:function(){n.isDefined(this.choiceTwoConn)&&(this.choiceTwoConn.remove(),this.choiceTwoConn=void 0);this.choiceTwoConn=g(this.choiceTwoButton,"click",q.hitch(this,function(){this.hide();this.choiceTwoHandler()}))},onChoiceOneClick:function(){this.hide()},
onChoiceTwoClick:function(){this.hide()},hide:function(){this._dialog.hide()}});z.prototype.statics={getInstance:function(){this._instance||(this._instance=new z);return this._instance}};return z})},"arcgisonline/sharing/dijit/dialog/TermsOfUseDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/_Widget,dijit/_Templated,arcgisonline/sharing/util,dijit/Dialog"],function(b,y,q){b.provide("arcgisonline.sharing.dijit.dialog.TermsOfUseDlg");b.require("dijit._Widget");b.require("dijit._Templated");
b.require("arcgisonline.sharing.util");b.require("dijit.Dialog");b.declare("arcgisonline.sharing.dijit.dialog.TermsOfUseDlg",[y._Widget,y._Templated],{util:arcgisonline.sharing.util,widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContainer"\x3e\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" id\x3d"terms-of-use-dialog" data-dojo-attach-point\x3d"_dialog" title\x3d"${i18n.title}" execute\x3d"" style\x3d"overflow-y:auto;"\x3e\n    \x3cform id\x3d"terms-of-use-form" method\x3d"POST" action\x3d"" style\x3d"height:100%;overflow-y:auto;padding-left:10px;"\x3e\n      \x3cdiv style\x3d"height:30px; text-align:center;"\x3e\n        \x3cspan style\x3d"font-size:1.1em; font-weight:bold"\x3e${i18n.termsOfUseTitle}\x3c/span\x3e\n      \x3c/div\x3e\n      \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" id\x3d"tos" style\x3d"background:#FFF;border:solid 1px #000;overflow-x:hidden;overflow-y:hidden;width:400px;height:250px;"\x3e\n        \x3ca href\x3d\'\'\x3e\x3c/a\x3e\n        \x3ciframe id\x3d"termsFrame" src\x3d"termsofuse.html" style\x3d"width:100%;height:250px;max-width:100%;max-height:250px;"\x3e\x3c/iframe\x3e\n      \x3c/div\x3e\n      \x3cdiv style\x3d"padding-top:10px;"\x3e\n        \x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"http://www.esri.com/legal/licensing-translations" target\x3d"_blank"\x3e${i18n.otherLanguages}\x3c/a\x3e\x3c/span\x3e\n      \x3c/div\x3e\n      \x3cdiv style\x3d"height:40px; padding-top:10px;"\x3e\n        \x3cbutton id\x3d"button_accept" type\x3d"submit" class\x3d"primary" data-dojo-type\x3d"dijit/form/Button"\x3e\n            ${i18n.accept}\n        \x3c/button\x3e\n        \x3cbutton id\x3d"button_decline" class\x3d"jevent cancel" type\x3d"cancel" data-dojo-type\x3d"dijit/form/Button"\x3e\n            ${i18n.noaccept}\n        \x3c/button\x3e\n      \x3c/div\x3e\n    \x3c/form\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
_firstLoad:!0,statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.TermsOfUseDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").termsOfUseDlg)},postCreate:function(){this.loadConnections()},show:function(a){y.byId("terms-of-use-dialog").show();esri.isTouchEnabled?
(b.style(b.byId("terms-of-use-dialog"),"width","500px"),b.style(b.byId("tos"),"width","455px"),b.style(b.byId("tos"),"overflow-y","scroll")):this._firstLoad&&(b.style(b.byId("terms-of-use-dialog"),"width","455px"),b.isFF||10>b.isIE?(b.isFF&&b.style(b.byId("tos"),"height",parseInt(b.style(b.byId("terms-of-use-dialog"),"height"))-169+"px"),9>b.isIE&&b.style(b.byId("tos"),"height",parseInt(b.style(b.byId("terms-of-use-dialog"),"height"))-208+"px"),8>b.isIE&&b.style(b.byId("tos"),"height",parseInt(b.style(b.byId("terms-of-use-dialog"),
"height"))-133+"px")):b.style(b.byId("tos"),"height",parseInt(b.style(b.byId("terms-of-use-dialog"),"height"))-169+"px"),b.style(b.byId("terms-of-use-form"),"overflow-y","hidden"),this._firstLoad=!1)},loadConnections:function(){b.query(".jevent").connect("onclick",function(a){a.preventDefault()});b.connect(b.byId("button_decline"),"onclick",this,"declineTerms");b.connect(b.byId("terms-of-use-form"),"onsubmit",this,"registerUser")},hide:function(){y.byId("terms-of-use-dialog").hide()},registerUser:function(a){a.preventDefault();
this.hide();b.publish("registerUser",["true"])},declineTerms:function(a){a.preventDefault();this.hide();b.publish("declineTermsOfUse",["true"])}})})},"arcgisonline/sharing/dijit/SignUpInternal":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../../pages/dijit/PasswordStrength ../../pages/portal/Portal ../../pages/utils/dom ../../pages/utils/validation ../geow/Account ./dialog/GeneralDlg ../geow/Geow ./Role ../util ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/dom-construct dojo/_base/kernel dojo/string dojo/i18n!../../nls/arcgisonline dojo/io-query dojo/_base/lang dojo/on dojo/text!./templates/SignUpInternal.html dojo/topic esri/config esri/lang".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B,C,F,G,H,J){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);t=q.__importDefault(t);n=q.__importDefault(n);u=q.__importDefault(u);x=q.__importDefault(x);A=q.__importDefault(A);z=q.__importDefault(z);E=q.__importDefault(E);w=q.__importDefault(w);D=q.__importDefault(D);
r=q.__importDefault(r);v=q.__importDefault(v);B=q.__importDefault(B);C=q.__importDefault(C);F=q.__importDefault(F);G=q.__importDefault(G);H=q.__importDefault(H);J=q.__importDefault(J);return function(){function I(){this.templateString=F.default;this.widgetsInTemplate=!0;this.i18n=q.__assign(q.__assign(q.__assign({},r.default.common),r.default.signUpInternalWidget),{securityQuestions:r.default.securityQuestions,passwordTooWeak:r.default.myOrganization.inviteMembers.passwordTooWeak,usernameTooShort:r.default.organizationInvite.step2Create.invalid.usernameTooShort,
usernameTooLong:r.default.organizationInvite.step2Create.invalid.usernameTooLong,usernameInvalidChars:r.default.organizationInvite.step2Create.invalid.usernameInvalidChars,usernameStartEndChars:r.default.organizationInvite.step2Create.invalid.usernameStartEndChars});this.redirectUrl=a.default.baseUrl.replace("https:","http:")+"home.html";this.orgRedirectUrl=a.default.baseUrl.replace("https:","http:")+"organization.html";this.isValidUsername=!1;this.accountMode="arcgis"}I.prototype.postCreate=function(){this.inherited(arguments);
this._fetchPasswordPolicy()};I.prototype.startup=function(){var K=this;this.inherited(arguments);l.default.getSelf(function(R){K._portal=new g.default({url:a.default.restBaseUrl,self:B.default.clone(R)});K._portal.on("load",function(){K._setupPasswordStrength()});H.default.defaults.io.corsEnabledServers.push(a.default.DEPLOY_ROOT);H.default.defaults.io.corsEnabledServers.push("http://"+location.host);H.default.defaults.io.corsEnabledServers.push("https://"+location.host);H.default.defaults.io.proxyUrl=
a.default.proxyUrl;B.default.mixin(K,v.default.queryToObject(window.location.search.slice(1)));K._svcUrl=a.default.restBaseUrl+(a.default.restBaseUrl.lastIndexOf("/")===a.default.restBaseUrl.length-1?"":"/");K._communityUri=K._svcUrl+"community/";z.default.set("registerYour","innerHTML",K.i18n.signUpInternalTitle);K._setupQuestions();K._loadConnections();K._checkInvitation();setTimeout(function(){K._firstname.focus()},50);G.default.subscribe("registerUser",K._registerUser.bind(K));K._adjustNameRows()})};
I.prototype._loadConnections=function(){this.own(C.default(this._firstname,"change",this._validFirstName.bind(this)),C.default(this._lastname,"change",this._validLastName.bind(this)),C.default(this._email,"change",this._validEmail.bind(this)),C.default(this._confirmEmail,"change",this._validConfirmEmail.bind(this)),C.default(this._username,"change",this._usernameChange.bind(this)),C.default(this._pwd,"change",this._validPassword.bind(this)),C.default(this._pwd,"keyup",this._validPassword.bind(this)),
C.default(this._verifyPwd,"change",this._validVerifyPassword.bind(this)),C.default(this._identityQuestion,"change",this._identityQuestionChange.bind(this)),C.default(this._identityAnswer,"change",this._validIdentityAnswer.bind(this)),C.default(this._form,"submit",this._signUp.bind(this)),C.default(this._cancelBtn,"click",this._cancel.bind(this)))};I.prototype._adjustNameRows=function(){"ja"===w.default.locale&&E.default.place("first-name-block","last-name-block","after")};I.prototype._checkInvitation=
function(){var K=this;this.invitation&&this._fetchInvitation().then(function(R){K.invitationOrgName=R.account.name},this._fetchInvitationError.bind(this))};I.prototype._setupPasswordStrength=function(){this._strengthMeter=new e.default({baseClass:"leader-half",portal:this._portal},this.domNode.querySelector(".js-strength-meter"));this._strengthMeter.update(this._pwd.value)};I.prototype._setupQuestions=function(){var K=this;this.identityQuestions=[{id:0,name:this.i18n.securityQLabel},{id:1,name:this.i18n.securityQuestions[1]},
{id:2,name:this.i18n.securityQuestions[2]},{id:3,name:this.i18n.securityQuestions[3]},{id:4,name:this.i18n.securityQuestions[4]},{id:5,name:this.i18n.securityQuestions[5]},{id:6,name:this.i18n.securityQuestions[6]},{id:7,name:this.i18n.securityQuestions[7]},{id:8,name:this.i18n.securityQuestions[8]},{id:9,name:this.i18n.securityQuestions[9]},{id:10,name:this.i18n.securityQuestions[10]},{id:11,name:this.i18n.securityQuestions[11]},{id:12,name:this.i18n.securityQuestions[12]},{id:13,name:this.i18n.securityQuestions[13]},
{id:14,name:this.i18n.securityQuestions[14]}];this.identityQuestions.forEach(function(R){E.default.create("option",{value:R.id,innerHTML:R.name},K._identityQuestion)})};I.prototype._fetchPasswordPolicy=function(){var K=this;t.default.request({url:t.default.getSecureUrl(a.default.restBaseUrl)+"portals/self/securityPolicy/passwordPolicy"}).then(function(R){K._passwordPolicy=!R||R.code||R.messageCode?null:R})};I.prototype._registerUser=function(K){var R=this;K=D.default.trim(this._firstname.value);var W=
D.default.trim(this._lastname.value),P=D.default.trim(this._email.value),S=t.default.stripHTML(D.default.trim(this._username.value)),L=D.default.trim(this._pwd.value),aa=D.default.trim(this._identityAnswer.value),ba={fullname:"ja"===w.default.locale?W+" "+K:K+" "+W,firstname:K,lastname:W,email:P,username:S,password:L,securityQuestionIdx:this._identityQuestionID,securityAnswer:aa,invitationId:void 0,provider:void 0};this.invitation&&(ba.invitationId=this.invitation,ba.provider=this.accountMode);c.default.signup(ba,
function(O,V){null!=O.error&&""!==O.error?(f.default.disableNode(R._createAccountBtn,!1),z.default.set(R._createAccountBtn,"innerHTML",R.i18n.createAcc),O.error.messageCode&&"COM_1054"===O.error.messageCode?h.default.createSpecifiedDialog(d.default).show({title:R.i18n.errorTitle,message:R.i18n.error.maxUsers}):R._handleError(O)):R.invitation?c.default.signInHandler(ba.username,R._acceptInvitation.bind(R,ba),R._signInError.bind(R),O,V):c.default.signInHandler(ba.username,R._signIn.bind(R,S,L),R._signInError.bind(R),
O,V)}.bind(this),this._signUpError.bind(this))};I.prototype._signIn=function(K,R){var W=this;c.default.signin({username:K,password:R,expiration:a.default.tokenExpiration},function(){a.default.self=null;l.default.getSelf(W.routeUser.bind(W))},this._signInError.bind(this))};I.prototype.routeUser=function(K){var R=t.default.getUser(),W=new k.default({portalUser:K.user||{}}),P=v.default.queryToObject(window.location.search.slice(1)).returnUrl;if(!K||K.code||K.message)null!==P?window.location=P:(R=t.default.getHttpUrl()+
"user.html?newUser\x3dtrue",window.location=t.default.getSecureUrl(R));else{K=K.allSSL;var S=t.default.usePortalSSL();this.redirectUrl=t.default.getHttpUrl()+"home.html";this.orgRedirectUrl=t.default.getHttpUrl()+"organization.html";P?(S=-1<P.indexOf("https:"),window.location=K||S?t.default.getSecureUrl(P):P):"account_admin"===R.role&&(!a.default.self.restrictOrganizationPageToAdmin&&W.canViewOrgUsers()||a.default.self.restrictOrganizationPageToAdmin&&W.isAdmin())?window.location=K||S?t.default.getSecureUrl(this.orgRedirectUrl):
this.orgRedirectUrl:window.location=K||S?t.default.getSecureUrl(this.redirectUrl):this.redirectUrl}};I.prototype._acceptInvitation=function(K){var R=this;l.default.acceptInvitation(this.invitation,function(){c.default.signin({username:K.username,password:K.password,expiration:a.default.tokenExpiration},R._signIn.bind(R),R._signInError.bind(R))},this._acceptFail.bind(this))};I.prototype._signUp=function(K){var R=this;K&&K.preventDefault();this._validates().then(function(W){W&&(f.default.disableNode(R._createAccountBtn,
!0),z.default.set(R._createAccountBtn,"innerHTML",R.i18n.creatingAcc),R._registerUser(!0))})};I.prototype._cancel=function(){var K=a.default.baseUrl.replace("http:","https:")+a.default.signin;this.invitation&&(K+="?invitation\x3d"+this.invitation);window.location=K};I.prototype._fetchInvitationError=function(K){if(K&&K.code&&K.message&&403===K.code){K="\x3cp\x3e"+this.i18n.emailInvitation+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e";var R=h.default.createSpecifiedDialog(d.default);R.onOkClick=
function(){R.hide();window.location=a.default.baseUrl.replace("http:","https:")+a.default.signin};R.show({title:this.i18n.notice,message:K})}else K&&K.code&&K.message&&400===K.code?(K="\x3cp\x3e"+this.i18n.invitationUsedMsg+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e",R=h.default.createSpecifiedDialog(d.default),R.onOkClick=function(){R.hide();window.location=t.default.getSecureUrl()+a.default.signin},R.show({title:this.i18n.notice,message:K})):(null===K||void 0===K?void 0:K.id)===this.invitation?
this.invitationOrgName=K.account.name:this.invitation=null};I.prototype._acceptFail=function(){var K=this,R=h.default.createSpecifiedDialog(d.default);R.onOkClick=function(){R.hide();f.default.disableNode(K._createAccountBtn,!1);z.default.set(K._createAccountBtn,"innerHTML",K.i18n.createAcc)};R.show({title:this.i18n.unableToJoin,message:this.i18n.problemJoining})};I.prototype._usernameChange=function(){var K=t.default.stripHTML(D.default.trim(this._username.value)),R=this._handleCheckUsername.bind(this);
l.default.checkUsernames([t.default.stripHTML(K)],R,R)};I.prototype._identityQuestionChange=function(){var K=this._identityQuestion.value;this._identityQuestionID=K?parseInt(K,10):void 0;this._validIdentityQuestion()};I.prototype._handleCheckUsername=function(K){this.isValidUsername=!1;var R=t.default.stripHTML(D.default.trim(this._username.value));!K||K.code||K.message?K.messageCode&&"DB_0006"===K.messageCode?this._showErrorMessage(this.i18n.error.restrictedCharacters):R?this._showErrorMessage(this.i18n.error.checkingUsername):
this.isValidUsername=!0:0<(null===K||void 0===K?void 0:K.usernames.length)&&R===K.usernames[0].suggested&&(this.isValidUsername=!0);this._validUsername()};I.prototype._signUpError=function(K){f.default.disableNode(this._createAccountBtn,!1);z.default.set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);var R=this.i18n.unableCreateAccount,W=this.i18n.contactAdmin;-1<K.message.indexOf("already registered")&&(W=this.i18n.error.emailInUse);-1<K.message.indexOf("Username '")&&-1<K.message.indexOf("' not available.")&&
(W=this.i18n.error.usernameInValid);K='\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'+R+'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e'+W;K+="\x3c/span\x3e\x3cbr\x3e\x26nbsp;";this._showErrorMessage(K)};I.prototype._signInError=function(){f.default.disableNode(this._createAccountBtn,!1);z.default.set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);var K="\x3cb style\x3d'font-size:1.2em;line-height:30px;'\x3e"+this.i18n.unableSignAuto+"\x3c/b\x3e\x3cbr\x3e";K=K+'\x3cspan style\x3d"color:#000000;"\x3e'+
this.i18n.pleaseTrySignManually;this._showErrorMessage(K+"\x3c/span\x3e\x3cbr\x3e\x26nbsp;")};I.prototype._showErrorMessage=function(K){h.default.createSpecifiedDialog(d.default).show({title:this.i18n.errorTitle,message:K})};I.prototype._usernameContainsAlphaNumeric=function(K){var R=/^[a-zA-Z0-9@_\.]+$/g;return K&&!!R.test(K)};I.prototype._usernameValidStartEnd=function(K){var R=/^([a-zA-Z0-9_][a-zA-Z0-9@_\-\.]+[a-zA-Z0-9_])?$/g;return K&&R.test(K)};I.prototype._validFirstName=function(){var K=D.default.trim(this._firstname.value);
m.default.clearState([this._firstname,this._firstnameError]);if(J.default.isDefined(K)&&""!==K)return m.default.setValidState(this._firstname),!0;m.default.setInvalidState(this._firstname,this._firstnameError,this.i18n.error.firstNameReqd);return!1};I.prototype._validLastName=function(){var K=D.default.trim(this._lastname.value);m.default.clearState([this._lastname,this._lastnameError]);if(J.default.isDefined(K)&&""!==K)return m.default.setValidState(this._lastname),!0;m.default.setInvalidState(this._lastname,
this._lastnameError,this.i18n.error.lastNameReqd);return!1};I.prototype._validEmail=function(){var K=D.default.trim(this._email.value);m.default.clearState([this._email,this._emailError]);if(J.default.isDefined(K)&&0!==K.length&&t.default.isValidEmailAddress(K))return m.default.setValidState(this._email),!0;m.default.setInvalidState(this._email,this._emailError,this.i18n.error.emailReqd);return!1};I.prototype._validConfirmEmail=function(){var K=D.default.trim(this._email.value),R=D.default.trim(this._confirmEmail.value);
m.default.clearState([this._confirmEmail,this._confirmEmailError]);if(J.default.isDefined(R)&&0!==R.length&&t.default.isValidEmailAddress(R)){if(K!==R)return m.default.setInvalidState(this._confirmEmail,this._confirmEmailError,this.i18n.error.confirmEmailNoMatch),!1;m.default.setValidState(this._confirmEmail);return!0}m.default.setInvalidState(this._confirmEmail,this._confirmEmailError,this.i18n.error.confirmEmailReqd);return!1};I.prototype._validUsername=function(){var K=t.default.stripHTML(D.default.trim(this._username.value));
m.default.clearState([this._username,this._usernameError]);if(J.default.isDefined(K)&&""!==K){if(6>K.length)return m.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameTooShort),!1;if(128<K.length)return m.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameTooLong),!1;if(this._usernameContainsAlphaNumeric(K)){if(this._usernameValidStartEnd(K)){if(this.isValidUsername)return m.default.setValidState(this._username),!0;K=D.default.substitute(this.i18n.error.usernameInUse,
{username:K,linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'"+t.default.getSecureUrl(a.default.baseUrl)+a.default.signin+window.location.search+"'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"});m.default.setInvalidState(this._username,this._usernameError,K);return!1}m.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameStartEndChars)}else return m.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameInvalidChars),!1}else return m.default.setInvalidState(this._username,
this._usernameError,this.i18n.error.userReqd),!1};I.prototype._validPassword=function(){var K=this,R=t.default.stripHTML(D.default.trim(this._username.value)),W=D.default.trim(this._pwd.value);m.default.clearState([this._pwd,this._pwdError]);return this._strengthMeter.update(W).then(function(P){if(J.default.isDefined(W)&&""!==W){if(K._passwordPolicy){if(!P.isValidStrength)return m.default.setInvalidState(K._pwd,K._pwdError,K.i18n.passwordTooWeak),!1;if(P.isValid){if(R.toLowerCase()===W.toLowerCase())return m.default.setInvalidState(K._pwd,
K._pwdError,K.i18n.passwordNotToPolicy),!1;m.default.setValidState(K._pwd);return!0}if(!1===P.longEnough)return m.default.setInvalidState(K._pwd,K._pwdError,D.default.substitute(K.i18n.error.passwordLength,{num:K._passwordPolicy.minLength})),!1;if(!1===P.enoughLetter)return m.default.setInvalidState(K._pwd,K._pwdError,D.default.substitute(K.i18n.error.passwordLetter,{num:K._passwordPolicy.minLetter})),!1;if(!1===P.enoughUpper)return m.default.setInvalidState(K._pwd,K._pwdError,D.default.substitute(K.i18n.error.passwordUpper,
{num:K._passwordPolicy.minUpper})),!1;if(!1===P.enoughLower)return m.default.setInvalidState(K._pwd,K._pwdError,D.default.substitute(K.i18n.error.passwordLower,{num:K._passwordPolicy.minLower})),!1;if(!1===P.enoughDigit)return m.default.setInvalidState(K._pwd,K._pwdError,D.default.substitute(K.i18n.error.passwordDigit,{num:K._passwordPolicy.minDigit})),!1;if(!1===P.enoughOther)return m.default.setInvalidState(K._pwd,K._pwdError,D.default.substitute(K.i18n.error.passwordOther,{num:K._passwordPolicy.minOther})),
!1;m.default.setValidState(K._pwd);return!0}if(P.isValidStrength){if(8>W.length||28<W.length)return m.default.setInvalidState(K._pwd,K._pwdError,K.i18n.error.invalidPassword),!1;if(R.toLowerCase()===W.toLowerCase())return m.default.setInvalidState(K._pwd,K._pwdError,K.i18n.passwordNotToPolicy),!1;m.default.setValidState(K._pwd);return!0}m.default.setInvalidState(K._pwd,K._pwdError,K.i18n.passwordTooWeak);return!1}m.default.setInvalidState(K._pwd,K._pwdError,K.i18n.error.passReqd);return!1})};I.prototype._validVerifyPassword=
function(){var K=D.default.trim(this._pwd.value),R=D.default.trim(this._verifyPwd.value);m.default.clearState([this._verifyPwd,this._verifyPwdError]);if(K!==R)return m.default.setInvalidState(this._verifyPwd,this._verifyPwdError,this.i18n.error.passwordsNotMatch),!1;m.default.setValidState(this._verifyPwd);return!0};I.prototype._validIdentityQuestion=function(){m.default.clearState([this._identityQuestion,this._identityQuestionError]);if(!this._identityQuestionID||1>this._identityQuestionID)return m.default.setInvalidState(this._identityQuestion,
this._identityQuestionError,this.i18n.error.questionSelection),!1;m.default.setValidState(this._identityQuestion);return!0};I.prototype._validIdentityAnswer=function(){var K=D.default.trim(this._identityAnswer.value);m.default.clearState([this._identityAnswer,this._identityAnswerError]);if(J.default.isDefined(K)&&""!==K){if(60<K.length)return m.default.setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerTooLong),!1;m.default.setValidState(this._identityAnswer);return!0}m.default.setInvalidState(this._identityAnswer,
this._identityAnswerError,this.i18n.error.answerIsBlank);return!1};I.prototype._validates=function(){var K=this,R=[this._validFirstName(),this._validLastName(),this._validEmail(),this._validConfirmEmail(),this._validUsername(),this._validVerifyPassword(),this._validIdentityQuestion(),this._validIdentityAnswer()].every(function(W){return!0===W});return this._validPassword().then(function(W){(R=R&&W)||m.default.focusFirstInvalidInput(K._form.domNode);return R})};I.prototype._fetchInvitation=function(){return t.default.request({url:this._communityUri+
"invitations/"+this.invitation})};I.prototype._handleError=function(K){var R,W;K=K.error||K||{};K.code=K.code||0;K=this.i18n.errors[K.code]||K;K.details=(null===(R=K.details)||void 0===R?0:R.length)?K.details.filter(function(P){return null!==P}):null;if(null===(W=K.details)||void 0===W?0:W.length)K.details=K.details.join("\x3cbr /\x3e"),K.message=K.message?K.message+"\x3cbr /\x3e"+K.details:K.details;K=B.default.mixin(B.default.mixin({},this.i18n.errors.error),K);this._showErrorMessage(K.message);
return!0};return I=q.__decorate([n.default(x.default,u.default,A.default)],I)}()})},"arcgisonline/pages/dijit/PasswordStrength":function(){define("require exports tslib dojo/text!./PasswordStrength/templates/PasswordStrength.html dojo/i18n!../../nls/arcgisonline dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ../utils/icons ../utils/dom ../utils/organization ../../tsutils/declareDecorator".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);
g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);return function(){function k(t,n){this.templateString=a.default;this.i18n=h.default;this.icons=m.default}k.prototype.postCreate=function(){var t,n,u;this.inherited(arguments);var x=null!==(n=null===(t=this.portal.helpMap)||void 0===t?void 0:t.m)&&void 0!==n?n:{};t=this.portal.helpBase+(null!==(u=x["120001688"])&&void 0!==u?u:"");this._moreInfo.href=t};k.prototype.update=
function(t){var n=this,u,x=new e.default;(null===(u=this._previousResult)||void 0===u?void 0:u.password)===t?x.resolve(this._previousResult):t?d.default.checkPasswordStrength(t).then(function(A){var z=A.strength;n._strengthLabel.className="password-strength__label--"+z;n._strengthLabel.textContent=n.i18n.passwordStrengthMeter["score"+z];n._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--"+z;var E=Object.keys(A).every(function(w){var D=A[w];return"strength"===
w?1<D:!1!==D});E?l.default.hideNode(n._moreInfo):l.default.showNode(n._moreInfo);n._previousResult=q.__assign({password:t,isValidStrength:1<z,isValid:E},A);x.resolve(n._previousResult)}):(this._strengthLabel.className="",this._strengthLabel.textContent=this.i18n.passwordStrengthMeter.none,this._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--unknown",this._previousResult={password:t,isValid:!1,isValidStrength:!1},x.resolve(this._previousResult));return x};
return k=q.__decorate([c.default(f.default,g.default)],k)}()})},"arcgisonline/pages/utils/validation":function(){define(["require","exports"],function(b,y){return function(){function q(){}q.clearState=function(a){null===a||void 0===a?void 0:a.forEach(function(h){var e,g,f;null===h||void 0===h?void 0:h.removeAttribute("aria-live");null===(e=null===h||void 0===h?void 0:h.classList)||void 0===e?void 0:e.remove("input-success");null===(g=null===h||void 0===h?void 0:h.classList)||void 0===g?void 0:g.remove("input-error");
null===(f=null===h||void 0===h?void 0:h.classList)||void 0===f?void 0:f.remove("is-active")})};q.setValidState=function(a){var h;null===(h=null===a||void 0===a?void 0:a.classList)||void 0===h?void 0:h.add("input-success")};q.setInvalidState=function(a,h,e,g){var f,m,l;null===(f=null===a||void 0===a?void 0:a.classList)||void 0===f?void 0:f.add("input-error");null===(m=null===h||void 0===h?void 0:h.classList)||void 0===m?void 0:m.add("is-active");h&&e&&(null===h||void 0===h?void 0:h.setAttribute("aria-live",
"polite"),h.innerHTML=e);g&&(null===(l=null===a||void 0===a?void 0:a.focus)||void 0===l?void 0:l.call(a))};q.focusFirstInvalidInput=function(a){var h;a=null!==(h=null===a||void 0===a?void 0:a.querySelector(".input-error"))&&void 0!==h?h:void 0;(null===a||void 0===a?0:a.focus)&&a.focus()};q.toggleError=function(a,h,e,g){e?q.setInvalidState(a,h,g):q.clearState([a,h])};return q}()})},"arcgisonline/sharing/dijit/HelpManager":function(){define(["dojo/_base/declare","dijit/_WidgetBase","../util","../../esriGeowConfig"],
function(b,y,q,a){var h=b([y],{helpBaseUrl:null,helpTopics:null,_isSingleTenant:!1,postCreate:function(){this._isSingleTenant=void 0!==a.isMultiTenant&&null!==a.isMultiTenant&&!1===a.isMultiTenant;this.helpBaseUrl=a.self.helpBase;this._load()},_load:function(){a.self.helpMap&&a.self.helpMap.m?(this.helpTopics=a.self.helpMap.m,this.onLoad(this.helpBaseUrl,this.helpTopics)):q.request({url:a.restBaseUrl+"portals/helpmap"}).then(function(e){!e||e.code||e.message||(this.helpBaseUrl=e.helpBase,this.helpTopics=
e.helpMap&&e.helpMap.m||{},this.onLoad(this.helpBaseUrl,this.helpTopics))}.bind(this))},onLoad:function(e,g){},isLoaded:function(){return this.helpBaseUrl&&this.helpTopics},getHelpUrl:function(e){return this.isLoaded()?this.helpBaseUrl+this.helpTopics[e]:"#"}});h.prototype.statics={_instance:null,getInstance:function(){null===this._instance&&(this._instance=new h);return this._instance}};return h})},"dojox/widget/Rotator":function(){define("dojo/aspect dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/topic dojo/on dojo/parser dojo/query dojo/fx/easing dojo/NodeList-dom".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n){y=y("dojox.widget.Rotator",null,{transition:"dojox.widget.rotator.swap",transitionParams:"duration:500",panes:null,constructor:function(u,x){a.mixin(this,u);var A=this;u=A.transition;var z=A._transitions={};A._idMap={};var E=A.transitionParams=eval("({ "+A.transitionParams+" })");x=A._domNode=g.byId(x);A._domNodeContentBox=l.getContentBox(x);A.id=x.id||(new Date).getTime();"static"==d.get(x,"position")&&d.set(x,"position","relative");z[u]=a.getObject(u);z[u]||
(this._transitionWarn(u,"dojox.widget.rotator.swap"),z[A.transition="dojox.widget.rotator.swap"]=a.getObject("dojox.widget.rotator.swap"));E.duration||(E.duration=500);h.forEach(A.panes,function(w){m.create("div",w,x)});A.panes=[];n("\x3e *",x).forEach(function(w,D){A._initializePane(w,D)});A._controlSub=c.subscribe(A.id+"/rotator/control",a.hitch(A,this.control))},insert:function(u,x){var A=this.panes;null==x&&(x=A.length);x<A.length?(A=A[x],m.place(u,A.node,"before")):m.place(u,this._domNode,"last");
this._initializePane(u,x)},remove:function(u){function x(D){var r=z.splice(D,1)[0];r&&(r.id&&(A._idMap[r.id]=void 0),A._domNode.removeChild(r.node));A.idx>D&&A.idx--}var A=this,z=this.panes;if("number"===typeof u)var E=u;else{for(var w=0;w<z.length;w++)if(z[w].node===u){E=w;break}if(null==E)return}if(E===this.idx&&(u=this.go(this.idx-1)))return u.then(function(){x(E)});x(E)},destroy:function(){h.forEach([this._controlSub,this.wfe],function(u){u&&u.remove()});m.destroy(this._domNode);this.panes=[]},
next:function(){return this.go(this.idx+1)},prev:function(){return this.go(this.idx-1)},go:function(u){var x=this,A=x.idx,z=x.panes,E=z.length,w=x._idMap[u];x._resetWaitForEvent();u=null!=w?w:u||0;u=u<E?0>u?E-1:u:0;if(u==A||x.anim)return null;var D=z[A],r=z[u];d.set(D.node,"zIndex",2);d.set(r.node,"zIndex",1);var v={current:D,next:r,rotator:x};if(A=x.anim=x._transitions[r.trans](a.mixin({rotatorBox:x._domNodeContentBox},v,r.params))){var B=new q,C=r.waitForEvent,F=b.after(A,"onEnd",function(){d.set(D.node,
{display:"none",left:0,opacity:1,top:0,zIndex:0});F.remove();x.anim=null;x.idx=u;if(D.onAfterOut)D.onAfterOut(v);if(r.onAfterIn)r.onAfterIn(v);x.onUpdate("onAfterTransition");C||(x._resetWaitForEvent(),B.callback())},!0);x.wfe=C?c.subscribe(C,function(){x._resetWaitForEvent();B.callback(!0)}):null;x.onUpdate("onBeforeTransition");if(D.onBeforeOut)D.onBeforeOut(v);if(r.onBeforeIn)r.onBeforeIn(v);A.play();return B}},onUpdate:function(u,x){c.publish(this.id+"/rotator/update",u,this,x||{})},_initializePane:function(u,
x){var A={node:u,idx:x,params:a.mixin({},this.transitionParams,eval("({ "+(f.get(u,"transitionParams")||"")+" })"))},z=A.trans=f.get(u,"transition")||this.transition,E=this._transitions,w=this.panes,D={left:0,top:0,position:"absolute",display:"none"};h.forEach(["id","title","duration","waitForEvent"],function(r){A[r]=f.get(u,r)});A.id&&(this._idMap[A.id]=x);E[z]||(E[z]=a.getObject(z))||this._transitionWarn(z,A.trans=this.transition);if(null==this.idx||f.get(u,"selected"))null!=this.idx&&d.set(w[this.idx].node,
"display","none"),this.idx=x,D.display="";d.set(u,D);n("\x3e script[type^\x3d'dojo/method']",u).orphan().forEach(function(r){var v=f.get(r,"event");v&&(A[v]=t._functionFromScript(r))});w.splice(x,0,A)},_resetWaitForEvent:function(){this.wfe&&(this.wfe.remove(),delete this.wfe)},control:function(u){var x=a._toArray(arguments),A=this;x.shift();A._resetWaitForEvent();A[u]&&((x=A[u].apply(A,x))&&x.addCallback(function(){A.onUpdate(u)}),A.onManualChange(u))},resize:function(u,x){var A=this._domNodeContentBox=
{w:u,h:x};l.setContentSize(this._domNode,A);h.forEach(this.panes,function(z){l.setContentSize(z.node,A)})},onManualChange:function(){},_transitionWarn:function(u,x){}});a.setObject("dojox.widget.rotator.swap",function(u){return new e.Animation({play:function(){d.set(u.current.node,"display","none");d.set(u.next.node,"display","");this._fire("onEnd")}})});return y})},"dojo/fx/easing":function(){define(["../_base/lang"],function(b){var y={linear:function(q){return q},quadIn:function(q){return Math.pow(q,
2)},quadOut:function(q){return q*(q-2)*-1},quadInOut:function(q){q*=2;return 1>q?Math.pow(q,2)/2:-1*(--q*(q-2)-1)/2},cubicIn:function(q){return Math.pow(q,3)},cubicOut:function(q){return Math.pow(q-1,3)+1},cubicInOut:function(q){q*=2;return 1>q?Math.pow(q,3)/2:(Math.pow(q-2,3)+2)/2},quartIn:function(q){return Math.pow(q,4)},quartOut:function(q){return-1*(Math.pow(q-1,4)-1)},quartInOut:function(q){q*=2;return 1>q?Math.pow(q,4)/2:-.5*(Math.pow(q-2,4)-2)},quintIn:function(q){return Math.pow(q,5)},quintOut:function(q){return Math.pow(q-
1,5)+1},quintInOut:function(q){q*=2;return 1>q?Math.pow(q,5)/2:(Math.pow(q-2,5)+2)/2},sineIn:function(q){return-1*Math.cos(Math.PI/2*q)+1},sineOut:function(q){return Math.sin(Math.PI/2*q)},sineInOut:function(q){return-1*(Math.cos(Math.PI*q)-1)/2},expoIn:function(q){return 0==q?0:Math.pow(2,10*(q-1))},expoOut:function(q){return 1==q?1:-1*Math.pow(2,-10*q)+1},expoInOut:function(q){if(0==q)return 0;if(1==q)return 1;q*=2;if(1>q)return Math.pow(2,10*(q-1))/2;--q;return(-1*Math.pow(2,-10*q)+2)/2},circIn:function(q){return-1*
(Math.sqrt(1-Math.pow(q,2))-1)},circOut:function(q){return Math.sqrt(1-Math.pow(q-1,2))},circInOut:function(q){q*=2;return 1>q?-.5*(Math.sqrt(1-Math.pow(q,2))-1):.5*(Math.sqrt(1-Math.pow(q-2,2))+1)},backIn:function(q){return Math.pow(q,2)*(2.70158*q-1.70158)},backOut:function(q){--q;return Math.pow(q,2)*(2.70158*q+1.70158)+1},backInOut:function(q){q*=2;if(1>q)return Math.pow(q,2)*(3.5949095*q-2.5949095)/2;q-=2;return(Math.pow(q,2)*(3.5949095*q+2.5949095)+2)/2},elasticIn:function(q){if(0==q||1==q)return q;
--q;return-1*Math.pow(2,10*q)*Math.sin(2*(q-.075)*Math.PI/.3)},elasticOut:function(q){return 0==q||1==q?q:Math.pow(2,-10*q)*Math.sin(2*(q-.075)*Math.PI/.3)+1},elasticInOut:function(q){if(0==q)return 0;q*=2;if(2==q)return 1;var a=.3*1.5,h=a/4;if(1>q)return--q,-.5*Math.pow(2,10*q)*Math.sin(2*(q-h)*Math.PI/a);--q;return.5*Math.pow(2,-10*q)*Math.sin(2*(q-h)*Math.PI/a)+1},bounceIn:function(q){return 1-y.bounceOut(1-q)},bounceOut:function(q){return q<1/2.75?7.5625*Math.pow(q,2):q<2/2.75?7.5625*Math.pow(q-
1.5/2.75,2)+.75:q<2.5/2.75?7.5625*Math.pow(q-2.25/2.75,2)+.9375:7.5625*Math.pow(q-2.625/2.75,2)+.984375},bounceInOut:function(q){return.5>q?y.bounceIn(2*q)/2:y.bounceOut(2*q-1)/2+.5}};b.setObject("dojo.fx.easing",y);return y})},"dojox/widget/AutoRotator":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/mouse dojox/widget/Rotator".split(" "),function(b,y,q,a,h,e){return b("dojox.widget.AutoRotator",e,{suspendOnHover:!1,duration:4E3,autoStart:!0,pauseOnManualChange:!1,
cycles:-1,random:!1,reverse:!1,constructor:function(){var g=this;g.cycles-0==g.cycles&&0<g.cycles?g.cycles++:g.cycles=g.cycles?-1:0;g._signals=[a(g._domNode,h.enter,function(){if(g.suspendOnHover&&!g.anim&&!g.wfe){var f=g._endTime,m=g._now();g._suspended=!0;g._resetTimer();g._resumeDuration=f>m?f-m:.01}}),a(g._domNode,h.leave,function(){g.suspendOnHover&&!g.anim&&(g._suspended=!1,g.playing&&!g.wfe&&g.play(!0))})];g.autoStart&&1<g.panes.length?g.play():g.pause()},destroy:function(){y.forEach(this._signals,
function(g){g.remove()});delete this._signals;dojo.forEach(this._connects,dojo.disconnect);this.inherited(arguments)},play:function(g,f){this.playing=!0;this._resetTimer();!0!==g&&0<this.cycles&&this.cycles--;0==this.cycles?this.pause():this._suspended||(this.onUpdate("play"),f?this._cycle():(g=(this._resumeDuration||0)-0,g=(0<g?g:this.panes[this.idx].duration||this.duration)-0,this._resumeDuration=0,this._endTime=this._now()+g,this._timer=setTimeout(q.hitch(this,"_cycle",!1),g)))},pause:function(){this.playing=
this._suspended=!1;this.cycles=-1;this._resetTimer();this.onUpdate("pause")},_now:function(){return(new Date).getTime()},_resetTimer:function(){clearTimeout(this._timer)},_cycle:function(g){var f=this;g=f.idx;if(f.random){do var m=Math.floor(Math.random()*f.panes.length+1);while(m==g)}else m=g+(f.reverse?-1:1);(g=f.go(m))&&g.addCallback(function(l){f.onUpdate("cycle");f.playing&&f.play(!1,l)})},onManualChange:function(g){this.cycles=-1;"play"!=g&&(this._resetTimer(),this.pauseOnManualChange&&this.pause());
this.playing&&this.play()}})})},"dojox/widget/rotator/Controller":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/event dojo/_base/array dojo/_base/connect dojo/query".split(" "),function(b,y,q,a,h,e,g){return b("dojox.widget.rotator.Controller",null,{rotator:null,commands:"prev,play/pause,info,next",constructor:function(f,m){y.mixin(this,f);var l=this.rotator;if(l){for(;m.firstChild;)m.removeChild(m.firstChild);var d=this._domNode=q.create("ul",null,m),c=function(k,
t,n){q.create("li",{className:t,innerHTML:'\x3ca href\x3d"#"\x3e\x3cspan\x3e'+k+"\x3c/span\x3e\x3c/a\x3e",onclick:function(u){a.stop(u);l&&l.control.apply(l,n)}},d)};h.forEach(this.commands.split(","),function(k,t){switch(k){case "prev":c("Prev","dojoxRotatorPrev dojoxRotatorIcon",["prev"]);break;case "play/pause":c("Play","dojoxRotatorPlay dojoxRotatorIcon",["play"]);c("Pause","dojoxRotatorPause dojoxRotatorIcon",["pause"]);break;case "info":this._info=q.create("li",{className:"dojoxRotatorInfo",
innerHTML:this._buildInfo(l)},d);break;case "next":c("Next","dojoxRotatorNext dojoxRotatorIcon",["next"]);break;case "#":case "titles":for(t=0;t<l.panes.length;t++)c("#"==k?t+1:l.panes[t].title||"Tab "+(t+1),("#"==k?"dojoxRotatorNumber":"dojoxRotatorTab")+" "+(t==l.idx?"dojoxRotatorSelected":"")+" dojoxRotatorPane"+t,["go",t])}},this);g("li:first-child",d).addClass("dojoxRotatorFirst");g("li:last-child",d).addClass("dojoxRotatorLast");this._togglePlay();this._con=e.connect(l,"onUpdate",this,"_onUpdate")}},
destroy:function(){e.disconnect(this._con);q.destroy(this._domNode)},_togglePlay:function(f){f=this.rotator.playing;g(".dojoxRotatorPlay",this._domNode).style("display",f?"none":"");g(".dojoxRotatorPause",this._domNode).style("display",f?"":"none")},_buildInfo:function(f){return"\x3cspan\x3e"+(f.idx+1)+" / "+f.panes.length+"\x3c/span\x3e"},_onUpdate:function(f){var m=this.rotator;switch(f){case "play":case "pause":this._togglePlay();break;case "onAfterTransition":this._info&&(this._info.innerHTML=
this._buildInfo(m)),f=function(l){m.idx<l.length&&q.addClass(l[m.idx],"dojoxRotatorSelected")},f(g(".dojoxRotatorNumber",this._domNode).removeClass("dojoxRotatorSelected")),f(g(".dojoxRotatorTab",this._domNode).removeClass("dojoxRotatorSelected"))}}})})},"dojox/widget/rotator/Fade":function(){define(["dojo/_base/lang","dojo/_base/fx","dojo/dom-style","dojo/fx"],function(b,y,q,a){function h(g,f){var m=g.next.node;q.set(m,{display:"",opacity:0});g.node=g.current.node;return a[f]([y.fadeOut(g),y.fadeIn(b.mixin(g,
{node:m}))])}var e={fade:function(g){return h(g,"chain")},crossFade:function(g){return h(g,"combine")}};b.mixin(b.getObject("dojox.widget.rotator"),e);return e})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),function(b,y,q,a,h,e,g,f,m,l,d,c,k,t){a=y("dijit.layout._StackButton",
t,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(n){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});y=y("dijit.layout.StackController",[d,c,k],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:a,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(n){return l.byId(this.id+"_"+n)},postCreate:function(){this.inherited(arguments);
this.own(f.subscribe(this.containerId+"-startup",e.hitch(this,"onStartup")),f.subscribe(this.containerId+"-addChild",e.hitch(this,"onAddChild")),f.subscribe(this.containerId+"-removeChild",e.hitch(this,"onRemoveChild")),f.subscribe(this.containerId+"-selectChild",e.hitch(this,"onSelectChild")),f.subscribe(this.containerId+"-containerKeyDown",e.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(g(this.containerNode,"click",e.hitch(this,function(n){var u=l.getEnclosingWidget(n.target);
if(u!=this.containerNode&&!u.disabled&&u.page)for(n=n.target;n!==this.containerNode;n=n.parentNode)if(q.contains(n,this.buttonWidgetCloseClass)){this.onCloseButtonClick(u.page);break}else if(n==u.domNode){this.onButtonClick(u.page);break}})))},onStartup:function(n){this.textDir=n.textDir;b.forEach(n.children,this.onAddChild,this);if(n.selected)this.onSelectChild(n.selected);var u=l.byId(this.containerId).containerNode,x=e.hitch(this,"pane2button");n={title:"label",showtitle:"showLabel",iconclass:"iconClass",
closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var A=function(E,w){return g(u,"attrmodified-"+E,function(D){var r=x(D.detail&&D.detail.widget&&D.detail.widget.id);r&&r.set(w,D.detail.newValue)})},z;for(z in n)this.own(A(z,n[z]))},destroy:function(n){this.destroyDescendants(n);this.inherited(arguments)},onAddChild:function(n,u){var x=new (e.isString(this.buttonWidget)?e.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+n.id,name:this.id+"_"+n.id,label:n.title,
disabled:n.disabled,ownerDocument:this.ownerDocument,dir:n.dir,lang:n.lang,textDir:n.textDir||this.textDir,showLabel:n.showTitle,iconClass:n.iconClass,closeButton:n.closable,title:n.tooltip,page:n});this.addChild(x,u);n.controlButton=x;if(!this._currentChild)this.onSelectChild(n);u=n._wrapper.getAttribute("aria-labelledby")?n._wrapper.getAttribute("aria-labelledby")+" "+x.id:x.id;n._wrapper.removeAttribute("aria-label");n._wrapper.setAttribute("aria-labelledby",u)},onRemoveChild:function(n){this._currentChild===
n&&(this._currentChild=null);var u=this.pane2button(n.id);u&&(this.removeChild(u),u.destroy());delete n.controlButton},onSelectChild:function(n){if(n){if(this._currentChild){var u=this.pane2button(this._currentChild.id);u.set("checked",!1);u.focusNode.setAttribute("tabIndex","-1")}u=this.pane2button(n.id);u.set("checked",!0);this._currentChild=n;u.focusNode.setAttribute("tabIndex","0");l.byId(this.containerId)}},onButtonClick:function(n){var u=this.pane2button(n.id);m.focus(u.focusNode);this._currentChild&&
this._currentChild.id===n.id&&u.set("checked",!0);l.byId(this.containerId).selectChild(n)},onCloseButtonClick:function(n){l.byId(this.containerId).closeChild(n);this._currentChild&&(n=this.pane2button(this._currentChild.id))&&m.focus(n.focusNode||n.domNode)},adjacent:function(n){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(n=!n);var u=this.getChildren(),x=b.indexOf(u,this.pane2button(this._currentChild.id)),A=u[x];do{x=(x+(n?1:u.length-1))%u.length;var z=u[x]}while(z.disabled&&
z!=A);return z},onkeydown:function(n,u){if(!this.disabled&&!n.altKey&&(u=null,n.ctrlKey||!n._djpage)){switch(n.keyCode){case h.LEFT_ARROW:case h.UP_ARROW:n._djpage||(u=!1);break;case h.PAGE_UP:n.ctrlKey&&(u=!1);break;case h.RIGHT_ARROW:case h.DOWN_ARROW:n._djpage||(u=!0);break;case h.PAGE_DOWN:n.ctrlKey&&(u=!0);break;case h.HOME:for(var x=this.getChildren(),A=0;A<x.length;A++){var z=x[A];if(!z.disabled){this.onButtonClick(z.page);break}}n.stopPropagation();n.preventDefault();break;case h.END:x=this.getChildren();
for(A=x.length-1;0<=A;A--)if(z=x[A],!z.disabled){this.onButtonClick(z.page);break}n.stopPropagation();n.preventDefault();break;case h.DELETE:case 87:this._currentChild.closable&&(n.keyCode==h.DELETE||n.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),n.stopPropagation(),n.preventDefault());break;case h.TAB:n.ctrlKey&&(this.onButtonClick(this.adjacent(!n.shiftKey).page),n.stopPropagation(),n.preventDefault())}null!==u&&(this.onButtonClick(this.adjacent(u).page),n.stopPropagation(),n.preventDefault())}},
onContainerKeyDown:function(n){n.e._djpage=n.page;this.onkeydown(n.e)}});y.StackButton=a;return y})},"arcgisonline/sharing/dijit/TextMenu":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util"],function(b,y,q){b.provide("arcgisonline.sharing.dijit.TextMenu");b.require("arcgisonline.sharing.util");b.declare("arcgisonline.sharing.dijit.TextMenu",[y._Widget],{_util:arcgisonline.sharing.util,textMenuItems:[{label:"No menu items",href:"#",iconClass:null}],labelNode:null,triggerNode:null,
menu:null,handlers:[],constructor:function(a){b.mixin(this,a)},postCreate:function(){this.menu=(new y.Menu({})).placeAt(b.body());b.addClass(this.menu.domNode,"esriTextMenu");y.popup.moveOffScreen(this.menu.domNode);null!==this.textMenuItems&&this._renderItems(this.textMenuItems);b.style(this.triggerNode,"cursor","hand");b.style(this.triggerNode,"cursor","pointer");this.handlers.push(b.connect(this.triggerNode,"onclick",this,this.show));b.connect(this.menu,"onMouseLeave",b.hitch(this,function(){this.hide()}))},
show:function(a){a.preventDefault();y.popup.open({popup:this.menu,around:this.labelNode,orient:{BL:"TL",BR:"TR",TL:"BL",TR:"BR"},onExecute:b.hitch(this,this.hide),onCancel:b.hitch(this,this.hide)});this.menu.focus()},hide:function(){y.popup.close(this.menu)},destroy:function(){this.hide();b.forEach(this.handlers,function(a){b.disconnect(a)});b.forEach(b.query(".esriTextMenuItem"),function(a){y.byNode(a).destroy()},this);this.menu.destroy();this.inherited(arguments)},_renderItems:function(a){b.forEach(a,
function(h){h=new y.MenuItem(h);b.addClass(h.domNode,"esriTextMenuItem");this.menu.addChild(h)},this)}})})},"dijit/form/ComboButton":function(){define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),function(b,y,q,a,h){return b("dijit.form.ComboButton",a,{templateString:h,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",
titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(e){e.keyCode==y[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(q.focus(this._popupStateNode),e.stopPropagation(),e.preventDefault())},_onArrowKeyDown:function(e){e.keyCode==y[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(q.focus(this.titleNode),e.stopPropagation(),e.preventDefault())},focus:function(e){this.disabled||q.focus("start"==e?this.titleNode:this._popupStateNode)}})})},
"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(b,y,q){return b("dijit.form.RadioButton",[y,q],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),function(b,y,q,a,h,e){return y("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var g=[];h("input[type\x3dradio]",this.focusNode.form||
this.ownerDocument).forEach(a.hitch(this,function(f){f.name==this.name&&f.form==this.focusNode.form&&(f=e.getEnclosingWidget(f))&&g.push(f)}));return g},_setCheckedAttr:function(g){this.inherited(arguments);this._created&&g&&b.forEach(this._getRelatedWidgets(),a.hitch(this,function(f){f!=this&&f.checked&&f.set("checked",!1)}))},_getSubmitValue:function(g){return null==g?"on":g},_onClick:function(g){if(this.checked||this.disabled)return g.stopPropagation(),g.preventDefault(),!1;if(this.readOnly)return g.stopPropagation(),
g.preventDefault(),b.forEach(this._getRelatedWidgets(),a.hitch(this,function(l){q.set(this.focusNode||this.domNode,"checked",l.checked)})),!1;var f=!1,m;b.some(this._getRelatedWidgets(),function(l){return l.checked?(m=l,!0):!1});this.checked=!0;m&&(m.checked=!1);if(!1===this.onClick(g)||g.defaultPrevented)f=!0;this.checked=!1;m&&(m.checked=!0);f?g.preventDefault():this.set("checked",!0);return!f}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),
function(b,y,q,a,h,e,g){return b("dijit.PopupMenuItem",g,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var f=a("*",this.srcNodeRef);this.inherited(arguments,[f[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(f,m){var l=this.popup;h.open(q.delegate(f,{popup:this.popup,around:this.domNode}));m&&l.focus&&l.focus()},_closePopup:function(){h.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);
if(!this.popup){var f=a("[widgetId]",this.dropDownContainer)[0];this.popup=e.byNode(f)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&y.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(f){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(f),delete this.popup);
this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/Gallery":function(){define(["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!arcgisonline/sharing/dijit/views,dijit/_Widget,dijit/_Templated,dojo/NodeList-fx,dijit/layout/ContentPane,arcgisonline/sharing/util,dijit/form/Button,arcgisonline/sharing/geow/QueryReadStore"],function(b,y,q){b.provide("arcgisonline.sharing.dijit.Gallery");b.require("arcgisonline.sharing.dijit.views");b.require("dijit._Widget");b.require("dijit._Templated");
b.require("dojo.NodeList-fx");b.require("dijit.layout.ContentPane");b.require("arcgisonline.sharing.util");b.require("dijit.form.Button");b.requireLocalization("arcgisonline","arcgisonline");b.require("arcgisonline.sharing.geow.QueryReadStore");b.declare("arcgisonline.sharing.dijit.Gallery",[y._Widget,y._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv dojoAttachPoint\x3d"containerNode"\x3e\n  \x3cdiv class\x3d"clearfix galleryBackground"\x3e\n    \x3cdiv dojoAttachPoint\x3d"flowContainer" class\x3d"clearfix"\x3e\n    \x3c/div\x3e\n    \x3cdiv dojoAttachPoint\x3d"pageControls" class\x3d"esriFloatLeading" style\x3d"maxheight: 3em; width: 100%; clear: both;"\x3e\n      \x3cp style\x3d"text-align: center;"\x3e\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_prev" style\x3d"display:none;"\x3e${i18n.previous}\x3c/span\x3e\n        \x3cspan dojoAttachPoint\x3d"_pages" dojoAttachEvent\x3d"onClick:goToPage" class\x3d"esriItemLinks esriPagingLinks"\x3e\x3c/span\x3e\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_next" style\x3d"display:none;"\x3e${i18n.next}\x3c/span\x3e\n      \x3c/p\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e',
tooltip:null,showToolTip:!0,showNodeLabels:!0,showThumbnailInDetails:!0,fadeOutOtherNodes:!0,animFadeOut:!0,unfocusedOpacity:.5,highlightFocusedNode:!0,largeNodes:0,maxNodes:0,flowContainer:null,showDelay:300,nodesPerPage:4,currentPage:1,pageCount:1,maxPages:null,showPageControls:!0,_prev:null,_next:null,_pages:null,nodeClass:"galleryNode",nodeHighlightClass:"highlight",thumbClass:"galleryThumbnail",labelClass:"label",labelBgClass:"galleryLabelContainer",detailsClass:"galleryDetail",detailsThumbClass:"galleryDetailThumb",
messageClass:"galleryMessage",_lastFocusedNode:null,_timer:null,_galleryFadeIn:null,_galleryFadeOut:null,_galleryFadeOutTotal:null,_suspendTooltip:!1,includeNode:null,_defaultNoResultsMessage:null,noResultsMessage:null,items:null,i18n:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").gallery);this._defaultNoResultsMessage=this.i18n.filterNoResults},
postCreate:function(){this._userToken=(this._user=arcgisonline.sharing.util.getUser())&&this._user.token;null===this.tooltip&&(this.tooltip=new arcgisonline.sharing.dijit._GalleryContentPane({_gallery:this},b.create("div",{id:this.id+"_popup"},b.body())),this._galleryFadeIn=b.animateProperty({node:this.flowContainer,properties:{opacity:1}}),this._galleryFadeOut=b.animateProperty({node:this.flowContainer,properties:{opacity:this.unfocusedOpacity}}),this._galleryFadeOutTotal=b.animateProperty({node:this.flowContainer,
properties:{opacity:0}}),b.connect(this.domNode,"scroll",this,function(){this.tooltip&&this.tooltip.isShowing&&this.tooltip.hide()}),this.showPageControls&&(b.connect(this,"onContentChange",this,this._layoutPageControls),b.connect(this,"onPageChange",this,this._layoutPageControls)))},_showTooltip:function(a,h){var e=this.tooltip.domNode,g;esriGeowConfig.isRightToLeft||(g=this.showThumbnailInDetails?{TL:"TL",TR:"TR"}:{TL:"TR",TR:"TL"});esriGeowConfig.isRightToLeft&&(g=this.showThumbnailInDetails?{BR:"BR"}:
{BR:"TR"});g=y.placeOnScreenAroundNode(e,a,g);this.tooltip.set("content",this._buildItemDetailsLayout(h,g,a));if(this.showThumbnailInDetails){(a="none"==b.style(e,"display"))&&b.style(e,{visibility:"hidden",display:"block"});var f=b.contentBox(e),m=b.coords(e);a&&b.style(e,{visibility:"",display:"none"});"TR"==g.aroundCorner?(b.style(e,"top",m.t-f.t+"px"),b.style(e,"left",m.l+f.l+"px")):"TL"==g.aroundCorner&&(b.style(e,"top",m.t-f.t+"px"),b.style(e,"left",m.l-f.l+"px"))}this._highlightNode(h);this.tooltip.show()},
node_onMouseEnter:function(a){var h=a.currentTarget,e=this._getItemByNode(h);this.onNodeMouseEnter(a,e);!this._suspendTooltip&&this.showToolTip&&(this.tooltip.isShowing&&this.tooltip.hide(),this._timer&&(clearTimeout(this._timer),this._timer=null),this._unhighlightNodes(),this._timer||(this._timer=setTimeout(b.hitch(this,function(){this._showTooltip(h,e)}),this.showDelay)))},node_onMouseLeave:function(a){this._timer&&(clearTimeout(this._timer),this._timer=null);var h=this._getItemByNode(a.currentTarget);
this.onNodeMouseLeave(a,h)},tooltip_onMouseLeave:function(a){this._unhighlightNodes();this.tooltip.hide()},_highlightNode:function(a){a=b.byId("galleryNode_"+a.id);this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeIn.stop(),this._galleryFadeOut.play()):b.style(this.flowContainer,"opacity",this.unfocusedOpacity));this.highlightFocusedNode&&b.addClass(a,this.nodeHighlightClass);this._lastFocusedNode=a},_unhighlightNodes:function(){this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeOut.stop(),
this._galleryFadeIn.play()):b.style(this.flowContainer,"opacity",1));null!==this._lastFocusedNode&&b.removeClass(this._lastFocusedNode,this.nodeHighlightClass);this._lastFocusedNode=null},_loadItems:function(a){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();this._galleryFadeOutTotal.onEnd=b.hitch(this,function(h){b.empty(this.flowContainer);0<h.length?(this.maxNodes&&(h=h.splice(0,this.maxNodes)),b.forEach(h,b.hitch(this,function(e,g){e.id||(e.id=g);this.flowContainer.appendChild(this._buildNodeLayout(e,
g<this.largeNodes))})),b.create("br",{style:{clear:"both"}},this.flowContainer),h=b.query("."+this.nodeClass,this.domNode),h.connect("onmouseenter",this,this.node_onMouseEnter),h.connect("onmouseleave",this,this.node_onMouseLeave),this.tooltip&&b.connect(this.tooltip.domNode,"onmouseleave",this,this.tooltip_onMouseLeave)):b.create("span",{innerHTML:this.noResultsMessage||this._defaultNoResultsMessage,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=
null;this._suspendTooltip=!1},a);this._galleryFadeOutTotal.play()},clear:function(a){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();b.empty(this.flowContainer);b.empty(this._pages);b.create("span",{innerHTML:a,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=null;this._suspendTooltip=!1},_buildNodeLayout:function(a,h){var e=b.create("div",{id:"galleryNode_"+a.id,"class":this.nodeClass});b.addClass(e,h?"large":
"small");var g=arcgisonline.sharing.util;h=g.relativeToExplicitUrl("images/transparent.gif");"Web Mapping Application"==a.type&&(h=g.getStaticImagesUrl()+"/webapp.png");h="Mobile Application"==a.type?g.getStaticImagesUrl()+"/mobileapp.png":"Web Scene"===a.type||"Scene Service"===a.type?g.getStaticImagesUrl()+"/desktopapp.png":"Workforce Project"===a.type?g.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===a.type?g.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===a.type?g.getStaticImagesUrl()+
"/hubpage.png":"Hub Site Application"===a.type?g.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===a.type?g.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===a.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?g.getStaticImagesUrl()+"/webtool.png":"Ortho Mapping Project"===a.type?g.getStaticImagesUrl()+"/orthomappingproject.png":"Ortho Mapping Template"===a.type?g.getStaticImagesUrl()+"/orthomappingtemplate.png":"Notebook"===a.type?g.relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png"):
g.getStaticImagesUrl()+"/desktopapp.png";g.getGalleryMainLinkInfo(a);g=b.create("a",{href:"#"},e);b.connect(g,"onclick",this,this.onNodeClick,a);b.create("img",{"class":this.thumbClass,alt:a.snippet||"",src:a.thumbnail?this._getThumbailUrl(a):h},g);this.showNodeLabels&&(h=b.create("div",{"class":"galleryLabelContainer"},e),a=a.title||"",b.create("span",{innerHTML:a,alt:a,title:a},h));return e},_buildItemDetailsLayout:function(a,h,e){return arcgisonline.sharing.dijit.views.item.medium(a,{showThumb:this.showThumbnailInDetails,
align:(esriGeowConfig.isRightToLeft?0:"TR"==h.aroundCorner)?"right":"left",hideOpenMenu:!0,showProfilePopup:!1})},_getItemByNode:function(a){for(;!b.hasClass(a,this.nodeClass);)a=a.parentNode;a=a.id.substr(a.id.indexOf("_")+1);for(var h=0;h<this.items.length;h++)if(this.items[h].id==a)return this.items[h];return null},_getThumbailUrl:function(a){var h=this._userToken;return esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/info/"+a.thumbnail+(h?"?token\x3d"+h:"")},_layoutPageControls:function(){b.empty(this._pages);
if(1!==this.pageCount){for(var a=1;a<=this.pageCount;a++){var h=b.create("span",{innerHTML:a},b.create("a",{onclick:b.hitch(this,this.goToPage,a)},this._pages));a==this.currentPage&&b.addClass(h,"currentPage")}1==this.currentPage?b.style(this._prev.domNode,"visibility","hidden"):b.style(this._prev.domNode,"visbility","");this.currentPage==this.pageCount?b.style(this._next.domNode,"visibility","hidden"):b.style(this._next.domNode,"visbility","")}},nextPage:function(a){this.currentPage<this.pageCount&&
(!a.keyCode||13===a.keyCode||32===a.keyCode)&&this.goToPage(this.currentPage+1)},prevPage:function(a){1<this.currentPage&&(!a.keyCode||13===a.keyCode||32===a.keyCode)&&this.goToPage(this.currentPage-1)},goToPage:function(a){0<this.pageCount&&!isNaN(a)&&0<a&&(this._suspendTooltip=!0,this._loadRange((a-1)*this.nodesPerPage,this.nodesPerPage),this.currentPage=a,this.onPageChange(this.currentPage,-1))},_loadRange:function(a,h){var e=b.clone(this.items);this._loadItems(e.splice(a,h))},_setItemsAttr:function(a){this.items=
this.includeNode?b.filter(a,this.includeNode):a;0==this.items.length?(this.pageCount=1,this.onContentChange(0)):(this.pageCount=Math.ceil(this.items.length/this.nodesPerPage),this.onContentChange(this.items.length));this.currentPage=1;this.goToPage(1)},onPageChange:function(a,h){},onContentChange:function(a){},onNodeClick:function(a,h){},onNodeMouseEnter:function(a,h){},onNodeMouseLeave:function(a,h){}});b.declare("arcgisonline.sharing.dijit._GalleryContentPane",y.layout.ContentPane,{_gallery:null,
animateShowHide:!0,"class":"galleryPopup",fadeDuration:300,isShowing:!1,postCreate:function(){this.inherited(arguments);b.style(this.domNode,{position:"absolute",top:"-1000px",opacity:0});b.style(this.domNode,esriGeowConfig.isRightToLeft||-1<b.indexOf(["ar","he"],b.locale)?"right":"left","-1000px");this.fadeIn=b.fadeIn({node:this.domNode,duration:this.fadeDuration});this.fadeOut=b.fadeOut({node:this.domNode,duration:this.fadeDuration,onEnd:b.hitch(this,"_afterFade")})},_afterFade:function(){b.style(this.domNode,
{top:"-1000px"});b.style(this.domNode,esriGeowConfig.isRightToLeft?"right":"left","-1000px")},show:function(a){this.isShowing=!0;this.animateShowHide?(this.fadeOut.stop(),this.fadeIn.play()):b.style(this.domNode,"display","block")},hide:function(){this.isShowing=!1;this.animateShowHide?(this.fadeIn.stop(),this.fadeOut.play()):b.style(this.domNode,"display","none")}})})},"arcgisonline/sharing/dijit/views":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,arcgisonline/pages/organization/widgets/ProfilePopup,arcgisonline/pages/portal/Portal,arcgisonline/pages/utils/arrays,arcgisonline/pages/item/_Info"],
function(b,y,q){b.provide("arcgisonline.sharing.dijit.views");b.require("arcgisonline.sharing.dijit.TextMenu");b.require("arcgisonline.sharing.util");b.require("arcgisonline.pages.organization.widgets.ProfilePopup");b.require("arcgisonline.pages.portal.Portal");b.require("arcgisonline.pages.utils.arrays");b.require("arcgisonline.pages.item._Info");arcgisonline.sharing.dijit.views.item={detailClass:"itemDetail",thumbClass:"itemThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this._i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);b.mixin(this._i18n,{source:b.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.source});b.mixin(this._i18n,{visitOrganization:b.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.visitOrganization});return this._i18n},_util:arcgisonline.sharing.util,
small:function(a,h,e){var g=b.create,f=g("div",{"class":this.detailClass+" small"}),m=this._util.getGalleryMainLinkInfo(a);h&&(h=g("div",{"class":this.thumbContainerClass},f),b.addClass(f,e),g("img",{src:this._getThumbnailUrl(a),"class":this.thumbClass},g("a",{href:m.href||"#",target:m.target,alt:m.tip,title:m.tip},h)));g("a",{href:"#",innerHTML:a.title},g("span",{"class":this.titleClass},f));e=this._util.getSnippet(a.snippet,a.description);g("span",{"class":this.snippetClass,innerHTML:e},f);a=arcgisonline.sharing.geow.Content.changeTypename(a)+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy+"\x3cspan class\x3d'esriItemOwner'\x3e"+a.owner+"\x3c/span\x3e ("+this._util.toFullDateString(a.modified)+")";g("span",{innerHTML:a},f);return f},mediumFormat:function(a,h){return this.medium(h,!0,"left")},itemLinkInfo:function(a){var h=this._util.getGalleryMainLinkInfo(a);a=this._util.getItemDetailsLinkInfo(a);return{openLink:h,detailLink:a}},medium:function(a,h){var e=b.create,g=e("div",{"class":this.detailClass+" medium"});if(h.unshareHandler){var f=
e("a",{href:"#",className:"unshare esriFloatTrailing",style:{display:"none"}},g);e("img",{src:arcgisonline.sharing.util.relativeToExplicitUrl("images/delete_20x20.png"),alt:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup,title:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup},f);b.connect(f,"onclick",b.partial(h.unshareHandler,a.id,g))}var m=this.itemLinkInfo(a);f=m.openLink;m=m.detailLink;if(h.showThumb){var l=e("div",{"class":this.thumbContainerClass},g);b.addClass(g,
h.align||"left");if(a.thumbnail&&0<a.thumbnail.length){var d=e("img",{src:this._getThumbnailUrl(a),"class":this.thumbClass},e("a",{href:f.href||"#",target:f.target,alt:f.tip,title:f.tip},l));f.onclick&&b.connect(d,"onclick",f.onclick)}else d=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png"),d="Web Mapping Application"==a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==
a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubpage.png":"Hub Site Application"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===a.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?
arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Image"===a.type?arcgisonline.sharing.util.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):"Web Scene"===a.type||"Scene Service"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":"Ortho Mapping Template"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingtemplate.png":"Ortho Mapping Project"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingproject.png":
arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png",d=e("img",{src:d,"class":this.thumbClass},e("a",{href:f.href||"#",target:f.target,alt:f.tip,title:f.tip},l)),f.onclick&&b.connect(d,"onclick",f.onclick);e("br",null,l);l=e("span",{"class":"esriItemLinks"},l);d=this._util.getItemOpenLinkObjects(a);if(0<d.length){var c=e("span",{innerHTML:f.label},e("a",{href:f.href||"#",target:f.target,alt:f.tip,title:f.tip,style:{marginRight:0}},l));f.onclick&&b.connect(c,"onclick",f.onclick);h.hideOpenMenu||
(e("span",{innerHTML:"\x26nbsp;"},l),f=e("div",{innerHTML:"","class":"dijitReset dijitInline esriArrows",title:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,alt:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,style:{height:"11px",cursor:"pointer"}},l),new arcgisonline.sharing.dijit.TextMenu({triggerNode:f,labelNode:c,textMenuItems:d}));e("span",{innerHTML:"\x26nbsp;\x26nbsp\x26nbsp;"},l)}null!==m&&e("span",{innerHTML:m.label},e("a",{href:m.link||"#",alt:m.tip,title:m.tip,target:m.target?
m.target:""},l))}f=e("div",{"class":"itemTextContainer"},g);e("a",{href:m.link,innerHTML:a.title,alt:m.tip,title:m.tip},e("span",{"class":this.titleClass},f));m=this._util.getSnippet(a.snippet,a.description);e("span",{"class":this.snippetClass,innerHTML:m||""},f);m=e("div",null,f);(l=this._getTypeIcon(a))&&e("span",{innerHTML:l},m);l="";l=arcgisonline.sharing.geow.Content.changeTypename(a)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;d=-1<b.indexOf(a.typeKeywords,"ArcGIS Server")||"Feature Collection"==
a.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"";c="GeoJson"===a.type?"GeoJSON":a.type;c=-1<c.toLowerCase().indexOf("add in")?c.replace(/(add in)/ig,"Add-In"):c;e("span",{title:d+c,innerHTML:l,"class":"dim"},m);l=e("span",{"class":"esriItemAuthor"},m);l=e("a",{innerHTML:a.owner,"class":"linkNoHref",owner:a.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},l);h.showProfilePopup?(this._bindProfilePopup(l),
b.attr(l,{"class":"linkNoHref",owner:a.owner})):b.attr(l,"href",esriGeowConfig.baseUrl+"user.html?user\x3d"+a.owner);e("div",{innerHTML:"\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(a.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},m);(h=arcgisonline.sharing.geow.Content._getPremiumItemNode(a))&&b.place(h,b.create("div",{className:"dim esriPremiumContent"},m,"last"));h=b.create("span",{"class":"dojoxRating dijitInline"});
9>b.isIE&&b.style(h,"zoom",0);m=b.create("ul",null,h);l=Math.round(a.avgRating);for(d=1;d<=l;d++)b.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},m);for(;5>l;l++)b.create("li",{"class":"dojoxRatingStar dijitInline Hover"},m);a=this._getMsgRatings(a);e=e("span",{innerHTML:a,"class":"dim"},f);b.place(h,e,"first");return g},map:function(a,h){var e=b.create;h=h||e("div",{"class":this.detailClass+" medium"});if("public_authoritative"===a.contentStatus&&!a.orgSelf)if(esriGeowConfig.self.id&&
a.orgId===esriGeowConfig.self.id)a.orgSelf=esriGeowConfig.self;else return esri.request({url:location.protocol+"//"+esriGeowConfig.self.portalHostname+"/sharing/rest/portals/"+a.orgId+"?f\x3djson",callbackParamName:"callback",load:function(c,k){a.orgSelf=c;arcgisonline.sharing.dijit.views.item.map(a,h)},error:function(c,k){a.orgSelf={};arcgisonline.sharing.dijit.views.item.map(a,h)}}),h;var g=e("div",{"class":"itemTextContainer"},h),f=this._util.getSnippet(a.snippet,a.description);e("span",{"class":this.snippetClass,
innerHTML:f?this._util.htmlEncode(f):""},g);f=e("span",null,g);var m=this._getTypeIcon(a,!0);m&&e("span",{innerHTML:m},f);m="";m=a.url&&-1<b.indexOf(a.typeKeywords,"Hosted Service")&&(arcgisonline.sharing.util.isHostedServiceItem(a)||arcgisonline.sharing.util.portalSupportsHostedServices())?arcgisonline.sharing.geow.Content.changeTypename(a,!0)+arcgisonline.sharing.dijit.views.item.i18n().startBracket+arcgisonline.sharing.dijit.views.item.i18n().hostedService+arcgisonline.sharing.dijit.views.item.i18n().endBracket+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy:arcgisonline.sharing.geow.Content.changeTypename(a,!1)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;var l=-1<b.indexOf(a.typeKeywords,"ArcGIS Server")||"Feature Collection"==a.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"",d="GeoJson"===a.type?"GeoJSON":a.type;d=-1<d.toLowerCase().indexOf("add in")?d.replace(/(add in)/ig,"Add-In"):d;e("span",{title:l+d,innerHTML:m,"class":"dim"},f);m=e("span",{"class":"esriItemAuthor"},
f);"public_authoritative"===a.contentStatus&&a.orgSelf&&a.orgSelf.name?(m=e("a",{innerHTML:a.orgSelf.name,"class":"linkNoHref",owner:a.orgSelf.name,alt:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization,title:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization},m),b.connect(m,"onclick",this,function(c){arcgisonline.map.storage.saveMapInCookie(null,!1);a.orgSelf.urlKey?c=location.protocol+"//"+a.orgSelf.urlKey+"."+a.orgSelf.customBaseUrl+"/home/home.html":(c=location.protocol+
"//"+a.orgSelf.portalHostname+"/home/home.html","7443"===location.port&&(c=arcgisonline.sharing.util.getSecureUrl(baseUrl)));window.open(c)})):(m=e("a",{innerHTML:a.owner,"class":"linkNoHref",owner:a.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},m),this._bindProfilePopup(m));b.attr(m,{"class":"linkNoHref",owner:a.owner});e("div",{innerHTML:"\x3cbr/\x3e\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+
"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(a.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},f);(m=arcgisonline.sharing.geow.Content._getPremiumItemNode(a))&&b.place(m,b.create("div",{className:"dim esriPremiumContent"},f,"last"));f=b.create("span",{"class":"dojoxRating dijitInline"});9>b.isIE&&b.style(f,"zoom",0);m=b.create("ul",null,f);l=Math.round(a.avgRating);for(d=1;d<=l;d++)b.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},m);for(;5>l;l++)b.create("li",
{"class":"dojoxRatingStar dijitInline Hover"},m);m=this._getMsgRatings(a);e=e("span",{innerHTML:m,"class":"dim"},g);b.place(f,e,"first");return h},_bindProfilePopup:function(a){this.popup&&this.popup.close();b.connect(a,"onclick",this,function(h){var e=b.attr(h.currentTarget,"owner");this.popup=new arcgisonline.pages.organization.widgets.ProfilePopup({username:e,opener:h.target,portal:new arcgisonline.pages.portal.Portal(esriGeowConfig.restBaseUrl)});this.popup.open()})},_getMsgRatings:function(a){var h=
"";h=1===a.numRatings?h+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingMsg,{ratingcount:b.number.format(a.numRatings,{pattern:"#,###,###,##0"})}):h+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingsMsg,{ratingcount:b.number.format(a.numRatings,{pattern:"#,###,###,##0"})});h=1===a.numComments?h+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentMsg,{commentcount:b.number.format(a.numComments,{pattern:"#,###,###,##0"})}):h+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentsMsg,
{commentcount:b.number.format(a.numComments,{pattern:"#,###,###,##0"})});var e=a.type;e=e?arcgisonline.pages.item._Info[e]||null:null;h=!e||"file"!==e.classification||arcgisonline.pages.utils.arrays.includes(e.types,"is-views")||arcgisonline.pages.utils.arrays.includes(e.types,"is-pdf")?1===a.numViews?h+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewMsg,{viewcount:b.number.format(a.numViews,{pattern:"#,###,###,##0"})}):h+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewsMsg,
{viewcount:b.number.format(a.numViews,{pattern:"#,###,###,##0"})}):1===a.numViews?h+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadMsg,{downloadcount:b.number.format(a.numViews,{pattern:"#,###,###,##0"})}):h+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadsMsg,{downloadcount:b.number.format(a.numViews,{pattern:"#,###,###,##0"})});return h=arcgisonline.sharing.dijit.views.item.i18n().startBracket+h+arcgisonline.sharing.dijit.views.item.i18n().endBracket},
_getThumbnailUrl:function(a){var h=this._util.getToken();h=h?"?token\x3d"+h:"";if(a.thumbnail)return esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/info/"+a.thumbnail+h;h=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png");return h="Web Mapping Application"==a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==a.type?arcgisonline.sharing.util.getStaticImagesUrl()+
"/workforceproject.png":"Geoprocessing Service"===a.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Web Scene"==a.type||"Scene Service"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png"},_getTypeIcon:function(a,h){h=arcgisonline.sharing.geow.Content._getItemIconUrl(a,!0);var e=(-1<b.indexOf(a.typeKeywords,"ArcGIS Server")||"Feature Collection"==
a.type?this.i18n().source+" ":"")+("GeoJson"===a.type?"GeoJSON":a.type),g="";h&&("Web Scene"===e&&(e=-1<b.indexOf(a.typeKeywords,"ViewingMode-Local")?this.i18n().localWebScene:this.i18n().globalWebScene),g='\x3cimg src\x3d"'+h+'" alt\x3d"'+e+'" title\x3d"'+e+'" style\x3d"vertical-align:middle;"/\x3e\x26nbsp;');return g}};arcgisonline.sharing.dijit.views.group={_util:arcgisonline.sharing.util,detailClass:"itemDetail group",thumbClass:"groupThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this._i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(a){var h=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/groups/"+a.id+"/info/"+a.thumbnail+(h?"?token\x3d"+h:"")},small:function(a,h,e){var g=b.create,f=g("div",{"class":this.detailClass});b.addClass(f,
"small");var m={target:"",href:"#"};h&&(h=g("div",{"class":this.thumbContainerClass},f),b.addClass(f,e||"left"),a.thumbnail&&0<a.thumbnail.length?g("img",{src:this._getThumbnailUrl(a),"class":this.thumbClass},h):g("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},h));g("a",{href:m.href,target:m.target,innerHTML:a.title,alt:m.tip,title:m.tip},g("span",{"class":this.titleClass},f));e=this._util.getSnippet(a.snippet,a.description);g("span",{"class":this.snippetClass,
innerHTML:e},f);e=g("span",null,null);g("span",{innerHTML:"owned by ","class":"dim"},e);e=g("span",{"class":"esriItemAuthor"},e);g("a",{innerHTML:a.owner,href:""},e);return f},medium:function(a,h){var e=b.create,g=e("div",{"class":this.detailClass+" medium"}),f=esriGeowConfig.baseUrl+"group.html?id\x3d"+a.id;arcgisonline.sharing.dijit.views.group.i18n();arcgisonline.sharing.dijit.views.group.i18n();if(h.showThumb){var m=e("div",{"class":this.thumbContainerClass},g);b.addClass(g,h.align||"left");if(h.groupsUser){var l=
this._util.getUser();arcgisonline.sharing.geow.Community.getProfile(a.owner,b.hitch(this,function(k,t,n){t.code||t.message?e("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},e("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):"public"===k.access||t.orgId&&t.orgId===l.accountId?a.thumbnail&&0<a.thumbnail.length?e("img",{src:this._getThumbnailUrl(a),
"class":this.thumbClass},e("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):e("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},e("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):e("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},e("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m))},a))}else a.thumbnail&&0<a.thumbnail.length?e("img",{src:this._getThumbnailUrl(a),"class":this.thumbClass},e("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):e("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},e("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)),e("br",null,m),b.place(this._util.getGroupLinks(a),m)}var d=e("div",{"class":"itemTextContainer"},g);e("a",{href:f,innerHTML:a.title,alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},e("span",{"class":this.titleClass},d));var c=this._util.getSnippet(a.snippet,
a.description);e("span",{"class":this.snippetClass,innerHTML:c||""},d);d=e("span",null,d);e("span",{innerHTML:arcgisonline.sharing.dijit.views.group.i18n().createdBy,"class":"dim"},d);c=e("span",{"class":"esriItemAuthor"},d);c=e("a",{innerHTML:a.owner,alt:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile},c);h.showProfilePopup?(this._bindProfilePopup(c),b.attr(c,{"class":"linkNoHref",owner:a.owner})):b.attr(c,"href",esriGeowConfig.baseUrl+
"user.html?user\x3d"+a.owner);h=a.created;e("span",{innerHTML:"\x26nbsp;"+arcgisonline.sharing.dijit.views.group.i18n().createdOn+"\x26nbsp;"+this._util.toFullDateString(h),"class":"dim"},d);return g}};arcgisonline.sharing.dijit.views.profile={_util:arcgisonline.sharing.util,detailClass:"itemDetail",thumbClass:"profileThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle esriProfilePopupTitle",snippetClass:"esriItemSnippet",noDescriptionText:"",i18n:function(){if(this._i18n)return this._i18n;
this._i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this._i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(a){var h=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/users/"+a.username+"/info/"+a.thumbnail+(h?"?token\x3d"+h:"")},medium:function(a,h){arcgisonline.sharing.dijit.views.profile.noDescriptionText=arcgisonline.sharing.dijit.views.profile.i18n().userPersonalInfoMsg;arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText=
arcgisonline.sharing.dijit.views.profile.i18n().memberPersonalInfoMsg;var e=arcgisonline.sharing.util.getUser(),g=b.create,f=g("div",{"class":this.detailClass});b.addClass(f,"medium");g("div",{"class":this.titleClass,innerHTML:a.fullName||a.username},f);if(e&&e.accountId&&a.accountId&&a.role&&e.accountId==a.accountId){var m="\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;";"account_publisher"===a.role?m+=arcgisonline.sharing.dijit.views.profile.i18n().publisher:"account_admin"===a.role?m+=arcgisonline.sharing.dijit.views.profile.i18n().administrator:
"account_user"===a.role&&(m+=arcgisonline.sharing.dijit.views.profile.i18n().user);g("span",{innerHTML:m},g("strong",{},f))}h.showThumb&&(m=g("div",{"class":this.thumbContainerClass},f),b.addClass(f,h.align||"left"),a.thumbnail&&0<a.thumbnail.length?g("img",{src:this._getThumbnailUrl(a),"class":this.thumbClass},m):g("img",{src:this._util.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),"class":this.thumbClass,style:"width:150px; height:150px;"},m));h=g("div",{"class":this.snippetClass},
g("span",{"class":"esriItemLinks"},f));m=this._util.removeHTMLTags(a.description);var l=e&&e.accountId&&a.orgId&&e.accountId===a.orgId?arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText:arcgisonline.sharing.dijit.views.profile.noDescriptionText;m=0<m.length?a.description:l;m=this._util.linkifyText(m);8>b.isIE&&(m="\x3cpre class\x3d'esriProfileDesc'\x3e"+m+"\x3c/pre\x3e");g("span",{innerHTML:m,style:"white-space:pre-wrap;"},h,"only");if("undefined"!==typeof isEmbedded&&isEmbedded)return f;
h=g("div",{style:{clear:"both"},"class":"profileLinks esriItemLinks esriFloatTrailing left"},f);m=g("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"user.html?user\x3d"+a.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().profile},h,"last");b.connect(m,"onclick",function(){-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?arcgisonline.map.storage.saveMapInCookie(null,!0,null,null,b.hitch(this,function(){window.location=
esriGeowConfig.baseUrl+"user.html?user\x3d"+a.username})):window.location=esriGeowConfig.baseUrl+"user.html?user\x3d"+a.username});this._util.relativeToExplicitUrl("js/arcgisonline/css/images/transparent.gif");-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&this._util.relativeToExplicitUrl("images/transparent.gif");m=esriGeowConfig.userRole&&esriGeowConfig.userRole.isAdmin();var d=(l=esriGeowConfig.userRole&&esriGeowConfig.userRole.isCustom())&&esriGeowConfig.userRole.canViewUsers()&&
esriGeowConfig.userRole.canViewOrgItems();e&&(e.username===a.username?g("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},h,"last"):e.accountId&&e.role&&a.orgId&&a.role&&(m||l&&d)&&e.accountId===a.orgId&&g("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html?user\x3d"+a.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},h,"last"));g("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?q\x3downer:%22"+
a.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().items},h,"last");g("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?t\x3dgroups\x26q\x3downer:%22"+a.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().groups},h,"last");g("div",{style:{clear:"both",width:"100%"}},f);return f}}})},"arcgisonline/pages/organization/widgets/ProfilePopup":function(){define("require exports tslib esri/Evented dojo/keys dojo/on dojo/text!./templates/ProfilePopup.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase dijit/popup dijit/TooltipDialog arcgisonline/pages/utils/icons arcgisonline/pages/utils/dom arcgisonline/pages/utils/strings arcgisonline/pages/utils/user arcgisonline/pages/utils/focus arcgisonline/pages/pageUtil arcgisonline/pages/dijit/MemberThumb arcgisonline/pages/organization/widgets/GroupIcon arcgisonline/pages/portal/PortalUser arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/sharing/dijit/_LevelAwareMixin arcgisonline/telemetry arcgisonline/tsutils/declareDecorator".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k,t,n,u,x,A,z,E,w,D,r,v,B,C){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);t=q.__importDefault(t);n=q.__importDefault(n);u=q.__importDefault(u);x=q.__importDefault(x);A=q.__importDefault(A);z=q.__importDefault(z);E=q.__importDefault(E);w=q.__importDefault(w);D=q.__importDefault(D);r=
q.__importDefault(r);v=q.__importDefault(v);B=q.__importDefault(B);C=q.__importDefault(C);return function(){function F(G,H){this.templateString=g.default;this.i18n=f.default;this.icons=k.default;this.isSelf=this.loaded=!1;this.itemTotal=0;this.canUpdateProfile=!1}F.prototype.postCreate=function(){var G;this.inherited(arguments);this.telemetry=B.default.init(this.portal,!0);this.dialog=new c.default({class:"profile-popup",title:"",content:this.domNode,_onKey:this.handleDialogKeydown.bind(this)});this.currentUser=
D.default.getUser();this.isSelf=(null===(G=this.currentUser)||void 0===G?void 0:G.username)===this.username;this.addEventListeners()};F.prototype.open=function(){this.logEvent("open");this.render()};F.prototype.close=function(){this.loaded&&(d.default.close(this.dialog),this.emit("close"),this.dialog.destroy(),this.destroy())};F.prototype.handleDialogKeydown=function(G){var H=this;if(G.keyCode===h.default.TAB)if(G.stopPropagation(),this.lastFocusItem!==G.target||G.shiftKey)G.shiftKey&&this.firstFocusItem===
G.target&&(G.preventDefault(),this.opener.focus(),this.close());else{G.preventDefault();var J=x.default.getFocusableElements(document.body);J.forEach(function(I,K){I===H.opener&&J[K+1].focus()});this.close()}};F.prototype.render=function(){var G=this;this.getUser(this.username).then(function(H){var J,I,K=null===(J=G.currentUser)||void 0===J?void 0:J.userRole;J=H.orgId&&H.orgId===(null===(I=G.currentUser)||void 0===I?void 0:I.orgId);I=(null===K||void 0===K?void 0:K.isAdmin())&&J;G.canUpdateProfile=
G.isSelf||I||(null===K||void 0===K?void 0:K.canUpdateUsers())&&J;H.fullName||(H.fullName=u.default.createFullName(H));K=H.username;I=H.fullName;J=H.groups;var R=H.description;H.thumbnailUrl||(H.thumbnailUrl="");new z.default({member:new w.default(q.__assign(q.__assign({},H),{portal:G.portal})),cssClasses:"member-thumb--small margin-right-half flex-0"},G.domNode.querySelector(".js-member-thumb"));G.fullNameEl.textContent=I;G.usernameEl.textContent=K;R&&(R=n.default.escapeNewlines(n.default.addHyperlinks(n.default.restoreNewlines(R))));
G.bioEl.innerHTML=n.default.insertHTMLLineBreaks(R);R||t.default.hideNode(G.bioContainer);J?G.renderGroups(J):G.getUserGroups(K).then(function(W){G.renderGroups(W.results)});G.user=H;G.getUserItems(K).then(function(W){W.total&&(G.itemCountEl.textContent=G.itemTotal=W.total,t.default.showNode(G.itemsSection));G.showContent();G.checkIfHideProfileLink()},function(){G.showContent();G.checkIfHideProfileLink()})})};F.prototype.checkIfHideProfileLink=function(){this.itemTotal||this.canUpdateProfile||t.default.hideNode(this.viewProfileBtn)};
F.prototype.renderGroups=function(G){var H=this;if(G&&G.length){if(G.slice(0,5).forEach(function(I){I=new E.default({group:I,portal:H.portal,size:"32",letterSize:"1",cssClasses:"org-member-card__group-tile"});H.groupIcons.appendChild(I.domNode)}),5<G.length){var J=document.createElement("div");J.className="org-member-card__more-tile link-darker-gray flex-center";J.textContent="+"+(G.length-5);this.groupIcons.appendChild(J)}}else t.default.hideNode(this.groupsSection)};F.prototype.getUserItems=function(G){var H;
return D.default.request({url:r.default.restBaseUrl+"search",content:{q:'owner:"'+G+'" '+((null===(H=null===r.default||void 0===r.default?void 0:r.default.viewQueries)||void 0===H?void 0:H.none)||""),sortField:"relevance",sortOrder:"desc",num:100}})};F.prototype.getUserGroups=function(G){return D.default.request({url:r.default.restBaseUrl+"community/groups",content:{q:'(owner:"'+G+'")'}})};F.prototype.showContent=function(){var G=this;this.groupsSection.classList.contains("hide")&&this.itemsSection.classList.contains("hide")&&
!this.bioEl.innerHTML&&t.default.hideNode(this.bottomSection);this.loader.classList.remove("is-active");t.default.showNode(this.content);this.loaded=!0;d.default.open({popup:this.dialog,orient:["below","above"],around:this.opener,onCancel:function(){G.opener.focus();G.close()}});var H=x.default.getFocusableElements(this.dialog.domNode);this.firstFocusItem=H[0];this.lastFocusItem=H[H.length-1];this.firstFocusItem.focus();this.dialog.domNode.parentElement.classList.add("profile-popup__container");this.dialogClass&&
this.dialog.domNode.parentElement.classList.add(this.dialogClass);setTimeout(function(){t.default.showHide(G.bioToggle,G.bioEl.scrollHeight>G.bioEl.clientHeight)},100)};F.prototype.getUser=function(G){return D.default.request({url:r.default.restBaseUrl+"community/users/"+G})};F.prototype.addEventListeners=function(){var G=this;this.own(e.default(this.closeIcon,"click",function(){d.default.close(G.dialog)}),e.default(this.domNode,"click",function(H){H.stopPropagation()}),e.default(document.body,"click",
function(){G.close()}),e.default(this.groupsSection,"click",function(){G.logEvent("view all groups");A.default.goToPage("groups",G.user)}),e.default(this.itemsSection,"click",function(){G.logEvent("view all content");A.default.goToPage("content",G.user)}),e.default(this.viewProfileBtn,"click",function(){G.logEvent("view profile");window.open(r.default.baseUrl+"user.html"+(G.isSelf?"":"?user\x3d"+G.username),"_blank")}),e.default(this.bioToggle,"click",function(){return G.handleBioToggleClick()}))};
F.prototype.handleBioToggleClick=function(){this.bioContainer.classList.toggle("profile-popup__bio-container--expanded")};F.prototype.logEvent=function(G){var H;null===(H=this.telemetry)||void 0===H?void 0:H.logEvent({category:"profile popup",action:G})};return F=q.__decorate([C.default(l.default,m.default,v.default,a.default)],F)}()})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k){b=b("dijit.TooltipDialog",[f,d,l,m],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:c,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"keydown",h.hitch(this,"_onKey")))},orient:function(t,n,u){t={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[n+"-"+u];y.replace(this.domNode,t,this._currentOrientClass||"");this._currentOrientClass=t},focus:function(){this._getFocusItems();
g.focus(this._firstFocusItem)},onOpen:function(t){this.orient(this.domNode,t.aroundCorner,t.corner);var n=t.aroundNodePos;"M"==t.corner.charAt(0)&&"M"==t.aroundCorner.charAt(0)?(this.connectorNode.style.top=n.y+(n.h-this.connectorNode.offsetHeight>>1)-t.y+"px",this.connectorNode.style.left=""):"M"==t.corner.charAt(1)&&"M"==t.aroundCorner.charAt(1)&&(this.connectorNode.style.left=n.x+(n.w-this.connectorNode.offsetWidth>>1)-t.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(t){if(t.keyCode==
a.ESCAPE)this.defer("onCancel"),t.stopPropagation(),t.preventDefault();else if(t.keyCode==a.TAB){var n=t.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(t.stopPropagation(),t.preventDefault()):n==this._firstFocusItem&&t.shiftKey?(g.focus(this._lastFocusItem),t.stopPropagation(),t.preventDefault()):n!=this._lastFocusItem||t.shiftKey?t.stopPropagation():(g.focus(this._firstFocusItem),t.stopPropagation(),t.preventDefault())}}});q("dojo-bidi")&&b.extend({_setTitleAttr:function(t){this.containerNode.title=
this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,t):t;this._set("title",t)},_setTextDirAttr:function(t){this._created&&this.textDir==t||(this._set("textDir",t),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return b})},"arcgisonline/pages/utils/user":function(){define("require exports tslib ../../esriGeowConfig ./resources ./arrays dojo/Deferred dojo/_base/kernel esri/lang".split(" "),function(b,y,q,a,h,e,g,f,m){a=q.__importDefault(a);
h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);return function(){function l(){}l.createFullName=function(d){var c=null===d||void 0===d?void 0:d.fullName;m.default.isDefined(d.firstName)&&m.default.isDefined(d.lastName)&&(c="ja"===f.default.locale?d.lastName+" "+d.firstName:d.firstName+" "+d.lastName);return c};l.splitFullName=function(d){var c={first:void 0,last:void 0};d&&(d=d.split(" "),1===d.length?(c.first=d[0],c.last=""):1<d.length&&
(c.last=d.splice(d.length-1,1)[0],c.first=d.join(" ")));return c};l.checkUsernames=function(d){var c=new g.default,k={usernames:[]};h.default.sendAllResources(a.default.restBaseUrl+"community/checkUsernames",200,d,function(t){return{usernames:t.join(",")}}).then(function(t){t.forEach(function(n){return k.usernames=k.usernames.concat(n.usernames)});c.resolve(k)},function(t){c.resolve(t)});return c};l.checkForFavorites=function(d,c,k){var t=new g.default,n=(null===k||void 0===k?void 0:k.items)||[];
d=null===d||void 0===d?void 0:d.favGroupId;var u=n.map(function(x){return x.id});d&&(null===u||void 0===u?0:u.length)?(d='(group:"'+d+'" AND id:('+u.join(" OR ")+"))",c.queryItems({q:d,num:n.length||1},!0).then(function(x){var A=x.results||[];n.forEach(function(z){z.isFavorite=!!e.default.find(A,function(E){return z.id===E.id})});t.resolve(k)},function(x){t.resolve(k)})):t.resolve(k);return t};l.createValidOrgUsername=function(d,c,k,t){var n,u=null!==(n=(null===d||void 0===d?void 0:d.length)+(null===
c||void 0===c?void 0:c.length))&&void 0!==n?n:0;d=d.substring(0,d.length-(u>t?u%t:0))+c.replace(/-/g,"_");d.length<k&&(c=k-d.length,d&&0<c&&(k=""+(new Date).getTime(),d+=k.substring(k.length-c)));return d};l.stripOrgKeyFromUsername=function(d,c){if(d){var k=d.lastIndexOf(c);if(-1<k&&k<d.length-1&&k===d.length-c.length-1)return d.substring(0,k)}return d};l.cleanUsername=function(d,c){var k=/[^[a-zA-Z0-9@_\.]]*/g,t=/[^[a-zA-Z0-9@_\.\-]]*/g;return 0<(null===d||void 0===d?void 0:d.length)?c?d.replace(t,
"_"):d.replace(k,"_"):d};l.cleanUsernameDomain=function(d,c,k){return d&&(c||k)&&(c=d.indexOf("\\"),-1<c&&c<=d.length-2)?d.substring(c+1)+"@"+d.substring(0,c).toUpperCase():d};l.stripUsernameDomain=function(d,c,k){return d&&!c&&k?d.split("@").shift():d};l.removeSAMLSuffix=function(d,c){c="_"+c;return d.lastIndexOf(c)===d.length-c.length?d.substring(0,d.lastIndexOf(c)):d};l.addSAMLSuffix=function(d,c){var k=d&&c;c="_"+c;var t=k&&-1===d.indexOf(c);k=k&&d.lastIndexOf(c)===d.length-c.length;return t||
k?d+c:d};l.isStoryteller=function(d){var c;return"storytellerut"===(null===(c=d.userLicenseTypeId)||void 0===c?void 0:c.toLowerCase())};return l}()})},"arcgisonline/pages/utils/focus":function(){define(["require","exports","tslib","./dom"],function(b,y,q,a){a=q.__importDefault(a);return function(){function h(){}h.getFocusableElements=function(e){e=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex\x3d"-1"]), iframe');for(var g=[],f=0;f<e.length;f++){var m=e[f];null===
m.offsetParent||a.default.canBeDisabled(m)&&m.disabled||g.push(m)}return g};h.trapFocus=function(e){function g(m){var l=f(),d=l[0];l=l[l.length-1];if("Tab"===m.key||9===m.keyCode)m.shiftKey?document.activeElement===d&&(l.focus(),m.preventDefault()):document.activeElement===l&&(d.focus(),m.preventDefault())}var f=this.getFocusableElements.bind(this,e);e.addEventListener("keydown",g);return g};h.untrapFocus=function(e,g){e.removeEventListener("keydown",g)};return h}()})},"arcgisonline/pages/dijit/MemberThumb":function(){define("require exports tslib dojo/on dojo/text!./MemberThumb/templates/MemberThumb.html dijit/_TemplatedMixin dijit/_WidgetBase ../utils/formatters ../utils/strings ../utils/icons ../utils/dom ../../tsutils/declareDecorator arcgisonline/esriGeowConfig".split(" "),
function(b,y,q,a,h,e,g,f,m,l,d,c,k){a=q.__importDefault(a);h=q.__importDefault(h);e=q.__importDefault(e);g=q.__importDefault(g);f=q.__importDefault(f);m=q.__importDefault(m);l=q.__importDefault(l);d=q.__importDefault(d);c=q.__importDefault(c);k=q.__importDefault(k);return function(){function t(n,u){this.icons=l.default;this.templateString=h.default;this.hide=f.default.hide;this.show=f.default.show;this.cssClasses="";this.showTooltip=!1}t.prototype.postMixInProperties=function(){var n,u;this.inherited(arguments);
this.member.thumbnailUrl&&this.member.thumbnailUrl!==this.member.defaultThumbnailUrl?((null===(n=k.default.userInfo)||void 0===n?0:n.token)&&-1===this.member.thumbnailUrl.indexOf("token")&&(this.member.thumbnailUrl+=(-1<this.member.thumbnailUrl.indexOf("?")?"\x26":"?")+"token\x3d"+(null===(u=k.default.userInfo)||void 0===u?void 0:u.token)),this.member.initials="",this.member.backgroundColor="#FFFFFF"):this.showInitials()};t.prototype.postCreate=function(){var n=this;this.inherited(arguments);this.showTooltip&&
(this.domNode.setAttribute("aria-label",this.member.fullName),this.domNode.classList.add("tooltip"));this.own(a.default(this.img,"error",function(){return n.showInitials()}))};t.prototype.showInitials=function(){if(this.member.fullName.trim()){var n=this.member.fullName.split(" ");this.member.initials=n[0].substring(0,1)+(n[1]?n[1].substring(0,1):"")}else this.member.username&&(this.member.initials=this.member.username.substring(0,2));this.initials&&(this.initials.textContent=this.member.initials);
this.member.backgroundColor=this._getMemberFillColor(this.member);this.content&&(this.content.style.backgroundColor=this.member.backgroundColor);d.default.hideNode(this.img);d.default.showNode(this.initials)};t.prototype._getMemberFillColor=function(n){var u=n.id?n.id.substr(n.id.length-6):"";m.default.isValidHex(u)||(u=m.default.stringToHex(n.username));n=m.default.hexToRgb(u);return"rgba("+n.r+","+n.g+","+n.b+", 0.2)"};return t=q.__decorate([c.default(g.default,e.default)],t)}()})},"dojo/NodeList-fx":function(){define(["./query",
"./_base/lang","./aspect","./_base/fx","./fx"],function(b,y,q,a,h){b=b.NodeList;y.extend(b,{_anim:function(e,g,f){f=f||{};var m=h.combine(this.map(function(l){l={node:l};y.mixin(l,f);return e[g](l)}));return f.auto?m.play()&&this:m},wipeIn:function(e){return this._anim(h,"wipeIn",e)},wipeOut:function(e){return this._anim(h,"wipeOut",e)},slideTo:function(e){return this._anim(h,"slideTo",e)},fadeIn:function(e){return this._anim(a,"fadeIn",e)},fadeOut:function(e){return this._anim(a,"fadeOut",e)},animateProperty:function(e){return this._anim(a,
"animateProperty",e)},anim:function(e,g,f,m,l){var d=h.combine(this.map(function(c){return a.animateProperty({node:c,properties:e,duration:g||350,easing:f})}));m&&q.after(d,"onEnd",m,!0);return d.play(l||0)}});return b})},"arcgisonline/sharing/geow/QueryReadStore":function(){define(["dojo","dijit","dojox","dojo/require!dojox/data/QueryReadStore,arcgisonline/sharing/geow/Content"],function(b,y,q){b.provide("arcgisonline.sharing.geow.QueryReadStore");b.require("dojox.data.QueryReadStore");b.require("arcgisonline.sharing.geow.Content");
b.declare("arcgisonline.sharing.geow.QueryReadStore",q.data.QueryReadStore,{_fetchItems:function(a,h,e){var g=a.serverQuery||a.query||{};g.start=a.start||0;g.start++;a.count&&(g.num=a.count);arcgisonline.sharing.geow.Content.search(this.url,g,b.hitch(this,function(f){var m=f.total||-1;b.publish("gridCount",[f.total]);this.onResultCount(f.total);this._total=f.total;this._items=[];b.forEach(f.results,function(d,c){c=d.tags||d.keywords||[];var k=void 0==d.imageUrl?arcgisonline.sharing.geow.Content._getItemImageUrl(d):
d.imageUrl,t=d.uploaded||d.created,n=void 0==d.extent?arcgisonline.sharing.geow.Community._getGroupTitleLink(d):d.title,u=d.item||"",x="";d.snippet&&0<d.snippet.length&&"null"!=d.snippet?x=150<d.snippet.length?d.snippet.substring(0,150)+"...":d.snippet:d.description&&0<d.description.length&&"null"!=d.description&&(x=150<d.description.length?d.description.substring(0,150)+"...":d.description);d={id:d.id||"",owner:d.owner,title:n,description:d.description,snippet:x,snippetFull:d.snippet,tags:c.join?
c.join(","):c,imageUrl:k,thumbnail:d.thumbnail,isInvitationOnly:d.isInvitationOnly,created:t,modified:d.modified,itemType:d.itemType||"",typeKeywords:d.typeKeywords||"",type:d.type||"",extent:d.extent||"",item:u,numComments:d.numComments,numRatings:d.numRatings,avgRating:d.avgRating,numViews:d.numViews};this._items.push({i:d,r:this})},this);this._itemsByIdentity={};this._identifier="id";for(i=0;i<this._items.length;++i){f=this._items[i].i;var l=f.id;this._itemsByIdentity[l]||(this._itemsByIdentity[l]=
f)}m=-1===m?this._items.length:m;h(this._items,a,m);this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=b.mixin({},g)}))},onResultCount:function(a){}})})},"dojox/data/QueryReadStore":function(){define(["dojo","dojox","dojo/data/util/sorter","dojo/string"],function(b,y){return b.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,
doClientPaging:!1,doClientSorting:!1,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0},_labelAttr:"label",constructor:function(q){b.mixin(this,q)},getValue:function(q,a,h){this._assertIsItem(q);if(!b.isString(a))throw Error(this._className+".getValue(): Invalid attribute, string expected!");return!this.hasAttribute(q,a)&&h?h:q.i[a]},getValues:function(q,a){this._assertIsItem(q);var h=[];this.hasAttribute(q,a)&&h.push(q.i[a]);return h},getAttributes:function(q){this._assertIsItem(q);
var a=[],h;for(h in q.i)a.push(h);return a},hasAttribute:function(q,a){return this.isItem(q)&&"undefined"!=typeof q.i[a]},containsValue:function(q,a,h){q=this.getValues(q,a);a=q.length;for(var e=0;e<a;e++)if(q[e]==h)return!0;return!1},isItem:function(q){return q?"undefined"!=typeof q.r&&q.r==this:!1},isItemLoaded:function(q){return this.isItem(q)},loadItem:function(q){this.isItemLoaded(q.item)},fetch:function(q){q=q||{};q.store||(q.store=this);var a=this;this._fetchItems(q,function(h,e,g){var f=e.abort||
null,m=!1,l=e.start?e.start:0;0==a.doClientPaging&&(l=0);var d=e.count?l+e.count:h.length;e.abort=function(){m=!0;f&&f.call(e)};var c=e.scope||b.global;e.store||(e.store=a);e.onBegin&&e.onBegin.call(c,g,e);e.sort&&a.doClientSorting&&h.sort(b.data.util.sorter.createSortFunction(e.sort,a));if(e.onItem)for(g=l;g<h.length&&g<d;++g){var k=h[g];m||e.onItem.call(c,k,e)}e.onComplete&&!m&&(g=null,e.onItem||(g=h.slice(l,d)),e.onComplete.call(c,g,e))},function(h,e){e.onError&&e.onError.call(e.scope||b.global,
h,e)});return q},getFeatures:function(){return this._features},close:function(q){},getLabel:function(q){if(this._labelAttr&&this.isItem(q))return this.getValue(q,this._labelAttr)},getLabelAttributes:function(q){return this._labelAttr?[this._labelAttr]:null},_xhrFetchHandler:function(q,a,h,e){q=this._filterResponse(q);q.label&&(this._labelAttr=q.label);e=q.numRows||-1;this._items=[];b.forEach(q.items,function(l){this._items.push({i:l,r:this})},this);q=q.identifier;this._itemsByIdentity={};if(q){this._identifier=
q;var g;for(g=0;g<this._items.length;++g){var f=this._items[g].i,m=f[q];if(this._itemsByIdentity[m])throw Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+q+"].  Value collided: ["+m+"]");this._itemsByIdentity[m]=f}}else for(this._identifier=Number,g=0;g<this._items.length;++g)this._items[g].n=g;e=this._numRows=-1===e?this._items.length:e;h(this._items,a,e);this._numRows=e},_fetchItems:function(q,a,h){var e=q.serverQuery||
q.query||{};this.doClientPaging||(e.start=q.start||0,q.count&&(e.count=q.count));if(!this.doClientSorting&&q.sort){var g=[];b.forEach(q.sort,function(m){m&&m.attribute&&g.push((m.descending?"-":"")+m.attribute)});e.sort=g.join(",")}if(this.doClientPaging&&null!==this._lastServerQuery&&b.toJson(e)==b.toJson(this._lastServerQuery))this._numRows=-1===this._numRows?this._items.length:this._numRows,a(this._items,q,this._numRows);else{var f=("post"==this.requestMethod.toLowerCase()?b.xhrPost:b.xhrGet)({url:this.url,
handleAs:"json-comment-optional",content:e,failOk:!0});q.abort=function(){f.cancel()};f.addCallback(b.hitch(this,function(m){this._xhrFetchHandler(m,q,a,h)}));f.addErrback(function(m){h(m,q)});this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=b.mixin({},e)}},_filterResponse:function(q){return q},_assertIsItem:function(q){if(!this.isItem(q))throw Error(this._className+": Invalid item argument.");},_assertIsAttribute:function(q){if("string"!==typeof q)throw Error(this._className+
": Invalid attribute argument ('"+q+"').");},fetchItemByIdentity:function(q){if(this._itemsByIdentity){var a=this._itemsByIdentity[q.identity];if(void 0!==a){q.onItem&&q.onItem.call(q.scope?q.scope:b.global,{i:a,r:this});return}}this._fetchItems({serverQuery:{id:q.identity}},function(h,e){e=q.scope?q.scope:b.global;try{var g=null;h&&1==h.length&&(g=h[0]);q.onItem&&q.onItem.call(e,g)}catch(f){q.onError&&q.onError.call(e,f)}},function(h,e){e=q.scope?q.scope:b.global;q.onError&&q.onError.call(e,h)})},
getIdentity:function(q){var a=null;return a=this._identifier===Number?q.n:q.i[this._identifier]},getIdentityAttributes:function(q){return[this._identifier]}})})},"arcgisonline/sharing/geow/Content":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util,esri/arcgis/Portal"],function(b,y,q){b.provide("arcgisonline.sharing.geow.Content");b.require("arcgisonline.sharing.util");b.require("esri.arcgis.Portal");arcgisonline.sharing.geow.Content={util:arcgisonline.sharing.util,
i18n:function(){if(this._i18n)return this._i18n;this._i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this._i18n,{source:b.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.source});b.mixin(this._i18n,{viewsWidget:b.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget});return this._i18n},getUserInfo:function(a,h){var e=this.util.getUser();null!=e&&this.util.getJson(esriGeowConfig.restBaseUrl+"content/users/"+(e.username||e.email),a,h)},getUserItems:function(a,
h,e){var g=this.util.getUser();null!=g&&(g=esriGeowConfig.restBaseUrl+"content/users/"+(g.username||g.email),null!=a&&""!==a&&(g=g+"/"+a),this.util.getJson(g,h,e))},getUserItemsByUser:function(a,h,e,g){null!=this.util.getUser()&&(a=esriGeowConfig.restBaseUrl+"content/users/"+a,null!=h&&""!==h&&(a=a+"/"+h),this.util.getJson(a,e,g))},getUserServers:function(a){void 0!==this._userServers&&a(this._userServers);this.util.getJson(esriGeowConfig.serversRestBaseUrl,function(h){a(this._userServers=h.servers)},
function(h){a(null)})},addItem:function(a,h,e,g){var f=this.util.getUser();if(null!=f){f=esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email);null!=a&&(f=f+"/"+a);f+="/addItem";a=!1;for(var m=0;m<h.childNodes.length;m++){var l=h.childNodes[m];if("async"===l.name&&"true"===l.value){a=!0;break}}a?this.util.postForm(h,f,b.hitch(arcgisonline.sharing.geow.Content,"addItemAsyncHandler",e,g),g):this.util.postForm(h,f,e,g)}},addItemByUser:function(a,h,e,g,f){if(null!=this.util.getUser()){a=esriGeowConfig.restBaseUrl+
"content/users/"+a;null!=h&&(a=a+"/"+h);a+="/addItem";h=!1;for(var m=0;m<e.childNodes.length;m++){var l=e.childNodes[m];if("async"===l.name&&"true"===l.value){h=!0;break}}h?this.util.postForm(e,a,b.hitch(arcgisonline.sharing.geow.Content,"addItemByUserAsyncHandler",g,f),f):this.util.postForm(e,a,g,f)}},addItemAsyncHandler:function(a,h,e,g){e&&e.success&&!0===e.success?arcgisonline.sharing.geow.Content.itemStatus(e,b.hitch(arcgisonline.sharing.geow.Content,"itemStatusHandler",0,e,a,h),h):h(e,g)},addItemByUserAsyncHandler:function(a,
h,e,g){e&&e.success&&!0===e.success?arcgisonline.sharing.geow.Content.itemStatus(e,b.hitch(arcgisonline.sharing.geow.Content,"itemStatusByUserHandler",0,e,a,h),h):h(e,g)},deleteService:function(a,h){this.getUserServers(b.hitch(this,function(e){if(e&&e.length&&-1<a.indexOf(esriGeowConfig.featuresRestBaseUrl+e[0].id+"/")){e=esriGeowConfig.serversRestBaseUrl+e[0].id+"/arcgis/admin/services/";e+=a.substr(a.indexOf(h)).replace("/",".")+"/delete";esri.config.defaults.io.proxyUrl=esriGeowConfig.proxyServer;
var g=b.hitch(this,function(f){esri.config.defaults.io.proxyUrl=null});this.util.postJson("",e,g,g)}}))},publishService:function(a,h,e,g){a=this.util.getUser();if(null!=a){a=esriGeowConfig.restBaseUrl+"content/users/"+(a.username||a.email)+"/publish";h=h.params;var f=b.hitch(this,function(m){e(m)});this.util.postJson(h,a,b.hitch(this,function(m){m=m.services[0];m.success=m.success||m.serviceurl&&0<m.serviceurl.length;m.success?(m.id=m.serviceItemId,e(m)):f(m)}),b.hitch(this,function(m){f({success:!1})}))}},
itemStatus:function(a,h,e){var g=this.util.getUser();if(null!=g){var f=g.username||g.email;g=a.folder;f=esriGeowConfig.restBaseUrl+"content/users/"+(a.overrideUser||f);g&&0<g.length&&"/"!=g&&(f+="/"+g);f=f+"/items/"+a.id+"/status";a.jobid&&(f+="?jobid\x3d"+a.jobid);a.type&&"image service"===a.type.toLowerCase()&&(f+="\x26jobType\x3dPublishImageService");this.util.getJson(f,h,e)}},itemStatusByUser:function(a,h,e){if(null!=this.util.getUser()){var g=a.folder,f=esriGeowConfig.restBaseUrl+"content/users/"+
a.owner;g&&0<g.length&&"/"!=g&&(f+="/"+g);f=f+"/items/"+a.id+"/status";this.util.getJson(f,h,e)}},itemStatusHandler:function(a,h,e,g,f,m){f&&f.status&&"processing"===f.status?(a++,setTimeout(b.hitch(this,function(){arcgisonline.sharing.geow.Content.itemStatus(h,b.hitch(arcgisonline.sharing.geow.Content,"itemStatusHandler",a,h,e,g),g)}),Math.min(1E3*Math.pow(2,a),6E4))):(b.mixin(f,h),e(f,m))},itemStatusByUserHandler:function(a,h,e,g,f,m){f&&f.status&&"processing"===f.status?(a++,setTimeout(b.hitch(this,
function(){arcgisonline.sharing.geow.Content.itemStatusByUser(h,b.hitch(arcgisonline.sharing.geow.Content,"itemStatusByUserHandler",a,h,e,g),g)}),Math.min(1E3*Math.pow(2,a),6E4))):(b.mixin(f,h),e(f,m))},deleteItems:function(a,h,e){var g=this.util.getUser();if(null!=g){g=g.username||g.email;if(1==a.length)return a=a[0],g=esriGeowConfig.restBaseUrl+"content/users/"+g,null!=a.folderId&&""!==a.folderId&&"/"!=a.folderId&&(g+="/"+a.folderId),g=g+"/items/"+a.id+"/delete",this.util.postJson("",g,h,e);if(1<
a.length){var f="",m="";b.forEach(a,function(l){f+=m+l.id;m=","},this);a={items:f};g=esriGeowConfig.restBaseUrl+"content/users/"+g+"/deleteItems";return this.util.postJson(a,g,h,e)}}},deleteItemsByUser:function(a,h,e,g){if(null!=this.util.getUser()){if(1==h.length)return h=h[0],a=esriGeowConfig.restBaseUrl+"content/users/"+a,null!=h.folderId&&""!==h.folderId&&"/"!=h.folderId&&(a+="/"+h.folderId),a=a+"/items/"+h.id+"/delete",this.util.postJson("",a,e,g);if(1<h.length){var f="",m="";b.forEach(h,function(l){f+=
m+l.id;m=","},this);h={items:f};a=esriGeowConfig.restBaseUrl+"content/users/"+a+"/deleteItems";return this.util.postJson(h,a,e,g)}}},getApplicationCode:function(a,h,e){var g=null,f="WMA2Code";b.isObject(a)?(g=a.id,"Mobile Application"===a.type&&(f="MobileApp2Code")):g=a;this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+g+"/relatedItems?relationshipType\x3d"+f,h,e)},addApplicationCodeRelate:function(a,h,e,g){var f=this.util.getUser();if(null==f)b.publish("globalMessage",[{message:this.i18n().mustLogIn,
type:"error",duration:0}]);else{var m=null,l="WMA2Code";b.isObject(a)?(m=a.id,"Mobile Application"===a.type&&(l="MobileApp2Code")):m=a;this.util.postJson({relationshipType:l,originItemId:m,desinationItemId:h},esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email)+"/addRelationship?relationshipType\x3d"+l+"\x26originItem\x3d"+m+"\x26destinationItemId\x3d"+h,e,g)}},getComments:function(a,h,e,g){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+a+"/comments",e,g)},addComment:function(a,
h,e,g){null==this.util.getUser()?b.publish("globalMessage",[{message:this.i18n().mustLogIn,type:"error",duration:0}]):this.util.postJson({comment:h},esriGeowConfig.restBaseUrl+"content/items/"+a+"/addComment",e,g)},deleteComment:function(a,h,e,g){null==this.util.getUser()?b.publish("globalMessage",[{message:this.i18n().mustLogIn,type:"error",duration:0}]):this.util.postJson({},esriGeowConfig.restBaseUrl+"content/items/"+a+"/comments/"+h+"/delete",e,g)},addRating:function(a,h,e,g){null==this.util.getUser()?
b.publish("globalMessage",[{message:this.i18n().mustLogIn,type:"error",duration:0}]):this.util.postJson({rating:h},esriGeowConfig.restBaseUrl+"content/items/"+a+"/addRating",e,g)},getRating:function(a,h,e){null!=this.util.getUser()&&this.util.postJson({},esriGeowConfig.restBaseUrl+"content/items/"+a+"/rating",h,e)},deleteItem:function(a,h,e){var g=this.util.getUser();if(null!=g){g=g.username||g.email;g=esriGeowConfig.restBaseUrl+"content/users/"+(a.owner||g);var f=a.ownerFolder||a.folderId;f&&"/"!==
f&&(g=g+"/"+f);g=g+"/items/"+a.id+"/delete";this.util.postJson("",g,h,e)}},deleteItemByUser:function(a,h,e){if(null!=this.util.getUser()){var g=esriGeowConfig.restBaseUrl+"content/users/"+a.owner;null!=a.folderId&&(g=g+"/"+a.folderId);g=g+"/items/"+a.id+"/delete";this.util.postJson("",g,h,e)}},updateItem:function(a,h,e,g){var f=this.util.getUser();null!=f&&(f=f.username||f.email,f=esriGeowConfig.restBaseUrl+"content/users/"+(a.owner||f),null!=a.folderId&&(f=f+"/"+a.folderId),f=f+"/items/"+a.id+"/update",
this.util.postForm(h,f,e,g))},updateItemByUser:function(a,h,e,g){if(null!=this.util.getUser()){var f=esriGeowConfig.restBaseUrl+"content/users/"+a.owner;null!=a.folderId&&(f=f+"/"+a.folderId);f=f+"/items/"+a.id+"/update";this.util.postForm(h,f,e,g)}},updateItemJson:function(a,h,e,g){var f=this.util.getUser();null!=f&&(f=f.username||f.email,f=esriGeowConfig.restBaseUrl+"content/users/"+(a.overrideUser||f),null!=a.folderId&&(f=f+"/"+a.folderId),f=f+"/items/"+a.id+"/update",this.util.postJson(h,f,e,
g))},updateItemJsonByUser:function(a,h,e,g){null!=this.util.getUser()&&(a=esriGeowConfig.restBaseUrl+"content/users/"+a,null!=h.folderId&&(a=a+"/"+h.folderId),a=a+"/items/"+h.id+"/update",this.util.postJson(e,a,g))},filterErrors:function(a){return(a=a&&a.results)&&a.length&&(a=b.filter(a,"return item.error"))&&a.length?(this.util.checkError(a[0].error),a):!1},shareItems:function(a,h,e){var g=this.util.getUser();g&&(g=g.username||g.email,this.util.postJson(a,esriGeowConfig.restBaseUrl+"content/users/"+
(a.owner||g)+"/shareItems",b.hitch(this,function(f){var m=this.filterErrors(f);m?e(m):h(f)}),e))},shareItemsByUser:function(a,h,e,g){null!=this.util.getUser()&&this.util.postJson(h,esriGeowConfig.restBaseUrl+"content/users/"+a+"/shareItems",e,g)},shareItem:function(a,h,e,g){var f=this.util.getUser();null!=f&&(f=esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email),null!=a.folderId&&(f=f+"/"+a.folderId),f=f+"/items/"+a.id+"/share",this.util.postJson(h,f,e,g))},shareItemByID:function(a,
h,e,g){null!=this.util.getUser()&&this.util.postJson(h,esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/share",e,g)},unshareItems:function(a,h,e){var g=this.util.getUser();null!=g&&(g=g.username||g.email,this.util.postJson(a,esriGeowConfig.restBaseUrl+"content/users/"+(a.owner||g)+"/unshareItems",b.hitch(this,function(f){var m=this.filterErrors(f);m?e(m):h(f)}),e))},unshareItemsByUser:function(a,h,e,g){null!=this.util.getUser()&&this.util.postJson(h,esriGeowConfig.restBaseUrl+"content/users/"+a+
"/unshareItems",e,g)},unshareItem:function(a,h,e,g){var f=this.util.getUser();null!=f&&(f=esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email),null!=a.folderId&&(f=f+"/"+a.folderId),f=f+"/items/"+a.id+"/unshare",this.util.postJson(h,f,e,g))},unshareItemByID:function(a,h,e,g){null!=this.util.getUser()&&this.util.postJson(h,esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/unshare",e,g)},moveItems:function(a,h,e,g){var f=this.util.getUser();if(null!=f){var m="",l="";b.forEach(a,function(d){m+=
l+d.id;l=","},this);h.items=m;this.util.postJson(h,esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email)+"/moveItems",e,g)}},moveItemsByUser:function(a,h,e,g,f){if(null!=this.util.getUser()){var m="",l="";b.forEach(h,function(d){m+=l+d.id;l=","},this);e.items=m;this.util.postJson(e,esriGeowConfig.restBaseUrl+"content/users/"+a+"/moveItems",g,f)}},reassignItem:function(a,h,e,g,f){if(null!=this.util.getUser()){var m=esriGeowConfig.restBaseUrl+"content/users/"+a.owner;null!==a.folderId&&
(m=m+"/"+a.folderId);m=m+"/items/"+a.id+"/reassign";this.util.postJson({targetUsername:h,targetFolderName:e},m,g,f)}},moveItem:function(a,h,e,g){var f=this.util.getUser();null!=f&&(f=esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email),null!=a.folderId&&(f=f+"/"+a.folderId),f=f+"/items/"+a.id+"/move",this.util.postJson(h,f,e,g))},moveItemByUser:function(a,h,e,g){if(null!=this.util.getUser()){var f=esriGeowConfig.restBaseUrl+"content/users/"+a.owner;null!=a.folderId&&(f=f+"/"+a.folderId);
f=f+"/items/"+a.id+"/move";this.util.postJson(h,f,e,g)}},search:function(a,h,e,g){if(a){g="";if(0>a.indexOf("community/groups")){var f=this.util.userPreferences(null,"contentModePrefs"),m=b.queryToObject(window.location.search.slice(1));m.content&&"all"===m.content.toLowerCase()?f.contentMode="GIS":m.content&&"web"===m.content.toLowerCase()&&(f.contentMode="Web");g=f&&f.contentMode&&"GIS"===f.contentMode?esriGeowConfig.viewQueries.gis:g+esriGeowConfig.viewQueries.web;g+=esriGeowConfig.viewQueries.none}h.q+=
g;this.util.getJsonWithContent(a,h,e)}},getFeaturedItems:function(a,h,e){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+a+"/relatedItems?relationshipType\x3dFeaturedItems2Item\x26direction\x3dforward",h)},getUserItem:function(a,h,e){e=this.util.getUser();null!=e&&(e=esriGeowConfig.restBaseUrl+"content/users/"+(e.username||e.email),null!=a.folderId&&(e=e+"/"+a.folderId),e=e+"/items/"+a.id,this.util.getJson(e,h))},getItem:function(a,h,e){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+
a,h,e)},getItemData:function(a,h,e){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+a+"/data",h,e)},getItemFolder:function(a,h){var e=this.util.getUser();if(null!=e){var g=e.username||e.email;this.util.getJson(esriGeowConfig.restBaseUrl+"content/users/"+g,b.hitch(this,function(f,m){var l=null;for(m=0;m<f.items.length;m++)if(f.items[m].id==a){l="";break}if(null!=l)h(l);else{var d=function(c,k){k=c.currentFolder.id;for(var t=0;t<c.items.length;t++)if(c.items[t].id==a){l=k;h(l);break}};
b.forEach(f.folders,function(c,k){this.util.getJson(esriGeowConfig.restBaseUrl+"content/users/"+g+"/"+c.folderName,b.hitch(this,d))},this)}}))}},itemsToStore:function(a){var h=a.currentFolder?a.currentFolder.id:"",e=[];b.forEach(a.items,function(g,f){g.folderId=h;g.imageUrl=this._getItemIconUrl(g);g.selected=!1;g.item=g.name||g.url||g.title;if(g.snippet&&0<g.snippet.length&&"null"!=g.snippet)g.snippet=g.snippet;else if(g.description&&0<g.description.length&&"null"!=g.description){var m=arcgisonline.sharing.util.removeHTMLTags(g.description);
g.snippet=150<m.length?m.substring(0,150)+"...":m}else g.snippet="";delete g.listingProperties;delete g.properties;e[f]=g},this);return new b.data.ItemFileWriteStore({data:{identifier:"id",label:"item",items:e}})},searchToStore:function(a){var h=[];b.forEach(a.items?a.items:a.results,function(e,g){e={id:e.id,owner:e.owner,title:e.title,description:e.description,tags:e.tags?e.tags.join(","):[],imageUrl:this._getItemImageUrl(e),created:e.created,modified:e.modified};h[g]=e},this);return new b.data.ItemFileReadStore({data:{identifier:"id",
label:"item",items:h}})},_getPremiumItemNode:function(a){var h=(new esri.arcgis.PortalItem(b.mixin(a,{portal:{isPortal:esriGeowConfig.self&&esriGeowConfig.self.isPortal}}))).getTypeInfo(),e=esriGeowConfig.self&&esriGeowConfig.self.isPortal?"portal":"";a=-1<b.indexOf(a.typeKeywords,"Requires Credits");return h.isPremiumContent?(e=b.create("div",{className:"esri-premium-content",title:a?this.i18n()["premiumcontentcreditstitle"+e]:this.i18n()["premiumcontenttitle"+e],innerHTML:a?this.i18n().premiumcontent:
this.i18n().subscriptioncontent}),b.create("img",{className:"esri-premium-icon",src:h.premiumIconUrl},e,"first"),e):!1},_getItemIconUrl:function(a){return(new esri.arcgis.PortalItem(b.mixin(a,{portal:{isPortal:esriGeowConfig.self&&esriGeowConfig.self.isPortal}}))).iconUrl},_getItemImageUrl:function(a,h){a=a.type?a.type.toLowerCase():"";return this.util.relativeToExplicitUrl("geocoding service"==a||"network analysis service"==a||"geoprocessing service"==a||"geodata service"==a||"geometry service"==
a||"workflow manager service"==a?h?"images/tool_16x16.png":"images/tool_32x32.png":"wms"==a||"kml"==a||"globe service"==a||"map service"==a||"image service"==a||"feature service"==a||"scene service"===a||"stream service"===a?h?"images/layer_16x16.png":"images/layer_32x32.png":"web mapping application"==a||"mobile application"==a||"web map"==a?h?"images/map_16x16.png":"images/map_32x32.png":"layer"==a||"layer package"==a||"tile package"===a||"vector tile package"===a||"scene package"===a||"image collection"===
a||"explorer layer"==a||"cad drawing"===a?h?"images/layer-download_16x16.png":"images/layer-download_32x32.png":"explorer add in"==a||"desktop add in"==a||"geoprocessing package"==a||"locator package"==a?h?"images/tool-download_16x16.png":"images/tool-download_32x32.png":h?"images/map-download_16x16.png":"images/map-download_32x32.png")},changeTypename:function(a,h,e){var g=new esri.arcgis.PortalItem(b.mixin(a,{portal:{isPortal:esriGeowConfig.self&&esriGeowConfig.self.isPortal}})),f=g.getTypeInfo();
g=a.type&&-1<a.type.toLowerCase().indexOf("add in")?g.displayName:g.type;var m=-1<b.indexOf(a.typeKeywords,"Hosted Service"),l=-1<b.indexOf(a.typeKeywords,"View Service"),d="Feature Service"===a.type;f=f.displayName;e&&(f=m?f+(" ("+(l?this.i18n().viewsWidget.hostedView:d?this.i18n().viewsWidget.hostedData:this.i18n().viewsWidget.hostedService)+")"):f+(" ("+this.i18n().viewsWidget.locatorView+")"));a=-1<b.indexOf(a.typeKeywords,"ArcGIS Server")||"Feature Collection"==a.type?this.i18n().source+" ":
"";return h?"\x3cspan title\x3d'"+a+g+"'\x3e"+f+"\x3c/span\x3e":f},getFavorites:function(){var a,h={};return this.util.request({url:esriGeowConfig.restBaseUrl+"content/groups/"+esriGeowConfig.self.user.favGroupId}).then(b.hitch(this,function(e){a=e.items||[];b.forEach(a,b.hitch(this,function(g){h[g.id]=!0}));return h}))},addToFavorites:function(a){var h=this.util.getUser().favGroupId;return this.util.request({url:esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/share",content:{f:"json",everyone:a.access&&
"public"===a.access||a.sharing&&a.sharing.access&&"public"===a.sharing.access||!1,org:a.access&&"org"===a.access||a.sharing&&a.sharing.access&&"org"===a.sharing.access||!1,groups:[h],items:[a.id]}},{usePost:!0})},removeFromFavorites:function(a){var h=this.util.getUser().favGroupId;return this.util.request({url:esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/unshare",content:{f:"json",everyone:!1,org:!1,groups:[h],items:[a.id]}},{usePost:!0})}}})},"dojo/dnd/AutoSource":function(){define(["../_base/declare",
"./Source"],function(b,y){return b("dojo.dnd.AutoSource",y,{constructor:function(){this.autoSync=!0}})})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(b,y,q){return b("dojo.dnd.Target",q,{constructor:function(){this.isSource=!1;y.remove(this.node,"dojoDndSource")}})})},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(b,y,q,a){return y("dojo.fx.Toggler",null,{node:null,showFunc:q.fadeIn,hideFunc:q.fadeOut,
showDuration:200,hideDuration:200,constructor:function(h){b.mixin(this,h);this.node=h.node;this._showArgs=b.mixin({},h);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=b.mixin({},h);this._hideArgs.node=this.node;this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);a.after(this.showAnim,"beforeBegin",b.hitch(this.hideAnim,"stop",!0),!0);a.after(this.hideAnim,"beforeBegin",b.hitch(this.showAnim,
"stop",!0),!0)},show:function(h){return this.showAnim.play(h||0)},hide:function(h){return this.hideAnim.play(h||0)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(b,y,q,a,h,e){return b("dijit.MenuSeparator",[q,a,h],{templateString:e,buildRendering:function(){this.inherited(arguments);y.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"calcite-web/js/calcite-web":function(){(function(b,
y){"object"===typeof exports&&"undefined"!==typeof module?module.exports=y():"function"===typeof define&&define.amd?define(y):b.calcite=y()})(this,function(){function b(O,V){for(;V;V=V.parentNode){var X=V&&V.getAttribute&&V.getAttribute("class")||"";X=(new RegExp("(\\s|^)"+O+"(\\s|$)")).test(X);if(1===V.nodeType&&X)break}return V}function y(O){return Array.isArray(O)?O:Array.prototype.slice.call(O)}function q(O,V){O=(V||document).querySelectorAll(O);return y(O)}function a(O,V){return(new RegExp("(\\s|^)"+
V+"(\\s|$)")).test(O.getAttribute("class"))}function h(O,V){V.split(" ").forEach(function(X){if(!a(O,X)){var N=O.getAttribute("class")||"";O.setAttribute("class",N+" "+X)}})}function e(O,V){V.split(" ").forEach(function(X){var N=(O.getAttribute("class")||"").replace(new RegExp("(\\s|^)"+X+"(\\s|$)","g"),"$2");a(O,X)&&O.setAttribute("class",N)})}function g(O){O=y(O);O.forEach(function(V){e(V,"is-active")})}function f(O,V){g(O);h(V,"is-active")}function m(O,V,X){if(O.addEventListener)return O.addEventListener(V,
X,!1);if(O.attachEvent)return O.attachEvent("on"+V,X)}function l(O,V,X){if(O.removeEventListener)return O.removeEventListener(V,X,!1);if(O.detachEvent)return O.detachEvent("on"+V,X)}function d(O){if(O.preventDefault)return O.preventDefault();O.returnValue&&(O.returnValue=!1)}function c(O){O=O||window.event;if(O.stopPropagation)return O.stopPropagation();O.cancelBubble&&(O.cancelBubble=!0)}function k(){}function t(O){for(var V="",X=0;X<O;X++)V+=(65536*(1+Math.random())|0).toString(16).substring(1);
return V}function n(O){if(!O)throw new TypeError("Invalid argument `value` has no value.");this.value=n.EMPTY;O&&O instanceof n?this.value=O.toString():O&&"[object String]"===Object.prototype.toString.call(O)&&n.isGuid(O)&&(this.value=O);this.equals=function(V){return n.isGuid(V)&&this.value===V};this.isEmpty=function(){return this.value===n.EMPTY};this.toString=function(){return this.value};this.toJSON=function(){return this.value}}function u(O){c(O);O=b("accordion-section",O.target||O.srcElement);
S.emit("accordion:toggle",{node:O})}function x(O){var V=O.node;a(V,"is-active")?e(V,"is-active"):h(V,"is-active");(O=O.node.querySelector(".accordion-title"))&&(O.getAttribute("aria-expanded")?O.removeAttribute("aria-expanded"):O.setAttribute("aria-expanded","true"))}function A(O){13!==O.keyCode&&32!==O.keyCode||!a(O.target||O.srcElement,"accordion-title")||(d(O),c(O),u(O))}function z(O){var V=q(".js-accordion");O?E(O.node):V.forEach(function(X){E(X)})}function E(O){O.setAttribute("aria-live","polite");
O.setAttribute("role","tablist");y(O.children).forEach(function(V){var X=V.querySelector(".accordion-title"),N=V.querySelector(".accordion-content"),Y=N.id||n.raw();N.id=Y;X.setAttribute("role","tab");X.setAttribute("tabindex","0");X.setAttribute("aria-controls",Y);a(V,"is-active")&&X.setAttribute("aria-expanded","true");var ia=!1;P.accordions.forEach(function(oa){oa.target===X&&"click"===oa.event&&oa.fn===u&&(ia=!0)});ia||(P.accordions.push({target:X,event:"click",fn:u}),P.accordions.push({target:V,
event:"keydown",fn:A}),m(X,"click",u),m(V,"keydown",A))})}function w(){aa||(S.on("accordion:bind",z),S.on("accordion:toggle",x),aa=!0);S.emit("accordion:bind")}function D(O){l(document.body,"click",D);q(".js-dropdown").forEach(function(V){e(V,"is-active")});q(".js-dropdown-toggle").forEach(function(V){V.setAttribute("aria-expanded","false")});l(document,"keydown",B);l(document.body,"focusin",r)}function r(O){O.target&&!b("js-dropdown",O.target)&&S.emit("dropdown:close")}function v(O){if(O){var V=
a(O.node,"is-active");S.emit("dropdown:close");V||(h(O.node,"is-active"),O.target&&O.target.setAttribute("aria-expanded","true"),m(document,"keydown",B));a(O.node,"is-active")&&(m(document.body,"click",D),m(document.body,"focusin",r))}}function B(O){40===O.keyCode|38===O.keyCode&&O.preventDefault()}function C(O){q(".js-dropdown-toggle").forEach(function(V){var X=!1;P.dropdowns.forEach(function(N){N.target===V&&"click"===N.event&&N.fn===I&&(X=!0)});X||(P.dropdowns.push({target:V,event:"click",fn:I}),
m(V,"click",I))})}function F(){var O=document.querySelector(".js-dropdown.is-active");return O?O:!1}function G(O){var V=O.links.indexOf(document.activeElement);-1===V?V=O.forward?0:O.links.length-1:O.forward?(V+=1,V===O.links.length&&(V=0)):(--V,-1===V&&(V=O.links.length-1));O.links[V].focus()}function H(){var O=F();O&&(O=q(".dropdown-link",O).filter(function(V){return null!==V.offsetParent}),S.emit("dropdown:focus",{links:O,forward:!0}))}function J(){var O=F();O&&(O=q(".dropdown-link",O).filter(function(V){return null!==
V.offsetParent}),S.emit("dropdown:focus",{links:O,forward:!1}))}function I(O){d(O);c(O);var V=b("js-dropdown",O.target);S.emit("dropdown:toggle",{node:V,target:O.target})}function K(){ba||(S.on("dropdown:toggle",v),S.on("dropdown:close",D),S.on("keyboard:escape",D),S.on("keyboard:arrow:down",H),S.on("keyboard:arrow:up",J),S.on("dropdown:focus",G),ba=!0);C()}function R(){S.on("scrolling:at",function(V){O.forEach(function(X){var N=X.element;a(X.element,"is-sticky")&&(N=X.element.getAttribute("data-sticky-id"),
N=document.querySelector('.js-shim[data-sticky-id\x3d"'+N+'"]'));if(N){var Y=N.getAttribute("data-top")||0;X.top=N.offsetTop-parseInt(Y,0)}X.top<V?S.emit("sticky:stick",X):S.emit("sticky:unstick",X)})});S.on("sticky:stick",function(V){var X=V.element.getAttribute("data-sticky-id"),N=document.querySelector('.js-shim[data-sticky-id\x3d"'+X+'"]');X&&N&&(h(V.element,"is-sticky"),N.style.display="")});S.on("sticky:unstick",function(V){var X=V.element.getAttribute("data-sticky-id"),N=document.querySelector('.js-shim[data-sticky-id\x3d"'+
X+'"]');X&&N&&(e(V.element,"is-sticky"),N.style.display="none")});var O=q(".js-sticky").map(function(V){var X=V.offsetTop,N=V.getAttribute("data-top")||0;V.style.top=N+"px";if(!V.getAttribute("data-sticky-id")){var Y=n.raw();V.setAttribute("data-sticky-id",Y);var ia=V.parentNode,oa=V.cloneNode("deep");h(oa,"js-shim");e(oa,"js-sticky");oa.setAttribute("data-sticky-id",Y);oa.style.visibility="hidden";oa.style.display="none";ia.insertBefore(oa,V)}return{top:X-parseInt(N,0),element:V}})}function W(){function O(Y){var ia=
Y.getAttribute("data-tab");if(ia)return ia;ia=n.raw();Y.setAttribute("data-tab",ia);return ia}function V(Y){var ia=Y.target;a(ia,"js-tab")||(ia=Y.currentTarget);Y=b("js-tab-group",ia);var oa=O(Y);return{parent:Y,id:oa,active:ia}}function X(Y){Y.preventDefault();Y=V(Y);S.emit("tabs:active",Y)}function N(Y){var ia=V(Y);if(13===Y.keyCode||32===Y.keyCode)Y.preventDefault(),S.emit("tabs:active",ia);if(39===Y.keyCode||37===Y.keyCode){var oa=y(ia.parent.querySelectorAll(".js-tab")),sa=oa.indexOf(document.activeElement);
-1<sa&&a(document.activeElement,"js-tab")&&(ia=oa[sa+1]||oa[0],oa=oa[sa-1]||oa[oa.length-1],(39===Y.keyCode?ia:oa).focus())}}S.on("tabs:bind",function(){var Y=q(".js-tab"),ia=q(".js-tab-group"),oa=q(".js-tab-section");ia.forEach(function(sa){sa.setAttribute("aria-live","polite");O(sa);sa.children[0].setAttribute("role","tablist");sa=sa.querySelectorAll(".js-tab");for(var Ba=100/sa.length,Da=0;Da<sa.length;Da++)sa[Da].style.maxWidth=Ba+"%"});Y.forEach(function(sa){sa.setAttribute("aria-expanded","false");
sa.setAttribute("role","tab");sa.setAttribute("tabindex","0");m(sa,"click",X);m(sa,"keydown",N)});oa.forEach(function(sa){sa.setAttribute("role","tabpanel");a(sa,"is-active")?sa.setAttribute("aria-expanded",!0):sa.setAttribute("aria-expanded",!1)})});S.on("tabs:active",function(Y){var ia=Y.parent,oa=y(ia.querySelectorAll(".js-tab"));Y=Y.active;ia=y(ia.querySelectorAll(".js-tab-section"));var sa=oa.indexOf(Y);sa=ia[sa];oa.forEach(function(Ba){Ba.setAttribute("aria-expanded",!1)});Y.setAttribute("aria-expanded",
!0);f(oa,Y);ia.forEach(function(Ba){Ba.setAttribute("aria-expanded",!1)});sa.setAttribute("aria-expanded",!0);f(ia,sa);Y.focus()});S.emit("tabs:bind")}var P={dropdowns:[],accordions:[],modals:[]};k.prototype={on:function(O,V,X){var N=this.e||(this.e={});(N[O]||(N[O]=[])).push({fn:V,ctx:X});return this},once:function(O,V,X){function N(){Y.off(O,N);V.apply(X,arguments)}var Y=this;N._=V;return this.on(O,N,X)},emit:function(O){var V=[].slice.call(arguments,1),X=((this.e||(this.e={}))[O]||[]).slice(),
N=0,Y=X.length;for(N;N<Y;N++)X[N].fn.apply(X[N].ctx,V);return this},off:function(O,V){var X=this.e||(this.e={}),N=X[O],Y=[];if(N&&V)for(var ia=0,oa=N.length;ia<oa;ia++)N[ia].fn!==V&&N[ia].fn._!==V&&Y.push(N[ia]);Y.length?X[O]=Y:delete X[O];return this}};var S=new k,L=/^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/i;n.EMPTY="00000000-0000-0000-0000-000000000000";n.isGuid=function(O){return O&&(O instanceof n||L.test(O.toString()))};n.create=function(){return new n([t(2),t(1),t(1),
t(1),t(3)].join("-"))};n.raw=function(){return[t(2),t(1),t(1),t(1),t(3)].join("-")};var aa=!1,ba=!1;m(document,"keyup",function(O){27===O.keyCode?S.emit("keyboard:escape"):13===O.keyCode?S.emit("keyboard:return"):32===O.keyCode?S.emit("keyboard:space"):38===O.keyCode?S.emit("keyboard:arrow:up"):40===O.keyCode?S.emit("keyboard:arrow:down"):37===O.keyCode?S.emit("keyboard:arrow:left"):39===O.keyCode&&S.emit("keyboard:arrow:right")});m(window,"scroll",function(O,V,X){var N,Y,ia;var oa=function(){N=!1;
Y&&(ia.apply(X,Y),Y=!1)};return ia=function(){N?Y=arguments:(O.apply(X,arguments),setTimeout(oa,V),N=!0)}}(function(){S.emit("scrolling:at",window.pageYOffset)},100));return{bus:S,accordion:w,dropdown:K,sticky:R,tabs:W,init:function(){[w,K,R,W].forEach(function(O){O()})}}})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(b,y){var q=document.createElement("div"),a=q.matches||q.webkitMatchesSelector||q.mozMatchesSelector||q.msMatchesSelector||q.oMatchesSelector,h=q.querySelectorAll,
e=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;b.add("dom-matches-selector",!!a);b.add("dom-qsa",!!h);var g=function(d,c){if(l&&-1<d.indexOf(","))return l(d,c);var k=c?c.ownerDocument||c:y.doc||document,t=(h?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(d);c=c||k;if(t){var n=8===b("ie")&&b("quirks")?c.nodeType===k.nodeType:null!==c.parentNode&&9!==c.nodeType&&c.parentNode===k;if(t[2]&&n){var u=y.byId?y.byId(t[2],k):
k.getElementById(t[2]);if(!u||t[1]&&t[1]!=u.tagName.toLowerCase())return[];if(c!=k)for(d=u;d!=c;)if(d=d.parentNode,!d)return[];return t[3]?g(t[3],u):[u]}if(t[3]&&c.getElementsByClassName)return c.getElementsByClassName(t[4]);if(t[5])if(u=c.getElementsByTagName(t[5]),t[4]||t[6])d=(t[4]||"")+t[6];else return u}if(h)return 1===c.nodeType&&"object"!==c.nodeName.toLowerCase()?f(c,d,c.querySelectorAll):c.querySelectorAll(d);u||(u=c.getElementsByTagName("*"));t=[];k=0;for(n=u.length;k<n;k++){var x=u[k];
1==x.nodeType&&m(x,d,c)&&t.push(x)}return t},f=function(d,c,k){var t=d,n=d.getAttribute("id"),u=n||"__dojo__",x=d.parentNode,A=/^\s*[+~]/.test(c);if(A&&!x)return[];n?u=u.replace(/'/g,"\\$\x26"):d.setAttribute("id",u);A&&x&&(d=d.parentNode);c=c.match(e);for(x=0;x<c.length;x++)c[x]="[id\x3d'"+u+"'] "+c[x];c=c.join(",");try{return k.call(d,c)}finally{n||t.removeAttribute("id")}};if(!b("dom-matches-selector"))var m=function(){function d(z,E,w){var D=E.charAt(0);if('"'==D||"'"==D)E=E.slice(1,-1);E=E.replace(/\\/g,
"");var r=x[w||""];return function(v){return(v=v.getAttribute(z))&&r(v,E)}}function c(z){return function(E,w){for(;(E=E.parentNode)!=w;)if(z(E,w))return!0}}function k(z){return function(E,w){E=E.parentNode;return z?E!=w&&z(E,w):E==w}}function t(z,E){return z?function(w,D){return E(w)&&z(w,D)}:E}var n="div"==q.tagName?"toLowerCase":"toUpperCase",u={"":function(z){z=z[n]();return function(E){return E.tagName==z}},".":function(z){var E=" "+z+" ";return function(w){return-1<w.className.indexOf(z)&&-1<
(" "+w.className+" ").indexOf(E)}},"#":function(z){return function(E){return E.id==z}}},x={"^\x3d":function(z,E){return 0==z.indexOf(E)},"*\x3d":function(z,E){return-1<z.indexOf(E)},"$\x3d":function(z,E){return z.substring(z.length-E.length,z.length)==E},"~\x3d":function(z,E){return-1<(" "+z+" ").indexOf(" "+E+" ")},"|\x3d":function(z,E){return 0==(z+"-").indexOf(E+"-")},"\x3d":function(z,E){return z==E},"":function(z,E){return!0}},A={};return function(z,E,w){var D=A[E];if(!D){if(E.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,
function(r,v,B,C,F,G,H){C?D=t(D,u[B||""](C.replace(/\\/g,""))):v?D=(" "==v?c:k)(D):F&&(D=t(D,d(F,H,G)));return""}))throw Error("Syntax error in query");if(!D)return!0;A[E]=D}return D(z,w)}}();if(!b("dom-qsa"))var l=function(d,c){for(var k=d.match(e),t=[],n=0;n<k.length;n++){d=new String(k[n].replace(/\s*$/,""));d.indexOf=escape;d=g(d,c);for(var u=0,x=d.length;u<x;u++){var A=d[u];t[A.sourceIndex]=A}}c=[];for(n in t)c.push(t[n]);return c};g.match=a?function(d,c,k){return k&&9!=k.nodeType?f(k,c,function(t){return a.call(d,
t)}):a.call(d,c)}:m;return g})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"general-dialog-${id}" class\x3d"general-dialog" title\x3d"${i18n.notificationDlgTitle}" role\x3d"alertdialog"\x3e\n    \x3cdiv id\x3d"general-dialog-content" class\x3d"general-dialog-content"\x3e\x3c/div\x3e\n    \x3cbr\x3e\n    \x3cdiv class\x3d"esriFloatTrailing clearfix right"\x3e\n      \x3cbutton id\x3d"button_general-close" data-dojo-attach-point\x3d"_okBtn" data-dojo-attach-event\x3d"onClick:onOkClick" class\x3d"jevent primary right" data-dojo-type\x3d"dijit/form/Button"\x3e${i18n.ok}\x3c/button\x3e\n    \x3c/div\x3e\n      \x3cbr style\x3d"clear:both;"\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"url:arcgisonline/sharing/dijit/dialog/templates/actionBar.html":'\x3cdiv class\x3d"dijitDialogPaneActionBar esriAlignTrailing right clearfix" data-dojo-attach-point\x3d"actionBarNode"\x3e\n  \x3cspan class\x3d"busyMessage hide inline-block padding-leader-quarter padding-right-1 left" data-dojo-attach-point\x3d"busyMessageSpan"\x3e\x3c/span\x3e\n  \x3cbutton class\x3d"calcite cancel right" data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"click:onCancel"\x3e\x3c/button\x3e\n  \x3cbutton class\x3d"calcite primary right js-submit-button" data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"okButton"\x3e\x3c/button\x3e\n\x3c/div\x3e\n',
"url:arcgisonline/pages/dijit/Alert/Alert.html":'\x3cdiv class\x3d"alert alert-${modifier} alert-fixed alert-fade-in-down leader-1 trailer-1 ${cssClasses}"\x3e\n  \x3cdiv class\x3d"flex"\x3e\n    \x3cdiv class\x3d"flex-0 margin-right-half margin-left-0 text-${modifier}" aria-label\x3d"${iconAltText}"\x3e\n      ${!icon}\n    \x3c/div\x3e\n    \x3cdiv class\x3d"flex-1 flex-center-self margin-right-half margin-left-0 alert__text-container"\x3e\n      ${!text}\n      \x3cdiv data-dojo-attach-point\x3d"_listContainer"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cbutton class\x3d"alert-close btn-link btn-link-black js-alert-close" aria-label\x3d"${i18n.common.close}"\x3e\n      ${!icons.x.32}\n    \x3c/button\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"url:arcgisonline/sharing/dijit/dialog/templates/DownloadImageDlg.html":'\x3cdiv\x3e\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${_i18nStrings.downloadImageDlg.title}"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"message"\x3e\x3c/div\x3e\n    \x3cdiv\x3e\n      \x3cdiv class\x3d"esriFloatTrailing" style\x3d"margin-top: 1em;"\x3e\n        \x3cbutton class\x3d"jevent cancel" data-dojo-attach-point\x3d"_cancelBtn" disabled data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:_handleCancelButtonClick"\x3e${_i18nStrings.common.cancel}\x3c/button\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n',
"url:arcgisonline/pages/dijit/Card/badges/authoritative.html":'\x3cspan class\x3d"badge badge--authoritative ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#2B622B"\x3e\x3cpath d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zm0 15a7 7 0 1 1 7-7 7.008 7.008 0 0 1-7 7z"/\x3e\x3cpath d\x3d"M11.834 5.146l-5.646 5.647-2.334-2.334a.5.5 0 0 0-.708.707l3.042 3.041 6.353-6.353a.5.5 0 1 0-.707-.707z"/\x3e\x3c/g\x3e\x3c/svg\x3e\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.authoritative}\x3c/span\x3e\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/deprecated.html":'\x3cspan class\x3d"badge badge--deprecated ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"#8C2907" d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zM1 8a6.99 6.99 0 0 1 11.577-5.284l-9.861 9.861A6.964 6.964 0 0 1 1 8zm7 7a6.964 6.964 0 0 1-4.577-1.716l9.861-9.861A6.99 6.99 0 0 1 8 15z"/\x3e\x3c/svg\x3e\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.deprecated}\x3c/span\x3e\n\x3c/span\x3e\n',
"url:arcgisonline/pages/dijit/Card/badges/living-atlas.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M14.753 4.57a.5.5 0 0 0-.842-.539 5.86 5.86 0 0 1-1.046 1.13A27.861 27.861 0 0 1 8.5 8.199a27.487 27.487 0 0 1-4.814 2.262 5.906 5.906 0 0 1-1.5.34.5.5 0 0 0 .021 1h.023a6.513 6.513 0 0 0 1.46-.304 5.98 5.98 0 0 0 3.81 1.81V15H5a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H8.5v-1.699A5.953 5.953 0 0 0 13.753 5.7a6.385 6.385 0 0 0 1-1.13zM10.5 11.664a4.999 4.999 0 0 1-5.742-.535A30.772 30.772 0 0 0 9 9.065a30.801 30.801 0 0 0 3.908-2.642 5 5 0 0 1-2.408 5.24zM7.068 2.42a5.007 5.007 0 0 1 4.71 1.638.5.5 0 1 0 .758-.654 6.01 6.01 0 0 0-5.654-1.967.5.5 0 0 0 .186.982zM2.802 9.633a.5.5 0 0 0 .472-.664 4.99 4.99 0 0 1 1.815-5.677l.228.394a.5.5 0 0 0 .866-.5l-1-1.732a.5.5 0 0 0-.866.5l.272.472a5.988 5.988 0 0 0-2.26 6.87.5.5 0 0 0 .473.337z"/\x3e\x3c/g\x3e\x3c/svg\x3e\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.livingAtlas}\x3c/span\x3e\n\x3c/span\x3e\n',
"url:arcgisonline/pages/dijit/Card/badges/marketplace.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.marketplaceTooltip}"\x3e\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#196FA6" d\x3d"M15.939 13L12.832 3h-3.65L8.033 6.68 6.811 3H3.16L.054 13H4.13l.96-3.21L6.192 13h3.594l1.104-3.17.993 3.17h4.056zM3.386 12H1.41l2.486-8h1.881l-2.391 8zm2.196-3.856l.893-2.983 1.048 3.156-.895 2.871-1.046-3.044zM9.075 12H7.422l2.496-8h1.943l-2.786 8zm3.409-6.749L14.583 12h-1.966l-1.176-3.755 1.043-2.994z"/\x3e\x3c/svg\x3e\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.marketplace}\x3c/span\x3e\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/open-data.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.openDataTooltip}"\x3e\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.628 8.628 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2 5 1.056 5 2-2.138 2-5 2zM13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.968 11.968 0 0 0 5 .984.5.5 0 0 0 0-1A10.146 10.146 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5z"/\x3e\x3c/g\x3e\x3c/svg\x3e\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.openData}\x3c/span\x3e\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/premium.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath d\x3d"M8.05 15.5a.497.497 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.5.5 0 0 1 .64.006c1.817 1.54 3.601 1.844 5.457.932a.5.5 0 0 1 .718.394 16.944 16.944 0 0 1-.344 4.965.5.5 0 1 1-.978-.211 16.952 16.952 0 0 0 .367-3.962 5.57 5.57 0 0 1-5.55-1.098A6.178 6.178 0 0 1 2.51 2.706c-.057 2.086.231 8.651 5.79 11.86a.5.5 0 0 1-.25.934z" fill\x3d"#196fa6"/\x3e\x3cpath d\x3d"M12 15.5a4 4 0 1 1 4-4 4.005 4.005 0 0 1-4 4zm0-7a3 3 0 1 0 3 3 3.003 3.003 0 0 0-3-3z" fill\x3d"#196fa6"/\x3e\x3c/svg\x3e\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.premium}\x3c/span\x3e\n\x3c/span\x3e\n',
"url:arcgisonline/pages/dijit/Card/badges/retired.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z"/\x3e\x3c/svg\x3e\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.retired}\x3c/span\x3e\n\x3c/span\x3e\n',
"url:arcgisonline/pages/dijit/Card/badges/public-data-collection.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M15.721 4.007a.965.965 0 0 0-.03-1.385l-1.413-1.414a.965.965 0 0 0-1.385-.03L2.841 11.23l-1.756 4.097a.371.371 0 0 0 .488.487L5.67 14.06l8.607-8.609zM2.624 14.276l.554-1.294.74.74zm2.338-.924L3.55 11.937l8.007-8.008 1.414 1.415zm8.716-8.716l-1.414-1.414 1.09-1.09a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .434z"/\x3e\x3c/svg\x3e\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.publicDataCollection}\x3c/span\x3e\n\x3c/span\x3e\n',
"url:arcgisonline/pages/dijit/Card/badges/subscriber.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\n    \x3cpath d\x3d"M8.054 15.5H8.05a.5.5 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.518.518 0 0 1 .638 0 5.146 5.146 0 0 0 5.458.94.507.507 0 0 1 .463.009.5.5 0 0 1 .26.382c.01.094.952 9.331-6.248 13.49a.5.5 0 0 1-.25.066zm0-.5zM2.51 2.706c-.056 2.054.222 8.455 5.542 11.713 5.32-3.258 5.598-9.66 5.542-11.713a6.177 6.177 0 0 1-5.542-1.074A6.183 6.183 0 0 1 2.51 2.706z" fill\x3d"#196fa6"/\x3e\n  \x3c/svg\x3e\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.subscriber}\x3c/span\x3e\n\x3c/span\x3e\n\n',
"url:arcgisonline/pages/dijit/Card/badges/collaboration.html":'\x3cspan class\x3d"badge badge--collaboration ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.collaborationTooltip}"\x3e\n    \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cg fill\x3d"#196FA6"\x3e\x3cpath d\x3d"M13.88629,9.14893a5.97307,5.97307,0,0,0-2.90655-6.34937,2.997,2.997,0,0,0-5.98188.01465A5.97011,5.97011,0,0,0,2.11322,9.14905h.00006a2.9911,2.9911,0,1,0,3.475,4.34076,5.95467,5.95467,0,0,0,4.8233-.00006l-.00012-.00025a2.9906,2.9906,0,1,0,3.47479-4.34057ZM8,1A2,2,0,1,1,6,3,2.00217,2.00217,0,0,1,8,1ZM3,14a2,2,0,1,1,2-2A2.00222,2.00222,0,0,1,3,14Zm7-2a2.99442,2.99442,0,0,0,.06683.62256A5.02712,5.02712,0,0,1,8,13.07306a5.08328,5.08328,0,0,1-2.07391-.45422A2.83729,2.83729,0,0,0,6,12,3.00142,3.00142,0,0,0,3.02832,9.00287,5.05156,5.05156,0,0,1,5.12952,3.824a2.98132,2.98132,0,0,0,5.7409.00024,5.05175,5.05175,0,0,1,2.10077,5.17865A3.00139,3.00139,0,0,0,10,12Zm3,2a2,2,0,1,1,2-2A2.00222,2.00222,0,0,1,13,14Z"/\x3e\x3c/g\x3e\x3c/svg\x3e\n    \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.collaboration}\x3c/span\x3e\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/_Owner.html":'\x3cbutton class\x3d"js-card-item-owner btn-link btn-link--inherit text-left text-ellipsis flex-1 js-action-profilePopup js-owner-section" data-action\x3d"profilePopup" data-owner\x3d"${item.owner}" title\x3d"${i18n.itemProperties.viewProfile}"\x3e${item.owner}\x3c/button\x3e\n',"url:arcgisonline/pages/dijit/Card/_OwnerVerified.html":'\x3cbutton class\x3d"flex-1 btn-link btn-link--inherit text-left text-ellipsis flex-1 js-owner-section js-verified-owner-link max-full-width" title\x3d"${i18n.itemProperties.viewOrg}"\x3e${item.verified.name}\x3c/button\x3e\n',
"url:arcgisonline/sharing/dijit/templates/_Empty.html":'\x3cdiv class\x3d"text-center trailer-half"\x3e\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 256 256" width\x3d"${width}"\x3e\x3cpath fill\x3d"#ccc" d\x3d"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"/\x3e\x3c/svg\x3e\n  \x3cp class\x3d"leader-0 font-size-1 avenir-regular"\x3e\n    \x3cspan\x3e${message}\x3c/span\x3e\n  \x3c/p\x3e\n\x3c/div\x3e',
"url:arcgisonline/pages/organization/widgets/templates/_groupIcon.html":'\x3cdiv class\x3d"${cssClasses:empty} ${tooltipClass:empty}" aria-label\x3d"${_group.title}"\x3e\n  \x3cimg src\x3d"${_group.thumbnailUrl}" alt\x3d"" class\x3d"${_group.thumbnail:hide}" data-dojo-attach-point\x3d"_img"\x3e\n  \x3csvg data-dojo-attach-point\x3d"_svg" xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 ${_viewBoxSize} ${_viewBoxSize}" class\x3d"${_group.thumbnail:show}" \x3e\n    \x3cpath fill\x3d"${_group.fillColor}" d\x3d"M0 0h65v65H0z" /\x3e\n    \x3cpath fill\x3d"#ccc" d\x3d"M0 0h65v65H0z" fill-opacity\x3d"0.8" /\x3e\n    \x3cpath class\x3d"${_group.useLetter:show}" fill\x3d"#FFF" d\x3d"M24.25 15.625a6.875 6.875 0 1 0-.008 13.75 6.875 6.875 0 0 0 .008-13.75zm0 11c-2.272 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125c2.279 0 4.125 1.846 4.125 4.125s-1.846 4.125-4.125 4.125zm3.118 16.5H14.774c.596-4.641 4.647-8.25 9.473-8.25 2.855 0 5.426 1.283 7.188 3.316a15.168 15.168 0 0 1 2.311-1.518 12.22 12.22 0 0 0-9.496-4.549c-6.369 0-11.551 4.82-12.238 11l-.137 2.75h14.424a15.49 15.49 0 0 1 1.066-2.75h.003zm25.62 5.5c-.693-6.18-5.873-11-12.238-11s-11.545 4.82-12.238 11l-.137 2.75h24.75l-.137-2.75zm-21.711 0c.596-4.641 4.647-8.25 9.473-8.25a9.578 9.578 0 0 1 9.464 8.25H31.277zm9.473-27.5a6.875 6.875 0 1 0-.008 13.75c3.797.003 6.877-3.072 6.88-6.87s-3.072-6.877-6.869-6.88h-.003zm0 11c-2.271 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125a4.125 4.125 0 0 1 0 8.25z"\n    /\x3e\n    \x3ctext class\x3d"${_group.useLetter:hide} font-size-${letterSize}" x\x3d"50%" y\x3d"50%" fill\x3d"white" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e\n      \x3ctspan class\x3d"group-thumbnail-default-text" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e${_group.title:firstChar}\x3c/tspan\x3e\n      \x3ctspan class\x3d"group-thumbnail-ie-text" y\x3d"70%" x\x3d"55%" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e${_group.title:firstChar}\x3c/tspan\x3e\n    \x3c/text\x3e\n  \x3c/svg\x3e\n\x3c/div\x3e\n',
"url:arcgisonline/sharing/dijit/templates/SiteFooter.html":'\x3cdiv dojoAttachPoint\x3d"containerNode" class\x3d"padding-leader-2 footer text-center padding-trailer-1 font-size--2 text-light-gray" role\x3d"contentinfo"\x3e\n\x3c!-- style\x3d"padding-top: 0.5em; margin-bottom: 1em; white-space: nowrap; text-align: center;"\x3e--\x3e\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks"\x3e\x3c/span\x3e\n  \x3cdiv class\x3d"esri-footer-barrier"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',"url:arcgisonline/sharing/dijit/templates/SiteFooterMap.html":'\x3cdiv style\x3d"border-top:1px solid #ccc; padding-top: 0.5em; padding-left:2px; margin-bottom: 3em; white-space: nowrap; text-align: center;"\x3e\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks esriFloatLeading esriAlignLeading" style\x3d"color:#777; line-height:14px"\x3e\x3c/span\x3e\n\x3c/div\x3e\n',
"url:arcgisonline/sharing/dijit/dialog/templates/ChoiceDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"choice-dialog" class\x3d"general-dialog" title\x3d"${i18n.notice}"\x3e\n    \x3cdiv style\x3d"margin-top:1em;" data-dojo-attach-point\x3d"choiceContent"\x3e\x3c/div\x3e\n    \x3cdiv style\x3d"clear: both; margin-top: 2em;" class\x3d"esriAlignTrailing right"\x3e\n      \x3cbutton data-dojo-attach-point\x3d"choiceOneButton" class\x3d"primary trailer-quarter" type\x3d"button" data-dojo-type\x3d"dijit/form/Button"\x3e\n        ${i18n.ok}\n      \x3c/button\x3e\n      \x3cbutton data-dojo-attach-point\x3d"choiceTwoButton" class\x3d"cancel btn-two trailer-quarter" type\x3d"button" data-dojo-type\x3d"dijit/form/Button"\x3e\n        ${i18n.cancel}\n      \x3c/button\x3e\n    \x3c/div\x3e\n    \x3cdiv style\x3d"clear:both; float:none; height: 0;"\x3e\x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"url:arcgisonline/pages/dijit/PasswordStrength/templates/PasswordStrength.html":'\x3cdiv\x3e\n    \x3cdiv class\x3d"password-strength-meter"\x3e\n        \x3cdiv class\x3d"password-strength-meter__fill" data-dojo-attach-point\x3d"_strengthMeterFill"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"leader-half password-strength-description"\x3e\n        ${i18n.passwordStrengthMeter.passwordStrength}: \x3cspan data-dojo-attach-point\x3d"_strengthLabel"\x3e\x3c/span\x3e \x3ca class\x3d"tooltip" target\x3d"_blank" data-dojo-attach-point\x3d"_moreInfo" aria-label\x3d"${i18n.passwordStrengthMeter.learnMore}"\x3e${!icons.inline-end.question.16}\x3c/a\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:arcgisonline/sharing/dijit/templates/SignUpInternal.html":'\x3cdiv class\x3d"widgetContent grid-container"\x3e\n  \x3cdiv id\x3d"sign-up-form" class\x3d"leader-1 column-12 tablet-column-12 phone-column-6"\x3e\n    \x3cform data-dojo-type\x3d"dijit/form/Form" id\x3d"signup-form" data-dojo-attach-point\x3d"_form" method\x3d"POST" action\x3d""\x3e\n      \x3cp\x3e${i18n.enterAccountInfo}\x3c/p\x3e\n      \x3cdiv class\x3d"formBlock" id\x3d"first-name-block"\x3e\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_firstname"\x3e\n          ${i18n.firstNameLabel}\n          \x3cinput id\x3d"register_firstname" name\x3d"register_firstname" data-dojo-attach-point\x3d"_firstname"/\x3e\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_firstnameError"\x3e\x3c/div\x3e\n        \x3c/label\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"formBlock" id\x3d"last-name-block"\x3e\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_lastname"\x3e\n          ${i18n.lastNameLabel}\n          \x3cinput id\x3d"register_lastname" name\x3d"register_lastname" data-dojo-attach-point\x3d"_lastname"/\x3e\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_lastnameError"\x3e\x3c/div\x3e\n        \x3c/label\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"formBlock"\x3e\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_email"\x3e\n          ${i18n.currentEmailAdr}\n          \x3cinput id\x3d"register_email" name\x3d"register_email" data-dojo-attach-point\x3d"_email"/\x3e\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_emailError"\x3e\x3c/div\x3e\n        \x3c/label\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"formBlock"\x3e\n        \x3clabel class\x3d"requiredLabel" for\x3d"confirm_register_email"\x3e\n          ${i18n.confirmEmailAdr}\n          \x3cinput id\x3d"confirm_register_email" name\x3d"confirm_register_email" data-dojo-attach-point\x3d"_confirmEmail"/\x3e\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_confirmEmailError"\x3e\x3c/div\x3e\n        \x3c/label\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"formBlock"\x3e\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_username"\x3e\n          ${i18n.yourUserName}\n          \x3cinput id\x3d"register_username" name\x3d"register_username" data-dojo-attach-point\x3d"_username"/\x3e\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_usernameError"\x3e\x3c/div\x3e\n        \x3c/label\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"formBlock"\x3e\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password"\x3e\n          ${i18n.choosePwd}\n          \x3cinput id\x3d"register_password" name\x3d"register_password" data-dojo-attach-point\x3d"_pwd" type\x3d"password"/\x3e\n          \x3cdiv class\x3d"invite-members__form-password" data-dojo-attach-point\x3d"_pwdStrengthError"\x3e\n              \x3cdiv class\x3d"js-strength-meter"\x3e\x3c/div\x3e\n              \x3cdiv class\x3d"font-size-0 input-error-message" data-dojo-attach-point\x3d"_pwdError"\x3e\x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/label\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"formBlock"\x3e\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password2"\x3e\n          ${i18n.renterPwd}\n          \x3cinput id\x3d"register_password2" name\x3d"register_password2" data-dojo-attach-point\x3d"_verifyPwd" type\x3d"password"/\x3e\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_verifyPwdError"\x3e\x3c/div\x3e\n        \x3c/label\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"formBlock"\x3e\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_question"\x3e\n          ${i18n.identityQLabel}\x3cbr\x3e\n          \x3cselect id\x3d"identity_question" data-dojo-attach-point\x3d"_identityQuestion"\x3e\x3c/select\x3e\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityQuestionError"\x3e\x3c/div\x3e\n        \x3c/label\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"formBlock"\x3e\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_answer"\x3e\n          ${i18n.identityALabel}\n          \x3cinput id\x3d"identity_answer" data-dojo-attach-point\x3d"_identityAnswer" type\x3d"text"/\x3e\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityAnswerError"\x3e\x3c/div\x3e\n        \x3c/label\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"leader-1 right"\x3e\n        \x3cbutton id\x3d"button_create_account" class\x3d"btn btn-blue" type\x3d"submit" data-dojo-attach-point\x3d"_createAccountBtn"\x3e${i18n.createAcc}\x3c/button\x3e\n        \x3cbutton id\x3d"button_cancel" class\x3d"btn btn-clear" type\x3d"button" data-dojo-attach-point\x3d"_cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\n      \x3c/div\x3e\n    \x3c/form\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/ProfilePopup.html":'\x3cdiv\x3e\n  \x3cspan tabindex\x3d"0" data-dojo-attach-point\x3d"closeIcon" class\x3d"hide popover-close icon-ui-close" tab-index\x3d"0" aria-label\x3d"${i18n.common.close}"\x3e\x3c/span\x3e\n  \x3cdiv data-dojo-attach-point\x3d"loader" class\x3d"profile-popup__loader loader is-active"\x3e\n    \x3cdiv class\x3d"profile-popup__loader-bars loader-bars"\x3e\x3c/div\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"hide text-left" data-dojo-attach-point\x3d"content"\x3e\n    \x3cdiv class\x3d"profile-popup__top-section flex flex-align-center"\x3e\n      \x3cdiv class\x3d"js-member-thumb"\x3e\x3c/div\x3e\n      \x3cdiv class\x3d"flex-1 margin-right-1"\x3e\n        \x3cdiv class\x3d"avenir-bold font-size-1 profile-popup__full-name" data-dojo-attach-point\x3d"fullNameEl"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"font-size--1" data-dojo-attach-point\x3d"usernameEl"\x3e\x3c/div\x3e\n      \x3c/div\x3e\n      \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"viewProfileBtn" class\x3d"btn-link profile-popup__link font-size--1 flex-0"\x3e${i18n.myOrganization.formatters.viewProfile} ${!icons.inline-end.launch.16}\x3c/button\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"profile-popup__bottom-section" data-dojo-attach-point\x3d"bottomSection"\x3e\n      \x3cdiv class\x3d"profile-popup__bio-container" data-dojo-attach-point\x3d"bioContainer"\x3e\n        \x3cp class\x3d"profile-popup__bio-section trailer-half" data-dojo-attach-point\x3d"bioEl"\x3e\x3c/p\x3e\n        \x3cbutton class\x3d"hide btn-link btn-link-darker-gray profile-popup__more-toggle" data-dojo-attach-point\x3d"bioToggle"\x3e${!icons.chevron-down.24}\x3c/button\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\n        \x3cdiv class\x3d"flex-1"\x3e\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.groups}\x3c/div\x3e\n          \x3cdiv class\x3d"flex" data-dojo-attach-point\x3d"groupIcons"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__items-section hide" data-dojo-attach-point\x3d"itemsSection"\x3e\n        \x3cdiv class\x3d"flex-1"\x3e\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.items}\x3c/div\x3e\n          \x3cdiv class\x3d"font-size-4 profile-popup__item-count" data-dojo-attach-point\x3d"itemCountEl"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/MemberThumb/templates/MemberThumb.html":'\x3cdiv\x3e\n  \x3cdiv data-dojo-attach-point\x3d"content" class\x3d"member-thumb ${cssClasses}" style\x3d"background:${member.backgroundColor};"\x3e\n    \x3cimg src\x3d"${member.thumbnailUrl}" alt\x3d"" class\x3d"margin-left-0 ${member.thumbnail:hide}" data-dojo-attach-point\x3d"img"\x3e\n    \x3cdiv class\x3d"member-thumb__initials ${member.thumbnail:show}" data-dojo-attach-point\x3d"initials"\x3e\n      ${member.initials}\n    \x3c/div\x3e\n    \x3cdiv class\x3d"member-thumb__edit-mask"\x3e\n      ${!icons.plus-circle.32}\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"*now":function(b){b(['dojo/i18n!*preload*arcgisonline/nls/main*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("arcgisonline/main","dojo/on require dojo/ready dojo/_base/lang dojo/_base/config dojo/Deferred dojo/json dojo/_base/window dojo/dom-style dojo/query dojo/_base/array dojo/hash dojo/io-query dojo/cookie esri/config esri/IdentityManager dojo/_base/json arcgisonline/sharing/geow/Geow arcgisonline/pages/portal/Portal arcgisonline/pages/portal/PortalUser arcgisonline/pages/utils/accessNotice arcgisonline/pages/utils/organization dojo/i18n!./nls/arcgisonline".split(" "),function(b,y,q,a,h,e,g,f,
m,l,d,c,k,t,n,u,x,A,z,E,w,D,r){function v(){function B(J){var I=window.location.hash;"#"===I.charAt(0)&&(I=I.substring(1));I=k.queryToObject(I);J=dojo.cookie(J);var K=new Date;I&&I.access_token?J=a.mixin({},I,{token:I.access_token,expires:new Date(K.setSeconds(K.getSeconds()+Number(I.expires_in)))}):J&&(J=g.parse(J));J&&u.registerToken({server:H.portalUrl,token:J.token,userId:J.email||J.username,expires:J.expires?new Date(J.expires):(new Date).setHours((new Date).getHours()+2),ssl:J.ssl||!1});return J}
function C(J){var I=new e,K=(window.location&&window.location.pathname).replace(/^.*\//,"").replace(/\?.*$/,"").split(".html")[0],R=c().split("/"),W=["organization","content"],P={portal:H,portalUser:J,pageName:K,cookie:J&&J.cookie,esriPortalConfig:G,i18n:r,hashParts:R};R=H.isPortal||J&&J.orgId&&0<J.orgId.length||H.id&&0<H.id.length;R=!R||R&&(D.hasModernHomePageEnabled(H)||D.hasLegacyHomePageDefaults(H));var S=K.toLowerCase();if("index"===S||""===K||"home-mobile"===S)K=R?"home":"home-mobile",P.pageName=
K;"viewer"===S&&(K="mobilemap",P.pageName=K);!J&&H.isPortal&&"private"===H.access&&(W=W.concat(["groups","gallery"]));if(J||-1===d.indexOf(W,K))K||(K="index");else return window.location="signin.html?returnUrl\x3d"+encodeURIComponent(window.location.href),I.resolve(!0),I;"gallery2"===K&&(K="gallery");y(["./pages/"+K],function(L){var aa=new L(P);aa.startup();aa.on("ready",function(){aa.set("isLoaded",!0);I.resolve(aa)});aa.on("error",function(ba){I.reject(ba)})});return I}function F(){var J=new e,
I=B(G.cookieName||"esri_auth");I?H.signIn().then(function(K){K||(window.location="signin.html?returnUrl\x3d"+encodeURIComponent(window.location.href),J.resolve(null));u.checkAppAccess(H.portalUrl,"arcgisonline").always(function(R){K=new E(a.mixin(H.user,{cookie:I,credential:K.credential,portal:H,viewOnly:!(!R||!R.viewOnly)}));K.getLicenseInfo().then(function(){H.portalUser=K;esriGeowConfig=a.mixin(esriGeowConfig,{userInfo:K,portal:H,userRole:K.userRole});A.setCookies(H);H.allSSL&&"https:"!==window.location.protocol?
(window.location=window.location.href.replace("http:","https:"),J.resolve(null)):J.resolve(K)}.bind(this))}.bind(this))}.bind(this)):J.resolve(null);return J}l(".js-page-loader .loader-text").attr("innerHTML",r.common.loading);window.document.title=r.common.arcgis;var G=esriGeowConfig,H=new z(G.restBaseUrl);n.defaults.io.corsEnabledServers.push(G.deployRoot);n.defaults.io.corsEnabledServers.push("http://"+location.host);n.defaults.io.corsEnabledServers.push("https://"+location.host);n.defaults.io.proxyUrl=
G.proxyUrl;H.on("load",function(){return F().then(C).then(function(J){l(".js-page-loader").removeClass("is-active");l(".js-content-wrapper").removeClass("hide")},function(J){!J||498!==J.httpCode&&499!==J.httpCode||(window.location="signin.html?returnUrl\x3d"+encodeURIComponent(window.location.href))})});H.on("error",function(J){!J||498!==J.httpCode&&499!==J.httpCode||(window.location="signin.html?returnUrl\x3d"+encodeURIComponent(window.location.href))})}(function(){Element.prototype.matches||(Element.prototype.matches=
Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(B){var C=this;do{if(C.matches(B))return C;C=C.parentElement||C.parentNode}while(null!==C&&1===C.nodeType);return null})})();A.checkSharedCookie();w.checkSettings().then(function(B){B.redirected||v()})});
